var B0=Object.defineProperty,G0=Object.defineProperties;var N0=Object.getOwnPropertyDescriptors;var Uu=Object.getOwnPropertySymbols;var z0=Object.prototype.hasOwnProperty,V0=Object.prototype.propertyIsEnumerable;var uo=(o,t,e)=>t in o?B0(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,hi=(o,t)=>{for(var e in t||(t={}))z0.call(t,e)&&uo(o,e,t[e]);if(Uu)for(var e of Uu(t))V0.call(t,e)&&uo(o,e,t[e]);return o},ir=(o,t)=>G0(o,N0(t));var _=(o,t,e)=>(uo(o,typeof t!="symbol"?t+"":t,e),e);const Y0=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}};Y0();var W0=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function U0(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Zv={exports:{}};(function(o,t){(function(r,i){o.exports=i()})(W0,function(){return function(e){var r={};function i(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=r,i.d=function(s,a,n){i.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:n})},i.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,a){if(a&1&&(s=i(s)),a&8||a&4&&typeof s=="object"&&s&&s.__esModule)return s;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:s}),a&2&&typeof s!="string")for(var h in s)i.d(n,h,function(u){return s[u]}.bind(null,h));return n},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=1528)}([function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}function s(l,f,c){var d=c?l[f]:Object.getOwnPropertyDescriptor(l,f);return!c&&d.value&&typeof d.value=="object"&&(d=d.value),d&&i(d)?(typeof d.enumerable=="undefined"&&(d.enumerable=!0),typeof d.configurable=="undefined"&&(d.configurable=!0),d):!1}function a(l,f){var c=Object.getOwnPropertyDescriptor(l,f);return c?(c.value&&typeof c.value=="object"&&(c=c.value),c.configurable===!1):!1}function n(l,f,c,d){for(var v in f)if(!!f.hasOwnProperty(v)){var p=s(f,v,c);if(p!==!1){var g=d||l;if(a(g.prototype,v)){if(u.ignoreFinals)continue;throw new Error("cannot override final property '"+v+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(l.prototype,v,p)}else l.prototype[v]=f[v]}}function h(l,f){if(!!f){Array.isArray(f)||(f=[f]);for(var c=0;c<f.length;c++)n(l,f[c].prototype||f[c])}}function u(l){l||(l={});var f,c;if(l.initialize){if(typeof l.initialize!="function")throw new Error("initialize must be a function");f=l.initialize,delete l.initialize}else if(l.Extends){var d=l.Extends;f=function(){d.apply(this,arguments)}}else f=function(){};l.Extends?(f.prototype=Object.create(l.Extends.prototype),f.prototype.constructor=f,c=l.Extends,delete l.Extends):f.prototype.constructor=f;var v=null;return l.Mixins&&(v=l.Mixins,delete l.Mixins),h(f,v),n(f,l,!0,c),f}u.extend=n,u.mixin=h,u.ignoreFinals=!1,e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=typeof s;return!s||h==="number"||h==="string"?n:s.hasOwnProperty(a)&&s[a]!==void 0?s[a]:n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(124),n=new s({initialize:function(u,l){this.x=0,this.y=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0):(l===void 0&&(l=u),this.x=u||0,this.y=l||0)},clone:function(){return new n(this.x,this.y)},copy:function(h){return this.x=h.x||0,this.y=h.y||0,this},setFromObject:function(h){return this.x=h.x||0,this.y=h.y||0,this},set:function(h,u){return u===void 0&&(u=h),this.x=h,this.y=u,this},setTo:function(h,u){return this.set(h,u)},setToPolar:function(h,u){return u==null&&(u=1),this.x=Math.cos(h)*u,this.y=Math.sin(h)*u,this},equals:function(h){return this.x===h.x&&this.y===h.y},fuzzyEquals:function(h,u){return a(this.x,h.x,u)&&a(this.y,h.y,u)},angle:function(){var h=Math.atan2(this.y,this.x);return h<0&&(h+=2*Math.PI),h},setAngle:function(h){return this.setToPolar(h,this.length())},add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this},scale:function(h){return isFinite(h)?(this.x*=h,this.y*=h):(this.x=0,this.y=0),this},divide:function(h){return this.x/=h.x,this.y/=h.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(h){var u=h.x-this.x,l=h.y-this.y;return Math.sqrt(u*u+l*l)},distanceSq:function(h){var u=h.x-this.x,l=h.y-this.y;return u*u+l*l},length:function(){var h=this.x,u=this.y;return Math.sqrt(h*h+u*u)},setLength:function(h){return this.normalize().scale(h)},lengthSq:function(){var h=this.x,u=this.y;return h*h+u*u},normalize:function(){var h=this.x,u=this.y,l=h*h+u*u;return l>0&&(l=1/Math.sqrt(l),this.x=h*l,this.y=u*l),this},normalizeRightHand:function(){var h=this.x;return this.x=this.y*-1,this.y=h,this},normalizeLeftHand:function(){var h=this.x;return this.x=this.y,this.y=h*-1,this},dot:function(h){return this.x*h.x+this.y*h.y},cross:function(h){return this.x*h.y-this.y*h.x},lerp:function(h,u){u===void 0&&(u=0);var l=this.x,f=this.y;return this.x=l+u*(h.x-l),this.y=f+u*(h.y-f),this},transformMat3:function(h){var u=this.x,l=this.y,f=h.val;return this.x=f[0]*u+f[3]*l+f[6],this.y=f[1]*u+f[4]*l+f[7],this},transformMat4:function(h){var u=this.x,l=this.y,f=h.val;return this.x=f[0]*u+f[4]*l+f[12],this.y=f[1]*u+f[5]*l+f[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(h){var u=this.length();return u&&u>h&&this.scale(h/u),this},reflect:function(h){return h=h.clone().normalize(),this.subtract(h.scale(2*this.dot(h)))},mirror:function(h){return this.reflect(h).negate()},rotate:function(h){var u=Math.cos(h),l=Math.sin(h);return this.set(u*this.x-l*this.y,l*this.x+u*this.y)}});n.ZERO=new n,n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.UP=new n(0,-1),n.DOWN=new n(0,1),n.ONE=new n(1,1),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(56),n=new s({initialize:function(u,l){u===void 0&&(u=0),l===void 0&&(l=u),this.type=a.POINT,this.x=u,this.y=l},setTo:function(h,u){return h===void 0&&(h=0),u===void 0&&(u=h),this.x=h,this.y=u,this}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(24),n=i(20),h=new s({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},existing:function(u){return(u.renderCanvas||u.renderWebGL)&&this.displayList.add(u),u.preUpdate&&this.updateList.add(u),u},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(u,l){h.prototype.hasOwnProperty(u)||(h.prototype[u]=l)},h.remove=function(u){h.prototype.hasOwnProperty(u)&&delete h.prototype[u]},a.register("GameObjectFactory",h,"add"),e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(!s||typeof s=="number")return n;if(s.hasOwnProperty(a))return s[a];if(a.indexOf(".")!==-1){for(var h=a.split("."),u=s,l=n,f=0;f<h.length;f++)if(u.hasOwnProperty(h[f]))l=u[h[f]],u=u[h[f]];else{l=n;break}return l}else return n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){if(typeof s!="object"||s.nodeType||s===s.window)return!1;try{if(s.constructor&&!{}.hasOwnProperty.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={},s={install:function(a){for(var n in i)a[n]=i[n]},register:function(a,n){i[a]=n},destroy:function(){i={}}};e.exports=s},function(e,r,i){var s=Object.prototype.hasOwnProperty,a="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(a=!1));function h(c,d,v){this.fn=c,this.context=d,this.once=v||!1}function u(c,d,v,p,g){if(typeof v!="function")throw new TypeError("The listener must be a function");var m=new h(v,p||c,g),x=a?a+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],m]:c._events[x].push(m):(c._events[x]=m,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function f(){this._events=new n,this._eventsCount=0}f.prototype.eventNames=function(){var d=[],v,p;if(this._eventsCount===0)return d;for(p in v=this._events)s.call(v,p)&&d.push(a?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(v)):d},f.prototype.listeners=function(d){var v=a?a+d:d,p=this._events[v];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,m=p.length,x=new Array(m);g<m;g++)x[g]=p[g].fn;return x},f.prototype.listenerCount=function(d){var v=a?a+d:d,p=this._events[v];return p?p.fn?1:p.length:0},f.prototype.emit=function(d,v,p,g,m,x){var y=a?a+d:d;if(!this._events[y])return!1;var T=this._events[y],S=arguments.length,C,E;if(T.fn){switch(T.once&&this.removeListener(d,T.fn,void 0,!0),S){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,v),!0;case 3:return T.fn.call(T.context,v,p),!0;case 4:return T.fn.call(T.context,v,p,g),!0;case 5:return T.fn.call(T.context,v,p,g,m),!0;case 6:return T.fn.call(T.context,v,p,g,m,x),!0}for(E=1,C=new Array(S-1);E<S;E++)C[E-1]=arguments[E];T.fn.apply(T.context,C)}else{var P=T.length,M;for(E=0;E<P;E++)switch(T[E].once&&this.removeListener(d,T[E].fn,void 0,!0),S){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,v);break;case 3:T[E].fn.call(T[E].context,v,p);break;case 4:T[E].fn.call(T[E].context,v,p,g);break;default:if(!C)for(M=1,C=new Array(S-1);M<S;M++)C[M-1]=arguments[M];T[E].fn.apply(T[E].context,C)}}return!0},f.prototype.on=function(d,v,p){return u(this,d,v,p,!1)},f.prototype.once=function(d,v,p){return u(this,d,v,p,!0)},f.prototype.removeListener=function(d,v,p,g){var m=a?a+d:d;if(!this._events[m])return this;if(!v)return l(this,m),this;var x=this._events[m];if(x.fn)x.fn===v&&(!g||x.once)&&(!p||x.context===p)&&l(this,m);else{for(var y=0,T=[],S=x.length;y<S;y++)(x[y].fn!==v||g&&!x[y].once||p&&x[y].context!==p)&&T.push(x[y]);T.length?this._events[m]=T.length===1?T[0]:T:l(this,m)}return this},f.prototype.removeAllListeners=function(d){var v;return d?(v=a?a+d:d,this._events[v]&&l(this,v)):(this._events=new n,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=a,f.EventEmitter=f,e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(57),n=i(171),h=i(306),u=i(56),l=i(47),f=i(174),c=new s({initialize:function(v,p,g,m){v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),this.type=u.RECTANGLE,this.x=v,this.y=p,this.width=g,this.height=m},contains:function(d,v){return a(this,d,v)},getPoint:function(d,v){return n(this,d,v)},getPoints:function(d,v,p){return h(this,d,v,p)},getRandomPoint:function(d){return f(this,d)},setTo:function(d,v,p,g){return this.x=d,this.y=v,this.width=p,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(d,v){return v===void 0&&(v=d),this.x=d,this.y=v,this},setSize:function(d,v){return v===void 0&&(v=d),this.width=d,this.height=v,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(d){return d===void 0&&(d=new l),d.setTo(this.x,this.y,this.right,this.y),d},getLineB:function(d){return d===void 0&&(d=new l),d.setTo(this.right,this.y,this.right,this.bottom),d},getLineC:function(d){return d===void 0&&(d=new l),d.setTo(this.right,this.bottom,this.x,this.bottom),d},getLineD:function(d){return d===void 0&&(d=new l),d.setTo(this.x,this.bottom,this.x,this.y),d},left:{get:function(){return this.x},set:function(d){d>=this.right?this.width=0:this.width=this.right-d,this.x=d}},right:{get:function(){return this.x+this.width},set:function(d){d<=this.x?this.width=0:this.width=d-this.x}},top:{get:function(){return this.y},set:function(d){d>=this.bottom?this.height=0:this.height=this.bottom-d,this.y=d}},bottom:{get:function(){return this.y+this.height},set:function(d){d<=this.y?this.height=0:this.height=d-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Alpha:i(607),AlphaSingle:i(303),BlendMode:i(304),ComputedSize:i(608),Crop:i(609),Depth:i(305),Flip:i(610),GetBounds:i(611),Mask:i(309),Origin:i(632),PathFollower:i(633),Pipeline:i(167),ScrollFactor:i(312),Size:i(634),Texture:i(635),TextureCrop:i(636),Tint:i(637),ToJSON:i(176),Transform:i(313),TransformMatrix:i(25),Visible:i(314)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(s){for(var a="",n=0;n<s;++n)n>0&&(a+=`
else `),n<s-1&&(a+="if(test == "+n+".0){}");return a}e.exports={getTintFromFloats:function(s,a,n,h){var u=(s*255|0)&255,l=(a*255|0)&255,f=(n*255|0)&255,c=(h*255|0)&255;return(c<<24|u<<16|l<<8|f)>>>0},getTintAppendFloatAlpha:function(s,a){var n=(a*255|0)&255;return(n<<24|s)>>>0},getTintAppendFloatAlphaAndSwap:function(s,a){var n=(s>>16|0)&255,h=(s>>8|0)&255,u=(s|0)&255,l=(a*255|0)&255;return(l<<24|u<<16|h<<8|n)>>>0},getFloatsFromUintRGB:function(s){var a=(s>>16|0)&255,n=(s>>8|0)&255,h=(s|0)&255;return[a/255,n/255,h/255]},checkShaderMax:function(s,a){(!a||a===-1)&&(a=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS));for(var n=s.createShader(s.FRAGMENT_SHADER),h=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var u=h.replace(/%forloop%/gi,i(a));if(s.shaderSource(n,u),s.compileShader(n),!s.getShaderParameter(n,s.COMPILE_STATUS))a=a/2|0;else break}return a},parseFragmentShaderMaxTextures:function(s,a){if(!s)return"";for(var n="",h=0;h<a;h++)h>0&&(n+=`
	else `),h<a-1&&(n+="if (outTexId < "+h+".5)"),n+=`
	{`,n+=`
		texture = texture2D(uMainSampler[`+h+"], outTexCoord);",n+=`
	}`;return s=s.replace(/%count%/gi,a.toString()),s.replace(/%forloop%/gi,n)}}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(193),a=i(6),n=function(h,u,l){var f=a(h,u,null);if(f===null)return l;if(Array.isArray(f))return s.RND.pick(f);if(typeof f=="object"){if(f.hasOwnProperty("randInt"))return s.RND.integerInRange(f.randInt[0],f.randInt[1]);if(f.hasOwnProperty("randFloat"))return s.RND.realInRange(f.randFloat[0],f.randFloat[1])}else if(typeof f=="function")return f(u);return f};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(176),n=i(101),h=i(9),u=i(75),l=i(20),f=new s({Extends:h,initialize:function(d,v){h.call(this),this.scene=d,this.displayList=null,this.type=v,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this),d.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(c,d){return this.data||(this.data=new n(this)),this.data.set(c,d),this},incData:function(c,d){return this.data||(this.data=new n(this)),this.data.inc(c,d),this},toggleData:function(c){return this.data||(this.data=new n(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new n(this)),this.data.get(c)},setInteractive:function(c,d,v){return this.scene.sys.input.enable(this,c,d,v),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(c){return!(f.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,d=this.parentContainer,v=[];d&&(v.unshift(d.getIndex(c)),c=d,d.parentContainer);)d=d.parentContainer;return this.displayList?v.unshift(this.displayList.getIndex(c)):v.unshift(this.scene.sys.displayList.getIndex(c)),v},addToDisplayList:function(c){return c===void 0&&(c=this.scene.sys.displayList),this.displayList&&this.displayList!==c&&this.removeFromDisplayList(),c.exists(this)||(this.displayList=c,c.add(this,!0),c.queueDepthSort(),this.emit(u.ADDED_TO_SCENE,this,this.scene),c.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var c=this.displayList||this.scene.sys.displayList;return c.exists(this)&&(c.remove(this,!0),c.queueDepthSort(),this.displayList=null,this.emit(u.REMOVED_FROM_SCENE,this,this.scene),c.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(c){!this.scene||this.ignoreDestroy||(c===void 0&&(c=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(u.DESTROY,this,c),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});f.RENDER_MASK=15,e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(24),n=i(20),h=new s({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(u,l){h.prototype.hasOwnProperty(u)||(h.prototype[u]=l)},h.remove=function(u){h.prototype.hasOwnProperty(u)&&delete h.prototype[u]},a.register("GameObjectCreator",h,"make"),e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(7),a=function(){var n,h,u,l,f,c,d=arguments[0]||{},v=1,p=arguments.length,g=!1;for(typeof d=="boolean"&&(g=d,d=arguments[1]||{},v=2),p===v&&(d=this,--v);v<p;v++)if((n=arguments[v])!=null)for(h in n)u=d[h],l=n[h],d!==l&&(g&&l&&(s(l)||(f=Array.isArray(l)))?(f?(f=!1,c=u&&Array.isArray(u)?u:[]):c=u&&s(u)?u:{},d[h]=a(g,c,l)):l!==void 0&&(d[h]=l));return d};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return Math.max(a,Math.min(n,s))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(25),a=new s,n=new s,h=new s,u={camera:a,sprite:n,calc:h},l=function(f,c,d){var v=a,p=n,g=h;return p.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY),v.copyFrom(c.matrix),d?(v.multiplyWithOffset(d,-c.scrollX*f.scrollFactorX,-c.scrollY*f.scrollFactorY),p.e=f.x,p.f=f.y):(p.e-=c.scrollX*f.scrollFactorX,p.f-=c.scrollY*f.scrollFactorY),v.multiply(p,g),u};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:i(656),BOOT:i(657),CREATE:i(658),DESTROY:i(659),PAUSE:i(660),POST_UPDATE:i(661),PRE_RENDER:i(662),PRE_UPDATE:i(663),READY:i(664),REMOVED_FROM_SCENE:i(665),RENDER:i(666),RESUME:i(667),SHUTDOWN:i(668),SLEEP:i(669),START:i(670),TRANSITION_COMPLETE:i(671),TRANSITION_INIT:i(672),TRANSITION_OUT:i(673),TRANSITION_START:i(674),TRANSITION_WAKE:i(675),UPDATE:i(676),WAKE:i(677)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BLUR:i(612),BOOT:i(613),CONTEXT_LOST:i(614),CONTEXT_RESTORED:i(615),DESTROY:i(616),FOCUS:i(617),HIDDEN:i(618),PAUSE:i(619),POST_RENDER:i(620),POST_STEP:i(621),PRE_RENDER:i(622),PRE_STEP:i(623),READY:i(624),RESUME:i(625),STEP:i(626),VISIBLE:i(627)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(95),h=i(2),u=i(155),l=i(240),f=i(517),c=i(156),d=new s({initialize:function(p,g){this.loader=p,this.cache=h(g,"cache",!1),this.type=h(g,"type",!1),this.key=h(g,"key",!1);var m=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+m),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var x=h(g,"url");x===void 0?x=p.path+m+"."+h(g,"extension",""):typeof x=="string"&&!x.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(x=p.path+x),this.url=x,this.src="",this.xhrSettings=c(h(g,"responseType",void 0)),h(g,"xhrSettings",!1)&&(this.xhrSettings=l(this.xhrSettings,h(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?a.FILE_POPULATED:a.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=h(g,"config",{}),this.multiFile,this.linkFile},setLink:function(v){this.linkFile=v,v.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===a.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=a.FILE_LOADING,this.src=u(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=f(this,this.loader.xhr))},onLoad:function(v,p){var g=v.responseURL&&(v.responseURL.indexOf("file://")===0||v.responseURL.indexOf("capacitor://")===0),m=g&&p.target.status===0,x=!(p.target&&p.target.status!==200)||m;v.readyState===4&&v.status>=400&&v.status<=599&&(x=!1),this.state=a.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,x)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(v){v.lengthComputable&&(this.bytesLoaded=v.loaded,this.bytesTotal=v.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=a.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=a.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=a.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(v){v===void 0&&(v=this.data);var p=this.key,g=this.type;this.loader.emit(n.FILE_COMPLETE,p,g,v),this.loader.emit(n.FILE_KEY_COMPLETE+g+"-"+p,p,g,v),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});d.createObjectURL=function(v,p,g){if(typeof URL=="function")v.src=URL.createObjectURL(p);else{var m=new FileReader;m.onload=function(){v.removeAttribute("crossOrigin"),v.src="data:"+(p.type||g)+";base64,"+m.result.split(",")[1]},m.onerror=v.onerror,m.readAsDataURL(p)}},d.revokeObjectURL=function(v){typeof URL=="function"&&URL.revokeObjectURL(v.src)},e.exports=d},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={},s={},a={};a.register=function(n,h,u,l){l===void 0&&(l=!1),i[n]={plugin:h,mapping:u,custom:l}},a.registerCustom=function(n,h,u,l){s[n]={plugin:h,mapping:u,data:l}},a.hasCore=function(n){return i.hasOwnProperty(n)},a.hasCustom=function(n){return s.hasOwnProperty(n)},a.getCore=function(n){return i[n]},a.getCustom=function(n){return s[n]},a.getCustomClass=function(n){return s.hasOwnProperty(n)?s[n].plugin:null},a.remove=function(n){i.hasOwnProperty(n)&&delete i[n]},a.removeCustom=function(n){s.hasOwnProperty(n)&&delete s[n]},a.destroyCorePlugins=function(){for(var n in i)i.hasOwnProperty(n)&&delete i[n]},a.destroyCustomPlugins=function(){for(var n in s)s.hasOwnProperty(n)&&delete s[n]},e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(14),n=i(3),h=new s({initialize:function(l,f,c,d,v,p){l===void 0&&(l=1),f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d=1),v===void 0&&(v=0),p===void 0&&(p=0),this.matrix=new Float32Array([l,f,c,d,v,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(u){this.matrix[0]=u}},b:{get:function(){return this.matrix[1]},set:function(u){this.matrix[1]=u}},c:{get:function(){return this.matrix[2]},set:function(u){this.matrix[2]=u}},d:{get:function(){return this.matrix[3]},set:function(u){this.matrix[3]=u}},e:{get:function(){return this.matrix[4]},set:function(u){this.matrix[4]=u}},f:{get:function(){return this.matrix[5]},set:function(u){this.matrix[5]=u}},tx:{get:function(){return this.matrix[4]},set:function(u){this.matrix[4]=u}},ty:{get:function(){return this.matrix[5]},set:function(u){this.matrix[5]=u}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var u=this.matrix,l=u[0],f=u[1],c=u[2],d=u[3];return l||f?f>0?Math.acos(l/this.scaleX):-Math.acos(l/this.scaleX):c||d?a.TAU-(d>0?Math.acos(-c/this.scaleY):-Math.acos(c/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var u=this.matrix;return u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=0,u[5]=0,this},translate:function(u,l){var f=this.matrix;return f[4]=f[0]*u+f[2]*l+f[4],f[5]=f[1]*u+f[3]*l+f[5],this},scale:function(u,l){var f=this.matrix;return f[0]*=u,f[1]*=u,f[2]*=l,f[3]*=l,this},rotate:function(u){var l=Math.sin(u),f=Math.cos(u),c=this.matrix,d=c[0],v=c[1],p=c[2],g=c[3];return c[0]=d*f+p*l,c[1]=v*f+g*l,c[2]=d*-l+p*f,c[3]=v*-l+g*f,this},multiply:function(u,l){var f=this.matrix,c=u.matrix,d=f[0],v=f[1],p=f[2],g=f[3],m=f[4],x=f[5],y=c[0],T=c[1],S=c[2],C=c[3],E=c[4],P=c[5],M=l===void 0?this:l;return M.a=y*d+T*p,M.b=y*v+T*g,M.c=S*d+C*p,M.d=S*v+C*g,M.e=E*d+P*p+m,M.f=E*v+P*g+x,M},multiplyWithOffset:function(u,l,f){var c=this.matrix,d=u.matrix,v=c[0],p=c[1],g=c[2],m=c[3],x=c[4],y=c[5],T=l*v+f*g+x,S=l*p+f*m+y,C=d[0],E=d[1],P=d[2],M=d[3],R=d[4],A=d[5];return c[0]=C*v+E*g,c[1]=C*p+E*m,c[2]=P*v+M*g,c[3]=P*p+M*m,c[4]=R*v+A*g+T,c[5]=R*p+A*m+S,this},transform:function(u,l,f,c,d,v){var p=this.matrix,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],S=p[5];return p[0]=u*g+l*x,p[1]=u*m+l*y,p[2]=f*g+c*x,p[3]=f*m+c*y,p[4]=d*g+v*x+T,p[5]=d*m+v*y+S,this},transformPoint:function(u,l,f){f===void 0&&(f={x:0,y:0});var c=this.matrix,d=c[0],v=c[1],p=c[2],g=c[3],m=c[4],x=c[5];return f.x=u*d+l*p+m,f.y=u*v+l*g+x,f},invert:function(){var u=this.matrix,l=u[0],f=u[1],c=u[2],d=u[3],v=u[4],p=u[5],g=l*d-f*c;return u[0]=d/g,u[1]=-f/g,u[2]=-c/g,u[3]=l/g,u[4]=(c*p-d*v)/g,u[5]=-(l*p-f*v)/g,this},copyFrom:function(u){var l=this.matrix;return l[0]=u.a,l[1]=u.b,l[2]=u.c,l[3]=u.d,l[4]=u.e,l[5]=u.f,this},copyFromArray:function(u){var l=this.matrix;return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],this},copyToContext:function(u){var l=this.matrix;return u.transform(l[0],l[1],l[2],l[3],l[4],l[5]),u},setToContext:function(u){var l=this.matrix;return u.setTransform(l[0],l[1],l[2],l[3],l[4],l[5]),u},copyToArray:function(u){var l=this.matrix;return u===void 0?u=[l[0],l[1],l[2],l[3],l[4],l[5]]:(u[0]=l[0],u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5]),u},setTransform:function(u,l,f,c,d,v){var p=this.matrix;return p[0]=u,p[1]=l,p[2]=f,p[3]=c,p[4]=d,p[5]=v,this},decomposeMatrix:function(){var u=this.decomposedMatrix,l=this.matrix,f=l[0],c=l[1],d=l[2],v=l[3],p=f*v-c*d;if(u.translateX=l[4],u.translateY=l[5],f||c){var g=Math.sqrt(f*f+c*c);u.rotation=c>0?Math.acos(f/g):-Math.acos(f/g),u.scaleX=g,u.scaleY=p/g}else if(d||v){var m=Math.sqrt(d*d+v*v);u.rotation=Math.PI*.5-(v>0?Math.acos(-d/m):-Math.acos(d/m)),u.scaleX=p/m,u.scaleY=m}else u.rotation=0,u.scaleX=0,u.scaleY=0;return u},applyITRS:function(u,l,f,c,d){var v=this.matrix,p=Math.sin(f),g=Math.cos(f);return v[4]=u,v[5]=l,v[0]=g*c,v[1]=p*c,v[2]=-p*d,v[3]=g*d,this},applyInverse:function(u,l,f){f===void 0&&(f=new n);var c=this.matrix,d=c[0],v=c[1],p=c[2],g=c[3],m=c[4],x=c[5],y=1/(d*g+p*-v);return f.x=g*y*u+-p*y*l+(x*p-m*g)*y,f.y=d*y*l+-v*y*u+(-x*d+m*v)*y,f},getX:function(u,l){return u*this.a+l*this.c+this.e},getY:function(u,l){return u*this.b+l*this.d+this.f},getXRound:function(u,l,f){var c=this.getX(u,l);return f&&(c=Math.round(c)),c},getYRound:function(u,l,f){var c=this.getY(u,l);return f&&(c=Math.round(c)),c},getCSSMatrix:function(){var u=this.matrix;return"matrix("+u[0]+","+u[1]+","+u[2]+","+u[3]+","+u[4]+","+u[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),a=function(n,h,u,l,f,c){n===void 0&&(n=0),h===void 0&&(h=0),u===void 0&&(u=c.width),l===void 0&&(l=c.height),f||(f={});var d=s(f,"isNotEmpty",!1),v=s(f,"isColliding",!1),p=s(f,"hasInterestingFace",!1);n<0&&(u+=n,n=0),h<0&&(l+=h,h=0),n+u>c.width&&(u=Math.max(c.width-n,0)),h+l>c.height&&(l=Math.max(c.height-h,0));for(var g=[],m=h;m<h+l;m++)for(var x=n;x<n+u;x++){var y=c.data[m][x];if(y!==null){if(d&&y.index===-1||v&&!y.collides||p&&!y.hasInterestingFace)continue;g.push(y)}}return g};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u,l){h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=1);var f,c=0,d=s.length;if(l===1)for(f=u;f<d;f++)s[f][a]=n+c*h,c++;else for(f=u;f>=0;f--)s[f][a]=n+c*h,c++;return s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),a=i(13),n=function(h,u,l){u.x=a(l,"x",0),u.y=a(l,"y",0),u.depth=a(l,"depth",0),u.flipX=a(l,"flipX",!1),u.flipY=a(l,"flipY",!1);var f=a(l,"scale",null);typeof f=="number"?u.setScale(f):f!==null&&(u.scaleX=a(f,"x",1),u.scaleY=a(f,"y",1));var c=a(l,"scrollFactor",null);typeof c=="number"?u.setScrollFactor(c):c!==null&&(u.scrollFactorX=a(c,"x",1),u.scrollFactorY=a(c,"y",1)),u.rotation=a(l,"rotation",0);var d=a(l,"angle",null);d!==null&&(u.angle=d),u.alpha=a(l,"alpha",1);var v=a(l,"origin",null);if(typeof v=="number")u.setOrigin(v);else if(v!==null){var p=a(v,"x",.5),g=a(v,"y",.5);u.setOrigin(p,g)}u.blendMode=a(l,"blendMode",s.NORMAL),u.visible=a(l,"visible",!0);var m=a(l,"add",!0);return m&&h.sys.displayList.add(u),u.preUpdate&&h.sys.updateList.add(u),u};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=function(n,h,u,l,f){var c=l.alpha*u.alpha;if(c<=0)return!1;var d=s(u,l,f).calc;return h.globalCompositeOperation=n.blendModes[u.blendMode],h.globalAlpha=c,h.save(),d.setToContext(h),h.imageSmoothingEnabled=!(!n.antialias||u.frame&&u.frame.source.scaleMode),!0};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(33),a=i(192),n=[],h=!1,u=function(){var l=function(y,T,S,C,E){T===void 0&&(T=1),S===void 0&&(S=1),C===void 0&&(C=s.CANVAS),E===void 0&&(E=!1);var P,M=d(C);return M===null?(M={parent:y,canvas:document.createElement("canvas"),type:C},C===s.CANVAS&&n.push(M),P=M.canvas):(M.parent=y,P=M.canvas),E&&(M.parent=P),P.width=T,P.height=S,h&&C===s.CANVAS&&a.disable(P.getContext("2d")),P},f=function(y,T,S){return l(y,T,S,s.CANVAS)},c=function(y,T,S){return l(y,T,S,s.WEBGL)},d=function(y){if(y===void 0&&(y=s.CANVAS),y===s.WEBGL)return null;for(var T=0;T<n.length;T++){var S=n[T];if(!S.parent&&S.type===y)return S}return null},v=function(y){var T=y instanceof HTMLCanvasElement;n.forEach(function(S){(T&&S.canvas===y||!T&&S.parent===y)&&(S.parent=null,S.canvas.width=1,S.canvas.height=1)})},p=function(){var y=0;return n.forEach(function(T){T.parent&&y++}),y},g=function(){return n.length-p()},m=function(){h=!0},x=function(){h=!1};return{create2D:f,create:l,createWebGL:c,disableSmoothing:m,enableSmoothing:x,first:d,free:g,pool:n,remove:v,total:p}};e.exports=u()},function(e,r){var i={};e.exports=i,function(){i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i.extend=function(a,n){var h,u;typeof n=="boolean"?(h=2,u=n):(h=1,u=!0);for(var l=h;l<arguments.length;l++){var f=arguments[l];if(f)for(var c in f)u&&f[c]&&f[c].constructor===Object&&(!a[c]||a[c].constructor===Object)?(a[c]=a[c]||{},i.extend(a[c],u,f[c])):a[c]=f[c]}return a},i.clone=function(a,n){return i.extend({},n,a)},i.keys=function(a){if(Object.keys)return Object.keys(a);var n=[];for(var h in a)n.push(h);return n},i.values=function(a){var n=[];if(Object.keys){for(var h=Object.keys(a),u=0;u<h.length;u++)n.push(a[h[u]]);return n}for(var l in a)n.push(a[l]);return n},i.get=function(a,n,h,u){n=n.split(".").slice(h,u);for(var l=0;l<n.length;l+=1)a=a[n[l]];return a},i.set=function(a,n,h,u,l){var f=n.split(".").slice(u,l);return i.get(a,n,0,-1)[f[f.length-1]]=h,h},i.shuffle=function(a){for(var n=a.length-1;n>0;n--){var h=Math.floor(i.random()*(n+1)),u=a[n];a[n]=a[h],a[h]=u}return a},i.choose=function(a){return a[Math.floor(i.random()*a.length)]},i.isElement=function(a){return typeof HTMLElement!="undefined"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},i.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},i.isFunction=function(a){return typeof a=="function"},i.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},i.isString=function(a){return Object.prototype.toString.call(a)==="[object String]"},i.clamp=function(a,n,h){return a<n?n:a>h?h:a},i.sign=function(a){return a<0?-1:1},i.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-i._nowStartTime},i.random=function(a,n){return a=typeof a!="undefined"?a:0,n=typeof n!="undefined"?n:1,a+s()*(n-a)};var s=function(){return i._seed=(i._seed*9301+49297)%233280,i._seed/233280};i.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.nextId=function(){return i._nextId++},i.indexOf=function(a,n){if(a.indexOf)return a.indexOf(n);for(var h=0;h<a.length;h++)if(a[h]===n)return h;return-1},i.map=function(a,n){if(a.map)return a.map(n);for(var h=[],u=0;u<a.length;u+=1)h.push(n(a[u]));return h},i.topologicalSort=function(a){var n=[],h=[],u=[];for(var l in a)!h[l]&&!u[l]&&i._topologicalSort(l,h,u,a,n);return n},i._topologicalSort=function(a,n,h,u,l){var f=u[a]||[];h[a]=!0;for(var c=0;c<f.length;c+=1){var d=f[c];h[d]||n[d]||i._topologicalSort(d,n,h,u,l)}h[a]=!1,n[a]=!0,l.push(a)},i.chain=function(){for(var a=[],n=0;n<arguments.length;n+=1){var h=arguments[n];h._chained?a.push.apply(a,h._chained):a.push(h)}var u=function(){for(var l,f=new Array(arguments.length),c=0,d=arguments.length;c<d;c++)f[c]=arguments[c];for(c=0;c<a.length;c+=1){var v=a[c].apply(l,f);typeof v!="undefined"&&(l=v)}return l};return u._chained=a,u},i.chainPathBefore=function(a,n,h){return i.set(a,n,i.chain(h,i.get(a,n)))},i.chainPathAfter=function(a,n,h){return i.set(a,n,i.chain(i.get(a,n),h))}}()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={VERSION:"3.55.2",BlendModes:i(35),ScaleModes:i(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(11),n=i(15),h=i(47),u=new s({Extends:n,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Transform,a.Visible],initialize:function(f,c,d){c===void 0&&(c="Shape"),n.call(this,f,c),this.geom=d,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new h,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(l,f){return f===void 0&&(f=1),l===void 0?this.isFilled=!1:(this.fillColor=l,this.fillAlpha=f,this.isFilled=!0),this},setStrokeStyle:function(l,f,c){return c===void 0&&(c=1),l===void 0?this.isStroked=!1:(this.lineWidth=l,this.strokeColor=f,this.strokeAlpha=c,this.isStroked=!0),this},setClosePath:function(l){return this.closePath=l,this},setSize:function(l,f){return this.width=l,this.height=f,this},setDisplaySize:function(l,f){return this.displayWidth=l,this.displayHeight=f,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}}});e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),a=function(n){return n*s.DEG_TO_RAD};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DESTROY:i(743),FADE_IN_COMPLETE:i(744),FADE_IN_START:i(745),FADE_OUT_COMPLETE:i(746),FADE_OUT_START:i(747),FLASH_COMPLETE:i(748),FLASH_START:i(749),FOLLOW_UPDATE:i(750),PAN_COMPLETE:i(751),PAN_START:i(752),POST_RENDER:i(753),PRE_RENDER:i(754),ROTATE_COMPLETE:i(755),ROTATE_START:i(756),SHAKE_COMPLETE:i(757),SHAKE_START:i(758),ZOOM_COMPLETE:i(759),ZOOM_START:i(760)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(103),n=i(328),h=i(188),u=i(329),l=new s({initialize:function(c,d,v,p){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(c,d,v,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(f,c,d,v,p){return v===void 0&&(v=255),p===void 0&&(p=!0),this._locked=!0,this.red=f,this.green=c,this.blue=d,this.alpha=v,this._locked=!1,this.update(p)},setGLTo:function(f,c,d,v){return v===void 0&&(v=1),this._locked=!0,this.redGL=f,this.greenGL=c,this.blueGL=d,this.alphaGL=v,this._locked=!1,this.update(!0)},setFromRGB:function(f){return this._locked=!0,this.red=f.r,this.green=f.g,this.blue=f.b,f.hasOwnProperty("a")&&(this.alpha=f.a),this._locked=!1,this.update(!0)},setFromHSV:function(f,c,d){return h(f,c,d,this)},update:function(f){if(f===void 0&&(f=!1),this._locked)return this;var c=this.r,d=this.g,v=this.b,p=this.a;return this._color=a(c,d,v),this._color32=n(c,d,v,p),this._rgba="rgba("+c+","+d+","+v+","+p/255+")",f&&u(c,d,v,this),this},updateHSV:function(){var f=this.r,c=this.g,d=this.b;return u(f,c,d,this),this},clone:function(){return new l(this.r,this.g,this.b,this.a)},gray:function(f){return this.setTo(f,f,f)},random:function(f,c){f===void 0&&(f=0),c===void 0&&(c=255);var d=Math.floor(f+Math.random()*(c-f)),v=Math.floor(f+Math.random()*(c-f)),p=Math.floor(f+Math.random()*(c-f));return this.setTo(d,v,p)},randomGray:function(f,c){f===void 0&&(f=0),c===void 0&&(c=255);var d=Math.floor(f+Math.random()*(c-f));return this.setTo(d,d,d)},saturate:function(f){return this.s+=f/100,this},desaturate:function(f){return this.s-=f/100,this},lighten:function(f){return this.v+=f/100,this},darken:function(f){return this.v-=f/100,this},brighten:function(f){var c=this.r,d=this.g,v=this.b;return c=Math.max(0,Math.min(255,c-Math.round(255*-(f/100)))),d=Math.max(0,Math.min(255,d-Math.round(255*-(f/100)))),v=Math.max(0,Math.min(255,v-Math.round(255*-(f/100)))),this.setTo(c,d,v)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(f){this.gl[0]=Math.min(Math.abs(f),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(f){this.gl[1]=Math.min(Math.abs(f),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(f){this.gl[2]=Math.min(Math.abs(f),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(f){this.gl[3]=Math.min(Math.abs(f),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(f){f=Math.floor(Math.abs(f)),this.r=Math.min(f,255),this.gl[0]=f/255,this.update(!0)}},green:{get:function(){return this.g},set:function(f){f=Math.floor(Math.abs(f)),this.g=Math.min(f,255),this.gl[1]=f/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(f){f=Math.floor(Math.abs(f)),this.b=Math.min(f,255),this.gl[2]=f/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(f){f=Math.floor(Math.abs(f)),this.a=Math.min(f,255),this.gl[3]=f/255,this.update()}},h:{get:function(){return this._h},set:function(f){this._h=f,h(f,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(f){this._s=f,h(this._h,f,this._v,this)}},v:{get:function(){return this._v},set:function(f){this._v=f,h(this._h,this._s,f,this)}}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u,l){this.x=0,this.y=0,this.z=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):(this.x=h||0,this.y=u||0,this.z=l||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this},max:function(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this},clone:function(){return new a(this.x,this.y,this.z)},addVectors:function(n,h){return this.x=n.x+h.x,this.y=n.y+h.y,this.z=n.z+h.z,this},crossVectors:function(n,h){var u=n.x,l=n.y,f=n.z,c=h.x,d=h.y,v=h.z;return this.x=l*v-f*d,this.y=f*c-u*v,this.z=u*d-l*c,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this},set:function(n,h,u){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=h||0,this.z=u||0),this},setFromMatrixPosition:function(n){return this.fromArray(n.val,12)},setFromMatrixColumn:function(n,h){return this.fromArray(n.val,h*4)},fromArray:function(n,h){return h===void 0&&(h=0),this.x=n[h],this.y=n[h+1],this.z=n[h+2],this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this},addScalar:function(n){return this.x+=n,this.y+=n,this.z+=n,this},addScale:function(n,h){return this.x+=n.x*h,this.y+=n.y*h,this.z+=n.z*h||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this},scale:function(n){return isFinite(n)?(this.x*=n,this.y*=n,this.z*=n):(this.x=0,this.y=0,this.z=0),this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(n){var h=n.x-this.x,u=n.y-this.y,l=n.z-this.z||0;return Math.sqrt(h*h+u*u+l*l)},distanceSq:function(n){var h=n.x-this.x,u=n.y-this.y,l=n.z-this.z||0;return h*h+u*u+l*l},length:function(){var n=this.x,h=this.y,u=this.z;return Math.sqrt(n*n+h*h+u*u)},lengthSq:function(){var n=this.x,h=this.y,u=this.z;return n*n+h*h+u*u},normalize:function(){var n=this.x,h=this.y,u=this.z,l=n*n+h*h+u*u;return l>0&&(l=1/Math.sqrt(l),this.x=n*l,this.y=h*l,this.z=u*l),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z},cross:function(n){var h=this.x,u=this.y,l=this.z,f=n.x,c=n.y,d=n.z;return this.x=u*d-l*c,this.y=l*f-h*d,this.z=h*c-u*f,this},lerp:function(n,h){h===void 0&&(h=0);var u=this.x,l=this.y,f=this.z;return this.x=u+h*(n.x-u),this.y=l+h*(n.y-l),this.z=f+h*(n.z-f),this},applyMatrix3:function(n){var h=this.x,u=this.y,l=this.z,f=n.val;return this.x=f[0]*h+f[3]*u+f[6]*l,this.y=f[1]*h+f[4]*u+f[7]*l,this.z=f[2]*h+f[5]*u+f[8]*l,this},applyMatrix4:function(n){var h=this.x,u=this.y,l=this.z,f=n.val,c=1/(f[3]*h+f[7]*u+f[11]*l+f[15]);return this.x=(f[0]*h+f[4]*u+f[8]*l+f[12])*c,this.y=(f[1]*h+f[5]*u+f[9]*l+f[13])*c,this.z=(f[2]*h+f[6]*u+f[10]*l+f[14])*c,this},transformMat3:function(n){var h=this.x,u=this.y,l=this.z,f=n.val;return this.x=h*f[0]+u*f[3]+l*f[6],this.y=h*f[1]+u*f[4]+l*f[7],this.z=h*f[2]+u*f[5]+l*f[8],this},transformMat4:function(n){var h=this.x,u=this.y,l=this.z,f=n.val;return this.x=f[0]*h+f[4]*u+f[8]*l+f[12],this.y=f[1]*h+f[5]*u+f[9]*l+f[13],this.z=f[2]*h+f[6]*u+f[10]*l+f[14],this},transformCoordinates:function(n){var h=this.x,u=this.y,l=this.z,f=n.val,c=h*f[0]+u*f[4]+l*f[8]+f[12],d=h*f[1]+u*f[5]+l*f[9]+f[13],v=h*f[2]+u*f[6]+l*f[10]+f[14],p=h*f[3]+u*f[7]+l*f[11]+f[15];return this.x=c/p,this.y=d/p,this.z=v/p,this},transformQuat:function(n){var h=this.x,u=this.y,l=this.z,f=n.x,c=n.y,d=n.z,v=n.w,p=v*h+c*l-d*u,g=v*u+d*h-f*l,m=v*l+f*u-c*h,x=-f*h-c*u-d*l;return this.x=p*v+x*-f+g*-d-m*-c,this.y=g*v+x*-c+m*-f-p*-d,this.z=m*v+x*-d+p*-c-g*-f,this},project:function(n){var h=this.x,u=this.y,l=this.z,f=n.val,c=f[0],d=f[1],v=f[2],p=f[3],g=f[4],m=f[5],x=f[6],y=f[7],T=f[8],S=f[9],C=f[10],E=f[11],P=f[12],M=f[13],R=f[14],A=f[15],O=1/(h*p+u*y+l*E+A);return this.x=(h*c+u*g+l*T+P)*O,this.y=(h*d+u*m+l*S+M)*O,this.z=(h*v+u*x+l*C+R)*O,this},projectViewMatrix:function(n,h){return this.applyMatrix4(n).applyMatrix4(h)},unprojectViewMatrix:function(n,h){return this.applyMatrix4(n).applyMatrix4(h)},unproject:function(n,h){var u=n.x,l=n.y,f=n.z,c=n.w,d=this.x-u,v=c-this.y-1-l,p=this.z;return this.x=2*d/f-1,this.y=2*v/c-1,this.z=2*p-1,this.project(h)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});a.ZERO=new a,a.RIGHT=new a(1,0,0),a.LEFT=new a(-1,0,0),a.UP=new a(0,-1,0),a.DOWN=new a(0,1,0),a.FORWARD=new a(0,0,1),a.BACK=new a(0,0,-1),a.ONE=new a(1,1,1),e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(e,r,i){var s={};e.exports=s;var a=i(64),n=i(83),h=i(165),u=i(32),l=i(84),f=i(271);(function(){s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s.create=function(d){var v={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!d.hasOwnProperty("position")&&d.hasOwnProperty("vertices")?d.position=a.centre(d.vertices):d.hasOwnProperty("vertices")||(v.vertices=a.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=u.extend(v,d);return c(p,d),p.setOnCollideWith=function(g,m){return m?this.onCollideWith[g.id]=m:delete this.onCollideWith[g.id],this},p},s.nextGroup=function(d){return d?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var c=function(d,v){v=v||{},s.set(d,{bounds:d.bounds||l.create(d.vertices),positionPrev:d.positionPrev||n.clone(d.position),anglePrev:d.anglePrev||d.angle,vertices:d.vertices,parts:d.parts||[d],isStatic:d.isStatic,isSleeping:d.isSleeping,parent:d.parent||d});var p=d.bounds;if(a.rotate(d.vertices,d.angle,d.position),f.rotate(d.axes,d.angle),l.update(p,d.vertices,d.velocity),s.set(d,{axes:v.axes||d.axes,area:v.area||d.area,mass:v.mass||d.mass,inertia:v.inertia||d.inertia}),d.parts.length===1){var g=d.centerOfMass,m=d.centerOffset,x=p.max.x-p.min.x,y=p.max.y-p.min.y;g.x=-(p.min.x-d.position.x)/x,g.y=-(p.min.y-d.position.y)/y,m.x=x*g.x,m.y=y*g.y}};s.set=function(d,v,p){var g;typeof v=="string"&&(g=v,v={},v[g]=p);for(g in v)if(!!Object.prototype.hasOwnProperty.call(v,g))switch(p=v[g],g){case"isStatic":s.setStatic(d,p);break;case"isSleeping":h.set(d,p);break;case"mass":s.setMass(d,p);break;case"density":s.setDensity(d,p);break;case"inertia":s.setInertia(d,p);break;case"vertices":s.setVertices(d,p);break;case"position":s.setPosition(d,p);break;case"angle":s.setAngle(d,p);break;case"velocity":s.setVelocity(d,p);break;case"angularVelocity":s.setAngularVelocity(d,p);break;case"parts":s.setParts(d,p);break;case"centre":s.setCentre(d,p);break;default:d[g]=p}},s.setStatic=function(d,v){for(var p=0;p<d.parts.length;p++){var g=d.parts[p];g.isStatic=v,v?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},s.setMass=function(d,v){var p=d.inertia/(d.mass/6);d.inertia=p*(v/6),d.inverseInertia=1/d.inertia,d.mass=v,d.inverseMass=1/d.mass,d.density=d.mass/d.area},s.setDensity=function(d,v){s.setMass(d,v*d.area),d.density=v},s.setInertia=function(d,v){d.inertia=v,d.inverseInertia=1/d.inertia},s.setVertices=function(d,v){v[0].body===d?d.vertices=v:d.vertices=a.create(v,d),d.axes=f.fromVertices(d.vertices),d.area=a.area(d.vertices),s.setMass(d,d.density*d.area);var p=a.centre(d.vertices);a.translate(d.vertices,p,-1),s.setInertia(d,s._inertiaScale*a.inertia(d.vertices,d.mass)),a.translate(d.vertices,d.position),l.update(d.bounds,d.vertices,d.velocity)},s.setParts=function(d,v,p){var g;for(v=v.slice(0),d.parts.length=0,d.parts.push(d),d.parent=d,g=0;g<v.length;g++){var m=v[g];m!==d&&(m.parent=d,d.parts.push(m))}if(d.parts.length!==1){if(p=typeof p!="undefined"?p:!0,p){var x=[];for(g=0;g<v.length;g++)x=x.concat(v[g].vertices);a.clockwiseSort(x);var y=a.hull(x),T=a.centre(y);s.setVertices(d,y),a.translate(d.vertices,T)}var S=s._totalProperties(d),C=S.centre.x,E=S.centre.y,P=d.bounds,M=d.centerOfMass,R=d.centerOffset;l.update(P,d.vertices,d.velocity),M.x=-(P.min.x-C)/(P.max.x-P.min.x),M.y=-(P.min.y-E)/(P.max.y-P.min.y),R.x=C,R.y=E,d.area=S.area,d.parent=d,d.position.x=C,d.position.y=E,d.positionPrev.x=C,d.positionPrev.y=E,s.setMass(d,S.mass),s.setInertia(d,S.inertia),s.setPosition(d,S.centre)}},s.setCentre=function(d,v,p){p?(d.positionPrev.x+=v.x,d.positionPrev.y+=v.y,d.position.x+=v.x,d.position.y+=v.y):(d.positionPrev.x=v.x-(d.position.x-d.positionPrev.x),d.positionPrev.y=v.y-(d.position.y-d.positionPrev.y),d.position.x=v.x,d.position.y=v.y)},s.setPosition=function(d,v){var p=n.sub(v,d.position);d.positionPrev.x+=p.x,d.positionPrev.y+=p.y;for(var g=0;g<d.parts.length;g++){var m=d.parts[g];m.position.x+=p.x,m.position.y+=p.y,a.translate(m.vertices,p),l.update(m.bounds,m.vertices,d.velocity)}},s.setAngle=function(d,v){var p=v-d.angle;d.anglePrev+=p;for(var g=0;g<d.parts.length;g++){var m=d.parts[g];m.angle+=p,a.rotate(m.vertices,p,d.position),f.rotate(m.axes,p),l.update(m.bounds,m.vertices,d.velocity),g>0&&n.rotateAbout(m.position,p,d.position,m.position)}},s.setVelocity=function(d,v){d.positionPrev.x=d.position.x-v.x,d.positionPrev.y=d.position.y-v.y,d.velocity.x=v.x,d.velocity.y=v.y,d.speed=n.magnitude(d.velocity)},s.setAngularVelocity=function(d,v){d.anglePrev=d.angle-v,d.angularVelocity=v,d.angularSpeed=Math.abs(d.angularVelocity)},s.translate=function(d,v){s.setPosition(d,n.add(d.position,v))},s.rotate=function(d,v,p){if(!p)s.setAngle(d,d.angle+v);else{var g=Math.cos(v),m=Math.sin(v),x=d.position.x-p.x,y=d.position.y-p.y;s.setPosition(d,{x:p.x+(x*g-y*m),y:p.y+(x*m+y*g)}),s.setAngle(d,d.angle+v)}},s.scale=function(d,v,p,g){var m=0,x=0;g=g||d.position;for(var y=0;y<d.parts.length;y++){var T=d.parts[y];T.scale.x=v,T.scale.y=p,a.scale(T.vertices,v,p,g),T.axes=f.fromVertices(T.vertices),T.area=a.area(T.vertices),s.setMass(T,d.density*T.area),a.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),s.setInertia(T,s._inertiaScale*a.inertia(T.vertices,T.mass)),a.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(m+=T.area,x+=T.inertia),T.position.x=g.x+(T.position.x-g.x)*v,T.position.y=g.y+(T.position.y-g.y)*p,l.update(T.bounds,T.vertices,d.velocity)}d.parts.length>1&&(d.area=m,d.isStatic||(s.setMass(d,d.density*m),s.setInertia(d,x))),d.circleRadius&&(v===p?d.circleRadius*=v:d.circleRadius=null)},s.update=function(d,v,p,g){var m=Math.pow(v*p*d.timeScale,2),x=1-d.frictionAir*p*d.timeScale,y=d.position.x-d.positionPrev.x,T=d.position.y-d.positionPrev.y;d.velocity.x=y*x*g+d.force.x/d.mass*m,d.velocity.y=T*x*g+d.force.y/d.mass*m,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.position.x+=d.velocity.x,d.position.y+=d.velocity.y,d.angularVelocity=(d.angle-d.anglePrev)*x*g+d.torque/d.inertia*m,d.anglePrev=d.angle,d.angle+=d.angularVelocity,d.speed=n.magnitude(d.velocity),d.angularSpeed=Math.abs(d.angularVelocity);for(var S=0;S<d.parts.length;S++){var C=d.parts[S];a.translate(C.vertices,d.velocity),S>0&&(C.position.x+=d.velocity.x,C.position.y+=d.velocity.y),d.angularVelocity!==0&&(a.rotate(C.vertices,d.angularVelocity,d.position),f.rotate(C.axes,d.angularVelocity),S>0&&n.rotateAbout(C.position,d.angularVelocity,d.position,C.position)),l.update(C.bounds,C.vertices,d.velocity)}},s.applyForce=function(d,v,p){d.force.x+=p.x,d.force.y+=p.y;var g={x:v.x-d.position.x,y:v.y-d.position.y};d.torque+=g.x*p.y-g.y*p.x},s._totalProperties=function(d){for(var v={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=d.parts.length===1?0:1;p<d.parts.length;p++){var g=d.parts[p],m=g.mass!==1/0?g.mass:1;v.mass+=m,v.area+=g.area,v.inertia+=g.inertia,v.centre=n.add(v.centre,n.mult(g.position,m))}return v.centre=n.div(v.centre,v.mass),v}})()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.y+s.height-s.height*s.originY};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x-s.width*s.originX};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x+s.width-s.width*s.originX};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.y-s.height*s.originY};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u,l){h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=1);var f,c=0,d=s.length;if(l===1)for(f=u;f<d;f++)s[f][a]+=n+c*h,c++;else for(f=u;f>=0;f--)s[f][a]+=n+c*h,c++;return s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(307),n=i(172),h=i(56),u=i(173),l=i(3),f=new s({initialize:function(d,v,p,g){d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=h.LINE,this.x1=d,this.y1=v,this.x2=p,this.y2=g},getPoint:function(c,d){return a(this,c,d)},getPoints:function(c,d,v){return n(this,c,d,v)},getRandomPoint:function(c){return u(this,c)},setTo:function(c,d,v,p){return c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),this.x1=c,this.y1=d,this.x2=v,this.y2=p,this},getPointA:function(c){return c===void 0&&(c=new l),c.set(this.x1,this.y1),c},getPointB:function(c){return c===void 0&&(c=new l),c.set(this.x2,this.y2),c},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(c){this.x1<=this.x2?this.x1=c:this.x2=c}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(c){this.x1>this.x2?this.x1=c:this.x2=c}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(c){this.y1<=this.y2?this.y1=c:this.y2=c}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(c){this.y1>this.y2?this.y1=c:this.y2=c}}});e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=n||a.fillColor,l=h||a.fillAlpha,f=(u&16711680)>>>16,c=(u&65280)>>>8,d=u&255;s.fillStyle="rgba("+f+","+c+","+d+","+l+")"};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u,l,f){var c=[];f.forEach(function(v){v&&c.push(v)}),this.loader=h,this.type=u,this.key=l,this.multiKeyIndex=h.multiKeyIndex++,this.files=c,this.complete=!1,this.pending=c.length,this.failed=0,this.config={},this.baseURL=h.baseURL,this.path=h.path,this.prefix=h.prefix;for(var d=0;d<c.length;d++)c[d].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(n){return this.files.push(n),n.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(n){var h=this.files.indexOf(n);h!==-1&&this.pending--},onFileFailed:function(n){var h=this.files.indexOf(n);h!==-1&&this.failed++}});e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=s-n,l=a-h;return Math.sqrt(u*u+l*l)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BOOT:i(922),DESTROY:i(923),DRAG_END:i(924),DRAG_ENTER:i(925),DRAG:i(926),DRAG_LEAVE:i(927),DRAG_OVER:i(928),DRAG_START:i(929),DROP:i(930),GAME_OUT:i(931),GAME_OVER:i(932),GAMEOBJECT_DOWN:i(933),GAMEOBJECT_DRAG_END:i(934),GAMEOBJECT_DRAG_ENTER:i(935),GAMEOBJECT_DRAG:i(936),GAMEOBJECT_DRAG_LEAVE:i(937),GAMEOBJECT_DRAG_OVER:i(938),GAMEOBJECT_DRAG_START:i(939),GAMEOBJECT_DROP:i(940),GAMEOBJECT_MOVE:i(941),GAMEOBJECT_OUT:i(942),GAMEOBJECT_OVER:i(943),GAMEOBJECT_POINTER_DOWN:i(944),GAMEOBJECT_POINTER_MOVE:i(945),GAMEOBJECT_POINTER_OUT:i(946),GAMEOBJECT_POINTER_OVER:i(947),GAMEOBJECT_POINTER_UP:i(948),GAMEOBJECT_POINTER_WHEEL:i(949),GAMEOBJECT_UP:i(950),GAMEOBJECT_WHEEL:i(951),MANAGER_BOOT:i(952),MANAGER_PROCESS:i(953),MANAGER_UPDATE:i(954),POINTER_DOWN:i(955),POINTER_DOWN_OUTSIDE:i(956),POINTER_MOVE:i(957),POINTER_OUT:i(958),POINTER_OVER:i(959),POINTER_UP:i(960),POINTER_UP_OUTSIDE:i(961),POINTER_WHEEL:i(962),POINTERLOCK_CHANGE:i(963),PRE_UPDATE:i(964),SHUTDOWN:i(965),START:i(966),UPDATE:i(967)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.y=a+s.height*s.originY,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x=a+s.width*s.originX,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x=a-s.width+s.width*s.originX,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.y=a-s.height+s.height*s.originY,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s.width<=0||s.height<=0?!1:s.x<=a&&s.x+s.width>=a&&s.y<=n&&s.y+s.height>=n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(175),n=i(9),h=i(374),u=i(2),l=i(69),f=i(91),c=i(141),d=i(12),v=i(375),p=new s({Extends:n,initialize:function(m){n.call(this);var x=m.game,y=x.renderer,T=y.gl;this.name=u(m,"name","WebGLPipeline"),this.game=x,this.renderer=y,this.manager,this.gl=T,this.view=x.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=u(m,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=u(m,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=m,this.glReset=!1},boot:function(){var g,m=this.gl,x=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new l().identity());var T=this.renderTargets,S=u(x,"renderTarget",!1);typeof S=="boolean"&&S&&(S=1);var C=y.width,E=y.height;if(typeof S=="number")for(g=0;g<S;g++)T.push(new c(y,C,E,1,0,!0));else if(Array.isArray(S))for(g=0;g<S.length;g++){var P=u(S[g],"scale",1),M=u(S[g],"minFilter",0),R=u(S[g],"autoClear",1);T.push(new c(y,C,E,P,M,R))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(x);var A=this.shaders,O=0;for(g=0;g<A.length;g++)A[g].vertexSize>O&&(O=A[g].vertexSize);var F=u(x,"batchSize",y.config.batchSize);this.vertexCapacity=F*6;var b=new ArrayBuffer(this.vertexCapacity*O);this.vertexData=b,this.bytes=new Uint8Array(b),this.vertexViewF32=new Float32Array(b),this.vertexViewU32=new Uint32Array(b);var w=u(x,"vertices",null);for(w?(this.vertexViewF32.set(w),this.vertexBuffer=y.createVertexBuffer(b,m.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(b.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),g=A.length-1;g>=0;g--)A[g].rebind();this.hasBooted=!0,y.on(f.RESIZE,this.resize,this),y.on(f.PRE_RENDER,this.onPreRender,this),y.on(f.RENDER,this.onRender,this),y.on(f.POST_RENDER,this.onPostRender,this),this.emit(h.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,m){var x=this.renderer;if(g!==this.currentShader||x.currentProgram!==this.currentShader.program){this.flush(),x.resetTextures();var y=this.setVertexBuffer();y&&!m&&(m=!0),g.bind(m,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var m=this.shaders,x=0;x<m.length;x++)if(m[x].name===g)return m[x]},setShadersFromConfig:function(g){var m,x=this.shaders,y=this.renderer;for(m=0;m<x.length;m++)x[m].destroy();var T="vertShader",S="fragShader",C="attributes",E=u(g,T,null),P=d.parseFragmentShaderMaxTextures(u(g,S,null),y.maxTextures),M=u(g,C,null),R=u(g,"shaders",[]),A=R.length;if(A===0)E&&P&&(this.shaders=[new v(this,"default",E,P,a(M))]);else{var O=[];for(m=0;m<A;m++){var F=R[m],b=u(F,"name","default"),w=u(F,T,E),N=d.parseFragmentShaderMaxTextures(u(F,S,P),y.maxTextures),V=u(F,C,M);w&&N&&O.push(new v(this,b,w,N,a(V)))}this.shaders=O}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(g,m){return m===void 0&&(m=g.frame),this.currentUnit=this.renderer.setTextureSource(m.source),this.currentUnit},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},resize:function(g,m){(g!==this.width||m!==this.height)&&this.flush(),this.width=g,this.height=m;for(var x=this.renderTargets,y=0;y<x.length;y++)x[y].resize(g,m);return this.setProjectionMatrix(g,m),this.emit(h.RESIZE,g,m,this),this.onResize(g,m),this},setProjectionMatrix:function(g,m){var x=this.projectionMatrix;if(!x)return this;this.projectionWidth=g,this.projectionHeight=m,x.ortho(0,g,m,0,-1e3,1e3);for(var y=this.shaders,T="uProjectionMatrix",S=0;S<y.length;S++){var C=y[S];C.hasUniform(T)&&(C.resetUniform(T),C.setMatrix4fv(T,!1,x.val,C))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,m=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==m)&&this.setProjectionMatrix(g,m)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var m=this.setVertexBuffer();return g.bind(m),this.currentShader=g,this.emit(h.BIND,this,g),this.onActive(g),this},rebind:function(g){this.setVertexBuffer();for(var m=this.shaders,x=m.length-1;x>=0;x--){var y=m[x].rebind();(!g||y===g)&&(this.currentShader=y)}return this.emit(h.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var g=this.gl,m=this.vertexBuffer;return g.getParameter(g.ARRAY_BUFFER_BINDING)!==m?(g.bindBuffer(g.ARRAY_BUFFER,m),!0):!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(h.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var m=this.gl,x=this.vertexCount,y=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),x===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,x*y)),m.drawArrays(this.topology,0,x)),this.vertexCount=0,this.emit(h.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,m,x,y,T,S,C){var E=this.vertexViewF32,P=this.vertexViewU32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++M]=g,E[++M]=m,E[++M]=x,E[++M]=y,E[++M]=T,E[++M]=S,P[++M]=C,this.vertexCount++},batchQuad:function(g,m,x,y,T,S,C,E,P,M,R,A,O,F,b,w,N,V,W,U){U===void 0&&(U=this.currentUnit);var D=!1;return this.shouldFlush(6)&&(this.flush(),D=!0,U=this.setTexture2D(W)),this.batchVert(m,x,M,R,U,V,F),this.batchVert(y,T,M,O,U,V,w),this.batchVert(S,C,A,O,U,V,N),this.batchVert(m,x,M,R,U,V,F),this.batchVert(S,C,A,O,U,V,N),this.batchVert(E,P,A,R,U,V,b),this.onBatch(g),D},batchTri:function(g,m,x,y,T,S,C,E,P,M,R,A,O,F,b,w,N){N===void 0&&(N=this.currentUnit);var V=!1;return this.shouldFlush(3)&&(this.flush(),V=!0,N=this.setTexture2D(w)),this.batchVert(m,x,E,P,N,b,A),this.batchVert(y,T,E,R,N,b,O),this.batchVert(S,C,M,R,N,b,F),this.onBatch(g),V},drawFillRect:function(g,m,x,y,T,S,C,E){C===void 0&&(C=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),g=Math.floor(g),m=Math.floor(m);var P=Math.floor(g+x),M=Math.floor(m+y),R=this.setTexture2D(C),A=d.getTintAppendFloatAlphaAndSwap(T,S),O=0,F=0,b=1,w=1;E&&(F=1,w=0),this.batchQuad(null,g,m,g,M,P,M,P,m,O,F,b,w,A,A,A,A,0,C,R)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(g),this.currentUnit},bindTexture:function(g,m){m===void 0&&(m=0);var x=this.gl;return x.activeTexture(x.TEXTURE0+m),x.bindTexture(x.TEXTURE_2D,g),this},bindRenderTarget:function(g,m){return this.bindTexture(g.texture,m)},setTime:function(g){return this.set1f(g,this.game.loop.getDuration()),this},set1f:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1f(g,m),this},set2f:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2f(g,m,x),this},set3f:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3f(g,m,x,y),this},set4f:function(g,m,x,y,T,S){return S===void 0&&(S=this.currentShader),S.set4f(g,m,x,y,T),this},set1fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1fv(g,m),this},set2fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2fv(g,m),this},set3fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3fv(g,m),this},set4fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4fv(g,m),this},set1iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1iv(g,m),this},set2iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2iv(g,m),this},set3iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3iv(g,m),this},set4iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4iv(g,m),this},set1i:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1i(g,m),this},set2i:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2i(g,m,x),this},set3i:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3i(g,m,x,y),this},set4i:function(g,m,x,y,T,S){return S===void 0&&(S=this.currentShader),S.set4i(g,m,x,y,T),this},setMatrix2fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(g,m,x),this},setMatrix3fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(g,m,x),this},setMatrix4fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(g,m,x),this},destroy:function(){this.emit(h.DESTROY,this);var g,m=this.shaders;for(g=0;g<m.length;g++)m[g].destroy();var x=this.renderTargets;for(g=0;g<x.length;g++)x[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var y=this.renderer;return y.off(f.RESIZE,this.resize,this),y.off(f.PRE_RENDER,this.onPreRender,this),y.off(f.RENDER,this.onRender,this),y.off(f.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function s(L,I,B){B=B||2;var G=I&&I.length,z=G?I[0]*B:L.length,Y=a(L,0,z,B,!0),X=[];if(!Y||Y.next===Y.prev)return X;var H,$,k,K,Z,j,J;if(G&&(Y=d(L,I,Y,B)),L.length>80*B){H=k=L[0],$=K=L[1];for(var q=B;q<z;q+=B)Z=L[q],j=L[q+1],Z<H&&(H=Z),j<$&&($=j),Z>k&&(k=Z),j>K&&(K=j);J=Math.max(k-H,K-$),J=J!==0?1/J:0}return h(Y,X,B,H,$,J),X}function a(L,I,B,G,z){var Y,X;if(z===D(L,I,B,G)>0)for(Y=I;Y<B;Y+=G)X=V(Y,L[Y],L[Y+1],X);else for(Y=B-G;Y>=I;Y-=G)X=V(Y,L[Y],L[Y+1],X);return X&&M(X,X.next)&&(W(X),X=X.next),X}function n(L,I){if(!L)return L;I||(I=L);var B=L,G;do if(G=!1,!B.steiner&&(M(B,B.next)||P(B.prev,B,B.next)===0)){if(W(B),B=I=B.prev,B===B.next)break;G=!0}else B=B.next;while(G||B!==I);return I}function h(L,I,B,G,z,Y,X){if(!!L){!X&&Y&&x(L,G,z,Y);for(var H=L,$,k;L.prev!==L.next;){if($=L.prev,k=L.next,Y?l(L,G,z,Y):u(L)){I.push($.i/B),I.push(L.i/B),I.push(k.i/B),W(L),L=k.next,H=k.next;continue}if(L=k,L===H){X?X===1?(L=f(n(L),I,B),h(L,I,B,G,z,Y,2)):X===2&&c(L,I,B,G,z,Y):h(n(L),I,B,G,z,Y,1);break}}}}function u(L){var I=L.prev,B=L,G=L.next;if(P(I,B,G)>=0)return!1;for(var z=L.next.next;z!==L.prev;){if(C(I.x,I.y,B.x,B.y,G.x,G.y,z.x,z.y)&&P(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function l(L,I,B,G){var z=L.prev,Y=L,X=L.next;if(P(z,Y,X)>=0)return!1;for(var H=z.x<Y.x?z.x<X.x?z.x:X.x:Y.x<X.x?Y.x:X.x,$=z.y<Y.y?z.y<X.y?z.y:X.y:Y.y<X.y?Y.y:X.y,k=z.x>Y.x?z.x>X.x?z.x:X.x:Y.x>X.x?Y.x:X.x,K=z.y>Y.y?z.y>X.y?z.y:X.y:Y.y>X.y?Y.y:X.y,Z=T(H,$,I,B,G),j=T(k,K,I,B,G),J=L.prevZ,q=L.nextZ;J&&J.z>=Z&&q&&q.z<=j;){if(J!==L.prev&&J!==L.next&&C(z.x,z.y,Y.x,Y.y,X.x,X.y,J.x,J.y)&&P(J.prev,J,J.next)>=0||(J=J.prevZ,q!==L.prev&&q!==L.next&&C(z.x,z.y,Y.x,Y.y,X.x,X.y,q.x,q.y)&&P(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;J&&J.z>=Z;){if(J!==L.prev&&J!==L.next&&C(z.x,z.y,Y.x,Y.y,X.x,X.y,J.x,J.y)&&P(J.prev,J,J.next)>=0)return!1;J=J.prevZ}for(;q&&q.z<=j;){if(q!==L.prev&&q!==L.next&&C(z.x,z.y,Y.x,Y.y,X.x,X.y,q.x,q.y)&&P(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function f(L,I,B){var G=L;do{var z=G.prev,Y=G.next.next;!M(z,Y)&&R(z,G,G.next,Y)&&b(z,Y)&&b(Y,z)&&(I.push(z.i/B),I.push(G.i/B),I.push(Y.i/B),W(G),W(G.next),G=L=Y),G=G.next}while(G!==L);return n(G)}function c(L,I,B,G,z,Y){var X=L;do{for(var H=X.next.next;H!==X.prev;){if(X.i!==H.i&&E(X,H)){var $=N(X,H);X=n(X,X.next),$=n($,$.next),h(X,I,B,G,z,Y),h($,I,B,G,z,Y);return}H=H.next}X=X.next}while(X!==L)}function d(L,I,B,G){var z=[],Y,X,H,$,k;for(Y=0,X=I.length;Y<X;Y++)H=I[Y]*G,$=Y<X-1?I[Y+1]*G:L.length,k=a(L,H,$,G,!1),k===k.next&&(k.steiner=!0),z.push(S(k));for(z.sort(v),Y=0;Y<z.length;Y++)p(z[Y],B),B=n(B,B.next);return B}function v(L,I){return L.x-I.x}function p(L,I){if(I=g(L,I),I){var B=N(I,L);n(I,I.next),n(B,B.next)}}function g(L,I){var B=I,G=L.x,z=L.y,Y=-1/0,X;do{if(z<=B.y&&z>=B.next.y&&B.next.y!==B.y){var H=B.x+(z-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(H<=G&&H>Y){if(Y=H,H===G){if(z===B.y)return B;if(z===B.next.y)return B.next}X=B.x<B.next.x?B:B.next}}B=B.next}while(B!==I);if(!X)return null;if(G===Y)return X;var $=X,k=X.x,K=X.y,Z=1/0,j;B=X;do G>=B.x&&B.x>=k&&G!==B.x&&C(z<K?G:Y,z,k,K,z<K?Y:G,z,B.x,B.y)&&(j=Math.abs(z-B.y)/(G-B.x),b(B,L)&&(j<Z||j===Z&&(B.x>X.x||B.x===X.x&&m(X,B)))&&(X=B,Z=j)),B=B.next;while(B!==$);return X}function m(L,I){return P(L.prev,L,I.prev)<0&&P(I.next,L,L.next)<0}function x(L,I,B,G){var z=L;do z.z===null&&(z.z=T(z.x,z.y,I,B,G)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==L);z.prevZ.nextZ=null,z.prevZ=null,y(z)}function y(L){var I,B,G,z,Y,X,H,$,k=1;do{for(B=L,L=null,Y=null,X=0;B;){for(X++,G=B,H=0,I=0;I<k&&(H++,G=G.nextZ,!!G);I++);for($=k;H>0||$>0&&G;)H!==0&&($===0||!G||B.z<=G.z)?(z=B,B=B.nextZ,H--):(z=G,G=G.nextZ,$--),Y?Y.nextZ=z:L=z,z.prevZ=Y,Y=z;B=G}Y.nextZ=null,k*=2}while(X>1);return L}function T(L,I,B,G,z){return L=32767*(L-B)*z,I=32767*(I-G)*z,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,I=(I|I<<8)&16711935,I=(I|I<<4)&252645135,I=(I|I<<2)&858993459,I=(I|I<<1)&1431655765,L|I<<1}function S(L){var I=L,B=L;do(I.x<B.x||I.x===B.x&&I.y<B.y)&&(B=I),I=I.next;while(I!==L);return B}function C(L,I,B,G,z,Y,X,H){return(z-X)*(I-H)-(L-X)*(Y-H)>=0&&(L-X)*(G-H)-(B-X)*(I-H)>=0&&(B-X)*(Y-H)-(z-X)*(G-H)>=0}function E(L,I){return L.next.i!==I.i&&L.prev.i!==I.i&&!F(L,I)&&(b(L,I)&&b(I,L)&&w(L,I)&&(P(L.prev,L,I.prev)||P(L,I.prev,I))||M(L,I)&&P(L.prev,L,L.next)>0&&P(I.prev,I,I.next)>0)}function P(L,I,B){return(I.y-L.y)*(B.x-I.x)-(I.x-L.x)*(B.y-I.y)}function M(L,I){return L.x===I.x&&L.y===I.y}function R(L,I,B,G){var z=O(P(L,I,B)),Y=O(P(L,I,G)),X=O(P(B,G,L)),H=O(P(B,G,I));return!!(z!==Y&&X!==H||z===0&&A(L,B,I)||Y===0&&A(L,G,I)||X===0&&A(B,L,G)||H===0&&A(B,I,G))}function A(L,I,B){return I.x<=Math.max(L.x,B.x)&&I.x>=Math.min(L.x,B.x)&&I.y<=Math.max(L.y,B.y)&&I.y>=Math.min(L.y,B.y)}function O(L){return L>0?1:L<0?-1:0}function F(L,I){var B=L;do{if(B.i!==L.i&&B.next.i!==L.i&&B.i!==I.i&&B.next.i!==I.i&&R(B,B.next,L,I))return!0;B=B.next}while(B!==L);return!1}function b(L,I){return P(L.prev,L,L.next)<0?P(L,I,L.next)>=0&&P(L,L.prev,I)>=0:P(L,I,L.prev)<0||P(L,L.next,I)<0}function w(L,I){var B=L,G=!1,z=(L.x+I.x)/2,Y=(L.y+I.y)/2;do B.y>Y!=B.next.y>Y&&B.next.y!==B.y&&z<(B.next.x-B.x)*(Y-B.y)/(B.next.y-B.y)+B.x&&(G=!G),B=B.next;while(B!==L);return G}function N(L,I){var B=new U(L.i,L.x,L.y),G=new U(I.i,I.x,I.y),z=L.next,Y=I.prev;return L.next=I,I.prev=L,B.next=z,z.prev=B,G.next=B,B.prev=G,Y.next=G,G.prev=Y,G}function V(L,I,B,G){var z=new U(L,I,B);return G?(z.next=G.next,z.prev=G,G.next.prev=z,G.next=z):(z.prev=z,z.next=z),z}function W(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function U(L,I,B){this.i=L,this.x=I,this.y=B,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(L,I,B,G){var z=I&&I.length,Y=z?I[0]*B:L.length,X=Math.abs(D(L,0,Y,B));if(z)for(var H=0,$=I.length;H<$;H++){var k=I[H]*B,K=H<$-1?I[H+1]*B:L.length;X-=Math.abs(D(L,k,K,B))}var Z=0;for(H=0;H<G.length;H+=3){var j=G[H]*B,J=G[H+1]*B,q=G[H+2]*B;Z+=Math.abs((L[j]-L[q])*(L[J+1]-L[j+1])-(L[j]-L[J])*(L[q+1]-L[j+1]))}return X===0&&Z===0?0:Math.abs((Z-X)/X)};function D(L,I,B,G){for(var z=0,Y=I,X=B-G;Y<B;Y+=G)z+=(L[X]-L[Y])*(L[Y+1]+L[X+1]),X=Y;return z}s.flatten=function(L){for(var I=L[0][0].length,B={vertices:[],holes:[],dimensions:I},G=0,z=0;z<L.length;z++){for(var Y=0;Y<L[z].length;Y++)for(var X=0;X<I;X++)B.vertices.push(L[z][Y][X]);z>0&&(G+=L[z-1].length,B.holes.push(G))}return B},e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=n||a.strokeColor,l=h||a.strokeAlpha,f=(u&16711680)>>>16,c=(u&65280)>>>8,d=u&255;s.strokeStyle="rgba("+f+","+c+","+d+","+l+")",s.lineWidth=a.lineWidth};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(6),f=i(7),c=new s({Extends:n,initialize:function(v,p,g,m,x){var y="json";if(f(p)){var T=p;p=u(T,"key"),g=u(T,"url"),m=u(T,"xhrSettings"),y=u(T,"extension",y),x=u(T,"dataKey",x)}var S={type:"json",cache:v.cacheManager.json,extension:y,responseType:"text",key:p,url:g,xhrSettings:m,config:x};n.call(this,v,S),f(g)&&(x?this.data=l(g,x):this.data=g,this.state=a.FILE_POPULATED)},onProcess:function(){if(this.state!==a.FILE_POPULATED){this.state=a.FILE_PROCESSING;try{var d=JSON.parse(this.xhrLoader.responseText)}catch(p){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),p}var v=this.config;typeof v=="string"?this.data=l(d,v,d):this.data=d}this.onProcessComplete()}});h.register("json",function(d,v,p,g){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new c(this,d[m]));else this.addFile(new c(this,d,v,g,p));return this}),e.exports=c},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(158),a=i(26),n=function(h,u,l,f,c){for(var d=null,v=null,p=null,g=null,m=a(h,u,l,f,null,c),x=0;x<m.length;x++){var y=m[x];y&&(y.collides?(d=s(y.x,y.y-1,!0,c),v=s(y.x,y.y+1,!0,c),p=s(y.x-1,y.y,!0,c),g=s(y.x+1,y.y,!0,c),y.faceTop=!(d&&d.collides),y.faceBottom=!(v&&v.collides),y.faceLeft=!(p&&p.collides),y.faceRight=!(g&&g.collides)):y.resetFaces())}};e.exports=n},function(e,r,i){var s={};e.exports=s;var a=i(83),n=i(32);(function(){s.create=function(h,u){for(var l=[],f=0;f<h.length;f++){var c=h[f],d={x:c.x,y:c.y,index:f,body:u,isInternal:!1,contact:null,offset:null};d.contact={vertex:d,normalImpulse:0,tangentImpulse:0},l.push(d)}return l},s.fromPath=function(h,u){var l=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return h.replace(l,function(c,d,v){f.push({x:parseFloat(d),y:parseFloat(v)})}),s.create(f,u)},s.centre=function(h){for(var u=s.area(h,!0),l={x:0,y:0},f,c,d,v=0;v<h.length;v++)d=(v+1)%h.length,f=a.cross(h[v],h[d]),c=a.mult(a.add(h[v],h[d]),f),l=a.add(l,c);return a.div(l,6*u)},s.mean=function(h){for(var u={x:0,y:0},l=0;l<h.length;l++)u.x+=h[l].x,u.y+=h[l].y;return a.div(u,h.length)},s.area=function(h,u){for(var l=0,f=h.length-1,c=0;c<h.length;c++)l+=(h[f].x-h[c].x)*(h[f].y+h[c].y),f=c;return u?l/2:Math.abs(l)/2},s.inertia=function(h,u){for(var l=0,f=0,c=h,d,v,p=0;p<c.length;p++)v=(p+1)%c.length,d=Math.abs(a.cross(c[v],c[p])),l+=d*(a.dot(c[v],c[v])+a.dot(c[v],c[p])+a.dot(c[p],c[p])),f+=d;return u/6*(l/f)},s.translate=function(h,u,l){var f;if(l)for(f=0;f<h.length;f++)h[f].x+=u.x*l,h[f].y+=u.y*l;else for(f=0;f<h.length;f++)h[f].x+=u.x,h[f].y+=u.y;return h},s.rotate=function(h,u,l){if(u!==0){for(var f=Math.cos(u),c=Math.sin(u),d=0;d<h.length;d++){var v=h[d],p=v.x-l.x,g=v.y-l.y;v.x=l.x+(p*f-g*c),v.y=l.y+(p*c+g*f)}return h}},s.contains=function(h,u){for(var l=0;l<h.length;l++){var f=h[l],c=h[(l+1)%h.length];if((u.x-f.x)*(c.y-f.y)+(u.y-f.y)*(f.x-c.x)>0)return!1}return!0},s.scale=function(h,u,l,f){if(u===1&&l===1)return h;f=f||s.centre(h);for(var c,d,v=0;v<h.length;v++)c=h[v],d=a.sub(c,f),h[v].x=f.x+d.x*u,h[v].y=f.y+d.y*l;return h},s.chamfer=function(h,u,l,f,c){typeof u=="number"?u=[u]:u=u||[8],l=typeof l!="undefined"?l:-1,f=f||2,c=c||14;for(var d=[],v=0;v<h.length;v++){var p=h[v-1>=0?v-1:h.length-1],g=h[v],m=h[(v+1)%h.length],x=u[v<u.length?v:u.length-1];if(x===0){d.push(g);continue}var y=a.normalise({x:g.y-p.y,y:p.x-g.x}),T=a.normalise({x:m.y-g.y,y:g.x-m.x}),S=Math.sqrt(2*Math.pow(x,2)),C=a.mult(n.clone(y),x),E=a.normalise(a.mult(a.add(y,T),.5)),P=a.sub(g,a.mult(E,S)),M=l;l===-1&&(M=Math.pow(x,.32)*1.75),M=n.clamp(M,f,c),M%2===1&&(M+=1);for(var R=Math.acos(a.dot(y,T)),A=R/M,O=0;O<M;O++)d.push(a.add(a.rotate(C,A*O),P))}return d},s.clockwiseSort=function(h){var u=s.mean(h);return h.sort(function(l,f){return a.angle(u,l)-a.angle(u,f)}),h},s.isConvex=function(h){var u=0,l=h.length,f,c,d,v;if(l<3)return null;for(f=0;f<l;f++)if(c=(f+1)%l,d=(f+2)%l,v=(h[c].x-h[f].x)*(h[d].y-h[c].y),v-=(h[c].y-h[f].y)*(h[d].x-h[c].x),v<0?u|=1:v>0&&(u|=2),u===3)return!1;return u!==0?!0:null},s.hull=function(h){var u=[],l=[],f,c;for(h=h.slice(0),h.sort(function(d,v){var p=d.x-v.x;return p!==0?p:d.y-v.y}),c=0;c<h.length;c+=1){for(f=h[c];l.length>=2&&a.cross3(l[l.length-2],l[l.length-1],f)<=0;)l.pop();l.push(f)}for(c=h.length-1;c>=0;c-=1){for(f=h[c];u.length>=2&&a.cross3(u[u.length-2],u[u.length-1],f)<=0;)u.pop();u.push(f)}return u.pop(),l.pop(),u.concat(l)}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(66),n=i(300),h=i(301),u=i(56),l=i(170),f=new s({initialize:function(d,v,p){d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),this.type=u.CIRCLE,this.x=d,this.y=v,this._radius=p,this._diameter=p*2},contains:function(c,d){return a(this,c,d)},getPoint:function(c,d){return n(this,c,d)},getPoints:function(c,d,v){return h(this,c,d,v)},getRandomPoint:function(c){return l(this,c)},setTo:function(c,d,v){return this.x=c,this.y=d,this._radius=v,this._diameter=v*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(c,d){return d===void 0&&(d=c),this.x=c,this.y=d,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this._diameter=c*2}},diameter:{get:function(){return this._diameter},set:function(c){this._diameter=c,this._radius=c*.5}},left:{get:function(){return this.x-this._radius},set:function(c){this.x=c+this._radius}},right:{get:function(){return this.x+this._radius},set:function(c){this.x=c-this._radius}},top:{get:function(){return this.y-this._radius},set:function(c){this.y=c+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(c){this.y=c-this._radius}}});e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(s.radius>0&&a>=s.left&&a<=s.right&&n>=s.top&&n<=s.bottom){var h=(s.x-a)*(s.x-a),u=(s.y-n)*(s.y-n);return h+u<=s.radius*s.radius}else return!1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.sqrt((s.x2-s.x1)*(s.x2-s.x1)+(s.y2-s.y1)*(s.y2-s.y1))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=n-a;return a+((s-a)%h+h)%h};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(39),n=1e-6,h=new s({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new h(this)},set:function(v){return this.copy(v)},setValues:function(v,p,g,m,x,y,T,S,C,E,P,M,R,A,O,F){var b=this.val;return b[0]=v,b[1]=p,b[2]=g,b[3]=m,b[4]=x,b[5]=y,b[6]=T,b[7]=S,b[8]=C,b[9]=E,b[10]=P,b[11]=M,b[12]=R,b[13]=A,b[14]=O,b[15]=F,this},copy:function(v){var p=v.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(v){return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(v,p,g){var m=u.fromQuat(g),x=m.val,y=p.x,T=p.y,S=p.z;return this.setValues(x[0]*y,x[1]*y,x[2]*y,0,x[4]*T,x[5]*T,x[6]*T,0,x[8]*S,x[9]*S,x[10]*S,0,v.x,v.y,v.z,1)},xyz:function(v,p,g){this.identity();var m=this.val;return m[12]=v,m[13]=p,m[14]=g,this},scaling:function(v,p,g){this.zero();var m=this.val;return m[0]=v,m[5]=p,m[10]=g,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var v=this.val,p=v[1],g=v[2],m=v[3],x=v[6],y=v[7],T=v[11];return v[1]=v[4],v[2]=v[8],v[3]=v[12],v[4]=p,v[6]=v[9],v[7]=v[13],v[8]=g,v[9]=x,v[11]=v[14],v[12]=m,v[13]=y,v[14]=T,this},getInverse:function(v){return this.copy(v),this.invert()},invert:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],S=v[6],C=v[7],E=v[8],P=v[9],M=v[10],R=v[11],A=v[12],O=v[13],F=v[14],b=v[15],w=p*T-g*y,N=p*S-m*y,V=p*C-x*y,W=g*S-m*T,U=g*C-x*T,D=m*C-x*S,L=E*O-P*A,I=E*F-M*A,B=E*b-R*A,G=P*F-M*O,z=P*b-R*O,Y=M*b-R*F,X=w*Y-N*z+V*G+W*B-U*I+D*L;return X?(X=1/X,this.setValues((T*Y-S*z+C*G)*X,(m*z-g*Y-x*G)*X,(O*D-F*U+b*W)*X,(M*U-P*D-R*W)*X,(S*B-y*Y-C*I)*X,(p*Y-m*B+x*I)*X,(F*V-A*D-b*N)*X,(E*D-M*V+R*N)*X,(y*z-T*B+C*L)*X,(g*B-p*z-x*L)*X,(A*U-O*V+b*w)*X,(P*V-E*U-R*w)*X,(T*I-y*G-S*L)*X,(p*G-g*I+m*L)*X,(O*N-A*W-F*w)*X,(E*W-P*N+M*w)*X)):this},adjoint:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],S=v[6],C=v[7],E=v[8],P=v[9],M=v[10],R=v[11],A=v[12],O=v[13],F=v[14],b=v[15];return this.setValues(T*(M*b-R*F)-P*(S*b-C*F)+O*(S*R-C*M),-(g*(M*b-R*F)-P*(m*b-x*F)+O*(m*R-x*M)),g*(S*b-C*F)-T*(m*b-x*F)+O*(m*C-x*S),-(g*(S*R-C*M)-T*(m*R-x*M)+P*(m*C-x*S)),-(y*(M*b-R*F)-E*(S*b-C*F)+A*(S*R-C*M)),p*(M*b-R*F)-E*(m*b-x*F)+A*(m*R-x*M),-(p*(S*b-C*F)-y*(m*b-x*F)+A*(m*C-x*S)),p*(S*R-C*M)-y*(m*R-x*M)+E*(m*C-x*S),y*(P*b-R*O)-E*(T*b-C*O)+A*(T*R-C*P),-(p*(P*b-R*O)-E*(g*b-x*O)+A*(g*R-x*P)),p*(T*b-C*O)-y*(g*b-x*O)+A*(g*C-x*T),-(p*(T*R-C*P)-y*(g*R-x*P)+E*(g*C-x*T)),-(y*(P*F-M*O)-E*(T*F-S*O)+A*(T*M-S*P)),p*(P*F-M*O)-E*(g*F-m*O)+A*(g*M-m*P),-(p*(T*F-S*O)-y*(g*F-m*O)+A*(g*S-m*T)),p*(T*M-S*P)-y*(g*M-m*P)+E*(g*S-m*T))},determinant:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],S=v[6],C=v[7],E=v[8],P=v[9],M=v[10],R=v[11],A=v[12],O=v[13],F=v[14],b=v[15],w=p*T-g*y,N=p*S-m*y,V=p*C-x*y,W=g*S-m*T,U=g*C-x*T,D=m*C-x*S,L=E*O-P*A,I=E*F-M*A,B=E*b-R*A,G=P*F-M*O,z=P*b-R*O,Y=M*b-R*F;return w*Y-N*z+V*G+W*B-U*I+D*L},multiply:function(v){var p=this.val,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],S=p[5],C=p[6],E=p[7],P=p[8],M=p[9],R=p[10],A=p[11],O=p[12],F=p[13],b=p[14],w=p[15],N=v.val,V=N[0],W=N[1],U=N[2],D=N[3];return p[0]=V*g+W*T+U*P+D*O,p[1]=V*m+W*S+U*M+D*F,p[2]=V*x+W*C+U*R+D*b,p[3]=V*y+W*E+U*A+D*w,V=N[4],W=N[5],U=N[6],D=N[7],p[4]=V*g+W*T+U*P+D*O,p[5]=V*m+W*S+U*M+D*F,p[6]=V*x+W*C+U*R+D*b,p[7]=V*y+W*E+U*A+D*w,V=N[8],W=N[9],U=N[10],D=N[11],p[8]=V*g+W*T+U*P+D*O,p[9]=V*m+W*S+U*M+D*F,p[10]=V*x+W*C+U*R+D*b,p[11]=V*y+W*E+U*A+D*w,V=N[12],W=N[13],U=N[14],D=N[15],p[12]=V*g+W*T+U*P+D*O,p[13]=V*m+W*S+U*M+D*F,p[14]=V*x+W*C+U*R+D*b,p[15]=V*y+W*E+U*A+D*w,this},multiplyLocal:function(v){var p=this.val,g=v.val;return this.setValues(p[0]*g[0]+p[1]*g[4]+p[2]*g[8]+p[3]*g[12],p[0]*g[1]+p[1]*g[5]+p[2]*g[9]+p[3]*g[13],p[0]*g[2]+p[1]*g[6]+p[2]*g[10]+p[3]*g[14],p[0]*g[3]+p[1]*g[7]+p[2]*g[11]+p[3]*g[15],p[4]*g[0]+p[5]*g[4]+p[6]*g[8]+p[7]*g[12],p[4]*g[1]+p[5]*g[5]+p[6]*g[9]+p[7]*g[13],p[4]*g[2]+p[5]*g[6]+p[6]*g[10]+p[7]*g[14],p[4]*g[3]+p[5]*g[7]+p[6]*g[11]+p[7]*g[15],p[8]*g[0]+p[9]*g[4]+p[10]*g[8]+p[11]*g[12],p[8]*g[1]+p[9]*g[5]+p[10]*g[9]+p[11]*g[13],p[8]*g[2]+p[9]*g[6]+p[10]*g[10]+p[11]*g[14],p[8]*g[3]+p[9]*g[7]+p[10]*g[11]+p[11]*g[15],p[12]*g[0]+p[13]*g[4]+p[14]*g[8]+p[15]*g[12],p[12]*g[1]+p[13]*g[5]+p[14]*g[9]+p[15]*g[13],p[12]*g[2]+p[13]*g[6]+p[14]*g[10]+p[15]*g[14],p[12]*g[3]+p[13]*g[7]+p[14]*g[11]+p[15]*g[15])},premultiply:function(v){return this.multiplyMatrices(v,this)},multiplyMatrices:function(v,p){var g=v.val,m=p.val,x=g[0],y=g[4],T=g[8],S=g[12],C=g[1],E=g[5],P=g[9],M=g[13],R=g[2],A=g[6],O=g[10],F=g[14],b=g[3],w=g[7],N=g[11],V=g[15],W=m[0],U=m[4],D=m[8],L=m[12],I=m[1],B=m[5],G=m[9],z=m[13],Y=m[2],X=m[6],H=m[10],$=m[14],k=m[3],K=m[7],Z=m[11],j=m[15];return this.setValues(x*W+y*I+T*Y+S*k,C*W+E*I+P*Y+M*k,R*W+A*I+O*Y+F*k,b*W+w*I+N*Y+V*k,x*U+y*B+T*X+S*K,C*U+E*B+P*X+M*K,R*U+A*B+O*X+F*K,b*U+w*B+N*X+V*K,x*D+y*G+T*H+S*Z,C*D+E*G+P*H+M*Z,R*D+A*G+O*H+F*Z,b*D+w*G+N*H+V*Z,x*L+y*z+T*$+S*j,C*L+E*z+P*$+M*j,R*L+A*z+O*$+F*j,b*L+w*z+N*$+V*j)},translate:function(v){return this.translateXYZ(v.x,v.y,v.z)},translateXYZ:function(v,p,g){var m=this.val;return m[12]=m[0]*v+m[4]*p+m[8]*g+m[12],m[13]=m[1]*v+m[5]*p+m[9]*g+m[13],m[14]=m[2]*v+m[6]*p+m[10]*g+m[14],m[15]=m[3]*v+m[7]*p+m[11]*g+m[15],this},scale:function(v){return this.scaleXYZ(v.x,v.y,v.z)},scaleXYZ:function(v,p,g){var m=this.val;return m[0]=m[0]*v,m[1]=m[1]*v,m[2]=m[2]*v,m[3]=m[3]*v,m[4]=m[4]*p,m[5]=m[5]*p,m[6]=m[6]*p,m[7]=m[7]*p,m[8]=m[8]*g,m[9]=m[9]*g,m[10]=m[10]*g,m[11]=m[11]*g,this},makeRotationAxis:function(v,p){var g=Math.cos(p),m=Math.sin(p),x=1-g,y=v.x,T=v.y,S=v.z,C=x*y,E=x*T;return this.setValues(C*y+g,C*T-m*S,C*S+m*T,0,C*T+m*S,E*T+g,E*S-m*y,0,C*S-m*T,E*S+m*y,x*S*S+g,0,0,0,0,1)},rotate:function(v,p){var g=this.val,m=p.x,x=p.y,y=p.z,T=Math.sqrt(m*m+x*x+y*y);if(Math.abs(T)<n)return this;T=1/T,m*=T,x*=T,y*=T;var S=Math.sin(v),C=Math.cos(v),E=1-C,P=g[0],M=g[1],R=g[2],A=g[3],O=g[4],F=g[5],b=g[6],w=g[7],N=g[8],V=g[9],W=g[10],U=g[11],D=g[12],L=g[13],I=g[14],B=g[15],G=m*m*E+C,z=x*m*E+y*S,Y=y*m*E-x*S,X=m*x*E-y*S,H=x*x*E+C,$=y*x*E+m*S,k=m*y*E+x*S,K=x*y*E-m*S,Z=y*y*E+C;return this.setValues(P*G+O*z+N*Y,M*G+F*z+V*Y,R*G+b*z+W*Y,A*G+w*z+U*Y,P*X+O*H+N*$,M*X+F*H+V*$,R*X+b*H+W*$,A*X+w*H+U*$,P*k+O*K+N*Z,M*k+F*K+V*Z,R*k+b*K+W*Z,A*k+w*K+U*Z,D,L,I,B)},rotateX:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[4],y=p[5],T=p[6],S=p[7],C=p[8],E=p[9],P=p[10],M=p[11];return p[4]=x*m+C*g,p[5]=y*m+E*g,p[6]=T*m+P*g,p[7]=S*m+M*g,p[8]=C*m-x*g,p[9]=E*m-y*g,p[10]=P*m-T*g,p[11]=M*m-S*g,this},rotateY:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[0],y=p[1],T=p[2],S=p[3],C=p[8],E=p[9],P=p[10],M=p[11];return p[0]=x*m-C*g,p[1]=y*m-E*g,p[2]=T*m-P*g,p[3]=S*m-M*g,p[8]=x*g+C*m,p[9]=y*g+E*m,p[10]=T*g+P*m,p[11]=S*g+M*m,this},rotateZ:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[0],y=p[1],T=p[2],S=p[3],C=p[4],E=p[5],P=p[6],M=p[7];return p[0]=x*m+C*g,p[1]=y*m+E*g,p[2]=T*m+P*g,p[3]=S*m+M*g,p[4]=C*m-x*g,p[5]=E*m-y*g,p[6]=P*m-T*g,p[7]=M*m-S*g,this},fromRotationTranslation:function(v,p){var g=v.x,m=v.y,x=v.z,y=v.w,T=g+g,S=m+m,C=x+x,E=g*T,P=g*S,M=g*C,R=m*S,A=m*C,O=x*C,F=y*T,b=y*S,w=y*C;return this.setValues(1-(R+O),P+w,M-b,0,P-w,1-(E+O),A+F,0,M+b,A-F,1-(E+R),0,p.x,p.y,p.z,1)},fromQuat:function(v){var p=v.x,g=v.y,m=v.z,x=v.w,y=p+p,T=g+g,S=m+m,C=p*y,E=p*T,P=p*S,M=g*T,R=g*S,A=m*S,O=x*y,F=x*T,b=x*S;return this.setValues(1-(M+A),E+b,P-F,0,E-b,1-(C+A),R+O,0,P+F,R-O,1-(C+M),0,0,0,0,1)},frustum:function(v,p,g,m,x,y){var T=1/(p-v),S=1/(m-g),C=1/(x-y);return this.setValues(x*2*T,0,0,0,0,x*2*S,0,0,(p+v)*T,(m+g)*S,(y+x)*C,-1,0,0,y*x*2*C,0)},perspective:function(v,p,g,m){var x=1/Math.tan(v/2),y=1/(g-m);return this.setValues(x/p,0,0,0,0,x,0,0,0,0,(m+g)*y,-1,0,0,2*m*g*y,0)},perspectiveLH:function(v,p,g,m){return this.setValues(2*g/v,0,0,0,0,2*g/p,0,0,0,0,-m/(g-m),1,0,0,g*m/(g-m),0)},ortho:function(v,p,g,m,x,y){var T=v-p,S=g-m,C=x-y;return T=T===0?T:1/T,S=S===0?S:1/S,C=C===0?C:1/C,this.setValues(-2*T,0,0,0,0,-2*S,0,0,0,0,2*C,0,(v+p)*T,(m+g)*S,(y+x)*C,1)},lookAtRH:function(v,p,g){var m=this.val;return d.subVectors(v,p),d.getLengthSquared()===0&&(d.z=1),d.normalize(),f.crossVectors(g,d),f.getLengthSquared()===0&&(Math.abs(g.z)===1?d.x+=1e-4:d.z+=1e-4,d.normalize(),f.crossVectors(g,d)),f.normalize(),c.crossVectors(d,f),m[0]=f.x,m[1]=f.y,m[2]=f.z,m[4]=c.x,m[5]=c.y,m[6]=c.z,m[8]=d.x,m[9]=d.y,m[10]=d.z,this},lookAt:function(v,p,g){var m=v.x,x=v.y,y=v.z,T=g.x,S=g.y,C=g.z,E=p.x,P=p.y,M=p.z;if(Math.abs(m-E)<n&&Math.abs(x-P)<n&&Math.abs(y-M)<n)return this.identity();var R=m-E,A=x-P,O=y-M,F=1/Math.sqrt(R*R+A*A+O*O);R*=F,A*=F,O*=F;var b=S*O-C*A,w=C*R-T*O,N=T*A-S*R;F=Math.sqrt(b*b+w*w+N*N),F?(F=1/F,b*=F,w*=F,N*=F):(b=0,w=0,N=0);var V=A*N-O*w,W=O*b-R*N,U=R*w-A*b;return F=Math.sqrt(V*V+W*W+U*U),F?(F=1/F,V*=F,W*=F,U*=F):(V=0,W=0,U=0),this.setValues(b,V,R,0,w,W,A,0,N,U,O,0,-(b*m+w*x+N*y),-(V*m+W*x+U*y),-(R*m+A*x+O*y),1)},yawPitchRoll:function(v,p,g){this.zero(),u.zero(),l.zero();var m=this.val,x=u.val,y=l.val,T=Math.sin(g),S=Math.cos(g);return m[10]=1,m[15]=1,m[0]=S,m[1]=T,m[4]=-T,m[5]=S,T=Math.sin(p),S=Math.cos(p),x[0]=1,x[15]=1,x[5]=S,x[10]=S,x[9]=-T,x[6]=T,T=Math.sin(v),S=Math.cos(v),y[5]=1,y[15]=1,y[0]=S,y[2]=-T,y[8]=T,y[10]=S,this.multiplyLocal(u),this.multiplyLocal(l),this},setWorldMatrix:function(v,p,g,m,x){return this.yawPitchRoll(v.y,v.x,v.z),u.scaling(g.x,g.y,g.z),l.xyz(p.x,p.y,p.z),this.multiplyLocal(u),this.multiplyLocal(l),m&&this.multiplyLocal(m),x&&this.multiplyLocal(x),this},multiplyToMat4:function(v,p){var g=this.val,m=v.val,x=g[0],y=g[1],T=g[2],S=g[3],C=g[4],E=g[5],P=g[6],M=g[7],R=g[8],A=g[9],O=g[10],F=g[11],b=g[12],w=g[13],N=g[14],V=g[15],W=m[0],U=m[1],D=m[2],L=m[3],I=m[4],B=m[5],G=m[6],z=m[7],Y=m[8],X=m[9],H=m[10],$=m[11],k=m[12],K=m[13],Z=m[14],j=m[15];return p.setValues(W*x+U*C+D*R+L*b,U*y+U*E+D*A+L*w,D*T+U*P+D*O+L*N,L*S+U*M+D*F+L*V,I*x+B*C+G*R+z*b,I*y+B*E+G*A+z*w,I*T+B*P+G*O+z*N,I*S+B*M+G*F+z*V,Y*x+X*C+H*R+$*b,Y*y+X*E+H*A+$*w,Y*T+X*P+H*O+$*N,Y*S+X*M+H*F+$*V,k*x+K*C+Z*R+j*b,k*y+K*E+Z*A+j*w,k*T+K*P+Z*O+j*N,k*S+K*M+Z*F+j*V)},fromRotationXYTranslation:function(v,p,g){var m=p.x,x=p.y,y=p.z,T=Math.sin(v.x),S=Math.cos(v.x),C=Math.sin(v.y),E=Math.cos(v.y),P=m,M=x,R=y,A=-T,O=0-A*C,F=0-S*C,b=A*E,w=S*E;return g||(P=E*m+C*y,M=O*m+S*x+b*y,R=F*m+T*x+w*y),this.setValues(E,O,F,0,0,S,T,0,C,b,w,0,P,M,R,1)},getMaxScaleOnAxis:function(){var v=this.val,p=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],g=v[4]*v[4]+v[5]*v[5]+v[6]*v[6],m=v[8]*v[8]+v[9]*v[9]+v[10]*v[10];return Math.sqrt(Math.max(p,g,m))}}),u=new h,l=new h,f=new a,c=new a,d=new a;e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COMPLETE:i(987),DECODED:i(988),DECODED_ALL:i(989),DESTROY:i(990),DETUNE:i(991),GLOBAL_DETUNE:i(992),GLOBAL_MUTE:i(993),GLOBAL_RATE:i(994),GLOBAL_VOLUME:i(995),LOOP:i(996),LOOPED:i(997),MUTE:i(998),PAN:i(999),PAUSE_ALL:i(1e3),PAUSE:i(1001),PLAY:i(1002),RATE:i(1003),RESUME_ALL:i(1004),RESUME:i(1005),SEEK:i(1006),STOP_ALL:i(1007),STOP:i(1008),UNLOCKED:i(1009),VOLUME:i(1010)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=new s({Extends:n,initialize:function c(d,v,p,g,m){var x="png",y;if(l(v)){var T=v;v=u(T,"key"),p=u(T,"url"),y=u(T,"normalMap"),g=u(T,"xhrSettings"),x=u(T,"extension",x),m=u(T,"frameConfig")}Array.isArray(p)&&(y=p[1],p=p[0]);var S={type:"image",cache:d.textureManager,extension:x,responseType:"blob",key:v,url:p,xhrSettings:g,config:m};if(n.call(this,d,S),y){var C=new c(d,this.key,y,g,m);C.type="normalMap",this.setLink(C),d.addFile(C)}},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var c=this;this.data.onload=function(){n.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(c.data),c.onProcessError()},n.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var c,d=this.linkFile;d&&d.state===a.FILE_COMPLETE?(this.type==="image"?c=this.cache.addImage(this.key,this.data,d.data):c=this.cache.addImage(d.key,d.data,this.data),this.pendingDestroy(c),d.pendingDestroy(c)):d||(c=this.cache.addImage(this.key,this.data),this.pendingDestroy(c))}});h.register("image",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a?s.setCollision(!0,!0,!0,!0,!1):s.resetCollision(!1)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(164),a=i(0),n=i(11),h=i(15),u=i(1065),l=new a({Extends:h,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,u],initialize:function(c,d,v,p,g){h.call(this,c,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(p,g),this.setPosition(d,v),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(f,c){this.anims.update(f,c)},play:function(f,c){return this.anims.play(f,c)},playReverse:function(f,c){return this.anims.playReverse(f,c)},playAfterDelay:function(f,c){return this.anims.playAfterDelay(f,c)},playAfterRepeat:function(f,c){return this.anims.playAfterRepeat(f,c)},chain:function(f){return this.anims.chain(f)},stop:function(){return this.anims.stop()},stopAfterDelay:function(f){return this.anims.stopAfterDelay(f)},stopAfterRepeat:function(f){return this.anims.stopAfterRepeat(f)},stopOnFrame:function(f){return this.anims.stopOnFrame(f)},toJSON:function(){return n.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});e.exports=l},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){if(!(a>=s.length)){for(var n=s.length-1,h=s[a],u=a;u<n;u++)s[u]=s[u+1];return s.length=n,h}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:i(643),DESTROY:i(644),REMOVED_FROM_SCENE:i(645),VIDEO_COMPLETE:i(646),VIDEO_CREATED:i(647),VIDEO_ERROR:i(648),VIDEO_LOOP:i(649),VIDEO_PLAY:i(650),VIDEO_SEEKED:i(651),VIDEO_SEEKING:i(652),VIDEO_STOP:i(653),VIDEO_TIMEOUT:i(654),VIDEO_UNLOCKED:i(655)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){return n===void 0&&(n=0),a===0?s:(s-=n,s=a*Math.floor(s/a),h?(n+s)/a:n+s)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a={};for(var n in s)Array.isArray(s[n])?a[n]=s[n].slice(0):a[n]=s[n];return a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=s.length;if(a<0||a>u||a>=n||n>u||a+n>u){if(h)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(h,u){return String(h).localeCompare(u)}function s(h,u){var l=h.length;if(l<=1)return h;for(var f=new Array(l),c=1;c<l;c*=2){a(h,u,c,f);var d=h;h=f,f=d}return h}function a(h,u,l,f){var c=h.length,d=0,v=l*2,p,g,m,x,y;for(p=0;p<c;p+=v)for(g=p+l,m=g+l,g>c&&(g=c),m>c&&(m=c),x=p,y=g;;)if(x<g&&y<m)u(h[x],h[y])<=0?f[d++]=h[x++]:f[d++]=h[y++];else if(x<g)f[d++]=h[x++];else if(y<m)f[d++]=h[y++];else break}var n=function(h,u){u===void 0&&(u=i);var l=s(h,u);return l!==h&&a(l,null,h.length,h),h};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(134),a=i(205),n=function(h,u){var l=s.Power0;if(typeof h=="string")if(s.hasOwnProperty(h))l=s[h];else{var f="";h.indexOf(".")&&(f=h.substr(h.indexOf(".")+1),f.toLowerCase()==="in"?f="easeIn":f.toLowerCase()==="out"?f="easeOut":f.toLowerCase()==="inout"&&(f="easeInOut")),h=a(h.substr(0,h.indexOf(".")+1)+f),s.hasOwnProperty(h)&&(l=s[h])}else typeof h=="function"?l=h:Array.isArray(h)&&h.length;if(!u)return l;var c=u.slice(0);return c.unshift(0),function(d){return c[0]=d,l.apply(this,c)}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),a=function(n,h,u,l,f){var c=n.strokeTint,d=s.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*u);c.TL=d,c.TR=d,c.BL=d,c.BR=d;var v=h.pathData,p=v.length-1,g=h.lineWidth,m=g/2,x=v[0]-l,y=v[1]-f;h.closePath||(p-=2);for(var T=2;T<p;T+=2){var S=v[T]-l,C=v[T+1]-f;n.batchLine(x,y,S,C,m,m,g,T-2,h.closePath?T===p-1:!1),x=S,y=C}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(115),n=i(476),h=i(477),u=i(56),l=i(47),f=i(181),c=new s({initialize:function(v,p,g,m,x,y){v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),this.type=u.TRIANGLE,this.x1=v,this.y1=p,this.x2=g,this.y2=m,this.x3=x,this.y3=y},contains:function(d,v){return a(this,d,v)},getPoint:function(d,v){return n(this,d,v)},getPoints:function(d,v,p){return h(this,d,v,p)},getRandomPoint:function(d){return f(this,d)},setTo:function(d,v,p,g,m,x){return d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),this.x1=d,this.y1=v,this.x2=p,this.y2=g,this.x3=m,this.y3=x,this},getLineA:function(d){return d===void 0&&(d=new l),d.setTo(this.x1,this.y1,this.x2,this.y2),d},getLineB:function(d){return d===void 0&&(d=new l),d.setTo(this.x2,this.y2,this.x3,this.y3),d},getLineC:function(d){return d===void 0&&(d=new l),d.setTo(this.x3,this.y3,this.x1,this.y1),d},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(d){var v=0;this.x1<=this.x2&&this.x1<=this.x3?v=this.x1-d:this.x2<=this.x1&&this.x2<=this.x3?v=this.x2-d:v=this.x3-d,this.x1-=v,this.x2-=v,this.x3-=v}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(d){var v=0;this.x1>=this.x2&&this.x1>=this.x3?v=this.x1-d:this.x2>=this.x1&&this.x2>=this.x3?v=this.x2-d:v=this.x3-d,this.x1-=v,this.x2-=v,this.x3-=v}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(d){var v=0;this.y1<=this.y2&&this.y1<=this.y3?v=this.y1-d:this.y2<=this.y1&&this.y2<=this.y3?v=this.y2-d:v=this.y3-d,this.y1-=v,this.y2-=v,this.y3-=v}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(d){var v=0;this.y1>=this.y2&&this.y1>=this.y3?v=this.y1-d:this.y2>=this.y1&&this.y2>=this.y3?v=this.y2-d:v=this.y3-d,this.y1-=v,this.y2-=v,this.y3-=v}}});e.exports=c},function(e,r){var i={};e.exports=i,function(){i.create=function(s,a){return{x:s||0,y:a||0}},i.clone=function(s){return{x:s.x,y:s.y}},i.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},i.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},i.rotate=function(s,a,n){var h=Math.cos(a),u=Math.sin(a);n||(n={});var l=s.x*h-s.y*u;return n.y=s.x*u+s.y*h,n.x=l,n},i.rotateAbout=function(s,a,n,h){var u=Math.cos(a),l=Math.sin(a);h||(h={});var f=n.x+((s.x-n.x)*u-(s.y-n.y)*l);return h.y=n.y+((s.x-n.x)*l+(s.y-n.y)*u),h.x=f,h},i.normalise=function(s){var a=i.magnitude(s);return a===0?{x:0,y:0}:{x:s.x/a,y:s.y/a}},i.dot=function(s,a){return s.x*a.x+s.y*a.y},i.cross=function(s,a){return s.x*a.y-s.y*a.x},i.cross3=function(s,a,n){return(a.x-s.x)*(n.y-s.y)-(a.y-s.y)*(n.x-s.x)},i.add=function(s,a,n){return n||(n={}),n.x=s.x+a.x,n.y=s.y+a.y,n},i.sub=function(s,a,n){return n||(n={}),n.x=s.x-a.x,n.y=s.y-a.y,n},i.mult=function(s,a){return{x:s.x*a,y:s.y*a}},i.div=function(s,a){return{x:s.x/a,y:s.y/a}},i.perp=function(s,a){return a=a===!0?-1:1,{x:a*-s.y,y:a*s.x}},i.neg=function(s){return{x:-s.x,y:-s.y}},i.angle=function(s,a){return Math.atan2(a.y-s.y,a.x-s.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]}()},function(e,r){var i={};e.exports=i,function(){i.create=function(s){var a={min:{x:0,y:0},max:{x:0,y:0}};return s&&i.update(a,s),a},i.update=function(s,a,n){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var h=0;h<a.length;h++){var u=a[h];u.x>s.max.x&&(s.max.x=u.x),u.x<s.min.x&&(s.min.x=u.x),u.y>s.max.y&&(s.max.y=u.y),u.y<s.min.y&&(s.min.y=u.y)}n&&(n.x>0?s.max.x+=n.x:s.min.x+=n.x,n.y>0?s.max.y+=n.y:s.min.y+=n.y)},i.contains=function(s,a){return a.x>=s.min.x&&a.x<=s.max.x&&a.y>=s.min.y&&a.y<=s.max.y},i.overlaps=function(s,a){return s.min.x<=a.max.x&&s.max.x>=a.min.x&&s.max.y>=a.min.y&&s.min.y<=a.max.y},i.translate=function(s,a){s.min.x+=a.x,s.max.x+=a.x,s.min.y+=a.y,s.max.y+=a.y},i.shift=function(s,a){var n=s.max.x-s.min.x,h=s.max.y-s.min.y;s.min.x=a.x,s.max.x=a.x+n,s.min.y=a.y,s.max.y=a.y+h}}()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),a=i(0),n=i(11),h=i(502),u=new a({Mixins:[n.Alpha,n.Flip,n.Visible],initialize:function(f,c,d,v,p,g,m,x){this.layer=f,this.index=c,this.x=d,this.y=v,this.width=p,this.height=g,this.right,this.bottom,this.baseWidth=m!==void 0?m:p,this.baseHeight=x!==void 0?x:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(l,f){return!(l<this.pixelX||f<this.pixelY||l>this.right||f>this.bottom)},copy:function(l){return this.index=l.index,this.alpha=l.alpha,this.properties=l.properties,this.visible=l.visible,this.setFlip(l.flipX,l.flipY),this.tint=l.tint,this.rotation=l.rotation,this.collideUp=l.collideUp,this.collideDown=l.collideDown,this.collideLeft=l.collideLeft,this.collideRight=l.collideRight,this.collisionCallback=l.collisionCallback,this.collisionCallbackContext=l.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(l){var f=this.tilemapLayer;return f?f.tileToWorldX(this.x,l):this.x*this.baseWidth},getRight:function(l){var f=this.tilemapLayer;return f?this.getLeft(l)+this.width*f.scaleX:this.getLeft(l)+this.width},getTop:function(l){var f=this.tilemapLayer;return f?f.tileToWorldY(this.y,l)-(this.height-this.baseHeight)*f.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(l){var f=this.tilemapLayer;return f?this.getTop(l)+this.height*f.scaleY:this.getTop(l)+this.height},getBounds:function(l,f){return f===void 0&&(f=new h),f.x=this.getLeft(),f.y=this.getTop(),f.width=this.getRight()-f.x,f.height=this.getBottom()-f.y,f},getCenterX:function(l){return(this.getLeft(l)+this.getRight(l))/2},getCenterY:function(l){return(this.getTop(l)+this.getBottom(l))/2},intersects:function(l,f,c,d){return!(c<=this.pixelX||d<=this.pixelY||l>=this.right||f>=this.bottom)},isInteresting:function(l,f){return l&&f?this.canCollide||this.hasInterestingFace:l?this.collides:f?this.hasInterestingFace:!1},resetCollision:function(l){if(l===void 0&&(l=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,l){var f=this.tilemapLayer;f&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(l,f,c,d,v){if(f===void 0&&(f=l),c===void 0&&(c=l),d===void 0&&(d=l),v===void 0&&(v=!0),this.collideLeft=l,this.collideRight=f,this.collideUp=c,this.collideDown=d,this.faceLeft=l,this.faceRight=f,this.faceTop=c,this.faceBottom=d,v){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(l,f){return l===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=l,this.collisionCallbackContext=f),this},setSize:function(l,f,c,d){return l!==void 0&&(this.width=l),f!==void 0&&(this.height=f),c!==void 0&&(this.baseWidth=c),d!==void 0&&(this.baseHeight=d),this.updatePixelXY(),this},updatePixelXY:function(){var l=this.layer.orientation;if(l===s.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(l===s.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(l===s.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(l===s.HEXAGONAL){var f=this.layer.hexSideLength,c=(this.baseHeight-f)/2+f;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*c}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var l=this.layer.tilemapLayer;if(l){var f=l.gidMap[this.index];if(f)return f}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var l=this.tilemapLayer;return l?l.tilemap:null}}});e.exports=u},function(e,r,i){var s={};e.exports=s;var a=i(64),n=i(32),h=i(41),u=i(84),l=i(83),f=i(1393);(function(){s.rectangle=function(c,d,v,p,g){g=g||{};var m={label:"Rectangle Body",position:{x:c,y:d},vertices:a.fromPath("L 0 0 L "+v+" 0 L "+v+" "+p+" L 0 "+p)};if(g.chamfer){var x=g.chamfer;m.vertices=a.chamfer(m.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return h.create(n.extend({},m,g))},s.trapezoid=function(c,d,v,p,g,m){m=m||{},g*=.5;var x=(1-g*2)*v,y=v*g,T=y+x,S=T+y,C;g<.5?C="L 0 0 L "+y+" "+-p+" L "+T+" "+-p+" L "+S+" 0":C="L 0 0 L "+T+" "+-p+" L "+S+" 0";var E={label:"Trapezoid Body",position:{x:c,y:d},vertices:a.fromPath(C)};if(m.chamfer){var P=m.chamfer;E.vertices=a.chamfer(E.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete m.chamfer}return h.create(n.extend({},E,m))},s.circle=function(c,d,v,p,g){p=p||{};var m={label:"Circle Body",circleRadius:v};g=g||25;var x=Math.ceil(Math.max(10,Math.min(g,v)));return x%2===1&&(x+=1),s.polygon(c,d,x,v,n.extend({},m,p))},s.polygon=function(c,d,v,p,g){if(g=g||{},v<3)return s.circle(c,d,p,g);for(var m=2*Math.PI/v,x="",y=m*.5,T=0;T<v;T+=1){var S=y+T*m,C=Math.cos(S)*p,E=Math.sin(S)*p;x+="L "+C.toFixed(3)+" "+E.toFixed(3)+" "}var P={label:"Polygon Body",position:{x:c,y:d},vertices:a.fromPath(x)};if(g.chamfer){var M=g.chamfer;P.vertices=a.chamfer(P.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete g.chamfer}return h.create(n.extend({},P,g))},s.fromVertices=function(c,d,v,p,g,m,x){var y,T,S,C,E,P;for(p=p||{},T=[],g=typeof g!="undefined"?g:!1,m=typeof m!="undefined"?m:.01,x=typeof x!="undefined"?x:10,f||n.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),n.isArray(v[0])||(v=[v]),P=0;P<v.length;P+=1)if(C=v[P],S=a.isConvex(C),S||!f)S?C=a.clockwiseSort(C):C=a.hull(C),T.push({position:{x:c,y:d},vertices:C});else{var M=C.map(function(F){return[F.x,F.y]});f.makeCCW(M),m!==!1&&f.removeCollinearPoints(M,m);var R=f.quickDecomp(M);for(E=0;E<R.length;E++){var A=R[E],O=A.map(function(F){return{x:F[0],y:F[1]}});x>0&&a.area(O)<x||T.push({position:a.centre(O),vertices:O})}}for(E=0;E<T.length;E++)T[E]=h.create(n.extend(T[E],p));return g&&s.flagCoincidentParts(T,5),T.length>1?(y=h.create(n.extend({parts:T.slice(0)},p)),h.setPosition(y,{x:c,y:d}),y):T[0]},s.flagCoincidentParts=function(c,d){d===void 0&&(d=5);for(var v=0;v<c.length;v++)for(var p=c[v],g=v+1;g<c.length;g++){var m=c[g];if(u.overlaps(p.bounds,m.bounds))for(var x=p.vertices,y=m.vertices,T=0;T<p.vertices.length;T++)for(var S=0;S<m.vertices.length;S++){var C=l.magnitudeSquared(l.sub(x[(T+1)%x.length],y[S])),E=l.magnitudeSquared(l.sub(x[T],y[(S+1)%y.length]));C<d&&E<d&&(x[T].isInternal=!0,y[S].isInternal=!0)}}return c}})()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x-s.width*s.originX+s.width*.5};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.width*s.originX;return s.x=a+n-s.width*.5,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.y-s.height*s.originY+s.height*.5};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.height*s.originY;return s.y=a+n-s.height*.5,s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={POST_RENDER:i(628),PRE_RENDER:i(629),RENDER:i(630),RESIZE:i(631)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(74),a=function(n,h,u,l){l===void 0&&(l=n);var f;if(!Array.isArray(h))return f=n.indexOf(h),f!==-1?(s(n,f),u&&u.call(l,h),h):null;for(var c=h.length-1,d=[];c>=0;){var v=h[c];f=n.indexOf(v),f!==-1&&(s(n,f),d.push(v),u&&u.call(l,v)),c--}return d};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(199),n=i(10),h=i(3),u=new s({initialize:function(f){this.type=f,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new h,this._tmpVec2B=new h},draw:function(l,f){return f===void 0&&(f=32),l.strokePoints(this.getPoints(f))},getBounds:function(l,f){l||(l=new n),f===void 0&&(f=16);var c=this.getLength();f>c&&(f=c/2);var d=Math.max(1,Math.round(c/f));return a(this.getSpacedPoints(d),l)},getDistancePoints:function(l){var f=this.getLength(),c=Math.max(1,f/l);return this.getSpacedPoints(c)},getEndPoint:function(l){return l===void 0&&(l=new h),this.getPointAt(1,l)},getLength:function(){var l=this.getLengths();return l[l.length-1]},getLengths:function(l){if(l===void 0&&(l=this.arcLengthDivisions),this.cacheArcLengths.length===l+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var f=[],c,d=this.getPoint(0,this._tmpVec2A),v=0;f.push(0);for(var p=1;p<=l;p++)c=this.getPoint(p/l,this._tmpVec2B),v+=c.distance(d),f.push(v),d.copy(c);return this.cacheArcLengths=f,f},getPointAt:function(l,f){var c=this.getUtoTmapping(l);return this.getPoint(c,f)},getPoints:function(l,f,c){c===void 0&&(c=[]),l||(f?l=this.getLength()/f:l=this.defaultDivisions);for(var d=0;d<=l;d++)c.push(this.getPoint(d/l));return c},getRandomPoint:function(l){return l===void 0&&(l=new h),this.getPoint(Math.random(),l)},getSpacedPoints:function(l,f,c){c===void 0&&(c=[]),l||(f?l=this.getLength()/f:l=this.defaultDivisions);for(var d=0;d<=l;d++){var v=this.getUtoTmapping(d/l,null,l);c.push(this.getPoint(v))}return c},getStartPoint:function(l){return l===void 0&&(l=new h),this.getPointAt(0,l)},getTangent:function(l,f){f===void 0&&(f=new h);var c=1e-4,d=l-c,v=l+c;return d<0&&(d=0),v>1&&(v=1),this.getPoint(d,this._tmpVec2A),this.getPoint(v,f),f.subtract(this._tmpVec2A).normalize()},getTangentAt:function(l,f){var c=this.getUtoTmapping(l);return this.getTangent(c,f)},getTFromDistance:function(l,f){return l<=0?0:this.getUtoTmapping(0,l,f)},getUtoTmapping:function(l,f,c){var d=this.getLengths(c),v=0,p=d.length,g;f?g=Math.min(f,d[p-1]):g=l*d[p-1];for(var m=0,x=p-1,y;m<=x;)if(v=Math.floor(m+(x-m)/2),y=d[v]-g,y<0)m=v+1;else if(y>0)x=v-1;else{x=v;break}if(v=x,d[v]===g)return v/(p-1);var T=d[v],S=d[v+1],C=S-T,E=(g-T)/C;return(v+E)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(968),COMPLETE:i(969),FILE_COMPLETE:i(970),FILE_KEY_COMPLETE:i(971),FILE_LOAD_ERROR:i(972),FILE_LOAD:i(973),FILE_PROGRESS:i(974),POST_PROCESS:i(975),PROGRESS:i(976),START:i(977)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h,u){u===void 0&&(u=new s);var l=n.x1,f=n.y1,c=n.x2,d=n.y2,v=h.x1,p=h.y1,g=h.x2,m=h.y2,x=(g-v)*(f-p)-(m-p)*(l-v),y=(c-l)*(f-p)-(d-f)*(l-v),T=(m-p)*(c-l)-(g-v)*(d-f);if(T===0)return!1;var S=x/T,C=y/T;return S>=0&&S<=1&&C>=0&&C<=1?(u.x=l+S*(c-l),u.y=f+S*(d-f),!0):!1};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.atan2(s.y2-s.y1,s.x2-s.x1)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=function(n,h,u){return n=s(n,0,1),(u-h)*n+h};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s&&s.hasOwnProperty(a)?s[a]:n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(315),n=new s({initialize:function(u,l){this.parent=u,this.events=l,l||(this.events=u.events?u.events:u),this.list={},this.values={},this._frozen=!1,!u.hasOwnProperty("sys")&&this.events&&this.events.once(a.DESTROY,this.destroy,this)},get:function(h){var u=this.list;if(Array.isArray(h)){for(var l=[],f=0;f<h.length;f++)l.push(u[h[f]]);return l}else return u[h]},getAll:function(){var h={};for(var u in this.list)this.list.hasOwnProperty(u)&&(h[u]=this.list[u]);return h},query:function(h){var u={};for(var l in this.list)this.list.hasOwnProperty(l)&&l.match(h)&&(u[l]=this.list[l]);return u},set:function(h,u){if(this._frozen)return this;if(typeof h=="string")return this.setValue(h,u);for(var l in h)this.setValue(l,h[l]);return this},inc:function(h,u){if(this._frozen)return this;u===void 0&&(u=1);var l=this.get(h);return l===void 0&&(l=0),this.set(h,l+u),this},toggle:function(h){return this._frozen?this:(this.set(h,!this.get(h)),this)},setValue:function(h,u){if(this._frozen)return this;if(this.has(h))this.values[h]=u;else{var l=this,f=this.list,c=this.events,d=this.parent;Object.defineProperty(this.values,h,{enumerable:!0,configurable:!0,get:function(){return f[h]},set:function(v){if(!l._frozen){var p=f[h];f[h]=v,c.emit(a.CHANGE_DATA,d,h,v,p),c.emit(a.CHANGE_DATA_KEY+h,d,v,p)}}}),f[h]=u,c.emit(a.SET_DATA,d,h,u)}return this},each:function(h,u){for(var l=[this.parent,null,void 0],f=1;f<arguments.length;f++)l.push(arguments[f]);for(var c in this.list)l[1]=c,l[2]=this.list[c],h.apply(u,l);return this},merge:function(h,u){u===void 0&&(u=!0);for(var l in h)h.hasOwnProperty(l)&&(u||!u&&!this.has(l))&&this.setValue(l,h[l]);return this},remove:function(h){if(this._frozen)return this;if(Array.isArray(h))for(var u=0;u<h.length;u++)this.removeValue(h[u]);else return this.removeValue(h);return this},removeValue:function(h){if(this.has(h)){var u=this.list[h];delete this.list[h],delete this.values[h],this.events.emit(a.REMOVE_DATA,this.parent,h,u)}return this},pop:function(h){var u=void 0;return!this._frozen&&this.has(h)&&(u=this.list[h],delete this.list[h],delete this.values[h],this.events.emit(a.REMOVE_DATA,this.parent,h,u)),u},has:function(h){return this.list.hasOwnProperty(h)},setFreeze:function(h){return this._frozen=h,this},reset:function(){for(var h in this.list)delete this.list[h],delete this.values[h];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(a.CHANGE_DATA),this.events.off(a.SET_DATA),this.events.off(a.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(h){this._frozen=!!h}},count:{get:function(){var h=0;for(var u in this.list)this.list[u]!==void 0&&h++;return h}}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h){if(this.entries={},this.size=0,Array.isArray(h))for(var u=0;u<h.length;u++)this.set(h[u][0],h[u][1])},set:function(n,h){return this.has(n)||this.size++,this.entries[n]=h,this},get:function(n){if(this.has(n))return this.entries[n]},getArray:function(){var n=[],h=this.entries;for(var u in h)n.push(h[u]);return n},has:function(n){return this.entries.hasOwnProperty(n)},delete:function(n){return this.has(n)&&(delete this.entries[n],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(n){delete this.entries[n]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var n=[],h=this.entries;for(var u in h)n.push(h[u]);return n},dump:function(){var n=this.entries;console.group("Map");for(var h in n)console.log(h,n[h]);console.groupEnd()},each:function(n){var h=this.entries;for(var u in h)if(n(u,h[u])===!1)break;return this},contains:function(n){var h=this.entries;for(var u in h)if(h[u]===n)return!0;return!1},merge:function(n,h){h===void 0&&(h=!1);var u=this.entries,l=n.entries;for(var f in l)u.hasOwnProperty(f)&&h?u[f]=l[f]:this.set(f,l[f]);return this}});e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s<<16|a<<8|n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ENTER_FULLSCREEN:i(800),FULLSCREEN_FAILED:i(801),FULLSCREEN_UNSUPPORTED:i(802),LEAVE_FULLSCREEN:i(803),ORIENTATION_CHANGE:i(804),RESIZE:i(805)}},function(e,r,i){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var a={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function n(){if(typeof importScripts=="function")return a;var h=navigator.userAgent;/Windows/.test(h)?a.windows=!0:/Mac OS/.test(h)&&!/like Mac OS/.test(h)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(a.iOS=!0,a.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),a.iOSVersion=parseInt(RegExp.$1,10)):a.macOS=!0:/Android/.test(h)?a.android=!0:/Linux/.test(h)?a.linux=!0:/iP[ao]d|iPhone/i.test(h)?(a.iOS=!0,navigator.appVersion.match(/OS (\d+)/),a.iOSVersion=parseInt(RegExp.$1,10),a.iPhone=h.toLowerCase().indexOf("iphone")!==-1,a.iPad=h.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(h)||/\bKF[A-Z][A-Z]+/.test(h)||/Silk.*Mobile Safari/.test(h)?a.kindle=!0:/CrOS/.test(h)&&(a.chromeOS=!0),(/Windows Phone/i.test(h)||/IEMobile/i.test(h))&&(a.android=!1,a.iOS=!1,a.macOS=!1,a.windows=!0,a.windowsPhone=!0);var u=/Silk/.test(h);return(a.windows||a.macOS||a.linux&&!u||a.chromeOS)&&(a.desktop=!0),(a.windowsPhone||/Windows NT/i.test(h)&&/Touch/i.test(h))&&(a.desktop=!1),navigator.standalone&&(a.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(a.cordova=!0),window.ejecta!==void 0&&(a.ejecta=!0)),typeof s!="undefined"&&s.versions&&s.versions.node&&(a.node=!0),a.node&&typeof s.versions=="object"&&(a.nodeWebkit=!!s.versions["node-webkit"],a.electron=!!s.versions.electron),/Crosswalk/.test(h)&&(a.crosswalk=!0),a.pixelRatio=window.devicePixelRatio||1,a}e.exports=n()}).call(this,i(807))},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(861),ERROR:i(862),LOAD:i(863),READY:i(864),REMOVE:i(865)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(59),n=i(2),h=i(878),u=i(879),l=i(25),f=i(12),c=i(107),d=i(58),v=new s({Extends:d,initialize:function(g){var m=g.game.renderer,x=n(g,"fragShader",h);g.fragShader=f.parseFragmentShaderMaxTextures(x,m.maxTextures),g.vertShader=n(g,"vertShader",u),g.attributes=n(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),d.call(this,g),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.calcMatrix=new l,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){d.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(p,g,m){this.manager.set(this,p);var x=this._tempMatrix1,y=this._tempMatrix2,T=this._tempMatrix3,S=p.frame,C=S.glTexture,E=S.u0,P=S.v0,M=S.u1,R=S.v1,A=S.x,O=S.y,F=S.cutWidth,b=S.cutHeight,w=S.customPivot,N=p.displayOriginX,V=p.displayOriginY,W=-N+A,U=-V+O;if(p.isCropped){var D=p._crop;(D.flipX!==p.flipX||D.flipY!==p.flipY)&&S.updateCropUVs(D,p.flipX,p.flipY),E=D.u0,P=D.v0,M=D.u1,R=D.v1,F=D.width,b=D.height,A=D.x,O=D.y,W=-N+A,U=-V+O}var L=1,I=1;p.flipX&&(w||(W+=-S.realWidth+N*2),L=-1),(p.flipY||S.source.isGLTexture&&!C.flipY)&&(w||(U+=-S.realHeight+V*2),I=-1),y.applyITRS(p.x,p.y,p.rotation,p.scaleX*L,p.scaleY*I),x.copyFrom(g.matrix),m?(x.multiplyWithOffset(m,-g.scrollX*p.scrollFactorX,-g.scrollY*p.scrollFactorY),y.e=p.x,y.f=p.y):(y.e-=g.scrollX*p.scrollFactorX,y.f-=g.scrollY*p.scrollFactorY),x.multiply(y,T);var B=W+F,G=U+b,z=g.roundPixels,Y=T.getXRound(W,U,z),X=T.getYRound(W,U,z),H=T.getXRound(W,G,z),$=T.getYRound(W,G,z),k=T.getXRound(B,G,z),K=T.getYRound(B,G,z),Z=T.getXRound(B,U,z),j=T.getYRound(B,U,z),J=f.getTintAppendFloatAlpha,q=g.alpha,ot=J(p.tintTopLeft,q*p._alphaTL),nt=J(p.tintTopRight,q*p._alphaTR),tt=J(p.tintBottomLeft,q*p._alphaBL),Q=J(p.tintBottomRight,q*p._alphaBR);this.shouldFlush(6)&&this.flush();var lt=this.setGameObject(p,S);this.manager.preBatch(p),this.batchQuad(p,Y,X,H,$,k,K,Z,j,E,P,M,R,ot,nt,tt,Q,p.tintFill,C,lt),this.manager.postBatch(p)},batchTexture:function(p,g,m,x,y,T,S,C,E,P,M,R,A,O,F,b,w,N,V,W,U,D,L,I,B,G,z,Y,X,H,$,k){this.manager.set(this,p);var K=this._tempMatrix1,Z=this._tempMatrix2,j=this._tempMatrix3,J=N/m+z,q=V/x+Y,ot=(N+W)/m+z,nt=(V+U)/x+Y,tt=S,Q=C,lt=-b,et=-w;if(p.isCropped){var at=p._crop,ie=at.width,se=at.height;tt=ie,Q=se,S=ie,C=se,N=at.x,V=at.y;var Et=N,vt=V;R&&(Et=W-at.x-ie),A&&(vt=U-at.y-se),J=Et/m+z,q=vt/x+Y,ot=(Et+ie)/m+z,nt=(vt+se)/x+Y,lt=-b+N,et=-w+V}A=A^(!$&&g.isRenderTexture?1:0),R&&(tt*=-1,lt+=S),A&&(Q*=-1,et+=C);var It=lt+tt,bt=et+Q;Z.applyITRS(y,T,M,E,P),K.copyFrom(X.matrix),H?(K.multiplyWithOffset(H,-X.scrollX*O,-X.scrollY*F),Z.e=y,Z.f=T):(Z.e-=X.scrollX*O,Z.f-=X.scrollY*F),K.multiply(Z,j);var Ot=X.roundPixels,ne=j.getXRound(lt,et,Ot),ii=j.getYRound(lt,et,Ot),si=j.getXRound(lt,bt,Ot),ni=j.getYRound(lt,bt,Ot),ri=j.getXRound(It,bt,Ot),ai=j.getYRound(It,bt,Ot),oi=j.getXRound(It,et,Ot),I0=j.getYRound(It,et,Ot);k===void 0&&(k=this.renderer.setTexture2D(g)),p&&this.manager.preBatch(p),this.batchQuad(p,ne,ii,si,ni,ri,ai,oi,I0,J,q,ot,nt,D,L,I,B,G,g,k),p&&this.manager.postBatch(p)},batchTextureFrame:function(p,g,m,x,y,T,S){this.manager.set(this);var C=this._tempMatrix1.copyFrom(T),E=this._tempMatrix2,P=g+p.width,M=m+p.height;S?C.multiply(S,E):E=C;var R=E.getX(g,m),A=E.getY(g,m),O=E.getX(g,M),F=E.getY(g,M),b=E.getX(P,M),w=E.getY(P,M),N=E.getX(P,m),V=E.getY(P,m),W=this.renderer.setTextureSource(p.source);x=f.getTintAppendFloatAlpha(x,y),this.batchQuad(null,R,A,O,F,b,w,N,V,p.u0,p.v0,p.u1,p.v1,x,x,x,x,0,p.glTexture,W)},batchFillRect:function(p,g,m,x,y,T){this.renderer.pipelines.set(this);var S=this.calcMatrix;T&&T.multiply(y,S);var C=p+m,E=g+x,P=S.getX(p,g),M=S.getY(p,g),R=S.getX(p,E),A=S.getY(p,E),O=S.getX(C,E),F=S.getY(C,E),b=S.getX(C,g),w=S.getY(C,g),N=this.fillTint;this.batchQuad(null,P,M,R,A,O,F,b,w,0,0,1,1,N.TL,N.TR,N.BL,N.BR,2)},batchFillTriangle:function(p,g,m,x,y,T,S,C){this.renderer.pipelines.set(this);var E=this.calcMatrix;C&&C.multiply(S,E);var P=E.getX(p,g),M=E.getY(p,g),R=E.getX(m,x),A=E.getY(m,x),O=E.getX(y,T),F=E.getY(y,T),b=this.fillTint;this.batchTri(null,P,M,R,A,O,F,0,0,1,1,b.TL,b.TR,b.BL,2)},batchStrokeTriangle:function(p,g,m,x,y,T,S,C,E){var P=this.tempTriangle;P[0].x=p,P[0].y=g,P[0].width=S,P[1].x=m,P[1].y=x,P[1].width=S,P[2].x=y,P[2].y=T,P[2].width=S,P[3].x=p,P[3].y=g,P[3].width=S,this.batchStrokePath(P,S,!1,C,E)},batchFillPath:function(p,g,m){this.renderer.pipelines.set(this);var x=this.calcMatrix;m&&m.multiply(g,x);for(var y=p.length,T=this.polygonCache,S,C,E=this.fillTint.TL,P=this.fillTint.TR,M=this.fillTint.BL,R=0;R<y;++R)C=p[R],T.push(C.x,C.y);S=a(T),y=S.length;for(var A=0;A<y;A+=3){var O=S[A+0]*2,F=S[A+1]*2,b=S[A+2]*2,w=T[O+0],N=T[O+1],V=T[F+0],W=T[F+1],U=T[b+0],D=T[b+1],L=x.getX(w,N),I=x.getY(w,N),B=x.getX(V,W),G=x.getY(V,W),z=x.getX(U,D),Y=x.getY(U,D);this.batchTri(null,L,I,B,G,z,Y,0,0,1,1,E,P,M,2)}T.length=0},batchStrokePath:function(p,g,m,x,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=p.length-1,S=0;S<T;S++){var C=p[S],E=p[S+1];this.batchLine(C.x,C.y,E.x,E.y,C.width/2,E.width/2,g,S,!m&&S===T-1,x,y)}},batchLine:function(p,g,m,x,y,T,S,C,E,P,M){this.renderer.pipelines.set(this);var R=this.calcMatrix;M&&M.multiply(P,R);var A=m-p,O=x-g,F=Math.sqrt(A*A+O*O),b=y*(x-g)/F,w=y*(p-m)/F,N=T*(x-g)/F,V=T*(p-m)/F,W=m-N,U=x-V,D=p-b,L=g-w,I=m+N,B=x+V,G=p+b,z=g+w,Y=R.getX(W,U),X=R.getY(W,U),H=R.getX(D,L),$=R.getY(D,L),k=R.getX(I,B),K=R.getY(I,B),Z=R.getX(G,z),j=R.getY(G,z),J=this.strokeTint,q=J.TL,ot=J.TR,nt=J.BL,tt=J.BR;if(this.batchQuad(null,Z,j,H,$,Y,X,k,K,0,0,1,1,q,ot,nt,tt,2),!(S<=2)){var Q=this.prevQuad,lt=this.firstQuad;C>0&&Q[4]?this.batchQuad(null,Z,j,H,$,Q[0],Q[1],Q[2],Q[3],0,0,1,1,q,ot,nt,tt,2):(lt[0]=Z,lt[1]=j,lt[2]=H,lt[3]=$,lt[4]=1),E&&lt[4]?this.batchQuad(null,Y,X,k,K,lt[0],lt[1],lt[2],lt[3],0,0,1,1,q,ot,nt,tt,2):(Q[0]=Y,Q[1]=X,Q[2]=k,Q[3]=K,Q[4]=1)}}});e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(18),n=i(17),h=new s({initialize:function(l,f,c,d,v,p,g){this.texture=l,this.name=f,this.source=l.source[c],this.sourceIndex=c,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(p,g,d,v)},setSize:function(u,l,f,c){f===void 0&&(f=0),c===void 0&&(c=0),this.cutX=f,this.cutY=c,this.cutWidth=u,this.cutHeight=l,this.width=u,this.height=l,this.halfWidth=Math.floor(u*.5),this.halfHeight=Math.floor(l*.5),this.centerX=Math.floor(u/2),this.centerY=Math.floor(l/2);var d=this.data,v=d.cut;v.x=f,v.y=c,v.w=u,v.h=l,v.r=f+u,v.b=c+l,d.sourceSize.w=u,d.sourceSize.h=l,d.spriteSourceSize.w=u,d.spriteSourceSize.h=l,d.radius=.5*Math.sqrt(u*u+l*l);var p=d.drawImage;return p.x=f,p.y=c,p.width=u,p.height=l,this.updateUVs()},setTrim:function(u,l,f,c,d,v){var p=this.data,g=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=u,p.sourceSize.h=l,g.x=f,g.y=c,g.w=d,g.h=v,g.r=f+d,g.b=c+v,this.x=f,this.y=c,this.width=d,this.height=v,this.halfWidth=d*.5,this.halfHeight=v*.5,this.centerX=Math.floor(d/2),this.centerY=Math.floor(v/2),this.updateUVs()},setCropUVs:function(u,l,f,c,d,v,p){var g=this.cutX,m=this.cutY,x=this.cutWidth,y=this.cutHeight,T=this.realWidth,S=this.realHeight;l=a(l,0,T),f=a(f,0,S),c=a(c,0,T-l),d=a(d,0,S-f);var C=g+l,E=m+f,P=c,M=d,R=this.data;if(R.trim){var A=R.spriteSourceSize;c=a(c,0,x-l),d=a(d,0,y-f);var O=l+c,F=f+d,b=!(A.r<l||A.b<f||A.x>O||A.y>F);if(b){var w=Math.max(A.x,l),N=Math.max(A.y,f),V=Math.min(A.r,O)-w,W=Math.min(A.b,F)-N;P=V,M=W,v?C=g+(x-(w-A.x)-V):C=g+(w-A.x),p?E=m+(y-(N-A.y)-W):E=m+(N-A.y),l=w,f=N,c=V,d=W}else C=0,E=0,P=0,M=0}else v&&(C=g+(x-l-c)),p&&(E=m+(y-f-d));var U=this.source.width,D=this.source.height;return u.u0=Math.max(0,C/U),u.v0=Math.max(0,E/D),u.u1=Math.min(1,(C+P)/U),u.v1=Math.min(1,(E+M)/D),u.x=l,u.y=f,u.cx=C,u.cy=E,u.cw=P,u.ch=M,u.width=c,u.height=d,u.flipX=v,u.flipY=p,u},updateCropUVs:function(u,l,f){return this.setCropUVs(u,u.x,u.y,u.width,u.height,l,f)},setUVs:function(u,l,f,c,d,v){var p=this.data.drawImage;return p.width=u,p.height=l,this.u0=f,this.v0=c,this.u1=d,this.v1=v,this},updateUVs:function(){var u=this.cutX,l=this.cutY,f=this.cutWidth,c=this.cutHeight,d=this.data.drawImage;d.width=f,d.height=c;var v=this.source.width,p=this.source.height;return this.u0=u/v,this.v0=l/p,this.u1=(u+f)/v,this.v1=(l+c)/p,this},updateUVsInverted:function(){var u=this.source.width,l=this.source.height;return this.u0=(this.cutX+this.cutHeight)/u,this.v0=this.cutY/l,this.u1=this.cutX/u,this.v1=(this.cutY+this.cutWidth)/l,this},clone:function(){var u=new h(this.texture,this.name,this.sourceIndex);return u.cutX=this.cutX,u.cutY=this.cutY,u.cutWidth=this.cutWidth,u.cutHeight=this.cutHeight,u.x=this.x,u.y=this.y,u.width=this.width,u.height=this.height,u.halfWidth=this.halfWidth,u.halfHeight=this.halfHeight,u.centerX=this.centerX,u.centerY=this.centerY,u.rotated=this.rotated,u.data=n(!0,u.data,this.data),u.updateUVs(),u},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(208),a=i(0),n=i(1),h=i(79),u=new a({initialize:function(f){this.parent=f,this.list=[],this.position=0,this.addCallback=n,this.removeCallback=n,this._sortKey=""},add:function(l,f){return f?s.Add(this.list,l):s.Add(this.list,l,0,this.addCallback,this)},addAt:function(l,f,c){return c?s.AddAt(this.list,l,f):s.AddAt(this.list,l,f,0,this.addCallback,this)},getAt:function(l){return this.list[l]},getIndex:function(l){return this.list.indexOf(l)},sort:function(l,f){return l?(f===void 0&&(f=function(c,d){return c[l]-d[l]}),h(this.list,f),this):this},getByName:function(l){return s.GetFirst(this.list,"name",l)},getRandom:function(l,f){return s.GetRandom(this.list,l,f)},getFirst:function(l,f,c,d){return s.GetFirst(this.list,l,f,c,d)},getAll:function(l,f,c,d){return s.GetAll(this.list,l,f,c,d)},count:function(l,f){return s.CountAllMatching(this.list,l,f)},swap:function(l,f){s.Swap(this.list,l,f)},moveTo:function(l,f){return s.MoveTo(this.list,l,f)},moveAbove:function(l,f){return s.MoveAbove(this.list,l,f)},moveBelow:function(l,f){return s.MoveBelow(this.list,l,f)},remove:function(l,f){return f?s.Remove(this.list,l):s.Remove(this.list,l,this.removeCallback,this)},removeAt:function(l,f){return f?s.RemoveAt(this.list,l):s.RemoveAt(this.list,l,this.removeCallback,this)},removeBetween:function(l,f,c){return c?s.RemoveBetween(this.list,l,f):s.RemoveBetween(this.list,l,f,this.removeCallback,this)},removeAll:function(l){for(var f=this.list.length;f--;)this.remove(this.list[f],l);return this},bringToTop:function(l){return s.BringToTop(this.list,l)},sendToBack:function(l){return s.SendToBack(this.list,l)},moveUp:function(l){return s.MoveUp(this.list,l),l},moveDown:function(l){return s.MoveDown(this.list,l),l},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(l,f){return s.Replace(this.list,l,f)},exists:function(l){return this.list.indexOf(l)>-1},setAll:function(l,f,c,d){return s.SetAll(this.list,l,f,c,d),this},each:function(l,f){for(var c=[null],d=2;d<arguments.length;d++)c.push(arguments[d]);for(d=0;d<this.list.length;d++)c[0]=this.list[d],l.apply(f,c)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(112),n=i(445),h=i(446),u=i(56),l=i(180),f=new s({initialize:function(d,v,p,g){d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=u.ELLIPSE,this.x=d,this.y=v,this.width=p,this.height=g},contains:function(c,d){return a(this,c,d)},getPoint:function(c,d){return n(this,c,d)},getPoints:function(c,d,v){return h(this,c,d,v)},getRandomPoint:function(c){return l(this,c)},setTo:function(c,d,v,p){return this.x=c,this.y=d,this.width=v,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(c,d){return d===void 0&&(d=c),this.x=c,this.y=d,this},setSize:function(c,d){return d===void 0&&(d=c),this.width=c,this.height=d,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(c){this.x=c+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(c){this.x=c-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(c){this.y=c+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(c){this.y=c-this.height/2}}});e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(s.width<=0||s.height<=0)return!1;var h=(a-s.x)/s.width,u=(n-s.y)/s.height;return h*=h,u*=u,h+u<.25};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(275),a=i(0),n=i(75),h=i(9),u=i(207),l=i(2),f=i(6),c=i(7),d=i(437),v=i(149),p=i(73),g=new a({Extends:h,initialize:function(x,y,T){h.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?c(y[0])&&(T=y,y=null):c(y)&&(T=y,y=null),this.scene=x,this.children=new v,this.isParent=!0,this.type="Group",this.classType=l(T,"classType",p),this.name=l(T,"name",""),this.active=l(T,"active",!0),this.maxSize=l(T,"maxSize",-1),this.defaultKey=l(T,"defaultKey",null),this.defaultFrame=l(T,"defaultFrame",null),this.runChildUpdate=l(T,"runChildUpdate",!1),this.createCallback=l(T,"createCallback",null),this.removeCallback=l(T,"removeCallback",null),this.createMultipleCallback=l(T,"createMultipleCallback",null),this.internalCreateCallback=l(T,"internalCreateCallback",null),this.internalRemoveCallback=l(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(n.ADDED_TO_SCENE,this.addedToScene,this),this.on(n.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,x,y,T,S,C){if(m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),S===void 0&&(S=!0),C===void 0&&(C=!0),this.isFull())return null;var E=new this.classType(this.scene,m,x,y,T);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=S,E.setActive(C),this.add(E),E},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var x=[];if(m[0].key)for(var y=0;y<m.length;y++){var T=this.createFromConfig(m[y]);x=x.concat(T)}return x},createFromConfig:function(m){if(this.isFull())return[];this.classType=l(m,"classType",this.classType);var x=l(m,"key",void 0),y=l(m,"frame",null),T=l(m,"visible",!0),S=l(m,"active",!0),C=[];if(x===void 0)return C;Array.isArray(x)||(x=[x]),Array.isArray(y)||(y=[y]);var E=l(m,"repeat",0),P=l(m,"randomKey",!1),M=l(m,"randomFrame",!1),R=l(m,"yoyo",!1),A=l(m,"quantity",!1),O=l(m,"frameQuantity",1),F=l(m,"max",0),b=d(x,y,{max:F,qty:A||O,random:P,randomB:M,repeat:E,yoyo:R});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback);for(var w=0;w<b.length;w++){var N=this.create(0,0,b[w].a,b[w].b,T,S);if(!N)break;C.push(N)}var V=f(m,"setXY.x",0),W=f(m,"setXY.y",0),U=f(m,"setXY.stepX",0),D=f(m,"setXY.stepY",0);s.SetXY(C,V,W,U,D);var L=f(m,"setRotation.value",0),I=f(m,"setRotation.step",0);s.SetRotation(C,L,I);var B=f(m,"setScale.x",1),G=f(m,"setScale.y",B),z=f(m,"setScale.stepX",0),Y=f(m,"setScale.stepY",0);s.SetScale(C,B,G,z,Y);var X=f(m,"setOrigin.x",.5),H=f(m,"setOrigin.y",X),$=f(m,"setOrigin.stepX",0),k=f(m,"setOrigin.stepY",0);s.SetOrigin(C,X,H,$,k);var K=f(m,"setAlpha.value",1),Z=f(m,"setAlpha.step",0);s.SetAlpha(C,K,Z);var j=f(m,"setDepth.value",0),J=f(m,"setDepth.step",0);s.SetDepth(C,j,J);var q=f(m,"setScrollFactor.x",1),ot=f(m,"setScrollFactor.y",q),nt=f(m,"setScrollFactor.stepX",0),tt=f(m,"setScrollFactor.stepY",0);s.SetScrollFactor(C,q,ot,nt,tt);var Q=l(m,"hitArea",null),lt=l(m,"hitAreaCallback",null);Q&&s.SetHitArea(C,Q,lt);var et=l(m,"gridAlign",!1);return et&&s.GridAlign(C,et),this.createMultipleCallback&&this.createMultipleCallback.call(this,C),C},preUpdate:function(m,x){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var S=y[T];S.active&&S.update(m,x)}},add:function(m,x){return x===void 0&&(x=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),x&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(n.DESTROY,this.remove,this),this)},addMultiple:function(m,x){if(x===void 0&&(x=!1),Array.isArray(m))for(var y=0;y<m.length;y++)this.add(m[y],x);return this},remove:function(m,x,y){return x===void 0&&(x=!1),y===void 0&&(y=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(n.DESTROY,this.remove,this),y?m.destroy():x&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1);for(var y=this.children,T=0;T<y.size;T++){var S=y.entries[T];S.off(n.DESTROY,this.remove,this),x?S.destroy():m&&(S.removeFromDisplayList(),S.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,x,y,T){return u(this.children.entries,m,x,y,T)},getFirst:function(m,x,y,T,S,C,E){return this.getHandler(!0,1,m,x,y,T,S,C,E)},getFirstNth:function(m,x,y,T,S,C,E,P){return this.getHandler(!0,m,x,y,T,S,C,E,P)},getLast:function(m,x,y,T,S,C,E){return this.getHandler(!1,1,m,x,y,T,S,C,E)},getLastNth:function(m,x,y,T,S,C,E,P){return this.getHandler(!1,m,x,y,T,S,C,E,P)},getHandler:function(m,x,y,T,S,C,E,P,M){y===void 0&&(y=!1),T===void 0&&(T=!1);var R,A,O=0,F=this.children.entries;if(m)for(A=0;A<F.length;A++)if(R=F[A],R.active===y){if(O++,O===x)break}else R=null;else for(A=F.length-1;A>=0;A--)if(R=F[A],R.active===y){if(O++,O===x)break}else R=null;return R?(typeof S=="number"&&(R.x=S),typeof C=="number"&&(R.y=C),R):T?this.create(S,C,E,P,M):null},get:function(m,x,y,T,S){return this.getFirst(!1,!0,m,x,y,T,S)},getFirstAlive:function(m,x,y,T,S,C){return this.getFirst(!0,m,x,y,T,S,C)},getFirstDead:function(m,x,y,T,S,C){return this.getFirst(!1,m,x,y,T,S,C)},playAnimation:function(m,x){return s.PlayAnimation(this.children.entries,m,x),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var x=0,y=0;y<this.children.size;y++)this.children.entries[y].active===m&&x++;return x},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),x=this.maxSize===-1?999999999999:this.maxSize;return x-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,x,y,T,S){return s.PropertyValueSet(this.children.entries,m,x,y,T,S),this},propertyValueInc:function(m,x,y,T,S){return s.PropertyValueInc(this.children.entries,m,x,y,T,S),this},setX:function(m,x){return s.SetX(this.children.entries,m,x),this},setY:function(m,x){return s.SetY(this.children.entries,m,x),this},setXY:function(m,x,y,T){return s.SetXY(this.children.entries,m,x,y,T),this},incX:function(m,x){return s.IncX(this.children.entries,m,x),this},incY:function(m,x){return s.IncY(this.children.entries,m,x),this},incXY:function(m,x,y,T){return s.IncXY(this.children.entries,m,x,y,T),this},shiftPosition:function(m,x,y){return s.ShiftPosition(this.children.entries,m,x,y),this},angle:function(m,x){return s.Angle(this.children.entries,m,x),this},rotate:function(m,x){return s.Rotate(this.children.entries,m,x),this},rotateAround:function(m,x){return s.RotateAround(this.children.entries,m,x),this},rotateAroundDistance:function(m,x,y){return s.RotateAroundDistance(this.children.entries,m,x,y),this},setAlpha:function(m,x){return s.SetAlpha(this.children.entries,m,x),this},setTint:function(m,x,y,T){return s.SetTint(this.children.entries,m,x,y,T),this},setOrigin:function(m,x,y,T){return s.SetOrigin(this.children.entries,m,x,y,T),this},scaleX:function(m,x){return s.ScaleX(this.children.entries,m,x),this},scaleY:function(m,x){return s.ScaleY(this.children.entries,m,x),this},scaleXY:function(m,x,y,T){return s.ScaleXY(this.children.entries,m,x,y,T),this},setDepth:function(m,x){return s.SetDepth(this.children.entries,m,x),this},setBlendMode:function(m){return s.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,x){return s.SetHitArea(this.children.entries,m,x),this},shuffle:function(){return s.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,x,y){return s.SetVisible(this.children.entries,m,x,y),this},toggleVisible:function(){return s.ToggleVisible(this.children.entries),this},destroy:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(n.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(x,m),this.scene=void 0,this.children=void 0)}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),a=function(n,h,u,l,f,c){for(var d=s.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*l),v=u.pathData,p=u.pathIndexes,g=0;g<p.length;g+=3){var m=p[g]*2,x=p[g+1]*2,y=p[g+2]*2,T=v[m+0]-f,S=v[m+1]-c,C=v[x+0]-f,E=v[x+1]-c,P=v[y+0]-f,M=v[y+1]-c,R=h.getX(T,S),A=h.getY(T,S),O=h.getX(C,E),F=h.getY(C,E),b=h.getX(P,M),w=h.getY(P,M);n.batchTri(u,R,A,O,F,b,w,0,0,1,1,d,d,d,2)}};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=s.x3-s.x1,u=s.y3-s.y1,l=s.x2-s.x1,f=s.y2-s.y1,c=a-s.x1,d=n-s.y1,v=h*h+u*u,p=h*l+u*f,g=h*c+u*d,m=l*l+f*f,x=l*c+f*d,y=v*m-p*p,T=y===0?0:1/y,S=(m*g-p*x)*T,C=(v*x-p*g)*T;return S>=0&&C>=0&&S+C<1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(10),n=i(3);function h(l,f,c,d){var v=l-c,p=f-d,g=v*v+p*p;return Math.sqrt(g)}var u=new s({initialize:function(f,c,d){this.vertex1=f,this.vertex2=c,this.vertex3=d,this.bounds=new a,this._inCenter=new n},getInCenter:function(l){l===void 0&&(l=!0);var f=this.vertex1,c=this.vertex2,d=this.vertex3,v,p,g,m,x,y;l?(v=f.x,p=f.y,g=c.x,m=c.y,x=d.x,y=d.y):(v=f.vx,p=f.vy,g=c.vx,m=c.vy,x=d.vx,y=d.vy);var T=h(x,y,g,m),S=h(v,p,x,y),C=h(g,m,v,p),E=T+S+C;return this._inCenter.set((v*T+g*S+x*C)/E,(p*T+m*S+y*C)/E)},contains:function(l,f,c){var d=this.vertex1,v=this.vertex2,p=this.vertex3,g=d.vx,m=d.vy,x=v.vx,y=v.vy,T=p.vx,S=p.vy;if(c){var C=c.a,E=c.b,P=c.c,M=c.d,R=c.e,A=c.f;g=d.vx*C+d.vy*P+R,m=d.vx*E+d.vy*M+A,x=v.vx*C+v.vy*P+R,y=v.vx*E+v.vy*M+A,T=p.vx*C+p.vy*P+R,S=p.vx*E+p.vy*M+A}var O=T-g,F=S-m,b=x-g,w=y-m,N=l-g,V=f-m,W=O*O+F*F,U=O*b+F*w,D=O*N+F*V,L=b*b+w*w,I=b*N+w*V,B=W*L-U*U,G=B===0?0:1/B,z=(L*D-U*I)*G,Y=(W*I-U*D)*G;return z>=0&&Y>=0&&z+Y<1},isCounterClockwise:function(l){var f=this.vertex1,c=this.vertex2,d=this.vertex3,v=(c.vx-f.vx)*(d.vy-f.vy)-(c.vy-f.vy)*(d.vx-f.vx);return l<=0?v>=0:v<0},load:function(l,f,c,d,v){return c=this.vertex1.load(l,f,c,d,v),c=this.vertex2.load(l,f,c,d,v),c=this.vertex3.load(l,f,c,d,v),c},transformCoordinatesLocal:function(l,f,c,d){return this.vertex1.transformCoordinatesLocal(l,f,c,d),this.vertex2.transformCoordinatesLocal(l,f,c,d),this.vertex3.transformCoordinatesLocal(l,f,c,d),this},updateBounds:function(){var l=this.vertex1,f=this.vertex2,c=this.vertex3,d=this.bounds;return d.x=Math.min(l.vx,f.vx,c.vx),d.y=Math.min(l.vy,f.vy,c.vy),d.width=Math.max(l.vx,f.vx,c.vx)-d.x,d.height=Math.max(l.vy,f.vy,c.vy)-d.y,this},isInView:function(l,f,c,d,v,p,g,m,x,y,T){var S=this.vertex1.update(v,p,g,m,x,y,T,d),C=this.vertex2.update(v,p,g,m,x,y,T,d),E=this.vertex3.update(v,p,g,m,x,y,T,d);if(S.ta<=0&&C.ta<=0&&E.ta<=0||f&&!this.isCounterClockwise(c))return!1;var P=this.bounds;P.x=Math.min(S.tx,C.tx,E.tx),P.y=Math.min(S.ty,C.ty,E.ty),P.width=Math.max(S.tx,C.tx,E.tx)-P.x,P.height=Math.max(S.ty,C.ty,E.ty)-P.y;var M=l.x+l.width,R=l.y+l.height;return P.width<=0||P.height<=0||l.width<=0||l.height<=0?!1:!(P.right<l.x||P.bottom<l.y||P.x>M||P.y>R)},translate:function(l,f){f===void 0&&(f=0);var c=this.vertex1,d=this.vertex2,v=this.vertex3;return c.x+=l,c.y+=f,d.x+=l,d.y+=f,v.x+=l,v.y+=f,this},x:{get:function(){return this.getInCenter().x},set:function(l){var f=this.getInCenter();this.translate(l-f.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(l){var f=this.getInCenter();this.translate(0,l-f.y)}},alpha:{get:function(){var l=this.vertex1,f=this.vertex2,c=this.vertex3;return(l.alpha+f.alpha+c.alpha)/3},set:function(l){this.vertex1.alpha=l,this.vertex2.alpha=l,this.vertex3.alpha=l}},depth:{get:function(){var l=this.vertex1,f=this.vertex2,c=this.vertex3;return(l.vz+f.vz+c.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(12),n=i(39),h=new s({Extends:n,initialize:function(l,f,c,d,v,p,g,m,x,y){p===void 0&&(p=16777215),g===void 0&&(g=1),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),n.call(this,l,f,c),this.vx=0,this.vy=0,this.vz=0,this.nx=m,this.ny=x,this.nz=y,this.u=d,this.v=v,this.color=p,this.alpha=g,this.tx=0,this.ty=0,this.ta=0},setUVs:function(u,l){return this.u=u,this.v=l,this},transformCoordinatesLocal:function(u,l,f,c){var d=this.x,v=this.y,p=this.z,g=u.val,m=d*g[0]+v*g[4]+p*g[8]+g[12],x=d*g[1]+v*g[5]+p*g[9]+g[13],y=d*g[2]+v*g[6]+p*g[10]+g[14],T=d*g[3]+v*g[7]+p*g[11]+g[15];this.vx=m/T*l,this.vy=-(x/T)*f,c<=0?this.vz=y/T:this.vz=-(y/T)},update:function(u,l,f,c,d,v,p,g){var m=this.vx*u+this.vy*f+d,x=this.vx*l+this.vy*c+v;return p&&(m=Math.round(m),x=Math.round(x)),this.tx=m,this.ty=x,this.ta=this.alpha*g,this},load:function(u,l,f,c,d){return u[++f]=this.tx,u[++f]=this.ty,u[++f]=this.u,u[++f]=this.v,u[++f]=c,u[++f]=d,l[++f]=a.getTintAppendFloatAlpha(this.color,this.ta),f}});e.exports=h},function(e,r,i){var s={};e.exports=s;var a=i(166),n=i(32),h=i(84),u=i(41);(function(){s.create=function(l){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},l)},s.setModified=function(l,f,c,d){if(a.trigger(l,"compositeModified",l),l.isModified=f,c&&l.parent&&s.setModified(l.parent,f,c,d),d)for(var v=0;v<l.composites.length;v++){var p=l.composites[v];s.setModified(p,f,c,d)}},s.add=function(l,f){var c=[].concat(f);a.trigger(l,"beforeAdd",{object:f});for(var d=0;d<c.length;d++){var v=c[d];switch(v.type){case"body":if(v.parent!==v){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(l,v);break;case"constraint":s.addConstraint(l,v);break;case"composite":s.addComposite(l,v);break;case"mouseConstraint":s.addConstraint(l,v.constraint);break}}return a.trigger(l,"afterAdd",{object:f}),l},s.remove=function(l,f,c){var d=[].concat(f);a.trigger(l,"beforeRemove",{object:f});for(var v=0;v<d.length;v++){var p=d[v];switch(p.type){case"body":s.removeBody(l,p,c);break;case"constraint":s.removeConstraint(l,p,c);break;case"composite":s.removeComposite(l,p,c);break;case"mouseConstraint":s.removeConstraint(l,p.constraint);break}}return a.trigger(l,"afterRemove",{object:f}),l},s.addComposite=function(l,f){return l.composites.push(f),f.parent=l,s.setModified(l,!0,!0,!1),l},s.removeComposite=function(l,f,c){var d=l.composites.indexOf(f);if(d!==-1&&(s.removeCompositeAt(l,d),s.setModified(l,!0,!0,!1)),c)for(var v=0;v<l.composites.length;v++)s.removeComposite(l.composites[v],f,!0);return l},s.removeCompositeAt=function(l,f){return l.composites.splice(f,1),s.setModified(l,!0,!0,!1),l},s.addBody=function(l,f){return l.bodies.push(f),s.setModified(l,!0,!0,!1),l},s.removeBody=function(l,f,c){var d=l.bodies.indexOf(f);if(d!==-1&&(s.removeBodyAt(l,d),s.setModified(l,!0,!0,!1)),c)for(var v=0;v<l.composites.length;v++)s.removeBody(l.composites[v],f,!0);return l},s.removeBodyAt=function(l,f){return l.bodies.splice(f,1),s.setModified(l,!0,!0,!1),l},s.addConstraint=function(l,f){return l.constraints.push(f),s.setModified(l,!0,!0,!1),l},s.removeConstraint=function(l,f,c){var d=l.constraints.indexOf(f);if(d!==-1&&s.removeConstraintAt(l,d),c)for(var v=0;v<l.composites.length;v++)s.removeConstraint(l.composites[v],f,!0);return l},s.removeConstraintAt=function(l,f){return l.constraints.splice(f,1),s.setModified(l,!0,!0,!1),l},s.clear=function(l,f,c){if(c)for(var d=0;d<l.composites.length;d++)s.clear(l.composites[d],f,!0);return f?l.bodies=l.bodies.filter(function(v){return v.isStatic}):l.bodies.length=0,l.constraints.length=0,l.composites.length=0,s.setModified(l,!0,!0,!1),l},s.allBodies=function(l){for(var f=[].concat(l.bodies),c=0;c<l.composites.length;c++)f=f.concat(s.allBodies(l.composites[c]));return f},s.allConstraints=function(l){for(var f=[].concat(l.constraints),c=0;c<l.composites.length;c++)f=f.concat(s.allConstraints(l.composites[c]));return f},s.allComposites=function(l){for(var f=[].concat(l.composites),c=0;c<l.composites.length;c++)f=f.concat(s.allComposites(l.composites[c]));return f},s.get=function(l,f,c){var d,v;switch(c){case"body":d=s.allBodies(l);break;case"constraint":d=s.allConstraints(l);break;case"composite":d=s.allComposites(l).concat(l);break}return d?(v=d.filter(function(p){return p.id.toString()===f.toString()}),v.length===0?null:v[0]):null},s.move=function(l,f,c){return s.remove(l,f),s.add(c,f),l},s.rebase=function(l){for(var f=s.allBodies(l).concat(s.allConstraints(l)).concat(s.allComposites(l)),c=0;c<f.length;c++)f[c].id=n.nextId();return s.setModified(l,!0,!0,!1),l},s.translate=function(l,f,c){for(var d=c?s.allBodies(l):l.bodies,v=0;v<d.length;v++)u.translate(d[v],f);return s.setModified(l,!0,!0,!1),l},s.rotate=function(l,f,c,d){for(var v=Math.cos(f),p=Math.sin(f),g=d?s.allBodies(l):l.bodies,m=0;m<g.length;m++){var x=g[m],y=x.position.x-c.x,T=x.position.y-c.y;u.setPosition(x,{x:c.x+(y*v-T*p),y:c.y+(y*p+T*v)}),u.rotate(x,f)}return s.setModified(l,!0,!0,!1),l},s.scale=function(l,f,c,d,v){for(var p=v?s.allBodies(l):l.bodies,g=0;g<p.length;g++){var m=p[g],x=m.position.x-d.x,y=m.position.y-d.y;u.setPosition(m,{x:d.x+x*f,y:d.y+y*c}),u.scale(m,f,c)}return s.setModified(l,!0,!0,!1),l},s.bounds=function(l){for(var f=s.allBodies(l),c=[],d=0;d<f.length;d+=1){var v=f[d];c.push(v.bounds.min,v.bounds.max)}return h.create(c)}})()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s>=0&&s<n.width&&a>=0&&a<n.height};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(29),n=i(2),h=new s({initialize:function(l){l===void 0&&(l={}),this.name=n(l,"name","layer"),this.x=n(l,"x",0),this.y=n(l,"y",0),this.width=n(l,"width",0),this.height=n(l,"height",0),this.tileWidth=n(l,"tileWidth",0),this.tileHeight=n(l,"tileHeight",0),this.baseTileWidth=n(l,"baseTileWidth",this.tileWidth),this.baseTileHeight=n(l,"baseTileHeight",this.tileHeight),this.orientation=n(l,"orientation",a.ORTHOGONAL),this.widthInPixels=n(l,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=n(l,"heightInPixels",this.height*this.baseTileHeight),this.alpha=n(l,"alpha",1),this.visible=n(l,"visible",!0),this.properties=n(l,"properties",[]),this.indexes=n(l,"indexes",[]),this.collideIndexes=n(l,"collideIndexes",[]),this.callbacks=n(l,"callbacks",[]),this.bodies=n(l,"bodies",[]),this.data=n(l,"data",[]),this.tilemapLayer=n(l,"tilemapLayer",null),this.hexSideLength=n(l,"hexSideLength",0)}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(29),n=i(2),h=new s({initialize:function(l){l===void 0&&(l={}),this.name=n(l,"name","map"),this.width=n(l,"width",0),this.height=n(l,"height",0),this.infinite=n(l,"infinite",!1),this.tileWidth=n(l,"tileWidth",0),this.tileHeight=n(l,"tileHeight",0),this.widthInPixels=n(l,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=n(l,"heightInPixels",this.height*this.tileHeight),this.format=n(l,"format",null),this.orientation=n(l,"orientation",a.ORTHOGONAL),this.renderOrder=n(l,"renderOrder","right-down"),this.version=n(l,"version","1"),this.properties=n(l,"properties",{}),this.layers=n(l,"layers",[]),this.images=n(l,"images",[]),this.objects=n(l,"objects",{}),this.collision=n(l,"collision",{}),this.tilesets=n(l,"tilesets",[]),this.imageCollections=n(l,"imageCollections",[]),this.tiles=n(l,"tiles",[]),this.hexSideLength=n(l,"hexSideLength",0)}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u,l,f,c,d,v,p){(l===void 0||l<=0)&&(l=32),(f===void 0||f<=0)&&(f=32),c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v={}),p===void 0&&(p={}),this.name=h,this.firstgid=u,this.tileWidth=l,this.tileHeight=f,this.tileMargin=c,this.tileSpacing=d,this.tileProperties=v,this.tileData=p,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(n){return this.containsTileIndex(n)?this.tileProperties[n-this.firstgid]:null},getTileData:function(n){return this.containsTileIndex(n)?this.tileData[n-this.firstgid]:null},getTileCollisionGroup:function(n){var h=this.getTileData(n);return h&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},getTileTextureCoordinates:function(n){return this.containsTileIndex(n)?this.texCoordinates[n-this.firstgid]:null},setImage:function(n){return this.image=n,this.glTexture=n.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(n,h){return n!==void 0&&(this.tileWidth=n),h!==void 0&&(this.tileHeight=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(n,h){return n!==void 0&&(this.tileMargin=n),h!==void 0&&(this.tileSpacing=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(n,h){var u=(h-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),l=(n-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(u%1!==0||l%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),u=Math.floor(u),l=Math.floor(l),this.rows=u,this.columns=l,this.total=u*l,this.texCoordinates.length=0;for(var f=this.tileMargin,c=this.tileMargin,d=0;d<this.rows;d++){for(var v=0;v<this.columns;v++)this.texCoordinates.push({x:f,y:c}),f+=this.tileWidth+this.tileSpacing;f=this.tileMargin,c+=this.tileHeight+this.tileSpacing}return this}});e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return n===void 0&&(n=1e-4),Math.abs(s-a)<n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(11),n=i(15),h=i(1068),u=new s({Extends:n,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,h],initialize:function(f,c,d,v,p){n.call(this,f,"Image"),this._crop=this.resetCropObject(),this.setTexture(v,p),this.setPosition(c,d),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.hasOwnProperty(a)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(77),a=function(n,h){var u=s(n);for(var l in h)u.hasOwnProperty(l)||(u[l]=h[l]);return u};e.exports=a},function(e,r,i){var s={};e.exports=s;var a=i(64),n=i(83),h=i(165),u=i(84),l=i(271),f=i(32);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(c){var d=c;d.bodyA&&!d.pointA&&(d.pointA={x:0,y:0}),d.bodyB&&!d.pointB&&(d.pointB={x:0,y:0});var v=d.bodyA?n.add(d.bodyA.position,d.pointA):d.pointA,p=d.bodyB?n.add(d.bodyB.position,d.pointB):d.pointB,g=n.magnitude(n.sub(v,p));d.length=typeof d.length!="undefined"?d.length:g,d.id=d.id||f.nextId(),d.label=d.label||"Constraint",d.type="constraint",d.stiffness=d.stiffness||(d.length>0?1:.7),d.damping=d.damping||0,d.angularStiffness=d.angularStiffness||0,d.angleA=d.bodyA?d.bodyA.angle:d.angleA,d.angleB=d.bodyB?d.bodyB.angle:d.angleB,d.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return d.length===0&&d.stiffness>.1?(m.type="pin",m.anchors=!1):d.stiffness<.9&&(m.type="spring"),d.render=f.extend(m,d.render),d},s.preSolveAll=function(c){for(var d=0;d<c.length;d+=1){var v=c[d],p=v.constraintImpulse;v.isStatic||p.x===0&&p.y===0&&p.angle===0||(v.position.x+=p.x,v.position.y+=p.y,v.angle+=p.angle)}},s.solveAll=function(c,d){for(var v=0;v<c.length;v+=1){var p=c[v],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(g||m)&&s.solve(c[v],d)}for(v=0;v<c.length;v+=1)p=c[v],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!g&&!m&&s.solve(c[v],d)},s.solve=function(c,d){var v=c.bodyA,p=c.bodyB,g=c.pointA,m=c.pointB;if(!(!v&&!p)){v&&!v.isStatic&&(n.rotate(g,v.angle-c.angleA,g),c.angleA=v.angle),p&&!p.isStatic&&(n.rotate(m,p.angle-c.angleB,m),c.angleB=p.angle);var x=g,y=m;if(v&&(x=n.add(v.position,g)),p&&(y=n.add(p.position,m)),!(!x||!y)){var T=n.sub(x,y),S=n.magnitude(T);S<s._minLength&&(S=s._minLength);var C=(S-c.length)/S,E=c.stiffness<1?c.stiffness*d:c.stiffness,P=n.mult(T,C*E),M=(v?v.inverseMass:0)+(p?p.inverseMass:0),R=(v?v.inverseInertia:0)+(p?p.inverseInertia:0),A=M+R,O,F,b,w,N;if(c.damping){var V=n.create();b=n.div(T,S),N=n.sub(p&&n.sub(p.position,p.positionPrev)||V,v&&n.sub(v.position,v.positionPrev)||V),w=n.dot(b,N)}v&&!v.isStatic&&(F=v.inverseMass/M,v.constraintImpulse.x-=P.x*F,v.constraintImpulse.y-=P.y*F,v.position.x-=P.x*F,v.position.y-=P.y*F,c.damping&&(v.positionPrev.x-=c.damping*b.x*w*F,v.positionPrev.y-=c.damping*b.y*w*F),O=n.cross(g,P)/A*s._torqueDampen*v.inverseInertia*(1-c.angularStiffness),v.constraintImpulse.angle-=O,v.angle-=O),p&&!p.isStatic&&(F=p.inverseMass/M,p.constraintImpulse.x+=P.x*F,p.constraintImpulse.y+=P.y*F,p.position.x+=P.x*F,p.position.y+=P.y*F,c.damping&&(p.positionPrev.x+=c.damping*b.x*w*F,p.positionPrev.y+=c.damping*b.y*w*F),O=n.cross(m,P)/A*s._torqueDampen*p.inverseInertia*(1-c.angularStiffness),p.constraintImpulse.angle+=O,p.angle+=O)}}},s.postSolveAll=function(c){for(var d=0;d<c.length;d++){var v=c[d],p=v.constraintImpulse;if(!(v.isStatic||p.x===0&&p.y===0&&p.angle===0)){h.set(v,!1);for(var g=0;g<v.parts.length;g++){var m=v.parts[g];a.translate(m.vertices,p),g>0&&(m.position.x+=p.x,m.position.y+=p.y),p.angle!==0&&(a.rotate(m.vertices,p.angle,v.position),l.rotate(m.axes,p.angle),g>0&&n.rotateAbout(m.position,p.angle,v.position,m.position)),u.update(m.bounds,m.vertices,v.velocity)}p.angle*=s._warming,p.x*=s._warming,p.y*=s._warming}}},s.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+c.pointA.x,y:(c.bodyA?c.bodyA.position.y:0)+c.pointA.y}},s.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+c.pointB.x,y:(c.bodyB?c.bodyB.position.y:0)+c.pointB.y}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),a=i(65),n=i(66),h=i(0),u=i(11),l=i(15),f=i(10),c=i(57),d=new h({Extends:l,Mixins:[u.Depth,u.GetBounds,u.Origin,u.Transform,u.ScrollFactor,u.Visible],initialize:function(p,g,m,x,y){x===void 0&&(x=1),y===void 0&&(y=x),l.call(this,p,"Zone"),this.setPosition(g,m),this.width=x,this.height=y,this.blendMode=s.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(v){this.scaleX=v/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(v){this.scaleY=v/this.height}},setSize:function(v,p,g){g===void 0&&(g=!0),this.width=v,this.height=p,this.updateDisplayOrigin();var m=this.input;return g&&m&&!m.customHitArea&&(m.hitArea.width=v,m.hitArea.height=p),this},setDisplaySize:function(v,p){return this.displayWidth=v,this.displayHeight=p,this},setCircleDropZone:function(v){return this.setDropZone(new a(0,0,v),n)},setRectangleDropZone:function(v,p){return this.setDropZone(new f(0,0,v,p),c)},setDropZone:function(v,p){return v===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(v,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(v,p,g){g.addToRenderList(p)},renderWebGL:function(v,p,g){g.addToRenderList(p)}});e.exports=d},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return 2*(s.width+s.height)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var a=s.length-1;a>0;a--){var n=Math.floor(Math.random()*(a+1)),h=s[a];s[a]=s[n],s[n]=h}return s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD_ANIMATION:i(724),ANIMATION_COMPLETE:i(725),ANIMATION_COMPLETE_KEY:i(726),ANIMATION_REPEAT:i(727),ANIMATION_RESTART:i(728),ANIMATION_START:i(729),ANIMATION_STOP:i(730),ANIMATION_UPDATE:i(731),PAUSE_ALL:i(732),REMOVE_ANIMATION:i(733),RESUME_ALL:i(734)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(11),n=i(36),h=i(9),u=i(37),l=i(10),f=i(25),c=i(187),d=i(3),v=new s({Extends:h,Mixins:[a.Alpha,a.Visible],initialize:function(g,m,x,y){g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),h.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new l,this.dirty=!0,this._x=g,this._y=m,this._width=x,this._height=y,this._bounds=new l,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new f,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new d(x/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,g){return p===void 0&&(p=.5),g===void 0&&(g=p),this.originX=p,this.originY=g,this},getScroll:function(p,g,m){m===void 0&&(m=new d);var x=this.width*.5,y=this.height*.5;return m.x=p-x,m.y=g-y,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(p){var g=this.width*.5;return this.midPoint.x=p,this.scrollX=p-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var g=this.height*.5;return this.midPoint.y=p,this.scrollY=p-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,g){return this.centerOnX(p),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,g=this.width*.5,m=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-g,this.scrollY=p.centerY-m}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var g=this.matrix.matrix,m=g[0],x=g[1],y=g[2],T=g[3],S=m*T-x*y;if(!S)return p;var C=g[4],E=g[5],P=this.scrollX,M=this.scrollY,R=this.width,A=this.height,O=this.y,F=O+A,b=this.x,w=b+R,N=this.culledObjects,V=p.length;S=1/S,N.length=0;for(var W=0;W<V;++W){var U=p[W];if(!U.hasOwnProperty("width")||U.parentContainer){N.push(U);continue}var D=U.width,L=U.height,I=U.x-P*U.scrollFactorX-D*U.originX,B=U.y-M*U.scrollFactorY-L*U.originY,G=I*m+B*y+C,z=I*x+B*T+E,Y=(I+D)*m+(B+L)*y+C,X=(I+D)*x+(B+L)*T+E;Y>b&&G<w&&X>O&&z<F&&N.push(U)}return N},getWorldPoint:function(p,g,m){m===void 0&&(m=new d);var x=this.matrix.matrix,y=x[0],T=x[1],S=x[2],C=x[3],E=x[4],P=x[5],M=y*C-T*S;if(!M)return m.x=p,m.y=g,m;M=1/M;var R=C*M,A=-T*M,O=-S*M,F=y*M,b=(S*P-C*E)*M,w=(T*E-y*P)*M,N=Math.cos(this.rotation),V=Math.sin(this.rotation),W=this.zoomX,U=this.zoomY,D=this.scrollX,L=this.scrollY,I=p+(D*N-L*V)*W,B=g+(D*V+L*N)*U;return m.x=I*R+B*O+b,m.y=I*A+B*F+w,m},ignore:function(p){var g=this.id;Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var x=p[m];Array.isArray(x)?this.ignore(x):x.isParent?this.ignore(x.getChildren()):x.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var p=this.width,g=this.height,m=p*.5,x=g*.5,y=this.zoomX,T=this.zoomY,S=this.matrix,C=p*this.originX,E=g*this.originY,P=this.scrollX,M=this.scrollY;this.useBounds&&(P=this.clampX(P),M=this.clampY(M)),this.roundPixels&&(C=Math.round(C),E=Math.round(E)),this.scrollX=P,this.scrollY=M;var R=P+m,A=M+x;this.midPoint.set(R,A);var O=p/y,F=g/T;this.worldView.setTo(R-O/2,A-F/2,O,F),S.applyITRS(this.x+C,this.y+E,this.rotation,y,T),S.translate(-C,-E)},clampX:function(p){var g=this._bounds,m=this.displayWidth,x=g.x+(m-this.width)/2,y=Math.max(x,x+g.width-m);return p<x?p=x:p>y&&(p=y),p},clampY:function(p){var g=this._bounds,m=this.displayHeight,x=g.y+(m-this.height)/2,y=Math.max(x,x+g.height-m);return p<x?p=x:p>y&&(p=y),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=n(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=c(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,g,m,x,y){return y===void 0&&(y=!1),this._bounds.setTo(p,g,m,x),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new l);var g=this._bounds;return p.setTo(g.x,g.y,g.width,g.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,g){return g===void 0&&(g=p),this.x=p,this.y=g,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p;var g=p.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(p,g){return g===void 0&&(g=p),this.scrollX=p,this.scrollY=g,this},setSize:function(p,g){return g===void 0&&(g=p),this.width=p,this.height=g,this},setViewport:function(p,g,m,x){return this.x=p,this.y=g,this.width=m,this.height=x,this},setZoom:function(p,g){return p===void 0&&(p=1),g===void 0&&(g=p),p===0&&(p=.001),g===0&&(g=.001),this.zoomX=p,this.zoomY=g,this},setMask:function(p,g){return g===void 0&&(g=!0),this.mask=p,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},updateSystem:function(){if(!!this.scaleManager){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;p&&!this._customViewport?g.customViewports++:!p&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(u.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){this._scrollX=p,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(p){this._scrollY=p,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(334),a=i(335),n=i(336),h=i(337),u=i(338),l=i(339),f=i(340),c=i(341),d=i(342),v=i(343),p=i(344),g=i(345);e.exports={Power0:f,Power1:c.Out,Power2:h.Out,Power3:d.Out,Power4:v.Out,Linear:f,Quad:c.Out,Cubic:h.Out,Quart:d.Out,Quint:v.Out,Sine:p.Out,Expo:l.Out,Circ:n.Out,Elastic:u.Out,Back:s.Out,Bounce:a.Out,Stepped:g,"Quad.easeIn":c.In,"Cubic.easeIn":h.In,"Quart.easeIn":d.In,"Quint.easeIn":v.In,"Sine.easeIn":p.In,"Expo.easeIn":l.In,"Circ.easeIn":n.In,"Elastic.easeIn":u.In,"Back.easeIn":s.In,"Bounce.easeIn":a.In,"Quad.easeOut":c.Out,"Cubic.easeOut":h.Out,"Quart.easeOut":d.Out,"Quint.easeOut":v.Out,"Sine.easeOut":p.Out,"Expo.easeOut":l.Out,"Circ.easeOut":n.Out,"Elastic.easeOut":u.Out,"Back.easeOut":s.Out,"Bounce.easeOut":a.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":h.InOut,"Quart.easeInOut":d.InOut,"Quint.easeInOut":v.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":l.InOut,"Circ.easeInOut":n.InOut,"Elastic.easeInOut":u.InOut,"Back.easeInOut":s.InOut,"Bounce.easeInOut":a.InOut}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return(a-s)*n+s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(105),a={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function n(){var h=navigator.userAgent;return/Edge\/\d+/.test(h)?a.edge=!0:/Chrome\/(\d+)/.test(h)&&!s.windowsPhone?(a.chrome=!0,a.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(h)?(a.firefox=!0,a.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(h)&&s.iOS?a.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(h)?(a.ie=!0,a.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(h)?a.opera=!0:/Safari/.test(h)&&!s.windowsPhone?a.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(h)&&(a.ie=!0,a.trident=!0,a.tridentVersion=parseInt(RegExp.$1,10),a.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(h)&&(a.silk=!0),a}e.exports=n()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return Math.random()*(a-s)+s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s>0&&(s&s-1)===0&&a>0&&(a&a-1)===0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){return n===void 0&&(n=0),a===0?s:(s-=n,s=a*Math.ceil(s/a),h?(n+s)/a:n+s)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u,l,f){this.x=0,this.y=0,this.z=0,this.w=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=u||0,this.z=l||0,this.w=f||0)},clone:function(){return new a(this.x,this.y,this.z,this.w)},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this.w=n.w||0,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z&&this.w===n.w},set:function(n,h,u,l){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=h||0,this.z=u||0,this.w=l||0),this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this.w+=n.w||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this.w-=n.w||0,this},scale:function(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this},length:function(){var n=this.x,h=this.y,u=this.z,l=this.w;return Math.sqrt(n*n+h*h+u*u+l*l)},lengthSq:function(){var n=this.x,h=this.y,u=this.z,l=this.w;return n*n+h*h+u*u+l*l},normalize:function(){var n=this.x,h=this.y,u=this.z,l=this.w,f=n*n+h*h+u*u+l*l;return f>0&&(f=1/Math.sqrt(f),this.x=n*f,this.y=h*f,this.z=u*f,this.w=l*f),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w},lerp:function(n,h){h===void 0&&(h=0);var u=this.x,l=this.y,f=this.z,c=this.w;return this.x=u+h*(n.x-u),this.y=l+h*(n.y-l),this.z=f+h*(n.z-f),this.w=c+h*(n.w-c),this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this.w*=n.w||1,this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this.w/=n.w||1,this},distance:function(n){var h=n.x-this.x,u=n.y-this.y,l=n.z-this.z||0,f=n.w-this.w||0;return Math.sqrt(h*h+u*u+l*l+f*f)},distanceSq:function(n){var h=n.x-this.x,u=n.y-this.y,l=n.z-this.z||0,f=n.w-this.w||0;return h*h+u*u+l*l+f*f},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(n){var h=this.x,u=this.y,l=this.z,f=this.w,c=n.val;return this.x=c[0]*h+c[4]*u+c[8]*l+c[12]*f,this.y=c[1]*h+c[5]*u+c[9]*l+c[13]*f,this.z=c[2]*h+c[6]*u+c[10]*l+c[14]*f,this.w=c[3]*h+c[7]*u+c[11]*l+c[15]*f,this},transformQuat:function(n){var h=this.x,u=this.y,l=this.z,f=n.x,c=n.y,d=n.z,v=n.w,p=v*h+c*l-d*u,g=v*u+d*h-f*l,m=v*l+f*u-c*h,x=-f*h-c*u-d*l;return this.x=p*v+x*-f+g*-d-m*-c,this.y=g*v+x*-c+m*-f-p*-d,this.z=m*v+x*-d+p*-c-g*-f,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});a.prototype.sub=a.prototype.subtract,a.prototype.mul=a.prototype.multiply,a.prototype.div=a.prototype.divide,a.prototype.dist=a.prototype.distance,a.prototype.distSq=a.prototype.distanceSq,a.prototype.len=a.prototype.length,a.prototype.lenSq=a.prototype.lengthSq,e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(91),n=new s({initialize:function(u,l,f,c,d,v,p){c===void 0&&(c=1),d===void 0&&(d=0),v===void 0&&(v=!0),p===void 0&&(p=!1),this.renderer=u,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=c,this.minFilter=d,this.autoClear=v,this.autoResize=!1,this.resize(l,f),p&&this.setAutoResize(!0)},setAutoResize:function(h){return h&&!this.autoResize?(this.renderer.on(a.RESIZE,this.resize,this),this.autoResize=!0):!h&&this.autoResize&&(this.renderer.off(a.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(h,u){var l=h*this.scale,f=u*this.scale;if(l!==this.width||f!==this.height){var c=this.renderer;c.deleteFramebuffer(this.framebuffer),c.deleteTexture(this.texture),h*=this.scale,u*=this.scale,h=Math.round(h),u=Math.round(u),h<=0&&(h=1),u<=0&&(u=1),this.texture=c.createTextureFromSource(null,h,u,this.minFilter),this.framebuffer=c.createFramebuffer(h,u,this.texture,!1),this.width=h,this.height=u}return this},bind:function(h,u,l){if(h===void 0&&(h=!1),h&&this.renderer.flush(),u&&l&&this.resize(u,l),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),h&&this.adjustViewport(),this.autoClear){var f=this.renderer.gl;f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT)}},adjustViewport:function(){var h=this.renderer.gl;h.viewport(0,0,this.width,this.height),h.disable(h.SCISSOR_TEST)},clear:function(){var h=this.renderer,u=h.gl;h.pushFramebuffer(this.framebuffer),u.disable(u.SCISSOR_TEST),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),h.popFramebuffer(),h.resetScissor()},unbind:function(h){h===void 0&&(h=!1);var u=this.renderer;return h&&u.flush(),u.popFramebuffer()},destroy:function(){var h=this.renderer;h.deleteFramebuffer(this.framebuffer),h.deleteTexture(this.texture),h.off(a.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n;if(a)typeof a=="string"?n=document.getElementById(a):typeof a=="object"&&a.nodeType===1&&(n=a);else if(s.parentElement||a===null)return s;return n||(n=document.body),n.appendChild(s),s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(77),n=i(9),h=i(70),u=i(22),l=i(1),f=i(207),c=i(428),d=new s({Extends:n,initialize:function(p){n.call(this),this.game=p,this.jsonCache=p.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,p.events.on(u.BLUR,this.onGameBlur,this),p.events.on(u.FOCUS,this.onGameFocus,this),p.events.on(u.PRE_STEP,this.update,this),p.events.once(u.DESTROY,this.destroy,this)},add:l,addAudioSprite:function(v,p){p===void 0&&(p={});var g=this.add(v,p);g.spritemap=this.jsonCache.get(v).spritemap;for(var m in g.spritemap)if(!!g.spritemap.hasOwnProperty(m)){var x=a(p),y=g.spritemap[m];x.loop=y.hasOwnProperty("loop")?y.loop:!1,g.addMarker({name:m,start:y.start,duration:y.end-y.start,config:x})}return g},get:function(v){return c(this.sounds,"key",v)},getAll:function(v){return f(this.sounds,"key",v)},play:function(v,p){var g=this.add(v);return g.once(h.COMPLETE,g.destroy,g),p?p.name?(g.addMarker(p),g.play(p.name)):g.play(p):g.play()},playAudioSprite:function(v,p,g){var m=this.addAudioSprite(v);return m.once(h.COMPLETE,m.destroy,m),m.play(p,g)},remove:function(v){var p=this.sounds.indexOf(v);return p!==-1?(v.destroy(),this.sounds.splice(p,1),!0):!1},removeAll:function(){this.sounds.forEach(function(v){v.destroy()}),this.sounds.length=0},removeByKey:function(v){for(var p=0,g=this.sounds.length-1;g>=0;g--){var m=this.sounds[g];m.key===v&&(m.destroy(),this.sounds.splice(g,1),p++)}return p},pauseAll:function(){this.forEachActiveSound(function(v){v.pause()}),this.emit(h.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(v){v.resume()}),this.emit(h.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(v){v.stop()}),this.emit(h.STOP_ALL,this)},stopByKey:function(v){var p=0;return this.getAll(v).forEach(function(g){g.stop()&&p++}),p},unlock:l,onBlur:l,onFocus:l,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(v,p){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(h.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(m){m.update(v,p)})},destroy:function(){this.game.events.off(u.BLUR,this.onGameBlur,this),this.game.events.off(u.FOCUS,this.onGameFocus,this),this.game.events.off(u.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(v,p){var g=this;this.sounds.forEach(function(m,x){m&&!m.pendingRemove&&v.call(p||g,m,x,g.sounds)})},setRate:function(v){return this.rate=v,this},rate:{get:function(){return this._rate},set:function(v){this._rate=v,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(h.GLOBAL_RATE,this,v)}},setDetune:function(v){return this.detune=v,this},detune:{get:function(){return this._detune},set:function(v){this._detune=v,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(h.GLOBAL_DETUNE,this,v)}}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(9),n=i(70),h=i(17),u=i(1),l=new s({Extends:a,initialize:function(c,d,v){a.call(this),this.manager=c,this.key=d,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=h(this.config,v),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(f){return!f||!f.name||typeof f.name!="string"?!1:this.markers[f.name]?(console.error("addMarker "+f.name+" already exists in Sound"),!1):(f=h(!0,{name:"",start:0,duration:this.totalDuration-(f.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},f),this.markers[f.name]=f,!0)},updateMarker:function(f){return!f||!f.name||typeof f.name!="string"?!1:this.markers[f.name]?(this.markers[f.name]=h(!0,this.markers[f.name],f),!0):(console.warn("Audio Marker: "+f.name+" missing in Sound: "+this.key),!1)},removeMarker:function(f){var c=this.markers[f];return c?(this.markers[f]=null,c):null},play:function(f,c){if(f===void 0&&(f=""),typeof f=="object"&&(c=f,f=""),typeof f!="string")return!1;if(!f)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[f])return console.warn("Marker: "+f+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[f],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=h(this.currentConfig,c),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:u,calculateRate:function(){var f=1.0005777895065548,c=this.currentConfig.detune+this.manager.detune,d=Math.pow(f,c);this.totalRate=this.currentConfig.rate*this.manager.rate*d},destroy:function(){this.pendingRemove||(this.emit(n.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(209),a=i(435),n=function(h,u){if(u===void 0&&(u=90),!s(h))return null;if(typeof u!="string"&&(u=(u%360+360)%360),u===90||u===-270||u==="rotateLeft")h=a(h),h.reverse();else if(u===-90||u===270||u==="rotateRight")h.reverse(),h=a(h);else if(Math.abs(u)===180||u==="rotate180"){for(var l=0;l<h.length;l++)h[l].reverse();h.reverse()}return h};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(18),n=i(11),h=i(15),u=i(1043),l=i(1044),f=i(212),c=i(10),d=i(1045),v=new s({Extends:h,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Texture,n.Tint,n.Transform,n.Visible,d],initialize:function(g,m,x,y,T,S,C){T===void 0&&(T=""),C===void 0&&(C=0),h.call(this,g,"BitmapText"),this.font=y;var E=this.scene.sys.cache.bitmapFont.get(y);E||console.warn("Invalid BitmapText key: "+y),this.fontData=E.data,this._text="",this._fontSize=S||this.fontData.size,this._letterSpacing=0,this._align=C,this._bounds=u(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(m,x),this.setOrigin(0,0),this.initPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=v.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=v.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=v.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=.5),this.dropShadowX=p,this.dropShadowY=g,this.dropShadowColor=m,this.dropShadowAlpha=x,this},setCharacterTint:function(p,g,m,x,y,T,S){p===void 0&&(p=0),g===void 0&&(g=1),m===void 0&&(m=!1),x===void 0&&(x=-1),y===void 0&&(y=x,T=x,S=x);var C=this.text.length;g===-1&&(g=C),p<0&&(p=C+p),p=a(p,0,C-1);for(var E=a(p+g,p,C),P=this.charColors,M=p;M<E;M++){var R=P[M];if(x===-1)P[M]=null;else{var A=m?1:0;R?(R.tintEffect=A,R.tintTL=x,R.tintTR=y,R.tintBL=T,R.tintBR=S):P[M]={tintEffect:A,tintTL:x,tintTR:y,tintBL:T,tintBR:S}}}return this},setWordTint:function(p,g,m,x,y,T,S){g===void 0&&(g=1);for(var C=this.getTextBounds(),E=C.words,P=typeof p=="number",M=0,R=0;R<E.length;R++){var A=E[R];if((P&&R===p||!P&&A.word===p)&&(this.setCharacterTint(A.i,A.word.length,m,x,y,T,S),M++,M===g))return this}return this},getTextBounds:function(p){var g=this._bounds;return(this._dirty||p||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(u(this,p,!0,g),this._dirty=!1),g},getCharacterAt:function(p,g,m){for(var x=this.getLocalPoint(p,g,null,m),y=this.getTextBounds(),T=y.characters,S=new c,C=0;C<T.length;C++){var E=T[C];if(S.setTo(E.x,E.t,E.r-E.x,E.b),S.contains(x.x,x.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,g,m){if(g===void 0&&(g=this._fontSize),m===void 0&&(m=this._align),p!==this.font){var x=this.scene.sys.cache.bitmapFont.get(p);x&&(this.font=p,this.fontData=x.data,this._fontSize=g,this._align=m,this.fromAtlas=x.fromAtlas===!0,this.setTexture(x.texture,x.frame),u(this,!1,!0,this._bounds))}return this},setMaxWidth:function(p,g){return this._maxWidth=p,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var p=n.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return p.data=g,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});v.ALIGN_LEFT=0,v.ALIGN_CENTER=1,v.ALIGN_RIGHT=2,v.ParseFromAtlas=l,v.ParseXMLBitmapFont=f,e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h){if(this.entries=[],Array.isArray(h))for(var u=0;u<h.length;u++)this.set(h[u])},set:function(n){return this.entries.indexOf(n)===-1&&this.entries.push(n),this},get:function(n,h){for(var u=0;u<this.entries.length;u++){var l=this.entries[u];if(l[n]===h)return l}},getArray:function(){return this.entries.slice(0)},delete:function(n){var h=this.entries.indexOf(n);return h>-1&&this.entries.splice(h,1),this},dump:function(){console.group("Set");for(var n=0;n<this.entries.length;n++){var h=this.entries[n];console.log(h)}console.groupEnd()},each:function(n,h){var u,l=this.entries.slice(),f=l.length;if(h)for(u=0;u<f&&n.call(h,l[u],u)!==!1;u++);else for(u=0;u<f&&n(l[u],u)!==!1;u++);return this},iterate:function(n,h){var u,l=this.entries.length;if(h)for(u=0;u<l&&n.call(h,this.entries[u],u)!==!1;u++);else for(u=0;u<l&&n(this.entries[u],u)!==!1;u++);return this},iterateLocal:function(n){var h,u=[];for(h=1;h<arguments.length;h++)u.push(arguments[h]);var l=this.entries.length;for(h=0;h<l;h++){var f=this.entries[h];f[n].apply(f,u)}return this},clear:function(){return this.entries.length=0,this},contains:function(n){return this.entries.indexOf(n)>-1},union:function(n){var h=new a;return n.entries.forEach(function(u){h.set(u)}),this.entries.forEach(function(u){h.set(u)}),h},intersect:function(n){var h=new a;return this.entries.forEach(function(u){n.contains(u)&&h.set(u)}),h},difference:function(n){var h=new a;return this.entries.forEach(function(u){n.contains(u)||h.set(u)}),h},size:{get:function(){return this.entries.length},set:function(n){return n<this.entries.length?this.entries.length=n:this.entries.length}}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(11),n=i(15),h=i(189),u=i(92),l=i(1182),f=new s({Extends:n,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.GetBounds,a.Mask,a.Pipeline,a.ScrollFactor,a.Transform,a.Visible,l],initialize:function(d,v,p,g,m,x,y){g===void 0&&(g=16777215),m===void 0&&(m=128),x===void 0&&(x=1),y===void 0&&(y=.1),n.call(this,d,"PointLight"),this.initPipeline(u.POINTLIGHT_PIPELINE),this.setPosition(v,p),this.color=h(g),this.intensity=x,this.attenuation=y,this.width=m*2,this.height=m*2,this._radius=m},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this.width=c*2,this.height=c*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=a.width/2,h=a.height/2,u=Math.abs(s.x-a.x-n),l=Math.abs(s.y-a.y-h),f=n+s.radius,c=h+s.radius;if(u>f||l>c)return!1;if(u<=n||l<=h)return!0;var d=u-n,v=l-h,p=d*d,g=v*v,m=s.radius*s.radius;return p+g<=m};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.width<=0||s.height<=0||a.width<=0||a.height<=0?!1:!(s.right<a.x||s.bottom<a.y||s.x>a.right||s.y>a.bottom)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),a={},n={};n.register=function(h,u,l,f,c){a[h]={plugin:u,mapping:l,settingsKey:f,configKey:c}},n.getPlugin=function(h){return a[h]},n.install=function(h){var u=h.scene.sys,l=u.settings.input,f=u.game.config;for(var c in a){var d=a[c].plugin,v=a[c].mapping,p=a[c].settingsKey,g=a[c].configKey;s(l,p,f[g])&&(h[v]=new d(h))}},n.remove=function(h){a.hasOwnProperty(h)&&delete a[h]},e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ANY_KEY_DOWN:i(1323),ANY_KEY_UP:i(1324),COMBO_MATCH:i(1325),DOWN:i(1326),KEY_DOWN:i(1327),KEY_UP:i(1328),UP:i(1329)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.url?s.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?s.url:a+s.url:!1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u,l){return s===void 0&&(s=""),a===void 0&&(a=!0),n===void 0&&(n=""),h===void 0&&(h=""),u===void 0&&(u=0),l===void 0&&(l=!1),{responseType:s,async:a,user:n,password:h,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:l}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(243),n=i(73),h=new s({Extends:n,Mixins:[a.Acceleration,a.Angular,a.Bounce,a.Debug,a.Drag,a.Enable,a.Friction,a.Gravity,a.Immovable,a.Mass,a.Pushable,a.Size,a.Velocity],initialize:function(l,f,c,d,v){n.call(this,l,f,c,d,v),this.body=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(119),a=function(n,h,u,l){if(u===void 0&&(u=!1),s(n,h,l)){var f=l.data[h][n]||null;return f?f.index===-1?u?f:null:f:null}else return null};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=s.data,l=s.width,f=s.height,c=s.tilemapLayer,d=Math.max(0,a.left),v=Math.min(l,a.right),p=Math.max(0,a.top),g=Math.min(f,a.bottom),m,x,y;if(n===0)for(x=p;x<g;x++)for(m=d;u[x]&&m<v;m++)y=u[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);else if(n===1)for(x=p;x<g;x++)for(m=v;u[x]&&m>=d;m--)y=u[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);else if(n===2)for(x=g;x>=p;x--)for(m=d;u[x]&&m<v;m++)y=u[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);else if(n===3)for(x=g;x>=p;x--)for(m=v;u[x]&&m>=d;m--)y=u[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);return c.tilesDrawn=h.length,c.tilesTotal=l*f,h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=n.collideIndexes.indexOf(s);a&&h===-1?n.collideIndexes.push(s):!a&&h!==-1&&n.collideIndexes.splice(h,1)};e.exports=i},function(e,r,i){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),a=function(n,h,u){if(!h)return{i:0,layers:n.layers,name:"",opacity:1,visible:!0,x:0,y:0};var l=h.x+s(h,"startx",0)*n.tilewidth+s(h,"offsetx",0),f=h.y+s(h,"starty",0)*n.tileheight+s(h,"offsety",0);return{i:0,layers:h.layers,name:u.name+h.name+"/",opacity:u.opacity*h.opacity,visible:u.visible&&h.visible,x:u.x+l,y:u.y+f}};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h;if(s.hasOwnProperty(a)){var u=typeof s[a];u==="function"?h=function(l,f,c,d,v,p){return s[a](l,f,c,d,v,p)}:h=function(){return s[a]}}else typeof n=="function"?h=n:h=function(){return n};return h};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(265),a=i(13),n=i(99),h=i(80),u=i(162),l=i(583),f=i(263),c=i(6),d=i(264),v=i(266),p=i(268),g=function(m,x,y){y===void 0&&(y=s);for(var T=y.targets?y.targets:f(x),S=l(x),C=u(x,"delay",y.delay),E=u(x,"duration",y.duration),P=c(x,"easeParams",y.easeParams),M=h(c(x,"ease",y.ease),P),R=u(x,"hold",y.hold),A=u(x,"repeat",y.repeat),O=u(x,"repeatDelay",y.repeatDelay),F=n(x,"yoyo",y.yoyo),b=n(x,"flipX",y.flipX),w=n(x,"flipY",y.flipY),N=[],V=0;V<S.length;V++)for(var W=S[V].key,U=S[V].value,D=0;D<T.length;D++){var L=d(W,U),I=p(T[D],D,W,L.getEnd,L.getStart,L.getActive,h(c(U,"ease",M),c(U,"easeParams",P)),u(U,"delay",C),u(U,"duration",E),n(U,"yoyo",F),u(U,"hold",R),u(U,"repeat",A),u(U,"repeatDelay",O),n(U,"flipX",b),n(U,"flipY",w));N.push(I)}var B=new v(m,N,T);B.offset=a(x,"offset",null),B.completeDelay=a(x,"completeDelay",0),B.loop=Math.round(a(x,"loop",0)),B.loopDelay=Math.round(a(x,"loopDelay",0)),B.paused=n(x,"paused",!1),B.useFrames=n(x,"useFrames",!1);for(var G=c(x,"callbackScope",B),z=[B,null],Y=v.TYPES,X=0;X<Y.length;X++){var H=Y[X],$=c(x,H,!1);if($){var k=c(x,H+"Scope",G),K=c(x,H+"Params",[]);B.setCallback(H,$,z.concat(K),k)}}return B};e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(102),n=i(2),h=i(132),u=i(185),l=new s({initialize:function(c){this.parent=c,this.animationManager=c.scene.sys.anims,this.animationManager.on(h.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(f){var c=this.parent;if(f===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,c;Array.isArray(f)||(f=[f]);for(var d=0;d<f.length;d++){var v=f[d];this.nextAnim===null?this.nextAnim=v:this.nextAnimsQueue.push(v)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(f){this.isPlaying&&this.stop();var c=this.animationManager,d=typeof f=="string"?f:n(f,"key",null),v=this.exists(d)?this.get(d):c.get(d);if(!v)console.warn("Missing animation: "+d);else{this.currentAnim=v;var p=v.getTotalFrames(),g=n(f,"frameRate",v.frameRate),m=n(f,"duration",v.duration);v.calculateDuration(this,p,m,g),this.delay=n(f,"delay",v.delay),this.repeat=n(f,"repeat",v.repeat),this.repeatDelay=n(f,"repeatDelay",v.repeatDelay),this.yoyo=n(f,"yoyo",v.yoyo),this.showOnStart=n(f,"showOnStart",v.showOnStart),this.hideOnComplete=n(f,"hideOnComplete",v.hideOnComplete),this.skipMissedFrames=n(f,"skipMissedFrames",v.skipMissedFrames),this.timeScale=n(f,"timeScale",this.timeScale);var x=n(f,"startFrame",0);x>v.getTotalFrames()&&(x=0);var y=v.frames[x];x===0&&!this.forward&&(y=v.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(f){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),f!==void 0&&this.setCurrentFrame(f),this.parent},resume:function(f){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),f!==void 0&&this.setCurrentFrame(f),this.parent},playAfterDelay:function(f,c){if(!this.isPlaying)this.delayCounter=c,this.play(f,!0);else{var d=this.nextAnim,v=this.nextAnimsQueue;d&&v.unshift(d),this.nextAnim=f,this._pendingStop=1,this._pendingStopValue=c}return this.parent},playAfterRepeat:function(f,c){if(c===void 0&&(c=1),!this.isPlaying)this.play(f);else{var d=this.nextAnim,v=this.nextAnimsQueue;d&&v.unshift(d),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this.nextAnim=f,this._pendingStop=2,this._pendingStopValue=c}return this.parent},play:function(f,c){c===void 0&&(c=!1);var d=this.currentAnim,v=this.parent,p=typeof f=="string"?f:f.key;if(c&&this.isPlaying&&d.key===p)return v;if(d&&this.isPlaying){var g=this.animationManager.getMix(d.key,f);if(g>0)return this.playAfterDelay(f,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(f)},playReverse:function(f,c){c===void 0&&(c=!1);var d=typeof f=="string"?f:f.key;return c&&this.isPlaying&&this.currentAnim.key===d?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(f))},startAnimation:function(f){this.load(f);var c=this.currentAnim,d=this.parent;return c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,c.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),d},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(h.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(h.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(h.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(h.ANIMATION_COMPLETE,h.ANIMATION_COMPLETE_KEY)},emitEvents:function(f,c){var d=this.currentAnim,v=this.currentFrame,p=this.parent,g=v.textureFrame;p.emit(f,d,v,p,g),c&&p.emit(c+d.key,d,v,p,g)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var f=this.currentFrame;if(!f)return 0;var c=f.progress;return this.inReverse&&(c*=-1),c},setProgress:function(f){return this.forward||(f=1-f),this.setCurrentFrame(this.currentAnim.getFrameByProgress(f)),this.parent},setRepeat:function(f){return this.repeatCounter=f===-1?Number.MAX_VALUE:f,this.parent},globalRemove:function(f,c){c===void 0&&(c=this.currentAnim),this.isPlaying&&c.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(f,c){f===void 0&&(f=!1),c===void 0&&(c=!1);var d=this.currentAnim,v=this.parent;return d?(c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),d.getFirstTick(this),this.emitEvents(h.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!f,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(d.frames[0]),this.parent):v},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var f=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(f)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var f=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(f)}return this.parent},stopAfterDelay:function(f){return this._pendingStop=1,this._pendingStopValue=f,this.parent},stopAfterRepeat:function(f){return f===void 0&&(f=1),this.repeatCounter!==-1&&f>this.repeatCounter&&(f=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=f,this.parent},stopOnFrame:function(f){return this._pendingStop=3,this._pendingStopValue=f,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(f,c){var d=this.currentAnim;if(!(!this.isPlaying||!d||d.paused)){if(this.accumulator+=c*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=c,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?d.nextFrame(this):d.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var v=0;do this.forward?d.nextFrame(this):d.previousFrame(this),v++;while(this.isPlaying&&this.accumulator>this.nextTick&&v<60)}}},setCurrentFrame:function(f){var c=this.parent;return this.currentFrame=f,c.texture=f.frame.texture,c.frame=f.frame,c.isCropped&&c.frame.updateCropUVs(c._crop,c.flipX,c.flipY),f.setAlpha&&(c.alpha=f.alpha),c.setSizeToFrame(),c._originComponent&&(f.frame.customPivot?c.setOrigin(f.frame.pivotX,f.frame.pivotY):c.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(h.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===f&&this.stop()),c},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(f){return this.anims?this.anims.get(f):null},exists:function(f){return this.anims?this.anims.has(f):!1},create:function(f){var c=f.key,d=!1;return c&&(d=this.get(c),d||(d=new u(this,c,f),this.anims||(this.anims=new a),this.anims.set(c,d))),d},generateFrameNames:function(f,c){return this.animationManager.generateFrameNames(f,c)},generateFrameNumbers:function(f,c){return this.animationManager.generateFrameNumbers(f,c)},remove:function(f){var c=this.get(f);return c&&(this.currentAnim===c&&this.stop(),this.anims.delete(f)),c},destroy:function(){this.animationManager.off(h.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});e.exports=l},function(e,r,i){var s={};e.exports=s;var a=i(166);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(n,h){for(var u=h*h*h,l=0;l<n.length;l++){var f=n[l],c=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){s.set(f,!1);continue}var d=Math.min(f.motion,c),v=Math.max(f.motion,c);f.motion=s._minBias*d+(1-s._minBias)*v,f.sleepThreshold>0&&f.motion<s._motionSleepThreshold*u?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&s.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},s.afterCollisions=function(n,h){for(var u=h*h*h,l=0;l<n.length;l++){var f=n[l];if(!!f.isActive){var c=f.collision,d=c.bodyA.parent,v=c.bodyB.parent;if(!(d.isSleeping&&v.isSleeping||d.isStatic||v.isStatic)&&(d.isSleeping||v.isSleeping)){var p=d.isSleeping&&!d.isStatic?d:v,g=p===d?v:d;!p.isStatic&&g.motion>s._motionWakeThreshold*u&&s.set(p,!1)}}}},s.set=function(n,h){var u=n.isSleeping;h?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,u||a.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,u&&a.trigger(n,"sleepEnd"))}})()},function(e,r,i){var s={};e.exports=s;var a=i(32);(function(){s.on=function(n,h,u){for(var l=h.split(" "),f,c=0;c<l.length;c++)f=l[c],n.events=n.events||{},n.events[f]=n.events[f]||[],n.events[f].push(u);return u},s.off=function(n,h,u){if(!h){n.events={};return}typeof h=="function"&&(u=h,h=a.keys(n.events).join(" "));for(var l=h.split(" "),f=0;f<l.length;f++){var c=n.events[l[f]],d=[];if(u&&c)for(var v=0;v<c.length;v++)c[v]!==u&&d.push(c[v]);n.events[l[f]]=d}},s.trigger=function(n,h,u){var l,f,c,d,v=n.events;if(v&&a.keys(v).length>0){u||(u={}),l=h.split(" ");for(var p=0;p<l.length;p++)if(f=l[p],c=v[f],c){d=a.clone(u,!1),d.name=f,d.source=n;for(var g=0;g<c.length;g++)c[g].apply(n,[d])}}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(175),a=i(92),n=i(74),h={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(u){u===void 0&&(u=a.MULTI_PIPELINE);var l=this.scene.sys.renderer;if(!l)return!1;var f=l.pipelines;if(this.postPipelines=[],this.pipelineData={},f){var c=f.get(u);if(c)return this.defaultPipeline=c,this.pipeline=c,!0}return!1},setPipeline:function(u,l,f){var c=this.scene.sys.renderer;if(!c)return this;var d=c.pipelines;if(d){var v=d.get(u);v&&(this.pipeline=v),l&&(this.pipelineData=f?s(l):l)}return this},setPostPipeline:function(u,l,f){var c=this.scene.sys.renderer;if(!c)return this;var d=c.pipelines;if(d){Array.isArray(u)||(u=[u]);for(var v=0;v<u.length;v++){var p=d.getPostPipeline(u[v],this);p&&this.postPipelines.push(p)}l&&(this.pipelineData=f?s(l):l)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(u,l){var f=this.pipelineData;return l===void 0?delete f[u]:f[u]=l,this},getPostPipeline:function(u){for(var l=this.postPipelines,f=[],c=0;c<l.length;c++){var d=l[c];(typeof u=="string"&&d.name===u||d instanceof u)&&f.push(d)}return f.length===1?f[0]:f},resetPipeline:function(u,l){return u===void 0&&(u=!1),l===void 0&&(l=!1),this.pipeline=this.defaultPipeline,u&&(this.postPipelines=[],this.hasPostPipeline=!1),l&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(u){u===void 0&&(u=!1);for(var l=this.postPipelines,f=0;f<l.length;f++)l[f].destroy();this.postPipelines=[],this.hasPostPipeline=!1,u&&(this.pipelineData={})},removePostPipeline:function(u){for(var l=this.postPipelines,f=l.length-1;f>=0;f--){var c=l[f];(typeof u=="string"&&c.name===u||typeof u!="string"&&c instanceof u)&&(c.destroy(),n(l,f))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={DEFAULT:0,LINEAR:0,NEAREST:1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h,u){return u===void 0&&(u=new s),u.x=n.x+n.radius*Math.cos(h),u.y=n.y+n.radius*Math.sin(h),u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h){h===void 0&&(h=new s);var u=2*Math.PI*Math.random(),l=Math.random()+Math.random(),f=l>1?2-l:l,c=f*Math.cos(u),d=f*Math.sin(u);return h.x=n.x+c*n.radius,h.y=n.y+d*n.radius,h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(130),a=i(4),n=function(h,u,l){if(l===void 0&&(l=new a),u<=0||u>=1)return l.x=h.x,l.y=h.y,l;var f=s(h)*u;return u>.5?(f-=h.width+h.height,f<=h.width?(l.x=h.right-f,l.y=h.bottom):(l.x=h.x,l.y=h.bottom-(f-h.width))):f<=h.width?(l.x=h.x+f,l.y=h.y):(l.x=h.right,l.y=h.y+(f-h.width)),l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),a=i(4),n=function(h,u,l,f){f===void 0&&(f=[]),!u&&l>0&&(u=s(h)/l);for(var c=h.x1,d=h.y1,v=h.x2,p=h.y2,g=0;g<u;g++){var m=g/u,x=c+(v-c)*m,y=d+(p-d)*m;f.push(new a(x,y))}return f};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h){h===void 0&&(h=new s);var u=Math.random();return h.x=n.x1+u*(n.x2-n.x1),h.y=n.y1+u*(n.y2-n.y1),h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h){return h===void 0&&(h=new s),h.x=n.x+Math.random()*n.width,h.y=n.y+Math.random()*n.height,h};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a,n,h;if(typeof s!="object"||s===null)return s;a=Array.isArray(s)?[]:{};for(h in s)n=s[h],a[h]=i(n);return a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a={name:s.name,type:s.type,x:s.x,y:s.y,depth:s.depth,scale:{x:s.scaleX,y:s.scaleY},origin:{x:s.originX,y:s.originY},flipX:s.flipX,flipY:s.flipY,rotation:s.rotation,alpha:s.alpha,visible:s.visible,blendMode:s.blendMode,textureKey:"",frameKey:"",data:{}};return s.texture&&(a.textureKey=s.texture.key,a.frameKey=s.frame.name),a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),a=function(n,h,u,l,f,c,d,v){v===void 0&&(v=new s);var p=Math.sin(f),g=Math.cos(f),m=g*c,x=p*c,y=-p*d,T=g*d,S=1/(m*T+y*-x);return v.x=T*S*n+-y*S*h+(l*y-u*T)*S,v.y=m*S*h+-x*S*n+(-l*m+u*x)*S,v};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a===void 0&&(a=1);for(var n=null,h=0;h<a;h++)n=s.shift(),s.push(n);return n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a===void 0&&(a=1);for(var n=null,h=0;h<a;h++)n=s.pop(),s.unshift(n);return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h){h===void 0&&(h=new s);var u=Math.random()*Math.PI*2,l=Math.sqrt(Math.random());return h.x=n.x+l*Math.cos(u)*n.width/2,h.y=n.y+l*Math.sin(u)*n.height/2,h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h){h===void 0&&(h=new s);var u=n.x2-n.x1,l=n.y2-n.y1,f=n.x3-n.x1,c=n.y3-n.y1,d=Math.random(),v=Math.random();return d+v>=1&&(d=1-d,v=1-v),h.x=n.x1+(u*d+f*v),h.y=n.y1+(l*d+c*v),h};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u){var l=h+Math.atan2(s.y-n,s.x-a);return s.x=a+u*Math.cos(l),s.y=n+u*Math.sin(l),s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s=Math.max(0,Math.min(1,(s-a)/(n-a))),s*s*s*(s*(s*6-15)+10)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s<=a?0:s>=n?1:(s=(s-a)/(n-a),s*s*(3-2*s))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=i(0),n=i(132),h=i(318),u=i(319),l=i(6),f=i(320),c=new a({initialize:function(v,p,g){this.manager=v,this.key=p,this.type="frame",this.frames=this.getFrames(v.textureManager,l(g,"frames",[]),l(g,"defaultTextureKey",null),l(g,"sortFrames",!0)),this.frameRate=l(g,"frameRate",null),this.duration=l(g,"duration",null),this.msPerFrame,this.skipMissedFrames=l(g,"skipMissedFrames",!0),this.delay=l(g,"delay",0),this.repeat=l(g,"repeat",0),this.repeatDelay=l(g,"repeatDelay",0),this.yoyo=l(g,"yoyo",!1),this.showOnStart=l(g,"showOnStart",!1),this.hideOnComplete=l(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(n.PAUSE_ALL,this.pause,this),this.manager.on(n.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(d,v,p,g){p===null&&g===null?(d.frameRate=24,d.duration=24/v*1e3):p&&g===null?(d.duration=p,d.frameRate=v/(p/1e3)):(d.frameRate=g,d.duration=v/g*1e3),d.msPerFrame=1e3/d.frameRate},addFrame:function(d){return this.addFrameAt(this.frames.length,d)},addFrameAt:function(d,v){var p=this.getFrames(this.manager.textureManager,v);if(p.length>0){if(d===0)this.frames=p.concat(this.frames);else if(d===this.frames.length)this.frames=this.frames.concat(p);else{var g=this.frames.slice(0,d),m=this.frames.slice(d);this.frames=g.concat(p,m)}this.updateFrameSequence()}return this},checkFrame:function(d){return d>=0&&d<this.frames.length},getFirstTick:function(d){d.accumulator=0,d.nextTick=d.msPerFrame+d.currentFrame.duration},getFrameAt:function(d){return this.frames[d]},getFrames:function(d,v,p,g){g===void 0&&(g=!0);var m=[],x,y,T=1,S,C;if(typeof v=="string"){C=v;var E=d.get(C),P=E.getFrameNames();g&&f(P),v=[],P.forEach(function(b){v.push({key:C,frame:b})})}if(!Array.isArray(v)||v.length===0)return m;for(S=0;S<v.length;S++){var M=v[S],R=l(M,"key",p);if(!!R){var A=l(M,"frame",0),O=d.getFrame(R,A);y=new u(R,A,T,O),y.duration=l(M,"duration",0),y.isFirst=!x,x&&(x.nextFrame=y,y.prevFrame=x),m.push(y),x=y,T++}}if(m.length>0){y.isLast=!0,y.nextFrame=m[0],m[0].prevFrame=y;var F=1/(m.length-1);for(S=0;S<m.length;S++)m[S].progress=S*F}return m},getNextTick:function(d){d.accumulator-=d.nextTick,d.nextTick=d.msPerFrame+d.currentFrame.duration},getFrameByProgress:function(d){return d=s(d,0,1),h(d,this.frames,"progress")},nextFrame:function(d){var v=d.currentFrame;v.isLast?d.yoyo?this.handleYoyoFrame(d,!1):d.repeatCounter>0?d.inReverse&&d.forward?d.forward=!1:this.repeatAnimation(d):d.complete():this.updateAndGetNextTick(d,v.nextFrame)},handleYoyoFrame:function(d,v){if(v||(v=!1),d.inReverse===!v&&d.repeatCounter>0){(d.repeatDelay===0||d.pendingRepeat)&&(d.forward=v),this.repeatAnimation(d);return}if(d.inReverse!==v&&d.repeatCounter===0){d.complete();return}d.forward=v;var p=v?d.currentFrame.nextFrame:d.currentFrame.prevFrame;this.updateAndGetNextTick(d,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(d){var v=d.currentFrame;v.isFirst?d.yoyo?this.handleYoyoFrame(d,!0):d.repeatCounter>0?d.inReverse&&!d.forward?this.repeatAnimation(d):(d.forward=!0,this.repeatAnimation(d)):d.complete():this.updateAndGetNextTick(d,v.prevFrame)},updateAndGetNextTick:function(d,v){d.setCurrentFrame(v),this.getNextTick(d)},removeFrame:function(d){var v=this.frames.indexOf(d);return v!==-1&&this.removeFrameAt(v),this},removeFrameAt:function(d){return this.frames.splice(d,1),this.updateFrameSequence(),this},repeatAnimation:function(d){if(d._pendingStop===2){if(d._pendingStopValue===0)return d.stop();d._pendingStopValue--}d.repeatDelay>0&&!d.pendingRepeat?(d.pendingRepeat=!0,d.accumulator-=d.nextTick,d.nextTick+=d.repeatDelay):(d.repeatCounter--,d.forward?d.setCurrentFrame(d.currentFrame.nextFrame):d.setCurrentFrame(d.currentFrame.prevFrame),d.isPlaying&&(this.getNextTick(d),d.handleRepeat()))},toJSON:function(){var d={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(v){d.frames.push(v.toJSON())}),d},updateFrameSequence:function(){for(var d=this.frames.length,v=1/(d-1),p,g=0;g<d;g++)p=this.frames[g],p.index=g+1,p.isFirst=!1,p.isLast=!1,p.progress=g*v,g===0?(p.isFirst=!0,d===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[d-1],p.nextFrame=this.frames[g+1])):g===d-1&&d>1?(p.isLast=!0,p.prevFrame=this.frames[d-2],p.nextFrame=this.frames[0]):d>1&&(p.prevFrame=this.frames[g-1],p.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(n.PAUSE_ALL,this.pause,this),this.manager.off(n.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var d=0;d<this.frames.length;d++)this.frames[d].destroy();this.frames=[],this.manager=null}});e.exports=c},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){a===void 0&&(a=0),n===void 0&&(n=" "),h===void 0&&(h=3),s=s.toString();var u=0;if(a+1>=s.length)switch(h){case 1:s=new Array(a+1-s.length).join(n)+s;break;case 3:var l=Math.ceil((u=a-s.length)/2),f=u-l;s=new Array(f+1).join(n)+s+new Array(l+1).join(n);break;default:s=s+new Array(a+1-s.length).join(n);break}return s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(327),a=i(189),n=i(331),h=i(332),u=function(l){var f=typeof l;switch(f){case"string":return l.substr(0,3).toLowerCase()==="rgb"?h(l):s(l);case"number":return a(l);case"object":return n(l)}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(103);function a(h,u,l,f){var c=(h+u*6)%6,d=Math.min(c,4-c,1);return Math.round(255*(f-f*l*Math.max(0,d)))}var n=function(h,u,l,f){u===void 0&&(u=1),l===void 0&&(l=1);var c=a(5,h,u,l),d=a(3,h,u,l),v=a(1,h,u,l);return f?f.setTo?f.setTo(c,d,v,f.alpha,!1):(f.r=c,f.g=d,f.b=v,f.color=s(c,d,v),f):{r:c,g:d,b:v,color:s(c,d,v)}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38),a=i(330),n=function(h){var u=a(h);return new s(u.r,u.g,u.b,u.a)};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s.x=a-s.width/2,s.y=n-s.height/2,s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(105),a=i(136),n=i(31),h={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function u(){var f=new ArrayBuffer(4),c=new Uint8Array(f),d=new Uint32Array(f);return c[0]=161,c[1]=178,c[2]=195,c[3]=212,d[0]===3569595041?!0:d[0]===2712847316?!1:null}function l(){if(typeof importScripts=="function")return h;h.canvas=!!window.CanvasRenderingContext2D;try{h.localStorage=!!localStorage.getItem}catch{h.localStorage=!1}h.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,h.fileSystem=!!window.requestFileSystem;var f=!1,c=function(){if(window.WebGLRenderingContext)try{var d=n.createWebGL(this),v=d.getContext("webgl")||d.getContext("experimental-webgl"),p=n.create2D(this),g=p.getContext("2d"),m=g.createImageData(1,1);return f=m.data instanceof Uint8ClampedArray,n.remove(d),n.remove(p),!!v}catch{return!1}return!1};return h.webGL=c(),h.worker=!!window.Worker,h.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,h.getUserMedia=h.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,a.firefox&&a.firefoxVersion<21&&(h.getUserMedia=!1),!s.iOS&&(a.ie||a.firefox||a.chrome)&&(h.canvasBitBltShift=!0),(a.safari||a.mobileSafari)&&(h.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(h.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(h.littleEndian=u()),h.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&h.littleEndian!==null&&f,h}e.exports=l()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i="",s=function(){var a=function(l){for(var f=["i","webkitI","msI","mozI","oI"],c=0;c<f.length;c++){var d=f[c]+"mageSmoothingEnabled";if(d in l)return d}return null},n=function(l){return i===""&&(i=a(l)),i&&(l[i]=!0),l},h=function(l){return i===""&&(i=a(l)),i&&(l[i]=!1),l},u=function(l){return i!==null?l[i]:null};return{disable:h,enable:n,getPrefix:a,isEnabled:u}};e.exports=s()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),a=i(17),n={Angle:i(812),Distance:i(821),Easing:i(826),Fuzzy:i(827),Interpolation:i(830),Pow2:i(835),Snap:i(837),RandomDataGenerator:i(839),Average:i(840),Bernstein:i(356),Between:i(195),CatmullRom:i(194),CeilTo:i(841),Clamp:i(18),DegToRad:i(36),Difference:i(842),Euler:i(843),Factorial:i(357),FloatBetween:i(137),FloorTo:i(844),FromPercent:i(98),GetSpeed:i(845),IsEven:i(846),IsEvenStrict:i(847),Linear:i(135),MaxAdd:i(848),Median:i(849),MinSub:i(850),Percent:i(851),RadToDeg:i(196),RandomXY:i(852),RandomXYZ:i(853),RandomXYZW:i(854),Rotate:i(362),RotateAround:i(308),RotateAroundDistance:i(182),RotateTo:i(855),RoundAwayFromZero:i(363),RoundTo:i(856),SinCosTableGenerator:i(857),SmootherStep:i(183),SmoothStep:i(184),ToXY:i(858),TransformXY:i(177),Within:i(859),Wrap:i(68),Vector2:i(3),Vector3:i(39),Vector4:i(140),Matrix3:i(364),Matrix4:i(69),Quaternion:i(365),RotateVec3:i(860)};n=a(!1,n,s),e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u){var l=(h-a)*.5,f=(u-n)*.5,c=s*s,d=s*c;return(2*n-2*h+l+f)*d+(-3*n+3*h-2*l-f)*c+l*s+n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return Math.floor(Math.random()*(a-s+1)+s)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),a=function(n){return n*s.RAD_TO_DEG};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(n){return this._matrix=n,this._dirty=!0,this},reset:function(){var n=this._matrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=1,n[7]=0,n[8]=0,n[9]=0,n[10]=0,n[11]=0,n[12]=1,n[13]=0,n[14]=0,n[15]=0,n[16]=0,n[17]=0,n[18]=1,n[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var n=new Float32Array(this._matrix);n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,this._data=n,this._dirty=!1}return this._data},brightness:function(n,h){n===void 0&&(n=0),h===void 0&&(h=!1);var u=n;return this.multiply([u,0,0,0,0,0,u,0,0,0,0,0,u,0,0,0,0,0,1,0],h)},saturate:function(n,h){n===void 0&&(n=0),h===void 0&&(h=!1);var u=n*2/3+1,l=(u-1)*-.5;return this.multiply([u,l,l,0,0,l,u,l,0,0,l,l,u,0,0,0,0,0,1,0],h)},desaturate:function(n){return n===void 0&&(n=!1),this.saturate(-1,n)},hue:function(n,h){n===void 0&&(n=0),h===void 0&&(h=!1),n=n/180*Math.PI;var u=Math.cos(n),l=Math.sin(n),f=.213,c=.715,d=.072;return this.multiply([f+u*(1-f)+l*-f,c+u*-c+l*-c,d+u*-d+l*(1-d),0,0,f+u*-f+l*.143,c+u*(1-c)+l*.14,d+u*-d+l*-.283,0,0,f+u*-f+l*-(1-f),c+u*-c+l*c,d+u*(1-d)+l*d,0,0,0,0,0,1,0],h)},grayscale:function(n,h){return n===void 0&&(n=1),h===void 0&&(h=!1),this.saturate(-n,h)},blackWhite:function(n){return n===void 0&&(n=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],n)},contrast:function(n,h){n===void 0&&(n=0),h===void 0&&(h=!1);var u=n+1,l=-.5*(u-1);return this.multiply([u,0,0,0,l,0,u,0,0,l,0,0,u,0,l,0,0,0,1,0],h)},negative:function(n){return n===void 0&&(n=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],n)},desaturateLuminance:function(n){return n===void 0&&(n=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],n)},sepia:function(n){return n===void 0&&(n=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],n)},night:function(n,h){return n===void 0&&(n=.1),h===void 0&&(h=!1),this.multiply([n*-2,-n,0,0,0,-n,0,n,0,0,0,n,n*2,0,0,0,0,0,1,0],h)},lsd:function(n){return n===void 0&&(n=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],n)},brown:function(n){return n===void 0&&(n=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],n)},vintagePinhole:function(n){return n===void 0&&(n=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],n)},kodachrome:function(n){return n===void 0&&(n=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],n)},technicolor:function(n){return n===void 0&&(n=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],n)},polaroid:function(n){return n===void 0&&(n=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],n)},shiftToBGR:function(n){return n===void 0&&(n=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],n)},multiply:function(n,h){h||this.reset();for(var u=this._matrix,l=[],f=0;f<20;f++)l[f]=u[f];return u[0]=l[0]*n[0]+l[1]*n[5]+l[2]*n[10]+l[3]*n[15],u[1]=l[0]*n[1]+l[1]*n[6]+l[2]*n[11]+l[3]*n[16],u[2]=l[0]*n[2]+l[1]*n[7]+l[2]*n[12]+l[3]*n[17],u[3]=l[0]*n[3]+l[1]*n[8]+l[2]*n[13]+l[3]*n[18],u[4]=l[0]*n[4]+l[1]*n[9]+l[2]*n[14]+l[3]*n[19]+l[4],u[5]=l[5]*n[0]+l[6]*n[5]+l[7]*n[10]+l[8]*n[15],u[6]=l[5]*n[1]+l[6]*n[6]+l[7]*n[11]+l[8]*n[16],u[7]=l[5]*n[2]+l[6]*n[7]+l[7]*n[12]+l[8]*n[17],u[8]=l[5]*n[3]+l[6]*n[8]+l[7]*n[13]+l[8]*n[18],u[9]=l[5]*n[4]+l[6]*n[9]+l[7]*n[14]+l[8]*n[19]+l[9],u[10]=l[10]*n[0]+l[11]*n[5]+l[12]*n[10]+l[13]*n[15],u[11]=l[10]*n[1]+l[11]*n[6]+l[12]*n[11]+l[13]*n[16],u[12]=l[10]*n[2]+l[11]*n[7]+l[12]*n[12]+l[13]*n[17],u[13]=l[10]*n[3]+l[11]*n[8]+l[12]*n[13]+l[13]*n[18],u[14]=l[10]*n[4]+l[11]*n[9]+l[12]*n[14]+l[13]*n[19]+l[14],u[15]=l[15]*n[0]+l[16]*n[5]+l[17]*n[10]+l[18]*n[15],u[16]=l[15]*n[1]+l[16]*n[6]+l[17]*n[11]+l[18]*n[16],u[17]=l[15]*n[2]+l[16]*n[7]+l[17]*n[12]+l[18]*n[17],u[18]=l[15]*n[3]+l[16]*n[8]+l[17]*n[13]+l[18]*n[18],u[19]=l[15]*n[4]+l[16]*n[9]+l[17]*n[14]+l[18]*n[19]+l[19],this._dirty=!0,this}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=i(14),n=function(h,u){if(u===void 0&&(u=new s),h.length===0)return u;for(var l=Number.MAX_VALUE,f=Number.MAX_VALUE,c=a.MIN_SAFE_INTEGER,d=a.MIN_SAFE_INTEGER,v,p,g,m=0;m<h.length;m++)v=h[m],Array.isArray(v)?(p=v[0],g=v[1]):(p=v.x,g=v.y),l=Math.min(l,p),f=Math.min(f,g),c=Math.max(c,p),d=Math.max(d,g);return u.x=l,u.y=f,u.width=c-l,u.height=d-f,u};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(1),n=new s({initialize:function(u,l,f){this._rgb=[0,0,0],this.onChangeCallback=a,this.dirty=!1,this.set(u,l,f)},set:function(h,u,l){return h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=0),this._rgb=[h,u,l],this.onChange(),this},equals:function(h,u,l){var f=this._rgb;return f.r===h&&f.g===u&&f.b===l},onChange:function(){this.dirty=!0;var h=this._rgb;this.onChangeCallback.call(this,h[0],h[1],h[2])},r:{get:function(){return this._rgb[0]},set:function(h){this._rgb[0]=h,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(h){this._rgb[1]=h,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(h){this._rgb[2]=h,this.onChange()}},destroy:function(){this.onChangeCallback=null}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={CENTER:i(403),ORIENTATION:i(404),SCALE_MODE:i(405),ZOOM:i(406)};e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){s.parentNode&&s.parentNode.removeChild(s)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(144),n=i(197),h=i(20),u=i(419),l=i(420),f=i(33),c=i(1),d=i(421),v=new s({initialize:function(g,m){this.scene=g,this.game,this.renderer,this.config=m,this.settings=d.create(m),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=c},init:function(p){this.settings.status=a.INIT,this.sceneUpdate=c,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var g=p.plugins;this.plugins=g,g.addToScene(this,n.Global,[n.CoreScene,l(this),u(this)]),this.events.emit(h.BOOT,this),this.settings.isBooted=!0},step:function(p,g){var m=this.events;m.emit(h.PRE_UPDATE,p,g),m.emit(h.UPDATE,p,g),this.sceneUpdate.call(this.scene,p,g),m.emit(h.POST_UPDATE,p,g)},render:function(p){var g=this.displayList;g.depthSort(),this.events.emit(h.PRE_RENDER,p),this.cameras.render(p,g),this.events.emit(h.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var g=this.events,m=this.settings;return this.settings.active&&(m.status=a.PAUSED,m.active=!1,g.emit(h.PAUSE,this,p)),this},resume:function(p){var g=this.events,m=this.settings;return this.settings.active||(m.status=a.RUNNING,m.active=!0,g.emit(h.RESUME,this,p)),this},sleep:function(p){var g=this.events,m=this.settings;return m.status=a.SLEEPING,m.active=!1,m.visible=!1,g.emit(h.SLEEP,this,p),this},wake:function(p){var g=this.events,m=this.settings;return m.status=a.RUNNING,m.active=!0,m.visible=!0,g.emit(h.WAKE,this,p),m.isTransition&&g.emit(h.TRANSITION_WAKE,m.transitionFrom,m.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===a.SLEEPING},isActive:function(){return this.settings.status===a.RUNNING},isPaused:function(){return this.settings.status===a.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,g){return p?this.resume(g):this.pause(g)},start:function(p){var g=this.events,m=this.settings;p&&(m.data=p),m.status=a.START,m.active=!0,m.visible=!0,g.emit(h.START,this),g.emit(h.READY,this,p)},shutdown:function(p){var g=this.events,m=this.settings;g.off(h.TRANSITION_INIT),g.off(h.TRANSITION_START),g.off(h.TRANSITION_COMPLETE),g.off(h.TRANSITION_OUT),m.status=a.SHUTDOWN,m.active=!1,m.visible=!1,this.renderer===f.WEBGL&&this.renderer.resetTextures(!0),g.emit(h.SHUTDOWN,this,p)},destroy:function(){var p=this.events,g=this.settings;g.status=a.DESTROYED,g.active=!1,g.visible=!1,p.emit(h.DESTROY,this),p.removeAllListeners();for(var m=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<m.length;x++)this[m[x]]=null}});e.exports=v},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s&&s[0].toUpperCase()+s.slice(1)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(33),a=i(0),n=i(109),h=i(424),u="Texture.frame missing: ",l=new a({initialize:function(c,d,v,p,g){Array.isArray(v)||(v=[v]),this.manager=c,this.key=d,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var m=0;m<v.length;m++)this.source.push(new h(this,v[m],p,g))},add:function(f,c,d,v,p,g){if(this.has(f))return null;var m=new n(this,f,c,d,v,p,g);return this.frames[f]=m,this.firstFrame==="__BASE"&&(this.firstFrame=f),this.frameTotal++,m},remove:function(f){if(this.has(f)){var c=this.get(f);return c.destroy(),delete this.frames[f],!0}return!1},has:function(f){return this.frames[f]},get:function(f){f||(f=this.firstFrame);var c=this.frames[f];return c||(console.warn(u+f),c=this.frames[this.firstFrame]),c},getTextureSourceIndex:function(f){for(var c=0;c<this.source.length;c++)if(this.source[c]===f)return c;return-1},getFramesFromTextureSource:function(f,c){c===void 0&&(c=!1);var d=[];for(var v in this.frames)if(!(v==="__BASE"&&!c)){var p=this.frames[v];p.sourceIndex===f&&d.push(p)}return d},getFrameNames:function(f){f===void 0&&(f=!1);var c=Object.keys(this.frames);if(!f){var d=c.indexOf("__BASE");d!==-1&&c.splice(d,1)}return c},getSourceImage:function(f){(f==null||this.frameTotal===1)&&(f="__BASE");var c=this.frames[f];return c?c.source.image:(console.warn(u+f),this.frames.__BASE.source.image)},getDataSourceImage:function(f){(f==null||this.frameTotal===1)&&(f="__BASE");var c=this.frames[f],d;return c?d=c.sourceIndex:(console.warn(u+f),d=this.frames.__BASE.sourceIndex),this.dataSource[d].image},setDataSource:function(f){Array.isArray(f)||(f=[f]);for(var c=0;c<f.length;c++){var d=this.source[c];this.dataSource.push(new h(this,f[c],d.width,d.height))}},setFilter:function(f){var c;for(c=0;c<this.source.length;c++)this.source[c].setFilter(f);for(c=0;c<this.dataSource.length;c++)this.dataSource[c].setFilter(f)},destroy:function(){var f;for(f=0;f<this.source.length;f++)this.source[f].destroy();for(f=0;f<this.dataSource.length;f++)this.dataSource[f].destroy();for(var c in this.frames){var d=this.frames[c];d.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var v=this.manager.game.renderer;v&&v.type===s.WEBGL&&v.resetTextures(!0),this.manager=null}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),a=function(n,h,u,l,f){l===void 0&&(l=0),f===void 0&&(f=n.length);var c=[];if(s(n,l,f))for(var d=l;d<f;d++){var v=n[d];(!h||h&&u===void 0&&v.hasOwnProperty(h)||h&&u!==void 0&&v[h]===u)&&c.push(v)}return c};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Matrix:i(1013),Add:i(1021),AddAt:i(1022),BringToTop:i(1023),CountAllMatching:i(1024),Each:i(1025),EachInRange:i(1026),FindClosestInSorted:i(318),GetAll:i(207),GetFirst:i(428),GetRandom:i(210),MoveDown:i(1027),MoveTo:i(1028),MoveUp:i(1029),MoveAbove:i(1030),MoveBelow:i(1031),NumberArray:i(322),NumberArrayStep:i(1032),QuickSelect:i(436),Range:i(437),Remove:i(93),RemoveAt:i(1033),RemoveBetween:i(1034),RemoveRandomElement:i(1035),Replace:i(1036),RotateLeft:i(178),RotateRight:i(179),SafeRange:i(78),SendToBack:i(1037),SetAll:i(1038),Shuffle:i(131),SortByDigits:i(320),SpliceOne:i(74),StableSort:i(79),Swap:i(1039)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){if(!Array.isArray(s)||s.length<2||!Array.isArray(s[0]))return!1;for(var a=s[0].length,n=1;n<s.length;n++)if(s[n].length!==a)return!1;return!0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){a===void 0&&(a=0),n===void 0&&(n=s.length);var h=a+Math.floor(Math.random()*n);return s[h]===void 0?null:s[h]};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(9),n=i(438),h=new s({Extends:a,initialize:function(){a.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(u){return this._pending.push(u),this._toProcess++,u},remove:function(u){return this._destroy.push(u),this._toProcess++,u},removeAll:function(){for(var u=this._active,l=this._destroy,f=u.length;f--;)l.push(u[f]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var u=this._destroy,l=this._active,f,c;for(f=0;f<u.length;f++){c=u[f];var d=l.indexOf(c);d!==-1&&(l.splice(d,1),this.emit(n.PROCESS_QUEUE_REMOVE,c))}for(u.length=0,u=this._pending,f=0;f<u.length;f++)c=u[f],(!this.checkQueue||this.checkQueue&&l.indexOf(c)===-1)&&(l.push(c),this.emit(n.PROCESS_QUEUE_ADD,c));return u.length=0,this._toProcess=0,l},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(a,n){return parseInt(a.getAttribute(n),10)}var s=function(a,n,h,u,l){h===void 0&&(h=0),u===void 0&&(u=0);var f=n.cutX,c=n.cutY,d=n.source.width,v=n.source.height,p=n.sourceIndex,g={},m=a.getElementsByTagName("info")[0],x=a.getElementsByTagName("common")[0];g.font=m.getAttribute("face"),g.size=i(m,"size"),g.lineHeight=i(x,"lineHeight")+u,g.chars={};var y=a.getElementsByTagName("char"),T=n!==void 0&&n.trimmed;if(T)var S=n.height,C=n.width;for(var E=0;E<y.length;E++){var P=y[E],M=i(P,"id"),R=String.fromCharCode(M),A=i(P,"x"),O=i(P,"y"),F=i(P,"width"),b=i(P,"height");T&&(A<C&&(C=A),O<S&&(S=O)),T&&S!==0&&C!==0&&(A-=n.x,O-=n.y);var w=(f+A)/d,N=(c+O)/v,V=(f+A+F)/d,W=(c+O+b)/v;if(g.chars[M]={x:A,y:O,width:F,height:b,centerX:Math.floor(F/2),centerY:Math.floor(b/2),xOffset:i(P,"xoffset"),yOffset:i(P,"yoffset"),xAdvance:i(P,"xadvance")+h,data:{},kerning:{},u0:w,v0:N,u1:V,v1:W},l&&F!==0&&b!==0){var U=l.add(R,p,A,O,F,b);U&&U.setUVs(F,b,w,N,V,W)}}var D=a.getElementsByTagName("kerning");for(E=0;E<D.length;E++){var L=D[E],I=i(L,"first"),B=i(L,"second"),G=i(L,"amount");g.chars[B].kerning[I]=G}return g};e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1049),a=i(440),n=i(0),h=i(11),u=i(109),l=i(15),f=i(110),c=new n({Extends:l,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.ScrollFactor,h.Size,h.Texture,h.Transform,h.Visible,s],initialize:function(v,p,g,m,x){l.call(this,v,"Blitter"),this.setTexture(m,x),this.setPosition(p,g),this.initPipeline(),this.children=new f,this.renderList=[],this.dirty=!1},create:function(d,v,p,g,m){g===void 0&&(g=!0),m===void 0&&(m=this.children.length),p===void 0?p=this.frame:p instanceof u||(p=this.texture.get(p));var x=new a(this,d,v,p,g);return this.children.addAt(x,m,!1),this.dirty=!0,x},createFromCallback:function(d,v,p,g){for(var m=this.createMultiple(v,p,g),x=0;x<m.length;x++){var y=m[x];d.call(this,y,x)}return m},createMultiple:function(d,v,p){v===void 0&&(v=this.frame.name),p===void 0&&(p=!0),Array.isArray(v)||(v=[v]);var g=[],m=this;return v.forEach(function(x){for(var y=0;y<d;y++)g.push(m.create(0,0,x,p))}),g},childCanRender:function(d){return d.visible&&d.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(208),a=i(35),n=i(0),h=i(11),u=i(75),l=i(15),f=i(10),c=i(1052),d=i(441),v=i(3),p=new n({Extends:l,Mixins:[h.AlphaSingle,h.BlendMode,h.ComputedSize,h.Depth,h.Mask,h.Pipeline,h.Transform,h.Visible,c],initialize:function(m,x,y,T){l.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new h.TransformMatrix,this.tempTransformMatrix=new h.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(x,y),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new f),g.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),x=m.transformPoint(this.x,this.y);g.setTo(x.x,x.y,0,0)}if(this.list.length>0){var y=this.list,T=new f,S=!1;g.setEmpty();for(var C=0;C<y.length;C++){var E=y[C];E.getBounds&&(E.getBounds(T),S?d(T,g,g):(g.setTo(T.x,T.y,T.width,T.height),S=!0))}}return g},addHandler:function(g){g.once(u.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.removeFromDisplayList(),g.parentContainer=this)},removeHandler:function(g){g.off(u.DESTROY,this.remove),this.exclusive&&(g.parentContainer=null,g.addToDisplayList())},pointToContainer:function(g,m){m===void 0&&(m=new v),this.parentContainer?this.parentContainer.pointToContainer(g,m):m=new v(g.x,g.y);var x=this.tempTransformMatrix;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(g.x,g.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return s.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,m){return s.AddAt(this.list,g,m,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,m){return g?(m===void 0&&(m=function(x,y){return x[g]-y[g]}),s.StableSort(this.list,m),this):this},getByName:function(g){return s.GetFirst(this.list,"name",g)},getRandom:function(g,m){return s.GetRandom(this.list,g,m)},getFirst:function(g,m,x,y){return s.GetFirst(this.list,g,m,x,y)},getAll:function(g,m,x,y){return s.GetAll(this.list,g,m,x,y)},count:function(g,m,x,y){return s.CountAllMatching(this.list,g,m,x,y)},swap:function(g,m){return s.Swap(this.list,g,m),this},moveTo:function(g,m){return s.MoveTo(this.list,g,m),this},moveAbove:function(g,m){return s.MoveAbove(this.list,g,m),this},moveBelow:function(g,m){return s.MoveBelow(this.list,g,m),this},remove:function(g,m){var x=s.Remove(this.list,g,this.removeHandler,this);if(m&&x){Array.isArray(x)||(x=[x]);for(var y=0;y<x.length;y++)x[y].destroy()}return this},removeAt:function(g,m){var x=s.RemoveAt(this.list,g,this.removeHandler,this);return m&&x&&x.destroy(),this},removeBetween:function(g,m,x){var y=s.RemoveBetween(this.list,g,m,this.removeHandler,this);if(x)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(g){var m=s.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(g)for(var x=0;x<m.length;x++)m[x].destroy();return this},bringToTop:function(g){return s.BringToTop(this.list,g),this},sendToBack:function(g){return s.SendToBack(this.list,g),this},moveUp:function(g){return s.MoveUp(this.list,g),this},moveDown:function(g){return s.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(g,m,x){var y=s.Replace(this.list,g,m);return y&&(this.addHandler(m),this.removeHandler(g),x&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,m,x,y){return s.SetAll(this.list,g,m,x,y),this},each:function(g,m){var x=[null],y,T=this.list.slice(),S=T.length;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<S;y++)x[0]=T[y],g.apply(m,x);return this},iterate:function(g,m){var x=[null],y;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<this.list.length;y++)x[0]=this.list[y],g.apply(m,x);return this},setScrollFactor:function(g,m,x){return m===void 0&&(m=g),x===void 0&&(x=!1),this.scrollFactorX=g,this.scrollFactorY=m,x&&(s.SetAll(this.list,"scrollFactorX",g),s.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(148),a=i(0),n=i(1057),h=new a({Extends:s,Mixins:[n],initialize:function(l,f,c,d,v,p,g){s.call(this,l,f,c,d,v,p,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(u,l){return this.cropWidth=u,this.cropHeight=l,this},setDisplayCallback:function(u){return this.displayCallback=u,this},setScrollX:function(u){return this.scrollX=u,this},setScrollY:function(u){return this.scrollY=u,this}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(133),a=i(0),n=i(217),h=i(303),u=i(304),l=i(305),f=i(309),c=i(167),d=i(312),v=i(313),p=i(314),g=i(111),m=i(15),x=i(2),y=i(6),T=i(14),S=i(1063),C=new a({Extends:m,Mixins:[h,u,l,f,c,v,p,d,S],initialize:function(P,M){var R=y(M,"x",0),A=y(M,"y",0);m.call(this,P,"Graphics"),this.setPosition(R,A),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(M)},setDefaultStyles:function(E){return y(E,"lineStyle",null)&&(this.defaultStrokeWidth=y(E,"lineStyle.width",1),this.defaultStrokeColor=y(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(E,"fillStyle",null)&&(this.defaultFillColor=y(E,"fillStyle.color",16777215),this.defaultFillAlpha=y(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,P,M){return M===void 0&&(M=1),this.commandBuffer.push(n.LINE_STYLE,E,P,M),this._lineWidth=E,this},fillStyle:function(E,P){return P===void 0&&(P=1),this.commandBuffer.push(n.FILL_STYLE,E,P),this},fillGradientStyle:function(E,P,M,R,A,O,F,b){return A===void 0&&(A=1),O===void 0&&(O=A),F===void 0&&(F=A),b===void 0&&(b=A),this.commandBuffer.push(n.GRADIENT_FILL_STYLE,A,O,F,b,E,P,M,R),this},lineGradientStyle:function(E,P,M,R,A,O){return O===void 0&&(O=1),this.commandBuffer.push(n.GRADIENT_LINE_STYLE,E,O,P,M,R,A),this},beginPath:function(){return this.commandBuffer.push(n.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(n.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(n.FILL_PATH),this},fill:function(){return this.commandBuffer.push(n.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(n.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(n.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.fillPath(),this},strokeCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,P,M,R){return this.commandBuffer.push(n.FILL_RECT,E,P,M,R),this},strokeRect:function(E,P,M,R){var A=this._lineWidth/2,O=E-A,F=E+A;return this.beginPath(),this.moveTo(E,P),this.lineTo(E,P+R),this.strokePath(),this.beginPath(),this.moveTo(E+M,P),this.lineTo(E+M,P+R),this.strokePath(),this.beginPath(),this.moveTo(O,P),this.lineTo(F+M,P),this.strokePath(),this.beginPath(),this.moveTo(O,P+R),this.lineTo(F+M,P+R),this.strokePath(),this},fillRoundedRect:function(E,P,M,R,A){A===void 0&&(A=20);var O=A,F=A,b=A,w=A;return typeof A!="number"&&(O=x(A,"tl",20),F=x(A,"tr",20),b=x(A,"bl",20),w=x(A,"br",20)),this.beginPath(),this.moveTo(E+O,P),this.lineTo(E+M-F,P),this.arc(E+M-F,P+F,F,-T.TAU,0),this.lineTo(E+M,P+R-w),this.arc(E+M-w,P+R-w,w,0,T.TAU),this.lineTo(E+b,P+R),this.arc(E+b,P+R-b,b,T.TAU,Math.PI),this.lineTo(E,P+O),this.arc(E+O,P+O,O,-Math.PI,-T.TAU),this.fillPath(),this},strokeRoundedRect:function(E,P,M,R,A){A===void 0&&(A=20);var O=A,F=A,b=A,w=A;return typeof A!="number"&&(O=x(A,"tl",20),F=x(A,"tr",20),b=x(A,"bl",20),w=x(A,"br",20)),this.beginPath(),this.moveTo(E+O,P),this.lineTo(E+M-F,P),this.moveTo(E+M-F,P),this.arc(E+M-F,P+F,F,-T.TAU,0),this.lineTo(E+M,P+R-w),this.moveTo(E+M,P+R-w),this.arc(E+M-w,P+R-w,w,0,T.TAU),this.lineTo(E+b,P+R),this.moveTo(E+b,P+R),this.arc(E+b,P+R-b,b,T.TAU,Math.PI),this.lineTo(E,P+O),this.moveTo(E,P+O),this.arc(E+O,P+O,O,-Math.PI,-T.TAU),this.strokePath(),this},fillPointShape:function(E,P){return this.fillPoint(E.x,E.y,P)},fillPoint:function(E,P,M){return!M||M<1?M=1:(E-=M/2,P-=M/2),this.commandBuffer.push(n.FILL_RECT,E,P,M,M),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,P,M,R,A,O){return this.commandBuffer.push(n.FILL_TRIANGLE,E,P,M,R,A,O),this},strokeTriangle:function(E,P,M,R,A,O){return this.commandBuffer.push(n.STROKE_TRIANGLE,E,P,M,R,A,O),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,P,M,R){return this.beginPath(),this.moveTo(E,P),this.lineTo(M,R),this.strokePath(),this},lineTo:function(E,P){return this.commandBuffer.push(n.LINE_TO,E,P),this},moveTo:function(E,P){return this.commandBuffer.push(n.MOVE_TO,E,P),this},strokePoints:function(E,P,M,R){P===void 0&&(P=!1),M===void 0&&(M=!1),R===void 0&&(R=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<R;A++)this.lineTo(E[A].x,E[A].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.strokePath(),this},fillPoints:function(E,P,M,R){P===void 0&&(P=!1),M===void 0&&(M=!1),R===void 0&&(R=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<R;A++)this.lineTo(E[A].x,E[A].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.strokePoints(M,!0)},strokeEllipse:function(E,P,M,R,A){A===void 0&&(A=32);var O=new g(E,P,M,R),F=O.getPoints(A);return this.strokePoints(F,!0)},fillEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.fillPoints(M,!0)},fillEllipse:function(E,P,M,R,A){A===void 0&&(A=32);var O=new g(E,P,M,R),F=O.getPoints(A);return this.fillPoints(F,!0)},arc:function(E,P,M,R,A,O,F){return O===void 0&&(O=!1),F===void 0&&(F=0),this.commandBuffer.push(n.ARC,E,P,M,R,A,O,F),this},slice:function(E,P,M,R,A,O,F){return O===void 0&&(O=!1),F===void 0&&(F=0),this.commandBuffer.push(n.BEGIN_PATH),this.commandBuffer.push(n.MOVE_TO,E,P),this.commandBuffer.push(n.ARC,E,P,M,R,A,O,F),this.commandBuffer.push(n.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(n.SAVE),this},restore:function(){return this.commandBuffer.push(n.RESTORE),this},translateCanvas:function(E,P){return this.commandBuffer.push(n.TRANSLATE,E,P),this},scaleCanvas:function(E,P){return this.commandBuffer.push(n.SCALE,E,P),this},rotateCanvas:function(E){return this.commandBuffer.push(n.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,P,M){var R=this.scene.sys,A=R.game.renderer;P===void 0&&(P=R.scale.width),M===void 0&&(M=R.scale.height),C.TargetCamera.setScene(this.scene),C.TargetCamera.setViewport(0,0,P,M),C.TargetCamera.scrollX=this.x,C.TargetCamera.scrollY=this.y;var O,F;if(typeof E=="string")if(R.textures.exists(E)){O=R.textures.get(E);var b=O.getSourceImage();b instanceof HTMLCanvasElement&&(F=b.getContext("2d"))}else O=R.textures.createCanvas(E,P,M),F=O.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(F=E.getContext("2d"));return F&&(this.renderCanvas(A,this,C.TargetCamera,null,F,!1),O&&O.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});C.TargetCamera=new s,e.exports=C},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h,u){u===void 0&&(u=new s);var l=n.width/2,f=n.height/2;return u.x=n.x+l*Math.cos(h),u.y=n.y+f*Math.sin(h),u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),a=i(0),n=i(11),h=i(176),u=i(101),l=i(9),f=i(75),c=i(110),d=i(1071),v=i(20),p=i(79),g=new a({Extends:c,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Visible,l,d],initialize:function(x,y){c.call(this,x),l.call(this),this.scene=x,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=x.sys,this.events=x.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(s.SKIP_CHECK),y&&this.add(y),x.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(m,x){return this.data||(this.data=new u(this)),this.data.set(m,x),this},incData:function(m,x){return this.data||(this.data=new u(this)),this.data.inc(m,x),this},toggleData:function(m){return this.data||(this.data=new u(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new u(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,x=this.parentContainer,y=[];x&&(y.unshift(x.getIndex(m)),m=x,x.parentContainer);)x=x.parentContainer;return y.unshift(this.displayList.getIndex(m)),y},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(f.ADDED_TO_SCENE,m,this.scene),this.events.emit(v.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(f.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(v.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,x){return m._depth-x._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(f.DESTROY,this);for(var m=this.list.length;m--;)this.list[m].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(11),n=i(15),h=i(450),u=i(110),l=i(452),f=i(1075),c=new s({Extends:n,Mixins:[a.Depth,a.Mask,a.Pipeline,a.Transform,a.Visible,f],initialize:function(v,p,g,m){if(n.call(this,v,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],g!==null&&(typeof g=="object"||Array.isArray(g))&&(m=g,g=null),this.setTexture(p,g),this.initPipeline(),this.emitters=new u(this),this.wells=new u(this),m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this.createEmitter(m[x])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(d,v){return this.texture=this.scene.sys.textures.get(d),this.setFrame(v)},setFrame:function(d){this.frame=this.texture.get(d);var v=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),p=[];return v.forEach(function(g){p.push(g.name)}),this.frameNames=p,this.defaultFrame=this.frame,this},setEmitterFrames:function(d,v){Array.isArray(d)||(d=[d]);var p=v.frames;p.length=0;for(var g=0;g<d.length;g++){var m=d[g];this.frameNames.indexOf(m)!==-1&&p.push(this.texture.get(m))}return p.length>0?v.defaultFrame=p[0]:v.defaultFrame=this.defaultFrame,this},addEmitter:function(d){return this.emitters.add(d)},createEmitter:function(d){return this.addEmitter(new l(this,d))},removeEmitter:function(d){return this.emitters.remove(d,!0)},addGravityWell:function(d){return this.wells.add(d)},createGravityWell:function(d){return this.addGravityWell(new h(d))},emitParticle:function(d,v,p){for(var g=this.emitters.list,m=0;m<g.length;m++){var x=g[m];x.active&&x.emitParticle(d,v,p)}return this},emitParticleAt:function(d,v,p){return this.emitParticle(p,d,v)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(d,v){v*=this.timeScale;for(var p=this.emitters.list,g=0;g<p.length;g++){var m=p[g];m.active&&m.preUpdate(d,v)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),a=i(133),n=i(31),h=i(0),u=i(11),l=i(33),f=i(109),c=i(15),d=i(1),v=i(92),p=i(1079),g=i(141),m=i(12),x=i(222),y=new h({Extends:c,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,p],initialize:function(S,C,E,P,M,R,A){C===void 0&&(C=0),E===void 0&&(E=0),P===void 0&&(P=32),M===void 0&&(M=32),c.call(this,S,"RenderTexture"),this.renderer=S.sys.renderer,this.textureManager=S.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,R===void 0?(this.canvas=n.create2D(this,P,M),this.texture=S.sys.textures.addCanvas(x(),this.canvas),this.frame=this.texture.get()):(this.texture=S.sys.textures.get(R),this.frame=this.texture.get(A),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new a(0,0,P,M),this.renderTarget=null;var O=this.renderer;O?O.type===l.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new g(O,P,M,1,0,!1)):O.type===l.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=d,this.camera.setScene(S),this.setPosition(C,E),R===void 0&&this.setSize(P,M),this.setOrigin(0,0),this.initPipeline(v.SINGLE_PIPELINE)},setSize:function(T,S){return this.resize(T,S)},resize:function(T,S){S===void 0&&(S=T);var C=this.frame;if(T!==this.width||S!==this.height){if(C.name==="__BASE"){this.canvas.width=T,this.canvas.height=S,this.texture.width=T,this.texture.height=S;var E=this.renderTarget;E&&(E.resize(T,S),C.glTexture=E.texture,C.source.isRenderTexture=!0,C.source.isGLTexture=!0,C.source.glTexture=E.texture),this.camera.setSize(T,S),C.source.width=T,C.source.height=S,C.setSize(T,S),this.width=T,this.height=S}}else{var P=this.texture.getSourceImage();C.cutX+T>P.width&&(T=P.width-C.cutX),C.cutY+S>P.height&&(S=P.height-C.cutY),C.setSize(T,S,C.cutX,C.cutY)}this.updateDisplayOrigin();var M=this.input;return M&&!M.customHitArea&&(M.hitArea.width=T,M.hitArea.height=S),this},setGlobalTint:function(T){return this.globalTint=T,this},setGlobalAlpha:function(T){return this.globalAlpha=T,this},saveTexture:function(T){return this.textureManager.renameTexture(this.texture.key,T),this._saved=!0,this.texture},fill:function(T,S,C,E,P,M){var R=this.frame,A=this.camera,O=this.renderer;S===void 0&&(S=1),C===void 0&&(C=0),E===void 0&&(E=0),P===void 0&&(P=R.cutWidth),M===void 0&&(M=R.cutHeight);var F=(T>>16&255)/255,b=(T>>8&255)/255,w=(T&255)/255,N=this.renderTarget;if(A.preRender(),N){N.bind(!0);var V=this.pipeline;V.manager.set(V);var W=N.width,U=N.height,D=O.width,L=O.height,I=D/W,B=L/U;V.drawFillRect(C*I,E*B,P*I,M*B,m.getTintFromFloats(w,b,F,1),S),N.unbind(!0)}else{var G=this.context;O.setContext(G),G.fillStyle="rgba("+F+","+b+","+w+","+S+")",G.fillRect(C+R.cutX,E+R.cutY,P,M),O.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.renderTarget;if(T)T.clear();else{var S=this.context;S.save(),S.setTransform(1,0,0,1,0,0),S.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),S.restore()}this.dirty=!1}return this},erase:function(T,S,C){return this._eraseMode=!0,this.draw(T,S,C,1,16777215),this._eraseMode=!1,this},draw:function(T,S,C,E,P){return this.beginDraw(),this.batchDraw(T,S,C,E,P),this.endDraw(),this},drawFrame:function(T,S,C,E,P,M){return this.beginDraw(),this.batchDrawFrame(T,S,C,E,P,M),this.endDraw(),this},beginDraw:function(){var T=this.camera,S=this.renderer,C=this.renderTarget;return T.preRender(),C?S.beginCapture(C.width,C.height):S.setContext(this.context),this},batchDraw:function(T,S,C,E,P){return E===void 0&&(E=this.globalAlpha),P===void 0?P=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):P=(P>>16)+(P&65280)+((P&255)<<16),Array.isArray(T)||(T=[T]),this.batchList(T,S,C,E,P),this},batchDrawFrame:function(T,S,C,E,P,M){C===void 0&&(C=0),E===void 0&&(E=0),P===void 0&&(P=this.globalAlpha),M===void 0?M=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):M=(M>>16)+(M&65280)+((M&255)<<16);var R=this.textureManager.getFrame(T,S);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,C,E,M,P,this.camera.matrix,null):this.batchTextureFrame(R,C+this.frame.cutX,E+this.frame.cutY,P,M)),this},endDraw:function(T){T===void 0&&(T=this._eraseMode);var S=this.renderer,C=this.renderTarget;if(C){var E=S.endCapture(),P=S.pipelines.setUtility();P.blitFrame(E,C,1,!1,!1,T),S.resetScissor(),S.resetViewport()}else S.setContext();return this.dirty=!0,this},batchList:function(T,S,C,E,P){for(var M=0;M<T.length;M++){var R=T[M];!R||R===this||(R.renderWebGL||R.renderCanvas?this.drawGameObject(R,S,C):R.isParent||R.list?this.batchGroup(R.getChildren(),S,C):typeof R=="string"?this.batchTextureFrameKey(R,null,S,C,E,P):R instanceof f?this.batchTextureFrame(R,S,C,E,P):Array.isArray(R)&&this.batchList(R,S,C,E,P))}},batchGroup:function(T,S,C){S===void 0&&(S=0),C===void 0&&(C=0),S+=this.frame.cutX,C+=this.frame.cutY;for(var E=0;E<T.length;E++){var P=T[E];if(P.willRender(this.camera)){var M=P.x+S,R=P.y+C;this.drawGameObject(P,M,R)}}},batchGameObjectWebGL:function(T,S,C){S===void 0&&(S=T.x),C===void 0&&(C=T.y);var E=T.x,P=T.y;T.setPosition(S+this.frame.cutX,C+this.frame.cutY),T.renderDirect?T.renderDirect(this.renderer,T,this.camera):T.renderWebGL(this.renderer,T,this.camera),T.setPosition(E,P)},batchGameObjectCanvas:function(T,S,C){S===void 0&&(S=T.x),C===void 0&&(C=T.y);var E=T.x,P=T.y;if(this._eraseMode){var M=T.blendMode;T.blendMode=s.ERASE}T.setPosition(S+this.frame.cutX,C+this.frame.cutY),T.renderCanvas(this.renderer,T,this.camera,null),T.setPosition(E,P),this._eraseMode&&(T.blendMode=M)},batchTextureFrameKey:function(T,S,C,E,P,M){var R=this.textureManager.getFrame(T,S);R&&this.batchTextureFrame(R,C,E,P,M)},batchTextureFrame:function(T,S,C,E,P){S===void 0&&(S=0),C===void 0&&(C=0),S+=this.frame.cutX,C+=this.frame.cutY;var M=this.renderTarget;if(M)this.pipeline.batchTextureFrame(T,S,C,P,E,this.camera.matrix,null);else{var R=this.context,A=T.canvasData,O=T.source.image,F=this.camera.matrix;R.save(),R.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",R.globalAlpha=E,F.setToContext(R),R.drawImage(O,A.x,A.y,A.width,A.height,S,C,A.width,A.height),R.restore()}},snapshotArea:function(T,S,C,E,P,M,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,P,!1,T,S,C,E,M,R):this.renderer.snapshotCanvas(this.canvas,P,!1,T,S,C,E,M,R),this},snapshot:function(T,S,C){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,0,0,this.width,this.height,S,C):this.renderer.snapshotCanvas(this.canvas,T,!1,0,0,this.width,this.height,S,C),this},snapshotPixel:function(T,S,C){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,C,!0,T,S):this.renderer.snapshotCanvas(this.canvas,C,!0,T,S),this},preDestroy:function(){this._saved||(n.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});e.exports=y},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var a=Math.random()*16|0,n=s==="x"?a:a&3|8;return n.toString(16)})};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(164),a=i(0),n=i(11),h=i(15),u=i(92),l=i(1085),f=i(3),c=new a({Extends:h,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Flip,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,l],initialize:function(v,p,g,m,x,y,T,S,C){m===void 0&&(m="__DEFAULT"),y===void 0&&(y=2),T===void 0&&(T=!0),h.call(this,v,"Rope"),this.anims=new s(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=m==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new f,this.debugCallback=null,this.debugGraphic=null,this.setTexture(m,x),this.setPosition(p,g),this.setSizeToFrame(),this.initPipeline(u.ROPE_PIPELINE),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,S,C),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(d,v){var p=this.anims.currentFrame;this.anims.update(d,v),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(d,v,p){return this.anims.play(d,v,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(d,v,p){return d===void 0&&(d=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(d,v,p))},setVertical:function(d,v,p){return d===void 0&&(d=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(d,v,p)):this},setTintFill:function(d){return d===void 0&&(d=!1),this.tintFill=d,this},setAlphas:function(d,v){var p=this.points.length;if(p<1)return this;var g=this.alphas;d===void 0?d=[1]:!Array.isArray(d)&&v===void 0&&(d=[d]);var m,x=0;if(v!==void 0)for(m=0;m<p;m++)x=m*2,g[x]=d,g[x+1]=v;else if(d.length===p)for(m=0;m<p;m++)x=m*2,g[x]=d[m],g[x+1]=d[m];else{var y=d[0];for(m=0;m<p;m++)x=m*2,d.length>x&&(y=d[x]),g[x]=y,d.length>x+1&&(y=d[x+1]),g[x+1]=y}return this},setColors:function(d){var v=this.points.length;if(v<1)return this;var p=this.colors;d===void 0?d=[16777215]:Array.isArray(d)||(d=[d]);var g,m=0;if(d.length===v)for(g=0;g<v;g++)m=g*2,p[m]=d[g],p[m+1]=d[g];else{var x=d[0];for(g=0;g<v;g++)m=g*2,d.length>m&&(x=d[m]),p[m]=x,d.length>m+1&&(x=d[m+1]),p[m+1]=x}return this},setPoints:function(d,v,p){if(d===void 0&&(d=2),typeof d=="number"){var g=d;g<2&&(g=2),d=[];var m,x,y;if(this.horizontal)for(y=-this.frame.halfWidth,x=this.frame.width/(g-1),m=0;m<g;m++)d.push({x:y+m*x,y:0});else for(y=-this.frame.halfHeight,x=this.frame.height/(g-1),m=0;m<g;m++)d.push({x:0,y:y+m*x})}var T=d.length,S=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(d.unshift({x:0,y:0}),T++),S!==T&&this.resizeArrays(T),this.points=d,this.updateUVs(),v!=null&&this.setColors(v),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var d=this.uv,v=this.points.length,p=this.frame.u0,g=this.frame.v0,m=this.frame.u1,x=this.frame.v1,y=(m-p)/(v-1),T=(x-g)/(v-1),S=0;S<v;S++){var C=S*4,E,P,M,R;this.horizontal?(this._flipX?(E=m-S*y,M=m-S*y):(E=p+S*y,M=p+S*y),this._flipY?(P=x,R=g):(P=g,R=x)):(this._flipX?(E=p,M=m):(E=m,M=p),this._flipY?(P=x-S*T,R=x-S*T):(P=g+S*T,R=g+S*T)),d[C+0]=E,d[C+1]=P,d[C+2]=M,d[C+3]=R}return this},resizeArrays:function(d){var v=this.colors,p=this.alphas;this.vertices=new Float32Array(d*4),this.uv=new Float32Array(d*4),v=new Uint32Array(d*2),p=new Float32Array(d*2);for(var g=0;g<d*2;g++)v[g]=16777215,p[g]=1;return this.colors=v,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var d=this._perp,v=this.points,p=this.vertices,g=v.length;if(this.dirty=!1,!(g<1)){for(var m,x=v[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<g;T++){var S=v[T],C=T*4;T<g-1?m=v[T+1]:m=S,d.x=m.y-x.y,d.y=-(m.x-x.x);var E=d.length();d.x/=E,d.y/=E,d.x*=y,d.y*=y,p[C]=S.x+d.x,p[C+1]=S.y+d.y,p[C+2]=S.x-d.x,p[C+3]=S.y-d.y,x=S}return this}},setDebug:function(d,v){return this.debugGraphic=d,!d&&!v?this.debugCallback=null:v?this.debugCallback=v:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(d,v,p){var g=d.debugGraphic,m=p[0],x=p[1],y=p[2],T=p[3];g.lineBetween(m,x,y,T);for(var S=4;S<v;S+=4){var C=p[S+0],E=p[S+1],P=p[S+2],M=p[S+3];g.lineBetween(m,x,C,E),g.lineBetween(y,T,P,M),g.lineBetween(y,T,C,E),g.lineBetween(C,E,P,M),m=C,x=E,y=P,T=M}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(d){return this._flipX=d,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(d){return this._flipY=d,this.updateUVs()}}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(142),a=i(31),n=i(0),h=i(11),u=i(22),l=i(15),f=i(458),c=i(6),d=i(202),v=i(1088),p=i(459),g=new n({Extends:l,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,v],initialize:function(x,y,T,S,C){y===void 0&&(y=0),T===void 0&&(T=0),l.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.canvas=a.create(this),this.context=this.canvas.getContext("2d"),this.style=new p(this,C),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(S),C&&C.padding&&this.setPadding(C.padding),C&&C.lineSpacing&&this.setLineSpacing(C.lineSpacing),x.sys.game.events.on(u.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var x=this.style;if(x.wordWrapCallback){var y=x.wordWrapCallback.call(x.wordWrapCallbackScope,m,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,x,y){for(var T="",S=m.replace(/ +/gi," ").split(this.splitRegExp),C=S.length,E=0;E<C;E++){var P=S[E],M="";P=P.replace(/^ *|\s*$/gi,"");var R=x.measureText(P).width;if(R<y){T+=P+`
`;continue}for(var A=y,O=P.split(" "),F=0;F<O.length;F++){var b=O[F],w=b+" ",N=x.measureText(w).width;if(N>A){if(F===0){for(var V=w;V.length&&(V=V.slice(0,-1),N=x.measureText(V).width,!(N<=A)););if(!V.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var W=b.substr(V.length);O[F]=W,M+=V}var U=O[F].length?F:F+1,D=O.slice(U).join(" ").replace(/[ \n]*$/gi,"");S[E+1]=D+" "+(S[E+1]||""),C=S.length;break}else M+=w,A-=N}T+=M.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(m,x,y){for(var T="",S=m.split(this.splitRegExp),C=S.length-1,E=x.measureText(" ").width,P=0;P<=C;P++){for(var M=y,R=S[P].split(" "),A=R.length-1,O=0;O<=A;O++){var F=R[O],b=x.measureText(F).width,w=b;O<A&&(w+=E),w>M&&O>0&&(T+=`
`,M=y),T+=F,O<A?(T+=" ",M-=w):M-=b}P<C&&(T+=`
`)}return T},getWrappedText:function(m){m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(m);return x.split(this.splitRegExp)},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,x){return this.style.setFixedSize(m,x)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,x){return this.style.setStroke(m,x)},setShadow:function(m,x,y,T,S,C){return this.style.setShadow(m,x,y,T,S,C)},setShadowOffset:function(m,x){return this.style.setShadowOffset(m,x)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,x){return this.style.setWordWrapWidth(m,x)},setWordWrapCallback:function(m,x){return this.style.setWordWrapCallback(m,x)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setPadding:function(m,x,y,T){if(typeof m=="object"){var S=m,C=c(S,"x",null);C!==null?(m=C,y=C):(m=c(S,"left",0),y=c(S,"right",m));var E=c(S,"y",null);E!==null?(x=E,T=E):(x=c(S,"top",0),T=c(S,"bottom",x))}else m===void 0&&(m=0),x===void 0&&(x=m),y===void 0&&(y=m),T===void 0&&(T=x);return this.padding.left=m,this.padding.top=x,this.padding.right=y,this.padding.bottom=T,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},updateText:function(){var m=this.canvas,x=this.context,y=this.style,T=y.resolution,S=y.metrics;y.syncFont(m,x);var C=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(C=this.runWordWrap(this._text));var E=C.split(this.splitRegExp),P=f(this,S,E),M=this.padding,R;y.fixedWidth===0?(this.width=P.width+M.left+M.right,R=P.width):(this.width=y.fixedWidth,R=this.width-M.left-M.right,R<P.width&&(R=P.width)),y.fixedHeight===0?this.height=P.height+M.top+M.bottom:this.height=y.fixedHeight;var A=this.width,O=this.height;this.updateDisplayOrigin(),A*=T,O*=T,A=Math.max(A,1),O=Math.max(O,1),m.width!==A||m.height!==O?(m.width=A,m.height=O,this.frame.setSize(A,O),y.syncFont(m,x)):x.clearRect(0,0,A,O),x.save(),x.scale(T,T),y.backgroundColor&&(x.fillStyle=y.backgroundColor,x.fillRect(0,0,A,O)),y.syncStyle(m,x),x.textBaseline="alphabetic",x.translate(M.left,M.top);for(var F,b,w=0;w<P.lines;w++){if(F=y.strokeThickness/2,b=y.strokeThickness/2+w*P.lineHeight+S.ascent,w>0&&(b+=P.lineSpacing*w),y.rtl)F=A-F;else if(y.align==="right")F+=R-P.lineWidths[w];else if(y.align==="center")F+=(R-P.lineWidths[w])/2;else if(y.align==="justify"){var N=.85;if(P.lineWidths[w]/P.width>=N){var V=P.width-P.lineWidths[w],W=x.measureText(" ").width,U=E[w].trim(),D=U.split(" ");V+=(E[w].length-U.length)*W;for(var L=Math.floor(V/W),I=0;L>0;)D[I]+=" ",I=(I+1)%(D.length-1||1),--L;E[w]=D.join(" ")}}this.autoRound&&(F=Math.round(F),b=Math.round(b)),y.strokeThickness&&(this.style.syncShadow(x,y.shadowStroke),x.strokeText(E[w],F,b)),y.color&&(this.style.syncShadow(x,y.shadowFill),x.fillText(E[w],F,b))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var B=this.input;return B&&!B.customHitArea&&(B.hitArea.width=this.width,B.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=h.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=x,m},preDestroy:function(){this.style.rtl&&d(this.canvas),a.remove(this.canvas),this.texture.destroy()}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),a=i(0),n=i(11),h=i(22),u=i(15),l=i(361),f=i(192),c=i(1091),d=i(3),v=8,p=new a({Extends:u,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,c],initialize:function(m,x,y,T,S,C,E){var P=m.sys.renderer;u.call(this,m,"TileSprite");var M=m.sys.textures.get(C),R=M.get(E);!T||!S?(T=R.width,S=R.height):(T=Math.floor(T),S=Math.floor(S)),this._tilePosition=new d,this._tileScale=new d(1,1),this.dirty=!1,this.renderer=P,this.canvas=s.create(this,T,S),this.context=this.canvas.getContext("2d"),this.displayTexture=M,this.displayFrame=R,this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=l(R.width),this.potHeight=l(R.height),this.fillCanvas=s.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(x,y),this.setSize(T,S),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),m.sys.game.events.on(h.CONTEXT_RESTORED,function(A){if(!!A){var O=A.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=A.createTexture2D(0,O.LINEAR,O.LINEAR,O.REPEAT,O.REPEAT,O.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(g,m){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(m)},setFrame:function(g){var m=this.displayTexture.get(g);return this.potWidth=l(m.width),this.potHeight=l(m.height),this.canvas.width=0,!m.cutWidth||!m.cutHeight?this.renderFlags&=~v:this.renderFlags|=v,this.displayFrame=m,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,m){return g!==void 0&&(this.tilePositionX=g),m!==void 0&&(this.tilePositionY=m),this},setTileScale:function(g,m){return g===void 0&&(g=this.tileScaleX),m===void 0&&(m=g),this.tileScaleX=g,this.tileScaleY=m,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var m=this.fillContext,x=this.fillCanvas,y=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=g.cutWidth,T=g.cutHeight),m.clearRect(0,0,y,T),x.width=y,x.height=T,m.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,y,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=m.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var m=this.context;this.scene.sys.game.config.antialias||f.disable(m);var x=this._tileScale.x,y=this._tileScale.y,T=this._tilePosition.x,S=this._tilePosition.y;m.clearRect(0,0,this.width,this.height),m.save(),m.scale(x,y),m.translate(-T,-S),m.fillStyle=this.fillPattern,m.fillRect(T,S,this.width/x,this.height/y),m.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),s.remove(this.canvas),s.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(18),n=i(11),h=i(75),u=i(22),l=i(51),f=i(15),c=i(70),d=i(222),v=i(1094),p=i(14),g=new s({Extends:f,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,v],initialize:function(x,y,T,S){f.call(this,x,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=d(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=p.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(y,T),this.initPipeline(),S&&this.changeSource(S,!1);var C=x.sys.game.events;C.on(u.PAUSE,this.globalPause,this),C.on(u.RESUME,this.globalResume,this);var E=x.sys.sound;E&&E.on(c.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(m,x,y){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var T=this.video;if(!T)return console.warn("Video not loaded"),this;m===void 0&&(m=T.loop);var S=this.scene.sys.sound;S&&S.mute&&this.setMute(!0),isNaN(x)||(this._markerIn=x),!isNaN(y)&&y>x&&(this._markerOut=y),T.loop=m;var C=this._callbacks,E=T.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(T.addEventListener("playing",C.play,!0),T.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),T.addEventListener("ended",C.end,!0),T.addEventListener("timeupdate",C.time,!0),T.addEventListener("seeking",C.seeking,!0),T.addEventListener("seeked",C.seeked,!0),this},changeSource:function(m,x,y,T,S){x===void 0&&(x=!0);var C=this.video;C&&this.stop();var E=this.scene.sys.cache.video.get(m);return E?(this.video=E,this._cacheKey=m,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(h.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,x&&this.play(y,T,S)):this.video=null,this},addMarker:function(m,x,y){return!isNaN(x)&&x>=0&&!isNaN(y)&&(this.markers[m]=[x,y]),this},playMarker:function(m,x){var y=this.markers[m];return y&&this.play(x,y[0],y[1]),this},removeMarker:function(m){return delete this.markers[m],this},snapshot:function(m,x){return m===void 0&&(m=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,m,x)},snapshotArea:function(m,x,y,T,S,C){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.width),T===void 0&&(T=this.height),S===void 0&&(S=y),C===void 0&&(C=T);var E=this.video,P=this.snapshotTexture;return P?(P.setSize(S,C),E&&P.context.drawImage(E,m,x,y,T,0,0,S,C)):(P=this.scene.sys.textures.createCanvas(d(),S,C),this.snapshotTexture=P,E&&P.context.drawImage(E,m,x,y,T,0,0,S,C)),P.update()},saveSnapshotTexture:function(m){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,m):this.snapshotTexture=this.scene.sys.textures.createCanvas(m,this.width,this.height),this.snapshotTexture},loadURL:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");return T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0),T.src=m,T.load(),this.video=T,this},loadMediaStream:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0);try{T.srcObject=m}catch{T.src=window.URL.createObjectURL(m)}return T.load(),this.video=T,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(h.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(m){this.scene.sys.input.once(l.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(h.VIDEO_ERROR,this,m)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(h.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(m){this.stop(),this.emit(h.VIDEO_ERROR,this,m)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(h.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(h.VIDEO_PLAY,this)},completeHandler:function(){this.emit(h.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(h.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var m=this.video;if(m){var x=m.currentTime;x!==this._lastUpdate&&(this._lastUpdate=x,this.updateTexture(),x>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=x,this.emit(h.VIDEO_LOOP,this)):(this.emit(h.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(h.VIDEO_TIMEOUT,this))},updateTexture:function(){var m=this.video,x=m.videoWidth,y=m.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,m,x,y),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,x,y),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(h.VIDEO_CREATED,this,x,y);else{var T=this.videoTextureSource;T.source!==m&&(T.source=m,T.width=x,T.height=y),T.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(m){var x=this.video;if(x){var y=x.duration;if(y!==1/0&&!isNaN(y)){var T=y*m;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(m){var x=this.video;if(x){if(typeof m=="string"){var y=m[0],T=parseFloat(m.substr(1));y==="+"?m=x.currentTime+T:y==="-"&&(m=x.currentTime-T)}x.currentTime=m,this._lastUpdate=m}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(h.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(h.VIDEO_SEEKED,this);var m=this.video;m&&this.updateTexture()},getProgress:function(){var m=this.video;if(m){var x=m.currentTime,y=m.duration;if(y!==1/0&&!isNaN(y))return x/y}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(m){m===void 0&&(m=!0),this._codeMuted=m;var x=this.video;return x&&(x.muted=this._systemMuted?!0:m),this},isMuted:function(){return this._codeMuted},globalMute:function(m,x){this._systemMuted=x;var y=this.video;y&&(y.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(m){m===void 0&&(m=!0);var x=this.video;return this._codePaused=m,x&&(m?x.paused||x.pause():m||x.paused&&!this._systemPaused&&x.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(m){return m===void 0&&(m=1),this.video&&(this.video.volume=a(m,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(m){return this.video&&(this.video.playbackRate=m),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(m){return m===void 0&&(m=!0),this.video&&(this.video.loop=m),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(m,x){return x===void 0&&(x=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,m),this._key=m,this.flipY=x,this.videoTextureSource&&this.videoTextureSource.setFlipY(x),this.videoTexture},stop:function(){var m=this.video;if(m){var x=this._callbacks;for(var y in x)m.removeEventListener(y,x[y],!0);m.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(h.VIDEO_STOP,this),this},removeVideoElement:function(){var m=this.video;if(!!m){for(m.parentNode&&m.parentNode.removeChild(m);m.hasChildNodes();)m.removeChild(m.firstChild);m.removeAttribute("autoplay"),m.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var m=this.scene.sys.game.events;m.off(u.PAUSE,this.globalPause,this),m.off(u.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(c.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(228),n=i(470),h=i(56),u=new s({initialize:function(f){this.type=h.POLYGON,this.area=0,this.points=[],f&&this.setTo(f)},contains:function(l,f){return a(this,l,f)},setTo:function(l){if(this.area=0,this.points=[],typeof l=="string"&&(l=l.split(" ")),!Array.isArray(l))return this;for(var f,c=Number.MAX_VALUE,d=0;d<l.length;d++)f={x:0,y:0},typeof l[d]=="number"||typeof l[d]=="string"?(f.x=parseFloat(l[d]),f.y=parseFloat(l[d+1]),d++):Array.isArray(l[d])?(f.x=l[d][0],f.y=l[d][1]):(f.x=l[d].x,f.y=l[d].y),this.points.push(f),f.y<c&&(c=f.y);return this.calculateArea(c),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var l=0,f,c,d=0;d<this.points.length-1;d++)f=this.points[d],c=this.points[d+1],l+=(c.x-f.x)*(f.y+c.y);return f=this.points[0],c=this.points[this.points.length-1],l+=(f.x-c.x)*(c.y+f.y),this.area=-l*.5,this.area},getPoints:function(l,f,c){return n(this,l,f,c)}});e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){for(var h=!1,u=-1,l=s.points.length-1;++u<s.points.length;l=u){var f=s.points[u].x,c=s.points[u].y,d=s.points[l].x,v=s.points[l].y;(c<=n&&n<v||v<=n&&n<c)&&a<(d-f)*(n-c)/(v-c)+f&&(h=!h)}return h};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(11),n=i(15),h=i(2),u=i(17),l=i(478),f=i(1176),c=i(25),d=new s({Extends:n,Mixins:[a.ComputedSize,a.Depth,a.GetBounds,a.Mask,a.Origin,a.ScrollFactor,a.Transform,a.Visible,f],initialize:function(p,g,m,x,y,T,S,C){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=128),T===void 0&&(T=128),n.call(this,p,"Shader"),this.blendMode=-1,this.shader;var E=p.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(m,x),this.setSize(y,T),this.setOrigin(.5,.5),this.setShader(g,S,C)},willRender:function(v){return this.renderToTexture?!0:!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},setRenderToTexture:function(v,p){if(p===void 0&&(p=!1),!this.renderToTexture){var g=this.width,m=this.height,x=this.renderer;this.glTexture=x.createTextureFromSource(null,g,m,0),this.glTexture.flipY=p,this.framebuffer=x.createFramebuffer(g,m,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=m,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),v&&(this.texture=this.scene.sys.textures.addGLTexture(v,this.glTexture,g,m))}return this.shader&&(x.pipelines.clear(),this.load(),this.flush(),x.pipelines.rebind()),this},setShader:function(v,p,g){if(p===void 0&&(p=[]),typeof v=="string"){var m=this.scene.sys.cache.shader;if(!m.has(v))return console.warn("Shader missing: "+v),this;this.shader=m.get(v)}else this.shader=v;var x=this.gl,y=this.renderer;this.program&&x.deleteProgram(this.program);var T=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);x.uniformMatrix4fv(x.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),x.uniformMatrix4fv(x.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),x.uniform2f(x.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var S=new Date,C={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[S.getFullYear(),S.getMonth(),S.getDate(),S.getHours()*60*60+S.getMinutes()*60+S.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=u(!0,{},this.shader.uniforms,C):this.uniforms=C;for(var E=0;E<4;E++)p[E]&&this.setSampler2D("iChannel"+E,p[E],E,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(v){return this.pointer=v,this},projOrtho:function(v,p,g,m){var x=-1e3,y=1e3,T=1/(v-p),S=1/(g-m),C=1/(x-y),E=this.projectionMatrix;E[0]=-2*T,E[5]=-2*S,E[10]=2*C,E[12]=(v+p)*T,E[13]=(m+g)*S,E[14]=(y+x)*C;var P=this.program,M=this.gl,R=this.renderer;R.setProgram(P),M.uniformMatrix4fv(M.getUniformLocation(P,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=g},initUniforms:function(){var v=this.gl,p=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var m in this.uniforms){var x=this.uniforms[m],y=x.type,T=p[y];x.uniformLocation=v.getUniformLocation(g,m),y!=="sampler2D"&&(x.glMatrix=T.matrix,x.glValueLength=T.length,x.glFunc=T.func)}},setSampler2DBuffer:function(v,p,g,m,x,y){x===void 0&&(x=0),y===void 0&&(y={});var T=this.uniforms[v];return T.value=p,y.width=g,y.height=m,T.textureData=y,this._textureCount=x,this.initSampler2D(T),this},setSampler2D:function(v,p,g,m){g===void 0&&(g=0);var x=this.scene.sys.textures;if(x.exists(p)){var y=x.getFrame(p);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(v,y.glTexture,y.width,y.height,g,m);var T=this.uniforms[v],S=y.source;T.textureKey=p,T.source=S.image,T.value=y.glTexture,S.isGLTexture&&(m||(m={}),m.width=S.width,m.height=S.height),m&&(T.textureData=m),this._textureCount=g,this.initSampler2D(T)}return this},setUniform:function(v,p){return l(this.uniforms,v,p),this},getUniform:function(v){return h(this.uniforms,v,null)},setChannel0:function(v,p){return this.setSampler2D("iChannel0",v,0,p)},setChannel1:function(v,p){return this.setSampler2D("iChannel1",v,1,p)},setChannel2:function(v,p){return this.setSampler2D("iChannel2",v,2,p)},setChannel3:function(v,p){return this.setSampler2D("iChannel3",v,3,p)},initSampler2D:function(v){if(!!v.value){var p=this.gl;p.activeTexture(p.TEXTURE0+this._textureCount),p.bindTexture(p.TEXTURE_2D,v.value);var g=v.textureData;if(g&&!v.value.isRenderTexture){var m=p[h(g,"magFilter","linear").toUpperCase()],x=p[h(g,"minFilter","linear").toUpperCase()],y=p[h(g,"wrapS","repeat").toUpperCase()],T=p[h(g,"wrapT","repeat").toUpperCase()],S=p[h(g,"format","rgba").toUpperCase()];if(g.repeat&&(y=p.REPEAT,T=p.REPEAT),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var C=h(g,"width",512),E=h(g,"height",2),P=h(g,"border",0);p.texImage2D(p.TEXTURE_2D,0,S,C,E,P,S,p.UNSIGNED_BYTE,null)}else p.texImage2D(p.TEXTURE_2D,0,S,p.RGBA,p.UNSIGNED_BYTE,v.source);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,m),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,x),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,y),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,T)}this.renderer.setProgram(this.program),p.uniform1i(v.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var v=this.gl,p=this.uniforms,g,m,x,y,T,S=0;for(var C in p)g=p[C],x=g.glFunc,m=g.glValueLength,y=g.uniformLocation,T=g.value,T!==null&&(m===1?g.glMatrix?x.call(v,y,g.transpose,T):x.call(v,y,T):m===2?x.call(v,y,T.x,T.y):m===3?x.call(v,y,T.x,T.y,T.z):m===4?x.call(v,y,T.x,T.y,T.z,T.w):g.type==="sampler2D"&&(v.activeTexture(v.TEXTURE0+S),v.bindTexture(v.TEXTURE_2D,T),v.uniform1i(y,S),S++))},load:function(v){var p=this.gl,g=this.width,m=this.height,x=this.renderer,y=this.program,T=this.viewMatrix;if(!this.renderToTexture){var S=-this._displayOriginX,C=-this._displayOriginY;T[0]=v[0],T[1]=v[1],T[4]=v[2],T[5]=v[3],T[8]=v[4],T[9]=v[5],T[12]=T[0]*S+T[4]*C,T[13]=T[1]*S+T[5]*C}p.useProgram(y),p.uniformMatrix4fv(p.getUniformLocation(y,"uViewMatrix"),!1,T),p.uniform2f(p.getUniformLocation(y,"uResolution"),this.width,this.height);var E=this.uniforms,P=E.resolution;P.value.x=g,P.value.y=m,E.time.value=x.game.loop.getDuration();var M=this.pointer;if(M){var R=E.mouse,A=M.x/g,O=1-M.y/m;R.value.x=A.toFixed(2),R.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var v=this.width,p=this.height,g=this.program,m=this.gl,x=this.vertexBuffer,y=this.renderer,T=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)),m.bindBuffer(m.ARRAY_BUFFER,x);var S=m.getAttribLocation(g,"inPosition");S!==-1&&(m.enableVertexAttribArray(S),m.vertexAttribPointer(S,2,m.FLOAT,!1,T,0));var C=this.vertexViewF32;C[3]=p,C[4]=v,C[5]=p,C[8]=v,C[9]=p,C[10]=v;var E=6;m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,E*T)),m.drawArrays(m.TRIANGLES,0,E),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var v=this.gl;v.deleteProgram(this.program),v.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(11),n=i(36),h=i(116),u=i(15),l=i(479),f=i(480),c=i(19),d=i(69),v=i(1179),p=i(79),g=i(39),m=i(117),x=new s({Extends:u,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.Size,a.Texture,a.Transform,a.Visible,a.ScrollFactor,v],initialize:function(T,S,C,E,P,M,R,A,O,F,b,w){S===void 0&&(S=0),C===void 0&&(C=0),E===void 0&&(E="__WHITE"),u.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new d,this.viewPosition=new g,this.viewMatrix=new d,this.projectionMatrix=new d,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var N=T.sys.renderer;this.setPosition(S,C),this.setTexture(E,P),this.setSize(N.width,N.height),this.initPipeline(),this.setPerspective(N.width,N.height),M&&this.addVertices(M,R,A,O,F,b,w)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(g.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=g.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,S,C,E){return S===void 0&&(S=45),C===void 0&&(C=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(n(S),y/T,C,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,S,C){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),S===void 0&&(S=-1e3),C===void 0&&(C=1e3),this.projectionMatrix.ortho(-y,y,-T,T,S,C),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,S,C,E,P,M,R,A){var O=this.scene.sys.cache.obj.get(y);return O&&f(O,this,T,S,C,E,P,M,R,A),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(y,T,S,C,E,P,M){var R=new m(y,T,S,C,E,P,M);return this.vertices.push(R),R},addFace:function(y,T,S){var C=new h(y,T,S);return this.faces.push(C),this.dirtyCache[9]=-1,C},addVertices:function(y,T,S,C,E,P,M){var R=l(y,T,S,C,E,P,M);return R&&(this.faces=this.faces.concat(R.faces),this.vertices=this.vertices.concat(R.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},getFaceAt:function(y,T,S){S===void 0&&(S=this.scene.sys.cameras.main);for(var C=c(this,S).calc,E=this.faces,P=[],M=0;M<E.length;M++){var R=E[M];R.contains(y,T,C)&&P.push(R)}return p(P,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,S=this.modelScale,C=this.dirtyCache,E=y.x,P=y.y,M=y.z,R=T.x,A=T.y,O=T.z,F=S.x,b=S.y,w=S.z,N=this.getFaceCount(),V=C[0],W=C[1],U=C[2],D=C[3],L=C[4],I=C[5],B=C[6],G=C[7],z=C[8],Y=C[9];return C[0]=E,C[1]=P,C[2]=M,C[3]=R,C[4]=A,C[5]=O,C[6]=F,C[7]=b,C[8]=w,C[9]=N,V!==E||W!==P||U!==M||D!==R||L!==A||I!==O||B!==F||G!==b||z!==w||Y!==N},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,S=this.height,C=this.viewMatrix,E=this.viewPosition;y[10]&&(C.identity(),C.translate(E),C.invert(),y[10]=0);var P=this.transformMatrix;P.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var M=E.z,R=this.faces,A=0;A<R.length;A++)R[A].transformCoordinatesLocal(P,T,S,M);this.depthSort()}},renderDebug:function(y,T){for(var S=y.debugGraphic,C=0;C<T.length;C++){var E=T[C],P=E.vertex1.tx,M=E.vertex1.ty,R=E.vertex2.tx,A=E.vertex2.ty,O=E.vertex3.tx,F=E.vertex3.ty;S.strokeTriangle(P,M,R,A,O,F)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(50),a=function(n,h){return s(n.x,n.y,h.x,h.y)<=n.radius+h.radius};e.exports=a},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=i(233),n=function(h,u,l){if(l===void 0&&(l=[]),a(h,u)){var f=h.x1,c=h.y1,d=h.x2,v=h.y2,p=u.x,g=u.y,m=u.radius,x=d-f,y=v-c,T=f-p,S=c-g,C=x*x+y*y,E=2*(x*T+y*S),P=T*T+S*S-m*m,M=E*E-4*C*P,R,A;if(M===0){var O=-E/(2*C);R=f+O*x,A=c+O*y,O>=0&&O<=1&&l.push(new s(R,A))}else if(M>0){var F=(-E-Math.sqrt(M))/(2*C);R=f+F*x,A=c+F*y,F>=0&&F<=1&&l.push(new s(R,A));var b=(-E+Math.sqrt(M))/(2*C);R=f+b*x,A=c+b*y,b>=0&&b<=1&&l.push(new s(R,A))}}return l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(66),a=i(4),n=new a,h=function(u,l,f){if(f===void 0&&(f=n),s(l,u.x1,u.y1))return f.x=u.x1,f.y=u.y1,!0;if(s(l,u.x2,u.y2))return f.x=u.x2,f.y=u.y2,!0;var c=u.x2-u.x1,d=u.y2-u.y1,v=l.x-u.x1,p=l.y-u.y1,g=c*c+d*d,m=c,x=d;if(g>0){var y=(v*c+p*d)/g;m*=y,x*=y}f.x=u.x1+m,f.y=u.y1+x;var T=m*m+x*x;return T<=g&&m*c+x*d>=0&&s(l,f.x,f.y)};e.exports=h},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=i(96),n=i(488),h=function(u,l,f){if(f===void 0&&(f=[]),n(u,l))for(var c=l.getLineA(),d=l.getLineB(),v=l.getLineC(),p=l.getLineD(),g=[new s,new s,new s,new s],m=[a(c,u,g[0]),a(d,u,g[1]),a(v,u,g[2]),a(p,u,g[3])],x=0;x<4;x++)m[x]&&f.push(g[x]);return f};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){n===void 0&&(n=!1),h===void 0&&(h=[]);for(var u=s.x3-s.x1,l=s.y3-s.y1,f=s.x2-s.x1,c=s.y2-s.y1,d=u*u+l*l,v=u*f+l*c,p=f*f+c*c,g=d*p-v*v,m=g===0?0:1/g,x,y,T,S,C,E,P=s.x1,M=s.y1,R=0;R<a.length&&(T=a[R].x-P,S=a[R].y-M,C=u*T+l*S,E=f*T+c*S,x=(p*C-v*E)*m,y=(d*E-v*C)*m,!(x>=0&&y>=0&&x+y<1&&(h.push({x:a[R].x,y:a[R].y}),n)));R++);return h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=Math.cos(h),l=Math.sin(h),f=s.x1-a,c=s.y1-n;return s.x1=f*u-c*l+a,s.y1=f*l+c*u+n,f=s.x2-a,c=s.y2-n,s.x2=f*u-c*l+a,s.y2=f*l+c*u+n,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.height===0?NaN:s.width/s.height};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=Math.cos(h),l=Math.sin(h),f=s.x1-a,c=s.y1-n;return s.x1=f*u-c*l+a,s.y1=f*l+c*u+n,f=s.x2-a,c=s.y2-n,s.x2=f*u-c*l+a,s.y2=f*l+c*u+n,f=s.x3-a,c=s.y3-n,s.x3=f*u-c*l+a,s.y3=f*l+c*u+n,s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BUTTON_DOWN:i(1310),BUTTON_UP:i(1311),CONNECTED:i(1312),DISCONNECTED:i(1313),GAMEPAD_BUTTON_DOWN:i(1314),GAMEPAD_BUTTON_UP:i(1315)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(17),a=i(156),n=function(h,u){var l=h===void 0?a():s({},h);if(u)for(var f in u)u[f]!==void 0&&(l[f]=u[f]);return l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=i(408),c=new s({Extends:n,initialize:function(v,p,g,m){var x="xml";if(l(p)){var y=p;p=u(y,"key"),g=u(y,"url"),m=u(y,"xhrSettings"),x=u(y,"extension",x)}var T={type:"xml",cache:v.cacheManager.xml,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};n.call(this,v,T)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=f(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});h.register("xml",function(d,v,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new c(this,d[g]));else this.addFile(new c(this,d,v,p));return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=new s({Extends:n,initialize:function(d,v,p,g){var m="text",x="txt",y=d.cacheManager.text;if(l(v)){var T=v;v=u(T,"key"),p=u(T,"url"),g=u(T,"xhrSettings"),x=u(T,"extension",x),m=u(T,"type",m),y=u(T,"cache",y)}var S={type:m,cache:y,extension:x,responseType:"text",key:v,url:p,xhrSettings:g};n.call(this,d,S)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("text",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Acceleration:i(1368),Angular:i(1369),Bounce:i(1370),Debug:i(1371),Drag:i(1372),Enable:i(1373),Friction:i(1374),Gravity:i(1375),Immovable:i(1376),Mass:i(1377),OverlapCirc:i(523),OverlapRect:i(244),Pushable:i(1378),Size:i(1379),Velocity:i(1380)}},function(e,r){var i=function(s,a,n,h,u,l,f){l===void 0&&(l=!0),f===void 0&&(f=!1);var c=[],d=[],v=s.treeMinMax;if(v.minX=a,v.minY=n,v.maxX=a+h,v.maxY=n+u,f&&(d=s.staticTree.search(v)),l&&s.useTree)c=s.tree.search(v);else if(l){var p=s.bodies,g={position:{x:a,y:n},left:a,top:n,right:a+h,bottom:n+u,isCircle:!1},m=s.intersects;p.iterate(function(x){m(x,g)&&c.push(x)})}return d.concat(c)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COLLIDE:i(1381),OVERLAP:i(1382),PAUSE:i(1383),RESUME:i(1384),TILE_COLLIDE:i(1385),TILE_OVERLAP:i(1386),WORLD_BOUNDS:i(1387),WORLD_STEP:i(1388)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(62),a=function(n,h,u,l){var f=0,c=n.deltaAbsX()+h.deltaAbsX()+l;return n._dx===0&&h._dx===0?(n.embedded=!0,h.embedded=!0):n._dx>h._dx?(f=n.right-h.x,f>c&&!u||n.checkCollision.right===!1||h.checkCollision.left===!1?f=0:(n.touching.none=!1,n.touching.right=!0,h.touching.none=!1,h.touching.left=!0,h.physicsType===s.STATIC_BODY&&!u&&(n.blocked.none=!1,n.blocked.right=!0),n.physicsType===s.STATIC_BODY&&!u&&(h.blocked.none=!1,h.blocked.left=!0))):n._dx<h._dx&&(f=n.x-h.width-h.x,-f>c&&!u||n.checkCollision.left===!1||h.checkCollision.right===!1?f=0:(n.touching.none=!1,n.touching.left=!0,h.touching.none=!1,h.touching.right=!0,h.physicsType===s.STATIC_BODY&&!u&&(n.blocked.none=!1,n.blocked.left=!0),n.physicsType===s.STATIC_BODY&&!u&&(h.blocked.none=!1,h.blocked.right=!0))),n.overlapX=f,h.overlapX=f,f};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(62),a=function(n,h,u,l){var f=0,c=n.deltaAbsY()+h.deltaAbsY()+l;return n._dy===0&&h._dy===0?(n.embedded=!0,h.embedded=!0):n._dy>h._dy?(f=n.bottom-h.y,f>c&&!u||n.checkCollision.down===!1||h.checkCollision.up===!1?f=0:(n.touching.none=!1,n.touching.down=!0,h.touching.none=!1,h.touching.up=!0,h.physicsType===s.STATIC_BODY&&!u&&(n.blocked.none=!1,n.blocked.down=!0),n.physicsType===s.STATIC_BODY&&!u&&(h.blocked.none=!1,h.blocked.up=!0))):n._dy<h._dy&&(f=n.y-h.bottom,-f>c&&!u||n.checkCollision.up===!1||h.checkCollision.down===!1?f=0:(n.touching.none=!1,n.touching.up=!0,h.touching.none=!1,h.touching.down=!0,h.physicsType===s.STATIC_BODY&&!u&&(n.blocked.none=!1,n.blocked.up=!0),n.physicsType===s.STATIC_BODY&&!u&&(h.blocked.none=!1,h.blocked.down=!0))),n.overlapY=f,h.overlapY=f,f};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return!(a.right<=s.left||a.bottom<=s.top||a.position.x>=s.right||a.position.y>=s.bottom)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bounce:i(1495),Collision:i(1496),Force:i(1497),Friction:i(1498),Gravity:i(1499),Mass:i(1500),Sensor:i(1501),SetBody:i(1502),Sleep:i(1503),Static:i(1520),Transform:i(1521),Velocity:i(1522)}},function(e,r){var i={};e.exports=i,function(){i.create=function(s,a){var n=s.bodyA,h=s.bodyB,u={id:i.id(n,h),bodyA:n,bodyB:h,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||h.isSensor,timeCreated:a,timeUpdated:a,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(u,s,a),u},i.update=function(s,a,n){if(s.collision=a,a.collided){var h=a.supports,u=s.activeContacts,l=a.parentA,f=a.parentB;s.inverseMass=l.inverseMass+f.inverseMass,s.friction=Math.min(l.friction,f.friction),s.frictionStatic=Math.max(l.frictionStatic,f.frictionStatic),s.restitution=Math.max(l.restitution,f.restitution),s.slop=Math.max(l.slop,f.slop);for(var c=0;c<h.length;c++)u[c]=h[c].contact;var d=h.length;d<u.length&&(u.length=d),s.separation=a.depth,i.setActive(s,!0,n)}else s.isActive===!0&&i.setActive(s,!1,n)},i.setActive=function(s,a,n){a?(s.isActive=!0,s.timeUpdated=n):(s.isActive=!1,s.activeContacts.length=0)},i.id=function(s,a){return s.id<a.id?"A"+s.id+"B"+a.id:"A"+a.id+"B"+s.id}}()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CalculateFacesAt:i(252),CalculateFacesWithin:i(63),CheckIsoBounds:i(541),Copy:i(1420),CreateFromTiles:i(1421),CullBounds:i(543),CullTiles:i(544),Fill:i(1422),FilterTiles:i(1423),FindByIndex:i(1424),FindTile:i(1425),ForEachTile:i(1426),GetCullTilesFunction:i(1427),GetTileAt:i(158),GetTileAtWorldXY:i(1428),GetTilesWithin:i(26),GetTilesWithinShape:i(1429),GetTilesWithinWorldXY:i(529),GetTileToWorldXFunction:i(1430),GetTileToWorldXYFunction:i(1431),GetTileToWorldYFunction:i(1432),GetWorldToTileXFunction:i(1433),GetWorldToTileXYFunction:i(1434),GetWorldToTileYFunction:i(1435),HasTileAt:i(562),HasTileAtWorldXY:i(1436),HexagonalCullBounds:i(546),HexagonalCullTiles:i(545),HexagonalTileToWorldXY:i(550),HexagonalTileToWorldY:i(554),HexagonalWorldToTileXY:i(556),HexagonalWorldToTileY:i(560),IsInLayerBounds:i(119),IsometricCullTiles:i(547),IsometricTileToWorldXY:i(551),IsometricWorldToTileXY:i(557),PutTileAt:i(257),PutTileAtWorldXY:i(1437),PutTilesAt:i(1438),Randomize:i(1439),RemoveTileAt:i(563),RemoveTileAtWorldXY:i(1440),RenderDebug:i(1441),ReplaceByIndex:i(542),RunCull:i(159),SetCollision:i(1442),SetCollisionBetween:i(1443),SetCollisionByExclusion:i(1444),SetCollisionByProperty:i(1445),SetCollisionFromCollisionGroup:i(1446),SetLayerCollisionIndex:i(160),SetTileCollision:i(72),SetTileIndexCallback:i(1447),SetTileLocationCallback:i(1448),Shuffle:i(1449),StaggeredCullBounds:i(549),StaggeredCullTiles:i(548),StaggeredTileToWorldXY:i(552),StaggeredTileToWorldY:i(555),StaggeredWorldToTileXY:i(558),StaggeredWorldToTileY:i(561),SwapByIndex:i(1450),TileToWorldX:i(253),TileToWorldXY:i(553),TileToWorldY:i(254),WeightedRandomize:i(1451),WorldToTileX:i(255),WorldToTileXY:i(559),WorldToTileY:i(256)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(158),a=function(n,h,u){var l=s(n,h,!0,u),f=s(n,h-1,!0,u),c=s(n,h+1,!0,u),d=s(n-1,h,!0,u),v=s(n+1,h,!0,u),p=l&&l.collides;return p&&(l.faceTop=!0,l.faceBottom=!0,l.faceLeft=!0,l.faceRight=!0),f&&f.collides&&(p&&(l.faceTop=!1),f.faceBottom=!p),c&&c.collides&&(p&&(l.faceBottom=!1),c.faceTop=!p),d&&d.collides&&(p&&(l.faceLeft=!1),d.faceRight=!p),v&&v.collides&&(p&&(l.faceRight=!1),v.faceLeft=!p),l&&!l.collides&&l.resetFaces(),l};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=n.baseTileWidth,u=n.tilemapLayer,l=0;return u&&(a||(a=u.scene.cameras.main),l=u.x+a.scrollX*(1-u.scrollFactorX),h*=u.scaleX),l+s*h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=n.baseTileHeight,u=n.tilemapLayer,l=0;return u&&(a||(a=u.scene.cameras.main),l=u.y+a.scrollY*(1-u.scrollFactorY),h*=u.scaleY),l+s*h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){a===void 0&&(a=!0);var u=h.baseTileWidth,l=h.tilemapLayer;return l&&(n||(n=l.scene.cameras.main),s=s-(l.x+n.scrollX*(1-l.scrollFactorX)),u*=l.scaleX),a?Math.floor(s/u):s/u};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){a===void 0&&(a=!0);var u=h.baseTileHeight,l=h.tilemapLayer;return l&&(n||(n=l.scene.cameras.main),s=s-(l.y+n.scrollY*(1-l.scrollFactorY)),u*=l.scaleY),a?Math.floor(s/u):s/u};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(85),a=i(119),n=i(252),h=i(72),u=function(l,f,c,d,v){if(d===void 0&&(d=!0),!a(f,c,v))return null;var p=v.data[c][f],g=p&&p.collides;if(l instanceof s)v.data[c][f]===null&&(v.data[c][f]=new s(v,l.index,f,c,v.tileWidth,v.tileHeight)),v.data[c][f].copy(l);else{var m=l;v.data[c][f]===null?v.data[c][f]=new s(v,m,f,c,v.tileWidth,v.tileHeight):v.data[c][f].index=m}var x=v.data[c][f],y=v.collideIndexes.indexOf(x.index)!==-1;return h(x,y),d&&g!==x.collides&&n(f,c,v),x};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),a=function(n){return n=n.toLowerCase(),n==="isometric"?s.ISOMETRIC:n==="staggered"?s.STAGGERED:n==="hexagonal"?s.HEXAGONAL:s.ORTHOGONAL};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(40),a=i(120),n=i(121),h=i(85),u=function(l,f,c,d,v){for(var p=new a({tileWidth:c,tileHeight:d}),g=new n({name:l,tileWidth:c,tileHeight:d,format:s.ARRAY_2D,layers:[p]}),m=[],x=f.length,y=0,T=0;T<f.length;T++){m[T]=[];for(var S=f[T],C=0;C<S.length;C++){var E=parseInt(S[C],10);isNaN(E)||E===-1?m[T][C]=v?null:new h(p,-1,C,T,c,d):m[T][C]=new h(p,E,C,T,c,d)}y===0&&(y=S.length)}return g.width=p.width=y,g.height=p.height=x,g.widthInPixels=p.widthInPixels=y*c,g.heightInPixels=p.heightInPixels=x*d,p.data=m,g};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(571),a=i(261),n=function(l){return{x:l.x,y:l.y}},h=["id","name","type","rotation","properties","visible","x","y","width","height"],u=function(l,f,c){f===void 0&&(f=0),c===void 0&&(c=0);var d=s(l,h);if(d.x+=f,d.y+=c,l.gid){var v=a(l.gid);d.gid=v.gid,d.flippedHorizontal=v.flippedHorizontal,d.flippedVertical=v.flippedVertical,d.flippedAntiDiagonal=v.flippedAntiDiagonal}else l.polyline?d.polyline=l.polyline.map(n):l.polygon?d.polygon=l.polygon.map(n):l.ellipse?d.ellipse=l.ellipse:l.text?d.text=l.text:l.point?d.point=!0:d.rectangle=!0;return d};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=2147483648,s=1073741824,a=536870912,n=function(h){var u=Boolean(h&i),l=Boolean(h&s),f=Boolean(h&a);h=h&~(i|s|a);var c=0,d=!1;return u&&l&&f?(c=Math.PI/2,d=!0):u&&l&&!f?(c=Math.PI,d=!1):u&&!l&&f?(c=Math.PI/2,d=!1):u&&!l&&!f?(c=0,d=!0):!u&&l&&f?(c=3*Math.PI/2,d=!1):!u&&l&&!f?(c=Math.PI,d=!0):!u&&!l&&f?(c=3*Math.PI/2,d=!0):!u&&!l&&!f&&(c=0,d=!1),{gid:h,flippedHorizontal:u,flippedVertical:l,flippedAntiDiagonal:f,rotation:c,flipped:d}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(40),a=i(121),n=i(564),h=i(580),u=function(l,f,c,d,v,p,g,m){c===void 0&&(c=32),d===void 0&&(d=32),v===void 0&&(v=10),p===void 0&&(p=10),m===void 0&&(m=!1);var x=null;if(Array.isArray(g)){var y=f!==void 0?f:"map";x=n(y,s.ARRAY_2D,g,c,d,m)}else if(f!==void 0){var T=l.cache.tilemap.get(f);T?x=n(f,T.format,T.data,c,d,m):console.warn("No map data found for key "+f)}return x===null&&(x=new a({tileWidth:c,tileHeight:d,width:v,height:p})),new h(l,x)};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),a=function(n){var h=s(n,"targets",null);return h===null||(typeof h=="function"&&(h=h.call()),Array.isArray(h)||(h=[h])),h};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(u){return!!u.getActive&&typeof u.getActive=="function"}function s(u){return!!u.getStart&&typeof u.getStart=="function"}function a(u){return!!u.getEnd&&typeof u.getEnd=="function"}function n(u){return s(u)||a(u)||i(u)}var h=function(u,l){var f,c=function(E,P,M){return M},d=function(E,P,M){return M},v=null,p=typeof l;if(p==="number")c=function(){return l};else if(p==="string"){var g=l[0],m=parseFloat(l.substr(2));switch(g){case"+":c=function(E,P,M){return M+m};break;case"-":c=function(E,P,M){return M-m};break;case"*":c=function(E,P,M){return M*m};break;case"/":c=function(E,P,M){return M/m};break;default:c=function(){return parseFloat(l)}}}else if(p==="function")c=l;else if(p==="object")if(n(l))i(l)&&(v=l.getActive),a(l)&&(c=l.getEnd),s(l)&&(d=l.getStart);else if(l.hasOwnProperty("value"))f=h(u,l.value);else{var x=l.hasOwnProperty("to"),y=l.hasOwnProperty("from"),T=l.hasOwnProperty("start");if(x&&(y||T)){if(f=h(u,l.to),T){var S=h(u,l.start);f.getActive=S.getEnd}if(y){var C=h(u,l.from);f.getStart=C.getEnd}}}return f||(f={getActive:v,getEnd:c,getStart:d}),f};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(9),n=i(267),h=i(16),u=i(5),l=i(100),f=i(14),c=new s({Extends:a,initialize:function(v,p,g){a.call(this),this.parent=v,this.parentIsTimeline=v.hasOwnProperty("isTimeline"),this.data=p,this.totalData=p.length,this.targets=g,this.totalTargets=g.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=l.PENDING_ADD,this._pausedState=l.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(d){return d===void 0&&(d=0),this.data[d].current},setTimeScale:function(d){return this.timeScale=d,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===l.ACTIVE},isPaused:function(){return this.state===l.PAUSED},hasTarget:function(d){return this.targets.indexOf(d)!==-1},updateTo:function(d,v,p){p===void 0&&(p=!1);for(var g=0;g<this.totalData;g++){var m=this.data[g];m.key===d&&(m.end=v,p&&(m.start=m.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===l.ACTIVE?this.seek(0):this.state===l.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===l.PENDING_ADD?this:this.play()},calcDuration:function(){for(var d=0,v=f.MAX_SAFE_INTEGER,p=this.data,g=0;g<this.totalData;g++){var m=p[g];m.t1=m.duration+m.hold,m.yoyo&&(m.t1+=m.duration),m.t2=m.t1+m.repeatDelay,m.totalDuration=m.delay+m.t1,m.repeat===-1?m.totalDuration+=m.t2*999999999999:m.repeat>0&&(m.totalDuration+=m.t2*m.repeat),m.totalDuration>d&&(d=m.totalDuration),m.delay<v&&(v=m.delay)}this.duration=Math.max(d,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=v},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=l.PENDING_ADD,this._pausedState=l.INIT,!1;for(var d=this.data,v=this.totalTargets,p=0;p<this.totalData;p++){var g=d[p],m=g.target,x=g.gen,y=g.key,T=g.index;g.delay=x.delay(m,y,0,T,v,this),g.duration=Math.max(x.duration(m,y,0,T,v,this),.001),g.hold=x.hold(m,y,0,T,v,this),g.repeat=x.repeat(m,y,0,T,v,this),g.repeatDelay=x.repeatDelay(m,y,0,T,v,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=l.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(n.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=l.LOOP_DELAY):(this.state=l.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=l.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===l.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=l.PAUSED,this)},play:function(d){d===void 0&&(d=!1);var v=this.state;return v===l.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=l.ACTIVE,this):v===l.ACTIVE||v===l.PENDING_ADD&&this._pausedState===l.PENDING_ADD?this:!this.parentIsTimeline&&(v===l.PENDING_REMOVE||v===l.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(d),this.calculatedOffset===0?this.state=l.ACTIVE:(this.countdown=this.calculatedOffset,this.state=l.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(d),this.state=l.ACTIVE,this.makeActive()),this)},resetTweenData:function(d){for(var v=this.data,p=this.totalData,g=this.totalTargets,m=0;m<p;m++){var x=v[m],y=x.target,T=x.key,S=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,d?(x.start=x.getStartValue(y,T,x.start,S,g,this),x.end=x.getEndValue(y,T,x.end,S,g,this),x.current=x.start,x.state=l.PLAYING_FORWARD):x.state=l.PENDING_RENDER,x.delay>0&&(x.elapsed=x.delay,x.state=l.DELAY),x.getActiveValue&&(y[T]=x.getActiveValue(x.target,x.key,x.start))}},resume:function(){return this.state===l.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(d,v){v===void 0&&(v=16.6),this.state===l.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var p=this.data,g=this.totalTargets,m=0;m<this.totalData;m++){var x=p[m],y=x.target,T=x.gen,S=x.key,C=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,x.delay=T.delay(y,S,0,C,g,this),x.duration=Math.max(T.duration(y,S,0,C,g,this),.001),x.hold=T.hold(y,S,0,C,g,this),x.repeat=T.repeat(y,S,0,C,g,this),x.repeatDelay=T.repeatDelay(y,S,0,C,g,this),x.current=x.start,x.state=l.PLAYING_FORWARD,this.updateTweenData(this,x,0,C,g),x.delay>0&&(x.elapsed=x.delay,x.state=l.DELAY)}this.calcDuration();var E=!1;this.state===l.PAUSED&&(E=!0,this.state=l.ACTIVE),this.isSeeking=!0;do this.update(0,v);while(this.totalProgress<d);return this.isSeeking=!1,E&&(this.state=l.PAUSED),this},setCallback:function(d,v,p,g){return this.callbacks[d]={func:v,scope:g,params:p},this},complete:function(d){return d===void 0&&(d=0),d?(this.state=l.COMPLETE_DELAY,this.countdown=d):(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(d){return this.state===l.ACTIVE&&d!==void 0&&this.seek(d),this.state!==l.REMOVED&&((this.state===l.PAUSED||this.state===l.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(n.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=l.PENDING_REMOVE),this},update:function(d,v){if(this.state===l.PAUSED)return!1;switch(this.useFrames&&(v=1*this.parent.timeScale),v*=this.timeScale,this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case l.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=v,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(n.TWEEN_START,this.callbacks.onStart)));for(var p=!1,g=0;g<this.totalData;g++){var m=this.data[g];this.updateTweenData(this,m,v)&&(p=!0)}p||this.nextState();break;case l.LOOP_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=l.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop));break;case l.OFFSET_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=l.ACTIVE);break;case l.COMPLETE_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===l.PENDING_REMOVE},dispatchTweenDataEvent:function(d,v,p){this.isSeeking||(this.emit(d,this,p.key,p.target,p.current,p.previous),v&&(v.params[1]=p.target,v.func.apply(v.scope,v.params)))},dispatchTweenEvent:function(d,v){this.isSeeking||(this.emit(d,this,this.targets),v&&(v.params[1]=this.targets,v.func.apply(v.scope,v.params)))},setStateFromEnd:function(d,v,p){return v.yoyo?(v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),this.dispatchTweenDataEvent(n.TWEEN_YOYO,d.callbacks.onYoyo,v),v.start=v.getStartValue(v.target,v.key,v.start,v.index,d.totalTargets,d),l.PLAYING_BACKWARD):v.repeatCounter>0?(v.repeatCounter--,v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),v.start=v.getStartValue(v.target,v.key,v.start,v.index,d.totalTargets,d),v.end=v.getEndValue(v.target,v.key,v.start,v.index,d.totalTargets,d),v.repeatDelay>0?(v.elapsed=v.repeatDelay-p,v.current=v.start,v.target[v.key]=v.current,l.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,d.callbacks.onRepeat,v),l.PLAYING_FORWARD)):l.COMPLETE},setStateFromStart:function(d,v,p){return v.repeatCounter>0?(v.repeatCounter--,v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),v.end=v.getEndValue(v.target,v.key,v.start,v.index,d.totalTargets,d),v.repeatDelay>0?(v.elapsed=v.repeatDelay-p,v.current=v.start,v.target[v.key]=v.current,l.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,d.callbacks.onRepeat,v),l.PLAYING_FORWARD)):l.COMPLETE},updateTweenData:function(d,v,p){var g=v.target;switch(v.state){case l.PLAYING_FORWARD:case l.PLAYING_BACKWARD:if(!g){v.state=l.COMPLETE;break}var m=v.elapsed,x=v.duration,y=0;m+=p,m>x&&(y=m-x,m=x);var T=v.state===l.PLAYING_FORWARD,S=m/x;if(v.elapsed=m,v.progress=S,v.previous=v.current,S===1)T?(v.current=v.end,g[v.key]=v.end,v.hold>0?(v.elapsed=v.hold-y,v.state=l.HOLD_DELAY):v.state=this.setStateFromEnd(d,v,y)):(v.current=v.start,g[v.key]=v.start,v.state=this.setStateFromStart(d,v,y));else{var C=T?v.ease(S):v.ease(1-S);v.current=v.start+(v.end-v.start)*C,g[v.key]=v.current}this.dispatchTweenDataEvent(n.TWEEN_UPDATE,d.callbacks.onUpdate,v);break;case l.DELAY:v.elapsed-=p,v.elapsed<=0&&(v.elapsed=Math.abs(v.elapsed),v.state=l.PENDING_RENDER);break;case l.REPEAT_DELAY:v.elapsed-=p,v.elapsed<=0&&(v.elapsed=Math.abs(v.elapsed),v.state=l.PLAYING_FORWARD,this.dispatchTweenDataEvent(n.TWEEN_REPEAT,d.callbacks.onRepeat,v));break;case l.HOLD_DELAY:v.elapsed-=p,v.elapsed<=0&&(v.state=this.setStateFromEnd(d,v,Math.abs(v.elapsed)));break;case l.PENDING_RENDER:g?(v.start=v.getStartValue(g,v.key,g[v.key],v.index,d.totalTargets,d),v.end=v.getEndValue(g,v.key,v.start,v.index,d.totalTargets,d),v.current=v.start,g[v.key]=v.start,v.state=l.PLAYING_FORWARD):v.state=l.COMPLETE;break}return v.state!==l.COMPLETE}});c.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],u.register("tween",function(d){return this.scene.sys.tweens.add(d)}),h.register("tween",function(d){return this.scene.sys.tweens.create(d)}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TIMELINE_COMPLETE:i(1466),TIMELINE_LOOP:i(1467),TIMELINE_PAUSE:i(1468),TIMELINE_RESUME:i(1469),TIMELINE_START:i(1470),TIMELINE_UPDATE:i(1471),TWEEN_ACTIVE:i(1472),TWEEN_COMPLETE:i(1473),TWEEN_LOOP:i(1474),TWEEN_REPEAT:i(1475),TWEEN_START:i(1476),TWEEN_STOP:i(1477),TWEEN_UPDATE:i(1478),TWEEN_YOYO:i(1479)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u,l,f,c,d,v,p,g,m,x,y){return{target:s,index:a,key:n,getActiveValue:l,getEndValue:h,getStartValue:u,ease:f,duration:0,totalDuration:0,delay:0,yoyo:v,hold:0,repeat:0,repeatDelay:0,flipX:x,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:c,duration:d,hold:p,repeat:g,repeatDelay:m},state:0}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(68),a=function(n){return s(n,-Math.PI,Math.PI)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(68),a=function(n){return s(n,-180,180)};e.exports=a},function(e,r,i){var s={};e.exports=s;var a=i(83),n=i(32);(function(){s.fromVertices=function(h){for(var u={},l=0;l<h.length;l++){var f=(l+1)%h.length,c=a.normalise({x:h[f].y-h[l].y,y:h[l].x-h[f].x}),d=c.y===0?1/0:c.x/c.y;d=d.toFixed(3).toString(),u[d]=c}return n.values(u)},s.rotate=function(h,u){if(u!==0)for(var l=Math.cos(u),f=Math.sin(u),c=0;c<h.length;c++){var d=h[c],v;v=d.x*l-d.y*f,d.y=d.x*f+d.y*l,d.x=v}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_ADD:i(1504),AFTER_REMOVE:i(1505),AFTER_UPDATE:i(1506),BEFORE_ADD:i(1507),BEFORE_REMOVE:i(1508),BEFORE_UPDATE:i(1509),COLLISION_ACTIVE:i(1510),COLLISION_END:i(1511),COLLISION_START:i(1512),DRAG_END:i(1513),DRAG:i(1514),DRAG_START:i(1515),PAUSE:i(1516),RESUME:i(1517),SLEEP_END:i(1518),SLEEP_START:i(1519)}},function(e,r,i){var s={};e.exports=s;var a=i(274),n=i(250),h=i(84);(function(){s.collisions=function(u,l){for(var f=[],c=l.pairs.table,d=l.metrics,v=0;v<u.length;v++){var p=u[v][0],g=u[v][1];if(!((p.isStatic||p.isSleeping)&&(g.isStatic||g.isSleeping))&&!!s.canCollide(p.collisionFilter,g.collisionFilter)&&(d.midphaseTests+=1,h.overlaps(p.bounds,g.bounds)))for(var m=p.parts.length>1?1:0;m<p.parts.length;m++)for(var x=p.parts[m],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(x===p&&T===g||h.overlaps(x.bounds,T.bounds)){var S=n.id(x,T),C=c[S],E;C&&C.isActive?E=C.collision:E=null;var P=a.collides(x,T,E);d.narrowphaseTests+=1,P.reused&&(d.narrowReuseCount+=1),P.collided&&(f.push(P),d.narrowDetections+=1)}}}return f},s.canCollide=function(u,l){return u.group===l.group&&u.group!==0?u.group>0:(u.mask&l.category)!==0&&(l.mask&u.category)!==0}})()},function(e,r,i){var s={};e.exports=s;var a=i(64),n=i(83);(function(){s.collides=function(h,u,l){var f,c,d,v,p=!1;if(l){var g=h.parent,m=u.parent,x=g.speed*g.speed+g.angularSpeed*g.angularSpeed+m.speed*m.speed+m.angularSpeed*m.angularSpeed;p=l&&l.collided&&x<.2,v=l}else v={collided:!1,bodyA:h,bodyB:u};if(l&&p){var y=v.axisBody,T=y===h?u:h,S=[y.axes[l.axisNumber]];if(d=s._overlapAxes(y.vertices,T.vertices,S),v.reused=!0,d.overlap<=0)return v.collided=!1,v}else{if(f=s._overlapAxes(h.vertices,u.vertices,h.axes),f.overlap<=0||(c=s._overlapAxes(u.vertices,h.vertices,u.axes),c.overlap<=0))return v.collided=!1,v;f.overlap<c.overlap?(d=f,v.axisBody=h):(d=c,v.axisBody=u),v.axisNumber=d.axisNumber}v.bodyA=h.id<u.id?h:u,v.bodyB=h.id<u.id?u:h,v.collided=!0,v.depth=d.overlap,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent,h=v.bodyA,u=v.bodyB,n.dot(d.axis,n.sub(u.position,h.position))<0?v.normal={x:d.axis.x,y:d.axis.y}:v.normal={x:-d.axis.x,y:-d.axis.y},v.tangent=n.perp(v.normal),v.penetration=v.penetration||{},v.penetration.x=v.normal.x*v.depth,v.penetration.y=v.normal.y*v.depth;var C=s._findSupports(h,u,v.normal),E=[];if(a.contains(h.vertices,C[0])&&E.push(C[0]),a.contains(h.vertices,C[1])&&E.push(C[1]),E.length<2){var P=s._findSupports(u,h,n.neg(v.normal));a.contains(u.vertices,P[0])&&E.push(P[0]),E.length<2&&a.contains(u.vertices,P[1])&&E.push(P[1])}return E.length<1&&(E=[C[0]]),v.supports=E,v},s._overlapAxes=function(h,u,l){for(var f=n._temp[0],c=n._temp[1],d={overlap:Number.MAX_VALUE},v,p,g=0;g<l.length;g++){if(p=l[g],s._projectToAxis(f,h,p),s._projectToAxis(c,u,p),v=Math.min(f.max-c.min,c.max-f.min),v<=0)return d.overlap=v,d;v<d.overlap&&(d.overlap=v,d.axis=p,d.axisNumber=g)}return d},s._projectToAxis=function(h,u,l){for(var f=n.dot(u[0],l),c=f,d=1;d<u.length;d+=1){var v=n.dot(u[d],l);v>c?c=v:v<f&&(f=v)}h.min=f,h.max=c},s._findSupports=function(h,u,l){for(var f=Number.MAX_VALUE,c=n._temp[0],d=u.vertices,v=h.position,p,g,m,x,y=0;y<d.length;y++)g=d[y],c.x=g.x-v.x,c.y=g.y-v.y,p=-n.dot(l,c),p<f&&(f=p,m=g);var T=m.index-1>=0?m.index-1:d.length-1;g=d[T],c.x=g.x-v.x,c.y=g.y-v.y,f=-n.dot(l,c),x=g;var S=(m.index+1)%d.length;return g=d[S],c.x=g.x-v.x,c.y=g.y-v.y,p=-n.dot(l,c),p<f&&(x=g),[m,x]}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AlignTo:i(601),Angle:i(602),Call:i(603),GetFirst:i(604),GetLast:i(605),GridAlign:i(606),IncAlpha:i(678),IncX:i(679),IncXY:i(680),IncY:i(681),PlaceOnCircle:i(682),PlaceOnEllipse:i(683),PlaceOnLine:i(684),PlaceOnRectangle:i(685),PlaceOnTriangle:i(686),PlayAnimation:i(687),PropertyValueInc:i(46),PropertyValueSet:i(27),RandomCircle:i(688),RandomEllipse:i(689),RandomLine:i(690),RandomRectangle:i(691),RandomTriangle:i(692),Rotate:i(693),RotateAround:i(694),RotateAroundDistance:i(695),ScaleX:i(696),ScaleXY:i(697),ScaleY:i(698),SetAlpha:i(699),SetBlendMode:i(700),SetDepth:i(701),SetHitArea:i(702),SetOrigin:i(703),SetRotation:i(704),SetScale:i(705),SetScaleX:i(706),SetScaleY:i(707),SetScrollFactor:i(708),SetScrollFactorX:i(709),SetScrollFactorY:i(710),SetTint:i(711),SetVisible:i(712),SetX:i(713),SetXY:i(714),SetY:i(715),ShiftPosition:i(716),Shuffle:i(717),SmootherStep:i(718),SmoothStep:i(719),Spread:i(720),ToggleVisible:i(721),WrapInRectangle:i(722)}},function(e,r,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(123),a=[];a[s.BOTTOM_CENTER]=i(277),a[s.BOTTOM_LEFT]=i(278),a[s.BOTTOM_RIGHT]=i(279),a[s.LEFT_BOTTOM]=i(280),a[s.LEFT_CENTER]=i(281),a[s.LEFT_TOP]=i(282),a[s.RIGHT_BOTTOM]=i(283),a[s.RIGHT_CENTER]=i(284),a[s.RIGHT_TOP]=i(285),a[s.TOP_CENTER]=i(286),a[s.TOP_LEFT]=i(287),a[s.TOP_RIGHT]=i(288);var n=function(h,u,l,f,c){return a[l](h,u,f,c)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),a=i(87),n=i(88),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),n(l,a(f)+c),h(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),a=i(43),n=i(53),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),n(l,a(f)-c),h(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),a=i(44),n=i(54),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),n(l,a(f)+c),h(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),a=i(43),n=i(55),h=i(54),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,a(f)-c),n(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(89),a=i(43),n=i(90),h=i(54),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,a(f)-c),n(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(43),a=i(45),n=i(54),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),n(l,s(f)-c),h(l,a(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),a=i(44),n=i(55),h=i(53),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,a(f)+c),n(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(89),a=i(44),n=i(90),h=i(53),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,a(f)+c),n(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(44),a=i(45),n=i(53),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),n(l,s(f)+c),h(l,a(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(87),a=i(45),n=i(55),h=i(88),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,s(f)+c),n(l,a(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(43),a=i(45),n=i(55),h=i(53),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,s(f)-c),n(l,a(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(44),a=i(45),n=i(55),h=i(54),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,s(f)+c),n(l,a(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(123),a=[];a[s.BOTTOM_CENTER]=i(290),a[s.BOTTOM_LEFT]=i(291),a[s.BOTTOM_RIGHT]=i(292),a[s.CENTER]=i(293),a[s.LEFT_CENTER]=i(295),a[s.RIGHT_CENTER]=i(296),a[s.TOP_CENTER]=i(297),a[s.TOP_LEFT]=i(298),a[s.TOP_RIGHT]=i(299),a[s.LEFT_BOTTOM]=a[s.BOTTOM_LEFT],a[s.LEFT_TOP]=a[s.TOP_LEFT],a[s.RIGHT_BOTTOM]=a[s.BOTTOM_RIGHT],a[s.RIGHT_TOP]=a[s.TOP_RIGHT];var n=function(h,u,l,f,c){return a[l](h,u,f,c)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),a=i(87),n=i(55),h=i(88),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,a(f)+c),n(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),a=i(43),n=i(55),h=i(53),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,a(f)-c),n(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),a=i(44),n=i(55),h=i(54),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,a(f)+c),n(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(294),a=i(87),n=i(89),h=function(u,l,f,c){return f===void 0&&(f=0),c===void 0&&(c=0),s(u,a(l)+f,n(l)+c),u};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(88),a=i(90),n=function(h,u,l){return s(h,u),a(h,l)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(89),a=i(43),n=i(90),h=i(53),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,a(f)-c),n(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(89),a=i(44),n=i(90),h=i(54),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,a(f)+c),n(l,s(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(87),a=i(45),n=i(88),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),n(l,s(f)+c),h(l,a(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(43),a=i(45),n=i(53),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),n(l,s(f)-c),h(l,a(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(44),a=i(45),n=i(54),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),n(l,s(f)+c),h(l,a(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(169),a=i(98),n=i(14),h=i(4),u=function(l,f,c){c===void 0&&(c=new h);var d=a(f,0,n.PI2);return s(l,d,c)};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(302),a=i(169),n=i(98),h=i(14),u=function(l,f,c,d){d===void 0&&(d=[]),!f&&c>0&&(f=s(l)/c);for(var v=0;v<f;v++){var p=n(v/f,0,h.PI2);d.push(a(l,p))}return d};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return 2*(Math.PI*s.radius)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=2,n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h){return h===void 0&&(h=1),this.alpha=h,this},alpha:{get:function(){return this._alpha},set:function(h){var u=s(h,0,1);this._alpha=u,u===0?this.renderFlags&=~a:this.renderFlags|=a}}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),a={_blendMode:s.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(n){typeof n=="string"&&(n=s[n]),n|=0,n>=-1&&(this._blendMode=n)}},setBlendMode:function(n){return this.blendMode=n,this}};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_depth:0,depth:{get:function(){return this._depth},set:function(s){this.displayList&&this.displayList.queueDepthSort(),this._depth=s}},setDepth:function(s){return s===void 0&&(s=0),this.depth=s,this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(171),a=i(130),n=function(h,u,l,f){f===void 0&&(f=[]),!u&&l>0&&(u=a(h)/l);for(var c=0;c<u;c++){var d=c/u;f.push(s(h,d))}return f};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h,u){return u===void 0&&(u=new s),u.x=n.x1+(n.x2-n.x1)*h,u.y=n.y1+(n.y2-n.y1)*h,u};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=Math.cos(h),l=Math.sin(h),f=s.x-a,c=s.y-n;return s.x=f*u-c*l+a,s.y=f*l+c*u+n,s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(310),a=i(311),n={mask:null,setMask:function(h){return this.mask=h,this},clearMask:function(h){return h===void 0&&(h=!1),h&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(h){return h===void 0&&(this.texture||this.shader)&&(h=this),new s(this.scene,h)},createGeometryMask:function(h){return h===void 0&&this.type==="Graphics"&&(h=this),new a(this.scene,h)}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(22),n=i(91),h=new s({initialize:function(l,f){var c=l.sys.renderer;this.renderer=c,this.bitmapMask=f,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),l.sys.game.events.on(a.CONTEXT_RESTORED,this.createMask,this),c&&c.on(n.RESIZE,this.createMask,this)},createMask:function(){var u=this.renderer;if(!(!u||!u.gl)){this.mainTexture&&this.clearMask();var l=u.width,f=u.height,c=(l&l-1)===0&&(f&f-1)===0,d=u.gl,v=c?d.REPEAT:d.CLAMP_TO_EDGE,p=d.LINEAR;this.mainTexture=u.createTexture2D(0,p,p,v,v,d.RGBA,null,l,f),this.maskTexture=u.createTexture2D(0,p,p,v,v,d.RGBA,null,l,f),this.mainFramebuffer=u.createFramebuffer(l,f,this.mainTexture,!0),this.maskFramebuffer=u.createFramebuffer(l,f,this.maskTexture,!0)}},clearMask:function(){var u=this.renderer;!u||!u.gl||!this.mainTexture||(u.deleteTexture(this.mainTexture),u.deleteTexture(this.maskTexture),u.deleteFramebuffer(this.mainFramebuffer),u.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(u){this.bitmapMask=u},preRenderWebGL:function(u,l,f){u.pipelines.BITMAPMASK_PIPELINE.beginMask(this,l,f)},postRenderWebGL:function(u,l){u.pipelines.BITMAPMASK_PIPELINE.endMask(this,l)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(n.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u){this.geometryMask=u,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(n){return this.geometryMask=n,this},setInvertAlpha:function(n){return n===void 0&&(n=!0),this.invertAlpha=n,this},preRenderWebGL:function(n,h,u){var l=n.gl;n.flush(),n.maskStack.length===0&&(l.enable(l.STENCIL_TEST),l.clear(l.STENCIL_BUFFER_BIT),n.maskCount=0),n.currentCameraMask.mask!==this&&(n.currentMask.mask=this),n.maskStack.push({mask:this,camera:u}),this.applyStencil(n,u,!0),n.maskCount++},applyStencil:function(n,h,u){var l=n.gl,f=this.geometryMask,c=n.maskCount;l.colorMask(!1,!1,!1,!1),u?(l.stencilFunc(l.EQUAL,c,255),l.stencilOp(l.KEEP,l.KEEP,l.INCR)):(l.stencilFunc(l.EQUAL,c+1,255),l.stencilOp(l.KEEP,l.KEEP,l.DECR)),f.renderWebGL(n,f,h),n.flush(),l.colorMask(!0,!0,!0,!0),l.stencilOp(l.KEEP,l.KEEP,l.KEEP),u?this.invertAlpha?l.stencilFunc(l.NOTEQUAL,c+1,255):l.stencilFunc(l.EQUAL,c+1,255):this.invertAlpha?l.stencilFunc(l.NOTEQUAL,c,255):l.stencilFunc(l.EQUAL,c,255)},postRenderWebGL:function(n){var h=n.gl;n.maskStack.pop(),n.maskCount--,n.flush();var u=n.currentMask;if(n.maskStack.length===0)u.mask=null,h.disable(h.STENCIL_TEST);else{var l=n.maskStack[n.maskStack.length-1];l.mask.applyStencil(n,l.camera,!1),n.currentCameraMask.mask!==l.mask?(u.mask=l.mask,u.camera=l.camera):u.mask=null}},preRenderCanvas:function(n,h,u){var l=this.geometryMask;n.currentContext.save(),l.renderCanvas(n,l,u,null,null,!0),n.currentContext.clip()},postRenderCanvas:function(n){n.currentContext.restore()},destroy:function(){this.geometryMask=null}});e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(s,a){return a===void 0&&(a=s),this.scrollFactorX=s,this.scrollFactorY=a,this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),a=i(25),n=i(177),h=i(269),u=i(270),l=i(3),f=4,c={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(d){this._scaleX=d,this._scaleY=d,d===0?this.renderFlags&=~f:this.renderFlags|=f}},scaleX:{get:function(){return this._scaleX},set:function(d){this._scaleX=d,d===0?this.renderFlags&=~f:this.renderFlags|=f}},scaleY:{get:function(){return this._scaleY},set:function(d){this._scaleY=d,d===0?this.renderFlags&=~f:this.renderFlags|=f}},angle:{get:function(){return u(this._rotation*s.RAD_TO_DEG)},set:function(d){this.rotation=u(d)*s.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=h(d)}},setPosition:function(d,v,p,g){return d===void 0&&(d=0),v===void 0&&(v=d),p===void 0&&(p=0),g===void 0&&(g=0),this.x=d,this.y=v,this.z=p,this.w=g,this},copyPosition:function(d){return d.x!==void 0&&(this.x=d.x),d.y!==void 0&&(this.y=d.y),d.z!==void 0&&(this.z=d.z),d.w!==void 0&&(this.w=d.w),this},setRandomPosition:function(d,v,p,g){return d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=d+Math.random()*p,this.y=v+Math.random()*g,this},setRotation:function(d){return d===void 0&&(d=0),this.rotation=d,this},setAngle:function(d){return d===void 0&&(d=0),this.angle=d,this},setScale:function(d,v){return d===void 0&&(d=1),v===void 0&&(v=d),this.scaleX=d,this.scaleY=v,this},setX:function(d){return d===void 0&&(d=0),this.x=d,this},setY:function(d){return d===void 0&&(d=0),this.y=d,this},setZ:function(d){return d===void 0&&(d=0),this.z=d,this},setW:function(d){return d===void 0&&(d=0),this.w=d,this},getLocalTransformMatrix:function(d){return d===void 0&&(d=new a),d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(d,v){d===void 0&&(d=new a),v===void 0&&(v=new a);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(d);for(d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)v.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),v.multiply(d,d),p=p.parentContainer;return d},getLocalPoint:function(d,v,p,g){p||(p=new l),g||(g=this.scene.sys.cameras.main);var m=g.scrollX,x=g.scrollY,y=d+m*this.scrollFactorX-m,T=v+x*this.scrollFactorY-x;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,T,p):n(y,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getParentRotation:function(){for(var d=0,v=this.parentContainer;v;)d+=v.rotation,v=v.parentContainer;return d}};e.exports=c},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=1,s={_visible:!0,visible:{get:function(){return this._visible},set:function(a){a?(this._visible=!0,this.renderFlags|=i):(this._visible=!1,this.renderFlags&=~i)}},setVisible:function(a){return this.visible=a,this}};e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CHANGE_DATA:i(638),CHANGE_DATA_KEY:i(639),DESTROY:i(640),REMOVE_DATA:i(641),SET_DATA:i(642)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(130),a=i(4),n=function(h,u,l,f){if(f===void 0&&(f=[]),!u&&!l)return f;u?l=Math.round(s(h)/u):u=s(h)/l;for(var c=h.x,d=h.y,v=0,p=0;p<l;p++)switch(f.push(new a(c,d)),v){case 0:c+=u,c>=h.right&&(v=1,d+=c-h.right,c=h.right);break;case 1:d+=u,d>=h.bottom&&(v=2,c-=d-h.bottom,d=h.bottom);break;case 2:c-=u,c<=h.left&&(v=3,d-=h.left-c,c=h.left);break;case 3:d-=u,d<=h.top&&(v=0,d=h.top);break}return f};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){a===void 0&&(a=1),n===void 0&&(n=[]);var h=Math.round(s.x1),u=Math.round(s.y1),l=Math.round(s.x2),f=Math.round(s.y2),c=Math.abs(l-h),d=Math.abs(f-u),v=h<l?1:-1,p=u<f?1:-1,g=c-d;n.push({x:h,y:u});for(var m=1;!(h===l&&u===f);){var x=g<<1;x>-d&&(g-=d,h+=v),x<c&&(g+=c,u+=p),m%a===0&&n.push({x:h,y:u}),m++}return n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(a.length){if(a.length===1)return a[0]}else return NaN;var h=1,u,l;if(n){if(s<a[0][n])return a[0];for(;a[h][n]<s;)h++}else for(;a[h]<s;)h++;return h>a.length&&(h=a.length),n?(u=a[h-1][n],l=a[h][n],l-s<=s-u?a[h]:a[h-1]):(u=a[h-1],l=a[h],l-s<=s-u?l:u)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u,l,f,c){c===void 0&&(c=!1),this.textureKey=h,this.textureFrame=u,this.index=l,this.frame=f,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=c},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a=/\D/g;return s.sort(function(n,h){return parseInt(n.replace(a,""),10)-parseInt(h.replace(a,""),10)}),s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(185),a=i(0),n=i(102),h=i(9),u=i(132),l=i(22),f=i(2),c=i(6),d=i(186),v=i(322),p=new a({Extends:h,initialize:function(m){h.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new n,this.mixes=new n,this.paused=!1,this.name="AnimationManager",m.events.once(l.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(l.DESTROY,this.destroy,this)},addMix:function(g,m,x){var y=this.anims,T=this.mixes,S=typeof g=="string"?g:g.key,C=typeof m=="string"?m:m.key;if(y.has(S)&&y.has(C)){var E=T.get(S);E||(E={}),E[C]=x,T.set(S,E)}return this},removeMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=x.get(y);if(T)if(m){var S=typeof m=="string"?m:m.key;T.hasOwnProperty(S)&&delete T[S]}else m||x.delete(y);return this},getMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=typeof m=="string"?m:m.key,S=x.get(y);return S&&S.hasOwnProperty(T)?S[T]:0},add:function(g,m){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(m.key=g,this.anims.set(g,m),this.emit(u.ADD_ANIMATION,g,m),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,m){var x=[],y=this.game.cache.json.get(g);if(!y)return x;var T=this,S=c(y,"meta",null),C=c(y,"frames",null);if(S&&C){var E=c(S,"frameTags",[]);E.forEach(function(P){var M=[],R=f(P,"name",null),A=f(P,"from",0),O=f(P,"to",0),F=f(P,"direction","forward");if(!!R&&(!m||m&&m.indexOf(R)>-1)){for(var b=[],w=Number.MAX_SAFE_INTEGER,N=A;N<=O;N++){var V=N.toString(),W=C[V];if(W){var U=f(W,"duration",Number.MAX_SAFE_INTEGER);U<w&&(w=U),b.push({frame:V,duration:U})}}b.forEach(function(B){M.push({key:g,frame:B.frame,duration:w-B.duration})});var D=w*M.length;F==="reverse"&&(M=M.reverse());var L={key:R,frames:M,duration:D,yoyo:F==="pingpong"},I=T.create(L);I&&x.push(I)}})}return x},create:function(g){var m=g.key,x=!1;return m&&(x=this.get(m),x||(x=new s(this,m,g),this.anims.set(m,x),this.emit(u.ADD_ANIMATION,m,x))),x},fromJSON:function(g,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var x=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var y=0;y<g.anims.length;y++)x.push(this.create(g.anims[y]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&x.push(this.create(g));return x},generateFrameNames:function(g,m){var x=c(m,"prefix",""),y=c(m,"start",0),T=c(m,"end",0),S=c(m,"suffix",""),C=c(m,"zeroPad",0),E=c(m,"outputArray",[]),P=c(m,"frames",!1),M=this.textureManager.get(g);if(!M)return E;var R;if(m)for(P||(P=v(y,T)),R=0;R<P.length;R++){var A=x+d(P[R],C,"0",1)+S;M.has(A)?E.push({key:g,frame:A}):console.warn("generateFrameNames: Frame missing: "+A+" from texture: "+g)}else for(P=M.getFrameNames(),R=0;R<P.length;R++)E.push({key:g,frame:P[R]});return E},generateFrameNumbers:function(g,m){var x=c(m,"start",0),y=c(m,"end",-1),T=c(m,"first",!1),S=c(m,"outputArray",[]),C=c(m,"frames",!1),E=this.textureManager.get(g);if(!E)return S;T&&E.has(T)&&S.push({key:g,frame:T}),C||(y===-1&&(y=E.frameTotal-2),C=v(x,y));for(var P=0;P<C.length;P++)E.has(C[P])?S.push({key:g,frame:C[P]}):console.warn("generateFrameNumbers: Frame "+P+" missing from texture: "+g);return S},get:function(g){return this.anims.get(g)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(u.PAUSE_ALL)),this},play:function(g,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)m[x].anims.play(g);return this},staggerPlay:function(g,m,x,y){x===void 0&&(x=0),y===void 0&&(y=!0),Array.isArray(m)||(m=[m]);var T=m.length;y||T--;for(var S=0;S<m.length;S++){var C=x<0?Math.abs(x)*(T-S):x*S;m[S].anims.playAfterDelay(g,C)}return this},remove:function(g){var m=this.get(g);return m&&(this.emit(u.REMOVE_ANIMATION,g,m),this.anims.delete(g),this.removeMix(g)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(u.RESUME_ALL)),this},toJSON:function(g){var m={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?m.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(x,y){m.anims.push(y.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});e.exports=p},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=[],l,f=!1;if((n||h)&&(f=!0,n||(n=""),h||(h="")),a<s)for(l=s;l>=a;l--)f?u.push(n+l.toString()+h):u.push(l);else for(l=s;l<=a;l++)f?u.push(n+l.toString()+h):u.push(l);return u};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(102),n=i(9),h=i(324),u=new s({initialize:function(){this.entries=new a,this.events=new n},add:function(l,f){return this.entries.set(l,f),this.events.emit(h.ADD,this,l,f),this},has:function(l){return this.entries.has(l)},exists:function(l){return this.entries.has(l)},get:function(l){return this.entries.get(l)},remove:function(l){var f=this.get(l);return f&&(this.entries.delete(l),this.events.emit(h.REMOVE,this,l,f.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(736),REMOVE:i(737)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(323),a=i(0),n=i(22),h=new a({initialize:function(l){this.game=l,this.binary=new s,this.bitmapFont=new s,this.json=new s,this.physics=new s,this.shader=new s,this.audio=new s,this.video=new s,this.text=new s,this.html=new s,this.obj=new s,this.tilemap=new s,this.xml=new s,this.custom={},this.game.events.once(n.DESTROY,this.destroy,this)},addCustom:function(u){return this.custom.hasOwnProperty(u)||(this.custom[u]=new s),this.custom[u]},destroy:function(){for(var u=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],l=0;l<u.length;l++)this[u[l]].destroy(),this[u[l]]=null;for(var f in this.custom)this.custom[f].destroy();this.custom=null,this.game=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(133),a=i(190),n=i(18),h=i(0),u=i(11),l=i(333),f=i(37),c=i(135),d=i(10),v=i(3),p=new h({Extends:s,Mixins:[u.Flip,u.Tint,u.Pipeline],initialize:function(m,x,y,T){s.call(this,m,x,y,T),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new l.Fade(this),this.flashEffect=new l.Flash(this),this.shakeEffect=new l.Shake(this),this.panEffect=new l.Pan(this),this.rotateToEffect=new l.RotateTo(this),this.zoomEffect=new l.Zoom(this),this.lerp=new v(1,1),this.followOffset=new v,this.deadzone=null,this._follow=null},setDeadzone:function(g,m){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=m):this.deadzone=new d(0,0,g,m),this._follow){var x=this.width/2,y=this.height/2,T=this._follow.x-this.followOffset.x,S=this._follow.y-this.followOffset.y;this.midPoint.set(T,S),this.scrollX=T-x,this.scrollY=S-y}a(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,m,x,y,T,S){return this.fadeEffect.start(!1,g,m,x,y,!0,T,S)},fadeOut:function(g,m,x,y,T,S){return this.fadeEffect.start(!0,g,m,x,y,!0,T,S)},fadeFrom:function(g,m,x,y,T,S,C){return this.fadeEffect.start(!1,g,m,x,y,T,S,C)},fade:function(g,m,x,y,T,S,C){return this.fadeEffect.start(!0,g,m,x,y,T,S,C)},flash:function(g,m,x,y,T,S,C){return this.flashEffect.start(g,m,x,y,T,S,C)},shake:function(g,m,x,y,T){return this.shakeEffect.start(g,m,x,y,T)},pan:function(g,m,x,y,T,S,C){return this.panEffect.start(g,m,x,y,T,S,C)},rotateTo:function(g,m,x,y,T,S,C){return this.rotateToEffect.start(g,m,x,y,T,S,C)},zoomTo:function(g,m,x,y,T,S){return this.zoomEffect.start(g,m,x,y,T,S)},preRender:function(){this.renderList.length=0;var g=this.width,m=this.height,x=g*.5,y=m*.5,T=this.zoom,S=this.matrix,C=g*this.originX,E=m*this.originY,P=this._follow,M=this.deadzone,R=this.scrollX,A=this.scrollY;M&&a(M,this.midPoint.x,this.midPoint.y);var O=!1;if(P&&!this.panEffect.isRunning){var F=P.x-this.followOffset.x,b=P.y-this.followOffset.y;M?(F<M.x?R=c(R,R-(M.x-F),this.lerp.x):F>M.right&&(R=c(R,R+(F-M.right),this.lerp.x)),b<M.y?A=c(A,A-(M.y-b),this.lerp.y):b>M.bottom&&(A=c(A,A+(b-M.bottom),this.lerp.y))):(R=c(R,F-C,this.lerp.x),A=c(A,b-E,this.lerp.y)),O=!0}this.useBounds&&(R=this.clampX(R),A=this.clampY(A)),this.roundPixels&&(C=Math.round(C),E=Math.round(E),R=Math.round(R),A=Math.round(A)),this.scrollX=R,this.scrollY=A;var w=R+x,N=A+y;this.midPoint.set(w,N);var V=g/T,W=m/T,U=w-V/2,D=N-W/2;this.roundPixels&&(U=Math.round(U),D=Math.round(D)),this.worldView.setTo(U,D,V,W),S.applyITRS(this.x+C,this.y+E,this.rotation,T,T),S.translate(-C,-E),this.shakeEffect.preRender(),O&&this.emit(f.FOLLOW_UPDATE,this,P)},setLerp:function(g,m){return g===void 0&&(g=1),m===void 0&&(m=g),this.lerp.set(g,m),this},setFollowOffset:function(g,m){return g===void 0&&(g=0),m===void 0&&(m=0),this.followOffset.set(g,m),this},startFollow:function(g,m,x,y,T,S){m===void 0&&(m=!1),x===void 0&&(x=1),y===void 0&&(y=x),T===void 0&&(T=0),S===void 0&&(S=T),this._follow=g,this.roundPixels=m,x=n(x,0,1),y=n(y,0,1),this.lerp.set(x,y),this.followOffset.set(T,S);var C=this.width/2,E=this.height/2,P=g.x-T,M=g.y-S;return this.midPoint.set(P,M),this.scrollX=P-C,this.scrollY=M-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,m){this.visible&&(this.rotateToEffect.update(g,m),this.panEffect.update(g,m),this.zoomEffect.update(g,m),this.shakeEffect.update(g,m),this.flashEffect.update(g,m),this.fadeEffect.update(g,m))},destroy:function(){this.resetFX(),s.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38),a=function(n){var h=new s;n=n.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(d,v,p,g){return v+v+p+p+g+g});var u=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(u){var l=parseInt(u[1],16),f=parseInt(u[2],16),c=parseInt(u[3],16);h.setTo(l,f,c)}return h};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){return h<<24|s<<16|a<<8|n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){h===void 0&&(h={h:0,s:0,v:0}),s/=255,a/=255,n/=255;var u=Math.min(s,a,n),l=Math.max(s,a,n),f=l-u,c=0,d=l===0?0:f/l,v=l;return l!==u&&(l===s?c=(a-n)/f+(a<n?6:0):l===a?c=(n-s)/f+2:l===n&&(c=(s-a)/f+4),c/=6),h.hasOwnProperty("_h")?(h._h=c,h._s=d,h._v=v):(h.h=c,h.s=d,h.v=v),h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s>16777215?{a:s>>>24,r:s>>16&255,g:s>>8&255,b:s&255}:{a:255,r:s>>16&255,g:s>>8&255,b:s&255}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38),a=function(n){return new s(n.r,n.g,n.b,n.a)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38),a=function(n){var h=new s,u=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(n.toLowerCase());if(u){var l=parseInt(u[1],10),f=parseInt(u[2],10),c=parseInt(u[3],10),d=u[4]!==void 0?parseFloat(u[4]):1;h.setTo(l,f,c,d*255)}return h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Fade:i(761),Flash:i(762),Pan:i(763),Shake:i(796),RotateTo:i(797),Zoom:i(798)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(764),Out:i(765),InOut:i(766)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(767),Out:i(768),InOut:i(769)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(770),Out:i(771),InOut:i(772)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(773),Out:i(774),InOut:i(775)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(776),Out:i(777),InOut:i(778)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(779),Out:i(780),InOut:i(781)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=i(782)},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(783),Out:i(784),InOut:i(785)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(786),Out:i(787),InOut:i(788)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(789),Out:i(790),InOut:i(791)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(792),Out:i(793),InOut:i(794)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=i(795)},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(33),n=i(347),h=i(2),u=i(6),l=i(7),f=i(193),c=i(1),d=i(197),v=i(187),p=new s({initialize:function(m){m===void 0&&(m={});var x=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff";this.width=u(m,"width",1024),this.height=u(m,"height",768),this.zoom=u(m,"zoom",1),this.parent=u(m,"parent",void 0),this.scaleMode=u(m,"scaleMode",0),this.expandParent=u(m,"expandParent",!0),this.autoRound=u(m,"autoRound",!1),this.autoCenter=u(m,"autoCenter",0),this.resizeInterval=u(m,"resizeInterval",500),this.fullscreenTarget=u(m,"fullscreenTarget",null),this.minWidth=u(m,"minWidth",0),this.maxWidth=u(m,"maxWidth",0),this.minHeight=u(m,"minHeight",0),this.maxHeight=u(m,"maxHeight",0);var T=u(m,"scale",null);T&&(this.width=u(T,"width",this.width),this.height=u(T,"height",this.height),this.zoom=u(T,"zoom",this.zoom),this.parent=u(T,"parent",this.parent),this.scaleMode=u(T,"mode",this.scaleMode),this.expandParent=u(T,"expandParent",this.expandParent),this.autoRound=u(T,"autoRound",this.autoRound),this.autoCenter=u(T,"autoCenter",this.autoCenter),this.resizeInterval=u(T,"resizeInterval",this.resizeInterval),this.fullscreenTarget=u(T,"fullscreenTarget",this.fullscreenTarget),this.minWidth=u(T,"min.width",this.minWidth),this.maxWidth=u(T,"max.width",this.maxWidth),this.minHeight=u(T,"min.height",this.minHeight),this.maxHeight=u(T,"max.height",this.maxHeight)),this.renderType=u(m,"type",a.AUTO),this.canvas=u(m,"canvas",null),this.context=u(m,"context",null),this.canvasStyle=u(m,"canvasStyle",null),this.customEnvironment=u(m,"customEnvironment",!1),this.sceneConfig=u(m,"scene",null),this.seed=u(m,"seed",[(Date.now()*Math.random()).toString()]),f.RND=new f.RandomDataGenerator(this.seed),this.gameTitle=u(m,"title",""),this.gameURL=u(m,"url","https://phaser.io"),this.gameVersion=u(m,"version",""),this.autoFocus=u(m,"autoFocus",!0),this.domCreateContainer=u(m,"dom.createContainer",!1),this.domBehindCanvas=u(m,"dom.behindCanvas",!1),this.domPointerEvents=u(m,"dom.pointerEvents","none"),this.inputKeyboard=u(m,"input.keyboard",!0),this.inputKeyboardEventTarget=u(m,"input.keyboard.target",window),this.inputKeyboardCapture=u(m,"input.keyboard.capture",[]),this.inputMouse=u(m,"input.mouse",!0),this.inputMouseEventTarget=u(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=u(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=u(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=u(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=u(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=u(m,"input.touch",n.input.touch),this.inputTouchEventTarget=u(m,"input.touch.target",null),this.inputTouchCapture=u(m,"input.touch.capture",!0),this.inputActivePointers=u(m,"input.activePointers",1),this.inputSmoothFactor=u(m,"input.smoothFactor",0),this.inputWindowEvents=u(m,"input.windowEvents",!0),this.inputGamepad=u(m,"input.gamepad",!1),this.inputGamepadEventTarget=u(m,"input.gamepad.target",window),this.disableContextMenu=u(m,"disableContextMenu",!1),this.audio=u(m,"audio",{}),this.hideBanner=u(m,"banner",null)===!1,this.hidePhaser=u(m,"banner.hidePhaser",!1),this.bannerTextColor=u(m,"banner.text",y),this.bannerBackgroundColor=u(m,"banner.background",x),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=u(m,"fps",null);var S=u(m,"render",m);this.pipeline=u(S,"pipeline",null),this.antialias=u(S,"antialias",!0),this.antialiasGL=u(S,"antialiasGL",!0),this.mipmapFilter=u(S,"mipmapFilter","LINEAR"),this.desynchronized=u(S,"desynchronized",!1),this.roundPixels=u(S,"roundPixels",!1),this.pixelArt=u(S,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=u(S,"transparent",!1),this.clearBeforeRender=u(S,"clearBeforeRender",!0),this.preserveDrawingBuffer=u(S,"preserveDrawingBuffer",!1),this.premultipliedAlpha=u(S,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=u(S,"failIfMajorPerformanceCaveat",!1),this.powerPreference=u(S,"powerPreference","default"),this.batchSize=u(S,"batchSize",4096),this.maxTextures=u(S,"maxTextures",-1),this.maxLights=u(S,"maxLights",10);var C=u(m,"backgroundColor",0);this.backgroundColor=v(C),this.transparent&&(this.backgroundColor=v(0),this.backgroundColor.alpha=0),this.preBoot=u(m,"callbacks.preBoot",c),this.postBoot=u(m,"callbacks.postBoot",c),this.physics=u(m,"physics",{}),this.defaultPhysicsSystem=u(this.physics,"default",!1),this.loaderBaseURL=u(m,"loader.baseURL",""),this.loaderPath=u(m,"loader.path","");var E=n.os.android?6:32;this.loaderMaxParallelDownloads=u(m,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=u(m,"loader.crossOrigin",void 0),this.loaderResponseType=u(m,"loader.responseType",""),this.loaderAsync=u(m,"loader.async",!0),this.loaderUser=u(m,"loader.user",""),this.loaderPassword=u(m,"loader.password",""),this.loaderTimeout=u(m,"loader.timeout",0),this.loaderWithCredentials=u(m,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=u(m,"plugins",null),M=d.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:l(P)&&(this.installGlobalPlugins=h(P,"global",[]),this.installScenePlugins=h(P,"scene",[]),Array.isArray(P.default)?M=P.default:Array.isArray(P.defaultMerge)&&(M=M.concat(P.defaultMerge)))),this.defaultPlugins=M;var R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=u(m,"images.default",R+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=u(m,"images.missing",R+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=u(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=a.WEBGL:window.FORCE_CANVAS&&(this.renderType=a.CANVAS))}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={os:i(105),browser:i(136),features:i(191),input:i(808),audio:i(809),video:i(810),fullscreen:i(811),canvasFeatures:i(348)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),a={supportInverseAlpha:!1,supportNewBlendModes:!1};function n(){var l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",f="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image;return c.onload=function(){var d=new Image;d.onload=function(){var v=s.create(d,6,1),p=v.getContext("2d");if(p.globalCompositeOperation="multiply",p.drawImage(c,0,0),p.drawImage(d,2,0),!p.getImageData(2,0,1,1))return!1;var g=p.getImageData(2,0,1,1).data;s.remove(d),a.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},d.src=l+"/wCKxvRF"+f},c.src=l+"AP804Oa6"+f,!1}function h(){var l=s.create(this,2,1),f=l.getContext("2d");f.fillStyle="rgba(10, 20, 30, 0.5)",f.fillRect(0,0,1,1);var c=f.getImageData(0,0,1,1);if(c===null)return!1;f.putImageData(c,1,0);var d=f.getImageData(1,0,1,1);return d.data[0]===c.data[0]&&d.data[1]===c.data[1]&&d.data[2]===c.data[2]&&d.data[3]===c.data[3]}function u(){return typeof importScripts!="function"&&document!==void 0&&(a.supportNewBlendModes=n(),a.supportInverseAlpha=h()),a}e.exports=u()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){return Math.atan2(h-a,n-s)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return Math.atan2(a.y-s.y,a.x-s.x)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s=s%(2*Math.PI),s>=0?s:s+2*Math.PI};e.exports=i},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.x-a.x,h=s.y-a.y;return Math.sqrt(n*n+h*h)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=s-n,l=a-h;return u*u+l*l};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return n===void 0&&(n=1e-4),s>a-n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return n===void 0&&(n=1e-4),s<a+n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(357),a=function(n,h){return s(n)/s(h)/s(n-h)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){if(s===0)return 1;for(var a=s;--s;)a*=s;return a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(u,l){var f=1-u;return f*f*f*l}function s(u,l){var f=1-u;return 3*f*f*u*l}function a(u,l){return 3*(1-u)*u*u*l}function n(u,l){return u*u*u*l}var h=function(u,l,f,c,d){return i(u,l)+s(u,f)+a(u,c)+n(u,d)};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(h,u){var l=1-h;return l*l*u}function s(h,u){return 2*(1-h)*h*u}function a(h,u){return h*h*u}var n=function(h,u,l,f){return i(h,u)+s(h,l)+a(h,f)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(184),a=function(n,h,u){return h+(u-h)*s(n,0,1)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a=Math.log(s)/.6931471805599453;return 1<<Math.ceil(a)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.x,h=s.y;return s.x=n*Math.cos(a)-h*Math.sin(a),s.y=n*Math.sin(a)+h*Math.cos(a),s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s>0?Math.ceil(s):Math.floor(s)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h){this.val=new Float32Array(9),h?this.copy(h):this.identity()},clone:function(){return new a(this)},set:function(n){return this.copy(n)},copy:function(n){var h=this.val,u=n.val;return h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=u[6],h[7]=u[7],h[8]=u[8],this},fromMat4:function(n){var h=n.val,u=this.val;return u[0]=h[0],u[1]=h[1],u[2]=h[2],u[3]=h[4],u[4]=h[5],u[5]=h[6],u[6]=h[8],u[7]=h[9],u[8]=h[10],this},fromArray:function(n){var h=this.val;return h[0]=n[0],h[1]=n[1],h[2]=n[2],h[3]=n[3],h[4]=n[4],h[5]=n[5],h[6]=n[6],h[7]=n[7],h[8]=n[8],this},identity:function(){var n=this.val;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,this},transpose:function(){var n=this.val,h=n[1],u=n[2],l=n[5];return n[1]=n[3],n[2]=n[6],n[3]=h,n[5]=n[7],n[6]=u,n[7]=l,this},invert:function(){var n=this.val,h=n[0],u=n[1],l=n[2],f=n[3],c=n[4],d=n[5],v=n[6],p=n[7],g=n[8],m=g*c-d*p,x=-g*f+d*v,y=p*f-c*v,T=h*m+u*x+l*y;return T?(T=1/T,n[0]=m*T,n[1]=(-g*u+l*p)*T,n[2]=(d*u-l*c)*T,n[3]=x*T,n[4]=(g*h-l*v)*T,n[5]=(-d*h+l*f)*T,n[6]=y*T,n[7]=(-p*h+u*v)*T,n[8]=(c*h-u*f)*T,this):null},adjoint:function(){var n=this.val,h=n[0],u=n[1],l=n[2],f=n[3],c=n[4],d=n[5],v=n[6],p=n[7],g=n[8];return n[0]=c*g-d*p,n[1]=l*p-u*g,n[2]=u*d-l*c,n[3]=d*v-f*g,n[4]=h*g-l*v,n[5]=l*f-h*d,n[6]=f*p-c*v,n[7]=u*v-h*p,n[8]=h*c-u*f,this},determinant:function(){var n=this.val,h=n[0],u=n[1],l=n[2],f=n[3],c=n[4],d=n[5],v=n[6],p=n[7],g=n[8];return h*(g*c-d*p)+u*(-g*f+d*v)+l*(p*f-c*v)},multiply:function(n){var h=this.val,u=h[0],l=h[1],f=h[2],c=h[3],d=h[4],v=h[5],p=h[6],g=h[7],m=h[8],x=n.val,y=x[0],T=x[1],S=x[2],C=x[3],E=x[4],P=x[5],M=x[6],R=x[7],A=x[8];return h[0]=y*u+T*c+S*p,h[1]=y*l+T*d+S*g,h[2]=y*f+T*v+S*m,h[3]=C*u+E*c+P*p,h[4]=C*l+E*d+P*g,h[5]=C*f+E*v+P*m,h[6]=M*u+R*c+A*p,h[7]=M*l+R*d+A*g,h[8]=M*f+R*v+A*m,this},translate:function(n){var h=this.val,u=n.x,l=n.y;return h[6]=u*h[0]+l*h[3]+h[6],h[7]=u*h[1]+l*h[4]+h[7],h[8]=u*h[2]+l*h[5]+h[8],this},rotate:function(n){var h=this.val,u=h[0],l=h[1],f=h[2],c=h[3],d=h[4],v=h[5],p=Math.sin(n),g=Math.cos(n);return h[0]=g*u+p*c,h[1]=g*l+p*d,h[2]=g*f+p*v,h[3]=g*c-p*u,h[4]=g*d-p*l,h[5]=g*v-p*f,this},scale:function(n){var h=this.val,u=n.x,l=n.y;return h[0]=u*h[0],h[1]=u*h[1],h[2]=u*h[2],h[3]=l*h[3],h[4]=l*h[4],h[5]=l*h[5],this},fromQuat:function(n){var h=n.x,u=n.y,l=n.z,f=n.w,c=h+h,d=u+u,v=l+l,p=h*c,g=h*d,m=h*v,x=u*d,y=u*v,T=l*v,S=f*c,C=f*d,E=f*v,P=this.val;return P[0]=1-(x+T),P[3]=g+E,P[6]=m-C,P[1]=g-E,P[4]=1-(p+T),P[7]=y+S,P[2]=m+C,P[5]=y-S,P[8]=1-(p+x),this},normalFromMat4:function(n){var h=n.val,u=this.val,l=h[0],f=h[1],c=h[2],d=h[3],v=h[4],p=h[5],g=h[6],m=h[7],x=h[8],y=h[9],T=h[10],S=h[11],C=h[12],E=h[13],P=h[14],M=h[15],R=l*p-f*v,A=l*g-c*v,O=l*m-d*v,F=f*g-c*p,b=f*m-d*p,w=c*m-d*g,N=x*E-y*C,V=x*P-T*C,W=x*M-S*C,U=y*P-T*E,D=y*M-S*E,L=T*M-S*P,I=R*L-A*D+O*U+F*W-b*V+w*N;return I?(I=1/I,u[0]=(p*L-g*D+m*U)*I,u[1]=(g*W-v*L-m*V)*I,u[2]=(v*D-p*W+m*N)*I,u[3]=(c*D-f*L-d*U)*I,u[4]=(l*L-c*W+d*V)*I,u[5]=(f*W-l*D-d*N)*I,u[6]=(E*w-P*b+M*F)*I,u[7]=(P*O-C*w-M*A)*I,u[8]=(C*b-E*O+M*R)*I,this):null}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(364),n=i(1),h=i(39),u=1e-6,l=new Int8Array([1,2,0]),f=new Float32Array([0,0,0]),c=new h(1,0,0),d=new h(0,1,0),v=new h,p=new a,g=new s({initialize:function(x,y,T,S){this.onChangeCallback=n,this.set(x,y,T,S)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,x,y,T,S){return S===void 0&&(S=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=x||0,this._z=y||0,this._w=T||0),S&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return Math.sqrt(m*m+x*x+y*y+T*T)},lengthSq:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return m*m+x*x+y*y+T*T},normalize:function(){var m=this.x,x=this.y,y=this.z,T=this.w,S=m*m+x*x+y*y+T*T;return S>0&&(S=1/Math.sqrt(S),this._x=m*S,this._y=x*S,this._z=y*S,this._w=T*S),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,x){x===void 0&&(x=0);var y=this.x,T=this.y,S=this.z,C=this.w;return this.set(y+x*(m.x-y),T+x*(m.y-T),S+x*(m.z-S),C+x*(m.w-C))},rotationTo:function(m,x){var y=m.x*x.x+m.y*x.y+m.z*x.z;return y<-.999999?(v.copy(c).cross(m).length()<u&&v.copy(d).cross(m),v.normalize(),this.setAxisAngle(v,Math.PI)):y>.999999?this.set(0,0,0,1):(v.copy(m).cross(x),this._x=v.x,this._y=v.y,this._z=v.z,this._w=1+y,this.normalize())},setAxes:function(m,x,y){var T=p.val;return T[0]=x.x,T[3]=x.y,T[6]=x.z,T[1]=y.x,T[4]=y.y,T[7]=y.z,T[2]=-m.x,T[5]=-m.y,T[8]=-m.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,x){x=x*.5;var y=Math.sin(x);return this.set(y*m.x,y*m.y,y*m.z,Math.cos(x))},multiply:function(m){var x=this.x,y=this.y,T=this.z,S=this.w,C=m.x,E=m.y,P=m.z,M=m.w;return this.set(x*M+S*C+y*P-T*E,y*M+S*E+T*C-x*P,T*M+S*P+x*E-y*C,S*M-x*C-y*E-T*P)},slerp:function(m,x){var y=this.x,T=this.y,S=this.z,C=this.w,E=m.x,P=m.y,M=m.z,R=m.w,A=y*E+T*P+S*M+C*R;A<0&&(A=-A,E=-E,P=-P,M=-M,R=-R);var O=1-x,F=x;if(1-A>u){var b=Math.acos(A),w=Math.sin(b);O=Math.sin((1-x)*b)/w,F=Math.sin(x*b)/w}return this.set(O*y+F*E,O*T+F*P,O*S+F*M,O*C+F*R)},invert:function(){var m=this.x,x=this.y,y=this.z,T=this.w,S=m*m+x*x+y*y+T*T,C=S?1/S:0;return this.set(-m*C,-x*C,-y*C,T*C)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,S=this.w,C=Math.sin(m),E=Math.cos(m);return this.set(x*E+S*C,y*E+T*C,T*E-y*C,S*E-x*C)},rotateY:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,S=this.w,C=Math.sin(m),E=Math.cos(m);return this.set(x*E-T*C,y*E+S*C,T*E+x*C,S*E-y*C)},rotateZ:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,S=this.w,C=Math.sin(m),E=Math.cos(m);return this.set(x*E+y*C,y*E-x*C,T*E+S*C,S*E-T*C)},calculateW:function(){var m=this.x,x=this.y,y=this.z;return this.w=-Math.sqrt(1-m*m-x*x-y*y),this},setFromEuler:function(m,x){var y=m.x/2,T=m.y/2,S=m.z/2,C=Math.cos(y),E=Math.cos(T),P=Math.cos(S),M=Math.sin(y),R=Math.sin(T),A=Math.sin(S);switch(m.order){case"XYZ":{this.set(M*E*P+C*R*A,C*R*P-M*E*A,C*E*A+M*R*P,C*E*P-M*R*A,x);break}case"YXZ":{this.set(M*E*P+C*R*A,C*R*P-M*E*A,C*E*A-M*R*P,C*E*P+M*R*A,x);break}case"ZXY":{this.set(M*E*P-C*R*A,C*R*P+M*E*A,C*E*A+M*R*P,C*E*P-M*R*A,x);break}case"ZYX":{this.set(M*E*P-C*R*A,C*R*P+M*E*A,C*E*A-M*R*P,C*E*P+M*R*A,x);break}case"YZX":{this.set(M*E*P+C*R*A,C*R*P+M*E*A,C*E*A-M*R*P,C*E*P-M*R*A,x);break}case"XZY":{this.set(M*E*P-C*R*A,C*R*P-M*E*A,C*E*A+M*R*P,C*E*P+M*R*A,x);break}}return this},setFromRotationMatrix:function(m){var x=m.val,y=x[0],T=x[4],S=x[8],C=x[1],E=x[5],P=x[9],M=x[2],R=x[6],A=x[10],O=y+E+A,F;return O>0?(F=.5/Math.sqrt(O+1),this.set((R-P)*F,(S-M)*F,(C-T)*F,.25/F)):y>E&&y>A?(F=2*Math.sqrt(1+y-E-A),this.set(.25*F,(T+C)/F,(S+M)/F,(R-P)/F)):E>A?(F=2*Math.sqrt(1+E-y-A),this.set((T+C)/F,.25*F,(P+R)/F,(S-M)/F)):(F=2*Math.sqrt(1+A-y-E),this.set((S+M)/F,(P+R)/F,.25*F,(C-T)/F)),this},fromMat3:function(m){var x=m.val,y=x[0]+x[4]+x[8],T;if(y>0)T=Math.sqrt(y+1),this.w=.5*T,T=.5/T,this._x=(x[7]-x[5])*T,this._y=(x[2]-x[6])*T,this._z=(x[3]-x[1])*T;else{var S=0;x[4]>x[0]&&(S=1),x[8]>x[S*3+S]&&(S=2);var C=l[S],E=l[C];T=Math.sqrt(x[S*3+S]-x[C*3+C]-x[E*3+E]+1),f[S]=.5*T,T=.5/T,f[C]=(x[C*3+S]+x[S*3+C])*T,f[E]=(x[E*3+S]+x[S*3+E])*T,this._x=f[0],this._y=f[1],this._z=f[2],this._w=(x[E*3+C]-x[C*3+E])*T}return this.onChangeCallback(this),this}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(367),a=i(31),n=i(33),h=i(191),u=function(l){var f=l.config;if((f.customEnvironment||f.canvas)&&f.renderType===n.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!f.customEnvironment&&!f.canvas&&f.renderType!==n.HEADLESS)if(f.renderType===n.CANVAS||f.renderType!==n.CANVAS&&!h.webGL)if(h.canvas)f.renderType=n.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else f.renderType=n.WEBGL;f.antialias||a.disableSmoothing();var c=l.scale.baseSize,d=c.width,v=c.height;if(f.canvas?(l.canvas=f.canvas,l.canvas.width=d,l.canvas.height=v):l.canvas=a.create(l,d,v,f.renderType),f.canvasStyle&&(l.canvas.style=f.canvasStyle),f.antialias||s.setCrisp(l.canvas),f.renderType!==n.HEADLESS){var p,g;p=i(368),g=i(371),f.renderType===n.WEBGL?l.renderer=new g(l):(l.renderer=new p(l),l.context=l.renderer.gameContext)}};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setCrisp:function(s){var a=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return a.forEach(function(n){s.style["image-rendering"]=n}),s.style.msInterpolationMode="nearest-neighbor",s},setBicubic:function(s){return s.style["image-rendering"]="auto",s.style.msInterpolationMode="bicubic",s}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(37),a=i(369),n=i(0),h=i(33),u=i(9),l=i(91),f=i(370),c=i(104),d=i(106),v=i(25),p=new n({Extends:u,initialize:function(m){u.call(this);var x=m.config;this.config={clearBeforeRender:x.clearBeforeRender,backgroundColor:x.backgroundColor,antialias:x.antialias,roundPixels:x.roundPixels},this.game=m,this.type=h.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var y={alpha:m.config.transparent,desynchronized:m.config.desynchronized};this.gameContext=x.context?x.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=m.config.antialias,this.blendModes=f(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(d.READY,this.boot,this)},boot:function(){var g=this.game,m=g.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,g.scale.on(c.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(g,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(g,m){this.width=g,this.height=m,this.emit(l.RESIZE,g,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,m=this.config,x=this.width,y=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(g.clearRect(0,0,x,y),m.transparent||(g.fillStyle=m.backgroundColor.rgba,g.fillRect(0,0,x,y))),g.save(),this.drawCount=0,this.emit(l.PRE_RENDER)},render:function(g,m,x){var y=m.length;this.emit(l.RENDER,g,x);var T=x.x,S=x.y,C=x.width,E=x.height,P=x.renderToTexture?x.context:g.sys.context;P.save(),this.game.scene.customViewports&&(P.beginPath(),P.rect(T,S,C,E),P.clip()),this.currentContext=P;var M=x.mask;M&&M.preRenderCanvas(this,null,x._maskCamera),x.transparent||(P.fillStyle=x.backgroundColor.rgba,P.fillRect(T,S,C,E)),P.globalAlpha=x.alpha,P.globalCompositeOperation="source-over",this.drawCount+=y,x.renderToTexture&&x.emit(s.PRE_RENDER,x),x.matrix.copyToContext(P);for(var R=0;R<y;R++){var A=m[R];A.mask&&A.mask.preRenderCanvas(this,A,x),A.renderCanvas(this,A,x),A.mask&&A.mask.postRenderCanvas(this,A,x)}P.setTransform(1,0,0,1,0,0),P.globalCompositeOperation="source-over",P.globalAlpha=1,x.flashEffect.postRenderCanvas(P),x.fadeEffect.postRenderCanvas(P),x.dirty=!1,M&&M.postRenderCanvas(this),P.restore(),x.renderToTexture&&(x.emit(s.POST_RENDER,x),x.renderToGame&&g.sys.context.drawImage(x.canvas,T,S))},postRender:function(){var g=this.gameContext;g.restore(),this.emit(l.POST_RENDER);var m=this.snapshotState;m.callback&&(a(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(g,m,x,y,T,S,C,E,P){x===void 0&&(x=!1),this.snapshotArea(y,T,S,C,m,E,P);var M=this.snapshotState;return M.getPixel=x,a(this.canvas,M),M.callback=null,this},snapshot:function(g,m,x){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,m,x)},snapshotArea:function(g,m,x,y,T,S,C){var E=this.snapshotState;return E.callback=T,E.type=S,E.encoder=C,E.getPixel=!1,E.x=g,E.y=m,E.width=Math.min(x,this.gameCanvas.width),E.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(g,m,x){return this.snapshotArea(g,m,1,1,x),this.snapshotState.getPixel=!0,this},batchSprite:function(g,m,x,y){var T=x.alpha*g.alpha;if(T!==0){var S=this.currentContext,C=this._tempMatrix1,E=this._tempMatrix2,P=m.canvasData,M=P.x,R=P.y,A=m.cutWidth,O=m.cutHeight,F=m.customPivot,b=m.source.resolution,w=g.displayOriginX,N=g.displayOriginY,V=-w+m.x,W=-N+m.y;if(g.isCropped){var U=g._crop;(U.flipX!==g.flipX||U.flipY!==g.flipY)&&m.updateCropUVs(U,g.flipX,g.flipY),A=U.cw,O=U.ch,M=U.cx,R=U.cy,V=-w+U.x,W=-N+U.y,g.flipX&&(V>=0?V=-(V+A):V<0&&(V=Math.abs(V)-A)),g.flipY&&(W>=0?W=-(W+O):W<0&&(W=Math.abs(W)-O))}var D=1,L=1;g.flipX&&(F||(V+=-m.realWidth+w*2),D=-1),g.flipY&&(F||(W+=-m.realHeight+N*2),L=-1),E.applyITRS(g.x,g.y,g.rotation,g.scaleX*D,g.scaleY*L),C.copyFrom(x.matrix),y?(C.multiplyWithOffset(y,-x.scrollX*g.scrollFactorX,-x.scrollY*g.scrollFactorY),E.e=g.x,E.f=g.y):(E.e-=x.scrollX*g.scrollFactorX,E.f-=x.scrollY*g.scrollFactorY),C.multiply(E),S.save(),C.setToContext(S),S.globalCompositeOperation=this.blendModes[g.blendMode],S.globalAlpha=T,S.imageSmoothingEnabled=!(!this.antialias||m.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,x),S.drawImage(m.source.image,M,R,A,O,V,W,A/b,O/b),g.mask&&g.mask.postRenderCanvas(this,g,x),S.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),a=i(38),n=i(2),h=function(u,l){var f=n(l,"callback"),c=n(l,"type","image/png"),d=n(l,"encoder",.92),v=Math.abs(Math.round(n(l,"x",0))),p=Math.abs(Math.round(n(l,"y",0))),g=n(l,"width",u.width),m=n(l,"height",u.height),x=n(l,"getPixel",!1);if(x){var y=u.getContext("2d"),T=y.getImageData(v,p,1,1),S=T.data;f.call(null,new a(S[0],S[1],S[2],S[3]/255))}else if(v!==0||p!==0||g!==u.width||m!==u.height){var C=s.createWebGL(this,g,m),E=C.getContext("2d");E.drawImage(u,v,p,g,m,0,0,g,m);var P=new Image;P.onerror=function(){f.call(null),s.remove(C)},P.onload=function(){f.call(null,P),s.remove(C)},P.src=C.toDataURL(c,d)}else{var M=new Image;M.onerror=function(){f.call(null)},M.onload=function(){f.call(null,M)},M.src=u.toDataURL(c,d)}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),a=i(348),n=function(){var h=[],u=a.supportNewBlendModes,l="source-over";return h[s.NORMAL]=l,h[s.ADD]="lighter",h[s.MULTIPLY]=u?"multiply":l,h[s.SCREEN]=u?"screen":l,h[s.OVERLAY]=u?"overlay":l,h[s.DARKEN]=u?"darken":l,h[s.LIGHTEN]=u?"lighten":l,h[s.COLOR_DODGE]=u?"color-dodge":l,h[s.COLOR_BURN]=u?"color-burn":l,h[s.HARD_LIGHT]=u?"hard-light":l,h[s.SOFT_LIGHT]=u?"soft-light":l,h[s.DIFFERENCE]=u?"difference":l,h[s.EXCLUSION]=u?"exclusion":l,h[s.HUE]=u?"hue":l,h[s.SATURATION]=u?"saturation":l,h[s.COLOR]=u?"color":l,h[s.LUMINOSITY]=u?"luminosity":l,h[s.ERASE]="destination-out",h[s.SOURCE_IN]="source-in",h[s.SOURCE_OUT]="source-out",h[s.SOURCE_ATOP]="source-atop",h[s.DESTINATION_OVER]="destination-over",h[s.DESTINATION_IN]="destination-in",h[s.DESTINATION_OUT]="destination-out",h[s.DESTINATION_ATOP]="destination-atop",h[s.LIGHTER]="lighter",h[s.COPY]="copy",h[s.XOR]="xor",h};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(93),a=i(37),n=i(0),h=i(33),u=i(9),l=i(91),f=i(22),c=i(138),d=i(69),v=i(1),p=i(372),g=i(141),m=i(104),x=i(106),y=i(12),T=i(383),S=new n({Extends:u,initialize:function(E){u.call(this);var P=E.config,M={alpha:P.transparent,desynchronized:P.desynchronized,depth:!1,antialias:P.antialiasGL,premultipliedAlpha:P.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:P.failIfMajorPerformanceCaveat,powerPreference:P.powerPreference,preserveDrawingBuffer:P.preserveDrawingBuffer};this.config={clearBeforeRender:P.clearBeforeRender,antialias:P.antialias,backgroundColor:P.backgroundColor,contextCreation:M,roundPixels:P.roundPixels,maxTextures:P.maxTextures,maxTextureSize:P.maxTextureSize,batchSize:P.batchSize,maxLights:P.maxLights,mipmapFilter:P.mipmapFilter},this.game=E,this.type=h.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=v,this.contextRestoredHandler=v,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(C){var E,P=this.game,M=this.canvas,R=C.backgroundColor;if(P.config.context?E=P.config.context:E=M.getContext("webgl",C.contextCreation)||M.getContext("experimental-webgl",C.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var A=this;this.contextLostHandler=function(I){A.contextLost=!0,A.game.events.emit(f.CONTEXT_LOST,A),I.preventDefault()},this.contextRestoredHandler=function(){A.contextLost=!1,A.init(A.config),A.game.events.emit(f.CONTEXT_RESTORED,A)},M.addEventListener("webglcontextlost",this.contextLostHandler,!1),M.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),P.context=E;for(var O=0;O<=27;O++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var F=E.getSupportedExtensions();(!C.maxTextures||C.maxTextures===-1)&&(C.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),C.maxTextureSize||(C.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var b="WEBGL_compressed_texture_",w="WEBKIT_"+b;this.compression.ETC1=E.getExtension(b+"etc1")||E.getExtension(w+"etc1"),this.compression.PVRTC=E.getExtension(b+"pvrtc")||E.getExtension(w+"pvrtc"),this.compression.S3TC=E.getExtension(b+"s3tc")||E.getExtension(w+"s3tc"),this.supportedExtensions=F;var N="ANGLE_instanced_arrays";this.instancedArraysExtension=F.indexOf(N)>-1?E.getExtension(N):null;var V="OES_vertex_array_object";this.vaoExtension=F.indexOf(V)>-1?E.getExtension(V):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(R.redGL,R.greenGL,R.blueGL,R.alphaGL),this.mipmapFilter=E[C.mipmapFilter],this.maxTextures=y.checkShaderMax(E,C.maxTextures),this.textureIndexes=[];var W=this.tempTextures;if(Array.isArray(W))for(var U=0;O<this.maxTextures;U++)E.deleteTexture(W[U]);else W=new Array(this.maxTextures);for(var D=0;D<this.maxTextures;D++){var L=E.createTexture();E.activeTexture(E.TEXTURE0+D),E.bindTexture(E.TEXTURE_2D,L),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),W[D]=L,this.textureIndexes.push(D)}return this.tempTextures=W,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new p(this),this.setBlendMode(h.BlendModes.NORMAL),this.projectionMatrix=new d().identity(),P.textures.once(x.READY,this.boot,this),this},boot:function(){var C=this.game,E=this.pipelines,P=C.scale.baseSize;this.width=P.width,this.height=P.height,this.isBooted=!0,this.renderTarget=new g(this,this.width,this.height,1,0,!0,!0),E.boot(C.config.pipeline),this.blankTexture=C.textures.getFrame("__DEFAULT"),this.whiteTexture=C.textures.getFrame("__WHITE");var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,null),M.enable(M.SCISSOR_TEST),C.scale.on(m.RESIZE,this.onResize,this),this.resize(P.width,P.height)},onResize:function(C,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(C,E){C===void 0&&(C=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,C,E),this.setProjectionMatrix(C,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(C,E){var P=this.gl;return this.width=C,this.height=E,this.setProjectionMatrix(C,E),P.viewport(0,0,C,E),this.drawingBufferHeight=P.drawingBufferHeight,P.scissor(0,P.drawingBufferHeight-E,C,E),this.defaultScissor[2]=C,this.defaultScissor[3]=E,this.emit(l.RESIZE,C,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(C,E){return(C!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=C,this.projectionHeight=E,this.projectionMatrix.ortho(0,C,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(C){return this.supportedExtensions?this.supportedExtensions.indexOf(C):!1},getExtension:function(C){return this.hasExtension(C)?(C in this.extensions||(this.extensions[C]=this.gl.getExtension(C)),this.extensions[C]):null},flush:function(){this.pipelines.flush()},pushScissor:function(C,E,P,M,R){R===void 0&&(R=this.drawingBufferHeight);var A=this.scissorStack,O=[C,E,P,M];return A.push(O),this.setScissor(C,E,P,M,R),this.currentScissor=O,O},setScissor:function(C,E,P,M,R){R===void 0&&(R=this.drawingBufferHeight);var A=this.gl,O=this.currentScissor,F=P>0&&M>0;if(O&&F){var b=O[0],w=O[1],N=O[2],V=O[3];F=b!==C||w!==E||N!==P||V!==M}F&&(this.flush(),A.scissor(C,R-E-M,P,M))},resetScissor:function(){var C=this.gl;C.enable(C.SCISSOR_TEST);var E=this.currentScissor;if(E){var P=E[0],M=E[1],R=E[2],A=E[3];R>0&&A>0&&C.scissor(P,this.drawingBufferHeight-M-A,R,A)}},popScissor:function(){var C=this.scissorStack;C.pop();var E=C[C.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var C=this.currentMask.mask,E=this.currentCameraMask.mask;return C&&C.isStencil||E&&E.isStencil},resetViewport:function(){var C=this.gl;C.viewport(0,0,this.width,this.height),this.drawingBufferHeight=C.drawingBufferHeight},setBlendMode:function(C,E){E===void 0&&(E=!1);var P=this.gl,M=this.blendModes[C];return E||C!==h.BlendModes.SKIP_CHECK&&this.currentBlendMode!==C?(this.flush(),P.enable(P.BLEND),P.blendEquation(M.equation),M.func.length>2?P.blendFuncSeparate(M.func[0],M.func[1],M.func[2],M.func[3]):P.blendFunc(M.func[0],M.func[1]),this.currentBlendMode=C,!0):!1},addBlendMode:function(C,E){var P=this.blendModes.push({func:C,equation:E});return P-1},updateBlendMode:function(C,E,P){return this.blendModes[C]&&(this.blendModes[C].func=E,P&&(this.blendModes[C].equation=P)),this},removeBlendMode:function(C){return C>17&&this.blendModes[C]&&this.blendModes.splice(C,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(C){if(this.pipelines.forceZero())return this.setTextureZero(C.glTexture,!0),0;var E=this.gl,P=this.currentActiveTexture;return C.glIndexCounter<this.startActiveTexture&&(C.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(C.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,C.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,C.glIndexCounter=this.startActiveTexture,C.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,C.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,C.glIndex},isNewNormalMap:function(C,E){return this.textureZero!==C||this.normalTexture!==E},setTextureZero:function(C,E){if(this.textureZero!==C){E&&this.flush();var P=this.gl;P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,C),this.textureZero=C}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(C){if(this.normalTexture!==C){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,C),this.normalTexture=C,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var C=this.gl,E=this.tempTextures,P=0;P<E.length;P++)C.activeTexture(C.TEXTURE0+P),C.bindTexture(C.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(C){if(C===void 0&&(C=!1),!this.isTextureClean){this.flush();var E=this.gl,P=this.tempTextures;if(C){for(var M=0;M<P.length;M++)E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,P[M]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,P[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(C){if(this.pipelines.forceZero())return this.setTextureZero(C,!0),0;var E=this.gl,P=this.currentActiveTexture;return C.glIndexCounter<this.startActiveTexture&&(C.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(C.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,C),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,C.glIndexCounter=this.startActiveTexture,C.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,C),this.currentActiveTexture=2)),this.isTextureClean=!1,C.glIndex},pushFramebuffer:function(C,E,P,M){return C===this.currentFramebuffer?this:(this.fboStack.push(C),this.setFramebuffer(C,E,P,M))},setFramebuffer:function(C,E,P,M){if(E===void 0&&(E=!1),P===void 0&&(P=!1),M===void 0&&(M=!0),C===this.currentFramebuffer)return this;var R=this.gl,A=this.width,O=this.height;return C&&C.renderTexture&&M?(A=C.renderTexture.width,O=C.renderTexture.height):this.flush(),R.bindFramebuffer(R.FRAMEBUFFER,C),M&&R.viewport(0,0,A,O),E&&(C?(this.drawingBufferHeight=O,this.pushScissor(0,0,A,O)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=C,P&&this.resetTextures(),this},popFramebuffer:function(C,E,P){C===void 0&&(C=!1),E===void 0&&(E=!1),P===void 0&&(P=!0);var M=this.fboStack;M.pop();var R=M[M.length-1];return R||(R=null),this.setFramebuffer(R,C,E,P),R},setProgram:function(C){return C!==this.currentProgram?(this.flush(),this.gl.useProgram(C),this.currentProgram=C,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(C,E,P,M){var R=this.gl,A=R.NEAREST,O=R.NEAREST,F=R.CLAMP_TO_EDGE,b=null;E=C?C.width:E,P=C?C.height:P;var w=c(E,P);return w&&(F=R.REPEAT),M===h.ScaleModes.LINEAR&&this.config.antialias&&(A=w?this.mipmapFilter:R.LINEAR,O=R.LINEAR),!C&&typeof E=="number"&&typeof P=="number"?b=this.createTexture2D(0,A,O,F,F,R.RGBA,null,E,P):b=this.createTexture2D(0,A,O,F,F,R.RGBA,C),b},createTexture2D:function(C,E,P,M,R,A,O,F,b,w,N,V){w=w==null?!0:w,N===void 0&&(N=!1),V===void 0&&(V=!1);var W=this.gl,U=W.createTexture();W.activeTexture(W.TEXTURE0);var D=W.getParameter(W.TEXTURE_BINDING_2D);return W.bindTexture(W.TEXTURE_2D,U),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,E),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,P),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,R),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,M),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,V),O==null?W.texImage2D(W.TEXTURE_2D,C,A,F,b,0,A,W.UNSIGNED_BYTE,null):(N||(F=O.width,b=O.height),W.texImage2D(W.TEXTURE_2D,C,A,A,W.UNSIGNED_BYTE,O)),c(F,b)&&W.generateMipmap(W.TEXTURE_2D),D&&W.bindTexture(W.TEXTURE_2D,D),U.isAlphaPremultiplied=w,U.isRenderTexture=!1,U.width=F,U.height=b,U.glIndex=0,U.glIndexCounter=-1,U},createFramebuffer:function(C,E,P,M){var R=this.gl,A=R.createFramebuffer(),O=0;if(this.setFramebuffer(A),M){var F=R.createRenderbuffer();R.bindRenderbuffer(R.RENDERBUFFER,F),R.renderbufferStorage(R.RENDERBUFFER,R.DEPTH_STENCIL,C,E),R.framebufferRenderbuffer(R.FRAMEBUFFER,R.DEPTH_STENCIL_ATTACHMENT,R.RENDERBUFFER,F)}if(P.isRenderTexture=!0,P.isAlphaPremultiplied=!1,R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,P,0),O=R.checkFramebufferStatus(R.FRAMEBUFFER),O!==R.FRAMEBUFFER_COMPLETE){var b={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+b[O])}return A.renderTexture=P,this.setFramebuffer(null),this.resetTextures(),A},createProgram:function(C,E){var P=this.gl,M=P.createProgram(),R=P.createShader(P.VERTEX_SHADER),A=P.createShader(P.FRAGMENT_SHADER);if(P.shaderSource(R,C),P.shaderSource(A,E),P.compileShader(R),P.compileShader(A),!P.getShaderParameter(R,P.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+P.getShaderInfoLog(R));if(!P.getShaderParameter(A,P.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+P.getShaderInfoLog(A));if(P.attachShader(M,R),P.attachShader(M,A),P.linkProgram(M),!P.getProgramParameter(M,P.LINK_STATUS))throw new Error(`Link Program failed:
`+P.getProgramInfoLog(M));return P.useProgram(M),M},createVertexBuffer:function(C,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ARRAY_BUFFER,M),P.bufferData(P.ARRAY_BUFFER,C,E),P.bindBuffer(P.ARRAY_BUFFER,null),M},createIndexBuffer:function(C,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,M),P.bufferData(P.ELEMENT_ARRAY_BUFFER,C,E),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,null),M},deleteTexture:function(C,E){return E&&this.resetTextures(!0),C&&this.gl.deleteTexture(C),this},deleteFramebuffer:function(C){return C&&(this.gl.deleteFramebuffer(C),s(this.fboStack,C),this.currentFramebuffer===C&&(this.currentFramebuffer=null)),this},deleteProgram:function(C){return C&&this.gl.deleteProgram(C),this},deleteBuffer:function(C){return this.gl.deleteBuffer(C),this},preRenderCamera:function(C){var E=C.x,P=C.y,M=C.width,R=C.height,A=C.backgroundColor;if(C.emit(a.PRE_RENDER,C),this.pipelines.preBatchCamera(C),this.pushScissor(E,P,M,R),C.mask&&(this.currentCameraMask.mask=C.mask,this.currentCameraMask.camera=C._maskCamera,C.mask.preRenderWebGL(this,C,C._maskCamera)),A.alphaGL>0){var O=this.pipelines.setMulti();O.drawFillRect(E,P,M,R,y.getTintFromFloats(A.blueGL,A.greenGL,A.redGL,1),A.alphaGL)}},getCurrentStencilMask:function(){var C=null,E=this.maskStack,P=this.currentCameraMask;return E.length>0?C=E[E.length-1]:P.mask&&P.mask.isStencil&&(C=P),C},postRenderCamera:function(C){var E=C.flashEffect,P=C.fadeEffect;if(E.isRunning||P.isRunning||P.isComplete){var M=this.pipelines.setMulti();E.postRenderWebGL(M,y.getTintFromFloats),P.postRenderWebGL(M,y.getTintFromFloats)}C.dirty=!1,this.popScissor(),C.mask&&(this.currentCameraMask.mask=null,C.mask.postRenderWebGL(this,C._maskCamera)),this.pipelines.postBatchCamera(C),C.emit(a.POST_RENDER,C)},preRender:function(){if(!this.contextLost){var C=this.gl;if(C.bindFramebuffer(C.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;C.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT|C.STENCIL_BUFFER_BIT)}C.enable(C.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&C.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(l.PRE_RENDER)}},render:function(C,E,P){if(!this.contextLost){var M=E.length;if(this.emit(l.RENDER,C,P),this.preRenderCamera(P),M===0){this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(P);return}this.currentType="";for(var R=this.currentMask,A=0;A<M;A++){this.finalType=A===M-1;var O=E[A],F=O.mask;R=this.currentMask,R.mask&&R.mask!==F&&R.mask.postRenderWebGL(this,R.camera),F&&R.mask!==F&&F.preRenderWebGL(this,O,P),O.blendMode!==this.currentBlendMode&&this.setBlendMode(O.blendMode);var b=O.type;b!==this.currentType&&(this.newType=!0,this.currentType=b),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[A+1].type===this.currentType,O.renderWebGL(this,O,P),this.newType=!1}R=this.currentMask,R.mask&&R.mask.postRenderWebGL(this,R.camera),this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(P)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(l.POST_RENDER);var C=this.snapshotState;C.callback&&(T(this.canvas,C),C.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(C,E,P){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,C,E,P)},snapshotArea:function(C,E,P,M,R,A,O){var F=this.snapshotState;return F.callback=R,F.type=A,F.encoder=O,F.getPixel=!1,F.x=C,F.y=E,F.width=Math.min(P,this.gl.drawingBufferWidth),F.height=Math.min(M,this.gl.drawingBufferHeight),this},snapshotPixel:function(C,E,P){return this.snapshotArea(C,E,1,1,P),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(C,E,P,M,R,A,O,F,b,w,N){R===void 0&&(R=!1),A===void 0&&(A=0),O===void 0&&(O=0),F===void 0&&(F=E),b===void 0&&(b=P);var V=this.currentFramebuffer;this.snapshotArea(A,O,F,b,M,w,N);var W=this.snapshotState;return W.getPixel=R,W.isFramebuffer=!0,W.bufferWidth=E,W.bufferHeight=P,this.setFramebuffer(C),T(this.canvas,W),this.setFramebuffer(V),W.callback=null,W.isFramebuffer=!1,this},canvasToTexture:function(C,E,P,M){return P===void 0&&(P=!1),M===void 0&&(M=!1),E?this.updateCanvasTexture(C,E,M):this.createCanvasTexture(C,P,M)},createCanvasTexture:function(C,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,R=M.NEAREST,A=M.NEAREST,O=C.width,F=C.height,b=M.CLAMP_TO_EDGE,w=c(O,F);return!E&&w&&(b=M.REPEAT),this.config.antialias&&(R=w?this.mipmapFilter:M.LINEAR,A=M.LINEAR),this.createTexture2D(0,R,A,b,b,M.RGBA,C,O,F,!0,!1,P)},updateCanvasTexture:function(C,E,P){P===void 0&&(P=!1);var M=this.gl,R=C.width,A=C.height;if(R>0&&A>0){M.activeTexture(M.TEXTURE0);var O=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,C),E.width=R,E.height=A,O&&M.bindTexture(M.TEXTURE_2D,O)}return E},createVideoTexture:function(C,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,R=M.NEAREST,A=M.NEAREST,O=C.videoWidth,F=C.videoHeight,b=M.CLAMP_TO_EDGE,w=c(O,F);return!E&&w&&(b=M.REPEAT),this.config.antialias&&(R=w?this.mipmapFilter:M.LINEAR,A=M.LINEAR),this.createTexture2D(0,R,A,b,b,M.RGBA,C,O,F,!0,!0,P)},updateVideoTexture:function(C,E,P){P===void 0&&(P=!1);var M=this.gl,R=C.videoWidth,A=C.videoHeight;if(R>0&&A>0){M.activeTexture(M.TEXTURE0);var O=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,C),E.width=R,E.height=A,O&&M.bindTexture(M.TEXTURE_2D,O)}return E},setTextureFilter:function(C,E){var P=this.gl,M=[P.LINEAR,P.NEAREST][E];P.activeTexture(P.TEXTURE0);var R=P.getParameter(P.TEXTURE_BINDING_2D);return P.bindTexture(P.TEXTURE_2D,C),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,M),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,M),R&&P.bindTexture(P.TEXTURE_2D,R),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var C=this.gl,E=this.tempTextures,P=0;P<E.length;P++)C.deleteTexture(E[P]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});e.exports=S},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(92),n=i(102),h=i(373),u=i(376),l=i(377),f=i(108),c=i(378),d=i(379),v=i(380),p=i(381),g=new s({initialize:function(x){this.game=x.game,this.renderer=x,this.classes=new n([[a.UTILITY_PIPELINE,p],[a.MULTI_PIPELINE,f],[a.BITMAPMASK_PIPELINE,h],[a.SINGLE_PIPELINE,v],[a.ROPE_PIPELINE,d],[a.LIGHT_PIPELINE,l],[a.POINTLIGHT_PIPELINE,c],[a.GRAPHICS_PIPELINE,u]]),this.postPipelineClasses=new n,this.pipelines=new n,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(m){var x,y,T=this,S=this.game;if(this.classes.each(function(E,P){x=T.add(E,new P({game:S})),E===a.UTILITY_PIPELINE&&(T.UTILITY_PIPELINE=x,T.fullFrame1=x.fullFrame1,T.fullFrame2=x.fullFrame2,T.halfFrame1=x.halfFrame1,T.halfFrame2=x.halfFrame2)}),this.MULTI_PIPELINE=this.get(a.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(a.BITMAPMASK_PIPELINE),m)for(y in m){var C=m[y];x=new C(S),x.isPostFX?this.postPipelineClasses.set(y,C):this.has(y)||(this.classes.set(y,C),this.add(y,x))}},add:function(m,x){if(x.isPostFX){console.warn(m+" is a Post Pipeline. Use `addPostPipeline` instead");return}var y=this.pipelines,T=this.renderer;return y.has(m)?console.warn("Pipeline exists: "+m):(x.name=m,x.manager=this,y.set(m,x)),x.hasBooted||x.boot(),T.width!==0&&T.height!==0&&x.resize(T.width,T.height),x},addPostPipeline:function(m,x){this.postPipelineClasses.has(m)||this.postPipelineClasses.set(m,x)},flush:function(){this.current&&this.current.flush()},has:function(m){var x=this.pipelines;return typeof m=="string"?x.has(m):!!x.contains(m)},get:function(m){var x=this.pipelines;if(typeof m=="string")return x.get(m);if(x.contains(m))return m},getPostPipeline:function(m,x){var y=this.postPipelineClasses,T;if(typeof m=="string"?T=y.get(m):typeof m=="function"?y.contains(m)&&(T=m):typeof m=="object"&&(T=y.get(m.name)),T){var S=new T(this.game);return x&&(S.gameObject=x),S}},remove:function(m,x,y){x===void 0&&(x=!0),y===void 0&&(y=!0),this.pipelines.delete(m),x&&this.classes.delete(m),y&&this.postPipelineClasses.delete(m)},set:function(m,x,y){if(!m.isPostFX)return this.isCurrent(m,y)||(this.flush(),this.current&&this.current.unbind(),this.current=m,m.bind(y)),m.updateProjectionMatrix(),m.onBind(x),m},preBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},preBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},isCurrent:function(m,x){var y=this.renderer,T=this.current;return T&&!x&&(x=T.currentShader),!(T!==m||x.program!==y.currentProgram)},copyFrame:function(m,x,y,T,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(m,x,y,T,S),this},copyToGame:function(m){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(m),this},drawFrame:function(m,x,y,T){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(m,x,y,T),this},blendFrames:function(m,x,y,T,S){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(m,x,y,T,S),this},blendFramesAdditive:function(m,x,y,T,S){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(m,x,y,T,S),this},clearFrame:function(m,x){return this.UTILITY_PIPELINE.clearFrame(m,x),this},blitFrame:function(m,x,y,T,S,C){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(m,x,y,T,S,C),this},copyFrameRect:function(m,x,y,T,S,C,E,P){return this.UTILITY_PIPELINE.copyFrameRect(m,x,y,T,S,C,E,P),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(m){return this.UTILITY_PIPELINE.bind(m)},rebind:function(m){m===void 0&&this.previous&&(m=this.previous);var x=this.renderer,y=x.gl;y.disable(y.DEPTH_TEST),y.disable(y.CULL_FACE),x.hasActiveStencilMask()?y.clear(y.DEPTH_BUFFER_BIT):(y.disable(y.STENCIL_TEST),y.clear(y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.viewport(0,0,x.width,x.height),x.currentProgram=null,x.setBlendMode(0,!0);var T=this.pipelines.entries;for(var S in T)T[S].glReset=!0;m&&(this.current=m,m.rebind()),x.resetTextures()},clear:function(){var m=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,m.currentProgram=null,m.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(2),n=i(866),h=i(867),u=i(107),l=i(58),f=new s({Extends:l,initialize:function(d){d.fragShader=a(d,"fragShader",n),d.vertShader=a(d,"vertShader",h),d.batchSize=a(d,"batchSize",1),d.vertices=a(d,"vertices",[-1,1,-1,-7,7,1]),d.attributes=a(d,"attributes",[{name:"inPosition",size:2,type:u.FLOAT}]),l.call(this,d)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(c,d){l.prototype.resize.call(this,c,d),this.set2f("uResolution",c,d)},beginMask:function(c,d,v){var p=this.gl;if(c.bitmapMask&&p){var g=this.renderer;g.flush(),g.pushFramebuffer(c.mainFramebuffer),p.disable(p.STENCIL_TEST),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==c&&(g.currentMask.mask=c,g.currentMask.camera=v)}},endMask:function(c,d){var v=this.gl,p=this.renderer,g=c.bitmapMask;if(g&&v){p.flush(),p.pushFramebuffer(c.maskFramebuffer),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),p.setBlendMode(0,!0),g.renderWebGL(p,g,d),p.flush(),p.popFramebuffer(),p.popFramebuffer();var m=p.getCurrentStencilMask();m?(v.enable(v.STENCIL_TEST),m.mask.applyStencil(p,m.camera,!0)):p.currentMask.mask=null,p.pipelines.set(this),v.activeTexture(v.TEXTURE1),v.bindTexture(v.TEXTURE_2D,c.maskTexture),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,c.mainTexture),this.set1i("uInvertMaskAlpha",c.invertAlpha),v.drawArrays(this.topology,0,3),p.resetTextures()}}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_FLUSH:i(868),BEFORE_FLUSH:i(869),BIND:i(870),BOOT:i(871),DESTROY:i(872),REBIND:i(873),RESIZE:i(874)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(2),n=i(107),h=new s({initialize:function(l,f,c,d,v){this.pipeline=l,this.name=f,this.renderer=l.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(c,d),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(v),this.createUniforms()},createAttributes:function(u){var l=0,f=0,c=[];this.vertexComponentCount=0;for(var d=0;d<u.length;d++){var v=u[d],p=v.name,g=a(v,"size",1),m=a(v,"type",n.FLOAT),x=m.enum,y=m.size,T=!!v.normalized;c.push({name:p,size:g,type:x,normalized:T,offset:f,enabled:!1,location:-1}),y===4?l+=g:l++,f+=g*y}this.vertexSize=f,this.vertexComponentCount=l,this.attributes=c},bind:function(u,l){return u===void 0&&(u=!1),l===void 0&&(l=!1),l&&this.pipeline.flush(),this.renderer.setProgram(this.program),u&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(u){u===void 0&&(u=!1);for(var l=this.gl,f=this.vertexSize,c=this.attributes,d=this.program,v=0;v<c.length;v++){var p=c[v],g=p.size,m=p.type,x=p.offset,y=p.enabled,T=p.location,S=!!p.normalized;if(u){var C=l.getAttribLocation(d,p.name);C>=0?(l.enableVertexAttribArray(C),l.vertexAttribPointer(C,g,m,S,f,x),p.enabled=!0,p.location=C):C!==-1&&l.disableVertexAttribArray(C)}else y?l.vertexAttribPointer(T,g,m,S,f,x):!y&&T>-1&&(l.disableVertexAttribArray(T),p.location=-1)}return this},createUniforms:function(){var u=this.gl,l=this.program,f=this.uniforms,c,d,v,p=u.getProgramParameter(l,u.ACTIVE_UNIFORMS);for(c=0;c<p;c++){var g=u.getActiveUniform(l,c);if(g){d=g.name,v=u.getUniformLocation(l,d),v!==null&&(f[d]={name:d,location:v,value1:null,value2:null,value3:null,value4:null});var m=d.indexOf("[");m>0&&(d=d.substr(0,m),f.hasOwnProperty(d)||(v=u.getUniformLocation(l,d),v!==null&&(f[d]={name:d,location:v,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(u){return this.uniforms.hasOwnProperty(u)},resetUniform:function(u){var l=this.uniforms[u];return l&&(l.value1=null,l.value2=null,l.value3=null,l.value4=null),this},setUniform1:function(u,l,f,c){var d=this.uniforms[l];return d?((c||d.value1!==f)&&(d.value1=f,this.renderer.setProgram(this.program),u.call(this.gl,d.location,f),this.pipeline.currentShader=this),this):this},setUniform2:function(u,l,f,c,d){var v=this.uniforms[l];return v?((d||v.value1!==f||v.value2!==c)&&(v.value1=f,v.value2=c,this.renderer.setProgram(this.program),u.call(this.gl,v.location,f,c),this.pipeline.currentShader=this),this):this},setUniform3:function(u,l,f,c,d,v){var p=this.uniforms[l];return p?((v||p.value1!==f||p.value2!==c||p.value3!==d)&&(p.value1=f,p.value2=c,p.value3=d,this.renderer.setProgram(this.program),u.call(this.gl,p.location,f,c,d),this.pipeline.currentShader=this),this):this},setUniform4:function(u,l,f,c,d,v,p){var g=this.uniforms[l];return g?((p||g.value1!==f||g.value2!==c||g.value3!==d||g.value4!==v)&&(g.value1=f,g.value2=c,g.value3=d,g.value4=v,this.renderer.setProgram(this.program),u.call(this.gl,g.location,f,c,d,v),this.pipeline.currentShader=this),this):this},set1f:function(u,l){return this.setUniform1(this.gl.uniform1f,u,l)},set2f:function(u,l,f){return this.setUniform2(this.gl.uniform2f,u,l,f)},set3f:function(u,l,f,c){return this.setUniform3(this.gl.uniform3f,u,l,f,c)},set4f:function(u,l,f,c,d){return this.setUniform4(this.gl.uniform4f,u,l,f,c,d)},set1fv:function(u,l){return this.setUniform1(this.gl.uniform1fv,u,l,!0)},set2fv:function(u,l){return this.setUniform1(this.gl.uniform2fv,u,l,!0)},set3fv:function(u,l){return this.setUniform1(this.gl.uniform3fv,u,l,!0)},set4fv:function(u,l){return this.setUniform1(this.gl.uniform4fv,u,l,!0)},set1iv:function(u,l){return this.setUniform1(this.gl.uniform1iv,u,l,!0)},set2iv:function(u,l){return this.setUniform1(this.gl.uniform2iv,u,l,!0)},set3iv:function(u,l){return this.setUniform1(this.gl.uniform3iv,u,l,!0)},set4iv:function(u,l){return this.setUniform1(this.gl.uniform4iv,u,l,!0)},set1i:function(u,l){return this.setUniform1(this.gl.uniform1i,u,l)},set2i:function(u,l,f){return this.setUniform2(this.gl.uniform2i,u,l,f)},set3i:function(u,l,f,c){return this.setUniform3(this.gl.uniform3i,u,l,f,c)},set4i:function(u,l,f,c,d){return this.setUniform4(this.gl.uniform4i,u,l,f,c,d)},setMatrix2fv:function(u,l,f){return this.setUniform2(this.gl.uniformMatrix2fv,u,l,f,!0)},setMatrix3fv:function(u,l,f){return this.setUniform2(this.gl.uniformMatrix3fv,u,l,f,!0)},setMatrix4fv:function(u,l,f){return this.setUniform2(this.gl.uniformMatrix4fv,u,l,f,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(59),n=i(2),h=i(875),u=i(876),l=i(25),f=i(107),c=i(58),d=new s({Extends:c,initialize:function(p){p.fragShader=n(p,"fragShader",h),p.vertShader=n(p,"vertShader",u),p.attributes=n(p,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:f.UNSIGNED_BYTE,normalized:!0}]),c.call(this,p),this.calcMatrix=new l,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(v,p,g,m,x,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(x,T);var S=v+g,C=p+m,E=T.getX(v,p),P=T.getY(v,p),M=T.getX(v,C),R=T.getY(v,C),A=T.getX(S,C),O=T.getY(S,C),F=T.getX(S,p),b=T.getY(S,p),w=this.fillTint;this.batchQuad(E,P,M,R,A,O,F,b,w.TL,w.TR,w.BL,w.BR)},batchFillTriangle:function(v,p,g,m,x,y,T,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(T,C);var E=C.getX(v,p),P=C.getY(v,p),M=C.getX(g,m),R=C.getY(g,m),A=C.getX(x,y),O=C.getY(x,y),F=this.fillTint;this.batchTri(E,P,M,R,A,O,F.TL,F.TR,F.BL)},batchStrokeTriangle:function(v,p,g,m,x,y,T,S,C){var E=this.tempTriangle;E[0].x=v,E[0].y=p,E[0].width=T,E[1].x=g,E[1].y=m,E[1].width=T,E[2].x=x,E[2].y=y,E[2].width=T,E[3].x=v,E[3].y=p,E[3].width=T,this.batchStrokePath(E,T,!1,S,C)},batchFillPath:function(v,p,g){this.renderer.pipelines.set(this);var m=this.calcMatrix;g&&g.multiply(p,m);for(var x=v.length,y=this.polygonCache,T,S,C=this.fillTint.TL,E=this.fillTint.TR,P=this.fillTint.BL,M=0;M<x;++M)S=v[M],y.push(S.x,S.y);T=a(y),x=T.length;for(var R=0;R<x;R+=3){var A=T[R+0]*2,O=T[R+1]*2,F=T[R+2]*2,b=y[A+0],w=y[A+1],N=y[O+0],V=y[O+1],W=y[F+0],U=y[F+1],D=m.getX(b,w),L=m.getY(b,w),I=m.getX(N,V),B=m.getY(N,V),G=m.getX(W,U),z=m.getY(W,U);this.batchTri(D,L,I,B,G,z,C,E,P)}y.length=0},batchStrokePath:function(v,p,g,m,x){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=v.length-1,T=0;T<y;T++){var S=v[T],C=v[T+1];this.batchLine(S.x,S.y,C.x,C.y,S.width/2,C.width/2,p,T,!g&&T===y-1,m,x)}},batchLine:function(v,p,g,m,x,y,T,S,C,E,P){this.renderer.pipelines.set(this);var M=this.calcMatrix;P&&P.multiply(E,M);var R=g-v,A=m-p,O=Math.sqrt(R*R+A*A),F=x*(m-p)/O,b=x*(v-g)/O,w=y*(m-p)/O,N=y*(v-g)/O,V=g-w,W=m-N,U=v-F,D=p-b,L=g+w,I=m+N,B=v+F,G=p+b,z=M.getX(V,W),Y=M.getY(V,W),X=M.getX(U,D),H=M.getY(U,D),$=M.getX(L,I),k=M.getY(L,I),K=M.getX(B,G),Z=M.getY(B,G),j=this.strokeTint,J=j.TL,q=j.TR,ot=j.BL,nt=j.BR;if(this.batchQuad(K,Z,X,H,z,Y,$,k,J,q,ot,nt),!(T<=2)){var tt=this.prevQuad,Q=this.firstQuad;S>0&&tt[4]?this.batchQuad(K,Z,X,H,tt[0],tt[1],tt[2],tt[3],J,q,ot,nt):(Q[0]=K,Q[1]=Z,Q[2]=X,Q[3]=H,Q[4]=1),C&&Q[4]?this.batchQuad(z,Y,$,k,Q[0],Q[1],Q[2],Q[3],J,q,ot,nt):(tt[0]=z,tt[1]=Y,tt[2]=$,tt[3]=k,tt[4]=1)}},batchVert:function(v,p,g){var m=this.vertexViewF32,x=this.vertexViewU32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;m[++y]=v,m[++y]=p,x[++y]=g,this.vertexCount++},batchQuad:function(v,p,g,m,x,y,T,S,C,E,P,M){var R=!1;return this.shouldFlush(6)&&(this.flush(),R=!0),this.batchVert(v,p,C),this.batchVert(g,m,P),this.batchVert(x,y,M),this.batchVert(v,p,C),this.batchVert(x,y,M),this.batchVert(T,S,E),R},batchTri:function(v,p,g,m,x,y,T,S,C){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(v,p,T),this.batchVert(g,m,S),this.batchVert(x,y,C),E},destroy:function(){return c.prototype.destroy.call(this),this.polygonCache=null,this}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(2),n=i(877),h=i(108),u=i(3),l=i(58),f=10,c=new u,d=new s({Extends:h,initialize:function(p){f=p.game.renderer.config.maxLights;for(var g=a(p,"fragShader",n),m=[],x=1;x<=f;x++)m.push({name:"lights"+x,fragShader:g.replace("%LIGHT_COUNT%",x.toString())});p.shaders=m,h.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){l.prototype.boot.call(this);var v=this.gl,p=v.createTexture();v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,p),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,1,1,0,v.RGBA,v.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p};for(var g=0;g<this.shaders.length;g++)this["lightShader"+(g+1)]=this.shaders[g]},onRender:function(v,p){var g=v.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var m=g.getLights(p),x=m.length;if(x!==0){this.lightsActive=!0,this.setShader(this["lightShader"+x],!0);var y,T=this.renderer,S=T.height,C=p.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),y=0;y<x;y++){var E=m[y].light,P=E.color,M="uLights["+y+"].";C.transformPoint(E.x,E.y,c),this.set2f(M+"position",c.x-p.scrollX*E.scrollFactorX*p.zoom,S-(c.y-p.scrollY*E.scrollFactorY*p.zoom)),this.set3f(M+"color",P.r,P.g,P.b),this.set1f(M+"intensity",E.intensity),this.set1f(M+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(v){if(v!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(v){var g=-v,m=Math.cos(g),x=Math.sin(g);p[1]=x,p[3]=-x,p[0]=p[4]=m}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=v}},setTexture2D:function(v,p){var g=this.renderer;v===void 0&&(v=g.tempTextures[0]);var m=this.getNormalMap(p);g.isNewNormalMap(v,m)&&(this.flush(),g.setTextureZero(v),g.setNormalMap(m));var x=p?p.rotation:0;return this.setNormalMapRotation(x),this.currentUnit=0,0},setGameObject:function(v,p){p===void 0&&(p=v.frame);var g=this.renderer,m=p.glTexture,x=this.getNormalMap(v);return g.isNewNormalMap()&&(this.flush(),g.setTextureZero(m),g.setNormalMap(x)),this.setNormalMapRotation(v.rotation),this.currentUnit=0,0},getNormalMap:function(v){var p;return v?v.displayTexture?p=v.displayTexture.dataSource[v.displayFrame.sourceIndex]:v.texture?p=v.texture.dataSource[v.frame.sourceIndex]:v.tileset&&(Array.isArray(v.tileset)?p=v.tileset[0].image.dataSource[0]:p=v.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(v,p,g){this.lightsActive&&h.prototype.batchSprite.call(this,v,p,g)},batchTexture:function(v,p,g,m,x,y,T,S,C,E,P,M,R,A,O,F,b,w,N,V,W,U,D,L,I,B,G,z,Y,X,H,$){this.lightsActive&&h.prototype.batchTexture.call(this,v,p,g,m,x,y,T,S,C,E,P,M,R,A,O,F,b,w,N,V,W,U,D,L,I,B,G,z,Y,X,H,$)},batchTextureFrame:function(v,p,g,m,x,y,T){this.lightsActive&&h.prototype.batchTextureFrame.call(this,v,p,g,m,x,y,T)}});d.LIGHT_COUNT=f,e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(2),n=i(880),h=i(881),u=i(58),l=new s({Extends:u,initialize:function(c){c.vertShader=a(c,"vertShader",h),c.fragShader=a(c,"fragShader",n),c.attributes=a(c,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),u.call(this,c)},onRender:function(f,c){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",c.zoom)},batchPointLight:function(f,c,d,v,p,g,m,x,y,T,S,C){var E=f.color,P=f.intensity,M=f.radius,R=f.attenuation,A=E.r*P,O=E.g*P,F=E.b*P,b=c.alpha*f.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(d,v,S,C,M,R,A,O,F,b),this.batchLightVert(p,g,S,C,M,R,A,O,F,b),this.batchLightVert(m,x,S,C,M,R,A,O,F,b),this.batchLightVert(d,v,S,C,M,R,A,O,F,b),this.batchLightVert(m,x,S,C,M,R,A,O,F,b),this.batchLightVert(y,T,S,C,M,R,A,O,F,b)},batchLightVert:function(f,c,d,v,p,g,m,x,y,T){var S=this.vertexViewF32,C=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++C]=f,S[++C]=c,S[++C]=d,S[++C]=v,S[++C]=p,S[++C]=g,S[++C]=m,S[++C]=x,S[++C]=y,S[++C]=T,this.vertexCount++}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(2),n=i(108),h=new s({Extends:n,initialize:function(l){l.topology=5,l.batchSize=a(l,"batchSize",256),n.call(this,l)}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(2),n=i(108),h=i(882),u=i(883),l=i(58),f=new s({Extends:n,initialize:function(d){d.fragShader=a(d,"fragShader",h),d.vertShader=a(d,"vertShader",u),d.forceZero=!0,n.call(this,d)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0)}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(884),a=i(35),n=i(0),h=i(198),u=i(885),l=i(886),f=i(2),c=i(887),d=i(382),v=i(58),p=new n({Extends:v,initialize:function(m){m.renderTarget=f(m,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),m.vertShader=f(m,"vertShader",d),m.shaders=f(m,"shaders",[{name:"Copy",fragShader:l},{name:"AddBlend",fragShader:s},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:u}]),m.attributes=f(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],m.batchSize=1,v.call(this,m),this.colorMatrix=new h,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){v.prototype.boot.call(this);var g=this.shaders,m=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(g,m,x,y,T){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0);var S=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),m?(S.viewport(0,0,m.width,m.height),S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0)):S.viewport(0,0,g.width,g.height),y&&(T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blitFrame:function(g,m,x,y,T,S){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0),S===void 0&&(S=!1);var C=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),g.height>m.height)C.viewport(0,0,g.width,g.height),this.setTargetUVs(g,m);else{var E=m.height-g.height;C.viewport(0,E,g.width,g.height)}if(C.bindFramebuffer(C.FRAMEBUFFER,m.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,m.texture,0),y&&(T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),S){var P=this.renderer.currentBlendMode;this.renderer.setBlendMode(a.ERASE)}C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),S&&this.renderer.setBlendMode(P),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,m,x,y,T,S,C,E){C===void 0&&(C=!0),E===void 0&&(E=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,g.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,g.texture,0),C&&(E?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,m.texture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,x,y,T,S),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(g){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,g.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(g,m,x,y){x===void 0&&(x=!0),y===void 0&&(y=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g.texture),m?(T.viewport(0,0,m.width,m.height),T.bindFramebuffer(T.FRAMEBUFFER,m.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,m.texture,0)):T.viewport(0,0,g.width,g.height),x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(g,m,x,y,T,S){y===void 0&&(y=1),T===void 0&&(T=!0),S===void 0&&(S=this.linearShader);var C=this.gl;this.setShader(S),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,m.texture),x?(C.bindFramebuffer(C.FRAMEBUFFER,x.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,x.texture,0),C.viewport(0,0,x.width,x.height)):C.viewport(0,0,g.width,g.height),T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blendFramesAdditive:function(g,m,x,y,T){this.blendFrames(g,m,x,y,T,this.addShader)},clearFrame:function(g,m){m===void 0&&(m=!0);var x=this.gl;x.viewport(0,0,g.width,g.height),x.bindFramebuffer(x.FRAMEBUFFER,g.framebuffer),m?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;x.bindFramebuffer(x.FRAMEBUFFER,y)},setUVs:function(g,m,x,y,T,S,C,E){var P=this.vertexViewF32;P[2]=g,P[3]=m,P[6]=x,P[7]=y,P[10]=T,P[11]=S,P[14]=g,P[15]=m,P[18]=T,P[19]=S,P[22]=C,P[23]=E},setTargetUVs:function(g,m){var x=m.height/g.height;x>.5?x=.5-(x-.5):x=.5+(.5-x),this.setUVs(0,x,0,1+x,1,1+x,1,x)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});e.exports=p},function(e,r){e.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),a=i(38),n=i(2),h=function(u,l){var f=u.getContext("experimental-webgl"),c=n(l,"callback"),d=n(l,"type","image/png"),v=n(l,"encoder",.92),p=n(l,"x",0),g=n(l,"y",0),m=n(l,"getPixel",!1),x=n(l,"isFramebuffer",!1),y=x?n(l,"bufferWidth",1):f.drawingBufferWidth,T=x?n(l,"bufferHeight",1):f.drawingBufferHeight;if(m){var S=new Uint8Array(4),C=x?g:T-g;f.readPixels(p,C,1,1,f.RGBA,f.UNSIGNED_BYTE,S),c.call(null,new a(S[0],S[1],S[2],S[3]/255))}else{var E=n(l,"width",y),P=n(l,"height",T),M=E*P*4,R=new Uint8Array(M);f.readPixels(p,T-g-P,E,P,f.RGBA,f.UNSIGNED_BYTE,R);for(var A=s.createWebGL(this,E,P),O=A.getContext("2d"),F=O.getImageData(0,0,E,P),b=F.data,w=0;w<P;w++)for(var N=0;N<E;N++){var V=((P-w-1)*E+N)*4,W=(w*E+N)*4;b[W+0]=R[V+0],b[W+1]=R[V+1],b[W+2]=R[V+2],b[W+3]=R[V+3]}O.putImageData(F,0,0);var U=new Image;U.onerror=function(){c.call(null),s.remove(A)},U.onload=function(){c.call(null,U),s.remove(A)},U.src=A.toDataURL(d,v)}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(33),a=function(n){var h=n.config;if(!h.hideBanner){var u="WebGL";h.renderType===s.CANVAS?u="Canvas":h.renderType===s.HEADLESS&&(u="Headless");var l=h.audio,f=n.device.audio,c;if(f.webAudio&&!l.disableWebAudio?c="Web Audio":l.noAudio||!f.webAudio&&!f.audioData?c="No Audio":c="HTML5 Audio",n.device.browser.ie)window.console&&console.log("Phaser v"+s.VERSION+" / https://phaser.io");else{var d="",v=[d];if(Array.isArray(h.bannerBackgroundColor)){var p;h.bannerBackgroundColor.forEach(function(m){d=d.concat("%c "),v.push("background: "+m),p=m}),v[v.length-1]="color: "+h.bannerTextColor+"; background: "+p}else d=d.concat("%c "),v.push("color: "+h.bannerTextColor+"; background: "+h.bannerBackgroundColor);v.push("background: transparent"),h.gameTitle&&(d=d.concat(h.gameTitle),h.gameVersion&&(d=d.concat(" v"+h.gameVersion)),h.hidePhaser||(d=d.concat(" / ")));var g="";h.hidePhaser||(d=d.concat("Phaser v"+s.VERSION+g+" ("+u+" | "+c+")")),d=d.concat(" %c "+h.gameURL),v[0]=d,console.log.apply(console,v)}}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(6),n=i(1),h=i(386),u=new s({initialize:function(f,c){this.game=f,this.raf=new h,this.started=!1,this.running=!1,this.minFps=a(c,"min",5),this.targetFps=a(c,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=n,this.forceSetTimeOut=a(c,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=a(c,"deltaHistory",10),this.panicMax=a(c,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=a(c,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var l=window.performance.now();this.time=l,this.lastTime=l,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0;for(var f=0;f<this.deltaSmoothingMax;f++)this.deltaHistory[f]=Math.min(this._target,this.deltaHistory[f]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(l){if(this.started)return this;this.started=!0,this.running=!0;for(var f=0;f<this.deltaSmoothingMax;f++)this.deltaHistory[f]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=l,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var l=window.performance.now();this.now=l;var f=l-this.lastTime;f<0&&(f=0),this.rawDelta=f;var c=this.deltaIndex,d=this.deltaHistory,v=this.deltaSmoothingMax,p=f,g=f;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,p=Math.min(p,this._target)),p>this._min&&(p=d[c],p=Math.min(p,this._min)),d[c]=p,this.deltaIndex++,this.deltaIndex>v&&(this.deltaIndex=0),g=0;for(var m=0;m<v;m++)g+=d[m];g/=v}this.delta=g,this.time+=this.rawDelta,l>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0),this.framesThisSecond++;var x=g/this._target;this.callback(l,g,x),this.lastTime=l,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(l){this.running||(l&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=n,this.raf=null,this.game=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(1),n=new s({initialize:function(){this.isRunning=!1,this.callback=a,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var u=this;this.step=function l(){var f=window.performance.now();u.lastTime=u.tick,u.tick=f,u.callback(f),u.timeOutID=window.requestAnimationFrame(l)},this.stepTimeout=function l(){var f=Date.now(),c=Math.min(Math.max(u.target*2+u.tick-f,0),u.target);u.lastTime=u.tick,u.tick=f,u.callback(f),u.timeOutID=window.setTimeout(l,c)}},start:function(h,u,l){this.isRunning||(this.callback=h,this.isSetTimeOut=u,this.target=l,this.isRunning=!0,this.timeOutID=u?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=a}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(22),a=function(n){var h,u=n.events;if(document.hidden!==void 0)h="visibilitychange";else{var l=["webkit","moz","ms"];l.forEach(function(c){document[c+"Hidden"]!==void 0&&(document.hidden=function(){return document[c+"Hidden"]},h=c+"visibilitychange")})}var f=function(c){document.hidden||c.type==="pause"?u.emit(s.HIDDEN):u.emit(s.VISIBLE)};h&&document.addEventListener(h,f,!1),window.onblur=function(){u.emit(s.BLUR)},window.onfocus=function(){u.emit(s.FOCUS)},window.focus&&n.config.autoFocus&&window.focus()};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(389),a=i(31),n=i(6),h=function(u){var l=n(u,"data",[]),f=n(u,"canvas",null),c=n(u,"palette",s),d=n(u,"pixelWidth",1),v=n(u,"pixelHeight",d),p=n(u,"resizeCanvas",!0),g=n(u,"clearCanvas",!0),m=n(u,"preRender",null),x=n(u,"postRender",null),y=Math.floor(Math.abs(l[0].length*d)),T=Math.floor(Math.abs(l.length*v));f||(f=a.create2D(this,y,T),p=!1,g=!1),p&&(f.width=y,f.height=T);var S=f.getContext("2d");g&&S.clearRect(0,0,y,T),m&&m(f,S);for(var C=0;C<l.length;C++)for(var E=l[C],P=0;P<E.length;P++){var M=E[P];M!=="."&&M!==" "&&(S.fillStyle=c[M],S.fillRect(P*d,C*v,d,v))}return x&&x(f,S),f};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(358),n=i(94),h=i(3),u=new s({Extends:n,initialize:function(f,c,d,v){n.call(this,"CubicBezierCurve"),Array.isArray(f)&&(v=new h(f[6],f[7]),d=new h(f[4],f[5]),c=new h(f[2],f[3]),f=new h(f[0],f[1])),this.p0=f,this.p1=c,this.p2=d,this.p3=v},getStartPoint:function(l){return l===void 0&&(l=new h),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,f){f===void 0&&(f=new h);var c=this.p0,d=this.p1,v=this.p2,p=this.p3;return f.set(a(l,c.x,d.x,v.x,p.x),a(l,c.y,d.y,v.y,p.y))},draw:function(l,f){f===void 0&&(f=32);var c=this.getPoints(f);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var d=1;d<c.length;d++)l.lineTo(c[d].x,c[d].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});u.fromJSON=function(l){var f=l.points,c=new h(f[0],f[1]),d=new h(f[2],f[3]),v=new h(f[4],f[5]),p=new h(f[6],f[7]);return new u(c,d,v,p)},e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(94),n=i(36),h=i(6),u=i(196),l=i(3),f=new s({Extends:a,initialize:function(d,v,p,g,m,x,y,T){if(typeof d=="object"){var S=d;d=h(S,"x",0),v=h(S,"y",0),p=h(S,"xRadius",0),g=h(S,"yRadius",p),m=h(S,"startAngle",0),x=h(S,"endAngle",360),y=h(S,"clockwise",!1),T=h(S,"rotation",0)}else g===void 0&&(g=p),m===void 0&&(m=0),x===void 0&&(x=360),y===void 0&&(y=!1),T===void 0&&(T=0);a.call(this,"EllipseCurve"),this.p0=new l(d,v),this._xRadius=p,this._yRadius=g,this._startAngle=n(m),this._endAngle=n(x),this._clockwise=y,this._rotation=n(T)},getStartPoint:function(c){return c===void 0&&(c=new l),this.getPoint(0,c)},getResolution:function(c){return c*2},getPoint:function(c,d){d===void 0&&(d=new l);for(var v=Math.PI*2,p=this._endAngle-this._startAngle,g=Math.abs(p)<Number.EPSILON;p<0;)p+=v;for(;p>v;)p-=v;p<Number.EPSILON&&(g?p=0:p=v),this._clockwise&&!g&&(p===v?p=-v:p=p-v);var m=this._startAngle+c*p,x=this.p0.x+this._xRadius*Math.cos(m),y=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var T=Math.cos(this._rotation),S=Math.sin(this._rotation),C=x-this.p0.x,E=y-this.p0.y;x=C*T-E*S+this.p0.x,y=C*S+E*T+this.p0.y}return d.set(x,y)},setXRadius:function(c){return this.xRadius=c,this},setYRadius:function(c){return this.yRadius=c,this},setWidth:function(c){return this.xRadius=c/2,this},setHeight:function(c){return this.yRadius=c/2,this},setStartAngle:function(c){return this.startAngle=c,this},setEndAngle:function(c){return this.endAngle=c,this},setClockwise:function(c){return this.clockwise=c,this},setRotation:function(c){return this.rotation=c,this},x:{get:function(){return this.p0.x},set:function(c){this.p0.x=c}},y:{get:function(){return this.p0.y},set:function(c){this.p0.y=c}},xRadius:{get:function(){return this._xRadius},set:function(c){this._xRadius=c}},yRadius:{get:function(){return this._yRadius},set:function(c){this._yRadius=c}},startAngle:{get:function(){return u(this._startAngle)},set:function(c){this._startAngle=n(c)}},endAngle:{get:function(){return u(this._endAngle)},set:function(c){this._endAngle=n(c)}},clockwise:{get:function(){return this._clockwise},set:function(c){this._clockwise=c}},angle:{get:function(){return u(this._rotation)},set:function(c){this._rotation=n(c)}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:u(this._startAngle),endAngle:u(this._endAngle),clockwise:this._clockwise,rotation:u(this._rotation)}}});f.fromJSON=function(c){return new f(c)},e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(94),n=i(199),h=i(10),u=i(3),l=new s({Extends:a,initialize:function(c,d){a.call(this,"LineCurve"),Array.isArray(c)&&(d=new u(c[2],c[3]),c=new u(c[0],c[1])),this.p0=c,this.p1=d,this.arcLengthDivisions=1},getBounds:function(f){return f===void 0&&(f=new h),n([this.p0,this.p1],f)},getStartPoint:function(f){return f===void 0&&(f=new u),f.copy(this.p0)},getResolution:function(f){return f===void 0&&(f=1),f},getPoint:function(f,c){return c===void 0&&(c=new u),f===1?c.copy(this.p1):(c.copy(this.p1).subtract(this.p0).scale(f).add(this.p0),c)},getPointAt:function(f,c){return this.getPoint(f,c)},getTangent:function(f,c){return c===void 0&&(c=new u),c.copy(this.p1).subtract(this.p0).normalize(),c},getUtoTmapping:function(f,c,d){var v;if(c){var p=this.getLengths(d),g=p[p.length-1],m=Math.min(c,g);v=m/g}else v=f;return v},draw:function(f){return f.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),f},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});l.fromJSON=function(f){var c=f.points,d=new u(c[0],c[1]),v=new u(c[2],c[3]);return new l(d,v)},e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(3),n=new s({initialize:function(u,l){this.active=!1,this.p0=new a(u,l)},getPoint:function(h,u){return u===void 0&&(u=new a),u.copy(this.p0)},getPointAt:function(h,u){return this.getPoint(h,u)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(94),n=i(359),h=i(3),u=new s({Extends:a,initialize:function(f,c,d){a.call(this,"QuadraticBezier"),Array.isArray(f)&&(d=new h(f[4],f[5]),c=new h(f[2],f[3]),f=new h(f[0],f[1])),this.p0=f,this.p1=c,this.p2=d},getStartPoint:function(l){return l===void 0&&(l=new h),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,f){f===void 0&&(f=new h);var c=this.p0,d=this.p1,v=this.p2;return f.set(n(l,c.x,d.x,v.x),n(l,c.y,d.y,v.y))},draw:function(l,f){f===void 0&&(f=32);var c=this.getPoints(f);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var d=1;d<c.length;d++)l.lineTo(c[d].x,c[d].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});u.fromJSON=function(l){var f=l.points,c=new h(f[0],f[1]),d=new h(f[2],f[3]),v=new h(f[4],f[5]);return new u(c,d,v)},e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(194),a=i(0),n=i(94),h=i(3),u=new a({Extends:n,initialize:function(f){f===void 0&&(f=[]),n.call(this,"SplineCurve"),this.points=[],this.addPoints(f)},addPoints:function(l){for(var f=0;f<l.length;f++){var c=new h;typeof l[f]=="number"?(c.x=l[f],c.y=l[f+1],f++):Array.isArray(l[f])?(c.x=l[f][0],c.y=l[f][1]):(c.x=l[f].x,c.y=l[f].y),this.points.push(c)}return this},addPoint:function(l,f){var c=new h(l,f);return this.points.push(c),c},getStartPoint:function(l){return l===void 0&&(l=new h),l.copy(this.points[0])},getResolution:function(l){return l*this.points.length},getPoint:function(l,f){f===void 0&&(f=new h);var c=this.points,d=(c.length-1)*l,v=Math.floor(d),p=d-v,g=c[v===0?v:v-1],m=c[v],x=c[v>c.length-2?c.length-1:v+1],y=c[v>c.length-3?c.length-1:v+2];return f.set(s(p,g.x,m.x,x.x,y.x),s(p,g.y,m.y,x.y,y.y))},toJSON:function(){for(var l=[],f=0;f<this.points.length;f++)l.push(this.points[f].x),l.push(this.points[f].y);return{type:this.type,points:l}}});u.fromJSON=function(l){return new u(l.points)},e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u,l,f){(!u||u==="")&&(u=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!l||l==="")&&(l=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),f===void 0&&(f=null),this.key=h,this.fragmentSrc=u,this.vertexSrc=l,this.uniforms=f}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38);s.ColorSpectrum=i(909),s.ColorToRGBA=i(910),s.ComponentToHex=i(398),s.GetColor=i(103),s.GetColor32=i(328),s.HexStringToColor=i(327),s.HSLToColor=i(911),s.HSVColorWheel=i(912),s.HSVToRGB=i(188),s.HueToComponent=i(399),s.IntegerToColor=i(189),s.IntegerToRGB=i(330),s.Interpolate=i(913),s.ObjectToColor=i(331),s.RandomRGB=i(914),s.RGBStringToColor=i(332),s.RGBToHSV=i(329),s.RGBToString=i(915),s.ValueToColor=i(187),e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a=s.toString(16);return a.length===1?"0"+a:a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return n<0&&(n+=1),n>1&&(n-=1),n<.16666666666666666?s+(a-s)*6*n:n<.5?a:n<.6666666666666666?s+(a-s)*(.6666666666666666-n)*6:s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(105),a=function(n){if(document.readyState==="complete"||document.readyState==="interactive"){n();return}var h=function(){document.removeEventListener("deviceready",h,!0),document.removeEventListener("DOMContentLoaded",h,!0),window.removeEventListener("load",h,!0),n()};document.body?s.cordova?document.addEventListener("deviceready",h,!1):(document.addEventListener("DOMContentLoaded",h,!0),window.addEventListener("load",h,!0)):window.setTimeout(h,20)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){if(!s)return window.innerHeight;var a=Math.abs(window.orientation),n={w:0,h:0},h=document.createElement("div");return h.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(h),n.w=a===90?h.offsetHeight:window.innerWidth,n.h=a===90?window.innerWidth:h.offsetHeight,document.documentElement.removeChild(h),h=null,Math.abs(window.orientation)!==90?n.h:n.w};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(201),a=function(n,h){var u=window.screen,l=u?u.orientation||u.mozOrientation||u.msOrientation:!1;if(l&&typeof l.type=="string")return l.type;if(typeof l=="string")return l;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return s.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return s.ORIENTATION.LANDSCAPE}else return h>n?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a;return s!==""&&(typeof s=="string"?a=document.getElementById(s):s&&s.nodeType===1&&(a=s)),a||(a=document.body),a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a="";try{if(window.DOMParser){var n=new DOMParser;a=n.parseFromString(s,"text/xml")}else a=new ActiveXObject("Microsoft.XMLDOM"),a.loadXML(s)}catch{a=null}return!a||!a.documentElement||a.getElementsByTagName("parsererror").length?null:a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(203),n=i(9),h=i(51),u=i(22),l=i(410),f=i(411),c=i(412),d=i(413),v=i(25),p=i(177),g=new s({initialize:function(x,y){this.game=x,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new n,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new l(this):null,this.mouse=y.inputMouse?new f(this):null,this.touch=y.inputTouch?new d(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers,y.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var S=new c(this,T);S.smoothFactor=y.inputSmoothFactor,this.pointers.push(S)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new v,this._tempMatrix2=new v,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],x.events.once(u.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(h.MANAGER_BOOT),this.game.events.on(u.PRE_RENDER,this.preRender,this),this.game.events.once(u.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(h.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(h.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,x=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(h.MANAGER_UPDATE);for(var T=0;T<y.length;T++){var S=y[T];if(S.sys.input&&S.sys.input.updatePoll(m,x)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var x=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var y=0;y<m;y++){var T=this.pointers.length,S=new c(this,T);S.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(S),this.pointersTotal++,x.push(S)}return x},updateInputPlugins:function(m,x){var y=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<y.length;T++){var S=y[T];if(S.sys.input){var C=S.sys.input.update(m,x);if(C&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(!E.active){E.touchstart(S,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(a.TOUCH_START,y)},onTouchMove:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(E.active&&E.identifier===S.identifier){E.touchmove(S,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(a.TOUCH_MOVE,y)},onTouchEnd:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(E.active&&E.identifier===S.identifier){E.touchend(S,m),y.push(E);break}}this.updateInputPlugins(a.TOUCH_END,y)},onTouchCancel:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(E.active&&E.identifier===S.identifier){E.touchcancel(S,m),y.push(E);break}}this.updateInputPlugins(a.TOUCH_CANCEL,y)},onMouseDown:function(m){var x=this.mousePointer;x.down(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(a.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var x=this.mousePointer;x.move(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(a.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var x=this.mousePointer;x.up(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(a.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var x=this.mousePointer;x.wheel(m),this.activePointer=x,this.updateInputPlugins(a.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var x=this.mouse.locked;this.mousePointer.locked=x,this.events.emit(h.POINTERLOCK_CHANGE,m,x)},inputCandidate:function(m,x){var y=m.input;if(!y||!y.enabled||!y.alwaysEnabled&&!m.willRender(x))return!1;var T=!0,S=m.parentContainer;if(S)do{if(!S.willRender(x)){T=!1;break}S=S.parentContainer}while(S);return T},hitTest:function(m,x,y,T){T===void 0&&(T=this._tempHitTest);var S=this._tempPoint,C=y.scrollX,E=y.scrollY;T.length=0;var P=m.x,M=m.y;y.getWorldPoint(P,M,S),m.worldX=S.x,m.worldY=S.y;for(var R={x:0,y:0},A=this._tempMatrix,O=this._tempMatrix2,F=0;F<x.length;F++){var b=x[F];if(!!this.inputCandidate(b,y)){var w=S.x+C*b.scrollFactorX-C,N=S.y+E*b.scrollFactorY-E;b.parentContainer?(b.getWorldTransformMatrix(A,O),A.applyInverse(w,N,R)):p(w,N,b.x,b.y,b.rotation,b.scaleX,b.scaleY,R),this.pointWithinHitArea(b,R.x,R.y)&&T.push(b)}}return T},pointWithinHitArea:function(m,x,y){x+=m.displayOriginX,y+=m.displayOriginY;var T=m.input;return T&&T.hitAreaCallback(T.hitArea,x,y,m)?(T.localX=x,T.localY=y,!0):!1},pointWithinInteractiveObject:function(m,x,y){return m.hitArea?(x+=m.gameObject.displayOriginX,y+=m.gameObject.displayOriginY,m.localX=x,m.localY=y,m.hitAreaCallback(m.hitArea,x,y,m)):!1},transformPointer:function(m,x,y,T){var S=m.position,C=m.prevPosition;C.x=S.x,C.y=S.y;var E=this.scaleManager.transformX(x),P=this.scaleManager.transformY(y),M=m.smoothFactor;!T||M===0?(S.x=E,S.y=P):(S.x=E*M+C.x*(1-M),S.y=P*M+C.y*(1-M))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(u.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(93),a=i(0),n=i(22),h=i(51),u=i(143),l=i(1),f=new a({initialize:function(d){this.manager=d,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=l,this.onKeyUp=l,d.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputKeyboard,this.target=c.inputKeyboardEventTarget,this.addCapture(c.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(n.POST_STEP,this.postUpdate,this)},startListeners:function(){var c=this;this.onKeyDown=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(h.MANAGER_PROCESS);var p=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!p&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}},this.onKeyUp=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(h.MANAGER_PROCESS);var p=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!p&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}};var d=this.target;d&&(d.addEventListener("keydown",this.onKeyDown,!1),d.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var c=this.target;c.removeEventListener("keydown",this.onKeyDown,!1),c.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var d=this.captures,v=0;v<c.length;v++){var p=c[v];typeof p=="string"&&(p=u[p.trim().toUpperCase()]),d.indexOf(p)===-1&&d.push(p)}this.preventDefault=d.length>0},removeCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var d=this.captures,v=0;v<c.length;v++){var p=c[v];typeof p=="string"&&(p=u[p.toUpperCase()]),s(d,p)}this.preventDefault=d.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(n.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(191),n=i(51),h=i(1),u=new s({initialize:function(f){this.manager=f,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=h,this.onMouseDown=h,this.onMouseUp=h,this.onMouseDownWindow=h,this.onMouseUpWindow=h,this.onMouseOver=h,this.onMouseOut=h,this.onMouseWheel=h,this.pointerLockChange=h,this.isTop=!0,f.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputMouse,this.target=l.inputMouseEventTarget,this.passive=l.inputMousePassive,this.preventDefaultDown=l.inputMousePreventDefaultDown,this.preventDefaultUp=l.inputMousePreventDefaultUp,this.preventDefaultMove=l.inputMousePreventDefaultMove,this.preventDefaultWheel=l.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},requestPointerLock:function(){if(a.pointerLock){var l=this.target;l.requestPointerLock=l.requestPointerLock||l.mozRequestPointerLock||l.webkitRequestPointerLock,l.requestPointerLock()}},releasePointerLock:function(){a.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var l=this.target;if(!!l){var f=this,c=this.manager,d=c.canvas,v=window&&window.focus&&c.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&(c.onMouseMove(g),f.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){v&&window.focus(),!g.defaultPrevented&&f.enabled&&c&&c.enabled&&(c.onMouseDown(g),f.preventDefaultDown&&g.target===d&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&g.target!==d&&c.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&(c.onMouseUp(g),f.preventDefaultUp&&g.target===d&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&g.target!==d&&c.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&c.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&c.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&c.onMouseWheel(g),f.preventDefaultWheel&&g.target===d&&g.preventDefault()};var p={passive:!0};if(l.addEventListener("mousemove",this.onMouseMove),l.addEventListener("mousedown",this.onMouseDown),l.addEventListener("mouseup",this.onMouseUp),l.addEventListener("mouseover",this.onMouseOver,p),l.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?l.addEventListener("wheel",this.onMouseWheel,{passive:!1}):l.addEventListener("wheel",this.onMouseWheel,p),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}a.pointerLock&&(this.pointerLockChange=function(g){var m=f.target;f.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,c.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("mousemove",this.onMouseMove),l.removeEventListener("mousedown",this.onMouseDown),l.removeEventListener("mouseup",this.onMouseUp),l.removeEventListener("mouseover",this.onMouseOver),l.removeEventListener("mouseout",this.onMouseOut),window&&(l=this.isTop?window.top:window,l.removeEventListener("mousedown",this.onMouseDownWindow),l.removeEventListener("mouseup",this.onMouseUpWindow)),a.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(349),a=i(0),n=i(50),h=i(124),u=i(360),l=i(3),f=i(105),c=new a({initialize:function(v,p){this.manager=v,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new l,this.prevPosition=new l,this.midPoint=new l(-1,-1),this.velocity=new l,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(d){var v=d.getWorldPoint(this.x,this.y);return this.worldX=v.x,this.worldY=v.y,this},positionToCamera:function(d,v){return d.getWorldPoint(this.x,this.y,v)},updateMotion:function(){var d=this.position.x,v=this.position.y,p=this.midPoint.x,g=this.midPoint.y;if(!(d===p&&v===g)){var m=u(this.motionFactor,p,d),x=u(this.motionFactor,g,v);h(m,d,.1)&&(m=d),h(x,v,.1)&&(x=v),this.midPoint.set(m,x);var y=d-m,T=v-x;this.velocity.set(y,T),this.angle=s(m,x,d,v),this.distance=Math.sqrt(y*y+T*T)}},up:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=d.timeStamp,this.wasTouch=!1)},down:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),f.macOS&&d.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=d.timeStamp),this.wasTouch=!1},move:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.locked&&(this.movementX=d.movementX||d.mozMovementX||d.webkitMovementX||0,this.movementY=d.movementY||d.mozMovementY||d.webkitMovementY||0),this.moveTime=d.timeStamp,this.wasTouch=!1},wheel:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.deltaX=d.deltaX,this.deltaY=d.deltaY,this.deltaZ=d.deltaZ,this.wasTouch=!1},touchstart:function(d,v){d.pointerId&&(this.pointerId=d.pointerId),this.identifier=d.identifier,this.target=d.target,this.active=!0,this.buttons=1,this.event=v,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=v.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(d,v){this.event=v,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.moveTime=v.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(d,v){this.buttons=0,this.event=v,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(d,v){this.buttons=0,this.event=v,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(d,v){d===void 0&&(d=10),v===void 0&&(v=[]);for(var p=this.prevPosition.x,g=this.prevPosition.y,m=this.position.x,x=this.position.y,y=0;y<d;y++){var T=1/d*y;v[y]={x:u(T,p,m),y:u(T,g,x)}}return v},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},time:{get:function(){return this.event?this.event.timeStamp:0}}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(51),n=i(1),h=new s({initialize:function(l){this.manager=l,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=n,this.onTouchStartWindow=n,this.onTouchMove=n,this.onTouchEnd=n,this.onTouchEndWindow=n,this.onTouchCancel=n,this.onTouchCancelWindow=n,this.onTouchOver=n,this.onTouchOut=n,l.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputTouch,this.target=u.inputTouchEventTarget,this.capture=u.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),u.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(u){return u.preventDefault(),!1}),this},startListeners:function(){var u=this,l=this.manager.canvas,f=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(p){f&&window.focus(),!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchStart(p),u.capture&&p.cancelable&&p.target===l&&p.preventDefault())},this.onTouchStartWindow=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&p.target!==l&&u.manager.onTouchStart(p)},this.onTouchMove=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchMove(p),u.capture&&p.cancelable&&p.preventDefault())},this.onTouchEnd=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchEnd(p),u.capture&&p.cancelable&&p.target===l&&p.preventDefault())},this.onTouchEndWindow=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&p.target!==l&&u.manager.onTouchEnd(p)},this.onTouchCancel=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchCancel(p),u.capture&&p.preventDefault())},this.onTouchCancelWindow=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&u.manager.onTouchCancel(p)},this.onTouchOver=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&u.manager.setCanvasOver(p)},this.onTouchOut=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&u.manager.setCanvasOut(p)};var c=this.target;if(!!c){var d={passive:!0},v={passive:!1};c.addEventListener("touchstart",this.onTouchStart,this.capture?v:d),c.addEventListener("touchmove",this.onTouchMove,this.capture?v:d),c.addEventListener("touchend",this.onTouchEnd,this.capture?v:d),c.addEventListener("touchcancel",this.onTouchCancel,this.capture?v:d),c.addEventListener("touchover",this.onTouchOver,this.capture?v:d),c.addEventListener("touchout",this.onTouchOut,this.capture?v:d),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,v),window.addEventListener("touchend",this.onTouchEndWindow,v),window.addEventListener("touchcancel",this.onTouchCancelWindow,v)),this.enabled=!0}},stopListeners:function(){var u=this.target;u.removeEventListener("touchstart",this.onTouchStart),u.removeEventListener("touchmove",this.onTouchMove),u.removeEventListener("touchend",this.onTouchEnd),u.removeEventListener("touchcancel",this.onTouchCancel),u.removeEventListener("touchover",this.onTouchOver),u.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(22),n=i(9),h=i(8),u=i(16),l=i(5),f=i(2),c=i(24),d=i(93),v=new s({Extends:n,initialize:function(g){n.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(a.BOOT,this.boot,this)},boot:function(){var p,g,m,x,y,T,S,C=this.game.config,E=C.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),p=0;p<E.length;p++)g=E[p],m=f(g,"key",null),x=f(g,"plugin",null),y=f(g,"start",!1),T=f(g,"mapping",null),S=f(g,"data",null),m&&(x?this.install(m,x,y,T,S):console.warn("Missing `plugin` for key: "+m));for(E=C.installScenePlugins,E=E.concat(this._pendingScene),p=0;p<E.length;p++)g=E[p],m=f(g,"key",null),x=f(g,"plugin",null),T=f(g,"mapping",null),m&&(x?this.installScenePlugin(m,x,T):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(a.DESTROY,this.destroy,this)},addToScene:function(p,g,m){var x,y,T,S=this.game,C=p.scene,E=p.settings.map,P=p.settings.isBooted;for(x=0;x<g.length;x++)y=g[x],S[y]?(p[y]=S[y],E.hasOwnProperty(y)&&(C[E[y]]=p[y])):y==="game"&&E.hasOwnProperty(y)&&(C[E[y]]=S);for(var M=0;M<m.length;M++)for(T=m[M],x=0;x<T.length;x++)if(y=T[x],!!c.hasCore(y)){var R=c.getCore(y),A=R.mapping,O=new R.plugin(C,this,A);p[A]=O,R.custom?C[A]=O:E.hasOwnProperty(A)&&(C[E[A]]=O),P&&O.boot()}for(T=this.plugins,x=0;x<T.length;x++){var F=T[x];F.mapping&&(C[F.mapping]=F.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,g,m,x,y){if(y===void 0&&(y=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(!c.hasCore(p))c.register(p,g,m,!0),this.scenePlugins.push(p);else if(!y&&c.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(x){var T=new g(x,this,p);x.sys[p]=T,m&&m!==""&&(x[m]=T),T.boot()}},install:function(p,g,m,x,y){if(m===void 0&&(m=!1),x===void 0&&(x=null),y===void 0&&(y=null),typeof g!="function")return console.warn("Invalid Plugin: "+p),null;if(c.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(x!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:g,start:m,mapping:x,data:y});else if(c.registerCustom(p,g,x,y),m)return this.start(p);return null},getIndex:function(p){for(var g=this.plugins,m=0;m<g.length;m++){var x=g[m];if(x.key===p)return m}return-1},getEntry:function(p){var g=this.getIndex(p);if(g!==-1)return this.plugins[g]},isActive:function(p){var g=this.getEntry(p);return g&&g.active},start:function(p,g){g===void 0&&(g=p);var m=this.getEntry(g);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(p,g)),m?m.plugin:null},createEntry:function(p,g){var m=c.getCustom(p);if(m){var x=new m.plugin(this);m={key:g,plugin:x,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),x.init(m.data),x.start()}return m},stop:function(p){var g=this.getEntry(p);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(p,g){g===void 0&&(g=!0);var m=this.getEntry(p);if(m)return m.plugin;var x=this.getClass(p);return x&&g?(m=this.createEntry(p,p),m?m.plugin:null):x||null},getClass:function(p){return c.getCustomClass(p)},removeGlobalPlugin:function(p){var g=this.getEntry(p);g&&d(this.plugins,g),c.removeCustom(p)},removeScenePlugin:function(p){d(this.scenePlugins,p),c.remove(p)},registerGameObject:function(p,g,m){return g&&l.register(p,g),m&&u.register(p,m),this},removeGameObject:function(p,g,m){return g===void 0&&(g=!0),m===void 0&&(m=!0),g&&l.remove(p),m&&u.remove(p),this},registerFileType:function(p,g,m){h.register(p,g),m&&m.sys.load&&(m.sys.load[p]=g)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(201),a=i(0),n=i(9),h=i(104),u=i(22),l=i(401),f=i(407),c=i(402),d=i(1),v=i(10),p=i(416),g=i(76),m=i(3),x=new a({Extends:n,initialize:function(T){n.call(this),this.game=T,this.canvas,this.canvasBounds=new v,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=s.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=s.CENTER.NO_CENTER,this.orientation=s.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:d,windowResize:d,fullScreenChange:d,fullScreenError:d}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(u.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen,this.scaleMode!==s.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===s.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(u.PRE_STEP,this.step,this),y.events.once(u.READY,this.refresh,this),y.events.once(u.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,S=y.height,C=y.scaleMode,E=y.zoom,P=y.autoRound;if(typeof T=="string"){var M=this.parentSize.width;M===0&&(M=window.innerWidth);var R=parseInt(T,10)/100;T=Math.floor(M*R)}if(typeof S=="string"){var A=this.parentSize.height;A===0&&(A=window.innerHeight);var O=parseInt(S,10)/100;S=Math.floor(A*O)}this.scaleMode=C,this.autoRound=P,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,P&&(T=Math.floor(T),S=Math.floor(S)),this.gameSize.setSize(T,S),E===s.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,S),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*E,y.minHeight*E),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*E,y.maxHeight*E),this.displaySize.setSize(T,S),this.orientation=c(T,S)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=f(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==s.SCALE_MODE.NONE){var S=this.parent.getBoundingClientRect();(this.parentIsWindow||S.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",S=this.parent.getBoundingClientRect(),!this.parentIsWindow&&S.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=f(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=l(!0));var S=T.width,C=T.height;return y.width!==S||y.height!==C?(y.setSize(S,C),!0):!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var S=this.autoRound;S&&(y=Math.floor(y),T=Math.floor(T));var C=this.width,E=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(C,E)},resize:function(y,T){var S=this.zoom,C=this.autoRound;C&&(y=Math.floor(y),T=Math.floor(T));var E=this.width,P=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*S,T*S),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var M=this.canvas.style,R=y*S,A=T*S;return C&&(R=Math.floor(R),A=Math.floor(A)),(R!==y||A!==T)&&(M.width=R+"px",M.height=A+"px"),this.refresh(E,P)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var S=this.game.domContainer;if(S){this.baseSize.setCSS(S);var C=this.canvas.style,E=S.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=C.marginLeft,E.marginTop=C.marginTop}return this.emit(h.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=c(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(h.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,S=this.gameSize.height,C,E,P=this.zoom,M=this.autoRound;this.scaleMode===s.SCALE_MODE.NONE?(this.displaySize.setSize(T*P,S*P),C=this.displaySize.width,E=this.displaySize.height,M&&(C=Math.floor(C),E=Math.floor(E)),this._resetZoom&&(y.width=C+"px",y.height=E+"px",this._resetZoom=!1)):this.scaleMode===s.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),C=this.displaySize.width,E=this.displaySize.height,M&&(C=Math.floor(C),E=Math.floor(E)),this.canvas.width=C,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),C=this.displaySize.width,E=this.displaySize.height,M&&(C=Math.floor(C),E=Math.floor(E)),y.width=C+"px",y.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=g(this.parentSize.width,this.gameSize.width,0,!0),T=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==s.CENTER.NO_CENTER){var T=this.canvas,S=T.style,C=T.getBoundingClientRect(),E=C.width,P=C.height,M=Math.floor((this.parentSize.width-E)/2),R=Math.floor((this.parentSize.height-P)/2);y===s.CENTER.CENTER_HORIZONTALLY?R=0:y===s.CENTER.CENTER_VERTICALLY&&(M=0),S.marginLeft=M+"px",S.marginTop=R+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(h.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var S=this.getFullscreenTarget();T.keyboard?S[T.request](Element.ALLOW_KEYBOARD_INPUT):S[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(h.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(h.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(h.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(h.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.listeners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0},T.windowResize=function(){y.updateBounds(),y.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(C){return y.onFullScreenChange(C)},T.fullScreenError=function(C){return y.onFullScreenError(C)};var S=["webkit","moz",""];S.forEach(function(C){document.addEventListener(C+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(C+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(y,T){!this.parent||(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.listeners;window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(S){document.removeEventListener(S+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(S+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===s.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===s.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=i(0),n=i(76),h=i(3),u=new a({initialize:function(f,c,d,v){f===void 0&&(f=0),c===void 0&&(c=f),d===void 0&&(d=0),v===void 0&&(v=null),this._width=f,this._height=c,this._parent=v,this.aspectMode=d,this.aspectRatio=c===0?1:f/c,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new h},setAspectMode:function(l){return l===void 0&&(l=0),this.aspectMode=l,this.setSize(this._width,this._height)},setSnap:function(l,f){return l===void 0&&(l=0),f===void 0&&(f=l),this.snapTo.set(l,f),this.setSize(this._width,this._height)},setParent:function(l){return this._parent=l,this.setSize(this._width,this._height)},setMin:function(l,f){return l===void 0&&(l=0),f===void 0&&(f=l),this.minWidth=s(l,0,this.maxWidth),this.minHeight=s(f,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(l,f){return l===void 0&&(l=Number.MAX_VALUE),f===void 0&&(f=l),this.maxWidth=s(l,this.minWidth,Number.MAX_VALUE),this.maxHeight=s(f,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(l,f){switch(l===void 0&&(l=0),f===void 0&&(f=l),this.aspectMode){case u.NONE:this._width=this.getNewWidth(n(l,this.snapTo.x)),this._height=this.getNewHeight(n(f,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case u.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(n(l,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case u.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(n(f,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case u.FIT:this.constrain(l,f,!0);break;case u.ENVELOP:this.constrain(l,f,!1);break}return this},setAspectRatio:function(l){return this.aspectRatio=l,this.setSize(this._width,this._height)},resize:function(l,f){return this._width=this.getNewWidth(n(l,this.snapTo.x)),this._height=this.getNewHeight(n(f,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(l,f){return f===void 0&&(f=!0),l=s(l,this.minWidth,this.maxWidth),f&&this._parent&&l>this._parent.width&&(l=Math.max(this.minWidth,this._parent.width)),l},getNewHeight:function(l,f){return f===void 0&&(f=!0),l=s(l,this.minHeight,this.maxHeight),f&&this._parent&&l>this._parent.height&&(l=Math.max(this.minHeight,this._parent.height)),l},constrain:function(l,f,c){l===void 0&&(l=0),f===void 0&&(f=l),c===void 0&&(c=!0),l=this.getNewWidth(l),f=this.getNewHeight(f);var d=this.snapTo,v=f===0?1:l/f;return c&&this.aspectRatio>v||!c&&this.aspectRatio<v?(l=n(l,d.x),f=l/this.aspectRatio,d.y>0&&(f=n(f,d.y),l=f*this.aspectRatio)):(c&&this.aspectRatio<v||!c&&this.aspectRatio>v)&&(f=n(f,d.y),l=f*this.aspectRatio,d.x>0&&(l=n(l,d.x),f=l*(1/this.aspectRatio))),this._width=l,this._height=f,this},fitTo:function(l,f){return this.constrain(l,f,!0)},envelop:function(l,f){return this.constrain(l,f,!1)},setWidth:function(l){return this.setSize(l,this._height)},setHeight:function(l){return this.setSize(this._width,l)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(l){l&&l.style&&(l.style.width=this._width+"px",l.style.height=this._height+"px")},copy:function(l){return l.setAspectMode(this.aspectMode),l.aspectRatio=this.aspectRatio,l.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(l){this.setSize(l,this._height)}},height:{get:function(){return this._height},set:function(l){this.setSize(this._width,l)}}});u.NONE=0,u.WIDTH_CONTROLS_HEIGHT=1,u.HEIGHT_CONTROLS_WIDTH=2,u.FIT=3,u.ENVELOP=4,e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(144),n=i(20),h=i(22),u=i(6),l=i(95),f=i(1),c=i(418),d=i(204),v=new s({initialize:function(g,m){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this._pending.push({key:"default",scene:m[x],autoStart:x===0,data:{}})}g.events.once(h.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var p,g,m,x;for(p=0;p<this._pending.length;p++){g=this._pending[p],m=g.key,x=g.scene;var y;x instanceof c?y=this.createSceneFromInstance(m,x):typeof x=="object"?y=this.createSceneFromObject(m,x):typeof x=="function"&&(y=this.createSceneFromFunction(m,x)),m=y.sys.settings.key,this.keys[m]=y,this.scenes.push(y),this._data[m]&&(y.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(g.autoStart=!0)),(g.autoStart||y.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)g=this._start[p],this.start(g);this._start.length=0}},processQueue:function(){var p=this._pending.length,g=this._queue.length;if(!(p===0&&g===0)){var m,x;if(p){for(m=0;m<p;m++)x=this._pending[m],this.add(x.key,x.scene,x.autoStart,x.data);for(m=0;m<this._start.length;m++)x=this._start[m],this.start(x);this._start.length=0,this._pending.length=0;return}for(m=0;m<this._queue.length;m++)x=this._queue[m],this[x.op](x.keyA,x.keyB);this._queue.length=0}},add:function(p,g,m,x){if(m===void 0&&(m=!1),x===void 0&&(x={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:g,autoStart:m,data:x}),this.isBooted||(this._data[p]={data:x}),null;p=this.getKey(p,g);var y;return g instanceof c?y=this.createSceneFromInstance(p,g):typeof g=="object"?(g.key=p,y=this.createSceneFromObject(p,g)):typeof g=="function"&&(y=this.createSceneFromFunction(p,g)),y.sys.settings.data=x,p=y.sys.settings.key,this.keys[p]=y,this.scenes.push(y),(m||y.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),y},remove:function(p){if(this.isProcessing)this._queue.push({op:"remove",keyA:p,keyB:null});else{var g=this.getScene(p);if(!g||g.sys.isTransitioning())return this;var m=this.scenes.indexOf(g),x=g.sys.settings.key;m>-1&&(delete this.keys[x],this.scenes.splice(m,1),this._start.indexOf(x)>-1&&(m=this._start.indexOf(x),this._start.splice(m,1)),g.sys.destroy())}return this},bootScene:function(p){var g=p.sys,m=g.settings;g.sceneUpdate=f,p.init&&(p.init.call(p,m.data),m.status=a.INIT,m.isTransition&&g.events.emit(n.TRANSITION_INIT,m.transitionFrom,m.transitionDuration));var x;g.load&&(x=g.load,x.reset()),x&&p.preload?(p.preload.call(p),x.list.size===0?this.create(p):(m.status=a.LOADING,x.once(l.COMPLETE,this.loadComplete,this),x.start())):this.create(p)},loadComplete:function(p){this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,g){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var x=this.scenes[m].sys;x.settings.status>a.START&&x.settings.status<=a.RUNNING&&x.step(p,g)}},render:function(p){for(var g=0;g<this.scenes.length;g++){var m=this.scenes[g].sys;m.settings.visible&&m.settings.status>=a.LOADING&&m.settings.status<a.SLEEPING&&m.render(p)}this.isProcessing=!1},create:function(p){var g=p.sys,m=g.settings;p.create&&(m.status=a.CREATING,p.create.call(p,m.data),m.status===a.DESTROYED)||(m.isTransition&&g.events.emit(n.TRANSITION_START,m.transitionFrom,m.transitionDuration),p.update&&(g.sceneUpdate=p.update),m.status=a.RUNNING,g.events.emit(n.CREATE,p))},createSceneFromFunction:function(p,g){var m=new g;if(m instanceof c){var x=m.sys.settings.key;if(x!==""&&(p=x),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return this.createSceneFromInstance(p,m)}else return m.sys=new d(m),m.sys.settings.key=p,m.sys.init(this.game),m},createSceneFromInstance:function(p,g){var m=g.sys.settings.key;return m===""&&(g.sys.settings.key=p),g.sys.init(this.game),g},createSceneFromObject:function(p,g){var m=new c(g),x=m.sys.settings.key;x!==""?p=x:m.sys.settings.key=p,m.sys.init(this.game);for(var y=["init","preload","create","update","render"],T=0;T<y.length;T++){var S=u(g,y[T],null);S&&(m[y[T]]=S)}if(g.hasOwnProperty("extend")){for(var C in g.extend)if(!!g.extend.hasOwnProperty(C)){var E=g.extend[C];C==="data"&&m.hasOwnProperty("data")&&typeof E=="object"?m.data.merge(E):C!=="sys"&&(m[C]=E)}}return m},getKey:function(p,g){if(p||(p="default"),typeof g=="function")return p;if(g instanceof c?p=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(p=g.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return p},getScenes:function(p,g){p===void 0&&(p=!0),g===void 0&&(g=!1);for(var m=[],x=this.scenes,y=0;y<x.length;y++){var T=x[y];T&&(!p||p&&T.sys.isActive())&&m.push(T)}return g?m.reverse():m},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var g=0;g<this.scenes.length;g++)if(p===this.scenes[g])return p;return null},isActive:function(p){var g=this.getScene(p);return g?g.sys.isActive():null},isPaused:function(p){var g=this.getScene(p);return g?g.sys.isPaused():null},isVisible:function(p){var g=this.getScene(p);return g?g.sys.isVisible():null},isSleeping:function(p){var g=this.getScene(p);return g?g.sys.isSleeping():null},pause:function(p,g){var m=this.getScene(p);return m&&m.sys.pause(g),this},resume:function(p,g){var m=this.getScene(p);return m&&m.sys.resume(g),this},sleep:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.sleep(g),this},wake:function(p,g){var m=this.getScene(p);return m&&m.sys.wake(g),this},run:function(p,g){var m=this.getScene(p);if(!m){for(var x=0;x<this._pending.length;x++)if(this._pending[x].key===p){this.queueOp("start",p,g);break}return this}m.sys.isSleeping()?m.sys.wake(g):m.sys.isPaused()?m.sys.resume(g):this.start(p,g)},start:function(p,g){if(!this.isBooted)return this._data[p]={autoStart:!0,data:g},this;var m=this.getScene(p);if(m){var x=m.sys;if(x.isActive()||x.isPaused())x.shutdown(),x.sceneUpdate=f,x.start(g);else{x.sceneUpdate=f,x.start(g);var y;if(x.load&&(y=x.load),y&&x.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:x.settings.pack})))return x.settings.status=a.LOADING,y.once(l.COMPLETE,this.payloadComplete,this),y.start(),this}this.bootScene(m)}return this},stop:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.shutdown(g),this},switch:function(p,g){var m=this.getScene(p),x=this.getScene(g);return m&&x&&m!==x&&(this.sleep(p),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var g=this.getScene(p);return this.scenes.indexOf(g)},bringToTop:function(p){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g<this.scenes.length){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.push(m)}}return this},sendToBack:function(p){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g>0){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.unshift(m)}}return this},moveDown:function(p){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g>0){var m=g-1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveUp:function(p){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g<this.scenes.length-1){var m=g+1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveAbove:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),this.scenes.splice(m+1,0,y)}}return this},moveBelow:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),m===0?this.scenes.unshift(y):this.scenes.splice(m,0,y)}}return this},queueOp:function(p,g,m){return this._queue.push({op:p,keyA:g,keyB:m}),this},swapPosition:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==x&&m!==-1&&x!==-1){var y=this.getAt(m);this.scenes[m]=this.scenes[x],this.scenes[x]=y}}return this},dump:function(){for(var p=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var x=this.scenes[m].sys,y=x.settings.visible&&(x.settings.status===a.RUNNING||x.settings.status===a.PAUSED)?"[*] ":"[-] ";y+=x.settings.key+" ("+g[x.settings.status]+")",p.push(y)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var g=this.scenes[p].sys;g.destroy()}this.update=f,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(204),n=new s({initialize:function(u){this.sys=new a(this,u),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),a=i(205),n=function(h){var u=h.game.config.defaultPhysicsSystem,l=s(h.settings,"physics",!1);if(!(!u&&!l)){var f=[];if(u&&f.push(a(u+"Physics")),l)for(var c in l)c=a(c.concat("Physics")),f.indexOf(c)===-1&&f.push(c);return f}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),a=function(n){var h=n.plugins.getDefaultScenePlugins(),u=s(n.settings,"plugins",!1);return Array.isArray(u)?u:h||[]};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(144),a=i(6),n=i(127),h=i(978),u={create:function(l){return typeof l=="string"?l={key:l}:l===void 0&&(l={}),{status:s.PENDING,key:a(l,"key",""),active:a(l,"active",!1),visible:a(l,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:a(l,"pack",!1),cameras:a(l,"cameras",null),map:a(l,"map",n(h,a(l,"mapAdd",{}))),physics:a(l,"physics",{}),loader:a(l,"loader",{}),plugins:a(l,"plugins",!1),input:a(l,"input",{})}}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),a=i(423),n=i(0),h=i(38),u=i(33),l=i(9),f=i(106),c=i(22),d=i(388),v=i(6),p=i(425),g=i(206),m=new n({Extends:l,initialize:function(y){l.call(this),this.game=y,this.name="TextureManager",this.list={},this._tempCanvas=s.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,y.events.once(c.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(f.LOAD,this.updatePending,this),this.on(f.ERROR,this.updatePending,this);var x=this.game.config;this.addBase64("__DEFAULT",x.defaultImage),this.addBase64("__MISSING",x.missingImage),this.addBase64("__WHITE",x.whiteImage),this.game.events.once(c.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(f.LOAD),this.off(f.ERROR),this.emit(f.READY))},checkKey:function(x){return this.exists(x)?(console.error("Texture key already in use: "+x),!1):!0},remove:function(x){if(typeof x=="string")if(this.exists(x))x=this.get(x);else return console.warn("No texture found matching key: "+x),this;return this.list.hasOwnProperty(x.key)&&(x.destroy(),this.emit(f.REMOVE,x.key)),this},removeKey:function(x){return this.list.hasOwnProperty(x)&&delete this.list[x],this},addBase64:function(x,y){if(this.checkKey(x)){var T=this,S=new Image;S.onerror=function(){T.emit(f.ERROR,x)},S.onload=function(){var C=T.create(x,S);p.Image(C,0),T.emit(f.ADD,x,C),T.emit(f.LOAD,x,C)},S.src=y}return this},getBase64:function(x,y,T,S){T===void 0&&(T="image/png"),S===void 0&&(S=.92);var C="",E=this.getFrame(x,y);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var P=E.canvasData,M=s.create2D(this,P.width,P.height),R=M.getContext("2d");R.drawImage(E.source.image,P.x,P.y,P.width,P.height,0,0,P.width,P.height),C=M.toDataURL(T,S),s.remove(M)}return C},addImage:function(x,y,T){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.Image(S,0),T&&S.setDataSource(T),this.emit(f.ADD,x,S)),S},addGLTexture:function(x,y,T,S){var C=null;return this.checkKey(x)&&(T===void 0&&(T=y.width),S===void 0&&(S=y.height),C=this.create(x,y,T,S),C.add("__BASE",0,0,0,T,S),this.emit(f.ADD,x,C)),C},addRenderTexture:function(x,y){var T=null;return this.checkKey(x)&&(T=this.create(x,y),T.add("__BASE",0,0,0,y.width,y.height),this.emit(f.ADD,x,T)),T},generate:function(x,y){if(this.checkKey(x)){var T=s.create(this,1,1);return y.canvas=T,d(y),this.addCanvas(x,T)}else return null},createCanvas:function(x,y,T){if(y===void 0&&(y=256),T===void 0&&(T=256),this.checkKey(x)){var S=s.create(this,y,T,u.CANVAS,!0);return this.addCanvas(x,S)}return null},addCanvas:function(x,y,T){T===void 0&&(T=!1);var S=null;return T?S=new a(this,x,y,y.width,y.height):this.checkKey(x)&&(S=new a(this,x,y,y.width,y.height),this.list[x]=S,this.emit(f.ADD,x,S)),S},addAtlas:function(x,y,T,S){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(x,y,T,S):this.addAtlasJSONHash(x,y,T,S)},addAtlasJSONArray:function(x,y,T,S){var C=null;if(this.checkKey(x)){if(C=this.create(x,y),Array.isArray(T))for(var E=T.length===1,P=0;P<C.source.length;P++){var M=E?T[0]:T[P];p.JSONArray(C,P,M)}else p.JSONArray(C,0,T);S&&C.setDataSource(S),this.emit(f.ADD,x,C)}return C},addAtlasJSONHash:function(x,y,T,S){var C=null;if(this.checkKey(x)){if(C=this.create(x,y),Array.isArray(T))for(var E=0;E<T.length;E++)p.JSONHash(C,E,T[E]);else p.JSONHash(C,0,T);S&&C.setDataSource(S),this.emit(f.ADD,x,C)}return C},addAtlasXML:function(x,y,T,S){var C=null;return this.checkKey(x)&&(C=this.create(x,y),p.AtlasXML(C,0,T),S&&C.setDataSource(S),this.emit(f.ADD,x,C)),C},addUnityAtlas:function(x,y,T,S){var C=null;return this.checkKey(x)&&(C=this.create(x,y),p.UnityYAML(C,0,T),S&&C.setDataSource(S),this.emit(f.ADD,x,C)),C},addSpriteSheet:function(x,y,T){var S=null;if(this.checkKey(x)){S=this.create(x,y);var C=S.source[0].width,E=S.source[0].height;p.SpriteSheet(S,0,0,0,C,E,T),this.emit(f.ADD,x,S)}return S},addSpriteSheetFromAtlas:function(x,y){if(!this.checkKey(x))return null;var T=v(y,"atlas",null),S=v(y,"frame",null);if(!(!T||!S)){var C=this.get(T),E=C.get(S);if(E){var P=this.create(x,E.source.image);return E.trimmed?p.SpriteSheetFromAtlas(P,E,y):p.SpriteSheet(P,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,y),this.emit(f.ADD,x,P),P}}},create:function(x,y,T,S){var C=null;return this.checkKey(x)&&(C=new g(this,x,y,T,S),this.list[x]=C),C},exists:function(x){return this.list.hasOwnProperty(x)},get:function(x){return x===void 0&&(x="__DEFAULT"),this.list[x]?this.list[x]:x instanceof g?x:this.list.__MISSING},cloneFrame:function(x,y){if(this.list[x])return this.list[x].get(y).clone()},getFrame:function(x,y){if(this.list[x])return this.list[x].get(y)},getTextureKeys:function(){var x=[];for(var y in this.list)y!=="__DEFAULT"&&y!=="__MISSING"&&x.push(y);return x},getPixel:function(x,y,T,S){var C=this.getFrame(T,S);if(C){x-=C.x,y-=C.y;var E=C.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(C.source.image,x,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return new h(M.data[0],M.data[1],M.data[2],M.data[3])}}return null},getPixelAlpha:function(x,y,T,S){var C=this.getFrame(T,S);if(C){x-=C.x,y-=C.y;var E=C.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(C.source.image,x,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return M.data[3]}}return null},setTexture:function(x,y,T){return this.list[y]&&(x.texture=this.list[y],x.frame=x.texture.get(T)),x},renameTexture:function(x,y){var T=this.get(x);return T&&x!==y?(T.key=y,this.list[y]=T,delete this.list[x],!0):!1},each:function(x,y){for(var T=[null],S=1;S<arguments.length;S++)T.push(arguments[S]);for(var C in this.list)T[0]=this.list[C],x.apply(y,T)},destroy:function(){for(var x in this.list)this.list[x].destroy();this.list={},this.game=null,s.remove(this._tempCanvas)}});e.exports=m},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(18),n=i(38),h=i(33),u=i(138),l=i(206),f=new s({Extends:l,initialize:function(d,v,p,g,m){l.call(this,d,v,p,g,m),this.add("__BASE",0,0,0,g,m),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=g,this.height=m,this.imageData=this.context.getImageData(0,0,g,m),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===h.WEBGL&&this.refresh(),this},draw:function(c,d,v){return this.context.drawImage(v,c,d),this.update()},drawFrame:function(c,d,v,p){v===void 0&&(v=0),p===void 0&&(p=0);var g=this.manager.getFrame(c,d);if(g){var m=g.canvasData,x=g.cutWidth,y=g.cutHeight,T=g.source.resolution;return this.context.drawImage(g.source.image,m.x,m.y,x,y,v,p,x/T,y/T),this.update()}else return this},setPixel:function(c,d,v,p,g,m){m===void 0&&(m=255),c=Math.abs(Math.floor(c)),d=Math.abs(Math.floor(d));var x=this.getIndex(c,d);if(x>-1){var y=this.context.getImageData(c,d,1,1);y.data[0]=v,y.data[1]=p,y.data[2]=g,y.data[3]=m,this.context.putImageData(y,c,d)}return this},putData:function(c,d,v,p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=c.width),x===void 0&&(x=c.height),this.context.putImageData(c,d,v,p,g,m,x),this},getData:function(c,d,v,p){c=a(Math.floor(c),0,this.width-1),d=a(Math.floor(d),0,this.height-1),v=a(v,1,this.width-c),p=a(p,1,this.height-d);var g=this.context.getImageData(c,d,v,p);return g},getPixel:function(c,d,v){v||(v=new n);var p=this.getIndex(c,d);if(p>-1){var g=this.data,m=g[p+0],x=g[p+1],y=g[p+2],T=g[p+3];v.setTo(m,x,y,T)}return v},getPixels:function(c,d,v,p){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=this.width),p===void 0&&(p=v),c=Math.abs(Math.round(c)),d=Math.abs(Math.round(d));for(var g=a(c,0,this.width),m=a(c+v,0,this.width),x=a(d,0,this.height),y=a(d+p,0,this.height),T=new n,S=[],C=x;C<y;C++){for(var E=[],P=g;P<m;P++)T=this.getPixel(P,C,T),E.push({x:P,y:C,color:T.color,alpha:T.alphaGL});S.push(E)}return S},getIndex:function(c,d){return c=Math.abs(Math.round(c)),d=Math.abs(Math.round(d)),c<this.width&&d<this.height?(c+d*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(c,d,v,p){return c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=this.width),p===void 0&&(p=this.height),this.context.clearRect(c,d,v,p),this.update()},setSize:function(c,d){return d===void 0&&(d=c),(c!==this.width||d!==this.height)&&(this.canvas.width=c,this.canvas.height=d,this._source.width=c,this._source.height=d,this._source.isPowerOf2=u(c,d),this.frames.__BASE.setSize(c,d,0,0),this.width=c,this.height=d,this.refresh()),this},destroy:function(){l.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),a=i(0),n=i(138),h=i(168),u=new a({initialize:function(f,c,d,v,p){p===void 0&&(p=!1);var g=f.manager.game;this.renderer=g.renderer,this.texture=f,this.source=c,this.image=c,this.compressionAlgorithm=null,this.resolution=1,this.width=d||c.naturalWidth||c.videoWidth||c.width||0,this.height=v||c.naturalHeight||c.videoHeight||c.height||0,this.scaleMode=h.DEFAULT,this.isCanvas=c instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&c instanceof HTMLVideoElement,this.isRenderTexture=c.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&c instanceof WebGLTexture,this.isPowerOf2=n(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=p,this.init(g)},init:function(l){var f=this.renderer;f&&(f.gl?this.isCanvas?this.glTexture=f.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=f.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=f.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=f.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),l.config.antialias||this.setFilter(1)},setFilter:function(l){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,l),this.scaleMode=l},setFlipY:function(l){return l===void 0&&(l=!0),this.flipY=l,this},update:function(){var l=this.renderer.gl;l&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):l&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&s.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AtlasXML:i(979),Canvas:i(980),Image:i(981),JSONArray:i(982),JSONHash:i(983),SpriteSheet:i(984),SpriteSheetFromAtlas:i(985),UnityYAML:i(986)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(427),a=i(430),n=i(432),h={create:function(u){var l=u.config.audio,f=u.device.audio;return l.noAudio||!f.webAudio&&!f.audioData?new a(u):f.webAudio&&!l.disableWebAudio?new n(u):new s(u)}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(145),a=i(0),n=i(70),h=i(429),u=new a({Extends:s,initialize:function(f){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,s.call(this,f)},add:function(l,f){var c=new h(this,l,f);return this.sounds.push(c),c},unlock:function(){this.locked=!1;var l=this;if(this.game.cache.audio.entries.each(function(v,p){for(var g=0;g<p.length;g++)if(p[g].dataset.locked==="true")return l.locked=!0,!1;return!0}),!!this.locked){var f=!1,c=function(){f=!0},d=function(){if(f){f=!1;return}document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",d);var v=[];if(l.game.cache.audio.entries.each(function(g,m){for(var x=0;x<m.length;x++){var y=m[x];y.dataset.locked==="true"&&v.push(y)}return!0}),v.length!==0){var p=v[v.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,v.forEach(function(g){g.dataset.locked="false"}),l.unlocked=!0},v.forEach(function(g){g.load()})}};this.once(n.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var v=this.lockedActionsQueue.shift();v.sound[v.prop].apply?v.sound[v.prop].apply(v.sound,v.value||[]):v.sound[v.prop]=v.value}},this),document.body.addEventListener("touchmove",c,!1),document.body.addEventListener("touchend",d,!1)}},onBlur:function(){this.forEachActiveSound(function(l){l.isPlaying&&(this.onBlurPausedSounds.push(l),l.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(l){l.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){s.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(l,f,c){return l.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:l,prop:f,value:c}),!0):!1},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this._mute},set:function(l){this._mute=l,this.forEachActiveSound(function(f){f.updateMute()}),this.emit(n.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this._volume},set:function(l){this._volume=l,this.forEachActiveSound(function(f){f.updateVolume()}),this.emit(n.GLOBAL_VOLUME,this,l)}}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),a=function(n,h,u,l,f){if(l===void 0&&(l=0),f===void 0&&(f=n.length),s(n,l,f))for(var c=l;c<f;c++){var d=n[c];if(!h||h&&u===void 0&&d.hasOwnProperty(h)||h&&u!==void 0&&d[h]===u)return d}return null};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(146),a=i(0),n=i(70),h=i(18),u=new a({Extends:s,initialize:function(f,c,d){if(d===void 0&&(d={}),this.tags=f.game.cache.audio.get(c),!this.tags)throw new Error('There is no audio asset with key "'+c+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,s.call(this,f,c,d)},play:function(l,f){return this.manager.isLocked(this,"play",[l,f])||!s.prototype.play.call(this,l,f)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!s.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!s.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(n.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var l=this.currentConfig.seek,f=this.currentConfig.delay,c=(this.currentMarker?this.currentMarker.start:0)+l;return this.previousTime=c,this.audio.currentTime=c,this.applyConfig(),f===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+f*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var l=0;l<this.tags.length;l++){var f=this.tags[l];if(f.dataset.used==="false")return f.dataset.used="true",this.audio=f,!0}if(!this.manager.override)return!1;var c=[];this.manager.forEachActiveSound(function(v){v.key===this.key&&v.audio&&c.push(v)},this),c.sort(function(v,p){return v.loop===p.loop?p.seek/p.duration-v.seek/v.duration:v.loop?1:-1});var d=c[0];return this.audio=d.audio,d.reset(),d.audio=null,d.startTime=0,d.previousTime=0,!0},playCatchPromise:function(){var l=this.audio.play();l&&l.catch(function(f){console.warn(f)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){s.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(l){if(!!this.isPlaying){if(this.startTime>0){this.startTime<l-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,l-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var f=this.currentMarker?this.currentMarker.start:0,c=f+this.duration,d=this.audio.currentTime;if(this.currentConfig.loop)d>=c-this.manager.loopEndOffset?(this.audio.currentTime=f+Math.max(0,d-c),d=this.audio.currentTime):d<f&&(this.audio.currentTime+=f,d=this.audio.currentTime),d<this.previousTime&&this.emit(n.LOOPED,this);else if(d>=c){this.reset(),this.stopAndReleaseAudioTag(),this.emit(n.COMPLETE,this);return}this.previousTime=d}},destroy:function(){s.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=h(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){s.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(l){this.currentConfig.mute=l,!this.manager.isLocked(this,"mute",l)&&(this.updateMute(),this.emit(n.MUTE,this,l))}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.currentConfig.volume},set:function(l){this.currentConfig.volume=l,!this.manager.isLocked(this,"volume",l)&&(this.updateVolume(),this.emit(n.VOLUME,this,l))}},setVolume:function(l){return this.volume=l,this},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,!this.manager.isLocked(this,n.RATE,l)&&(this.calculateRate(),this.emit(n.RATE,this,l))}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,!this.manager.isLocked(this,n.DETUNE,l)&&(this.calculateRate(),this.emit(n.DETUNE,this,l))}},setDetune:function(l){return this.detune=l,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.isLocked(this,"seek",l)||this.startTime>0||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.isPlaying?(this.previousTime=l,this.audio.currentTime=l):this.isPaused&&(this.currentConfig.seek=l),this.emit(n.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,!this.manager.isLocked(this,"loop",l)&&(this.audio&&(this.audio.loop=l),this.emit(n.LOOP,this,l))}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.currentConfig.pan},set:function(l){this.currentConfig.pan=l,this.emit(n.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(145),a=i(0),n=i(9),h=i(431),u=i(1),l=new a({Extends:n,initialize:function(c){n.call(this),this.game=c,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(f,c){var d=new h(this,f,c);return this.sounds.push(d),d},addAudioSprite:function(f,c){var d=this.add(f,c);return d.spritemap={},d},play:function(f,c){return!1},playAudioSprite:function(f,c,d){return!1},remove:function(f){return s.prototype.remove.call(this,f)},removeByKey:function(f){return s.prototype.removeByKey.call(this,f)},pauseAll:u,resumeAll:u,stopAll:u,update:u,setRate:u,setDetune:u,setMute:u,setVolume:u,forEachActiveSound:function(f,c){s.prototype.forEachActiveSound.call(this,f,c)},destroy:function(){s.prototype.destroy.call(this)}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(146),a=i(0),n=i(9),h=i(17),u=function(){return!1},l=function(){return null},f=function(){return this},c=new a({Extends:n,initialize:function(v,p,g){g===void 0&&(g={}),n.call(this),this.manager=v,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=h({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:u,updateMarker:u,removeMarker:l,play:u,pause:u,resume:u,stop:u,destroy:function(){s.prototype.destroy.call(this)},setMute:f,setVolume:f,setRate:f,setDetune:f,setSeek:f,setLoop:f,setPan:f});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(433),a=i(145),n=i(0),h=i(70),u=i(22),l=i(434),f=new n({Extends:a,initialize:function(d){this.context=this.createAudioContext(d),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),a.call(this,d),this.locked&&d.isBooted?this.unlock():d.events.once(u.BOOT,this.unlock,this)},createAudioContext:function(c){var d=c.config.audio;if(d.context)return d.context.resume(),d.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(c){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=c,this.masterMuteNode=c.createGain(),this.masterVolumeNode=c.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(c.destination),this.destination=this.masterMuteNode,this},add:function(c,d){var v=new l(this,c,d);return this.sounds.push(v),v},decodeAudio:function(c,d){var v;Array.isArray(c)?v=c:v=[{key:c,data:d}];for(var p=this.game.cache.audio,g=v.length,m=0;m<v.length;m++){var x=v[m],y=x.key,T=x.data;typeof T=="string"&&(T=s(T));var S=function(E,P){p.add(E,P),this.emit(h.DECODED,E),g--,g===0&&this.emit(h.DECODED_ALL)}.bind(this,y),C=function(E,P){console.error("Error decoding audio: "+E+" - ",P?P.message:""),g--,g===0&&this.emit(h.DECODED_ALL)}.bind(this,y);this.context.decodeAudioData(T,S,C)}},unlock:function(){var c=this,d=document.body,v=function p(){if(c.context&&d){var g=d.removeEventListener;c.context.resume().then(function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p),c.unlocked=!0},function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p)})}};d&&(d.addEventListener("touchstart",v,!1),d.addEventListener("touchend",v,!1),d.addEventListener("click",v,!1),d.addEventListener("keydown",v,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var c=this.context;(c.state==="suspended"||c.state==="interrupted")&&!this.locked&&c.resume()},update:function(c,d){a.prototype.update.call(this,c,d);var v=this.context;v&&v.state==="interrupted"&&v.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var c=this;this.context.close().then(function(){c.context=null})}a.prototype.destroy.call(this)},setMute:function(c){return this.mute=c,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(c){this.masterMuteNode.gain.setValueAtTime(c?0:1,0),this.emit(h.GLOBAL_MUTE,this,c)}},setVolume:function(c){return this.volume=c,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(c){this.masterVolumeNode.gain.setValueAtTime(c,0),this.emit(h.GLOBAL_VOLUME,this,c)}}});e.exports=f},function(e,r){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(256),a=0;a<i.length;a++)s[i.charCodeAt(a)]=a;var n=function(h){h=h.substr(h.indexOf(",")+1);var u=h.length,l=u*.75,f=0,c,d,v,p;h[u-1]==="="&&(l--,h[u-2]==="="&&l--);for(var g=new ArrayBuffer(l),m=new Uint8Array(g),x=0;x<u;x+=4)c=s[h.charCodeAt(x)],d=s[h.charCodeAt(x+1)],v=s[h.charCodeAt(x+2)],p=s[h.charCodeAt(x+3)],m[f++]=c<<2|d>>4,m[f++]=(d&15)<<4|v>>2,m[f++]=(v&3)<<6|p&63;return g};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(146),a=i(0),n=i(70),h=new a({Extends:s,initialize:function(l,f,c){if(c===void 0&&(c={}),this.audioBuffer=l.game.cache.audio.get(f),!this.audioBuffer)throw new Error('Audio key "'+f+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=l.context.createGain(),this.volumeNode=l.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),l.context.createStereoPanner?(this.pannerNode=l.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(l.destination)):this.volumeNode.connect(l.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,s.call(this,l,f,c)},play:function(u,l){return s.prototype.play.call(this,u,l)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(n.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(n.RESUME,this),!0)},stop:function(){return s.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(n.STOP,this),!0):!1},createAndStartBufferSource:function(){var u=this.currentConfig.seek,l=this.currentConfig.delay,f=this.manager.context.currentTime+l,c=(this.currentMarker?this.currentMarker.start:0)+u,d=this.duration-u;this.playTime=f-u,this.startTime=f,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,f),Math.max(0,c),Math.max(0,d)),this.resetConfig()},createAndStartLoopBufferSource:function(){var u=this.getLoopTime(),l=this.currentMarker?this.currentMarker.start:0,f=this.duration;this.loopTime=u,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,u),Math.max(0,l),Math.max(0,f))},createBufferSource:function(){var u=this,l=this.manager.context.createBufferSource();return l.buffer=this.audioBuffer,l.connect(this.muteNode),l.onended=function(f){f.target===u.source&&(u.currentConfig.loop?u.hasLooped=!0:u.hasEnded=!0)},l},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),s.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,s.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(n.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(n.LOOPED,this))},destroy:function(){s.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){s.prototype.calculateRate.call(this);var u=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,u),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,u)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var u=0,l=0;l<this.rateUpdates.length;l++){var f=0;l<this.rateUpdates.length-1?f=this.rateUpdates[l+1].time:f=this.manager.context.currentTime-this.playTime,u+=(f-this.rateUpdates[l].time)*this.rateUpdates[l].rate}return u},getLoopTime:function(){for(var u=0,l=0;l<this.rateUpdates.length-1;l++)u+=(this.rateUpdates[l+1].time-this.rateUpdates[l].time)*this.rateUpdates[l].rate;var f=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+f.time+(this.duration-u)/f.rate},rate:{get:function(){return this.currentConfig.rate},set:function(u){this.currentConfig.rate=u,this.calculateRate(),this.emit(n.RATE,this,u)}},setRate:function(u){return this.rate=u,this},detune:{get:function(){return this.currentConfig.detune},set:function(u){this.currentConfig.detune=u,this.calculateRate(),this.emit(n.DETUNE,this,u)}},setDetune:function(u){return this.detune=u,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(u){this.currentConfig.mute=u,this.muteNode.gain.setValueAtTime(u?0:1,0),this.emit(n.MUTE,this,u)}},setMute:function(u){return this.mute=u,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(u){this.currentConfig.volume=u,this.volumeNode.gain.setValueAtTime(u,0),this.emit(n.VOLUME,this,u)}},setVolume:function(u){return this.volume=u,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(u){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(u=Math.min(Math.max(0,u),this.duration),this.currentConfig.seek=u,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(n.SEEK,this,u))}},setSeek:function(u){return this.seek=u,this},loop:{get:function(){return this.currentConfig.loop},set:function(u){this.currentConfig.loop=u,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),u&&this.createAndStartLoopBufferSource()),this.emit(n.LOOP,this,u)}},setLoop:function(u){return this.loop=u,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(u){this.currentConfig.pan=u,this.pannerNode&&this.pannerNode.pan.setValueAtTime(u,this.manager.context.currentTime),this.emit(n.PAN,this,u)}},setPan:function(u){return this.pan=u,this}});e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var a=s.length,n=s[0].length,h=new Array(n),u=0;u<n;u++){h[u]=new Array(a);for(var l=a-1;l>-1;l--)h[u][l]=s[l][u]}return h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(n,h,u){var l=n[h];n[h]=n[u],n[u]=l}function s(n,h){return n<h?-1:n>h?1:0}var a=function(n,h,u,l,f){for(u===void 0&&(u=0),l===void 0&&(l=n.length-1),f===void 0&&(f=s);l>u;){if(l-u>600){var c=l-u+1,d=h-u+1,v=Math.log(c),p=.5*Math.exp(2*v/3),g=.5*Math.sqrt(v*p*(c-p)/c)*(d-c/2<0?-1:1),m=Math.max(u,Math.floor(h-d*p/c+g)),x=Math.min(l,Math.floor(h+(c-d)*p/c+g));a(n,h,m,x,f)}var y=n[h],T=u,S=l;for(i(n,u,h),f(n[l],y)>0&&i(n,u,l);T<S;){for(i(n,T,S),T++,S--;f(n[T],y)<0;)T++;for(;f(n[S],y)>0;)S--}f(n[u],y)===0?i(n,u,S):(S++,i(n,S,l)),S<=h&&(u=S+1),h<=S&&(l=S-1)}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),a=i(131),n=function(u,l,f){for(var c=[],d=0;d<u.length;d++)for(var v=0;v<l.length;v++)for(var p=0;p<f;p++)c.push({a:u[d],b:l[v]});return c},h=function(u,l,f){var c=s(f,"max",0),d=s(f,"qty",1),v=s(f,"random",!1),p=s(f,"randomB",!1),g=s(f,"repeat",0),m=s(f,"yoyo",!1),x=[];if(p&&a(l),g===-1)if(c===0)g=0;else{var y=u.length*l.length*d;m&&(y*=2),g=Math.ceil(c/y)}for(var T=0;T<=g;T++){var S=n(u,l,d);v&&a(S),x=x.concat(S),m&&(S.reverse(),x=x.concat(S))}return c&&x.splice(c),x};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={PROCESS_QUEUE_ADD:i(1041),PROCESS_QUEUE_REMOVE:i(1042)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(13),a=function(n,h){var u=s(h,"anims",null);if(u===null)return n;if(typeof u=="string")n.anims.play(u);else if(typeof u=="object"){var l=n.anims,f=s(u,"key",void 0);if(f){var c=s(u,"startFrame",void 0),d=s(u,"delay",0),v=s(u,"repeat",0),p=s(u,"repeatDelay",0),g=s(u,"yoyo",!1),m=s(u,"play",!1),x=s(u,"delayedPlay",0),y={key:f,delay:d,repeat:v,repeatDelay:p,yoyo:g,startFrame:c};m?l.play(y):x>0?l.playAfterDelay(y,x):l.load(y)}}return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(109),n=new s({initialize:function(u,l,f,c,d){this.parent=u,this.x=l,this.y=f,this.frame=c,this.data={},this.tint=16777215,this._visible=d,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(h){return h===void 0?this.frame=this.parent.frame:h instanceof a&&h.texture===this.parent.texture?this.frame=h:this.frame=this.parent.texture.get(h),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(h,u,l){return this.x=h,this.y=u,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,l&&this.setFrame(l),this},setPosition:function(h,u){return this.x=h,this.y=u,this},setFlipX:function(h){return this.flipX=h,this},setFlipY:function(h){return this.flipY=h,this},setFlip:function(h,u){return this.flipX=h,this.flipY=u,this},setVisible:function(h){return this.visible=h,this},setAlpha:function(h){return this.alpha=h,this},setTint:function(h){return this.tint=h,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(h){this.parent.dirty|=this._visible!==h,this._visible=h}},alpha:{get:function(){return this._alpha},set:function(h){this.parent.dirty|=this._alpha>0!=h>0,this._alpha=h}}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=function(n,h,u){u===void 0&&(u=new s);var l=Math.min(n.x,h.x),f=Math.min(n.y,h.y),c=Math.max(n.right,h.right)-l,d=Math.max(n.bottom,h.bottom)-f;return u.setTo(l,f,c,d)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(11),n=i(1055),h=i(15),u=i(7),l=i(202),f=i(20),c=i(140),d=new s({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Origin,a.ScrollFactor,a.Transform,a.Visible,n],initialize:function(p,g,m,x,y,T){h.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,m),typeof x=="string"?x[0]==="#"?this.setElement(x.substr(1),y,T):this.createElement(x,y,T):x&&this.setElement(x,y,T),p.sys.events.on(f.SLEEP,this.handleSceneEvent,this),p.sys.events.on(f.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(v){var p=this.node,g=p.style;p&&(g.display=v.settings.visible?"block":"none")},setSkew:function(v,p){return v===void 0&&(v=0),p===void 0&&(p=v),this.skewX=v,this.skewY=p,this},setPerspective:function(v){return this.parent.style.perspective=v+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(v){this.parent.style.perspective=v+"px"}},addListener:function(v){if(this.node){v=v.split(" ");for(var p=0;p<v.length;p++)this.node.addEventListener(v[p],this.handler,!1)}return this},removeListener:function(v){if(this.node){v=v.split(" ");for(var p=0;p<v.length;p++)this.node.removeEventListener(v[p],this.handler)}return this},dispatchNativeEvent:function(v){this.emit(v.type,v)},createElement:function(v,p,g){return this.setElement(document.createElement(v),p,g)},setElement:function(v,p,g){this.removeElement();var m;if(typeof v=="string"?(v[0]==="#"&&(v=v.substr(1)),m=document.getElementById(v)):typeof v=="object"&&v.nodeType===1&&(m=v),!m)return this;if(this.node=m,p&&u(p))for(var x in p)m.style[x]=p[x];else typeof p=="string"&&(m.style=p);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),g&&(m.innerText=g),this.updateSize()},createFromCache:function(v,p){var g=this.cache.get(v);return g&&this.createFromHTML(g,p),this},createFromHTML:function(v,p){p===void 0&&(p="div"),this.removeElement();var g=document.createElement(p);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=v,this.updateSize()},removeElement:function(){return this.node&&(l(this.node),this.node=null),this},updateSize:function(){var v=this.node,p=v.getBoundingClientRect();return this.width=v.clientWidth,this.height=v.clientHeight,this.displayWidth=p.width||0,this.displayHeight=p.height||0,this},getChildByProperty:function(v,p){if(this.node){for(var g=this.node.querySelectorAll("*"),m=0;m<g.length;m++)if(g[m][v]===p)return g[m]}return null},getChildByID:function(v){return this.getChildByProperty("id",v)},getChildByName:function(v){return this.getChildByProperty("name",v)},setClassName:function(v){return this.node&&(this.node.className=v,this.updateSize()),this},setText:function(v){return this.node&&(this.node.innerText=v,this.updateSize()),this},setHTML:function(v){return this.node&&(this.node.innerHTML=v,this.updateSize()),this},preUpdate:function(){var v=this.parentContainer,p=this.node;p&&v&&!v.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(f.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(f.WAKE,this.handleSceneEvent,this)}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1056),a=i(15),n=i(25),h=new n,u=new n,l=new n,f=function(c,d,v,p){if(!!d.node){var g=d.node.style,m=d.scene.sys.settings;if(!g||!m.visible||a.RENDER_MASK!==d.renderFlags||d.cameraFilter!==0&&d.cameraFilter&v.id||d.parentContainer&&!d.parentContainer.willRender()){g.display="none";return}var x=d.parentContainer,y=v.alpha*d.alpha;x&&(y*=x.alpha);var T=h,S=u,C=l,E=0,P=0,M="0%",R="0%";p?(E=d.width*d.scaleX*d.originX,P=d.height*d.scaleY*d.originY,S.applyITRS(d.x-E,d.y-P,d.rotation,d.scaleX,d.scaleY),T.copyFrom(v.matrix),T.multiplyWithOffset(p,-v.scrollX*d.scrollFactorX,-v.scrollY*d.scrollFactorY),S.e=d.x-E,S.f=d.y-P,T.multiply(S,C)):(E=d.width*d.originX,P=d.height*d.originY,S.applyITRS(d.x-E,d.y-P,d.rotation,d.scaleX,d.scaleY),T.copyFrom(v.matrix),M=100*d.originX+"%",R=100*d.originY+"%",S.e-=v.scrollX*d.scrollFactorX,S.f-=v.scrollY*d.scrollFactorY,T.multiply(S,C)),d.transformOnly||(g.display="block",g.opacity=y,g.zIndex=d._depth,g.pointerEvents=d.pointerEvents,g.mixBlendMode=s[d._blendMode]),g.transform=C.getCSSMatrix()+" skew("+d.skewX+"rad, "+d.skewY+"rad) rotate3d("+d.rotate3d.x+","+d.rotate3d.y+","+d.rotate3d.z+","+d.rotate3d.w+d.rotate3dAngle+")",g.transformOrigin=M+" "+R}};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(11),n=i(15),h=i(1060),u=new s({Extends:n,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.Origin,a.ScrollFactor,a.Size,a.Texture,a.Tint,a.Transform,a.Visible,h],initialize:function(f){n.call(this,f,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(218),a=i(98),n=i(14),h=i(4),u=function(l,f,c){c===void 0&&(c=new h);var d=a(f,0,n.PI2);return s(l,d,c)};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(447),a=i(218),n=i(98),h=i(14),u=function(l,f,c,d){d===void 0&&(d=[]),!f&&c>0&&(f=s(l)/c);for(var v=0;v<f;v++){var p=n(v/f,0,h.PI2);d.push(a(l,p))}return d};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a=s.width/2,n=s.height/2,h=Math.pow(a-n,2)/Math.pow(a+n,2);return Math.PI*(a+n)*(1+3*h/(10+Math.sqrt(4-3*h)))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(217),a=i(30),n=function(h,u,l,f,c,d){var v=u.commandBuffer,p=v.length,g=c||h.currentContext;if(!(p===0||!a(h,g,u,l,f))){l.addToRenderList(u);var m=1,x=1,y=0,T=0,S=1,C=0,E=0,P=0;g.beginPath();for(var M=0;M<p;++M){var R=v[M];switch(R){case s.ARC:g.arc(v[M+1],v[M+2],v[M+3],v[M+4],v[M+5],v[M+6]),M+=7;break;case s.LINE_STYLE:S=v[M+1],y=v[M+2],m=v[M+3],C=(y&16711680)>>>16,E=(y&65280)>>>8,P=y&255,g.strokeStyle="rgba("+C+","+E+","+P+","+m+")",g.lineWidth=S,M+=3;break;case s.FILL_STYLE:T=v[M+1],x=v[M+2],C=(T&16711680)>>>16,E=(T&65280)>>>8,P=T&255,g.fillStyle="rgba("+C+","+E+","+P+","+x+")",M+=2;break;case s.BEGIN_PATH:g.beginPath();break;case s.CLOSE_PATH:g.closePath();break;case s.FILL_PATH:d||g.fill();break;case s.STROKE_PATH:d||g.stroke();break;case s.FILL_RECT:d?g.rect(v[M+1],v[M+2],v[M+3],v[M+4]):g.fillRect(v[M+1],v[M+2],v[M+3],v[M+4]),M+=4;break;case s.FILL_TRIANGLE:g.beginPath(),g.moveTo(v[M+1],v[M+2]),g.lineTo(v[M+3],v[M+4]),g.lineTo(v[M+5],v[M+6]),g.closePath(),d||g.fill(),M+=6;break;case s.STROKE_TRIANGLE:g.beginPath(),g.moveTo(v[M+1],v[M+2]),g.lineTo(v[M+3],v[M+4]),g.lineTo(v[M+5],v[M+6]),g.closePath(),d||g.stroke(),M+=6;break;case s.LINE_TO:g.lineTo(v[M+1],v[M+2]),M+=2;break;case s.MOVE_TO:g.moveTo(v[M+1],v[M+2]),M+=2;break;case s.LINE_FX_TO:g.lineTo(v[M+1],v[M+2]),M+=5;break;case s.MOVE_FX_TO:g.moveTo(v[M+1],v[M+2]),M+=5;break;case s.SAVE:g.save();break;case s.RESTORE:g.restore();break;case s.TRANSLATE:g.translate(v[M+1],v[M+2]),M+=2;break;case s.SCALE:g.scale(v[M+1],v[M+2]),M+=2;break;case s.ROTATE:g.rotate(v[M+1]),M+=1;break;case s.GRADIENT_FILL_STYLE:M+=5;break;case s.GRADIENT_LINE_STYLE:M+=6;break}}g.restore()}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(137),n=i(80),h=i(2),u=i(68),l=new s({initialize:function(c,d,v,p){p===void 0&&(p=!1),this.propertyKey=d,this.propertyValue=v,this.defaultValue=v,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=p,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(c)},loadConfig:function(f,c){f===void 0&&(f={}),c&&(this.propertyKey=c),this.propertyValue=h(f,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(f){return this.propertyValue=f,this.setMethods()},setMethods:function(){var f=this.propertyValue,c=typeof f;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,c==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(f))this.onEmit=this.randomStaticValueEmit;else if(c==="function")this.emitOnly?this.onEmit=f:this.onUpdate=f;else if(c==="object"&&this.hasBoth(f,"start","end")){this.start=f.start,this.end=f.end;var d=this.has(f,"random");if(d&&(this.onEmit=this.randomRangedValueEmit),this.has(f,"steps"))this.steps=f.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var v=this.has(f,"ease")?f.ease:"Linear";this.ease=n(v,f.easeParams),d||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(c==="object"&&this.hasBoth(f,"min","max"))this.start=f.min,this.end=f.max,this.onEmit=this.randomRangedValueEmit;else if(c==="object"&&this.has(f,"random")){var p=f.random;Array.isArray(p)&&(this.start=p[0],this.end=p[1]),this.onEmit=this.randomRangedValueEmit}else c==="object"&&this.hasEither(f,"onEmit","onUpdate")&&(this.has(f,"onEmit")&&(this.onEmit=f.onEmit),this.has(f,"onUpdate")&&(this.onUpdate=f.onUpdate));return this},has:function(f,c){return f.hasOwnProperty(c)},hasBoth:function(f,c,d){return f.hasOwnProperty(c)&&f.hasOwnProperty(d)},hasEither:function(f,c,d){return f.hasOwnProperty(c)||f.hasOwnProperty(d)},defaultEmit:function(f,c,d){return d},defaultUpdate:function(f,c,d,v){return v},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var f=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[f]},randomRangedValueEmit:function(f,c){var d=a(this.start,this.end);return f&&f.data[c]&&(f.data[c].min=d),d},steppedEmit:function(){var f=this.counter,c=this.counter+(this.end-this.start)/this.steps;return this.counter=u(c,this.start,this.end),f},easedValueEmit:function(f,c){if(f&&f.data[c]){var d=f.data[c];d.min=this.start,d.max=this.end}return this.start},easeValueUpdate:function(f,c,d){var v=f.data[c];return(v.max-v.min)*this.ease(d)+v.min}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(2),n=new s({initialize:function(u,l,f,c,d){if(typeof u=="object"){var v=u;u=a(v,"x",0),l=a(v,"y",0),f=a(v,"power",0),c=a(v,"epsilon",100),d=a(v,"gravity",50)}else u===void 0&&(u=0),l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=100),d===void 0&&(d=50);this.x=u,this.y=l,this.active=!0,this._gravity=d,this._power=0,this._epsilon=0,this.power=f,this.epsilon=c},update:function(h,u){var l=this.x-h.x,f=this.y-h.y,c=l*l+f*f;if(c!==0){var d=Math.sqrt(c);c<this._epsilon&&(c=this._epsilon);var v=this._power*u/(c*d)*100;h.velocityX+=l*v,h.velocityY+=f*v}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(h){this._epsilon=h*h}},power:{get:function(){return this._power/this._gravity},set:function(h){this._power=h*this._gravity}},gravity:{get:function(){return this._gravity},set:function(h){var u=this.power;this._gravity=h,this.power=u}}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(36),n=i(50),h=new s({initialize:function(l){this.emitter=l,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(u,l){var f=this.emitter;this.frame=f.getFrame(),f.emitZone&&f.emitZone.getPoint(this),u===void 0?this.x+=f.x.onEmit(this,"x"):this.x+=u,l===void 0?this.y+=f.y.onEmit(this,"y"):this.y+=l,this.life=f.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var c=f.speedX.onEmit(this,"speedX"),d=f.speedY?f.speedY.onEmit(this,"speedY"):c;if(f.radial){var v=a(f.angle.onEmit(this,"angle"));this.velocityX=Math.cos(v)*Math.abs(c),this.velocityY=Math.sin(v)*Math.abs(d)}else if(f.moveTo){var p=f.moveToX.onEmit(this,"moveToX"),g=f.moveToY?f.moveToY.onEmit(this,"moveToY"):p,m=Math.atan2(g-this.y,p-this.x),x=n(this.x,this.y,p,g)/(this.life/1e3);this.velocityX=Math.cos(m)*x,this.velocityY=Math.sin(m)*x}else this.velocityX=c,this.velocityY=d;f.acceleration&&(this.accelerationX=f.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=f.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=f.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=f.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=f.delay.onEmit(this,"delay"),this.scaleX=f.scaleX.onEmit(this,"scaleX"),this.scaleY=f.scaleY?f.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=f.rotate.onEmit(this,"rotate"),this.rotation=a(this.angle),this.bounce=f.bounce.onEmit(this,"bounce"),this.alpha=f.alpha.onEmit(this,"alpha"),this.tint=f.tint.onEmit(this,"tint")},computeVelocity:function(u,l,f,c){var d=this.velocityX,v=this.velocityY,p=this.accelerationX,g=this.accelerationY,m=this.maxVelocityX,x=this.maxVelocityY;d+=u.gravityX*f,v+=u.gravityY*f,p&&(d+=p*f),g&&(v+=g*f),d>m?d=m:d<-m&&(d=-m),v>x?v=x:v<-x&&(v=-x),this.velocityX=d,this.velocityY=v;for(var y=0;y<c.length;y++)c[y].update(this,l,f)},checkBounds:function(u){var l=u.bounds,f=-this.bounce;this.x<l.x&&u.collideLeft?(this.x=l.x,this.velocityX*=f):this.x>l.right&&u.collideRight&&(this.x=l.right,this.velocityX*=f),this.y<l.y&&u.collideTop?(this.y=l.y,this.velocityY*=f):this.y>l.bottom&&u.collideBottom&&(this.y=l.bottom,this.velocityY*=f)},update:function(u,l,f){if(this.delayCurrent>0)return this.delayCurrent-=u,!1;var c=this.emitter,d=1-this.lifeCurrent/this.life;return this.lifeT=d,this.computeVelocity(c,u,l,f),this.x+=this.velocityX*l,this.y+=this.velocityY*l,c.bounds&&this.checkBounds(c),c.deathZone&&c.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=c.scaleX.onUpdate(this,"scaleX",d,this.scaleX),c.scaleY?this.scaleY=c.scaleY.onUpdate(this,"scaleY",d,this.scaleY):this.scaleY=this.scaleX,this.angle=c.rotate.onUpdate(this,"rotate",d,this.angle),this.rotation=a(this.angle),this.alpha=c.alpha.onUpdate(this,"alpha",d,this.alpha),this.tint=c.tint.onUpdate(this,"tint",d,this.tint),this.lifeCurrent-=u,this.lifeCurrent<=0)}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),a=i(0),n=i(11),h=i(453),u=i(454),l=i(449),f=i(2),c=i(210),d=i(455),v=i(126),p=i(451),g=i(456),m=i(10),x=i(79),y=i(3),T=i(68),S=new a({Mixins:[n.BlendMode,n.Mask,n.ScrollFactor,n.Visible],initialize:function(E,P){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=p,this.x=new l(P,"x",0,!0),this.y=new l(P,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new l(P,"accelerationX",0,!0),this.accelerationY=new l(P,"accelerationY",0,!0),this.maxVelocityX=new l(P,"maxVelocityX",1e4,!0),this.maxVelocityY=new l(P,"maxVelocityY",1e4,!0),this.speedX=new l(P,"speedX",0,!0),this.speedY=new l(P,"speedY",0,!0),this.moveTo=!1,this.moveToX=new l(P,"moveToX",0,!0),this.moveToY=new l(P,"moveToY",0,!0),this.bounce=new l(P,"bounce",0,!0),this.scaleX=new l(P,"scaleX",1),this.scaleY=new l(P,"scaleY",1),this.tint=new l(P,"tint",16777215),this.alpha=new l(P,"alpha",1),this.lifespan=new l(P,"lifespan",1e3,!0),this.angle=new l(P,"angle",{min:0,max:360},!0),this.rotate=new l(P,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new l(P,"quantity",1,!0),this.delay=new l(P,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=s.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,P&&this.fromJSON(P)},fromJSON:function(C){if(!C)return this;var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],v(C,P)&&(this[P]=f(C,P));for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],v(C,P)&&this[P].loadConfig(C);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,v(C,"speed")&&(this.speedX.loadConfig(C,"speed"),this.speedY=null),(d(C,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),v(C,"scale")&&(this.scaleX.loadConfig(C,"scale"),this.scaleY=null),v(C,"callbackScope")){var M=f(C,"callbackScope",null);this.emitCallbackScope=M,this.deathCallbackScope=M}return v(C,"emitZone")&&this.setEmitZone(C.emitZone),v(C,"deathZone")&&this.setDeathZone(C.deathZone),v(C,"bounds")&&this.setBounds(C.bounds),v(C,"followOffset")&&this.followOffset.setFromObject(f(C,"followOffset",0)),v(C,"frame")&&this.setFrame(C.frame),v(C,"reserve")&&this.reserve(C.reserve),this},toJSON:function(C){C===void 0&&(C={});var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],C[P]=this[P];for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],this[P]&&(C[P]=this[P].toJSON());return this.speedY||(delete C.speedX,C.speed=this.speedX.toJSON()),this.scaleY||(delete C.scaleX,C.scale=this.scaleX.toJSON()),C},startFollow:function(C,E,P,M){return E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=!1),this.follow=C,this.followOffset.set(E,P),this.trackVisible=M,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return c(this.frames);var C=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=T(this.currentFrame+1,0,this._frameLength)),C},setFrame:function(C,E,P){E===void 0&&(E=!0),P===void 0&&(P=1),this.randomFrame=E,this.frameQuantity=P,this.currentFrame=0,this._frameCounter=0;var M=typeof C;if(Array.isArray(C)||M==="string"||M==="number")this.manager.setEmitterFrames(C,this);else if(M==="object"){var R=C;C=f(R,"frames",null),C&&this.manager.setEmitterFrames(C,this);var A=f(R,"cycle",!1);this.randomFrame=!A,this.frameQuantity=f(R,"quantity",P)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(C){return C===void 0&&(C=!0),this.radial=C,this},setPosition:function(C,E){return this.x.onChange(C),this.y.onChange(E),this},setBounds:function(C,E,P,M){if(typeof C=="object"){var R=C;C=R.x,E=R.y,P=v(R,"w")?R.w:R.width,M=v(R,"h")?R.h:R.height}return this.bounds?this.bounds.setTo(C,E,P,M):this.bounds=new m(C,E,P,M),this},setSpeedX:function(C){return this.speedX.onChange(C),this.radial=!1,this},setSpeedY:function(C){return this.speedY&&(this.speedY.onChange(C),this.radial=!1),this},setSpeed:function(C){return this.speedX.onChange(C),this.speedY=null,this.radial=!0,this},setScaleX:function(C){return this.scaleX.onChange(C),this},setScaleY:function(C){return this.scaleY.onChange(C),this},setScale:function(C){return this.scaleX.onChange(C),this.scaleY=null,this},setGravityX:function(C){return this.gravityX=C,this},setGravityY:function(C){return this.gravityY=C,this},setGravity:function(C,E){return this.gravityX=C,this.gravityY=E,this},setAlpha:function(C){return this.alpha.onChange(C),this},setTint:function(C){return this.tint.onChange(C),this},setEmitterAngle:function(C){return this.angle.onChange(C),this},setAngle:function(C){return this.angle.onChange(C),this},setLifespan:function(C){return this.lifespan.onChange(C),this},setQuantity:function(C){return this.quantity.onChange(C),this},setFrequency:function(C,E){return this.frequency=C,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(C){if(C===void 0)this.emitZone=null;else{var E=f(C,"type","random"),P=f(C,"source",null);switch(E){case"random":this.emitZone=new g(P);break;case"edge":var M=f(C,"quantity",1),R=f(C,"stepRate",0),A=f(C,"yoyo",!1),O=f(C,"seamless",!0);this.emitZone=new u(P,M,R,A,O);break}}return this},setDeathZone:function(C){if(C===void 0)this.deathZone=null;else{var E=f(C,"type","onEnter"),P=f(C,"source",null);if(P&&typeof P.contains=="function"){var M=E==="onEnter";this.deathZone=new h(P,M)}}return this},reserve:function(C){for(var E=this.dead,P=0;P<C;P++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(C,E){return C===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof C=="function"&&(this.emitCallback=C,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(C,E){return C===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof C=="function"&&(this.deathCallback=C,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var C=this.dead,E=this.alive;E.length>0;)C.push(E.pop());return this},forEachAlive:function(C,E){for(var P=this.alive,M=P.length,R=0;R<M;++R)C.call(E,P[R],this);return this},forEachDead:function(C,E){for(var P=this.dead,M=P.length,R=0;R<M;++R)C.call(E,P[R],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return x(this.alive,this.depthSortCallback),this},flow:function(C,E){return E===void 0&&(E=1),this.frequency=C,this.quantity.onChange(E),this.start()},explode:function(C,E,P){return this.frequency=-1,this.emitParticle(C,E,P)},emitParticleAt:function(C,E,P){return this.emitParticle(P,C,E)},emitParticle:function(C,E,P){if(!this.atLimit()){C===void 0&&(C=this.quantity.onEmit());for(var M=this.dead,R=this.follow?this.follow.x+this.followOffset.x:E,A=this.follow?this.follow.y+this.followOffset.y:P,O=0;O<C;O++){var F=M.pop();if(F||(F=new this.particleClass(this)),F.fire(R,A),this.particleBringToTop?this.alive.push(F):this.alive.unshift(F),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,F,this),this.atLimit())break}return F}},preUpdate:function(C,E){E*=this.timeScale;var P=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var M=this.manager.getProcessors(),R=this.alive,A=this.dead,O=0,F=[],b=R.length;for(O=0;O<b;O++){var w=R[O];w.update(E,P,M)&&F.push({index:O,particle:w})}if(b=F.length,b>0){var N=this.deathCallback,V=this.deathCallbackScope;for(O=b-1;O>=0;O--){var W=F[O];R.splice(W.index,1),A.push(W.particle),N&&N.call(V,W.particle),W.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(C,E){return C.y-E.y}});e.exports=S},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u){this.source=h,this.killOnEnter=u},willKill:function(n){var h=this.source.contains(n.x,n.y);return h&&this.killOnEnter||!h&&!this.killOnEnter}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u,l,f,c){f===void 0&&(f=!1),c===void 0&&(c=!0),this.source=h,this.points=[],this.quantity=u,this.stepRate=l,this.yoyo=f,this.counter=-1,this.seamless=c,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var n=this.points[0],h=this.points[this.points.length-1];n.x===h.x&&n.y===h.y&&this.points.pop()}var u=this._length;return this._length=this.points.length,this._length<u&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(n){return this.source=n,this.updateSource()},getPoint:function(n){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var h=this.points[this.counter];h&&(n.x=h.x,n.y=h.y)}});e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){for(var n=0;n<a.length;n++)if(s.hasOwnProperty(a[n]))return!0;return!1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(3),n=new s({initialize:function(u){this.source=u,this._tempVec=new a},getPoint:function(h){var u=this._tempVec;this.source.getRandomPoint(u),h.x=u.x,h.y=u.y}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(11),n=i(73),h=new s({Extends:n,Mixins:[a.PathFollower],initialize:function(l,f,c,d,v,p){n.call(this,l,c,d,v,p),this.path=f},preUpdate:function(u,l){this.anims.update(u,l),this.pathUpdate(u)}});e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=s.canvas,u=s.context,l=s.style,f=[],c=0,d=n.length;l.maxLines>0&&l.maxLines<n.length&&(d=l.maxLines),l.syncFont(h,u);for(var v=0;v<d;v++){var p=l.strokeThickness;p+=u.measureText(n[v]).width,l.wordWrap&&(p-=u.measureText(" ").width),f[v]=Math.ceil(p),c=Math.max(c,f[v])}var g=a.fontSize+l.strokeThickness,m=g*d,x=s.lineSpacing;return d>1&&(m+=x*(d-1)),{width:c,height:m,lines:d,lineWidths:f,lineSpacing:x,lineHeight:g}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(13),n=i(6),h=i(460),u={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},l=new s({initialize:function(c,d){this.parent=c,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(d,!1,!0);var v=n(d,"metrics",!1);v?this.metrics={ascent:n(v,"ascent",0),descent:n(v,"descent",0),fontSize:n(v,"fontSize",0)}:this.metrics=h(this)},setStyle:function(f,c,d){c===void 0&&(c=!0),d===void 0&&(d=!1),f&&f.hasOwnProperty("fontSize")&&typeof f.fontSize=="number"&&(f.fontSize=f.fontSize.toString()+"px");for(var v in u){var p=d?u[v][1]:this[v];v==="wordWrapCallback"||v==="wordWrapCallbackScope"?this[v]=n(f,u[v][0],p):this[v]=a(f,u[v][0],p)}var g=n(f,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=n(f,"fill",null);return m!==null&&(this.color=m),c?this.update(!0):this.parent},syncFont:function(f,c){c.font=this._font},syncStyle:function(f,c){c.textBaseline="alphabetic",c.fillStyle=this.color,c.strokeStyle=this.stroke,c.lineWidth=this.strokeThickness,c.lineCap="round",c.lineJoin="round"},syncShadow:function(f,c){c?(f.shadowOffsetX=this.shadowOffsetX,f.shadowOffsetY=this.shadowOffsetY,f.shadowColor=this.shadowColor,f.shadowBlur=this.shadowBlur):(f.shadowOffsetX=0,f.shadowOffsetY=0,f.shadowColor=0,f.shadowBlur=0)},update:function(f){return f&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=h(this)),this.parent.updateText()},setFont:function(f,c){c===void 0&&(c=!0);var d=f,v="",p="";if(typeof f!="string")d=n(f,"fontFamily","Courier"),v=n(f,"fontSize","16px"),p=n(f,"fontStyle","");else{var g=f.split(" "),m=0;p=g.length>2?g[m++]:"",v=g[m++]||"16px",d=g[m++]||"Courier"}return(d!==this.fontFamily||v!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=d,this.fontSize=v,this.fontStyle=p,c&&this.update(!0)),this.parent},setFontFamily:function(f){return this.fontFamily!==f&&(this.fontFamily=f,this.update(!0)),this.parent},setFontStyle:function(f){return this.fontStyle!==f&&(this.fontStyle=f,this.update(!0)),this.parent},setFontSize:function(f){return typeof f=="number"&&(f=f.toString()+"px"),this.fontSize!==f&&(this.fontSize=f,this.update(!0)),this.parent},setTestString:function(f){return this.testString=f,this.update(!0)},setFixedSize:function(f,c){return this.fixedWidth=f,this.fixedHeight=c,f&&(this.parent.width=f),c&&(this.parent.height=c),this.update(!1)},setBackgroundColor:function(f){return this.backgroundColor=f,this.update(!1)},setFill:function(f){return this.color=f,this.update(!1)},setColor:function(f){return this.color=f,this.update(!1)},setResolution:function(f){return this.resolution=f,this.update(!1)},setStroke:function(f,c){return c===void 0&&(c=this.strokeThickness),f===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==f||this.strokeThickness!==c)&&(this.stroke=f,this.strokeThickness=c,this.update(!0)),this.parent},setShadow:function(f,c,d,v,p,g){return f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d="#000"),v===void 0&&(v=0),p===void 0&&(p=!1),g===void 0&&(g=!0),this.shadowOffsetX=f,this.shadowOffsetY=c,this.shadowColor=d,this.shadowBlur=v,this.shadowStroke=p,this.shadowFill=g,this.update(!1)},setShadowOffset:function(f,c){return f===void 0&&(f=0),c===void 0&&(c=f),this.shadowOffsetX=f,this.shadowOffsetY=c,this.update(!1)},setShadowColor:function(f){return f===void 0&&(f="#000"),this.shadowColor=f,this.update(!1)},setShadowBlur:function(f){return f===void 0&&(f=0),this.shadowBlur=f,this.update(!1)},setShadowStroke:function(f){return this.shadowStroke=f,this.update(!1)},setShadowFill:function(f){return this.shadowFill=f,this.update(!1)},setWordWrapWidth:function(f,c){return c===void 0&&(c=!1),this.wordWrapWidth=f,this.wordWrapUseAdvanced=c,this.update(!1)},setWordWrapCallback:function(f,c){return c===void 0&&(c=null),this.wordWrapCallback=f,this.wordWrapCallbackScope=c,this.update(!1)},setAlign:function(f){return f===void 0&&(f="left"),this.align=f,this.update(!1)},setMaxLines:function(f){return f===void 0&&(f=0),this.maxLines=f,this.update(!1)},getTextMetrics:function(){var f=this.metrics;return{ascent:f.ascent,descent:f.descent,fontSize:f.fontSize}},toJSON:function(){var f={};for(var c in u)f[c]=this[c];return f.metrics=this.getTextMetrics(),f},destroy:function(){this.parent=void 0}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),a=function(n){var h=s.create(this),u=h.getContext("2d");n.syncFont(h,u);var l=u.measureText(n.testString);if("actualBoundingBoxAscent"in l){var f=l.actualBoundingBoxAscent,c=l.actualBoundingBoxDescent;return s.remove(h),{ascent:f,descent:c,fontSize:f+c}}var d=Math.ceil(l.width*n.baselineX),v=d,p=2*v;v=v*n.baselineY|0,h.width=d,h.height=p,u.fillStyle="#f00",u.fillRect(0,0,d,p),u.font=n._font,u.textBaseline="alphabetic",u.fillStyle="#000",u.fillText(n.testString,0,v);var g={ascent:0,descent:0,fontSize:0},m=u.getImageData(0,0,d,p);if(!m)return g.ascent=v,g.descent=v+6,g.fontSize=g.ascent+g.descent,s.remove(h),g;var x=m.data,y=x.length,T=d*4,S,C,E=0,P=!1;for(S=0;S<v;S++){for(C=0;C<T;C+=4)if(x[E+C]!==255){P=!0;break}if(!P)E+=T;else break}for(g.ascent=v-S,E=y-T,P=!1,S=p;S>v;S--){for(C=0;C<T;C+=4)if(x[E+C]!==255){P=!0;break}if(!P)E-=T;else break}return g.descent=S-v,g.fontSize=g.ascent+g.descent,s.remove(h),g};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1097),a=i(0),n=i(36),h=i(59),u=i(65),l=i(14),f=i(34),c=new a({Extends:f,Mixins:[s],initialize:function(v,p,g,m,x,y,T,S,C){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=0),y===void 0&&(y=360),T===void 0&&(T=!1),f.call(this,v,"Arc",new u(0,0,m)),this._startAngle=x,this._endAngle=y,this._anticlockwise=T,this._iterations=.01,this.setPosition(p,g);var E=this.geom.radius*2;this.setSize(E,E),S!==void 0&&this.setFillStyle(S,C),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(d){this._iterations=d,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(d){this.geom.radius=d;var v=d*2;this.setSize(v,v),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(d){this._startAngle=d,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(d){this._endAngle=d,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(d){this._anticlockwise=d,this.updateData()}},setRadius:function(d){return this.radius=d,this},setIterations:function(d){return d===void 0&&(d=.01),this.iterations=d,this},setStartAngle:function(d,v){return this._startAngle=d,v!==void 0&&(this._anticlockwise=v),this.updateData()},setEndAngle:function(d,v){return this._endAngle=d,v!==void 0&&(this._anticlockwise=v),this.updateData()},updateData:function(){var d=this._iterations,v=d,p=this.geom.radius,g=n(this._startAngle),m=n(this._endAngle),x=this._anticlockwise,y=p,T=p;m-=g,x?m<-l.PI2?m=-l.PI2:m>0&&(m=-l.PI2+m%l.PI2):m>l.PI2?m=l.PI2:m<0&&(m=l.PI2+m%l.PI2);for(var S=[y+Math.cos(g)*p,T+Math.sin(g)*p],C;v<1;)C=m*v+g,S.push(y+Math.cos(C)*p,T+Math.sin(C)*p),v+=d;return C=m+g,S.push(y+Math.cos(C)*p,T+Math.sin(C)*p),S.push(y+Math.cos(g)*p,T+Math.sin(g)*p),this.pathIndexes=h(S),this.pathData=S,this}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(1100),n=i(59),h=i(10),u=i(34),l=new s({Extends:u,Mixins:[a],initialize:function(c,d,v,p,g,m){d===void 0&&(d=0),v===void 0&&(v=0),u.call(this,c,"Curve",p),this._smoothness=32,this._curveBounds=new h,this.closePath=!1,this.setPosition(d,v),g!==void 0&&this.setFillStyle(g,m),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(f){this._smoothness=f,this.updateData()}},setSmoothness:function(f){return this._smoothness=f,this.updateData()},updateData:function(){var f=this._curveBounds,c=this._smoothness;this.geom.getBounds(f,c),this.setSize(f.width,f.height),this.updateDisplayOrigin();for(var d=[],v=this.geom.getPoints(c),p=0;p<v.length;p++)d.push(v[p].x,v[p].y);return d.push(v[0].x,v[0].y),this.pathIndexes=n(d),this.pathData=d,this}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(59),n=i(1103),h=i(111),u=i(34),l=new s({Extends:u,Mixins:[n],initialize:function(c,d,v,p,g,m,x){d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=128),g===void 0&&(g=128),u.call(this,c,"Ellipse",new h(p/2,g/2,p,g)),this._smoothness=64,this.setPosition(d,v),this.width=p,this.height=g,m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(f){this._smoothness=f,this.updateData()}},setSize:function(f,c){return this.width=f,this.height=c,this.geom.setPosition(f/2,c/2),this.geom.setSize(f,c),this.updateData()},setSmoothness:function(f){return this._smoothness=f,this.updateData()},updateData:function(){for(var f=[],c=this.geom.getPoints(this._smoothness),d=0;d<c.length;d++)f.push(c[d].x,c[d].y);return f.push(c[0].x,c[0].y),this.pathIndexes=a(f),this.pathData=f,this}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(34),n=i(1106),h=new s({Extends:a,Mixins:[n],initialize:function(l,f,c,d,v,p,g,m,x,y,T){f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d=128),v===void 0&&(v=128),p===void 0&&(p=32),g===void 0&&(g=32),a.call(this,l,"Grid",null),this.cellWidth=p,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(f,c),this.setSize(d,v),this.setFillStyle(m,x),y!==void 0&&this.setOutlineStyle(y,T),this.updateDisplayOrigin()},setFillStyle:function(u,l){return l===void 0&&(l=1),u===void 0?this.showCells=!1:(this.fillColor=u,this.fillAlpha=l,this.showCells=!0),this},setAltFillStyle:function(u,l){return l===void 0&&(l=1),u===void 0?this.showAltCells=!1:(this.altFillColor=u,this.altFillAlpha=l,this.showAltCells=!0),this},setOutlineStyle:function(u,l){return l===void 0&&(l=1),u===void 0?this.showOutline=!1:(this.outlineFillColor=u,this.outlineFillAlpha=l,this.showOutline=!0),this}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1109),a=i(0),n=i(34),h=new a({Extends:n,Mixins:[s],initialize:function(l,f,c,d,v,p,g,m){f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d=48),v===void 0&&(v=32),p===void 0&&(p=15658734),g===void 0&&(g=10066329),m===void 0&&(m=13421772),n.call(this,l,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(f,c),this.setSize(d,v),this.updateDisplayOrigin()},setProjection:function(u){return this.projection=u,this},setFaces:function(u,l,f){return u===void 0&&(u=!0),l===void 0&&(l=!0),f===void 0&&(f=!0),this.showTop=u,this.showLeft=l,this.showRight=f,this},setFillStyle:function(u,l,f){return this.fillTop=u,this.fillLeft=l,this.fillRight=f,this.isFilled=!0,this}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(1112),n=i(34),h=new s({Extends:n,Mixins:[a],initialize:function(l,f,c,d,v,p,g,m,x){f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d=48),v===void 0&&(v=32),p===void 0&&(p=!1),g===void 0&&(g=15658734),m===void 0&&(m=10066329),x===void 0&&(x=13421772),n.call(this,l,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=m,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(f,c),this.setSize(d,v),this.updateDisplayOrigin()},setProjection:function(u){return this.projection=u,this},setReversed:function(u){return this.isReversed=u,this},setFaces:function(u,l,f){return u===void 0&&(u=!0),l===void 0&&(l=!0),f===void 0&&(f=!0),this.showTop=u,this.showLeft=l,this.showRight=f,this},setFillStyle:function(u,l,f){return this.fillTop=u,this.fillLeft=l,this.fillRight=f,this.isFilled=!0,this}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(34),n=i(47),h=i(1115),u=new s({Extends:a,Mixins:[h],initialize:function(f,c,d,v,p,g,m,x,y){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=128),m===void 0&&(m=0),a.call(this,f,"Line",new n(v,p,g,m));var T=Math.max(1,this.geom.right-this.geom.left),S=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(c,d),this.setSize(T,S),x!==void 0&&this.setStrokeStyle(1,x,y),this.updateDisplayOrigin()},setLineWidth:function(l,f){return f===void 0&&(f=l),this._startWidth=l,this._endWidth=f,this.lineWidth=l,this},setTo:function(l,f,c,d){return this.geom.setTo(l,f,c,d),this}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1118),a=i(0),n=i(59),h=i(469),u=i(227),l=i(34),f=i(472),c=new a({Extends:l,Mixins:[s],initialize:function(v,p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),l.call(this,v,"Polygon",new u(m));var T=h(this.geom);this.setPosition(p,g),this.setSize(T.width,T.height),x!==void 0&&this.setFillStyle(x,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(d){d===void 0&&(d=1);for(var v=0;v<d;v++)f(this.geom);return this.updateData()},updateData:function(){for(var d=[],v=this.geom.points,p=0;p<v.length;p++)d.push(v[p].x,v[p].y);return d.push(v[0].x,v[0].y),this.pathIndexes=n(d),this.pathData=d,this}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=function(n,h){h===void 0&&(h=new s);for(var u=1/0,l=1/0,f=-u,c=-l,d,v=0;v<n.points.length;v++)d=n.points[v],u=Math.min(u,d.x),l=Math.min(l,d.y),f=Math.max(f,d.x),c=Math.max(c,d.y);return h.x=u,h.y=l,h.width=f-u,h.height=c-l,h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),a=i(47),n=i(471),h=function(u,l,f,c){c===void 0&&(c=[]);var d=u.points,v=n(u);!l&&f>0&&(l=v/f);for(var p=0;p<l;p++)for(var g=v*(p/l),m=0,x=0;x<d.length;x++){var y=d[x],T=d[(x+1)%d.length],S=new a(y.x,y.y,T.x,T.y),C=s(S);if(g<m||g>m+C){m+=C;continue}var E=S.getPoint((g-m)/C);c.push(E);break}return c};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),a=i(47),n=function(h){for(var u=h.points,l=0,f=0;f<u.length;f++){var c=u[f],d=u[(f+1)%u.length],v=new a(c.x,c.y,d.x,d.y);l+=s(v)}return l};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(a,n){return a[0]=n[0],a[1]=n[1],a},s=function(a){var n,h=[],u=a.points;for(n=0;n<u.length;n++)h.push([u[n].x,u[n].y]);var l=[];for(h.length>0&&l.push(i([0,0],h[0])),n=0;n<h.length-1;n++){var f=h[n],c=h[n+1],d=f[0],v=f[1],p=c[0],g=c[1];l.push([.85*d+.15*p,.85*v+.15*g]),l.push([.15*d+.85*p,.15*v+.85*g])}return h.length>1&&l.push(i([0,0],h[h.length-1])),a.setTo(l)};e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(10),n=i(34),h=i(1121),u=new s({Extends:n,Mixins:[h],initialize:function(f,c,d,v,p,g,m){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=128),p===void 0&&(p=128),n.call(this,f,"Rectangle",new a(0,0,v,p)),this.setPosition(c,d),this.setSize(v,p),g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},setSize:function(l,f){return this.width=l,this.height=f,this.geom.setSize(l,f),this.updateData(),this},updateData:function(){var l=[],f=this.geom,c=this._tempLine;return f.getLineA(c),l.push(c.x1,c.y1,c.x2,c.y2),f.getLineB(c),l.push(c.x2,c.y2),f.getLineC(c),l.push(c.x2,c.y2),f.getLineD(c),l.push(c.x2,c.y2),this.pathData=l,this}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1124),a=i(0),n=i(59),h=i(34),u=new a({Extends:h,Mixins:[s],initialize:function(f,c,d,v,p,g,m,x){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=5),p===void 0&&(p=32),g===void 0&&(g=64),h.call(this,f,"Star",null),this._points=v,this._innerRadius=p,this._outerRadius=g,this.setPosition(c,d),this.setSize(g*2,g*2),m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},setPoints:function(l){return this._points=l,this.updateData()},setInnerRadius:function(l){return this._innerRadius=l,this.updateData()},setOuterRadius:function(l){return this._outerRadius=l,this.updateData()},points:{get:function(){return this._points},set:function(l){this._points=l,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(l){this._innerRadius=l,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(l){this._outerRadius=l,this.updateData()}},updateData:function(){var l=[],f=this._points,c=this._innerRadius,d=this._outerRadius,v=Math.PI/2*3,p=Math.PI/f,g=d,m=d;l.push(g,m+-d);for(var x=0;x<f;x++)l.push(g+Math.cos(v)*d,m+Math.sin(v)*d),v+=p,l.push(g+Math.cos(v)*c,m+Math.sin(v)*c),v+=p;return l.push(g,m+-d),this.pathIndexes=n(l),this.pathData=l,this}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(34),n=i(82),h=i(1127),u=new s({Extends:a,Mixins:[h],initialize:function(f,c,d,v,p,g,m,x,y,T,S){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=128),g===void 0&&(g=64),m===void 0&&(m=0),x===void 0&&(x=128),y===void 0&&(y=128),a.call(this,f,"Triangle",new n(v,p,g,m,x,y));var C=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(c,d),this.setSize(C,E),T!==void 0&&this.setFillStyle(T,S),this.updateDisplayOrigin(),this.updateData()},setTo:function(l,f,c,d,v,p){return this.geom.setTo(l,f,c,d,v,p),this.updateData()},updateData:function(){var l=[],f=this.geom,c=this._tempLine;return f.getLineA(c),l.push(c.x1,c.y1,c.x2,c.y2),f.getLineB(c),l.push(c.x2,c.y2),f.getLineC(c),l.push(c.x2,c.y2),this.pathData=l,this}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=i(67),n=function(h,u,l){l===void 0&&(l=new s);var f=h.getLineA(),c=h.getLineB(),d=h.getLineC();if(u<=0||u>=1)return l.x=f.x1,l.y=f.y1,l;var v=a(f),p=a(c),g=a(d),m=v+p+g,x=m*u,y=0;return x<v?(y=x/v,l.x=f.x1+(f.x2-f.x1)*y,l.y=f.y1+(f.y2-f.y1)*y):x>v+p?(x-=v+p,y=x/g,l.x=d.x1+(d.x2-d.x1)*y,l.y=d.y1+(d.y2-d.y1)*y):(x-=v,y=x/p,l.x=c.x1+(c.x2-c.x1)*y,l.y=c.y1+(c.y2-c.y1)*y),l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),a=i(4),n=function(h,u,l,f){f===void 0&&(f=[]);var c=h.getLineA(),d=h.getLineB(),v=h.getLineC(),p=s(c),g=s(d),m=s(v),x=p+g+m;!u&&l>0&&(u=x/l);for(var y=0;y<u;y++){var T=x*(y/u),S=0,C=new a;T<p?(S=T/p,C.x=c.x1+(c.x2-c.x1)*S,C.y=c.y1+(c.y2-c.y1)*S):T>p+g?(T-=p+g,S=T/m,C.x=v.x1+(v.x2-v.x1)*S,C.y=v.y1+(v.y2-v.y1)*S):(T-=p,S=T/g,C.x=d.x1+(d.x2-d.x1)*S,C.y=d.y1+(d.y2-d.y1)*S),f.push(C)}return f};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(!s||typeof s=="number")return!1;if(s.hasOwnProperty(a))return s[a]=n,!0;if(a.indexOf(".")!==-1){for(var h=a.split("."),u=s,l=s,f=0;f<h.length;f++)if(u.hasOwnProperty(h[f]))l=u,u=u[h[f]];else return!1;return l[h[h.length-1]]=n,!0}return!1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(116),a=i(117),n=function(h,u,l,f,c,d,v){if(f===void 0&&(f=!1),d===void 0&&(d=16777215),v===void 0&&(v=1),h.length!==u.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var p={faces:[],vertices:[]},g,m,x,y,T,S,C,E,P,M,R,A=f?3:2,O=Array.isArray(d),F=Array.isArray(v);if(Array.isArray(l)&&l.length>0)for(g=0;g<l.length;g++){var b=l[g],w=l[g]*2,N=l[g]*A;m=h[N],x=h[N+1],y=f?h[N+2]:0,T=u[w],S=u[w+1],C=O?d[b]:d,E=F?v[b]:v,P=0,M=0,R=0,c&&(P=c[N],M=c[N+1],R=f?c[N+2]:0),p.vertices.push(new a(m,x,y,T,S,C,E,P,M,R))}else{var V=0,W=0;for(g=0;g<h.length;g+=A)m=h[g],x=h[g+1],y=f?h[g+2]:0,T=u[V],S=u[V+1],C=O?d[W]:d,E=F?v[W]:v,P=0,M=0,R=0,c&&(P=c[g],M=c[g+1],R=f?c[g+2]:0),p.vertices.push(new a(m,x,y,T,S,C,E,P,M,R)),V+=2,W++}for(g=0;g<p.vertices.length;g+=3){var U=p.vertices[g],D=p.vertices[g+1],L=p.vertices[g+2];p.faces.push(new s(U,D,L))}return p};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(116),a=i(69),n=i(39),h=i(117),u=new n,l=new n,f=new a,c=function(d,v,p,g,m,x,y,T,S,C){p===void 0&&(p=1),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=0),S===void 0&&(S=0),C===void 0&&(C=!0);var E={faces:[],verts:[]},P=d.materials;u.set(g,m,x),l.set(y,T,S),f.fromRotationXYTranslation(l,u,C);for(var M=0;M<d.models.length;M++)for(var R=d.models[M],A=R.vertices,O=R.textureCoords,F=R.faces,b=0;b<F.length;b++){var w=F[b],N=w.vertices[0],V=w.vertices[1],W=w.vertices[2],U=A[N.vertexIndex],D=A[V.vertexIndex],L=A[W.vertexIndex],I=N.textureCoordsIndex,B=V.textureCoordsIndex,G=W.textureCoordsIndex,z=I===-1?{u:0,v:1}:O[I],Y=B===-1?{u:0,v:0}:O[B],X=G===-1?{u:1,v:1}:O[G],H=16777215;w.material!==""&&P[w.material]&&(H=P[w.material]);var $=new h(U.x*p,U.y*p,U.z*p,z.u,z.v,H).transformMat4(f),k=new h(D.x*p,D.y*p,D.z*p,Y.u,Y.v,H).transformMat4(f),K=new h(L.x*p,L.y*p,L.z*p,X.u,X.v,H).transformMat4(f);E.verts.push($,k,K),E.faces.push(new s($,k,K))}return v&&(v.faces=v.faces.concat(E.faces),v.vertices=v.vertices.concat(E.verts)),E};e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(65),a=i(0),n=i(11),h=i(200),u=i(12),l=new a({Extends:s,Mixins:[n.ScrollFactor,n.Visible],initialize:function(c,d,v,p,g,m,x){s.call(this,c,d,v),this.color=new h(p,g,m),this.intensity=x,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(f){return!(l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},setColor:function(f){var c=u.getFloatsFromUintRGB(f);return this.color.set(c[0],c[1],c[2]),this},setIntensity:function(f){return this.intensity=f,this},setRadius:function(f){return this.radius=f,this}});l.RENDER_MASK=15,e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(151),a=i(0),n=i(50),h=i(481),u=i(150),l=i(200),f=i(74),c=i(79),d=i(12),v=new a({initialize:function(){this.lights=[],this.ambientColor=new l(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,g,m,x,y,T){return this.systems.displayList.add(new u(this.scene,p,g,m,x,y,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var g=this.lights,m=p.worldView,x=[],y=0;y<g.length;y++){var T=g[y];T.willRender(p)&&s(T,m)&&x.push({light:T,distance:n(T.x,T.y,m.centerX,m.centerY)})}return x.length>this.maxLights&&(c(x,this.sortByDistance),x=x.slice(0,this.maxLights)),this.visibleLights=x.length,x},sortByDistance:function(p,g){return p.distance>=g.distance},setAmbientColor:function(p){var g=d.getFloatsFromUintRGB(p);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=16777215),y===void 0&&(y=1);var T=d.getFloatsFromUintRGB(x),S=new h(p,g,m,T[0],T[1],T[2],y);return this.lights.push(S),S},removeLight:function(p){var g=this.lights.indexOf(p);return g>=0&&f(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(56),a=i(17),n={Circle:i(1191),Ellipse:i(1201),Intersects:i(484),Line:i(1221),Mesh:i(1243),Point:i(1246),Polygon:i(1260),Rectangle:i(502),Triangle:i(1293)};n=a(!1,n,s),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CircleToCircle:i(231),CircleToRectangle:i(151),GetCircleToCircle:i(1211),GetCircleToRectangle:i(1212),GetLineToCircle:i(232),GetLineToLine:i(485),GetLineToPoints:i(486),GetLineToPolygon:i(487),GetLineToRectangle:i(234),GetRaysFromPointToPolygon:i(1213),GetRectangleIntersection:i(1214),GetRectangleToRectangle:i(1215),GetRectangleToTriangle:i(1216),GetTriangleToCircle:i(1217),GetTriangleToLine:i(492),GetTriangleToTriangle:i(1218),LineToCircle:i(233),LineToLine:i(96),LineToRectangle:i(488),PointToLine:i(496),PointToLineSegment:i(1219),RectangleToRectangle:i(152),RectangleToTriangle:i(489),RectangleToValues:i(1220),TriangleToCircle:i(491),TriangleToLine:i(493),TriangleToTriangle:i(494)}},function(e,r,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(39),a=function(n,h,u){var l=n.x1,f=n.y1,c=n.x2,d=n.y2,v=h.x1,p=h.y1,g=h.x2,m=h.y2,x=c-l,y=d-f,T=g-v,S=m-p,C=S*x-T*y;if(x===0||C===0)return!1;var E=(x*(p-f)+y*(l-v))/(T*y-S*x),P=(v+T*E-l)/x;return P<0||E<0||E>1?null:(u===void 0&&(u=new s),u.set(l+x*P,f+y*P,P))};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(39),a=i(485),n=i(47),h=new n,u=new s,l=function(f,c,d){d===void 0&&(d=new s);var v=!1;d.set(),u.set();for(var p=c[0],g=1;g<c.length;g++){var m=c[g];h.setTo(p.x,p.y,m.x,m.y),p=m,a(f,h,u)&&(!v||u.z<d.z)&&(d.copy(u),v=!0)}return v?d:null};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(39),a=i(140),n=i(486),h=new s,u=function(l,f,c){c===void 0&&(c=new a),Array.isArray(f)||(f=[f]);var d=!1;c.set(),h.set();for(var v=0;v<f.length;v++)n(l,f[v].points,h)&&(!d||h.z<c.z)&&(c.set(h.x,h.y,h.z,v),d=!0);return d?c:null};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.x1,h=s.y1,u=s.x2,l=s.y2,f=a.x,c=a.y,d=a.right,v=a.bottom,p=0;if(n>=f&&n<=d&&h>=c&&h<=v||u>=f&&u<=d&&l>=c&&l<=v)return!0;if(n<f&&u>=f){if(p=h+(l-h)*(f-n)/(u-n),p>c&&p<=v)return!0}else if(n>d&&u<=d&&(p=h+(l-h)*(d-n)/(u-n),p>=c&&p<=v))return!0;if(h<c&&l>=c){if(p=n+(u-n)*(c-h)/(l-h),p>=f&&p<=d)return!0}else if(h>v&&l<=v&&(p=n+(u-n)*(v-h)/(l-h),p>=f&&p<=d))return!0;return!1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(96),a=i(57),n=i(235),h=i(490),u=function(l,f){if(f.left>l.right||f.right<l.left||f.top>l.bottom||f.bottom<l.top)return!1;var c=f.getLineA(),d=f.getLineB(),v=f.getLineC();if(a(l,c.x1,c.y1)||a(l,c.x2,c.y2)||a(l,d.x1,d.y1)||a(l,d.x2,d.y2)||a(l,v.x1,v.y1)||a(l,v.x2,v.y2))return!0;var p=l.getLineA(),g=l.getLineB(),m=l.getLineC(),x=l.getLineD();if(s(c,p)||s(c,g)||s(c,m)||s(c,x)||s(d,p)||s(d,g)||s(d,m)||s(d,x)||s(v,p)||s(v,g)||s(v,m)||s(v,x))return!0;var y=h(l),T=n(f,y,!0);return T.length>0};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a===void 0&&(a=[]),a.push({x:s.x,y:s.y}),a.push({x:s.right,y:s.y}),a.push({x:s.right,y:s.bottom}),a.push({x:s.x,y:s.bottom}),a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(233),a=i(115),n=function(h,u){return h.left>u.right||h.right<u.left||h.top>u.bottom||h.bottom<u.top?!1:!!(a(h,u.x,u.y)||s(h.getLineA(),u)||s(h.getLineB(),u)||s(h.getLineC(),u))};e.exports=n},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=i(493),n=i(96),h=function(u,l,f){if(f===void 0&&(f=[]),a(u,l))for(var c=u.getLineA(),d=u.getLineB(),v=u.getLineC(),p=[new s,new s,new s],g=[n(c,l,p[0]),n(d,l,p[1]),n(v,l,p[2])],m=0;m<3;m++)g[m]&&f.push(p[m]);return f};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(96),a=function(n,h){return!!(n.contains(h.x1,h.y1)||n.contains(h.x2,h.y2)||s(n.getLineA(),h)||s(n.getLineB(),h)||s(n.getLineC(),h))};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(235),a=i(495),n=i(96),h=function(u,l){if(u.left>l.right||u.right<l.left||u.top>l.bottom||u.bottom<l.top)return!1;var f=u.getLineA(),c=u.getLineB(),d=u.getLineC(),v=l.getLineA(),p=l.getLineB(),g=l.getLineC();if(n(f,v)||n(f,p)||n(f,g)||n(c,v)||n(c,p)||n(c,g)||n(d,v)||n(d,p)||n(d,g))return!0;var m=a(u),x=s(l,m,!0);return x.length>0||(m=a(l),x=s(u,m,!0),x.length>0)};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a===void 0&&(a=[]),a.push({x:s.x1,y:s.y1}),a.push({x:s.x2,y:s.y2}),a.push({x:s.x3,y:s.y3}),a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){n===void 0&&(n=1);var h=a.x1,u=a.y1,l=a.x2,f=a.y2,c=s.x,d=s.y,v=(l-h)*(l-h)+(f-u)*(f-u);if(v===0)return!1;var p=((c-h)*(l-h)+(d-u)*(f-u))/v;if(p<0)return Math.sqrt((h-c)*(h-c)+(u-d)*(u-d))<=n;if(p>=0&&p<=1){var g=((u-d)*(l-h)-(h-c)*(f-u))/v;return Math.abs(g)*Math.sqrt(v)<=n}else return Math.sqrt((l-c)*(l-c)+(f-d)*(f-d))<=n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),a=i(68),n=i(97),h=function(u){var l=n(u)-s.TAU;return a(l,-Math.PI,Math.PI)};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=!0,s="untitled",a="",n="";function h(y){var T=y.indexOf("#");return T>-1?y.substring(0,T):y}function u(y){return y.models.length===0&&y.models.push({faces:[],name:s,textureCoords:[],vertexNormals:[],vertices:[]}),a="",y.models[y.models.length-1]}function l(y,T){var S=y.length>=2?y[1]:s;T.models.push({faces:[],name:S,textureCoords:[],vertexNormals:[],vertices:[]}),a=""}function f(y){y.length===2&&(a=y[1])}function c(y,T){var S=y.length,C=S>=2?parseFloat(y[1]):0,E=S>=3?parseFloat(y[2]):0,P=S>=4?parseFloat(y[3]):0;u(T).vertices.push({x:C,y:E,z:P})}function d(y,T){var S=y.length,C=S>=2?parseFloat(y[1]):0,E=S>=3?parseFloat(y[2]):0,P=S>=4?parseFloat(y[3]):0;isNaN(C)&&(C=0),isNaN(E)&&(E=0),isNaN(P)&&(P=0),i&&(E=1-E),u(T).textureCoords.push({u:C,v:E,w:P})}function v(y,T){var S=y.length,C=S>=2?parseFloat(y[1]):0,E=S>=3?parseFloat(y[2]):0,P=S>=4?parseFloat(y[3]):0;u(T).vertexNormals.push({x:C,y:E,z:P})}function p(y,T){var S=y.length-1;if(!(S<3)){for(var C={group:a,material:n,vertices:[]},E=0;E<S;E++){var P=y[E+1],M=P.split("/"),R=M.length;if(!(R<1||R>3)){var A=0,O=0,F=0;A=parseInt(M[0],10),R>1&&M[1]!==""&&(O=parseInt(M[1],10)),R>2&&(F=parseInt(M[2],10)),A!==0&&(A<0&&(A=u(T).vertices.length+1+A),O-=1,A-=1,F-=1,C.vertices.push({textureCoordsIndex:O,vertexIndex:A,vertexNormalIndex:F}))}}u(T).faces.push(C)}}function g(y,T){y.length>=2&&T.materialLibraries.push(y[1])}function m(y){y.length>=2&&(n=y[1])}var x=function(y,T){T===void 0&&(T=!0),i=T;var S={materials:{},materialLibraries:[],models:[]};a="",n="";for(var C=y.split(`
`),E=0;E<C.length;E++){var P=h(C[E]),M=P.replace(/\s\s+/g," ").trim().split(" ");switch(M[0].toLowerCase()){case"o":l(M,S);break;case"g":f(M);break;case"v":c(M,S);break;case"vt":d(M,S);break;case"vn":v(M,S);break;case"f":p(M,S);break;case"mtllib":g(M,S);break;case"usemtl":m(M);break}}return S};e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(103),a=function(n){for(var h={},u=n.split(`
`),l="",f=0;f<u.length;f++){var c=u[f].trim();if(!(c.indexOf("#")===0||c==="")){var d=c.replace(/\s\s+/g," ").trim().split(" ");switch(d[0].toLowerCase()){case"newmtl":{l=d[1];break}case"kd":{var v=Math.floor(d[1]*255),p=d.length>=2?Math.floor(d[2]*255):v,g=d.length>=3?Math.floor(d[3]*255):v;h[l]=s(v,p,g);break}}}}return h};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x*s.x+s.y*s.y};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10);s.Area=i(1267),s.Ceil=i(1268),s.CeilAll=i(1269),s.CenterOn=i(190),s.Clone=i(1270),s.Contains=i(57),s.ContainsPoint=i(1271),s.ContainsRect=i(503),s.CopyFrom=i(1272),s.Decompose=i(490),s.Equals=i(1273),s.FitInside=i(1274),s.FitOutside=i(1275),s.Floor=i(1276),s.FloorAll=i(1277),s.FromPoints=i(199),s.FromXY=i(1278),s.GetAspectRatio=i(237),s.GetCenter=i(1279),s.GetPoint=i(171),s.GetPoints=i(306),s.GetSize=i(1280),s.Inflate=i(1281),s.Intersection=i(1282),s.MarchingAnts=i(316),s.MergePoints=i(1283),s.MergeRect=i(1284),s.MergeXY=i(1285),s.Offset=i(1286),s.OffsetPoint=i(1287),s.Overlaps=i(1288),s.Perimeter=i(130),s.PerimeterPoint=i(1289),s.Random=i(174),s.RandomOutside=i(1290),s.SameDimensions=i(1291),s.Scale=i(1292),s.Union=i(441),e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a.width*a.height>s.width*s.height?!1:a.x>s.x&&a.x<s.right&&a.right>s.x&&a.right<s.right&&a.y>s.y&&a.y<s.bottom&&a.bottom>s.y&&a.bottom<s.bottom};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h){return h===void 0&&(h=new s),h.x=(n.x1+n.x2+n.x3)/3,h.y=(n.y1+n.y2+n.y3)/3,h};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s.x1+=a,s.y1+=n,s.x2+=a,s.y2+=n,s.x3+=a,s.y3+=n,s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4);function a(h,u,l,f){var c=h-l,d=u-f,v=c*c+d*d;return Math.sqrt(v)}var n=function(h,u){u===void 0&&(u=new s);var l=h.x1,f=h.y1,c=h.x2,d=h.y2,v=h.x3,p=h.y3,g=a(v,p,c,d),m=a(l,f,v,p),x=a(c,d,l,f),y=g+m+x;return u.x=(l*g+c*m+v*x)/y,u.y=(f*g+d*m+p*x)/y,u};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return function(n,h,u,l){var f=s.getPixelAlpha(h,u,l.texture.key,l.frame.name);return f&&f>=a}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return{gameObject:s,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:a,hitAreaCallback:n,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u){this.pad=h,this.events=h.events,this.index=u,this.value=0,this.threshold=.1},update:function(n){this.value=n},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(239),n=new s({initialize:function(u,l){this.pad=u,this.events=u.manager,this.index=l,this.value=0,this.threshold=1,this.pressed=!1},update:function(h){this.value=h;var u=this.pad,l=this.index;h>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(a.BUTTON_DOWN,u,this,h),this.pad.emit(a.GAMEPAD_BUTTON_DOWN,l,h,this)):this.pressed&&(this.pressed=!1,this.events.emit(a.BUTTON_UP,u,this,h),this.pad.emit(a.GAMEPAD_BUTTON_UP,l,h,this))},destroy:function(){this.pad=null,this.events=null}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(509),a=i(510),n=i(0),h=i(9),u=i(3),l=new n({Extends:h,initialize:function(c,d){h.call(this),this.manager=c,this.pad=d,this.id=d.id,this.index=d.index;for(var v=[],p=0;p<d.buttons.length;p++)v.push(new a(this,p));this.buttons=v;var g=[];for(p=0;p<d.axes.length;p++)g.push(new s(this,p));this.axes=g,this.vibration=d.vibrationActuator;var m={value:0,pressed:!1};this._LCLeft=v[14]?v[14]:m,this._LCRight=v[15]?v[15]:m,this._LCTop=v[12]?v[12]:m,this._LCBottom=v[13]?v[13]:m,this._RCLeft=v[2]?v[2]:m,this._RCRight=v[1]?v[1]:m,this._RCTop=v[3]?v[3]:m,this._RCBottom=v[0]?v[0]:m,this._FBLeftTop=v[4]?v[4]:m,this._FBLeftBottom=v[6]?v[6]:m,this._FBRightTop=v[5]?v[5]:m,this._FBRightBottom=v[7]?v[7]:m;var x={value:0};this._HAxisLeft=g[0]?g[0]:x,this._VAxisLeft=g[1]?g[1]:x,this._HAxisRight=g[2]?g[2]:x,this._VAxisRight=g[3]?g[3]:x,this.leftStick=new u,this.rightStick=new u,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(f){return this.axes[f].getValue()},setAxisThreshold:function(f){for(var c=0;c<this.axes.length;c++)this.axes[c].threshold=f},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(f){return this.buttons[f].value},isButtonDown:function(f){return this.buttons[f].pressed},update:function(f){if(!(f.timestamp<this._created)){var c,d=this.buttons,v=f.buttons,p=d.length;for(c=0;c<p;c++)d[c].update(v[c].value);var g=this.axes,m=f.axes;for(p=g.length,c=0;c<p;c++)g[c].update(m[c]);p>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),p>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var f;for(f=0;f<this.buttons.length;f++)this.buttons[f].destroy();for(f=0;f<this.axes.length;f++)this.axes[f].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(9),n=i(154),h=new s({Extends:a,initialize:function(l,f){a.call(this),this.plugin=l,this.keyCode=f,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(u){return this.emitOnRepeat=u,this},onDown:function(u){this.originalEvent=u,this.enabled&&(this.altKey=u.altKey,this.ctrlKey=u.ctrlKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.location=u.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(n.DOWN,this,u):(this.isDown=!0,this.isUp=!1,this.timeDown=u.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(n.DOWN,this,u)))},onUp:function(u){this.originalEvent=u,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=u.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(n.UP,this,u))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(154),n=i(2),h=i(514),u=i(516),l=new s({initialize:function(c,d,v){if(v===void 0&&(v={}),d.length<2)return!1;this.manager=c,this.enabled=!0,this.keyCodes=[];for(var p=0;p<d.length;p++){var g=d[p];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=n(v,"resetOnWrongKey",!0),this.maxKeyDelay=n(v,"maxKeyDelay",0),this.resetOnMatch=n(v,"resetOnMatch",!1),this.deleteOnMatch=n(v,"deleteOnMatch",!1);var m=this,x=function(y){if(!(m.matched||!m.enabled)){var T=h(y,m);T&&(m.manager.emit(a.COMBO_MATCH,m,y),m.resetOnMatch?u(m):m.deleteOnMatch&&m.destroy())}};this.onKeyDown=x,this.manager.on(a.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(a.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(515),a=function(n,h){if(h.matched)return!0;var u=!1,l=!1;if(n.keyCode===h.current)if(h.index>0&&h.maxKeyDelay>0){var f=h.timeLastMatched+h.maxKeyDelay;n.timeStamp<=f&&(l=!0,u=s(n,h))}else l=!0,u=s(n,h);return!l&&h.resetOnWrongKey&&(h.index=0,h.current=h.keyCodes[0]),u&&(h.timeLastMatched=n.timeStamp,h.matched=!0,h.timeMatched=n.timeStamp),u};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a.timeLastMatched=s.timeStamp,a.index++,a.index===a.size?!0:(a.current=a.keyCodes[a.index],!1)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.current=s.keyCodes[0],s.index=0,s.timeLastMatched=0,s.matched=!1,s.timeMatched=0,s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(240),a=function(n,h){var u=s(h,n.xhrSettings),l=new XMLHttpRequest;if(l.open("GET",n.src,u.async,u.user,u.password),l.responseType=n.xhrSettings.responseType,l.timeout=u.timeout,u.headers)for(var f in u.headers)l.setRequestHeader(f,u.headers[f]);return u.header&&u.headerValue&&l.setRequestHeader(u.header,u.headerValue),u.requestedWith&&l.setRequestHeader("X-Requested-With",u.requestedWith),u.overrideMimeType&&l.overrideMimeType(u.overrideMimeType),u.withCredentials&&(l.withCredentials=!0),l.onload=n.onLoad.bind(n,l),l.onerror=n.onError.bind(n,l),l.onprogress=n.onProgress.bind(n),l.send(),l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(519),f=i(7),c=new s({Extends:n,initialize:function(v,p,g,m,x){if(f(p)){var y=p;p=u(y,"key"),m=u(y,"xhrSettings"),x=u(y,"context",x)}var T={type:"audio",cache:v.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:p,url:g.url,xhrSettings:m,config:{context:x}};n.call(this,v,T)},onProcess:function(){this.state=a.FILE_PROCESSING;var d=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(v){d.data=v,d.onProcessComplete()},function(v){console.error("Error decoding audio: "+d.key+" - ",v?v.message:null),d.onProcessError()}),this.config.context=null}});c.create=function(d,v,p,g,m){var x=d.systems.game,y=x.config.audio,T=x.device.audio;f(v)&&(p=u(v,"url",[]),g=u(v,"config",{}));var S=c.getAudioURL(x,p);return S?T.webAudio&&!y.disableWebAudio?new c(d,v,S,m,x.sound.context):new l(d,v,S,g):null},c.getAudioURL=function(d,v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var g=u(v[p],"url",v[p]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var m=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=u(v[p],"type",m?m[1]:"").toLowerCase(),d.device.audio[m])return{url:g,type:m}}return null},h.register("audio",function(d,v,p,g){var m=this.systems.game,x=m.config.audio,y=m.device.audio;if(x.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(d))for(var S=0;S<d.length;S++)T=c.create(this,d[S]),T&&this.addFile(T);else T=c.create(this,d,v,p,g),T&&this.addFile(T);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(95),n=i(23),h=i(2),u=i(155),l=i(7),f=new s({Extends:n,initialize:function(d,v,p,g){if(l(v)){var m=v;v=h(m,"key"),g=h(m,"config",g)}var x={type:"audio",cache:d.cacheManager.audio,extension:p.type,key:v,url:p.url,config:g};n.call(this,d,x),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var c=0;c<this.data.length;c++){var d=this.data[c];d.oncanplaythrough=null,d.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(c){var d=c.target;d.oncanplaythrough=null,d.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var c=this.config&&this.config.instances||1;this.filesTotal=c,this.filesLoaded=0,this.percentComplete=0;for(var d=0;d<c;d++){var v=new Audio;v.dataset||(v.dataset={}),v.dataset.name=this.key+("0"+d).slice(-2),v.dataset.used="false",this.locked?v.dataset.locked="true":(v.dataset.locked="false",v.preload="auto",v.oncanplaythrough=this.onProgress.bind(this),v.onerror=this.onError.bind(this)),this.data.push(v)}for(d=0;d<this.data.length;d++)v=this.data[d],v.src=u(this,this.loader.baseURL),this.locked||v.load();this.locked&&setTimeout(this.onLoad.bind(this))}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=new s({Extends:n,initialize:function(d,v,p,g){var m="js";if(l(v)){var x=v;v=u(x,"key"),p=u(x,"url"),g=u(x,"xhrSettings"),m=u(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};n.call(this,d,y)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("script",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(522),a=i(157),n=i(0),h=i(62),u=i(524),l=i(525),f=new n({initialize:function(d){this.world=d,this.scene=d.scene,this.sys=d.scene.sys},collider:function(c,d,v,p,g){return this.world.addCollider(c,d,v,p,g)},overlap:function(c,d,v,p,g){return this.world.addOverlap(c,d,v,p,g)},existing:function(c,d){var v=d?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(c,v),c},staticImage:function(c,d,v,p){var g=new s(this.scene,c,d,v,p);return this.sys.displayList.add(g),this.world.enableBody(g,h.STATIC_BODY),g},image:function(c,d,v,p){var g=new s(this.scene,c,d,v,p);return this.sys.displayList.add(g),this.world.enableBody(g,h.DYNAMIC_BODY),g},staticSprite:function(c,d,v,p){var g=new a(this.scene,c,d,v,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,h.STATIC_BODY),g},sprite:function(c,d,v,p){var g=new a(this.scene,c,d,v,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,h.DYNAMIC_BODY),g},staticGroup:function(c,d){return this.sys.updateList.add(new l(this.world,this.world.scene,c,d))},group:function(c,d){return this.sys.updateList.add(new u(this.world,this.world.scene,c,d))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(243),n=i(125),h=new s({Extends:n,Mixins:[a.Acceleration,a.Angular,a.Bounce,a.Debug,a.Drag,a.Enable,a.Friction,a.Gravity,a.Immovable,a.Mass,a.Pushable,a.Size,a.Velocity],initialize:function(l,f,c,d,v){n.call(this,l,f,c,d,v),this.body=null}});e.exports=h},function(e,r,i){var s=i(244),a=i(65),n=i(231),h=i(151),u=function(l,f,c,d,v,p){var g=s(l,f-d,c-d,2*d,2*d,v,p);if(g.length===0)return g;for(var m=new a(f,c,d),x=new a,y=[],T=0;T<g.length;T++){var S=g[T];S.isCircle?(x.setTo(S.center.x,S.center.y,S.halfWidth),n(m,x)&&y.push(S)):h(m,S)&&y.push(S)}return y};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(157),a=i(0),n=i(62),h=i(2),u=i(113),l=i(7),f=new a({Extends:u,initialize:function(d,v,p,g){if(!p&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(l(p))g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(p)&&l(p[0])){g=p[0];var m=this;p.forEach(function(x){x.internalCreateCallback=m.createCallbackHandler,x.internalRemoveCallback=m.removeCallbackHandler}),p=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=d,g.classType=h(g,"classType",s),this.physicsType=n.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:h(g,"collideWorldBounds",!1),setBoundsRectangle:h(g,"customBoundsRectangle",null),setAccelerationX:h(g,"accelerationX",0),setAccelerationY:h(g,"accelerationY",0),setAllowDrag:h(g,"allowDrag",!0),setAllowGravity:h(g,"allowGravity",!0),setAllowRotation:h(g,"allowRotation",!0),setBounceX:h(g,"bounceX",0),setBounceY:h(g,"bounceY",0),setDragX:h(g,"dragX",0),setDragY:h(g,"dragY",0),setEnable:h(g,"enable",!0),setGravityX:h(g,"gravityX",0),setGravityY:h(g,"gravityY",0),setFrictionX:h(g,"frictionX",0),setFrictionY:h(g,"frictionY",0),setMaxVelocityX:h(g,"maxVelocityX",1e4),setMaxVelocityY:h(g,"maxVelocityY",1e4),setVelocityX:h(g,"velocityX",0),setVelocityY:h(g,"velocityY",0),setAngularVelocity:h(g,"angularVelocity",0),setAngularAcceleration:h(g,"angularAcceleration",0),setAngularDrag:h(g,"angularDrag",0),setMass:h(g,"mass",1),setImmovable:h(g,"immovable",!1)},u.call(this,v,p,g),this.type="PhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,n.DYNAMIC_BODY);var d=c.body;for(var v in this.defaults)d[v](this.defaults[v])},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},setVelocity:function(c,d,v){v===void 0&&(v=0);for(var p=this.getChildren(),g=0;g<p.length;g++)p[g].body.velocity.set(c+g*v,d+g*v);return this},setVelocityX:function(c,d){d===void 0&&(d=0);for(var v=this.getChildren(),p=0;p<v.length;p++)v[p].body.velocity.x=c+p*d;return this},setVelocityY:function(c,d){d===void 0&&(d=0);for(var v=this.getChildren(),p=0;p<v.length;p++)v[p].body.velocity.y=c+p*d;return this}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(157),a=i(0),n=i(62),h=i(2),u=i(113),l=i(7),f=new a({Extends:u,initialize:function(d,v,p,g){!p&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:s}:l(p)?(g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=h(g,"classType",s)):Array.isArray(p)&&l(p[0])?(g=p,p=null,g.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=h(m,"classType",s)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=d,this.physicsType=n.STATIC_BODY,u.call(this,v,p,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,n.STATIC_BODY)},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var c=this.children.entries,d=0;d<c.length;d++)c[d].body.reset();return this}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(350),a=i(527),n=i(18),h=i(0),u=i(528),l=i(62),f=i(50),c=i(9),d=i(245),v=i(124),p=i(354),g=i(355),m=i(246),x=i(247),y=i(529),T=i(6),S=i(14),C=i(211),E=i(530),P=i(10),M=i(531),R=i(532),A=i(537),O=i(538),F=i(149),b=i(539),w=i(248),N=i(25),V=i(3),W=i(68),U=new h({Extends:c,initialize:function(L,I){c.call(this),this.scene=L,this.bodies=new F,this.staticBodies=new F,this.pendingDestroy=new F,this.colliders=new C,this.gravity=new V(T(I,"gravity.x",0),T(I,"gravity.y",0)),this.bounds=new P(T(I,"x",0),T(I,"y",0),T(I,"width",L.sys.scale.width),T(I,"height",L.sys.scale.height)),this.checkCollision={up:T(I,"checkCollision.up",!0),down:T(I,"checkCollision.down",!0),left:T(I,"checkCollision.left",!0),right:T(I,"checkCollision.right",!0)},this.fps=T(I,"fps",60),this.fixedStep=T(I,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(I,"timeScale",1),this.OVERLAP_BIAS=T(I,"overlapBias",4),this.TILE_BIAS=T(I,"tileBias",16),this.forceX=T(I,"forceX",!1),this.isPaused=T(I,"isPaused",!1),this._total=0,this.drawDebug=T(I,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(I,"debugShowBody",!0),debugShowStaticBody:T(I,"debugShowStaticBody",!0),debugShowVelocity:T(I,"debugShowVelocity",!0),bodyDebugColor:T(I,"debugBodyColor",16711935),staticBodyDebugColor:T(I,"debugStaticBodyColor",255),velocityDebugColor:T(I,"debugVelocityColor",65280)},this.maxEntries=T(I,"maxEntries",16),this.useTree=T(I,"useTree",!0),this.tree=new M(this.maxEntries),this.staticTree=new M(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new N,this._tempMatrix2=new N,this.drawDebug&&this.createDebugGraphic()},enable:function(D,L){L===void 0&&(L=l.DYNAMIC_BODY),Array.isArray(D)||(D=[D]);for(var I=0;I<D.length;I++){var B=D[I];if(B.isParent)for(var G=B.getChildren(),z=0;z<G.length;z++){var Y=G[z];Y.isParent?this.enable(Y,L):this.enableBody(Y,L)}else this.enableBody(B,L)}},enableBody:function(D,L){return L===void 0&&(L=l.DYNAMIC_BODY),D.body||(L===l.DYNAMIC_BODY?D.body=new a(this,D):L===l.STATIC_BODY&&(D.body=new b(this,D))),this.add(D.body),D},add:function(D){return D.physicsType===l.DYNAMIC_BODY?this.bodies.set(D):D.physicsType===l.STATIC_BODY&&(this.staticBodies.set(D),this.staticTree.insert(D)),D.enable=!0,D},disable:function(D){Array.isArray(D)||(D=[D]);for(var L=0;L<D.length;L++){var I=D[L];if(I.isParent)for(var B=I.getChildren(),G=0;G<B.length;G++){var z=B[G];z.isParent?this.disable(z):this.disableBody(z.body)}else this.disableBody(I.body)}},disableBody:function(D){this.remove(D),D.enable=!1},remove:function(D){D.physicsType===l.DYNAMIC_BODY?(this.tree.remove(D),this.bodies.delete(D)):D.physicsType===l.STATIC_BODY&&(this.staticBodies.delete(D),this.staticTree.remove(D))},createDebugGraphic:function(){var D=this.scene.sys.add.graphics({x:0,y:0});return D.setDepth(Number.MAX_VALUE),this.debugGraphic=D,this.drawDebug=!0,D},setBounds:function(D,L,I,B,G,z,Y,X){return this.bounds.setTo(D,L,I,B),G!==void 0&&this.setBoundsCollision(G,z,Y,X),this},setBoundsCollision:function(D,L,I,B){return D===void 0&&(D=!0),L===void 0&&(L=!0),I===void 0&&(I=!0),B===void 0&&(B=!0),this.checkCollision.left=D,this.checkCollision.right=L,this.checkCollision.up=I,this.checkCollision.down=B,this},pause:function(){return this.isPaused=!0,this.emit(d.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(d.RESUME),this},addCollider:function(D,L,I,B,G){I===void 0&&(I=null),B===void 0&&(B=null),G===void 0&&(G=I);var z=new u(this,!1,D,L,I,B,G);return this.colliders.add(z),z},addOverlap:function(D,L,I,B,G){I===void 0&&(I=null),B===void 0&&(B=null),G===void 0&&(G=I);var z=new u(this,!0,D,L,I,B,G);return this.colliders.add(z),z},removeCollider:function(D){return this.colliders.remove(D),this},setFPS:function(D){return this.fps=D,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(D,L){if(!(this.isPaused||this.bodies.size===0)){var I,B=this._frameTime,G=this._frameTimeMS*this.timeScale;this._elapsed+=L;var z,Y=this.bodies.entries,X=this._elapsed>=G;for(this.fixedStep||(B=L*.001,X=!0,this._elapsed=0),I=0;I<Y.length;I++)z=Y[I],z.enable&&z.preUpdate(X,B);if(X){this._elapsed-=G,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Y));var H=this.colliders.update();for(I=0;I<H.length;I++){var $=H[I];$.active&&$.update()}this.emit(d.WORLD_STEP,B)}for(;this._elapsed>=G;)this._elapsed-=G,this.step(B)}},step:function(D){var L,I,B=this.bodies.entries,G=B.length;for(L=0;L<G;L++)I=B[L],I.enable&&I.update(D);this.useTree&&(this.tree.clear(),this.tree.load(B));var z=this.colliders.update();for(L=0;L<z.length;L++){var Y=z[L];Y.active&&Y.update()}this.emit(d.WORLD_STEP,D),this.stepsLastFrame++},postUpdate:function(){var D,L,I=this.bodies.entries,B=I.length,G=this.bodies,z=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,D=0;D<B;D++)L=I[D],L.enable&&L.postUpdate();if(this.drawDebug){var Y=this.debugGraphic;for(Y.clear(),D=0;D<B;D++)L=I[D],L.willDrawDebug()&&L.drawDebug(Y);for(I=z.entries,B=I.length,D=0;D<B;D++)L=I[D],L.willDrawDebug()&&L.drawDebug(Y)}var X=this.pendingDestroy;if(X.size>0){var H=this.tree,$=this.staticTree;for(I=X.entries,B=I.length,D=0;D<B;D++)L=I[D],L.physicsType===l.DYNAMIC_BODY?(H.remove(L),G.delete(L)):L.physicsType===l.STATIC_BODY&&($.remove(L),z.delete(L)),L.world=void 0,L.gameObject=void 0;X.clear()}},updateMotion:function(D,L){D.allowRotation&&this.computeAngularVelocity(D,L),this.computeVelocity(D,L)},computeAngularVelocity:function(D,L){var I=D.angularVelocity,B=D.angularAcceleration,G=D.angularDrag,z=D.maxAngular;B?I+=B*L:D.allowDrag&&G&&(G*=L,p(I-G,0,.1)?I-=G:g(I+G,0,.1)?I+=G:I=0),I=n(I,-z,z);var Y=I-D.angularVelocity;D.angularVelocity+=Y,D.rotation+=D.angularVelocity*L},computeVelocity:function(D,L){var I=D.velocity.x,B=D.acceleration.x,G=D.drag.x,z=D.maxVelocity.x,Y=D.velocity.y,X=D.acceleration.y,H=D.drag.y,$=D.maxVelocity.y,k=D.speed,K=D.maxSpeed,Z=D.allowDrag,j=D.useDamping;D.allowGravity&&(I+=(this.gravity.x+D.gravity.x)*L,Y+=(this.gravity.y+D.gravity.y)*L),B?I+=B*L:Z&&G&&(j?(G=Math.pow(G,L),I*=G,k=Math.sqrt(I*I+Y*Y),v(k,0,.001)&&(I=0)):(G*=L,p(I-G,0,.01)?I-=G:g(I+G,0,.01)?I+=G:I=0)),X?Y+=X*L:Z&&H&&(j?(H=Math.pow(H,L),Y*=H,k=Math.sqrt(I*I+Y*Y),v(k,0,.001)&&(Y=0)):(H*=L,p(Y-H,0,.01)?Y-=H:g(Y+H,0,.01)?Y+=H:Y=0)),I=n(I,-z,z),Y=n(Y,-$,$),D.velocity.set(I,Y),K>-1&&k>K&&(D.velocity.normalize().scale(K),k=K),D.speed=k},separate:function(D,L,I,B,G,z){if(!z&&!D.enable||!L.enable||D.checkCollision.none||L.checkCollision.none||!this.intersects(D,L)||I&&I.call(B,D.gameObject,L.gameObject)===!1)return!1;if(D.isCircle&&L.isCircle)return this.separateCircle(D,L,G);if(D.isCircle!==L.isCircle){var Y=D.isCircle?L:D,X=D.isCircle?D:L,H={x:Y.x,y:Y.y,right:Y.right,bottom:Y.bottom},$=X.center;if(($.y<H.y||$.y>H.bottom)&&($.x<H.x||$.x>H.right))return this.separateCircle(D,L,G)}var k=!1,K=!1;G?(k=A(D,L,G,this.OVERLAP_BIAS),K=O(D,L,G,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+D.gravity.y)<Math.abs(this.gravity.x+D.gravity.x)?(k=A(D,L,G,this.OVERLAP_BIAS),this.intersects(D,L)&&(K=O(D,L,G,this.OVERLAP_BIAS))):(K=O(D,L,G,this.OVERLAP_BIAS),this.intersects(D,L)&&(k=A(D,L,G,this.OVERLAP_BIAS)));var Z=k||K;return Z&&(G?(D.onOverlap||L.onOverlap)&&this.emit(d.OVERLAP,D.gameObject,L.gameObject,D,L):(D.onCollide||L.onCollide)&&this.emit(d.COLLIDE,D.gameObject,L.gameObject,D,L)),Z},separateCircle:function(D,L,I,B){m(D,L,!1,B),x(D,L,!1,B);var G=0;if(D.isCircle!==L.isCircle){var z={x:L.isCircle?D.position.x:L.position.x,y:L.isCircle?D.position.y:L.position.y,right:L.isCircle?D.right:L.right,bottom:L.isCircle?D.bottom:L.bottom},Y={x:D.isCircle?D.center.x:L.center.x,y:D.isCircle?D.center.y:L.center.y,radius:D.isCircle?D.halfWidth:L.halfWidth};Y.y<z.y?Y.x<z.x?G=f(Y.x,Y.y,z.x,z.y)-Y.radius:Y.x>z.right&&(G=f(Y.x,Y.y,z.right,z.y)-Y.radius):Y.y>z.bottom&&(Y.x<z.x?G=f(Y.x,Y.y,z.x,z.bottom)-Y.radius:Y.x>z.right&&(G=f(Y.x,Y.y,z.right,z.bottom)-Y.radius)),G*=-1}else G=D.halfWidth+L.halfWidth-f(D.center.x,D.center.y,L.center.x,L.center.y);if(D.overlapR=G,L.overlapR=G,I||G===0||D.immovable&&L.immovable||D.customSeparateX||L.customSeparateX)return G!==0&&(D.onOverlap||L.onOverlap)&&this.emit(d.OVERLAP,D.gameObject,L.gameObject,D,L),G!==0;var X=D.center.x-L.center.x,H=D.center.y-L.center.y,$=Math.sqrt(Math.pow(X,2)+Math.pow(H,2)),k=(L.center.x-D.center.x)/$||0,K=(L.center.y-D.center.y)/$||0,Z=2*(D.velocity.x*k+D.velocity.y*K-L.velocity.x*k-L.velocity.y*K)/(D.mass+L.mass);(D.immovable||L.immovable)&&(Z*=2),D.immovable||(D.velocity.x=D.velocity.x-Z/D.mass*k,D.velocity.y=D.velocity.y-Z/D.mass*K),L.immovable||(L.velocity.x=L.velocity.x+Z/L.mass*k,L.velocity.y=L.velocity.y+Z/L.mass*K),!D.immovable&&!L.immovable&&(G/=2);var j=s(D.center,L.center),J=(G+S.EPSILON)*Math.cos(j),q=(G+S.EPSILON)*Math.sin(j);return D.immovable||(D.x-=J,D.y-=q,D.updateCenter()),L.immovable||(L.x+=J,L.y+=q,L.updateCenter()),D.velocity.x*=D.bounce.x,D.velocity.y*=D.bounce.y,L.velocity.x*=L.bounce.x,L.velocity.y*=L.bounce.y,(D.onCollide||L.onCollide)&&this.emit(d.COLLIDE,D.gameObject,L.gameObject,D,L),!0},intersects:function(D,L){return D===L?!1:!D.isCircle&&!L.isCircle?!(D.right<=L.position.x||D.bottom<=L.position.y||D.position.x>=L.right||D.position.y>=L.bottom):D.isCircle?L.isCircle?f(D.center.x,D.center.y,L.center.x,L.center.y)<=D.halfWidth+L.halfWidth:this.circleBodyIntersects(D,L):this.circleBodyIntersects(L,D)},circleBodyIntersects:function(D,L){var I=n(D.center.x,L.left,L.right),B=n(D.center.y,L.top,L.bottom),G=(D.center.x-I)*(D.center.x-I),z=(D.center.y-B)*(D.center.y-B);return G+z<=D.halfWidth*D.halfWidth},overlap:function(D,L,I,B,G){return I===void 0&&(I=null),B===void 0&&(B=null),G===void 0&&(G=I),this.collideObjects(D,L,I,B,G,!0)},collide:function(D,L,I,B,G){return I===void 0&&(I=null),B===void 0&&(B=null),G===void 0&&(G=I),this.collideObjects(D,L,I,B,G,!1)},collideObjects:function(D,L,I,B,G,z){var Y,X;D.isParent&&D.physicsType===void 0&&(D=D.children.entries),L&&L.isParent&&L.physicsType===void 0&&(L=L.children.entries);var H=Array.isArray(D),$=Array.isArray(L);if(this._total=0,!H&&!$)this.collideHandler(D,L,I,B,G,z);else if(!H&&$)for(Y=0;Y<L.length;Y++)this.collideHandler(D,L[Y],I,B,G,z);else if(H&&!$)if(L)for(Y=0;Y<D.length;Y++)this.collideHandler(D[Y],L,I,B,G,z);else for(Y=0;Y<D.length;Y++){var k=D[Y];for(X=Y+1;X<D.length;X++)Y!==X&&this.collideHandler(k,D[X],I,B,G,z)}else for(Y=0;Y<D.length;Y++)for(X=0;X<L.length;X++)this.collideHandler(D[Y],L[X],I,B,G,z);return this._total>0},collideHandler:function(D,L,I,B,G,z){if(L===void 0&&D.isParent)return this.collideGroupVsGroup(D,D,I,B,G,z);if(!D||!L)return!1;if(D.body){if(L.body)return this.collideSpriteVsSprite(D,L,I,B,G,z);if(L.isParent)return this.collideSpriteVsGroup(D,L,I,B,G,z);if(L.isTilemap)return this.collideSpriteVsTilemapLayer(D,L,I,B,G,z)}else if(D.isParent){if(L.body)return this.collideSpriteVsGroup(L,D,I,B,G,z);if(L.isParent)return this.collideGroupVsGroup(D,L,I,B,G,z);if(L.isTilemap)return this.collideGroupVsTilemapLayer(D,L,I,B,G,z)}else if(D.isTilemap){if(L.body)return this.collideSpriteVsTilemapLayer(L,D,I,B,G,z);if(L.isParent)return this.collideGroupVsTilemapLayer(L,D,I,B,G,z)}},collideSpriteVsSprite:function(D,L,I,B,G,z){return!D.body||!L.body?!1:(this.separate(D.body,L.body,B,G,z)&&(I&&I.call(G,D,L),this._total++),!0)},collideSpriteVsGroup:function(D,L,I,B,G,z){var Y=D.body;if(!(L.length===0||!Y||!Y.enable||Y.checkCollision.none)){var X,H,$;if(this.useTree||L.physicsType===l.STATIC_BODY){var k=this.treeMinMax;k.minX=Y.left,k.minY=Y.top,k.maxX=Y.right,k.maxY=Y.bottom;var K=L.physicsType===l.DYNAMIC_BODY?this.tree.search(k):this.staticTree.search(k);for(H=K.length,X=0;X<H;X++)$=K[X],!(Y===$||!$.enable||$.checkCollision.none||!L.contains($.gameObject))&&this.separate(Y,$,B,G,z,!0)&&(I&&I.call(G,Y.gameObject,$.gameObject),this._total++)}else{var Z=L.getChildren(),j=L.children.entries.indexOf(D);for(H=Z.length,X=0;X<H;X++)$=Z[X].body,!(!$||X===j||!$.enable)&&this.separate(Y,$,B,G,z)&&(I&&I.call(G,Y.gameObject,$.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(D,L,I,B,G,z){var Y=D.getChildren();if(Y.length===0)return!1;for(var X=!1,H=0;H<Y.length;H++)Y[H].body&&this.collideSpriteVsTilemapLayer(Y[H],L,I,B,G,z)&&(X=!0);return X},collideTiles:function(D,L,I,B,G){return!D.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(D,L,I,B,G,!1,!1)},overlapTiles:function(D,L,I,B,G){return!D.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(D,L,I,B,G,!0,!1)},collideSpriteVsTilemapLayer:function(D,L,I,B,G,z){var Y=D.body;if(!Y.enable||Y.checkCollision.none)return!1;var X=Y.position.x,H=Y.position.y,$=Y.width,k=Y.height,K=L.layer;if(K.tileWidth>K.baseTileWidth){var Z=(K.tileWidth-K.baseTileWidth)*L.scaleX;X-=Z,$+=Z}if(K.tileHeight>K.baseTileHeight){var j=(K.tileHeight-K.baseTileHeight)*L.scaleY;k+=j}var J=y(X,H,$,k,null,L.scene.cameras.main,L.layer);return J.length===0?!1:this.collideSpriteVsTilesHandler(D,J,I,B,G,z,!0)},collideSpriteVsTilesHandler:function(D,L,I,B,G,z,Y){for(var X=D.body,H,$={left:0,right:0,top:0,bottom:0},k,K=!1,Z=0;Z<L.length;Z++){H=L[Z],k=H.tilemapLayer;var j=k.tileToWorldXY(H.x,H.y);$.left=j.x,$.top=j.y,H.baseHeight!==H.height&&($.top-=(H.height-H.baseHeight)*k.scaleY),$.right=$.left+H.width*k.scaleX,$.bottom=$.top+H.height*k.scaleY,w($,X)&&(!B||B.call(G,D,H))&&E(H,D)&&(z||R(Z,X,H,$,k,this.TILE_BIAS,Y))&&(this._total++,K=!0,I&&I.call(G,D,H),z&&X.onOverlap?this.emit(d.TILE_OVERLAP,D,H,X):X.onCollide&&this.emit(d.TILE_COLLIDE,D,H,X))}return K},collideGroupVsGroup:function(D,L,I,B,G,z){if(!(D.length===0||L.length===0))for(var Y=D.getChildren(),X=0;X<Y.length;X++)this.collideSpriteVsGroup(Y[X],L,I,B,G,z)},wrap:function(D,L){D.body?this.wrapObject(D,L):D.getChildren?this.wrapArray(D.getChildren(),L):Array.isArray(D)?this.wrapArray(D,L):this.wrapObject(D,L)},wrapArray:function(D,L){for(var I=0;I<D.length;I++)this.wrapObject(D[I],L)},wrapObject:function(D,L){L===void 0&&(L=0),D.x=W(D.x,this.bounds.left-L,this.bounds.right+L),D.y=W(D.y,this.bounds.top-L,this.bounds.bottom+L)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});e.exports=U},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(62),n=i(245),h=i(196),u=i(10),l=i(57),f=i(3),c=new s({initialize:function(v,p){var g=p.displayWidth?p.displayWidth:64,m=p.displayHeight?p.displayHeight:64;this.world=v,this.gameObject=p,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=v.defaults.debugShowBody,this.debugShowVelocity=v.defaults.debugShowVelocity,this.debugBodyColor=v.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new f,this.position=new f(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=g,this.height=m,this.sourceWidth=g,this.sourceHeight=m,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(m/2),this.center=new f(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new f,this.newVelocity=new f,this.deltaMax=new f,this.acceleration=new f,this.allowDrag=!0,this.drag=new f,this.allowGravity=!0,this.gravity=new f,this.bounce=new f,this.worldBounce=null,this.customBoundsRectangle=v.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new f(1e4,1e4),this.maxSpeed=-1,this.friction=new f(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=a.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=a.DYNAMIC_BODY,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new u},updateBounds:function(){var d=this.gameObject,v=this.transform;if(d.parentContainer){var p=d.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);v.x=p.tx,v.y=p.ty,v.rotation=h(p.rotation),v.scaleX=p.scaleX,v.scaleY=p.scaleY,v.displayOriginX=d.displayOriginX,v.displayOriginY=d.displayOriginY}else v.x=d.x,v.y=d.y,v.rotation=d.angle,v.scaleX=d.scaleX,v.scaleY=d.scaleY,v.displayOriginX=d.displayOriginX,v.displayOriginY=d.displayOriginY;var g=!1;if(this.syncBounds){var m=d.getBounds(this._bounds);this.width=m.width,this.height=m.height,g=!0}else{var x=Math.abs(v.scaleX),y=Math.abs(v.scaleY);(this._sx!==x||this._sy!==y)&&(this.width=this.sourceWidth*x,this.height=this.sourceHeight*y,this._sx=x,this._sy=y,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var d=this.transform;this.position.x=d.x+d.scaleX*(this.offset.x-d.displayOriginX),this.position.y=d.y+d.scaleY*(this.offset.y-d.displayOriginY),this.updateCenter()},resetFlags:function(d){d===void 0&&(d=!1);var v=this.wasTouching,p=this.touching,g=this.blocked;d?(v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1):(v.none=p.none,v.up=p.up,v.down=p.down,v.left=p.left,v.right=p.right),p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(d,v){d&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),d&&this.update(v)},update:function(d){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,d);var v=this.velocity.x,p=this.velocity.y;this.newVelocity.set(v*d,p*d),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(p,v),this.speed=Math.sqrt(v*v+p*p),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(n.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var d=this.position.x-this.prevFrame.x,v=this.position.y-this.prevFrame.y;if(this.moves){var p=this.deltaMax.x,g=this.deltaMax.y;p!==0&&d!==0&&(d<0&&d<-p?d=-p:d>0&&d>p&&(d=p)),g!==0&&v!==0&&(v<0&&v<-g?v=-g:v>0&&v>g&&(v=g)),this.gameObject.x+=d,this.gameObject.y+=v}d<0?this.facing=a.FACING_LEFT:d>0&&(this.facing=a.FACING_RIGHT),v<0?this.facing=a.FACING_UP:v>0&&(this.facing=a.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=d,this._ty=v},setBoundsRectangle:function(d){return this.customBoundsRectangle=d||this.world.bounds,this},checkWorldBounds:function(){var d=this.position,v=this.customBoundsRectangle,p=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,m=this.worldBounce?-this.worldBounce.y:-this.bounce.y,x=!1;return d.x<v.x&&p.left?(d.x=v.x,this.velocity.x*=g,this.blocked.left=!0,x=!0):this.right>v.right&&p.right&&(d.x=v.right-this.width,this.velocity.x*=g,this.blocked.right=!0,x=!0),d.y<v.y&&p.up?(d.y=v.y,this.velocity.y*=m,this.blocked.up=!0,x=!0):this.bottom>v.bottom&&p.down&&(d.y=v.bottom-this.height,this.velocity.y*=m,this.blocked.down=!0,x=!0),x&&(this.blocked.none=!1,this.updateCenter()),x},setOffset:function(d,v){return v===void 0&&(v=d),this.offset.set(d,v),this},setSize:function(d,v,p){p===void 0&&(p=!0);var g=this.gameObject;if(!d&&g.frame&&(d=g.frame.realWidth),!v&&g.frame&&(v=g.frame.realHeight),this.sourceWidth=d,this.sourceHeight=v,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&g.getCenter){var m=(g.width-d)/2,x=(g.height-v)/2;this.offset.set(m,x)}return this.isCircle=!1,this.radius=0,this},setCircle:function(d,v,p){return v===void 0&&(v=this.offset.x),p===void 0&&(p=this.offset.y),d>0?(this.isCircle=!0,this.radius=d,this.sourceWidth=d*2,this.sourceHeight=d*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,p),this.updateCenter()):this.isCircle=!1,this},reset:function(d,v){this.stop();var p=this.gameObject;p.setPosition(d,v),p.getTopLeft?p.getTopLeft(this.position):this.position.set(d,v),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=p.angle,this.preRotation=p.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(d){return d.x=this.x,d.y=this.y,d.right=this.right,d.bottom=this.bottom,d},hitTest:function(d,v){if(!this.isCircle)return l(this,d,v);if(this.radius>0&&d>=this.left&&d<=this.right&&v>=this.top&&v<=this.bottom){var p=(this.center.x-d)*(this.center.x-d),g=(this.center.y-v)*(this.center.y-v);return p+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(d){var v=this.position,p=v.x+this.halfWidth,g=v.y+this.halfHeight;this.debugShowBody&&(d.lineStyle(d.defaultStrokeWidth,this.debugBodyColor),this.isCircle?d.strokeCircle(p,g,this.width/2):(this.checkCollision.up&&d.lineBetween(v.x,v.y,v.x+this.width,v.y),this.checkCollision.right&&d.lineBetween(v.x+this.width,v.y,v.x+this.width,v.y+this.height),this.checkCollision.down&&d.lineBetween(v.x,v.y+this.height,v.x+this.width,v.y+this.height),this.checkCollision.left&&d.lineBetween(v.x,v.y,v.x,v.y+this.height))),this.debugShowVelocity&&(d.lineStyle(d.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),d.lineBetween(p,g,p+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(d,v,p,g){d===void 0&&(d=!0),this.collideWorldBounds=d;var m=v!==void 0,x=p!==void 0;return(m||x)&&(this.worldBounce||(this.worldBounce=new f),m&&(this.worldBounce.x=v),x&&(this.worldBounce.y=p)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(d,v){return this.velocity.set(d,v),d=this.velocity.x,v=this.velocity.y,this.speed=Math.sqrt(d*d+v*v),this},setVelocityX:function(d){this.velocity.x=d;var v=d,p=this.velocity.y;return this.speed=Math.sqrt(v*v+p*p),this},setVelocityY:function(d){this.velocity.y=d;var v=this.velocity.x,p=d;return this.speed=Math.sqrt(v*v+p*p),this},setMaxVelocity:function(d,v){return this.maxVelocity.set(d,v),this},setMaxVelocityX:function(d){return this.maxVelocity.x=d,this},setMaxVelocityY:function(d){return this.maxVelocity.y=d,this},setMaxSpeed:function(d){return this.maxSpeed=d,this},setBounce:function(d,v){return this.bounce.set(d,v),this},setBounceX:function(d){return this.bounce.x=d,this},setBounceY:function(d){return this.bounce.y=d,this},setAcceleration:function(d,v){return this.acceleration.set(d,v),this},setAccelerationX:function(d){return this.acceleration.x=d,this},setAccelerationY:function(d){return this.acceleration.y=d,this},setAllowDrag:function(d){return d===void 0&&(d=!0),this.allowDrag=d,this},setAllowGravity:function(d){return d===void 0&&(d=!0),this.allowGravity=d,this},setAllowRotation:function(d){return d===void 0&&(d=!0),this.allowRotation=d,this},setDrag:function(d,v){return this.drag.set(d,v),this},setDamping:function(d){return this.useDamping=d,this},setDragX:function(d){return this.drag.x=d,this},setDragY:function(d){return this.drag.y=d,this},setGravity:function(d,v){return this.gravity.set(d,v),this},setGravityX:function(d){return this.gravity.x=d,this},setGravityY:function(d){return this.gravity.y=d,this},setFriction:function(d,v){return this.friction.set(d,v),this},setFrictionX:function(d){return this.friction.x=d,this},setFrictionY:function(d){return this.friction.y=d,this},setAngularVelocity:function(d){return this.angularVelocity=d,this},setAngularAcceleration:function(d){return this.angularAcceleration=d,this},setAngularDrag:function(d){return this.angularDrag=d,this},setMass:function(d){return this.mass=d,this},setImmovable:function(d){return d===void 0&&(d=!0),this.immovable=d,this},setEnable:function(d){return d===void 0&&(d=!0),this.enable=d,this},processX:function(d,v,p,g){this.x+=d,this.updateCenter(),v!==null&&(this.velocity.x=v);var m=this.blocked;p&&(m.left=!0),g&&(m.right=!0)},processY:function(d,v,p,g){this.y+=d,this.updateCenter(),v!==null&&(this.velocity.y=v);var m=this.blocked;p&&(m.up=!0),g&&(m.down=!0)},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u,l,f,c,d,v){this.world=h,this.name="",this.active=!0,this.overlapOnly=u,this.object1=l,this.object2=f,this.collideCallback=c,this.processCallback=d,this.callbackContext=v},setName:function(n){return this.name=n,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=i(3),n=new a,h=new a,u=function(l,f,c,d,v,p,g){var m=g.tilemapLayer.tilemap._convert.WorldToTileXY;m(l,f,!0,n,p,g);var x=n.x,y=n.y;m(l+c,f+d,!1,h,p,g);var T=Math.ceil(h.x),S=Math.ceil(h.y);return s(x,y,T-x,S-y,v,g)};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.collisionCallback?!s.collisionCallback.call(s.collisionCallbackContext,a,s):s.layer.callbacks[s.index]?!s.layer.callbacks[s.index].callback.call(s.layer.callbacks[s.index].callbackContext,a,s):!0};e.exports=i},function(e,r,i){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(436);function a(S){var C=[".left",".top",".right",".bottom"];if(!(this instanceof a))return new a(S,C);this._maxEntries=Math.max(4,S||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}a.prototype={all:function(){return this._all(this.data,[])},search:function(S){var C=this.data,E=[],P=this.toBBox;if(!x(S,C))return E;for(var M=[],R,A,O,F;C;){for(R=0,A=C.children.length;R<A;R++)O=C.children[R],F=C.leaf?P(O):O,x(S,F)&&(C.leaf?E.push(O):m(S,F)?this._all(O,E):M.push(O));C=M.pop()}return E},collides:function(S){var C=this.data,E=this.toBBox;if(!x(S,C))return!1;for(var P=[],M,R,A,O;C;){for(M=0,R=C.children.length;M<R;M++)if(A=C.children[M],O=C.leaf?E(A):A,x(S,O)){if(C.leaf||m(S,O))return!0;P.push(A)}C=P.pop()}return!1},load:function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var C=0,E=S.length;C<E;C++)this.insert(S[C]);return this}var P=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var M=this.data;this.data=P,P=M}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(S){return S&&this._insert(S,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(S,C){if(!S)return this;for(var E=this.data,P=this.toBBox(S),M=[],R=[],A,O,F,b;E||M.length;){if(E||(E=M.pop(),O=M[M.length-1],A=R.pop(),b=!0),E.leaf&&(F=n(S,E.children,C),F!==-1))return E.children.splice(F,1),M.push(E),this._condense(M),this;!b&&!E.leaf&&m(E,P)?(M.push(E),R.push(A),A=0,O=E,E=E.children[0]):O?(A++,E=O.children[A],b=!1):E=null}return this},toBBox:function(S){return S},compareMinX:f,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(S){return this.data=S,this},_all:function(S,C){for(var E=[];S;)S.leaf?C.push.apply(C,S.children):E.push.apply(E,S.children),S=E.pop();return C},_build:function(S,C,E,P){var M=E-C+1,R=this._maxEntries,A;if(M<=R)return A=y(S.slice(C,E+1)),h(A,this.toBBox),A;P||(P=Math.ceil(Math.log(M)/Math.log(R)),R=Math.ceil(M/Math.pow(R,P-1))),A=y([]),A.leaf=!1,A.height=P;var O=Math.ceil(M/R),F=O*Math.ceil(Math.sqrt(R)),b,w,N,V;for(T(S,C,E,F,this.compareMinX),b=C;b<=E;b+=F)for(N=Math.min(b+F-1,E),T(S,b,N,O,this.compareMinY),w=b;w<=N;w+=O)V=Math.min(w+O-1,N),A.children.push(this._build(S,w,V,P-1));return h(A,this.toBBox),A},_chooseSubtree:function(S,C,E,P){for(var M,R,A,O,F,b,w,N;P.push(C),!(C.leaf||P.length-1===E);){for(w=N=1/0,M=0,R=C.children.length;M<R;M++)A=C.children[M],F=d(A),b=p(S,A)-F,b<N?(N=b,w=F<w?F:w,O=A):b===N&&F<w&&(w=F,O=A);C=O||C.children[0]}return C},_insert:function(S,C,E){var P=this.toBBox,M=E?S:P(S),R=[],A=this._chooseSubtree(M,this.data,C,R);for(A.children.push(S),l(A,M);C>=0&&R[C].children.length>this._maxEntries;)this._split(R,C),C--;this._adjustParentBBoxes(M,R,C)},_split:function(S,C){var E=S[C],P=E.children.length,M=this._minEntries;this._chooseSplitAxis(E,M,P);var R=this._chooseSplitIndex(E,M,P),A=y(E.children.splice(R,E.children.length-R));A.height=E.height,A.leaf=E.leaf,h(E,this.toBBox),h(A,this.toBBox),C?S[C-1].children.push(A):this._splitRoot(E,A)},_splitRoot:function(S,C){this.data=y([S,C]),this.data.height=S.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},_chooseSplitIndex:function(S,C,E){var P,M,R,A,O,F,b,w;for(F=b=1/0,P=C;P<=E-C;P++)M=u(S,0,P,this.toBBox),R=u(S,P,E,this.toBBox),A=g(M,R),O=d(M)+d(R),A<F?(F=A,w=P,b=O<b?O:b):A===F&&O<b&&(b=O,w=P);return w},_chooseSplitAxis:function(S,C,E){var P=S.leaf?this.compareMinX:f,M=S.leaf?this.compareMinY:c,R=this._allDistMargin(S,C,E,P),A=this._allDistMargin(S,C,E,M);R<A&&S.children.sort(P)},_allDistMargin:function(S,C,E,P){S.children.sort(P);var M=this.toBBox,R=u(S,0,C,M),A=u(S,E-C,E,M),O=v(R)+v(A),F,b;for(F=C;F<E-C;F++)b=S.children[F],l(R,S.leaf?M(b):b),O+=v(R);for(F=E-C-1;F>=C;F--)b=S.children[F],l(A,S.leaf?M(b):b),O+=v(A);return O},_adjustParentBBoxes:function(S,C,E){for(var P=E;P>=0;P--)l(C[P],S)},_condense:function(S){for(var C=S.length-1,E;C>=0;C--)S[C].children.length===0?C>0?(E=S[C-1].children,E.splice(E.indexOf(S[C]),1)):this.clear():h(S[C],this.toBBox)},compareMinX:function(S,C){return S.left-C.left},compareMinY:function(S,C){return S.top-C.top},toBBox:function(S){return{minX:S.left,minY:S.top,maxX:S.right,maxY:S.bottom}}};function n(S,C,E){if(!E)return C.indexOf(S);for(var P=0;P<C.length;P++)if(E(S,C[P]))return P;return-1}function h(S,C){u(S,0,S.children.length,C,S)}function u(S,C,E,P,M){M||(M=y(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var R=C,A;R<E;R++)A=S.children[R],l(M,S.leaf?P(A):A);return M}function l(S,C){return S.minX=Math.min(S.minX,C.minX),S.minY=Math.min(S.minY,C.minY),S.maxX=Math.max(S.maxX,C.maxX),S.maxY=Math.max(S.maxY,C.maxY),S}function f(S,C){return S.minX-C.minX}function c(S,C){return S.minY-C.minY}function d(S){return(S.maxX-S.minX)*(S.maxY-S.minY)}function v(S){return S.maxX-S.minX+(S.maxY-S.minY)}function p(S,C){return(Math.max(C.maxX,S.maxX)-Math.min(C.minX,S.minX))*(Math.max(C.maxY,S.maxY)-Math.min(C.minY,S.minY))}function g(S,C){var E=Math.max(S.minX,C.minX),P=Math.max(S.minY,C.minY),M=Math.min(S.maxX,C.maxX),R=Math.min(S.maxY,C.maxY);return Math.max(0,M-E)*Math.max(0,R-P)}function m(S,C){return S.minX<=C.minX&&S.minY<=C.minY&&C.maxX<=S.maxX&&C.maxY<=S.maxY}function x(S,C){return C.minX<=S.maxX&&C.minY<=S.maxY&&C.maxX>=S.minX&&C.maxY>=S.minY}function y(S){return{children:S,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function T(S,C,E,P,M){for(var R=[C,E],A;R.length;)E=R.pop(),C=R.pop(),!(E-C<=P)&&(A=C+Math.ceil((E-C)/P/2)*P,s(S,A,C,E,M),R.push(C,A,A,E))}e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(533),a=i(535),n=i(248),h=function(u,l,f,c,d,v,p){var g=c.left,m=c.top,x=c.right,y=c.bottom,T=f.faceLeft||f.faceRight,S=f.faceTop||f.faceBottom;if(p||(T=!0,S=!0),!T&&!S)return!1;var C=0,E=0,P=0,M=1;if(l.deltaAbsX()>l.deltaAbsY()?P=-1:l.deltaAbsX()<l.deltaAbsY()&&(M=-1),l.deltaX()!==0&&l.deltaY()!==0&&T&&S&&(P=Math.min(Math.abs(l.position.x-x),Math.abs(l.right-g)),M=Math.min(Math.abs(l.position.y-y),Math.abs(l.bottom-m))),P<M){if(T&&(C=s(l,f,g,x,v,p),C!==0&&!n(c,l)))return!0;S&&(E=a(l,f,m,y,v,p))}else{if(S&&(E=a(l,f,m,y,v,p),E!==0&&!n(c,l)))return!0;T&&(C=s(l,f,g,x,v,p))}return C!==0||E!==0};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(534),a=function(n,h,u,l,f,c){var d=0,v=h.faceLeft,p=h.faceRight,g=h.collideLeft,m=h.collideRight;return c||(v=!0,p=!0,g=!0,m=!0),n.deltaX()<0&&m&&n.checkCollision.left?p&&n.x<l&&(d=n.x-l,d<-f&&(d=0)):n.deltaX()>0&&g&&n.checkCollision.right&&v&&n.right>u&&(d=n.right-u,d>f&&(d=0)),d!==0&&(n.customSeparateX?n.overlapX=d:s(n,d)),d};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a<0?(s.blocked.none=!1,s.blocked.left=!0):a>0&&(s.blocked.none=!1,s.blocked.right=!0),s.position.x-=a,s.bounce.x===0?s.velocity.x=0:s.velocity.x=-s.velocity.x*s.bounce.x};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(536),a=function(n,h,u,l,f,c){var d=0,v=h.faceTop,p=h.faceBottom,g=h.collideUp,m=h.collideDown;return c||(v=!0,p=!0,g=!0,m=!0),n.deltaY()<0&&m&&n.checkCollision.up?p&&n.y<l&&(d=n.y-l,d<-f&&(d=0)):n.deltaY()>0&&g&&n.checkCollision.down&&v&&n.bottom>u&&(d=n.bottom-u,d>f&&(d=0)),d!==0&&(n.customSeparateY?n.overlapY=d:s(n,d)),d};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a<0?(s.blocked.none=!1,s.blocked.up=!0):a>0&&(s.blocked.none=!1,s.blocked.down=!0),s.position.y-=a,s.bounce.y===0?s.velocity.y=0:s.velocity.y=-s.velocity.y*s.bounce.y};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(246),a=i(1389),n=function(h,u,l,f){var c=s(h,u,l,f),d=h.immovable,v=u.immovable;if(l||c===0||d&&v||h.customSeparateX||u.customSeparateX)return c!==0||h.embedded&&u.embedded;var p=a.Set(h,u,c);return!d&&!v?p>0?!0:a.Check():(d?a.RunImmovableBody1(p):v&&a.RunImmovableBody2(p),!0)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(247),a=i(1390),n=function(h,u,l,f){var c=s(h,u,l,f),d=h.immovable,v=u.immovable;if(l||c===0||d&&v||h.customSeparateY||u.customSeparateY)return c!==0||h.embedded&&u.embedded;var p=a.Set(h,u,c);return!d&&!v?p>0?!0:a.Check():(d?a.RunImmovableBody1(p):v&&a.RunImmovableBody2(p),!0)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(66),a=i(0),n=i(62),h=i(57),u=i(3),l=new a({initialize:function(c,d){var v=d.displayWidth?d.displayWidth:64,p=d.displayHeight?d.displayHeight:64;this.world=c,this.gameObject=d,this.debugShowBody=c.defaults.debugShowStaticBody,this.debugBodyColor=c.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(d.x-v*d.originX,d.y-p*d.originY),this.width=v,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=u.ZERO,this.allowGravity=!1,this.gravity=u.ZERO,this.bounce=u.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=n.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(f,c){return f&&f!==this.gameObject&&(this.gameObject.body=null,f.body=this,this.gameObject=f),c&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var f=this.gameObject;return f.getTopLeft(this.position),this.width=f.displayWidth,this.height=f.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(f,c){return c===void 0&&(c=f),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(f,c),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(f,c,d){d===void 0&&(d=!0);var v=this.gameObject;if(!f&&v.frame&&(f=v.frame.realWidth),!c&&v.frame&&(c=v.frame.realHeight),this.world.staticTree.remove(this),this.width=f,this.height=c,this.halfWidth=Math.floor(f/2),this.halfHeight=Math.floor(c/2),d&&v.getCenter){var p=v.displayWidth/2,g=v.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(f,c,d){return c===void 0&&(c=this.offset.x),d===void 0&&(d=this.offset.y),f>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=f,this.width=f*2,this.height=f*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,d),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(f,c){var d=this.gameObject;f===void 0&&(f=d.x),c===void 0&&(c=d.y),this.world.staticTree.remove(this),d.setPosition(f,c),d.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(f){return f.x=this.x,f.y=this.y,f.right=this.right,f.bottom=this.bottom,f},hitTest:function(f,c){return this.isCircle?s(this,f,c):h(this,f,c)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(f){var c=this.position,d=c.x+this.halfWidth,v=c.y+this.halfHeight;this.debugShowBody&&(f.lineStyle(f.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?f.strokeCircle(d,v,this.width/2):f.strokeRect(c.x,c.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(f){return f<=0&&(f=.1),this.mass=f,this},x:{get:function(){return this.position.x},set:function(f){this.world.staticTree.remove(this),this.position.x=f,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(f){this.world.staticTree.remove(this),this.position.y=f,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=l},function(e,r,i){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=i(0),a=new s({initialize:function(h){this.pluginManager=h,this.game=h.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),a=new s,n=function(h,u,l,f){var c=l.tilemapLayer,d=c.cullPaddingX,v=c.cullPaddingY,p=c.tilemap.tileToWorldXY(h,u,a,f,c);return p.x>f.worldView.x+c.scaleX*l.tileWidth*(-d-.5)&&p.x<f.worldView.right+c.scaleX*l.tileWidth*(d-.5)&&p.y>f.worldView.y+c.scaleY*l.tileHeight*(-v-1)&&p.y<f.worldView.bottom+c.scaleY*l.tileHeight*(v-.5)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=function(n,h,u,l,f,c,d){for(var v=s(u,l,f,c,null,d),p=0;p<v.length;p++)v[p]&&v[p].index===n&&(v[p].index=h)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=i(139),n=i(76),h=new s,u=function(l,f){var c=l.tilemapLayer.tilemap,d=l.tilemapLayer,v=Math.floor(c.tileWidth*d.scaleX),p=Math.floor(c.tileHeight*d.scaleY),g=n(f.worldView.x-d.x,v,0,!0)-d.cullPaddingX,m=a(f.worldView.right-d.x,v,0,!0)+d.cullPaddingX,x=n(f.worldView.y-d.y,p,0,!0)-d.cullPaddingY,y=a(f.worldView.bottom-d.y,p,0,!0)+d.cullPaddingY;return h.setTo(g,x,m-g,y-x)};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(543),a=i(159),n=function(h,u,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var c=h.tilemapLayer,d=s(h,u);return(c.skipCull||c.scrollFactorX!==1||c.scrollFactorY!==1)&&(d.left=0,d.right=h.width,d.top=0,d.bottom=h.height),a(h,d,f,l),l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(546),a=i(159),n=function(h,u,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var c=h.tilemapLayer;if(!c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1){var d=s(h,u);a(h,d,f,l)}return l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(139),a=i(76),n=function(h,u){var l=h.tilemapLayer.tilemap,f=h.tilemapLayer,c=Math.floor(l.tileWidth*f.scaleX),d=Math.floor(l.tileHeight*f.scaleY),v=h.hexSideLength,p=(d-v)/2+v,g=a(u.worldView.x-f.x,c,0,!0)-f.cullPaddingX,m=s(u.worldView.right-f.x,c,0,!0)+f.cullPaddingX,x=a(u.worldView.y-f.y,p,0,!0)-f.cullPaddingY,y=s(u.worldView.bottom-f.y,p,0,!0)+f.cullPaddingY;return{left:g,right:m,top:x,bottom:y}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(541),a=function(n,h,u,l){u===void 0&&(u=[]),l===void 0&&(l=0),u.length=0;var f=n.tilemapLayer,c=n.data,d=n.width,v=n.height,p=0,g=d,m=0,x=v;if(!f.skipCull){var y,T,S;if(l===0){for(T=m;T<x;T++)for(y=p;c[T]&&y<g;y++)if(s(y,T,n,h)){if(S=c[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;u.push(S)}}else if(l===1){for(T=m;T<x;T++)for(y=g;c[T]&&y>=p;y--)if(s(y,T,n,h)){if(S=c[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;u.push(S)}}else if(l===2){for(T=x;T>=m;T--)for(y=p;c[T]&&y<g;y++)if(s(y,T,n,h)){if(S=c[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;u.push(S)}}else if(l===3){for(T=x;T>=m;T--)for(y=g;c[T]&&y>=p;y--)if(s(y,T,n,h)){if(S=c[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;u.push(S)}}}return f.tilesDrawn=u.length,f.tilesTotal=d*v,u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(549),a=i(159),n=function(h,u,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var c=h.tilemapLayer;if(!c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1){var d=s(h,u);a(h,d,f,l)}return l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(139),a=i(76),n=function(h,u){var l=h.tilemapLayer.tilemap,f=h.tilemapLayer,c=Math.floor(l.tileWidth*f.scaleX),d=Math.floor(l.tileHeight*f.scaleY),v=a(u.worldView.x-f.x,c,0,!0)-f.cullPaddingX,p=s(u.worldView.right-f.x,c,0,!0)+f.cullPaddingX,g=a(u.worldView.y-f.y,d/2,0,!0)-f.cullPaddingY,m=s(u.worldView.bottom-f.y,d/2,0,!0)+f.cullPaddingY;return{left:v,right:p,top:g,bottom:m}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),a=function(n,h,u,l,f){u||(u=new s);var c=f.baseTileWidth,d=f.baseTileHeight,v=f.tilemapLayer,p=0,g=0;v&&(l||(l=v.scene.cameras.main),p=v.x+l.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+l.scrollY*(1-v.scrollFactorY),d*=v.scaleY);var m=f.hexSideLength,x=(d-m)/2+m,y=p+n*c+h%2*(c/2),T=g+h*x;return u.set(y,T)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),a=function(n,h,u,l,f){u||(u=new s);var c=f.baseTileWidth,d=f.baseTileHeight,v=f.tilemapLayer,p=0,g=0;v&&(l||(l=v.scene.cameras.main),p=v.x+l.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+l.scrollY*(1-v.scrollFactorY),d*=v.scaleY);var m=p+(n-h)*(c/2),x=g+(n+h)*(d/2);return u.set(m,x)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),a=function(n,h,u,l,f){u||(u=new s);var c=f.baseTileWidth,d=f.baseTileHeight,v=f.tilemapLayer,p=0,g=0;v&&(l||(l=v.scene.cameras.main),p=v.x+l.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+l.scrollY*(1-v.scrollFactorY),d*=v.scaleY);var m=p+n*c+h%2*(c/2),x=g+h*(d/2);return u.set(m,x)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(253),a=i(254),n=i(3),h=function(u,l,f,c,d){return f||(f=new n(0,0)),f.x=s(u,c,d),f.y=a(l,c,d),f};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=n.baseTileHeight,u=n.tilemapLayer,l=0;u&&(a===void 0&&(a=u.scene.cameras.main),l=u.y+a.scrollY*(1-u.scrollFactorY),h*=u.scaleY);var f=u.tilemap.hexSideLength,c=(h-f)/2+f;return l+s*c};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=n.baseTileHeight,u=n.tilemapLayer,l=0;return u&&(a===void 0&&(a=u.scene.cameras.main),l=u.y+a.scrollY*(1-u.scrollFactorY),h*=u.scaleY),l+s*(h/2)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),a=function(n,h,u,l,f,c){l||(l=new s);var d=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(f||(f=p.scene.cameras.main),h=h-(p.y+f.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,n=n-(p.x+f.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=c.hexSideLength,m=(v-g)/2+g,x=u?Math.floor(h/m):h/m,y=u?Math.floor((n-x%2*.5*d)/d):(n-x%2*.5*d)/d;return l.set(y,x)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),a=function(n,h,u,l,f,c){l||(l=new s);var d=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(f||(f=p.scene.cameras.main),h=h-(p.y+f.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,n=n-(p.x+f.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=u?Math.floor((n/(d/2)+h/(v/2))/2):(n/(d/2)+h/(v/2))/2,m=u?Math.floor((h/(v/2)-n/(d/2))/2):(h/(v/2)-n/(d/2))/2;return l.set(g,m)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),a=function(n,h,u,l,f,c){l||(l=new s);var d=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(f||(f=p.scene.cameras.main),h=h-(p.y+f.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,n=n-(p.x+f.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=u?Math.floor(h/(v/2)):h/(v/2),m=u?Math.floor((n+g%2*.5*d)/d):(n+g%2*.5*d)/d;return l.set(m,g)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(255),a=i(256),n=i(3),h=function(u,l,f,c,d,v){return f===void 0&&(f=!0),c||(c=new n(0,0)),c.x=s(u,f,d,v),c.y=a(l,f,d,v),c};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=h.baseTileHeight,l=h.tilemapLayer;l&&(n||(n=l.scene.cameras.main),s=s-(l.y+n.scrollY*(1-l.scrollFactorY)),u*=l.scaleY);var f=h.hexSideLength,c=(u-f)/2+f;return a?Math.floor(s/c):s/c};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=h.baseTileHeight,l=h.tilemapLayer;return l&&(n||(n=l.scene.cameras.main),s=s-(l.y+n.scrollY*(1-l.scrollFactorY)),u*=l.scaleY),a?Math.floor(s/(u/2)):s/(u/2)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(119),a=function(n,h,u){if(s(n,h,u)){var l=u.data[h][n];return l!==null&&l.index>-1}else return!1};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(85),a=i(119),n=i(252),h=function(u,l,f,c,d){if(f===void 0&&(f=!0),c===void 0&&(c=!0),!a(u,l,d))return null;var v=d.data[l][u];if(v)d.data[l][u]=f?null:new s(d,-1,u,l,d.tileWidth,d.tileHeight);else return null;return c&&v&&v.collides&&n(u,l,d),v};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(40),a=i(259),n=i(565),h=i(566),u=i(577),l=function(f,c,d,v,p,g){var m;switch(c){case s.ARRAY_2D:m=a(f,d,v,p,g);break;case s.CSV:m=n(f,d,v,p,g);break;case s.TILED_JSON:m=h(f,d,g);break;case s.WELTMEISTER:m=u(f,d,g);break;default:console.warn("Unrecognized tilemap data format: "+c),m=null}return m};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(40),a=i(259),n=function(h,u,l,f,c){var d=u.trim().split(`
`).map(function(p){return p.split(",")}),v=a(h,d,l,f,c);return v.format=s.CSV,v};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(567),a=i(568),n=i(29),h=i(40),u=i(258),l=i(121),f=i(569),c=i(570),d=i(573),v=i(575),p=function(g,m,x){var y=new l({width:m.width,height:m.height,name:g,tileWidth:m.tilewidth,tileHeight:m.tileheight,orientation:u(m.orientation),format:h.TILED_JSON,version:m.version,properties:m.properties,renderOrder:m.renderorder,infinite:m.infinite});y.orientation===n.HEXAGONAL&&(y.hexSideLength=m.hexsidelength),y.layers=d(m,x),y.images=f(m);var T=v(m);return y.tilesets=T.tilesets,y.imageCollections=T.imageCollections,y.objects=c(m),y.tiles=a(y),s(y),y};e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(17),a=function(n){for(var h,u,l,f,c,d=0;d<n.layers.length;d++){h=n.layers[d],f=null;for(var v=0;v<h.data.length;v++){c=h.data[v];for(var p=0;p<c.length;p++)u=c[p],!(u===null||u.index<0)&&(l=n.tiles[u.index][2],f=n.tilesets[l],u.width=f.tileWidth,u.height=f.tileHeight,f.tileProperties&&f.tileProperties[u.index-f.firstgid]&&(u.properties=s(u.properties,f.tileProperties[u.index-f.firstgid])))}}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(122),a=function(n){var h,u,l=[];for(h=0;h<n.imageCollections.length;h++)for(var f=n.imageCollections[h],c=f.images,d=0;d<c.length;d++){var v=c[d];u=new s(v.image,v.gid,f.imageWidth,f.imageHeight,0,0),u.updateTileData(f.imageWidth,f.imageHeight),n.tilesets.push(u)}for(h=0;h<n.tilesets.length;h++){u=n.tilesets[h];for(var p=u.tileMargin,g=u.tileMargin,m=0,x=0,y=0,T=u.firstgid;T<u.firstgid+u.total&&(l[T]=[p,g,h],p+=u.tileWidth+u.tileSpacing,m++,!(m===u.total||(x++,x===u.columns&&(p=u.tileMargin,g+=u.tileHeight+u.tileSpacing,x=0,y++,y===u.rows))));T++);}return l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),a=i(161),n=function(h){for(var u=[],l=[],f=a(h);f.i<f.layers.length||l.length>0;){if(f.i>=f.layers.length){if(l.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=l.pop();continue}var c=f.layers[f.i];if(f.i++,c.type!=="imagelayer"){if(c.type==="group"){var d=a(h,c,f);l.push(f),f=d}continue}var v=s(c,"offsetx",0)+s(c,"startx",0),p=s(c,"offsety",0)+s(c,"starty",0);u.push({name:f.name+c.name,image:c.image,x:f.x+v+c.x,y:f.y+p+c.y,alpha:f.opacity*c.opacity,visible:f.visible&&c.visible,properties:s(c,"properties",{})})}return u};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),a=i(260),n=i(572),h=i(161),u=function(l){for(var f=[],c=[],d=h(l);d.i<d.layers.length||c.length>0;){if(d.i>=d.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=c.pop();continue}var v=d.layers[d.i];if(d.i++,v.opacity*=d.opacity,v.visible=d.visible&&v.visible,v.type!=="objectgroup"){if(v.type==="group"){var p=h(l,v,d);c.push(d),d=p}continue}v.name=d.name+v.name;for(var g=d.x+s(v,"startx",0)+s(v,"offsetx",0),m=d.y+s(v,"starty",0)+s(v,"offsety",0),x=[],y=0;y<v.objects.length;y++){var T=a(v.objects[y],g,m);x.push(T)}var S=new n(v);S.objects=x,f.push(S)}return f};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(126),a=function(n,h){for(var u={},l=0;l<h.length;l++){var f=h[l];s(n,f)&&(u[f]=n[f])}return u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(2),n=new s({initialize:function(u){u===void 0&&(u={}),this.name=a(u,"name","object layer"),this.opacity=a(u,"opacity",1),this.properties=a(u,"properties",{}),this.propertyTypes=a(u,"propertytypes",{}),this.type=a(u,"type","objectgroup"),this.visible=a(u,"visible",!0),this.objects=a(u,"objects",[])}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(574),a=i(29),n=i(161),h=i(258),u=i(2),l=i(120),f=i(261),c=i(85),d=function(v,p){for(var g=u(v,"infinite",!1),m=[],x=[],y=n(v);y.i<y.layers.length||x.length>0;){if(y.i>=y.layers.length){if(x.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=x.pop();continue}var T=y.layers[y.i];if(y.i++,T.type!=="tilelayer"){if(T.type==="group"){var S=n(v,T,y);x.push(y),y=S}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var C=0;C<T.chunks.length;C++)T.chunks[C].data=s(T.chunks[C].data);T.data&&(T.data=s(T.data)),delete T.encoding}var E,P,M,R,A=[],O=0;if(g){var F=u(T,"startx",0)+T.x,b=u(T,"starty",0)+T.y;E=new l({name:y.name+T.name,x:y.x+u(T,"offsetx",0)+F*v.tilewidth,y:y.y+u(T,"offsety",0)+b*v.tileheight,width:T.width,height:T.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:u(T,"properties",[]),orientation:h(v.orientation)}),E.orientation===a.HEXAGONAL&&(E.hexSideLength=v.hexsidelength);for(var w=0;w<T.height;w++){A.push([null]);for(var N=0;N<T.width;N++)A[w][N]=null}for(w=0,X=T.chunks.length;w<X;w++)for(var V=T.chunks[w],W=V.x-F,U=V.y-b,D=0,L=0,I=V.data.length;L<I;L++){var B=O+W,G=D+U;P=f(V.data[L]),P.gid>0?(M=new c(E,P.gid,B,G,v.tilewidth,v.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,A[G][B]=M):(R=p?null:new c(E,-1,B,G,v.tilewidth,v.tileheight),A[G][B]=R),O++,O===V.width&&(D++,O=0)}}else{E=new l({name:y.name+T.name,x:y.x+u(T,"offsetx",0)+T.x,y:y.y+u(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:u(T,"properties",[]),orientation:h(v.orientation)}),E.orientation===a.HEXAGONAL&&(E.hexSideLength=v.hexsidelength);for(var z=[],Y=0,X=T.data.length;Y<X;Y++)P=f(T.data[Y]),P.gid>0?(M=new c(E,P.gid,O,A.length,v.tilewidth,v.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,z.push(M)):(R=p?null:new c(E,-1,O,A.length,v.tilewidth,v.tileheight),z.push(R)),O++,O===T.width&&(A.push(z),O=0,z=[])}E.data=A,m.push(E)}return m};e.exports=d},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var a=window.atob(s),n=a.length,h=new Array(n/4),u=0;u<n;u+=4)h[u/4]=(a.charCodeAt(u)|a.charCodeAt(u+1)<<8|a.charCodeAt(u+2)<<16|a.charCodeAt(u+3)<<24)>>>0;return h};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(122),a=i(576),n=i(260),h=i(1453),u=function(l){for(var f=[],c=[],d=null,v,p=0;p<l.tilesets.length;p++){var g=l.tilesets[p];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var m=new s(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(l.version>1){var x=void 0,y=void 0;if(Array.isArray(g.tiles)){x=x||{},y=y||{};for(var T=0;T<g.tiles.length;T++){var S=g.tiles[T];if(S.properties){var C={};S.properties.forEach(function(w){C[w.name]=w.value}),y[S.id]=C}if(S.objectgroup&&((x[S.id]||(x[S.id]={})).objectgroup=S.objectgroup,S.objectgroup.objects)){var E=S.objectgroup.objects.map(function(w){return n(w)});x[S.id].objectgroup.objects=E}S.animation&&((x[S.id]||(x[S.id]={})).animation=S.animation),S.type&&((x[S.id]||(x[S.id]={})).type=S.type)}}Array.isArray(g.wangsets)&&(x=x||{},y=y||{},h(g.wangsets,x)),x&&(m.tileData=x,m.tileProperties=y)}else if(g.tileproperties&&(m.tileProperties=g.tileproperties),g.tiles){m.tileData=g.tiles;for(v in m.tileData){var P=m.tileData[v].objectgroup;if(P&&P.objects){var M=P.objects.map(function(w){return n(w)});m.tileData[v].objectgroup.objects=M}}}m.updateTileData(g.imagewidth,g.imageheight),f.push(m)}else{var R=new a(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),A=0;for(T=0;T<g.tiles.length;T++){S=g.tiles[T];var O=S.image,F=parseInt(S.id,10),b=g.firstgid+F;R.addImage(b,O),A=Math.max(F,A)}R.maxId=A,c.push(R)}d&&(d.lastgid=g.firstgid-1),d=g}return{tilesets:f,imageCollections:c}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h,u,l,f,c,d,v){(l===void 0||l<=0)&&(l=32),(f===void 0||f<=0)&&(f=32),c===void 0&&(c=0),d===void 0&&(d=0),this.name=h,this.firstgid=u|0,this.imageWidth=l|0,this.imageHeight=f|0,this.imageMargin=c|0,this.imageSpacing=d|0,this.properties=v||{},this.images=[],this.total=0},containsImageIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},addImage:function(n,h){return this.images.push({gid:n,image:h}),this.total++,this}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(40),a=i(121),n=i(578),h=i(579),u=function(l,f,c){if(f.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+l),null;for(var d=0,v=0,p=0;p<f.layer.length;p++)f.layer[p].width>d&&(d=f.layer[p].width),f.layer[p].height>v&&(v=f.layer[p].height);var g=new a({width:d,height:v,name:l,tileWidth:f.layer[0].tilesize,tileHeight:f.layer[0].tilesize,format:s.WELTMEISTER});return g.layers=n(f,c),g.tilesets=h(f),g};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(120),a=i(85),n=function(h,u){for(var l=[],f=0;f<h.layer.length;f++){for(var c=h.layer[f],d=new s({name:c.name,width:c.width,height:c.height,tileWidth:c.tilesize,tileHeight:c.tilesize,visible:c.visible===1}),v=[],p=[],g=0;g<c.data.length;g++){for(var m=0;m<c.data[g].length;m++){var x=c.data[g][m]-1,y;x>-1?y=new a(d,x,m,g,c.tilesize,c.tilesize):y=u?null:new a(d,-1,m,g,c.tilesize,c.tilesize),v.push(y)}p.push(v),v=[]}d.data=p,l.push(d)}return l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(122),a=function(n){for(var h=[],u=[],l=0;l<n.layer.length;l++){var f=n.layer[l],c=f.tilesetName;c!==""&&u.indexOf(c)===-1&&(u.push(c),h.push(new s(c,0,f.tilesize,f.tilesize,0,0)))}return h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(36),n=i(40),h=i(2),u=i(120),l=i(29),f=i(362),c=i(74),d=i(73),v=i(85),p=i(251),g=i(581),m=i(122),x=new s({initialize:function(T,S){this.scene=T,this.tileWidth=S.tileWidth,this.tileHeight=S.tileHeight,this.width=S.width,this.height=S.height,this.orientation=S.orientation,this.renderOrder=S.renderOrder,this.format=S.format,this.version=S.version,this.properties=S.properties,this.widthInPixels=S.widthInPixels,this.heightInPixels=S.heightInPixels,this.imageCollections=S.imageCollections,this.images=S.images,this.layers=S.layers,this.tilesets=S.tilesets,this.objects=S.objects,this.currentLayerIndex=0,this.hexSideLength=S.hexSideLength;var C=this.orientation;this._convert={WorldToTileXY:p.GetWorldToTileXYFunction(C),WorldToTileX:p.GetWorldToTileXFunction(C),WorldToTileY:p.GetWorldToTileYFunction(C),TileToWorldXY:p.GetTileToWorldXYFunction(C),TileToWorldX:p.GetTileToWorldXFunction(C),TileToWorldY:p.GetTileToWorldYFunction(C)}},createBlankDynamicLayer:function(y,T,S,C,E,P,M,R){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(y,T,S,C,E,P,M,R)},createDynamicLayer:function(y,T,S,C){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(y,T,S,C)},createStaticLayer:function(y,T,S,C){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(y,T,S,C)},setRenderOrder:function(y){var T=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=T[y]),T.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,T,S,C,E,P,M){if(y===void 0)return null;if(T==null&&(T=y),!this.scene.sys.textures.exists(T))return console.warn("Invalid Tileset Image: "+T),null;var R=this.scene.sys.textures.get(T),A=this.getTilesetIndex(y);if(A===null&&this.format===n.TILED_JSON)return console.warn("No data found for Tileset: "+y),null;var O=this.tilesets[A];return O?(O.setTileSize(S,C),O.setSpacing(E,P),O.setImage(R),O):(S===void 0&&(S=this.tileWidth),C===void 0&&(C=this.tileHeight),E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=0),O=new m(y,M,S,C,E,P),O.setImage(R),this.tilesets.push(O),O)},copy:function(y,T,S,C,E,P,M,R){return R=this.getLayer(R),R!==null?(p.Copy(y,T,S,C,E,P,M,R),this):null},createBlankLayer:function(y,T,S,C,E,P,M,R){S===void 0&&(S=0),C===void 0&&(C=0),E===void 0&&(E=this.width),P===void 0&&(P=this.height),M===void 0&&(M=this.tileWidth),R===void 0&&(R=this.tileHeight);var A=this.getLayerIndex(y);if(A!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var O=new u({name:y,tileWidth:M,tileHeight:R,width:E,height:P,orientation:this.orientation}),F,b=0;b<P;b++){F=[];for(var w=0;w<E;w++)F.push(new v(O,-1,w,b,M,R,this.tileWidth,this.tileHeight));O.data.push(F)}this.layers.push(O),this.currentLayerIndex=this.layers.length-1;var N=new g(this.scene,this,this.currentLayerIndex,T,S,C);return N.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(N),N},createLayer:function(y,T,S,C){var E=this.getLayerIndex(y);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var P=this.layers[E];if(P.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=E,S===void 0&&(S=P.x),C===void 0&&(C=P.y);var M=new g(this.scene,this,E,T,S,C);return M.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(M),M},createFromObjects:function(y,T){var S=[],C=this.getObjectLayer(y);if(!C)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),S;Array.isArray(T)||(T=[T]);for(var E=C.objects,P=0;P<T.length;P++){for(var M=T[P],R=h(M,"id",null),A=h(M,"gid",null),O=h(M,"name",null),F,b=[],w=0;w<E.length;w++)F=E[w],(R===null&&A===null&&O===null||R!==null&&F.id===R||A!==null&&F.gid===A||O!==null&&F.name===O)&&b.push(F);for(var N=h(M,"classType",d),V=h(M,"scene",this.scene),W=h(M,"container",null),U=h(M,"key",null),D=h(M,"frame",null),L=0;L<b.length;L++){F=b[L];var I=new N(V);I.setName(F.name),I.setPosition(F.x,F.y),I.setTexture(U,D),F.width&&(I.displayWidth=F.width),F.height&&(I.displayHeight=F.height);var B={x:I.originX*F.width,y:(I.originY-1)*F.height};if(F.rotation){var G=a(F.rotation);f(B,G),I.rotation=G}if(I.x+=B.x,I.y+=B.y,(F.flippedHorizontal!==void 0||F.flippedVertical!==void 0)&&I.setFlip(F.flippedHorizontal,F.flippedVertical),F.visible||(I.visible=!1),Array.isArray(F.properties))F.properties.forEach(function(Y){var X=Y.name;I[X]!==void 0?I[X]=Y.value:I.setData(X,Y.value)});else for(var z in F.properties)I[z]!==void 0?I[z]=F.properties[z]:I.setData(z,F.properties[z]);W?W.add(I):V.add.existing(I),S.push(I)}}return S},createFromTiles:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:p.CreateFromTiles(y,T,S,C,E,P)},fill:function(y,T,S,C,E,P,M){return P===void 0&&(P=!0),M=this.getLayer(M),M===null?null:(p.Fill(y,T,S,C,E,P,M),this)},filterObjects:function(y,T,S){if(typeof y=="string"){var C=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+C),null}return y.objects.filter(T,S)},filterTiles:function(y,T,S,C,E,P,M,R){return R=this.getLayer(R),R===null?null:p.FilterTiles(y,T,S,C,E,P,M,R)},findByIndex:function(y,T,S,C){return C=this.getLayer(C),C===null?null:p.FindByIndex(y,T,S,C)},findObject:function(y,T,S){if(typeof y=="string"){var C=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+C),null}return y.objects.find(T,S)||null},findTile:function(y,T,S,C,E,P,M,R){return R=this.getLayer(R),R===null?null:p.FindTile(y,T,S,C,E,P,M,R)},forEachTile:function(y,T,S,C,E,P,M,R){return R=this.getLayer(R),R===null?null:(p.ForEachTile(y,T,S,C,E,P,M,R),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,T){for(var S=0;S<y.length;S++)if(y[S].name===T)return S;return null},getLayer:function(y){var T=this.getLayerIndex(y);return T!==null?this.layers[T]:null},getObjectLayer:function(y){var T=this.getIndex(this.objects,y);return T!==null?this.objects[T]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof g?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,T,S,C){return C=this.getLayer(C),C===null?null:p.GetTileAt(y,T,S,C)},getTileAtWorldXY:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:p.GetTileAtWorldXY(y,T,S,C,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:p.GetTilesWithin(y,T,S,C,E,P)},getTilesWithinShape:function(y,T,S,C){return C=this.getLayer(C),C===null?null:p.GetTilesWithinShape(y,T,S,C)},getTilesWithinWorldXY:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:p.GetTilesWithinWorldXY(y,T,S,C,E,P,M)},getTileset:function(y){var T=this.getIndex(this.tilesets,y);return T!==null?this.tilesets[T]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,T,S){return S=this.getLayer(S),S===null?null:p.HasTileAt(y,T,S)},hasTileAtWorldXY:function(y,T,S,C){return C=this.getLayer(C),C===null?null:p.HasTileAtWorldXY(y,T,S,C)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,T,S,C,E){return C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:p.PutTileAt(y,T,S,C,E)},putTileAtWorldXY:function(y,T,S,C,E,P){return C===void 0&&(C=!0),P=this.getLayer(P),P===null?null:p.PutTileAtWorldXY(y,T,S,C,E,P)},putTilesAt:function(y,T,S,C,E){return C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:(p.PutTilesAt(y,T,S,C,E),this)},randomize:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:(p.Randomize(y,T,S,C,E,P),this)},calculateFacesAt:function(y,T,S){return S=this.getLayer(S),S===null?null:(p.CalculateFacesAt(y,T,S),this)},calculateFacesWithin:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:(p.CalculateFacesWithin(y,T,S,C,E),this)},removeLayer:function(y){var T=this.getLayerIndex(y);if(T!==null){c(this.layers,T);for(var S=T;S<this.layers.length;S++)this.layers[S].tilemapLayer&&this.layers[S].tilemapLayer.layerIndex--;return this.currentLayerIndex===T&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var T=this.getLayerIndex(y);return T!==null?(y=this.layers[T],y.destroy(),c(this.layers,T),this.currentLayerIndex===T&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,T=0;T<y.length;T++)y[T].tilemapLayer&&y[T].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,T,S){T===void 0&&(T=-1),S===void 0&&(S=!0);var C=[];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++){var P=y[E];C.push(this.removeTileAt(P.x,P.y,!0,S,P.tilemapLayer)),T>-1&&this.putTileAt(T,P.x,P.y,S,P.tilemapLayer)}return C},removeTileAt:function(y,T,S,C,E){return S===void 0&&(S=!0),C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:p.RemoveTileAt(y,T,S,C,E)},removeTileAtWorldXY:function(y,T,S,C,E,P){return S===void 0&&(S=!0),C===void 0&&(C=!0),P=this.getLayer(P),P===null?null:p.RemoveTileAtWorldXY(y,T,S,C,E,P)},renderDebug:function(y,T,S){return S=this.getLayer(S),S===null?null:(this.orientation===l.ORTHOGONAL&&p.RenderDebug(y,T,S),this)},renderDebugFull:function(y,T){for(var S=this.layers,C=0;C<S.length;C++)p.RenderDebug(y,T,S[C]);return this},replaceByIndex:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:(p.ReplaceByIndex(y,T,S,C,E,P,M),this)},setCollision:function(y,T,S,C,E){return T===void 0&&(T=!0),S===void 0&&(S=!0),E===void 0&&(E=!0),C=this.getLayer(C),C===null?null:(p.SetCollision(y,T,S,C,E),this)},setCollisionBetween:function(y,T,S,C,E){return S===void 0&&(S=!0),C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:(p.SetCollisionBetween(y,T,S,C,E),this)},setCollisionByProperty:function(y,T,S,C){return T===void 0&&(T=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:(p.SetCollisionByProperty(y,T,S,C),this)},setCollisionByExclusion:function(y,T,S,C){return T===void 0&&(T=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:(p.SetCollisionByExclusion(y,T,S,C),this)},setCollisionFromCollisionGroup:function(y,T,S){return y===void 0&&(y=!0),T===void 0&&(T=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionFromCollisionGroup(y,T,S),this)},setTileIndexCallback:function(y,T,S,C){return C=this.getLayer(C),C===null?null:(p.SetTileIndexCallback(y,T,S,C),this)},setTileLocationCallback:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:(p.SetTileLocationCallback(y,T,S,C,E,P,M),this)},setLayer:function(y){var T=this.getLayerIndex(y);return T!==null&&(this.currentLayerIndex=T),this},setBaseTileSize:function(y,T){this.tileWidth=y,this.tileHeight=T,this.widthInPixels=this.width*y,this.heightInPixels=this.height*T;for(var S=0;S<this.layers.length;S++){this.layers[S].baseTileWidth=y,this.layers[S].baseTileHeight=T;for(var C=this.layers[S].data,E=this.layers[S].width,P=this.layers[S].height,M=0;M<P;M++)for(var R=0;R<E;R++){var A=C[M][R];A!==null&&A.setSize(void 0,void 0,y,T)}}return this},setLayerTileSize:function(y,T,S){if(S=this.getLayer(S),S===null)return this;S.tileWidth=y,S.tileHeight=T;for(var C=S.data,E=S.width,P=S.height,M=0;M<P;M++)for(var R=0;R<E;R++){var A=C[M][R];A!==null&&A.setSize(y,T)}return this},shuffle:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:(p.Shuffle(y,T,S,C,E),this)},swapByIndex:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:(p.SwapByIndex(y,T,S,C,E,P,M),this)},tileToWorldX:function(y,T,S){return S=this.getLayer(S),S===null?null:this._convert.TileToWorldX(y,T,S)},tileToWorldY:function(y,T,S){return S=this.getLayer(S),S===null?null:this._convert.TileToWorldY(y,T,S)},tileToWorldXY:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(y,T,S,C,E)},weightedRandomize:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:(p.WeightedRandomize(T,S,C,E,y,P),this)},worldToTileX:function(y,T,S,C){return C=this.getLayer(C),C===null?null:this._convert.WorldToTileX(y,T,S,C)},worldToTileY:function(y,T,S,C){return C=this.getLayer(C),C===null?null:this._convert.WorldToTileY(y,T,S,C)},worldToTileXY:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileXY(y,T,S,C,E,P)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(11),n=i(15),h=i(251),u=i(1456),l=new s({Extends:n,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Origin,a.Pipeline,a.Transform,a.Visible,a.ScrollFactor,u],initialize:function(c,d,v,p,g,m){n.call(this,c,"TilemapLayer"),this.isTilemap=!0,this.tilemap=d,this.layerIndex=v,this.layer=d.layers[v],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=h.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(g,m),this.setOrigin(),this.setSize(d.tileWidth*this.layer.width,d.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(f){var c=[],d=[],v=this.tilemap;Array.isArray(f)||(f=[f]);for(var p=0;p<f.length;p++){var g=f[p];if(typeof g=="string"&&(g=v.getTileset(g)),g){d.push(g);for(var m=g.firstgid,x=0;x<g.total;x++)c[m+x]=g}}this.gidMap=c,this.tileset=d},setRenderOrder:function(f){var c=["right-down","left-down","right-up","left-up"];return typeof f=="string"&&(f=c.indexOf(f)),f>=0&&f<4&&(this._renderOrder=f),this},calculateFacesAt:function(f,c){return h.CalculateFacesAt(f,c,this.layer),this},calculateFacesWithin:function(f,c,d,v){return h.CalculateFacesWithin(f,c,d,v,this.layer),this},createFromTiles:function(f,c,d,v,p){return h.CreateFromTiles(f,c,d,v,p,this.layer)},cull:function(f){return this.cullCallback(this.layer,f,this.culledTiles,this._renderOrder)},copy:function(f,c,d,v,p,g,m){return h.Copy(f,c,d,v,p,g,m,this.layer),this},fill:function(f,c,d,v,p,g){return h.Fill(f,c,d,v,p,g,this.layer),this},filterTiles:function(f,c,d,v,p,g,m){return h.FilterTiles(f,c,d,v,p,g,m,this.layer)},findByIndex:function(f,c,d){return h.FindByIndex(f,c,d,this.layer)},findTile:function(f,c,d,v,p,g,m){return h.FindTile(f,c,d,v,p,g,m,this.layer)},forEachTile:function(f,c,d,v,p,g,m){return h.ForEachTile(f,c,d,v,p,g,m,this.layer),this},getTileAt:function(f,c,d){return h.GetTileAt(f,c,d,this.layer)},getTileAtWorldXY:function(f,c,d,v){return h.GetTileAtWorldXY(f,c,d,v,this.layer)},getTilesWithin:function(f,c,d,v,p){return h.GetTilesWithin(f,c,d,v,p,this.layer)},getTilesWithinShape:function(f,c,d){return h.GetTilesWithinShape(f,c,d,this.layer)},getTilesWithinWorldXY:function(f,c,d,v,p,g){return h.GetTilesWithinWorldXY(f,c,d,v,p,g,this.layer)},hasTileAt:function(f,c){return h.HasTileAt(f,c,this.layer)},hasTileAtWorldXY:function(f,c,d){return h.HasTileAtWorldXY(f,c,d,this.layer)},putTileAt:function(f,c,d,v){return h.PutTileAt(f,c,d,v,this.layer)},putTileAtWorldXY:function(f,c,d,v,p){return h.PutTileAtWorldXY(f,c,d,v,p,this.layer)},putTilesAt:function(f,c,d,v){return h.PutTilesAt(f,c,d,v,this.layer),this},randomize:function(f,c,d,v,p){return h.Randomize(f,c,d,v,p,this.layer),this},removeTileAt:function(f,c,d,v){return h.RemoveTileAt(f,c,d,v,this.layer)},removeTileAtWorldXY:function(f,c,d,v,p){return h.RemoveTileAtWorldXY(f,c,d,v,p,this.layer)},renderDebug:function(f,c){return h.RenderDebug(f,c,this.layer),this},replaceByIndex:function(f,c,d,v,p,g){return h.ReplaceByIndex(f,c,d,v,p,g,this.layer),this},setSkipCull:function(f){return f===void 0&&(f=!0),this.skipCull=f,this},setCullPadding:function(f,c){return f===void 0&&(f=1),c===void 0&&(c=1),this.cullPaddingX=f,this.cullPaddingY=c,this},setCollision:function(f,c,d,v){return h.SetCollision(f,c,d,this.layer,v),this},setCollisionBetween:function(f,c,d,v){return h.SetCollisionBetween(f,c,d,v,this.layer),this},setCollisionByProperty:function(f,c,d){return h.SetCollisionByProperty(f,c,d,this.layer),this},setCollisionByExclusion:function(f,c,d){return h.SetCollisionByExclusion(f,c,d,this.layer),this},setCollisionFromCollisionGroup:function(f,c){return h.SetCollisionFromCollisionGroup(f,c,this.layer),this},setTileIndexCallback:function(f,c,d){return h.SetTileIndexCallback(f,c,d,this.layer),this},setTileLocationCallback:function(f,c,d,v,p,g){return h.SetTileLocationCallback(f,c,d,v,p,g,this.layer),this},shuffle:function(f,c,d,v){return h.Shuffle(f,c,d,v,this.layer),this},swapByIndex:function(f,c,d,v,p,g){return h.SwapByIndex(f,c,d,v,p,g,this.layer),this},tileToWorldX:function(f,c){return this.tilemap.tileToWorldX(f,c,this)},tileToWorldY:function(f,c){return this.tilemap.tileToWorldY(f,c,this)},tileToWorldXY:function(f,c,d,v){return this.tilemap.tileToWorldXY(f,c,d,v,this)},weightedRandomize:function(f,c,d,v,p){return h.WeightedRandomize(c,d,v,p,f,this.layer),this},worldToTileX:function(f,c,d){return this.tilemap.worldToTileX(f,c,d,this)},worldToTileY:function(f,c,d){return this.tilemap.worldToTileY(f,c,d,this)},worldToTileXY:function(f,c,d,v,p){return this.tilemap.worldToTileXY(f,c,d,v,p,this)},destroy:function(f){f===void 0&&(f=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),f&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],n.prototype.destroy.call(this))}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(2),n=new s({initialize:function(u){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(u)},reset:function(h){return this.delay=a(h,"delay",0),this.repeat=a(h,"repeat",0),this.loop=a(h,"loop",!1),this.callback=a(h,"callback",void 0),this.callbackScope=a(h,"callbackScope",this.callback),this.args=a(h,"args",[]),this.timeScale=a(h,"timeScale",1),this.startAt=a(h,"startAt",0),this.paused=a(h,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var h=this.delay+this.delay*this.repeat,u=this.elapsed+this.delay*(this.repeat-this.repeatCount);return u/h}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(h){h===void 0&&(h=!1),this.elapsed=this.delay,this.hasDispatched=!h,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1465),a=function(n){var h,u=[];if(n.hasOwnProperty("props"))for(h in n.props)h.substr(0,1)!=="_"&&u.push({key:h,value:n.props[h]});else for(h in n)s.indexOf(h)===-1&&h.substr(0,1)!=="_"&&u.push({key:h,value:n[h]});return u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),a=function(n){var h=s(n,"tweens",null);return h===null?[]:(typeof h=="function"&&(h=h.call()),Array.isArray(h)||(h=[h]),h)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(265),a=i(13),n=i(99),h=i(80),u=i(162),l=i(6),f=i(264),c=i(266),d=i(268),v=function(p,g,m){m===void 0&&(m=s);var x=l(g,"from",0),y=l(g,"to",1),T=[{value:x}],S=u(g,"delay",m.delay),C=u(g,"duration",m.duration),E=l(g,"easeParams",m.easeParams),P=h(l(g,"ease",m.ease),E),M=u(g,"hold",m.hold),R=u(g,"repeat",m.repeat),A=u(g,"repeatDelay",m.repeatDelay),O=n(g,"yoyo",m.yoyo),F=[],b=f("value",y),w=d(T[0],0,"value",b.getEnd,b.getStart,b.getActive,P,S,C,O,M,R,A,!1,!1);w.start=x,w.current=x,w.to=y,F.push(w);var N=new c(p,F,T);N.offset=a(g,"offset",null),N.completeDelay=a(g,"completeDelay",0),N.loop=Math.round(a(g,"loop",0)),N.loopDelay=Math.round(a(g,"loopDelay",0)),N.paused=n(g,"paused",!1),N.useFrames=n(g,"useFrames",!1);for(var V=l(g,"callbackScope",N),W=[N,null],U=c.TYPES,D=0;D<U.length;D++){var L=U[D],I=l(g,L,!1);if(I){var B=l(g,L+"Scope",V),G=l(g,L+"Params",[]);N.setCallback(L,I,W.concat(G),B)}}return N};e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(80),a=i(6),n=i(14),h=function(u,l){l===void 0&&(l={});var f,c=a(l,"start",0),d=a(l,"ease",null),v=a(l,"grid",null),p=a(l,"from",0),g=p==="first",m=p==="center",x=p==="last",y=typeof p=="number",T=Array.isArray(u),S=parseFloat(T?u[0]:u),C=T?parseFloat(u[1]):0,E=Math.max(S,C);if(T&&(c+=S),v){var P=v[0],M=v[1],R=0,A=0,O=0,F=0,b=[];x?(R=P-1,A=M-1):y?(R=p%P,A=Math.floor(p/P)):m&&(R=(P-1)/2,A=(M-1)/2);for(var w=n.MIN_SAFE_INTEGER,N=0;N<M;N++){b[N]=[];for(var V=0;V<P;V++){O=R-V,F=A-N;var W=Math.sqrt(O*O+F*F);W>w&&(w=W),b[N][V]=W}}}var U=d?s(d):null;return v?f=function(D,L,I,B){var G=0,z=B%P,Y=Math.floor(B/P);z>=0&&z<P&&Y>=0&&Y<M&&(G=b[Y][z]);var X;if(T){var H=C-S;U?X=G/w*H*U(G/w):X=G/w*H}else U?X=G*S*U(G/w):X=G*S;return X+c}:f=function(D,L,I,B,G){G--;var z;g?z=B:m?z=Math.abs(G/2-B):x?z=G-B:y&&(z=Math.abs(p-B));var Y;if(T){var X;m?X=(C-S)/G*(z*2):X=(C-S)/G*z,U?Y=X*U(z/G):Y=X}else U?Y=G*E*U(z/G):Y=z*S;return Y+c},f};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(77),a=i(265),n=i(13),h=i(99),u=i(80),l=i(162),f=i(263),c=i(584),d=i(6),v=i(588),p=i(163),g=function(m,x){var y=new v(m);y.completeDelay=n(x,"completeDelay",0),y.loop=Math.round(n(x,"loop",0)),y.loopDelay=Math.round(n(x,"loopDelay",0)),y.paused=h(x,"paused",!1),y.useFrames=h(x,"useFrames",!1);var T=d(x,"callbackScope",y),S=[y],C=d(x,"onStart",!1);if(C){var E=d(x,"onStartScope",T),P=d(x,"onStartParams",[]);y.setCallback("onStart",C,S.concat(P),E)}var M=d(x,"onUpdate",!1);if(M){var R=d(x,"onUpdateScope",T),A=d(x,"onUpdateParams",[]);y.setCallback("onUpdate",M,S.concat(A),R)}var O=d(x,"onLoop",!1);if(O){var F=d(x,"onLoopScope",T),b=d(x,"onLoopParams",[]);y.setCallback("onLoop",O,S.concat(b),F)}var w=d(x,"onYoyo",!1);if(w){var N=d(x,"onYoyoScope",T),V=d(x,"onYoyoParams",[]);y.setCallback("onYoyo",w,S.concat(null,V),N)}var W=d(x,"onComplete",!1);if(W){var U=d(x,"onCompleteScope",T),D=d(x,"onCompleteParams",[]);y.setCallback("onComplete",W,S.concat(D),U)}var L=c(x);if(L.length===0)return y.paused=!0,y;var I=s(a);I.targets=f(x);var B=n(x,"totalDuration",0);B>0?I.duration=Math.floor(B/L.length):I.duration=l(x,"duration",I.duration),I.delay=l(x,"delay",I.delay),I.easeParams=d(x,"easeParams",I.easeParams),I.ease=u(d(x,"ease",I.ease),I.easeParams),I.hold=l(x,"hold",I.hold),I.repeat=l(x,"repeat",I.repeat),I.repeatDelay=l(x,"repeatDelay",I.repeatDelay),I.yoyo=h(x,"yoyo",I.yoyo),I.flipX=h(x,"flipX",I.flipX),I.flipY=h(x,"flipY",I.flipY);for(var G=0;G<L.length;G++)y.queue(p(y,L[G],I));return y};e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(9),n=i(267),h=i(163),u=i(100),l=new s({Extends:a,initialize:function(c){a.call(this),this.manager=c,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=u.PENDING_ADD,this._pausedState=u.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(f,c){this.emit(f,this),c&&c.func.apply(c.scope,c.params)},setTimeScale:function(f){return this.timeScale=f,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===u.ACTIVE},add:function(f){return this.queue(h(this,f))},queue:function(f){return this.isPlaying()||(f.parent=this,f.parentIsTimeline=!0,this.data.push(f),this.totalData=this.data.length),this},hasOffset:function(f){return f.offset!==null},isOffsetAbsolute:function(f){return typeof f=="number"},isOffsetRelative:function(f){var c=typeof f;if(c==="string"){var d=f[0];if(d==="-"||d==="+")return!0}return!1},getRelativeOffset:function(f,c){var d=f[0],v=parseFloat(f.substr(2)),p=c;switch(d){case"+":p+=v;break;case"-":p-=v;break}return Math.max(0,p)},calcDuration:function(){for(var f=0,c=0,d=0,v=0;v<this.totalData;v++){var p=this.data[v];p.init(),this.hasOffset(p)?this.isOffsetAbsolute(p.offset)?(p.calculatedOffset=p.offset,p.offset===0&&(d=0)):this.isOffsetRelative(p.offset)&&(p.calculatedOffset=this.getRelativeOffset(p.offset,f)):p.calculatedOffset=d,f=p.totalDuration+p.calculatedOffset,c+=p.totalDuration,d+=p.totalDuration}this.duration=c,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=u.PAUSED,!1):!0},resetTweens:function(f){for(var c=0;c<this.totalData;c++){var d=this.data[c];d.play(f)}},setCallback:function(f,c,d,v){return l.TYPES.indexOf(f)!==-1&&(this.callbacks[f]={func:c,scope:v,params:d}),this},makeActive:function(f){return this.manager.makeActive(f)},play:function(){if(this.state!==u.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=u.ACTIVE;this.dispatchTimelineEvent(n.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=u.LOOP_DELAY):(this.state=u.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=u.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=u.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(f,c){if(this.state!==u.PAUSED){switch(this.useFrames&&(c=1*this.manager.timeScale),c*=this.timeScale,this.elapsed+=c,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=c,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case u.ACTIVE:for(var d=this.totalData,v=0;v<this.totalData;v++){var p=this.data[v];p.update(f,c)&&d--}this.dispatchTimelineEvent(n.TIMELINE_UPDATE,this.callbacks.onUpdate),d===0&&this.nextState();break;case u.LOOP_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=u.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop));break;case u.COMPLETE_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=u.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===u.PENDING_REMOVE}},stop:function(){this.state=u.PENDING_REMOVE},pause:function(){if(this.state!==u.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=u.PAUSED,this.emit(n.TIMELINE_PAUSE,this),this},resume:function(){return this.state===u.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(n.TIMELINE_RESUME,this)),this},hasTarget:function(f){for(var c=0;c<this.data.length;c++)if(this.data[c].hasTarget(f))return!0;return!1},destroy:function(){for(var f=0;f<this.data.length;f++)this.data[f].stop()}});l.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],e.exports=l},function(e,r,i){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),a=i(41),n=i(32),h=i(2),u=i(64),l={parseBody:function(f,c,d,v){v===void 0&&(v={});for(var p=h(d,"fixtures",[]),g=[],m=0;m<p.length;m++)for(var x=this.parseFixture(p[m]),y=0;y<x.length;y++)g.push(x[y]);var T=n.clone(d,!0);n.extend(T,v,!0),delete T.fixtures,delete T.type;var S=a.create(T);return a.setParts(S,g),a.setPosition(S,{x:f,y:c}),S},parseFixture:function(f){var c=n.extend({},!1,f);delete c.circle,delete c.vertices;var d;if(f.circle){var v=h(f.circle,"x"),p=h(f.circle,"y"),g=h(f.circle,"radius");d=[s.circle(v,p,g,c)]}else f.vertices&&(d=this.parseVertices(f.vertices,c));return d},parseVertices:function(f,c){c===void 0&&(c={});for(var d=[],v=0;v<f.length;v++)u.clockwiseSort(f[v]),d.push(a.create(n.extend({position:u.centre(f[v]),vertices:f[v]},c)));return s.flagCoincidentParts(d)}};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),a=i(41),n={parseBody:function(h,u,l,f){f===void 0&&(f={});var c,d=l.vertices;if(d.length===1)f.vertices=d[0],c=a.create(f),s.flagCoincidentParts(c.parts);else{for(var v=[],p=0;p<d.length;p++){var g=a.create({vertices:d[p]});v.push(g)}s.flagCoincidentParts(v),f.parts=v,c=a.create(f)}return c.label=l.label,a.setPosition(c,{x:h,y:u}),c}};e.exports=n},function(e,r,i){var s={};e.exports=s;var a=i(118),n=i(128),h=i(32),u=i(41),l=i(86);(function(){s.stack=function(f,c,d,v,p,g,m){for(var x=a.create({label:"Stack"}),y=f,T=c,S,C=0,E=0;E<v;E++){for(var P=0,M=0;M<d;M++){var R=m(y,T,M,E,S,C);if(R){var A=R.bounds.max.y-R.bounds.min.y,O=R.bounds.max.x-R.bounds.min.x;A>P&&(P=A),u.translate(R,{x:O*.5,y:A*.5}),y=R.bounds.max.x+p,a.addBody(x,R),S=R,C+=1}else y+=p}T+=P+g,y=f}return x},s.chain=function(f,c,d,v,p,g){for(var m=f.bodies,x=1;x<m.length;x++){var y=m[x-1],T=m[x],S=y.bounds.max.y-y.bounds.min.y,C=y.bounds.max.x-y.bounds.min.x,E=T.bounds.max.y-T.bounds.min.y,P=T.bounds.max.x-T.bounds.min.x,M={bodyA:y,pointA:{x:C*c,y:S*d},bodyB:T,pointB:{x:P*v,y:E*p}},R=h.extend(M,g);a.addConstraint(f,n.create(R))}return f.label+=" Chain",f},s.mesh=function(f,c,d,v,p){var g=f.bodies,m,x,y,T,S;for(m=0;m<d;m++){for(x=1;x<c;x++)y=g[x-1+m*c],T=g[x+m*c],a.addConstraint(f,n.create(h.extend({bodyA:y,bodyB:T},p)));if(m>0)for(x=0;x<c;x++)y=g[x+(m-1)*c],T=g[x+m*c],a.addConstraint(f,n.create(h.extend({bodyA:y,bodyB:T},p))),v&&x>0&&(S=g[x-1+(m-1)*c],a.addConstraint(f,n.create(h.extend({bodyA:S,bodyB:T},p)))),v&&x<c-1&&(S=g[x+1+(m-1)*c],a.addConstraint(f,n.create(h.extend({bodyA:S,bodyB:T},p))))}return f.label+=" Mesh",f},s.pyramid=function(f,c,d,v,p,g,m){return s.stack(f,c,d,v,p,g,function(x,y,T,S,C,E){var P=Math.min(v,Math.ceil(d/2)),M=C?C.bounds.max.x-C.bounds.min.x:0;if(!(S>P)){S=P-S;var R=S,A=d-1-S;if(!(T<R||T>A)){E===1&&u.translate(C,{x:(T+(d%2===1?1:-1))*M,y:0});var O=C?T*M:0;return m(f+O+T*p,y,T,S,C,E)}}})},s.newtonsCradle=function(f,c,d,v,p){for(var g=a.create({label:"Newtons Cradle"}),m=0;m<d;m++){var x=1.9,y=l.circle(f+m*(v*x),c+p,v,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=n.create({pointA:{x:f+m*(v*x),y:c},bodyB:y});a.addBody(g,y),a.addConstraint(g,T)}return g},s.car=function(f,c,d,v,p){var g=u.nextGroup(!0),m=20,x=-d*.5+m,y=d*.5-m,T=0,S=a.create({label:"Car"}),C=l.rectangle(f,c,d,v,{collisionFilter:{group:g},chamfer:{radius:v*.5},density:2e-4}),E=l.circle(f+x,c+T,p,{collisionFilter:{group:g},friction:.8}),P=l.circle(f+y,c+T,p,{collisionFilter:{group:g},friction:.8}),M=n.create({bodyB:C,pointB:{x,y:T},bodyA:E,stiffness:1,length:0}),R=n.create({bodyB:C,pointB:{x:y,y:T},bodyA:P,stiffness:1,length:0});return a.addBody(S,C),a.addBody(S,E),a.addBody(S,P),a.addConstraint(S,M),a.addConstraint(S,R),S},s.softBody=function(f,c,d,v,p,g,m,x,y,T){y=h.extend({inertia:1/0},y),T=h.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var S=s.stack(f,c,d,v,p,g,function(C,E){return l.circle(C,E,x,y)});return s.mesh(S,d,v,m,T),S.label="Soft Body",S}})()},function(e,r,i){var s={};e.exports=s,i(84);var a=i(32);(function(){s.pathToVertices=function(n,h){typeof window!="undefined"&&!("SVGPathSeg"in window)&&a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,l,f,c,d,v,p,g,m,x,y=[],T,S,C=0,E=0,P=0;h=h||15;var M=function(A,O,F){var b=F%2===1&&F>1;if(!m||A!=m.x||O!=m.y){m&&b?(T=m.x,S=m.y):(T=0,S=0);var w={x:T+A,y:S+O};(b||!m)&&(m=w),y.push(w),E=T+A,P=S+O}},R=function(A){var O=A.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":E=A.x,P=A.y;break;case"H":E=A.x;break;case"V":P=A.y;break}M(E,P,A.pathSegType)}};for(s._svgPathToAbsolute(n),f=n.getTotalLength(),v=[],u=0;u<n.pathSegList.numberOfItems;u+=1)v.push(n.pathSegList.getItem(u));for(p=v.concat();C<f;){if(x=n.getPathSegAtLength(C),d=v[x],d!=g){for(;p.length&&p[0]!=d;)R(p.shift());g=d}switch(d.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=n.getPointAtLength(C),M(c.x,c.y,0);break}C+=h}for(u=0,l=p.length;u<l;++u)R(p[u]);return y},s._svgPathToAbsolute=function(n){for(var h,u,l,f,c,d,v=n.pathSegList,p=0,g=0,m=v.numberOfItems,x=0;x<m;++x){var y=v.getItem(x),T=y.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in y&&(p=y.x),"y"in y&&(g=y.y);else switch("x1"in y&&(l=p+y.x1),"x2"in y&&(c=p+y.x2),"y1"in y&&(f=g+y.y1),"y2"in y&&(d=g+y.y2),"x"in y&&(p+=y.x),"y"in y&&(g+=y.y),T){case"m":v.replaceItem(n.createSVGPathSegMovetoAbs(p,g),x);break;case"l":v.replaceItem(n.createSVGPathSegLinetoAbs(p,g),x);break;case"h":v.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(p),x);break;case"v":v.replaceItem(n.createSVGPathSegLinetoVerticalAbs(g),x);break;case"c":v.replaceItem(n.createSVGPathSegCurvetoCubicAbs(p,g,l,f,c,d),x);break;case"s":v.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(p,g,c,d),x);break;case"q":v.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(p,g,l,f),x);break;case"t":v.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(p,g),x);break;case"a":v.replaceItem(n.createSVGPathSegArcAbs(p,g,y.r1,y.r2,y.angle,y.largeArcFlag,y.sweepFlag),x);break;case"z":case"Z":p=h,g=u;break}(T=="M"||T=="m")&&(h=p,u=g)}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),a=i(41),n=i(0),h=i(249),u=i(9),l=i(2),f=i(126),c=i(64),d=new n({Extends:u,Mixins:[h.Bounce,h.Collision,h.Friction,h.Gravity,h.Mass,h.Sensor,h.Sleep,h.Static],initialize:function(p,g,m){u.call(this),this.tile=g,this.world=p,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var x=l(m,"body",null),y=l(m,"addToWorld",!0);if(x)this.setBody(x,y);else{var T=g.getCollisionGroup(),S=l(T,"objects",[]);S.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}},setFromTileRectangle:function(v){v===void 0&&(v={}),f(v,"isStatic")||(v.isStatic=!0),f(v,"addToWorld")||(v.addToWorld=!0);var p=this.tile.getBounds(),g=p.x+p.width/2,m=p.y+p.height/2,x=s.rectangle(g,m,p.width,p.height,v);return this.setBody(x,v.addToWorld),this},setFromTileCollision:function(v){v===void 0&&(v={}),f(v,"isStatic")||(v.isStatic=!0),f(v,"addToWorld")||(v.addToWorld=!0);for(var p=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),x=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=l(y,"objects",[]),S=[],C=0;C<T.length;C++){var E=T[C],P=m+E.x*p,M=x+E.y*g,R=E.width*p,A=E.height*g,O=null;if(E.rectangle)O=s.rectangle(P+R/2,M+A/2,R,A,v);else if(E.ellipse)O=s.circle(P+R/2,M+A/2,R/2,v);else if(E.polygon||E.polyline){var F=E.polygon?E.polygon:E.polyline,b=F.map(function(V){return{x:V.x*p,y:V.y*g}}),w=c.create(b),N=c.centre(w);P+=N.x,M+=N.y,O=s.fromVertices(P,M,w,v)}O&&S.push(O)}return S.length===1?this.setBody(S[0],v.addToWorld):S.length>1&&(v.parts=S,this.setBody(a.create(v),v.addToWorld)),this},setBody:function(v,p){return p===void 0&&(p=!0),this.body&&this.removeBody(),this.body=v,this.body.gameObject=this,p&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1399);s.Body=i(41),s.Composite=i(118),s.World=i(596),s.Detector=i(273),s.Grid=i(597),s.Pairs=i(598),s.Pair=i(250),s.Query=i(1400),s.Resolver=i(599),s.SAT=i(274),s.Constraint=i(128),s.Common=i(32),s.Engine=i(1401),s.Events=i(166),s.Sleeping=i(165),s.Plugin=i(595),s.Bodies=i(86),s.Composites=i(591),s.Axes=i(271),s.Bounds=i(84),s.Svg=i(592),s.Vector=i(83),s.Vertices=i(64),s.World.add=s.Composite.add,s.World.remove=s.Composite.remove,s.World.addComposite=s.Composite.addComposite,s.World.addBody=s.Composite.addBody,s.World.addConstraint=s.Composite.addConstraint,s.World.clear=s.Composite.clear,e.exports=s},function(e,r,i){var s={};e.exports=s;var a=i(32);(function(){s._registry={},s.register=function(n){if(s.isPlugin(n)||a.warn("Plugin.register:",s.toString(n),"does not implement all required fields."),n.name in s._registry){var h=s._registry[n.name],u=s.versionParse(n.version).number,l=s.versionParse(h.version).number;u>l?(a.warn("Plugin.register:",s.toString(h),"was upgraded to",s.toString(n)),s._registry[n.name]=n):u<l?a.warn("Plugin.register:",s.toString(h),"can not be downgraded to",s.toString(n)):n!==h&&a.warn("Plugin.register:",s.toString(n),"is already registered to different plugin object")}else s._registry[n.name]=n;return n},s.resolve=function(n){return s._registry[s.dependencyParse(n).name]},s.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},s.isPlugin=function(n){return n&&n.name&&n.version&&n.install},s.isUsed=function(n,h){return n.used.indexOf(h)>-1},s.isFor=function(n,h){var u=n.for&&s.dependencyParse(n.for);return!n.for||h.name===u.name&&s.versionSatisfies(h.version,u.range)},s.use=function(n,h){if(n.uses=(n.uses||[]).concat(h||[]),n.uses.length===0){a.warn("Plugin.use:",s.toString(n),"does not specify any dependencies to install.");return}for(var u=s.dependencies(n),l=a.topologicalSort(u),f=[],c=0;c<l.length;c+=1)if(l[c]!==n.name){var d=s.resolve(l[c]);if(!d){f.push("\u274C "+l[c]);continue}s.isUsed(n,d.name)||(s.isFor(d,n)||(a.warn("Plugin.use:",s.toString(d),"is for",d.for,"but installed on",s.toString(n)+"."),d._warned=!0),d.install?d.install(n):(a.warn("Plugin.use:",s.toString(d),"does not specify an install function."),d._warned=!0),d._warned?(f.push("\u{1F536} "+s.toString(d)),delete d._warned):f.push("\u2705 "+s.toString(d)),n.used.push(d.name))}f.length>0&&!d.silent&&a.info(f.join("  "))},s.dependencies=function(n,h){var u=s.dependencyParse(n),l=u.name;if(h=h||{},!(l in h)){n=s.resolve(n)||n,h[l]=a.map(n.uses||[],function(c){s.isPlugin(c)&&s.register(c);var d=s.dependencyParse(c),v=s.resolve(c);return v&&!s.versionSatisfies(v.version,d.range)?(a.warn("Plugin.dependencies:",s.toString(v),"does not satisfy",s.toString(d),"used by",s.toString(u)+"."),v._warned=!0,n._warned=!0):v||(a.warn("Plugin.dependencies:",s.toString(c),"used by",s.toString(u),"could not be resolved."),n._warned=!0),d.name});for(var f=0;f<h[l].length;f+=1)s.dependencies(h[l][f],h);return h}},s.dependencyParse=function(n){if(a.isString(n)){var h=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return h.test(n)||a.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},s.versionParse=function(n){var h=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;h.test(n)||a.warn("Plugin.versionParse:",n,"is not a valid version or range.");var u=n.split("-");n=u[0];var l=isNaN(Number(n[0])),f=l?n.substr(1):n,c=a.map(f.split("."),function(d){return Number(d)});return{isRange:l,version:f,range:n,operator:l?n[0]:"",parts:c,prerelease:u[1],number:c[0]*1e8+c[1]*1e4+c[2]}},s.versionSatisfies=function(n,h){h=h||"*";var u=s.versionParse(h),l=u.parts,f=s.versionParse(n),c=f.parts;if(u.isRange){if(u.operator==="*"||n==="*")return!0;if(u.operator==="~")return c[0]===l[0]&&c[1]===l[1]&&c[2]>=l[2];if(u.operator==="^")return l[0]>0?c[0]===l[0]&&f.number>=u.number:l[1]>0?c[1]===l[1]&&c[2]>=l[2]:c[2]===l[2]}return n===h||n==="*"}})()},function(e,r,i){var s={};e.exports=s;var a=i(118);i(128);var n=i(32);(function(){s.create=function(h){var u=a.create(),l={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return n.extend(u,l,h)}})()},function(e,r,i){var s={};e.exports=s;var a=i(250),n=i(273),h=i(32);(function(){s.create=function(u){var l={controller:s,detector:n.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return h.extend(l,u)},s.update=function(u,l,f,c){var d,v,p,g=f.world,m=u.buckets,x,y,T=!1,S=f.metrics;for(S.broadphaseTests=0,d=0;d<l.length;d++){var C=l[d];if(!(C.isSleeping&&!c)&&!(C.bounds.max.x<g.bounds.min.x||C.bounds.min.x>g.bounds.max.x||C.bounds.max.y<g.bounds.min.y||C.bounds.min.y>g.bounds.max.y)){var E=s._getRegion(u,C);if(!C.region||E.id!==C.region.id||c){S.broadphaseTests+=1,(!C.region||c)&&(C.region=E);var P=s._regionUnion(E,C.region);for(v=P.startCol;v<=P.endCol;v++)for(p=P.startRow;p<=P.endRow;p++){y=s._getBucketId(v,p),x=m[y];var M=v>=E.startCol&&v<=E.endCol&&p>=E.startRow&&p<=E.endRow,R=v>=C.region.startCol&&v<=C.region.endCol&&p>=C.region.startRow&&p<=C.region.endRow;!M&&R&&R&&x&&s._bucketRemoveBody(u,x,C),(C.region===E||M&&!R||c)&&(x||(x=s._createBucket(m,y)),s._bucketAddBody(u,x,C))}C.region=E,T=!0}}}T&&(u.pairsList=s._createActivePairsList(u))},s.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},s._regionUnion=function(u,l){var f=Math.min(u.startCol,l.startCol),c=Math.max(u.endCol,l.endCol),d=Math.min(u.startRow,l.startRow),v=Math.max(u.endRow,l.endRow);return s._createRegion(f,c,d,v)},s._getRegion=function(u,l){var f=l.bounds,c=Math.floor(f.min.x/u.bucketWidth),d=Math.floor(f.max.x/u.bucketWidth),v=Math.floor(f.min.y/u.bucketHeight),p=Math.floor(f.max.y/u.bucketHeight);return s._createRegion(c,d,v,p)},s._createRegion=function(u,l,f,c){return{id:u+","+l+","+f+","+c,startCol:u,endCol:l,startRow:f,endRow:c}},s._getBucketId=function(u,l){return"C"+u+"R"+l},s._createBucket=function(u,l){var f=u[l]=[];return f},s._bucketAddBody=function(u,l,f){for(var c=0;c<l.length;c++){var d=l[c];if(!(f.id===d.id||f.isStatic&&d.isStatic)){var v=a.id(f,d),p=u.pairs[v];p?p[2]+=1:u.pairs[v]=[f,d,1]}}l.push(f)},s._bucketRemoveBody=function(u,l,f){l.splice(l.indexOf(f),1);for(var c=0;c<l.length;c++){var d=l[c],v=a.id(f,d),p=u.pairs[v];p&&(p[2]-=1)}},s._createActivePairsList=function(u){var l,f,c=[];l=h.keys(u.pairs);for(var d=0;d<l.length;d++)f=u.pairs[l[d]],f[2]>0?c.push(f):delete u.pairs[l[d]];return c}})()},function(e,r,i){var s={};e.exports=s;var a=i(250),n=i(32);(function(){s._pairMaxIdleLife=1e3,s.create=function(h){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},h)},s.update=function(h,u,l){var f=h.list,c=h.table,d=h.collisionStart,v=h.collisionEnd,p=h.collisionActive,g,m,x,y;for(d.length=0,v.length=0,p.length=0,y=0;y<f.length;y++)f[y].confirmedActive=!1;for(y=0;y<u.length;y++)g=u[y],g.collided&&(m=a.id(g.bodyA,g.bodyB),x=c[m],x?(x.isActive?p.push(x):d.push(x),a.update(x,g,l),x.confirmedActive=!0):(x=a.create(g,l),c[m]=x,d.push(x),f.push(x)));for(y=0;y<f.length;y++)x=f[y],x.isActive&&!x.confirmedActive&&(a.setActive(x,!1,l),v.push(x))},s.removeOld=function(h,u){var l=h.list,f=h.table,c=[],d,v,p,g;for(g=0;g<l.length;g++){if(d=l[g],v=d.collision,v.bodyA.isSleeping||v.bodyB.isSleeping){d.timeUpdated=u;continue}u-d.timeUpdated>s._pairMaxIdleLife&&c.push(g)}for(g=0;g<c.length;g++)p=c[g]-g,d=l[p],delete f[d.id],l.splice(p,1)},s.clear=function(h){return h.table={},h.list.length=0,h.collisionStart.length=0,h.collisionActive.length=0,h.collisionEnd.length=0,h}})()},function(e,r,i){var s={};e.exports=s;var a=i(64),n=i(83),h=i(32),u=i(84);(function(){s._restingThresh=4,s._restingThreshTangent=6,s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s.preSolvePosition=function(l){var f,c,d;for(f=0;f<l.length;f++)c=l[f],c.isActive&&(d=c.activeContacts.length,c.collision.parentA.totalContacts+=d,c.collision.parentB.totalContacts+=d)},s.solvePosition=function(l,f,c){var d,v,p,g,m,x,y,T,S,C,E,P,M,R,A,O,F=c*s._positionDampen;for(d=0;d<f.length;d++){var b=f[d];b.previousPositionImpulse.x=b.positionImpulse.x,b.previousPositionImpulse.y=b.positionImpulse.y}for(d=0;d<l.length;d++)g=l[d],!(!g.isActive||g.isSensor)&&(m=g.collision,x=m.parentA,y=m.parentB,T=m.normal,E=x.previousPositionImpulse,P=y.previousPositionImpulse,C=m.penetration,R=P.x-E.x+C.x,A=P.y-E.y+C.y,v=T.x,p=T.y,S=v*R+p*A,g.separation=S,O=(S-g.slop)*F,(x.isStatic||y.isStatic)&&(O*=2),x.isStatic||x.isSleeping||(M=O/x.totalContacts,x.positionImpulse.x+=v*M,x.positionImpulse.y+=p*M),y.isStatic||y.isSleeping||(M=O/y.totalContacts,y.positionImpulse.x-=v*M,y.positionImpulse.y-=p*M))},s.postSolvePosition=function(l){for(var f=0;f<l.length;f++){var c=l[f];if(c.totalContacts=0,c.positionImpulse.x!==0||c.positionImpulse.y!==0){for(var d=0;d<c.parts.length;d++){var v=c.parts[d];a.translate(v.vertices,c.positionImpulse),u.update(v.bounds,v.vertices,c.velocity),v.position.x+=c.positionImpulse.x,v.position.y+=c.positionImpulse.y}c.positionPrev.x+=c.positionImpulse.x,c.positionPrev.y+=c.positionImpulse.y,n.dot(c.positionImpulse,c.velocity)<0?(c.positionImpulse.x=0,c.positionImpulse.y=0):(c.positionImpulse.x*=s._positionWarming,c.positionImpulse.y*=s._positionWarming)}}},s.preSolveVelocity=function(l){var f,c,d,v,p,g,m,x,y,T,S,C,E,P,M=n._temp[0],R=n._temp[1];for(f=0;f<l.length;f++)if(d=l[f],!(!d.isActive||d.isSensor))for(v=d.activeContacts,p=d.collision,g=p.parentA,m=p.parentB,x=p.normal,y=p.tangent,c=0;c<v.length;c++)T=v[c],S=T.vertex,C=T.normalImpulse,E=T.tangentImpulse,(C!==0||E!==0)&&(M.x=x.x*C+y.x*E,M.y=x.y*C+y.y*E,g.isStatic||g.isSleeping||(P=n.sub(S,g.position,R),g.positionPrev.x+=M.x*g.inverseMass,g.positionPrev.y+=M.y*g.inverseMass,g.anglePrev+=n.cross(P,M)*g.inverseInertia),m.isStatic||m.isSleeping||(P=n.sub(S,m.position,R),m.positionPrev.x-=M.x*m.inverseMass,m.positionPrev.y-=M.y*m.inverseMass,m.anglePrev-=n.cross(P,M)*m.inverseInertia))},s.solveVelocity=function(l,f){for(var c=f*f,d=n._temp[0],v=n._temp[1],p=n._temp[2],g=n._temp[3],m=n._temp[4],x=n._temp[5],y=0;y<l.length;y++){var T=l[y];if(!(!T.isActive||T.isSensor)){var S=T.collision,C=S.parentA,E=S.parentB,P=S.normal,M=S.tangent,R=T.activeContacts,A=1/R.length;C.velocity.x=C.position.x-C.positionPrev.x,C.velocity.y=C.position.y-C.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,C.angularVelocity=C.angle-C.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var O=0;O<R.length;O++){var F=R[O],b=F.vertex,w=n.sub(b,C.position,v),N=n.sub(b,E.position,p),V=n.add(C.velocity,n.mult(n.perp(w),C.angularVelocity),g),W=n.add(E.velocity,n.mult(n.perp(N),E.angularVelocity),m),U=n.sub(V,W,x),D=n.dot(P,U),L=n.dot(M,U),I=Math.abs(L),B=h.sign(L),G=(1+T.restitution)*D,z=h.clamp(T.separation+D,0,1)*s._frictionNormalMultiplier,Y=L,X=1/0;I>T.friction*T.frictionStatic*z*c&&(X=I,Y=h.clamp(T.friction*B*c,-X,X));var H=n.cross(w,P),$=n.cross(N,P),k=A/(C.inverseMass+E.inverseMass+C.inverseInertia*H*H+E.inverseInertia*$*$);if(G*=k,Y*=k,D<0&&D*D>s._restingThresh*c)F.normalImpulse=0;else{var K=F.normalImpulse;F.normalImpulse=Math.min(F.normalImpulse+G,0),G=F.normalImpulse-K}if(L*L>s._restingThreshTangent*c)F.tangentImpulse=0;else{var Z=F.tangentImpulse;F.tangentImpulse=h.clamp(F.tangentImpulse+Y,-X,X),Y=F.tangentImpulse-Z}d.x=P.x*G+M.x*Y,d.y=P.y*G+M.y*Y,C.isStatic||C.isSleeping||(C.positionPrev.x+=d.x*C.inverseMass,C.positionPrev.y+=d.y*C.inverseMass,C.anglePrev+=n.cross(w,d)*C.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=d.x*E.inverseMass,E.positionPrev.y-=d.y*E.inverseMass,E.anglePrev-=n.cross(N,d)*E.inverseInertia)}}}}})()},function(e,r){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}e.exports=i},function(e,r,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(276),a=function(n,h,u,l){for(var f=n[0],c=1;c<n.length;c++){var d=n[c];s(d,f,h,u,l),f=d}return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),a=function(n,h,u,l,f){return s(n,"angle",h,u,l,f)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){for(var h=0;h<s.length;h++){var u=s[h];a.call(n,u)}return s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){n===void 0&&(n=0);for(var h=n;h<s.length;h++){var u=s[h],l=!0;for(var f in a)u[f]!==a[f]&&(l=!1);if(l)return u}return null};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){n===void 0&&(n=0);for(var h=n;h<s.length;h++){var u=s[h],l=!0;for(var f in a)u[f]!==a[f]&&(l=!1);if(l)return u}return null};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(289),a=i(123),n=i(2),h=i(1),u=i(129),l=new u({sys:{queueDepthSort:h,events:{once:h}}},0,0,1,1),f=function(c,d){d===void 0&&(d={});var v=d.hasOwnProperty("width"),p=d.hasOwnProperty("height"),g=n(d,"width",-1),m=n(d,"height",-1),x=n(d,"cellWidth",1),y=n(d,"cellHeight",x),T=n(d,"position",a.TOP_LEFT),S=n(d,"x",0),C=n(d,"y",0),E=0,P=0,M=g*x,R=m*y;l.setPosition(S,C),l.setSize(x,y);for(var A=0;A<c.length;A++)if(s(c[A],l,T),v&&g===-1)l.x+=x;else if(p&&m===-1)l.y+=y;else if(p&&!v){if(P+=y,l.y+=y,P===R&&(P=0,E+=x,l.y=C,l.x+=x,E===M))break}else if(E+=x,l.x+=x,E===M&&(E=0,P+=y,l.x=S,l.y+=y,P===R))break;return c};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=2,n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h,u,l,f){return h===void 0&&(h=1),u===void 0?this.alpha=h:(this._alphaTL=s(h,0,1),this._alphaTR=s(u,0,1),this._alphaBL=s(l,0,1),this._alphaBR=s(f,0,1)),this},alpha:{get:function(){return this._alpha},set:function(h){var u=s(h,0,1);this._alpha=u,this._alphaTL=u,this._alphaTR=u,this._alphaBL=u,this._alphaBR=u,u===0?this.renderFlags&=~a:this.renderFlags|=a}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(h){var u=s(h,0,1);this._alphaTL=u,u!==0&&(this.renderFlags|=a)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(h){var u=s(h,0,1);this._alphaTR=u,u!==0&&(this.renderFlags|=a)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(h){var u=s(h,0,1);this._alphaBL=u,u!==0&&(this.renderFlags|=a)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(h){var u=s(h,0,1);this._alphaBR=u,u!==0&&(this.renderFlags|=a)}}};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}},setSize:function(s,a){return this.width=s,this.height=a,this},setDisplaySize:function(s,a){return this.displayWidth=s,this.displayHeight=a,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={texture:null,frame:null,isCropped:!1,setCrop:function(s,a,n,h){if(s===void 0)this.isCropped=!1;else if(this.frame){if(typeof s=="number")this.frame.setCropUVs(this._crop,s,a,n,h,this.flipX,this.flipY);else{var u=s;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(s){return this.flipX=s,this},setFlipY:function(s){return this.flipY=s,this},setFlip:function(s,a){return this.flipX=s,this.flipY=a,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=i(308),n=i(3),h={prepareBoundsOutput:function(u,l){if(l===void 0&&(l=!1),this.rotation!==0&&a(u,this.x,this.y,this.rotation),l&&this.parentContainer){var f=this.parentContainer.getBoundsTransformMatrix();f.transformPoint(u.x,u.y,u)}return u},getCenter:function(u){return u===void 0&&(u=new n),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,u},getTopLeft:function(u,l){return u||(u=new n),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,l)},getTopCenter:function(u,l){return u||(u=new n),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,l)},getTopRight:function(u,l){return u||(u=new n),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,l)},getLeftCenter:function(u,l){return u||(u=new n),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,l)},getRightCenter:function(u,l){return u||(u=new n),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,l)},getBottomLeft:function(u,l){return u||(u=new n),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,l)},getBottomCenter:function(u,l){return u||(u=new n),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,l)},getBottomRight:function(u,l){return u||(u=new n),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,l)},getBounds:function(u){u===void 0&&(u=new s);var l,f,c,d,v,p,g,m;if(this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(u),x.transformPoint(u.x,u.y,u),l=u.x,f=u.y,this.getTopRight(u),x.transformPoint(u.x,u.y,u),c=u.x,d=u.y,this.getBottomLeft(u),x.transformPoint(u.x,u.y,u),v=u.x,p=u.y,this.getBottomRight(u),x.transformPoint(u.x,u.y,u),g=u.x,m=u.y}else this.getTopLeft(u),l=u.x,f=u.y,this.getTopRight(u),c=u.x,d=u.y,this.getBottomLeft(u),v=u.x,p=u.y,this.getBottomRight(u),g=u.x,m=u.y;return u.x=Math.min(l,c,v,g),u.y=Math.min(f,d,p,m),u.width=Math.max(l,c,v,g)-u.x,u.height=Math.max(f,d,p,m)-u.y,u}};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="blur"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextlost"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextrestored"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="focus"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="hidden"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="poststep"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prestep"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="step"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="visible"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(s){this._displayOriginX=s,this.originX=s/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(s){this._displayOriginY=s,this.originY=s/this.height}},setOrigin:function(s,a){return s===void 0&&(s=.5),a===void 0&&(a=s),this.originX=s,this.originY=a,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(s,a){return s===void 0&&(s=0),a===void 0&&(a=s),this.displayOriginX=s,this.displayOriginY=a,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(36),a=i(99),n=i(6),h=i(100),u=i(3),l={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:h.PLAYING_FORWARD,setPath:function(f,c){c===void 0&&(c=this.pathConfig);var d=this.pathTween;return d&&d.isPlaying()&&d.stop(),this.path=f,c&&this.startFollow(c),this},setRotateToPath:function(f,c){return c===void 0&&(c=0),this.rotateToPath=f,this.pathRotationOffset=c,this},isFollowing:function(){var f=this.pathTween;return f&&f.isPlaying()},startFollow:function(f,c){f===void 0&&(f={}),c===void 0&&(c=0);var d=this.pathTween;d&&d.isPlaying()&&d.stop(),typeof f=="number"&&(f={duration:f}),f.from=n(f,"from",0),f.to=n(f,"to",1);var v=a(f,"positionOnPath",!1);this.rotateToPath=a(f,"rotateToPath",!1),this.pathRotationOffset=n(f,"rotationOffset",0);var p=n(f,"startAt",c);if(p&&(f.onStart=function(m){var x=m.data[0];x.progress=p,x.elapsed=x.duration*p;var y=x.ease(x.progress);x.current=x.start+(x.end-x.start)*y,x.target[x.key]=x.current}),this.pathOffset||(this.pathOffset=new u(this.x,this.y)),this.pathVector||(this.pathVector=new u),this.pathDelta||(this.pathDelta=new u),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(f),this.path.getStartPoint(this.pathOffset),v&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=h.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+s(this.pathRotationOffset)}return this.pathConfig=f,this},pauseFollow:function(){var f=this.pathTween;return f&&f.isPlaying()&&f.pause(),this},resumeFollow:function(){var f=this.pathTween;return f&&f.isPaused()&&f.resume(),this},stopFollow:function(){var f=this.pathTween;return f&&f.isPlaying()&&f.stop(),this},pathUpdate:function(){var f=this.pathTween;if(f){var c=f.data[0],d=this.pathDelta,v=this.pathVector;if(d.copy(v).negate(),c.state===h.COMPLETE){this.path.getPoint(1,v),d.add(v),v.add(this.pathOffset),this.setPosition(v.x,v.y);return}else if(c.state!==h.PLAYING_FORWARD&&c.state!==h.PLAYING_BACKWARD)return;this.path.getPoint(f.getValue(),v),d.add(v),v.add(this.pathOffset);var p=this.x,g=this.y;this.setPosition(v.x,v.y);var m=this.x-p,x=this.y-g;if(m===0&&x===0)return;if(c.state!==this._prevDirection){this._prevDirection=c.state;return}this.rotateToPath&&(this.rotation=Math.atan2(x,m)+s(this.pathRotationOffset))}}};e.exports=l},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(s){this.scaleX=s/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(s){this.scaleY=s/this.frame.realHeight}},setSizeToFrame:function(s){return s===void 0&&(s=this.frame),this.width=s.realWidth,this.height=s.realHeight,this},setSize:function(s,a){return this.width=s,this.height=a,this},setDisplaySize:function(s,a){return this.displayWidth=s,this.displayHeight=a,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=8,s={texture:null,frame:null,isCropped:!1,setTexture:function(a,n){return this.texture=this.scene.sys.textures.get(a),this.setFrame(n)},setFrame:function(a,n,h){return n===void 0&&(n=!0),h===void 0&&(h=!0),this.frame=this.texture.get(a),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~i:this.renderFlags|=i,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&h&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=8,s={texture:null,frame:null,isCropped:!1,setCrop:function(a,n,h,u){if(a===void 0)this.isCropped=!1;else if(this.frame){if(typeof a=="number")this.frame.setCropUVs(this._crop,a,n,h,u,this.flipX,this.flipY);else{var l=a;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(a,n){return this.texture=this.scene.sys.textures.get(a),this.setFrame(n)},setFrame:function(a,n,h){return n===void 0&&(n=!0),h===void 0&&(h=!0),this.frame=this.texture.get(a),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~i:this.renderFlags|=i,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&h&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(s,a,n,h){return s===void 0&&(s=16777215),a===void 0&&(a=s,n=s,h=s),this.tintTopLeft=s,this.tintTopRight=a,this.tintBottomLeft=n,this.tintBottomRight=h,this.tintFill=!1,this},setTintFill:function(s,a,n,h){return this.setTint(s,a,n,h),this.tintFill=!0,this},tint:{set:function(s){this.setTint(s,s,s,s)}},isTinted:{get:function(){var s=16777215;return this.tintFill||this.tintTopLeft!==s||this.tintTopRight!==s||this.tintBottomLeft!==s||this.tintBottomRight!==s}}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata-"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedata"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="setdata"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="created"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="error"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeked"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeking"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="timeout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="create"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postupdate"},function(e,r){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleep"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioncomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioninit"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionwake"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wake"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),a=function(n,h,u,l,f){return s(n,"alpha",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),a=function(n,h,u,l,f){return s(n,"x",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),a=function(n,h,u,l,f,c,d){return u==null&&(u=h),s(n,"x",h,l,c,d),s(n,"y",u,f,c,d)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),a=function(n,h,u,l,f){return s(n,"y",h,u,l,f)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){n===void 0&&(n=0),h===void 0&&(h=6.28);for(var u=n,l=(h-n)/s.length,f=0;f<s.length;f++)s[f].x=a.x+a.radius*Math.cos(u),s[f].y=a.y+a.radius*Math.sin(u),u+=l;return s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){n===void 0&&(n=0),h===void 0&&(h=6.28);for(var u=n,l=(h-n)/s.length,f=a.width/2,c=a.height/2,d=0;d<s.length;d++)s[d].x=a.x+f*Math.cos(u),s[d].y=a.y+c*Math.sin(u),u+=l;return s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(172),a=function(n,h){for(var u=s(h,n.length),l=0;l<n.length;l++){var f=n[l],c=u[l];f.x=c.x,f.y=c.y}return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(316),a=i(178),n=i(179),h=function(u,l,f){f===void 0&&(f=0);var c=s(l,!1,u.length);f>0?a(c,f):f<0&&n(c,Math.abs(f));for(var d=0;d<u.length;d++)u[d].x=c[d].x,u[d].y=c[d].y;return u};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(317),a=function(n,h,u){var l=s({x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},u),f=s({x1:h.x2,y1:h.y2,x2:h.x3,y2:h.y3},u),c=s({x1:h.x3,y1:h.y3,x2:h.x1,y2:h.y1},u);l.pop(),f.pop(),c.pop(),l=l.concat(f,c);for(var d=l.length/n.length,v=0,p=0;p<n.length;p++){var g=n[p],m=l[Math.floor(v)];g.x=m.x,g.y=m.y,v+=d}return n};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){for(var h=0;h<s.length;h++){var u=s[h];u.anims&&u.anims.play(a,n)}return s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(170),a=function(n,h){for(var u=0;u<n.length;u++)s(h,n[u]);return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(180),a=function(n,h){for(var u=0;u<n.length;u++)s(h,n[u]);return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(173),a=function(n,h){for(var u=0;u<n.length;u++)s(h,n[u]);return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(174),a=function(n,h){for(var u=0;u<n.length;u++)s(h,n[u]);return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(181),a=function(n,h){for(var u=0;u<n.length;u++)s(h,n[u]);return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),a=function(n,h,u,l,f){return s(n,"rotation",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(182),a=i(50),n=function(h,u,l){for(var f=u.x,c=u.y,d=0;d<h.length;d++){var v=h[d];s(v,f,c,l,Math.max(1,a(v.x,v.y,f,c)))}return h};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(182),a=function(n,h,u,l){var f=h.x,c=h.y;if(l===0)return n;for(var d=0;d<n.length;d++)s(n[d],f,c,u,l);return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),a=function(n,h,u,l,f){return s(n,"scaleX",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),a=function(n,h,u,l,f,c,d){return u==null&&(u=h),s(n,"scaleX",h,l,c,d),s(n,"scaleY",u,f,c,d)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),a=function(n,h,u,l,f){return s(n,"scaleY",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f){return s(n,"alpha",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l){return s(n,"blendMode",h,0,u,l)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f){return s(n,"depth",h,u,l,f)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){for(var h=0;h<s.length;h++)s[h].setInteractive(a,n);return s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f,c,d){return u==null&&(u=h),s(n,"originX",h,l,c,d),s(n,"originY",u,f,c,d),n.forEach(function(v){v.updateDisplayOrigin()}),n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f){return s(n,"rotation",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f,c,d){return u==null&&(u=h),s(n,"scaleX",h,l,c,d),s(n,"scaleY",u,f,c,d)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f){return s(n,"scaleX",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f){return s(n,"scaleY",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f,c,d){return u==null&&(u=h),s(n,"scrollFactorX",h,l,c,d),s(n,"scrollFactorY",u,f,c,d)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f){return s(n,"scrollFactorX",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f){return s(n,"scrollFactorY",h,u,l,f)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u){for(var l=0;l<s.length;l++)s[l].setTint(a,n,h,u);return s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l){return s(n,"visible",h,0,u,l)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f){return s(n,"x",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f,c,d){return u==null&&(u=h),s(n,"x",h,l,c,d),s(n,"y",u,f,c,d)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),a=function(n,h,u,l,f){return s(n,"y",h,u,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),a=function(n,h,u,l,f){l===void 0&&(l=0),f===void 0&&(f=new s);var c,d;if(n.length>1){var v,p,g,m;if(l===0){var x=n.length-1;for(c=n[x].x,d=n[x].y,v=x-1;v>=0;v--)m=n[v],p=m.x,g=m.y,m.x=c,m.y=d,c=p,d=g;n[x].x=h,n[x].y=u}else{for(c=n[0].x,d=n[0].y,v=1;v<n.length;v++)m=n[v],p=m.x,g=m.y,m.x=c,m.y=d,c=p,d=g;n[0].x=h,n[0].y=u}}else c=n[0].x,d=n[0].y,n[0].x=h,n[0].y=u;return f.x=c,f.y=d,f};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(131),a=function(n){return s(n)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(183),a=function(n,h,u,l,f){f===void 0&&(f=!1);var c=Math.abs(l-u)/n.length,d;if(f)for(d=0;d<n.length;d++)n[d][h]+=s(d*c,u,l);else for(d=0;d<n.length;d++)n[d][h]=s(d*c,u,l);return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(184),a=function(n,h,u,l,f){f===void 0&&(f=!1);var c=Math.abs(l-u)/n.length,d;if(f)for(d=0;d<n.length;d++)n[d][h]+=s(d*c,u,l);else for(d=0;d<n.length;d++)n[d][h]=s(d*c,u,l);return n};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u){u===void 0&&(u=!1);var l=Math.abs(h-n)/s.length,f;if(u)for(f=0;f<s.length;f++)s[f][a]+=f*l+n;else for(f=0;f<s.length;f++)s[f][a]=f*l+n;return s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var a=0;a<s.length;a++)s[a].visible=!s[a].visible;return s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(68),a=function(n,h,u){u===void 0&&(u=0);for(var l=0;l<n.length;l++){var f=n[l];f.x=s(f.x,h.left-u,h.right+u),f.y=s(f.y,h.top-u,h.bottom+u)}return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Animation:i(185),AnimationFrame:i(319),AnimationManager:i(321),AnimationState:i(164),Events:i(132)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete-"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrepeat"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrestart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BaseCache:i(323),CacheManager:i(325),Events:i(324)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Controls:i(739),Scene2D:i(742)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FixedKeyControl:i(740),SmoothedKeyControl:i(741)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(6),n=new s({initialize:function(u){this.camera=a(u,"camera",null),this.left=a(u,"left",null),this.right=a(u,"right",null),this.up=a(u,"up",null),this.down=a(u,"down",null),this.zoomIn=a(u,"zoomIn",null),this.zoomOut=a(u,"zoomOut",null),this.zoomSpeed=a(u,"zoomSpeed",.01),this.minZoom=a(u,"minZoom",.001),this.maxZoom=a(u,"maxZoom",1e3),this.speedX=0,this.speedY=0;var l=a(u,"speed",null);typeof l=="number"?(this.speedX=l,this.speedY=l):(this.speedX=a(u,"speed.x",0),this.speedY=a(u,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(!!this.active){h===void 0&&(h=1);var u=this.camera;this.up&&this.up.isDown?u.scrollY-=this.speedY*h|0:this.down&&this.down.isDown&&(u.scrollY+=this.speedY*h|0),this.left&&this.left.isDown?u.scrollX-=this.speedX*h|0:this.right&&this.right.isDown&&(u.scrollX+=this.speedX*h|0),this.zoomIn&&this.zoomIn.isDown?(u.zoom-=this.zoomSpeed,u.zoom<this.minZoom&&(u.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(u.zoom+=this.zoomSpeed,u.zoom>this.maxZoom&&(u.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(6),n=new s({initialize:function(u){this.camera=a(u,"camera",null),this.left=a(u,"left",null),this.right=a(u,"right",null),this.up=a(u,"up",null),this.down=a(u,"down",null),this.zoomIn=a(u,"zoomIn",null),this.zoomOut=a(u,"zoomOut",null),this.zoomSpeed=a(u,"zoomSpeed",.01),this.minZoom=a(u,"minZoom",.001),this.maxZoom=a(u,"maxZoom",1e3),this.accelX=0,this.accelY=0;var l=a(u,"acceleration",null);typeof l=="number"?(this.accelX=l,this.accelY=l):(this.accelX=a(u,"acceleration.x",0),this.accelY=a(u,"acceleration.y",0)),this.dragX=0,this.dragY=0;var f=a(u,"drag",null);typeof f=="number"?(this.dragX=f,this.dragY=f):(this.dragX=a(u,"drag.x",0),this.dragY=a(u,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var c=a(u,"maxSpeed",null);typeof c=="number"?(this.maxSpeedX=c,this.maxSpeedY=c):(this.maxSpeedX=a(u,"maxSpeed.x",0),this.maxSpeedY=a(u,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(!!this.active){h===void 0&&(h=1);var u=this.camera;this._speedX>0?(this._speedX-=this.dragX*h,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*h,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*h,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*h,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(u.scrollX-=this._speedX*h|0),this._speedY!==0&&(u.scrollY-=this._speedY*h|0),this._zoom!==0&&(u.zoom+=this._zoom,u.zoom<this.minZoom?u.zoom=this.minZoom:u.zoom>this.maxZoom&&(u.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Camera:i(326),BaseCamera:i(133),CameraManager:i(799),Effects:i(333),Events:i(37)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameradestroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeincomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeinstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutcomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashcomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="followupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapancomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapanstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatecomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatestart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakecomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakestart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomcomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomstart"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=i(0),n=i(37),h=new a({initialize:function(l){this.camera=l,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,l,f,c,d,v,p,g){if(u===void 0&&(u=!0),l===void 0&&(l=1e3),f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),!v&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=l,this.direction=u,this.progress=0,this.red=f,this.green=c,this.blue=d,this.alpha=u?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g;var m=u?n.FADE_OUT_START:n.FADE_IN_START;return this.camera.emit(m,this.camera,this,l,f,c,d),this.camera},update:function(u,l){!this.isRunning||(this._elapsed+=l,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(u){if(!this.isRunning&&!this.isComplete)return!1;var l=this.camera;return u.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",u.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(u,l){if(!this.isRunning&&!this.isComplete)return!1;var f=this.camera,c=this.red/255,d=this.green/255,v=this.blue/255;return u.drawFillRect(f.x,f.y,f.width,f.height,l(v,d,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var u=this.direction?n.FADE_OUT_COMPLETE:n.FADE_IN_COMPLETE;this.camera.emit(u,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=i(0),n=i(37),h=new a({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,l,f,c,d,v,p){return u===void 0&&(u=250),l===void 0&&(l=255),f===void 0&&(f=255),c===void 0&&(c=255),d===void 0&&(d=!1),v===void 0&&(v=null),p===void 0&&(p=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=u,this.progress=0,this.red=l,this.green=f,this.blue=c,this.alpha=1,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=p,this.camera.emit(n.FLASH_START,this.camera,this,u,l,f,c),this.camera)},update:function(u,l){!this.isRunning||(this._elapsed+=l,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(u){if(!this.isRunning)return!1;var l=this.camera;return u.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",u.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(u,l){if(!this.isRunning)return!1;var f=this.camera,c=this.red/255,d=this.green/255,v=this.blue/255;return u.drawFillRect(f.x,f.y,f.width,f.height,l(v,d,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=i(0),n=i(134),h=i(37),u=i(3),l=new a({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=new u,this.current=new u,this.destination=new u,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(f,c,d,v,p,g,m){d===void 0&&(d=1e3),v===void 0&&(v=n.Linear),p===void 0&&(p=!1),g===void 0&&(g=null),m===void 0&&(m=this.camera.scene);var x=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=d,this.progress=0,this.source.set(x.scrollX,x.scrollY),this.destination.set(f,c),x.getScroll(f,c,this.current),typeof v=="string"&&n.hasOwnProperty(v)?this.ease=n[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=m,this.camera.emit(h.PAN_START,this.camera,this,d,f,c)),x},update:function(f,c){if(!!this.isRunning){this._elapsed+=c;var d=s(this._elapsed/this.duration,0,1);this.progress=d;var v=this.camera;if(this._elapsed<this.duration){var p=this.ease(d);v.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*p,m=this.source.y+(this.current.y-this.source.y)*p;v.setScroll(g,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,d,g,m)}else v.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,d,v.scrollX,v.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=l},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a===void 0&&(a=1.70158),s*s*((a+1)*s-a)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a===void 0&&(a=1.70158),--s*s*((a+1)*s+a)+1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a===void 0&&(a=1.70158);var n=a*1.525;return(s*=2)<1?.5*(s*s*((n+1)*s-n)):.5*((s-=2)*s*((n+1)*s+n)+2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s=1-s,s<.36363636363636365?1-7.5625*s*s:s<.7272727272727273?1-(7.5625*(s-=.5454545454545454)*s+.75):s<.9090909090909091?1-(7.5625*(s-=.8181818181818182)*s+.9375):1-(7.5625*(s-=.9545454545454546)*s+.984375)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s<.36363636363636365?7.5625*s*s:s<.7272727272727273?7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?7.5625*(s-=.8181818181818182)*s+.9375:7.5625*(s-=.9545454545454546)*s+.984375};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a=!1;return s<.5?(s=1-s*2,a=!0):s=s*2-1,s<.36363636363636365?s=7.5625*s*s:s<.7272727272727273?s=7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?s=7.5625*(s-=.8181818181818182)*s+.9375:s=7.5625*(s-=.9545454545454546)*s+.984375,a?(1-s)*.5:s*.5+.5};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return 1-Math.sqrt(1-s*s)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.sqrt(1- --s*s)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s*s*s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return--s*s*s+1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?.5*s*s*s:.5*((s-=2)*s*s+2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(a===void 0&&(a=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var h=n/4;return a<1?a=1:h=n*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(s-=1))*Math.sin((s-h)*(2*Math.PI)/n))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(a===void 0&&(a=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var h=n/4;return a<1?a=1:h=n*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*s)*Math.sin((s-h)*(2*Math.PI)/n)+1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(a===void 0&&(a=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var h=n/4;return a<1?a=1:h=n*Math.asin(1/a)/(2*Math.PI),(s*=2)<1?-.5*(a*Math.pow(2,10*(s-=1))*Math.sin((s-h)*(2*Math.PI)/n)):a*Math.pow(2,-10*(s-=1))*Math.sin((s-h)*(2*Math.PI)/n)*.5+1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.pow(2,10*(s-1))-.001};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return 1-Math.pow(2,-10*s)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?.5*Math.pow(2,10*(s-1)):.5*(2-Math.pow(2,-10*(s-1)))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s*s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s*(2-s)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?.5*s*s:-.5*(--s*(s-2)-1)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s*s*s*s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return 1- --s*s*s*s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s*s*s*s*s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return--s*s*s*s*s+1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s===0?0:s===1?1:1-Math.cos(s*Math.PI/2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s===0?0:s===1?1:Math.sin(s*Math.PI/2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s===0?0:s===1?1:.5*(1-Math.cos(Math.PI*s))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a===void 0&&(a=1),s<=0?0:s>=1?1:((a*s|0)+1)*(1/a)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=i(0),n=i(37),h=i(3),u=new a({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.intensity=new h,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(l,f,c,d,v){return l===void 0&&(l=100),f===void 0&&(f=.05),c===void 0&&(c=!1),d===void 0&&(d=null),v===void 0&&(v=this.camera.scene),!c&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,typeof f=="number"?this.intensity.set(f):this.intensity.set(f.x,f.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=d,this._onUpdateScope=v,this.camera.emit(n.SHAKE_START,this.camera,this,l,f),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(l,f){if(!!this.isRunning)if(this._elapsed+=f,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var c=this.intensity,d=this.camera.width,v=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*c.x*d*2-c.x*d)*p,this._offsetY=(Math.random()*c.y*v*2-c.y*v)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});e.exports=u},function(e,r,i){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var s=i(18),a=i(0),n=i(37),h=i(134),u=new a({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(l,f,c,d,v,p,g){c===void 0&&(c=1e3),d===void 0&&(d=h.Linear),v===void 0&&(v=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),f===void 0&&(f=!1),this.shortestPath=f;var m=l;l<0?(m=-1*l,this.clockwise=!1):this.clockwise=!0;var x=360*Math.PI/180;m=m-Math.floor(m/x)*x;var y=this.camera;if(!v&&this.isRunning)return y;if(this.isRunning=!0,this.duration=c,this.progress=0,this.source=y.rotation,this.destination=m,typeof d=="string"&&h.hasOwnProperty(d)?this.ease=h[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.shortestPath){var T=0,S=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+x)-this.source,this.source>this.destination?S=Math.abs(this.source-this.destination):S=Math.abs(this.source+x)-this.destination,T<S?this.clockwise=!0:T>S&&(this.clockwise=!1)}return this.camera.emit(n.ROTATE_START,this.camera,this,c,m),y},update:function(l,f){if(!!this.isRunning){this._elapsed+=f;var c=s(this._elapsed/this.duration,0,1);this.progress=c;var d=this.camera;if(this._elapsed<this.duration){var v=this.ease(c);this.current=d.rotation;var p=0,g=360*Math.PI/180,m=this.destination,x=this.current;this.clockwise===!1&&(m=this.current,x=this.destination),m>=x?p=Math.abs(m-x):p=Math.abs(m+g)-x;var y=0;this.clockwise?y=d.rotation+p*v:y=d.rotation-p*v,d.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,c,y)}else d.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,c,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=i(0),n=i(134),h=i(37),u=new a({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,f,c,d,v,p){f===void 0&&(f=1e3),c===void 0&&(c=n.Linear),d===void 0&&(d=!1),v===void 0&&(v=null),p===void 0&&(p=this.camera.scene);var g=this.camera;return!d&&this.isRunning||(this.isRunning=!0,this.duration=f,this.progress=0,this.source=g.zoom,this.destination=l,typeof c=="string"&&n.hasOwnProperty(c)?this.ease=n[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=p,this.camera.emit(h.ZOOM_START,this.camera,this,f,l)),g},update:function(l,f){!this.isRunning||(this._elapsed+=f,this.progress=s(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(326),a=i(0),n=i(2),h=i(24),u=i(57),l=i(104),f=i(20),c=new a({initialize:function(v){this.scene=v,this.systems=v.sys,this.roundPixels=v.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,v.sys.events.once(f.BOOT,this.boot,this),v.sys.events.on(f.START,this.start,this)},boot:function(){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new s(0,0,d.scale.width,d.scale.height).setScene(this.scene),d.game.scale.on(l.RESIZE,this.onResize,this),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){if(!this.main){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0]}var v=this.systems.events;v.on(f.UPDATE,this.update,this),v.once(f.SHUTDOWN,this.shutdown,this)},add:function(d,v,p,g,m,x){d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),m===void 0&&(m=!1),x===void 0&&(x="");var y=new s(d,v,p,g);return y.setName(x),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),m&&(this.main=y),y},addExisting:function(d,v){v===void 0&&(v=!1);var p=this.cameras.indexOf(d);return p===-1?(d.id=this.getNextID(),d.setRoundPixels(this.roundPixels),this.cameras.push(d),v&&(this.main=d),d):null},getNextID:function(){for(var d=this.cameras,v=1,p=0;p<32;p++){for(var g=!1,m=0;m<d.length;m++){var x=d[m];if(x&&x.id===v){g=!0;continue}}if(g)v=v<<1;else return v}return 0},getTotal:function(d){d===void 0&&(d=!1);for(var v=0,p=this.cameras,g=0;g<p.length;g++){var m=p[g];(!d||d&&m.visible)&&v++}return v},fromJSON:function(d){Array.isArray(d)||(d=[d]);for(var v=this.scene.sys.scale.width,p=this.scene.sys.scale.height,g=0;g<d.length;g++){var m=d[g],x=n(m,"x",0),y=n(m,"y",0),T=n(m,"width",v),S=n(m,"height",p),C=this.add(x,y,T,S);C.name=n(m,"name",""),C.zoom=n(m,"zoom",1),C.rotation=n(m,"rotation",0),C.scrollX=n(m,"scrollX",0),C.scrollY=n(m,"scrollY",0),C.roundPixels=n(m,"roundPixels",!1),C.visible=n(m,"visible",!0);var E=n(m,"backgroundColor",!1);E&&C.setBackgroundColor(E);var P=n(m,"bounds",null);if(P){var M=n(P,"x",0),R=n(P,"y",0),A=n(P,"width",v),O=n(P,"height",p);C.setBounds(M,R,A,O)}}return this},getCamera:function(d){for(var v=this.cameras,p=0;p<v.length;p++)if(v[p].name===d)return v[p];return null},getCamerasBelowPointer:function(d){for(var v=this.cameras,p=d.x,g=d.y,m=[],x=0;x<v.length;x++){var y=v[x];y.visible&&y.inputEnabled&&u(y,p,g)&&m.unshift(y)}return m},remove:function(d,v){v===void 0&&(v=!0),Array.isArray(d)||(d=[d]);for(var p=0,g=this.cameras,m=0;m<d.length;m++){var x=g.indexOf(d[m]);x!==-1&&(v?g[x].destroy():g[x].renderList=[],g.splice(x,1),p++)}return!this.main&&g[0]&&(this.main=g[0]),p},render:function(d,v){for(var p=this.scene,g=this.cameras,m=0;m<this.cameras.length;m++){var x=g[m];if(x.visible&&x.alpha>0){x.preRender();var y=this.getVisibleChildren(v.getChildren(),x);d.render(p,y,x)}}},getVisibleChildren:function(d,v){for(var p=[],g=0;g<d.length;g++){var m=d[g];m.willRender(v)&&p.push(m)}return p},resetAll:function(){for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(d,v){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(d,v)},onResize:function(d,v,p,g,m){for(var x=0;x<this.cameras.length;x++){var y=this.cameras[x];y._x===0&&y._y===0&&y._width===g&&y._height===m&&y.setSize(v.width,v.height)}},resize:function(d,v){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(d,v)},shutdown:function(){this.main=void 0;for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();this.cameras=[];var v=this.systems.events;v.off(f.UPDATE,this.update,this),v.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});h.register("CameraManager",c,"cameras"),e.exports=c},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="enterfullscreen"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenfailed"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenunsupported"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="leavefullscreen"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="orientationchange"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Config:i(346),CreateRenderer:i(366),DebugHeader:i(384),Events:i(22),TimeStep:i(385),VisibilityHandler:i(387)}},function(e,r){var i=e.exports={},s,a;function n(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=n}catch{s=n}try{typeof clearTimeout=="function"?a=clearTimeout:a=h}catch{a=h}})();function u(y){if(s===setTimeout)return setTimeout(y,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(y,0);try{return s(y,0)}catch{try{return s.call(null,y,0)}catch{return s.call(this,y,0)}}}function l(y){if(a===clearTimeout)return clearTimeout(y);if((a===h||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(y);try{return a(y)}catch{try{return a.call(null,y)}catch{return a.call(this,y)}}}var f=[],c=!1,d,v=-1;function p(){!c||!d||(c=!1,d.length?f=d.concat(f):v=-1,f.length&&g())}function g(){if(!c){var y=u(p);c=!0;for(var T=f.length;T;){for(d=f,f=[];++v<T;)d&&d[v].run();v=-1,T=f.length}d=null,c=!1,l(y)}}i.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)T[S-1]=arguments[S];f.push(new m(y,T)),f.length===1&&!c&&u(g)};function m(y,T){this.fun=y,this.array=T}m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function x(){}i.on=x,i.addListener=x,i.once=x,i.off=x,i.removeListener=x,i.removeAllListeners=x,i.emit=x,i.prependListener=x,i.prependOnceListener=x,i.listeners=function(y){return[]},i.binding=function(y){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(y){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(136),a={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function n(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(a.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(a.mspointer=!0),navigator.getGamepads&&(a.gamepads=!0),"onwheel"in window||s.ie&&"WheelEvent"in window?a.wheelEvent="wheel":"onmousewheel"in window?a.wheelEvent="mousewheel":s.firefox&&"MouseScrollEvent"in window&&(a.wheelEvent="DOMMouseScroll")),a}e.exports=n()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(136),a={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function n(){if(typeof importScripts=="function")return a;a.audioData=!!window.Audio,a.webAudio=!!(window.AudioContext||window.webkitAudioContext);var h=document.createElement("audio"),u=!!h.canPlayType;try{if(u&&(h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(a.ogg=!0),(h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||h.canPlayType("audio/opus;").replace(/^no$/,""))&&(a.opus=!0),h.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(a.mp3=!0),h.canPlayType("audio/wav").replace(/^no$/,"")&&(a.wav=!0),(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/aac;").replace(/^no$/,""))&&(a.m4a=!0),h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(a.webm=!0),h.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(s.edge)a.dolby=!0;else if(s.safari&&s.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var l=parseInt(RegExp.$1,10),f=parseInt(RegExp.$2,10);(l===10&&f>=11||l>10)&&(a.dolby=!0)}}}catch{}return a}e.exports=n()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function s(){if(typeof importScripts=="function")return i;var a=document.createElement("video"),n=!!a.canPlayType;try{n&&(a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(i.ogg=!0),a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.h264=!0,i.mp4=!0),a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(i.webm=!0),a.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(i.vp9=!0),a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.hls=!0))}catch{}return i}e.exports=s()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={available:!1,cancel:"",keyboard:!1,request:""};function s(){if(typeof importScripts=="function")return i;var a,n="Fullscreen",h="FullScreen",u=["request"+n,"request"+h,"webkitRequest"+n,"webkitRequest"+h,"msRequest"+n,"msRequest"+h,"mozRequest"+h,"mozRequest"+n];for(a=0;a<u.length;a++)if(document.documentElement[u[a]]){i.available=!0,i.request=u[a];break}var l=["cancel"+h,"exit"+n,"webkitCancel"+h,"webkitExit"+n,"msCancel"+h,"msExit"+n,"mozCancel"+h,"mozExit"+n];if(i.available){for(a=0;a<l.length;a++)if(document[l[a]]){i.cancel=l[a];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(i.keyboard=!0),Object.defineProperty(i,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),i}e.exports=s()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:i(349),BetweenPoints:i(350),BetweenPointsY:i(813),BetweenY:i(814),CounterClockwise:i(815),Normalize:i(351),Random:i(816),RandomDegrees:i(817),Reverse:i(818),RotateTo:i(819),ShortestBetween:i(820),Wrap:i(269),WrapDegrees:i(270)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return Math.atan2(a.x-s.x,a.y-s.y)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){return Math.atan2(n-s,h-a)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),a=function(n){return n>Math.PI&&(n-=s.PI2),Math.abs(((n+s.TAU)%s.PI2-s.PI2)%s.PI2)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(137),a=function(){return s(-Math.PI,Math.PI)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(137),a=function(){return s(-180,180)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(351),a=function(n){return s(n+Math.PI)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),a=function(n,h,u){return u===void 0&&(u=.05),n===h||(Math.abs(h-n)<=u||Math.abs(h-n)>=s.PI2-u?n=h:(Math.abs(h-n)>Math.PI&&(h<n?h+=s.PI2:h-=s.PI2),h>n?n+=u:h<n&&(n-=u))),n};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=a-s;if(n===0)return 0;var h=Math.floor((n- -180)/360);return n-h*360};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:i(50),BetweenPoints:i(352),BetweenPointsSquared:i(822),Chebyshev:i(823),Power:i(824),Snake:i(825),Squared:i(353)}},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.x-a.x,h=s.y-a.y;return n*n+h*h};e.exports=i},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){return Math.max(Math.abs(s-n),Math.abs(a-h))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u){return u===void 0&&(u=2),Math.sqrt(Math.pow(n-s,u)+Math.pow(h-a,u))};e.exports=i},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){return Math.abs(s-n)+Math.abs(a-h)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Back:i(334),Bounce:i(335),Circular:i(336),Cubic:i(337),Elastic:i(338),Expo:i(339),Linear:i(340),Quadratic:i(341),Quartic:i(342),Quintic:i(343),Sine:i(344),Stepped:i(345)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:i(828),Equal:i(124),Floor:i(829),GreaterThan:i(354),LessThan:i(355)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a===void 0&&(a=1e-4),Math.ceil(s-a)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a===void 0&&(a=1e-4),Math.floor(s+a)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bezier:i(831),CatmullRom:i(832),CubicBezier:i(358),Linear:i(833),QuadraticBezier:i(359),SmoothStep:i(360),SmootherStep:i(834)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(356),a=function(n,h){for(var u=0,l=n.length-1,f=0;f<=l;f++)u+=Math.pow(1-h,l-f)*Math.pow(h,f)*n[f]*s(l,f);return u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(194),a=function(n,h){var u=n.length-1,l=u*h,f=Math.floor(l);return n[0]===n[u]?(h<0&&(f=Math.floor(l=u*(1+h))),s(l-f,n[(f-1+u)%u],n[f],n[(f+1)%u],n[(f+2)%u])):h<0?n[0]-(s(-l,n[0],n[0],n[1],n[1])-n[0]):h>1?n[u]-(s(l-u,n[u],n[u],n[u-1],n[u-1])-n[u]):s(l-f,n[f?f-1:0],n[f],n[u<f+1?u:f+1],n[u<f+2?u:f+2])};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(135),a=function(n,h){var u=n.length-1,l=u*h,f=Math.floor(l);return h<0?s(n[0],n[1],l):h>1?s(n[u],n[u-1],u-l):s(n[f],n[f+1>u?u:f+1],l-f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(183),a=function(n,h,u){return h+(u-h)*s(n,0,1)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetNext:i(361),IsSize:i(138),IsValue:i(836)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s>0&&(s&s-1)===0};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:i(139),Floor:i(76),To:i(838)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){return n===void 0&&(n=0),a===0?s:(s-=n,s=a*Math.round(s/a),h?(n+s)/a:n+s)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=new s({initialize:function(h){h===void 0&&(h=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],h&&this.init(h)},rnd:function(){var n=2091639*this.s0+this.c*23283064365386963e-26;return this.c=n|0,this.s0=this.s1,this.s1=this.s2,this.s2=n-this.c,this.s2},hash:function(n){var h,u=this.n;n=n.toString();for(var l=0;l<n.length;l++)u+=n.charCodeAt(l),h=.02519603282416938*u,u=h>>>0,h-=u,h*=u,u=h>>>0,h-=u,u+=h*4294967296;return this.n=u,(u>>>0)*23283064365386963e-26},init:function(n){typeof n=="string"?this.state(n):this.sow(n)},sow:function(n){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!n)for(var h=0;h<n.length&&n[h]!=null;h++){var u=n[h];this.s0-=this.hash(u),this.s0+=~~(this.s0<0),this.s1-=this.hash(u),this.s1+=~~(this.s1<0),this.s2-=this.hash(u),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(n,h){return Math.floor(this.realInRange(0,h-n+1)+n)},between:function(n,h){return Math.floor(this.realInRange(0,h-n+1)+n)},realInRange:function(n,h){return this.frac()*(h-n)+n},normal:function(){return 1-2*this.frac()},uuid:function(){var n="",h="";for(h=n="";n++<36;h+=~n%5|n*3&4?(n^15?8^this.frac()*(n^20?16:4):4).toString(16):"-");return h},pick:function(n){return n[this.integerInRange(0,n.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(n){return n[~~(Math.pow(this.frac(),2)*(n.length-1)+.5)]},timestamp:function(n,h){return this.realInRange(n||9466848e5,h||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(n){return typeof n=="string"&&n.match(/^!rnd/)&&(n=n.split(","),this.c=parseFloat(n[1]),this.s0=parseFloat(n[2]),this.s1=parseFloat(n[3]),this.s2=parseFloat(n[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(n){for(var h=n.length-1,u=h;u>0;u--){var l=Math.floor(this.frac()*(u+1)),f=n[l];n[l]=n[u],n[u]=f}return n}});e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var a=0,n=0;n<s.length;n++)a+=+s[n];return a/s.length};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){a===void 0&&(a=0),n===void 0&&(n=10);var h=Math.pow(n,-a);return Math.ceil(s*h)/h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return Math.abs(s-a)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=i(0),n=i(69),h=i(1),u=new n,l=new a({initialize:function f(c,d,v,p){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=f.DefaultOrder),this._x=c,this._y=d,this._z=v,this._order=p,this.onChangeCallback=h},x:{get:function(){return this._x},set:function(f){this._x=f,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(f){this._y=f,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(f){this._z=f,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(f){this._order=f,this.onChangeCallback(this)}},set:function(f,c,d,v){return v===void 0&&(v=this._order),this._x=f,this._y=c,this._z=d,this._order=v,this.onChangeCallback(this),this},copy:function(f){return this.set(f.x,f.y,f.z,f.order)},setFromQuaternion:function(f,c,d){return c===void 0&&(c=this._order),d===void 0&&(d=!1),u.fromQuat(f),this.setFromRotationMatrix(u,c,d)},setFromRotationMatrix:function(f,c,d){c===void 0&&(c=this._order),d===void 0&&(d=!1);var v=f.val,p=v[0],g=v[4],m=v[8],x=v[1],y=v[5],T=v[9],S=v[2],C=v[6],E=v[10],P=0,M=0,R=0,A=.99999;switch(c){case"XYZ":{M=Math.asin(s(m,-1,1)),Math.abs(m)<A?(P=Math.atan2(-T,E),R=Math.atan2(-g,p)):P=Math.atan2(C,y);break}case"YXZ":{P=Math.asin(-s(T,-1,1)),Math.abs(T)<A?(M=Math.atan2(m,E),R=Math.atan2(x,y)):M=Math.atan2(-S,p);break}case"ZXY":{P=Math.asin(s(C,-1,1)),Math.abs(C)<A?(M=Math.atan2(-S,E),R=Math.atan2(-g,y)):R=Math.atan2(x,p);break}case"ZYX":{M=Math.asin(-s(S,-1,1)),Math.abs(S)<A?(P=Math.atan2(C,E),R=Math.atan2(x,p)):R=Math.atan2(-g,y);break}case"YZX":{R=Math.asin(s(x,-1,1)),Math.abs(x)<A?(P=Math.atan2(-T,y),M=Math.atan2(-S,p)):M=Math.atan2(m,E);break}case"XZY":{R=Math.asin(-s(g,-1,1)),Math.abs(g)<A?(P=Math.atan2(C,y),M=Math.atan2(m,p)):P=Math.atan2(-T,E);break}}return this._x=P,this._y=M,this._z=R,this._order=c,d&&this.onChangeCallback(this),this}});l.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],l.DefaultOrder="XYZ",e.exports=l},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){a===void 0&&(a=0),n===void 0&&(n=10);var h=Math.pow(n,-a);return Math.floor(s*h)/h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s/a/1e3};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s==parseFloat(s)?!(s%2):void 0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s===parseFloat(s)?!(s%2):void 0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return Math.min(s+a,n)};e.exports=i},function(e,r){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a=s.length;if(a===0)return 0;s.sort(function(h,u){return h-u});var n=Math.floor(a/2);return a%2===0?(s[n]+s[n-1])/2:s[n]};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return Math.max(s-a,n)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){n===void 0&&(n=a+1);var u=(s-a)/(n-a);return u>1?h!==void 0?(u=(h-s)/(h-n),u<0&&(u=0)):u=1:u<0&&(u=0),u};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a===void 0&&(a=1);var n=Math.random()*2*Math.PI;return s.x=Math.cos(n)*a,s.y=Math.sin(n)*a,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a===void 0&&(a=1);var n=Math.random()*2*Math.PI,h=Math.random()*2-1,u=Math.sqrt(1-h*h)*a;return s.x=Math.cos(n)*u,s.y=Math.sin(n)*u,s.z=h*a,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a===void 0&&(a=1),s.x=(Math.random()*2-1)*a,s.y=(Math.random()*2-1)*a,s.z=(Math.random()*2-1)*a,s.w=(Math.random()*2-1)*a,s};e.exports=i},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u){return s.x=a+u*Math.cos(h),s.y=n+u*Math.sin(h),s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){a===void 0&&(a=0),n===void 0&&(n=10);var h=Math.pow(n,-a);return Math.round(s*h)/h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){a===void 0&&(a=1),n===void 0&&(n=1),h===void 0&&(h=1),h*=Math.PI/s;for(var u=[],l=[],f=0;f<s;f++)n-=a*h,a+=n*h,u[f]=n,l[f]=a;return{sin:l,cos:u,length:s}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),a=function(n,h,u,l){l===void 0&&(l=new s);var f=0,c=0,d=h*u;return n>0&&n<=d&&(n>h-1?(c=Math.floor(n/h),f=n-c*h):f=n),l.set(f,c)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return Math.abs(s-a)<=n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(39),a=i(69),n=i(365),h=new a,u=new n,l=new s,f=function(c,d,v){return u.setAxisAngle(d,v),h.fromRotationTranslation(u,l.set(0,0,0)),c.transformMat4(h)};e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addtexture"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onerror"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onload"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removetexture"},function(e,r){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineafterflush"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebeforeflush"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebind"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineboot"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinedestroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinerebind"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineresize"},function(e,r){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GenerateTexture:i(388),Palettes:i(889)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARNE16:i(389),C64:i(890),CGA:i(891),JMP:i(892),MSX:i(893)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Path:i(895),MoveTo:i(393),CubicBezier:i(390),Curve:i(94),Ellipse:i(391),Line:i(392),QuadraticBezier:i(394),Spline:i(395)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(390),n=i(391),h=i(5),u=i(392),l=i(393),f=i(394),c=i(10),d=i(395),v=i(3),p=i(14),g=new s({initialize:function(x,y){x===void 0&&(x=0),y===void 0&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new v,this._tmpVec2A=new v,this._tmpVec2B=new v,typeof x=="object"?this.fromJSON(x):this.startPoint.set(x,y)},add:function(m){return this.curves.push(m),this},circleTo:function(m,x,y){return x===void 0&&(x=!1),this.ellipseTo(m,m,0,360,x,y)},closePath:function(){var m=this.curves[0].getPoint(0),x=this.curves[this.curves.length-1].getPoint(1);return m.equals(x)||this.curves.push(new u(x,m)),this},cubicBezierTo:function(m,x,y,T,S,C){var E=this.getEndPoint(),P,M,R;return m instanceof v?(P=m,M=x,R=y):(P=new v(y,T),M=new v(S,C),R=new v(m,x)),this.add(new a(E,P,M,R))},quadraticBezierTo:function(m,x,y,T){var S=this.getEndPoint(),C,E;return m instanceof v?(C=m,E=x):(C=new v(y,T),E=new v(m,x)),this.add(new f(S,C,E))},draw:function(m,x){for(var y=0;y<this.curves.length;y++){var T=this.curves[y];!T.active||T.draw(m,x)}return m},ellipseTo:function(m,x,y,T,S,C){var E=new n(0,0,m,x,y,T,S,C),P=this.getEndPoint(this._tmpVec2A),M=E.getStartPoint(this._tmpVec2B);return P.subtract(M),E.x=P.x,E.y=P.y,this.add(E)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var x=0;x<m.curves.length;x++){var y=m.curves[x];switch(y.type){case"LineCurve":this.add(u.fromJSON(y));break;case"EllipseCurve":this.add(n.fromJSON(y));break;case"SplineCurve":this.add(d.fromJSON(y));break;case"CubicBezierCurve":this.add(a.fromJSON(y));break;case"QuadraticBezierCurve":this.add(f.fromJSON(y));break}}return this},getBounds:function(m,x){m===void 0&&(m=new c),x===void 0&&(x=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var y=new c,T=p.MIN_SAFE_INTEGER,S=p.MIN_SAFE_INTEGER,C=0;C<this.curves.length;C++){var E=this.curves[C];!E.active||(E.getBounds(y,x),m.x=Math.min(m.x,y.x),m.y=Math.min(m.y,y.y),T=Math.max(T,y.right),S=Math.max(S,y.bottom))}return m.right=T,m.bottom=S,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],x=0,y=0;y<this.curves.length;y++)x+=this.curves[y].getLength(),m.push(x);return this.cacheLengths=m,m},getEndPoint:function(m){return m===void 0&&(m=new v),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,x){x===void 0&&(x=new v);for(var y=m*this.getLength(),T=this.getCurveLengths(),S=0;S<T.length;){if(T[S]>=y){var C=T[S]-y,E=this.curves[S],P=E.getLength(),M=P===0?0:1-C/P;return E.getPointAt(M,x)}S++}return null},getPoints:function(m){m===void 0&&(m=12);for(var x=[],y,T=0;T<this.curves.length;T++){var S=this.curves[T];if(!!S.active)for(var C=S.getResolution(m),E=S.getPoints(C),P=0;P<E.length;P++){var M=E[P];y&&y.equals(M)||(x.push(M),y=M)}}return this.autoClose&&x.length>1&&!x[x.length-1].equals(x[0])&&x.push(x[0]),x},getRandomPoint:function(m){return m===void 0&&(m=new v),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var x=[],y=0;y<=m;y++)x.push(this.getPoint(y/m));return this.autoClose&&x.push(x[0]),x},getStartPoint:function(m){return m===void 0&&(m=new v),m.copy(this.startPoint)},getTangent:function(m,x){x===void 0&&(x=new v);for(var y=m*this.getLength(),T=this.getCurveLengths(),S=0;S<T.length;){if(T[S]>=y){var C=T[S]-y,E=this.curves[S],P=E.getLength(),M=P===0?0:1-C/P;return E.getTangentAt(M,x)}S++}return null},lineTo:function(m,x){m instanceof v?this._tmpVec2B.copy(m):this._tmpVec2B.set(m,x);var y=this.getEndPoint(this._tmpVec2A);return this.add(new u([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new d(m))},moveTo:function(m,x){return m instanceof v?this.add(new l(m.x,m.y)):this.add(new l(m,x))},toJSON:function(){for(var m=[],x=0;x<this.curves.length;x++)m.push(this.curves[x].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});h.register("path",function(m,x){return new g(m,x)}),e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DataManager:i(101),DataManagerPlugin:i(897),Events:i(315)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(101),n=i(24),h=i(20),u=new s({Extends:a,initialize:function(f){a.call(this,f,f.sys.events),this.scene=f,this.systems=f.sys,f.sys.events.once(h.BOOT,this.boot,this),f.sys.events.on(h.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){a.prototype.destroy.call(this),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});n.register("DataManagerPlugin",u,"data"),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Align:i(899),BaseShader:i(396),Bounds:i(902),Canvas:i(906),Color:i(397),ColorMatrix:i(198),Masks:i(916),RGB:i(200)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(123),a=i(17),n={In:i(900),To:i(901)};n=a(!1,n,s),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:i(290),BottomLeft:i(291),BottomRight:i(292),Center:i(293),LeftCenter:i(295),QuickSet:i(289),RightCenter:i(296),TopCenter:i(297),TopLeft:i(298),TopRight:i(299)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:i(277),BottomLeft:i(278),BottomRight:i(279),LeftBottom:i(280),LeftCenter:i(281),LeftTop:i(282),QuickSet:i(276),RightBottom:i(283),RightCenter:i(284),RightTop:i(285),TopCenter:i(286),TopLeft:i(287),TopRight:i(288)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CenterOn:i(294),GetBottom:i(42),GetBounds:i(903),GetCenterX:i(87),GetCenterY:i(89),GetLeft:i(43),GetOffsetX:i(904),GetOffsetY:i(905),GetRight:i(44),GetTop:i(45),SetBottom:i(55),SetCenterX:i(88),SetCenterY:i(90),SetLeft:i(53),SetRight:i(54),SetTop:i(52)}},function(e,r,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),a=i(43),n=i(44),h=i(45),u=function(l,f){f===void 0&&(f={});var c=a(l),d=h(l);return f.x=c,f.y=d,f.width=n(l)-c,f.height=s(l)-d,f};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.width*s.originX};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.height*s.originY};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasInterpolation:i(367),CanvasPool:i(31),Smoothing:i(192),TouchAction:i(907),UserSelect:i(908)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a===void 0&&(a="none"),s.style.msTouchAction=a,s.style["ms-touch-action"]=a,s.style["touch-action"]=a,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a===void 0&&(a="none");var n=["-webkit-","-khtml-","-moz-","-ms-",""];return n.forEach(function(h){s.style[h+"user-select"]=a}),s.style["-webkit-touch-callout"]=a,s.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(103),a=function(n){n===void 0&&(n=1024);var h=[],u=255,l,f=255,c=0,d=0;for(l=0;l<=u;l++)h.push({r:f,g:l,b:d,color:s(f,l,d)});for(c=255,l=u;l>=0;l--)h.push({r:l,g:c,b:d,color:s(l,c,d)});for(f=0,l=0;l<=u;l++,c--)h.push({r:f,g:c,b:l,color:s(f,c,l)});for(c=0,d=255,l=0;l<=u;l++,d--,f++)h.push({r:f,g:c,b:d,color:s(f,c,d)});if(n===1024)return h;var v=[],p=0,g=1024/n;for(l=0;l<n;l++)v.push(h[Math.floor(p)]),p+=g;return v};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a={r:s>>16&255,g:s>>8&255,b:s&255,a:255};return s>16777215&&(a.a=s>>>24),a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38),a=i(399),n=function(h,u,l){var f=l,c=l,d=l;if(u!==0){var v=l<.5?l*(1+u):l+u-l*u,p=2*l-v;f=a(p,v,h+1/3),c=a(p,v,h),d=a(p,v,h-1/3)}var g=new s;return g.setGLTo(f,c,d,1)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(188),a=function(n,h){n===void 0&&(n=1),h===void 0&&(h=1);for(var u=[],l=0;l<=359;l++)u.push(s(l/359,n,h));return u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(135),a=function(u,l,f,c,d,v,p,g){p===void 0&&(p=100),g===void 0&&(g=0);var m=g/p;return{r:s(u,c,m),g:s(l,d,m),b:s(f,v,m)}},n=function(u,l,f,c){return f===void 0&&(f=100),c===void 0&&(c=0),a(u.r,u.g,u.b,l.r,l.g,l.b,f,c)},h=function(u,l,f,c,d,v){return d===void 0&&(d=100),v===void 0&&(v=0),a(u.r,u.g,u.b,l,f,c,d,v)};e.exports={RGBWithRGB:a,ColorWithRGB:h,ColorWithColor:n}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(195),a=i(38),n=function(h,u){return h===void 0&&(h=0),u===void 0&&(u=255),new a(s(h,u),s(h,u),s(h,u))};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(398),a=function(n,h,u,l,f){return l===void 0&&(l=255),f===void 0&&(f="#"),f==="#"?"#"+((1<<24)+(n<<16)+(h<<8)+u).toString(16).slice(1,7):"0x"+s(l)+s(n)+s(h)+s(u)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BitmapMask:i(310),GeometryMask:i(311)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={AddToDOM:i(142),DOMContentLoaded:i(400),GetInnerHeight:i(401),GetScreenOrientation:i(402),GetTarget:i(407),ParseXML:i(408),RemoveFromDOM:i(202),RequestAnimationFrame:i(386)};e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EventEmitter:i(919)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(9),n=i(24),h=new s({Extends:a,initialize:function(){a.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});n.register("EventEmitter",h,"events"),e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(142),a=i(321),n=i(325),h=i(31),u=i(0),l=i(346),f=i(921),c=i(366),d=i(101),v=i(384),p=i(347),g=i(400),m=i(9),x=i(22),y=i(409),T=i(24),S=i(414),C=i(415),E=i(417),P=i(106),M=i(422),R=i(385),A=i(387),O=i(426),F=new u({initialize:function(w){this.config=new l(w),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new a(this),this.textures=new M(this),this.cache=new n(this),this.registry=new d(this),this.input=new y(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=p,this.scale=new C(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new R(this,this.config.fps),this.plugins=new S(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,g(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),f(this),v(this),s(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(x.BOOT)},texturesReady:function(){this.events.emit(x.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),A(this);var b=this.events;b.on(x.HIDDEN,this.onHidden,this),b.on(x.VISIBLE,this.onVisible,this),b.on(x.BLUR,this.onBlur,this),b.on(x.FOCUS,this.onFocus,this)},step:function(b,w){if(this.pendingDestroy)return this.runDestroy();var N=this.events;N.emit(x.PRE_STEP,b,w),N.emit(x.STEP,b,w),this.scene.update(b,w),N.emit(x.POST_STEP,b,w);var V=this.renderer;V.preRender(),N.emit(x.PRE_RENDER,V,b,w),this.scene.render(V),V.postRender(),N.emit(x.POST_RENDER,V,b,w)},headlessStep:function(b,w){if(this.pendingDestroy)return this.runDestroy();var N=this.events;N.emit(x.PRE_STEP,b,w),N.emit(x.STEP,b,w),this.scene.update(b,w),N.emit(x.POST_STEP,b,w),N.emit(x.PRE_RENDER),N.emit(x.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(x.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(x.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(b,w){w===void 0&&(w=!1),this.pendingDestroy=!0,this.removeCanvas=b,this.noReturn=w},runDestroy:function(){this.scene.destroy(),this.events.emit(x.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(h.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});e.exports=F},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(142),a=function(n){var h=n.config;if(!(!h.parent||!h.domCreateContainer)){var u=document.createElement("div");u.style.cssText=["display: block;","width: "+n.scale.width+"px;","height: "+n.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+h.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),n.domContainer=u,s(u,h.parent)}};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectdown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectmove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectup"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectwheel"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="process"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdownoutside"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerupoutside"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerlockchange"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addfile"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete-"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loaderror"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="load"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fileprogress"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postprocess"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="progress"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(!n.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var h=s.source[a];s.add("__BASE",a,0,0,h.width,h.height);for(var u=n.getElementsByTagName("SubTexture"),l,f=0;f<u.length;f++){var c=u[f].attributes,d=c.name.value,v=parseInt(c.x.value,10),p=parseInt(c.y.value,10),g=parseInt(c.width.value,10),m=parseInt(c.height.value,10);if(l=s.add(d,a,v,p,g,m),c.frameX){var x=Math.abs(parseInt(c.frameX.value,10)),y=Math.abs(parseInt(c.frameY.value,10)),T=parseInt(c.frameWidth.value,10),S=parseInt(c.frameHeight.value,10);l.setTrim(g,m,x,y,T,S)}}return s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.source[a];return s.add("__BASE",a,0,0,n.width,n.height),s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.source[a];return s.add("__BASE",a,0,0,n.width,n.height),s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(77),a=function(n,h,u){if(!u.frames&&!u.textures){console.warn("Invalid Texture Atlas JSON Array");return}var l=n.source[h];n.add("__BASE",h,0,0,l.width,l.height);for(var f=Array.isArray(u.textures)?u.textures[h].frames:u.frames,c,d=0;d<f.length;d++){var v=f[d];c=n.add(v.filename,h,v.frame.x,v.frame.y,v.frame.w,v.frame.h),v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=v.anchor||v.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),c.customData=s(v)}for(var g in u)g!=="frames"&&(Array.isArray(u[g])?n.customData[g]=u[g].slice(0):n.customData[g]=u[g]);return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(77),a=function(n,h,u){if(!u.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var l=n.source[h];n.add("__BASE",h,0,0,l.width,l.height);var f=u.frames,c;for(var d in f)if(!!f.hasOwnProperty(d)){var v=f[d];c=n.add(d,h,v.frame.x,v.frame.y,v.frame.w,v.frame.h),v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=v.anchor||v.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),c.customData=s(v)}for(var g in u)g!=="frames"&&(Array.isArray(u[g])?n.customData[g]=u[g].slice(0):n.customData[g]=u[g]);return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),a=function(n,h,u,l,f,c,d){var v=s(d,"frameWidth",null),p=s(d,"frameHeight",v);if(v===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=n.source[h];n.add("__BASE",h,0,0,g.width,g.height);var m=s(d,"startFrame",0),x=s(d,"endFrame",-1),y=s(d,"margin",0),T=s(d,"spacing",0),S=Math.floor((f-y+T)/(v+T)),C=Math.floor((c-y+T)/(p+T)),E=S*C;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",n.key),(m>E||m<-E)&&(m=0),m<0&&(m=E+m),x!==-1&&(E=m+(x+1));for(var P=y,M=y,R=0,A=0,O=0;O<E;O++){R=0,A=0;var F=P+v,b=M+p;F>f&&(R=F-f),b>c&&(A=b-c),n.add(O,h,u+P,l+M,v-R,p-A),P+=v+T,P+v>f&&(P=y,M+=p+T)}return n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),a=function(n,h,u){var l=s(u,"frameWidth",null),f=s(u,"frameHeight",l);if(!l)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var c=n.source[0];n.add("__BASE",0,0,0,c.width,c.height),s(u,"startFrame",0),s(u,"endFrame",-1);for(var d=s(u,"margin",0),v=s(u,"spacing",0),p=h.cutX,g=h.cutY,m=h.cutWidth,x=h.cutHeight,y=h.realWidth,T=h.realHeight,S=Math.floor((y-d+v)/(l+v)),C=Math.floor((T-d+v)/(f+v)),E=h.x,P=l-E,M=l-(y-m-E),R=h.y,A=f-R,O=f-(T-x-R),F,b=d,w=d,N=0,V=h.sourceIndex,W=0;W<C;W++){for(var U=W===0,D=W===C-1,L=0;L<S;L++){var I=L===0,B=L===S-1;if(F=n.add(N,V,p+b,g+w,l,f),I||U||B||D){var G=I?E:0,z=U?R:0,Y=0,X=0;I&&(Y+=l-P),B&&(Y+=l-M),U&&(X+=f-A),D&&(X+=f-O);var H=l-Y,$=f-X;F.cutWidth=H,F.cutHeight=$,F.setTrim(l,f,G,z,H,$)}b+=v,I?b+=P:B?b+=M:b+=l,N++}b=d,w+=v,U?w+=A:D?w+=O:w+=f}return n};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=0,s=function(n,h,u,l){var f=i-l.y-l.height;n.add(u,h,l.x,f,l.width,l.height)},a=function(n,h,u){var l=n.source[h];n.add("__BASE",h,0,0,l.width,l.height),i=l.height;for(var f=u.split(`
`),c=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",v="",p={x:0,y:0,width:0,height:0},g=0;g<f.length;g++){var m=f[g].match(c);if(!!m){var x=m[1]==="- ",y=m[2],T=m[3];if(x&&(v!==d&&(s(n,h,v,p),d=v),p={x:0,y:0,width:0,height:0}),y==="name"){v=T;continue}switch(y){case"x":case"y":case"width":case"height":p[y]=parseInt(T,10);break}}}return v!==d&&s(n,h,v,p),n};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decoded"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decodedall"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="looped"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,r){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pan"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seek"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stopall"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Events:i(75),DisplayList:i(1012),GameObjectCreator:i(16),GameObjectFactory:i(5),UpdateList:i(1040),Components:i(11),GetCalcMatrix:i(19),BuildGameObject:i(28),BuildGameObjectAnimation:i(439),GameObject:i(15),BitmapText:i(148),Blitter:i(213),Bob:i(440),Container:i(214),DOMElement:i(442),DynamicBitmapText:i(215),Extern:i(444),Graphics:i(216),Group:i(113),Image:i(125),Layer:i(219),Particles:i(1074),PathFollower:i(457),RenderTexture:i(221),RetroFont:i(1082),Rope:i(223),Sprite:i(73),Text:i(224),GetTextSize:i(458),MeasureText:i(460),TextStyle:i(459),TileSprite:i(225),Zone:i(129),Video:i(226),Shape:i(34),Arc:i(461),Curve:i(462),Ellipse:i(463),Grid:i(464),IsoBox:i(465),IsoTriangle:i(466),Line:i(467),Polygon:i(468),Rectangle:i(473),Star:i(474),Triangle:i(475),Factories:{Blitter:i(1130),Container:i(1131),DOMElement:i(1132),DynamicBitmapText:i(1133),Extern:i(1134),Graphics:i(1135),Group:i(1136),Image:i(1137),Layer:i(1138),Particles:i(1139),PathFollower:i(1140),RenderTexture:i(1141),Rope:i(1142),Sprite:i(1143),StaticBitmapText:i(1144),Text:i(1145),TileSprite:i(1146),Zone:i(1147),Video:i(1148),Arc:i(1149),Curve:i(1150),Ellipse:i(1151),Grid:i(1152),IsoBox:i(1153),IsoTriangle:i(1154),Line:i(1155),Polygon:i(1156),Rectangle:i(1157),Star:i(1158),Triangle:i(1159)},Creators:{Blitter:i(1160),Container:i(1161),DynamicBitmapText:i(1162),Graphics:i(1163),Group:i(1164),Image:i(1165),Layer:i(1166),Particles:i(1167),RenderTexture:i(1168),Rope:i(1169),Sprite:i(1170),StaticBitmapText:i(1171),Text:i(1172),TileSprite:i(1173),Zone:i(1174),Video:i(1175)}};s.Shader=i(229),s.Mesh=i(230),s.PointLight=i(150),s.Factories.Shader=i(1184),s.Factories.Mesh=i(1185),s.Factories.PointLight=i(1186),s.Creators.Shader=i(1187),s.Creators.Mesh=i(1188),s.Creators.PointLight=i(1189),s.Light=i(481),s.LightsManager=i(482),s.LightsPlugin=i(1190),e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(110),n=i(24),h=i(75),u=i(20),l=i(79),f=new s({Extends:a,initialize:function(d){a.call(this,d),this.sortChildrenFlag=!1,this.scene=d,this.systems=d.sys,this.events=d.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.events.once(u.DESTROY,this.destroy,this)},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(h.ADDED_TO_SCENE,c,this.scene),this.events.emit(u.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(h.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(u.REMOVED_FROM_SCENE,c,this.scene)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(l(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,d){return c._depth-d._depth},getChildren:function(){return this.list},shutdown:function(){for(var c=this.list,d=c.length;d--;)c[d].destroy(!0);c.length=0,this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});n.register("DisplayList",f,"displayList"),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CheckMatrix:i(209),MatrixToString:i(1014),ReverseColumns:i(1015),ReverseRows:i(1016),Rotate180:i(1017),RotateLeft:i(1018),RotateMatrix:i(147),RotateRight:i(1019),Translate:i(1020),TransposeMatrix:i(435)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(186),a=i(209),n=function(h){var u="";if(!a(h))return u;for(var l=0;l<h.length;l++){for(var f=0;f<h[l].length;f++){var c=h[l][f].toString();c!=="undefined"?u+=s(c,2):u+="?",f<h[l].length-1&&(u+=" |")}if(l<h.length-1){u+=`
`;for(var d=0;d<h[l].length;d++)u+="---",d<h[l].length-1&&(u+="+");u+=`
`}}return u};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.reverse()};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var a=0;a<s.length;a++)s[a].reverse();return s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(147),a=function(n){return s(n,180)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(147),a=function(n){return s(n,90)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(147),a=function(n){return s(n,-90)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(178),a=i(179),n=function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),l!==0&&(l<0?s(h,Math.abs(l)):a(h,l)),u!==0)for(var f=0;f<h.length;f++){var c=h[f];u<0?s(c,Math.abs(u)):a(c,u)}return h};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u){if(u===void 0&&(u=s),n>0){var l=n-s.length;if(l<=0)return null}if(!Array.isArray(a))return s.indexOf(a)===-1?(s.push(a),h&&h.call(u,a),a):null;for(var f=a.length-1;f>=0;)s.indexOf(a[f])!==-1&&a.splice(f,1),f--;if(f=a.length,f===0)return null;n>0&&f>l&&(a.splice(l),f=l);for(var c=0;c<f;c++){var d=a[c];s.push(d),h&&h.call(u,d)}return a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u,l){if(n===void 0&&(n=0),l===void 0&&(l=s),h>0){var f=h-s.length;if(f<=0)return null}if(!Array.isArray(a))return s.indexOf(a)===-1?(s.splice(n,0,a),u&&u.call(l,a),a):null;for(var c=a.length-1;c>=0;)s.indexOf(a[c])!==-1&&a.pop(),c--;if(c=a.length,c===0)return null;h>0&&c>f&&(a.splice(f),c=f);for(var d=c-1;d>=0;d--){var v=a[d];s.splice(n,0,v),u&&u.call(l,v)}return a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.indexOf(a);return n!==-1&&n<s.length&&(s.splice(n,1),s.push(a)),a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),a=function(n,h,u,l,f){l===void 0&&(l=0),f===void 0&&(f=n.length);var c=0;if(s(n,l,f))for(var d=l;d<f;d++){var v=n[d];v[h]===u&&c++}return c};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h,u=[null];for(h=3;h<arguments.length;h++)u.push(arguments[h]);for(h=0;h<s.length;h++)u[0]=s[h],a.apply(n,u);return s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),a=function(n,h,u,l,f){if(l===void 0&&(l=0),f===void 0&&(f=n.length),s(n,l,f)){var c,d=[null];for(c=5;c<arguments.length;c++)d.push(arguments[c]);for(c=l;c<f;c++)d[0]=n[c],h.apply(u,d)}return n};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.indexOf(a);if(n>0){var h=s[n-1],u=s.indexOf(h);s[n]=h,s[u]=a}return s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=s.indexOf(a);if(h===-1||n<0||n>=s.length)throw new Error("Supplied index out of bounds");return h!==n&&(s.splice(h,1),s.splice(n,0,a)),a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.indexOf(a);if(n!==-1&&n<s.length-1){var h=s[n+1],u=s.indexOf(h);s[n]=h,s[u]=a}return s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(a===n)return s;var h=s.indexOf(a),u=s.indexOf(n);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return h>u||(s.splice(h,1),u===s.length-1?s.push(a):s.splice(u,0,a)),s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(a===n)return s;var h=s.indexOf(a),u=s.indexOf(n);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return h<u||(s.splice(h,1),u===0?s.unshift(a):s.splice(u,0,a)),s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(363),a=function(n,h,u){n===void 0&&(n=0),h===void 0&&(h=null),u===void 0&&(u=1),h===null&&(h=n,n=0);for(var l=[],f=Math.max(s((h-n)/(u||1)),0),c=0;c<f;c++)l.push(n),n+=u;return l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(74),a=function(n,h,u,l){if(l===void 0&&(l=n),h<0||h>n.length-1)throw new Error("Index out of bounds");var f=s(n,h);return u&&u.call(l,f),f};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),a=function(n,h,u,l,f){if(h===void 0&&(h=0),u===void 0&&(u=n.length),f===void 0&&(f=n),s(n,h,u)){var c=u-h,d=n.splice(h,c);if(l)for(var v=0;v<d.length;v++){var p=d[v];l.call(f,p)}return d}else return[]};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(74),a=function(n,h,u){h===void 0&&(h=0),u===void 0&&(u=n.length);var l=h+Math.floor(Math.random()*u);return s(n,l)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=s.indexOf(a),u=s.indexOf(n);return h!==-1&&u===-1?(s[h]=n,!0):!1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.indexOf(a);return n!==-1&&n>0&&(s.splice(n,1),s.unshift(a)),a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),a=function(n,h,u,l,f){if(l===void 0&&(l=0),f===void 0&&(f=n.length),s(n,l,f))for(var c=l;c<f;c++){var d=n[c];d.hasOwnProperty(h)&&(d[h]=u)}return n};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){if(a===n)return s;var h=s.indexOf(a),u=s.indexOf(n);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return s[h]=n,s[u]=a,s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(211),n=i(24),h=i(20),u=new s({Extends:a,initialize:function(f){a.call(this),this.checkQueue=!0,this.scene=f,this.systems=f.sys,f.sys.events.once(h.BOOT,this.boot,this),f.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var l=this.systems.events;l.on(h.PRE_UPDATE,this.update,this),l.on(h.UPDATE,this.sceneUpdate,this),l.once(h.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(l,f){for(var c=this._active,d=c.length,v=0;v<d;v++){var p=c[v];p.active&&p.preUpdate.call(p,l,f)}},shutdown:function(){for(var l=this._active.length;l--;)this._active[l].destroy(!0);for(l=this._pending.length;l--;)this._pending[l].destroy(!0);for(l=this._destroy.length;l--;)this._destroy[l].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var f=this.systems.events;f.off(h.PRE_UPDATE,this.update,this),f.off(h.UPDATE,this.sceneUpdate,this),f.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});n.register("UpdateList",u,"updateList"),e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){if(n===void 0&&(n=!1),h===void 0)return h={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},h;var u=s.text,l=u.length,f=s.maxWidth,c=s.wordWrapCharCode,d=Number.MAX_VALUE,v=Number.MAX_VALUE,p=0,g=0,m=s.fontData.chars,x=s.fontData.lineHeight,y=s.letterSpacing,T=0,S=0,C=0,E=null,P=s._align,M=0,R=0,A=s.fontSize/s.fontData.size,O=A*s.scaleX,F=A*s.scaleY,b=null,w=0,N=[],V=Number.MAX_VALUE,W=0,U=0,D=0,L,I=[],B=[],G=null;if(f>0){for(L=0;L<l;L++){if(C=u.charCodeAt(L),C===10){G!==null&&(I.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F,cr:!0}),G=null),T=0,S+=x,b=null;continue}if(E=m[C],!!E){if(b!==null)var z=E.kerning[w];C===c?G!==null&&(I.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F,cr:!1}),G=null):(G===null&&(G={word:"",i:L,x:T,y:S,w:0,h:x,cr:!1}),G.word=G.word.concat(u[L]),G.w+=E.xOffset+E.xAdvance+(z!==void 0?z:0)),T+=E.xAdvance+y,b=E,w=C}}G!==null&&I.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F,cr:!1}),T=0,S=0,b=null,w=0;var Y,X=0,H=[];for(L=0;L<I.length;L++){var $=I[L],k=$.x,K=$.x+$.w;if(Y){var Z=k-(Y.x+Y.w);X=k-(Z+Y.w),Y=null}var j=k-X,J=K-X;j>f||J>f?(H.push($.i-1),$.cr?(H.push($.i+$.word.length),X=0,Y=null):Y=$):$.cr&&(H.push($.i+$.word.length),X=0,Y=null)}var q=function(bt,Ot,ne){return bt.substr(0,Ot)+ne+bt.substr(Ot+1)};for(L=H.length-1;L>=0;L--)u=q(u,H[L],`
`);h.wrappedText=u,l=u.length,I=[],G=null}var ot=0;for(L=0;L<l;L++){if(C=u.charCodeAt(L),C===10){G!==null&&(I.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F}),G=null),T=0,S+=x,b=null,N[U]=D,D>W&&(W=D),D<V&&(V=D),U++,D=0;continue}if(E=m[C],!!E){if(M=T,R=S,b!==null){var nt=E.kerning[w];M+=nt!==void 0?nt:0}d>M&&(d=M),v>R&&(v=R);var tt=M+E.xAdvance,Q=R+x;p<tt&&(p=tt),g<Q&&(g=Q);var lt=E.xOffset+E.xAdvance+(nt!==void 0?nt:0);C===c?G!==null&&(I.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F}),G=null):(G===null&&(G={word:"",i:ot,x:T,y:S,w:0,h:x}),G.word=G.word.concat(u[L]),G.w+=lt),B.push({i:ot,char:u[L],code:C,x:(E.xOffset+T)*A,y:(E.yOffset+S)*A,w:E.width*A,h:E.height*A,t:S*A,r:tt*A,b:x*A,line:U,glyph:E}),T+=E.xAdvance+y,b=E,w=C,D=tt*A,ot++}}if(G!==null&&I.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F}),N[U]=D,D>W&&(W=D),D<V&&(V=D),P>0)for(var et=0;et<B.length;et++){var at=B[et];if(P===1){var ie=(W-N[at.line])/2;at.x+=ie,at.r+=ie}else if(P===2){var se=W-N[at.line];at.x+=se,at.r+=se}}var Et=h.local,vt=h.global,It=h.lines;return Et.x=d*A,Et.y=v*A,Et.width=p*A,Et.height=g*A,vt.x=s.x-s._displayOriginX+d*O,vt.y=s.y-s._displayOriginY+v*F,vt.width=p*O,vt.height=g*F,It.shortest=V,It.longest=W,It.lengths=N,a&&(Et.x=Math.ceil(Et.x),Et.y=Math.ceil(Et.y),Et.width=Math.ceil(Et.width),Et.height=Math.ceil(Et.height),vt.x=Math.ceil(vt.x),vt.y=Math.ceil(vt.y),vt.width=Math.ceil(vt.width),vt.height=Math.ceil(vt.height),It.shortest=Math.ceil(V),It.longest=Math.ceil(W)),n&&(s._displayOriginX=s.originX*Et.width,s._displayOriginY=s.originY*Et.height,vt.x=s.x-s._displayOriginX*s.scaleX,vt.y=s.y-s._displayOriginY*s.scaleY,a&&(vt.x=Math.ceil(vt.x),vt.y=Math.ceil(vt.y))),h.words=I,h.characters=B,h.lines.height=x,h.scale=A,h.scaleX=s.scaleX,h.scaleY=s.scaleY,h};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(212),a=function(n,h,u,l,f,c,d){var v=n.sys.textures.get(u),p=v.get(l),g=n.sys.cache.xml.get(f);if(p&&g){var m=s(g,p,c,d,v);return n.sys.cache.bitmapFont.add(h,{data:m,texture:u,frame:l,fromAtlas:!0}),!0}else return!1};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1046),a=i(1048),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1047),a=i(19),n=i(12),h=function(u,l,f,c){var d=l._text,v=d.length;if(v!==0){f.addToRenderList(l);var p=u.pipelines.set(l.pipeline,l),g=a(l,f,c).calc,m=f.roundPixels,x=f.alpha,y=l.charColors,T=l.tintFill,S=n.getTintAppendFloatAlpha,C=S(l.tintTopLeft,x*l._alphaTL),E=S(l.tintTopRight,x*l._alphaTR),P=S(l.tintBottomLeft,x*l._alphaBL),M=S(l.tintBottomRight,x*l._alphaBR),R=l.frame.glTexture,A=p.setGameObject(l),O=l.getTextBounds(!1),F,b,w,N=O.characters,V=l.dropShadowX,W=l.dropShadowY,U=V!==0||W!==0;if(u.pipelines.preBatch(l),U){var D=l.dropShadowColor,L=l.dropShadowAlpha,I=S(D,x*L*l._alphaTL),B=S(D,x*L*l._alphaTR),G=S(D,x*L*l._alphaBL),z=S(D,x*L*l._alphaBR);for(F=0;F<N.length;F++)b=N[F],w=b.glyph,!(b.code===32||w.width===0||w.height===0)&&s(p,l,b,w,V,W,g,m,I,B,G,z,1,R,A)}for(F=0;F<N.length;F++)if(b=N[F],w=b.glyph,!(b.code===32||w.width===0||w.height===0))if(y[b.i]){var Y=y[b.i],X=Y.tintEffect,H=S(Y.tintTL,x*l._alphaTL),$=S(Y.tintTR,x*l._alphaTR),k=S(Y.tintBL,x*l._alphaBL),K=S(Y.tintBR,x*l._alphaBR);s(p,l,b,w,0,0,g,m,H,$,k,K,X,R,A)}else s(p,l,b,w,0,0,g,m,C,E,P,M,T,R,A);u.pipelines.postBatch(l)}};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u,l,f,c,d,v,p,g,m,x,y){var T=n.x-a.displayOriginX+u,S=n.y-a.displayOriginY+l,C=T+n.w,E=S+n.h,P=f.getXRound(T,S,c),M=f.getYRound(T,S,c),R=f.getXRound(T,E,c),A=f.getYRound(T,E,c),O=f.getXRound(C,E,c),F=f.getYRound(C,E,c),b=f.getXRound(C,S,c),w=f.getYRound(C,S,c);s.batchQuad(a,P,M,R,A,O,F,b,w,h.u0,h.v0,h.u1,h.v1,d,v,p,g,m,x,y)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(30),a=function(n,h,u,l){var f=h._text,c=f.length,d=n.currentContext;if(!(c===0||!s(n,d,h,u,l))){u.addToRenderList(h);var v=h.fromAtlas?h.frame:h.texture.frames.__BASE,p=h.fontData.chars,g=h.fontData.lineHeight,m=h._letterSpacing,x=0,y=0,T=0,S=null,C=0,E=0,P=0,M=0,R=0,A=0,O=null,F=0,b=v.source.image,w=v.cutX,N=v.cutY,V=h._fontSize/h.fontData.size,W=h._align,U=0,D=0,L=h.getTextBounds(!1);h.maxWidth>0&&(f=L.wrappedText,c=f.length);var I=h._bounds.lines;W===1?D=(I.longest-I.lengths[0])/2:W===2&&(D=I.longest-I.lengths[0]),d.translate(-h.displayOriginX,-h.displayOriginY);for(var B=u.roundPixels,G=0;G<c;G++){if(T=f.charCodeAt(G),T===10){U++,W===1?D=(I.longest-I.lengths[U])/2:W===2&&(D=I.longest-I.lengths[U]),x=0,y+=g,O=null;continue}if(S=p[T],!!S){if(C=w+S.x,E=N+S.y,P=S.width,M=S.height,R=S.xOffset+x,A=S.yOffset+y,O!==null){var z=S.kerning[F];R+=z!==void 0?z:0}R*=V,A*=V,R+=D,x+=S.xAdvance+m,O=S,F=T,!(P===0||M===0||T===32)&&(B&&(R=Math.round(R),A=Math.round(A)),d.save(),d.translate(R,A),d.scale(V,V),d.drawImage(b,C,E,P,M,0,0,P,M),d.restore())}}d.restore()}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1050),a=i(1051),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(25),a=i(12),n=new s,h=function(u,l,f,c){var d=l.getRenderList();if(d.length!==0){var v=f.alpha*l.alpha;if(v!==0){f.addToRenderList(l);var p=u.pipelines.set(this.pipeline,l),g=f.scrollX*l.scrollFactorX,m=f.scrollY*l.scrollFactorY,x=n.copyFrom(f.matrix);c&&(x.multiplyWithOffset(c,-g,-m),g=0,m=0);var y=l.x-g,T=l.y-m,S=-1,C=!1,E=f.roundPixels;u.pipelines.preBatch(l);for(var P=0;P<d.length;P++){var M=d[P],R=M.frame,A=M.alpha*v;if(A!==0){var O=R.width,F=R.height,b=y+M.x+R.x,w=T+M.y+R.y;M.flipX&&(O*=-1,b+=R.width),M.flipY&&(F*=-1,w+=R.height);var N=b+O,V=w+F,W=x.getX(b,w),U=x.getY(b,w),D=x.getX(N,V),L=x.getY(N,V),I=a.getTintAppendFloatAlpha(M.tint,A);if(R.sourceIndex!==S){var B=p.setGameObject(l,R);S=R.sourceIndex}E&&(W=Math.round(W),U=Math.round(U),D=Math.round(D),L=Math.round(L)),p.batchQuad(l,W,U,W,L,D,L,D,U,R.u0,R.v0,R.u1,R.v1,I,I,I,I,C,R.glTexture,B)&&(S=-1)}}u.pipelines.postBatch(l)}}};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u=a.getRenderList();if(u.length!==0){var l=s.currentContext,f=n.alpha*a.alpha;if(f!==0){n.addToRenderList(a),l.globalCompositeOperation=s.blendModes[a.blendMode],l.imageSmoothingEnabled=!(!s.antialias||a.frame.source.scaleMode);var c=a.x-n.scrollX*a.scrollFactorX,d=a.y-n.scrollY*a.scrollFactorY;l.save(),h&&h.copyToContext(l);for(var v=n.roundPixels,p=0;p<u.length;p++){var g=u[p],m=g.flipX||g.flipY,x=g.frame,y=x.canvasData,T=x.x,S=x.y,C=1,E=1,P=g.alpha*f;P!==0&&(l.globalAlpha=P,m?(g.flipX&&(C=-1,T-=y.width),g.flipY&&(E=-1,S-=y.height),l.save(),l.translate(g.x+c,g.y+d),l.scale(C,E),l.drawImage(x.source.image,y.x,y.y,y.width,y.height,T,S,y.width,y.height),l.restore()):(v&&(T=Math.round(T),S=Math.round(S)),l.drawImage(x.source.image,y.x,y.y,y.width,y.height,T+g.x+c,S+g.y+d,y.width,y.height)))}l.restore()}}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1053),a=i(1054),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){n.addToRenderList(a);var u=a.list,l=u.length;if(l!==0){var f=a.localTransform;h?(f.loadIdentity(),f.multiply(h),f.translate(a.x,a.y),f.rotate(a.rotation),f.scale(a.scaleX,a.scaleY)):f.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),s.pipelines.preBatch(a);var c=a.blendMode!==-1;c||s.setBlendMode(0);for(var d=a.alpha,v=a.scrollFactorX,p=a.scrollFactorY,g=0;g<l;g++){var m=u[g];if(!!m.willRender(n)){var x,y,T,S;if(m.alphaTopLeft!==void 0)x=m.alphaTopLeft,y=m.alphaTopRight,T=m.alphaBottomLeft,S=m.alphaBottomRight;else{var C=m.alpha;x=C,y=C,T=C,S=C}var E=m.scrollFactorX,P=m.scrollFactorY;!c&&m.blendMode!==s.currentBlendMode&&s.setBlendMode(m.blendMode);var M=m.mask;M&&M.preRenderWebGL(s,m,n);var R=m.type;R!==s.currentType&&(s.newType=!0,s.currentType=R),s.nextTypeMatch=g<l-1?u[g+1].type===s.currentType:!1,m.setScrollFactor(E*v,P*p),m.setAlpha(x*d,y*d,T*d,S*d),m.renderWebGL(s,m,n,f),m.setAlpha(x,y,T,S),m.setScrollFactor(E,P),M&&M.postRenderWebGL(s,n),s.newType=!1}}s.pipelines.postBatch(a)}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){n.addToRenderList(a);var u=a.list;if(u.length!==0){var l=a.localTransform;h?(l.loadIdentity(),l.multiply(h),l.translate(a.x,a.y),l.rotate(a.rotation),l.scale(a.scaleX,a.scaleY)):l.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var f=a.blendMode!==-1;f||s.setBlendMode(0);var c=a._alpha,d=a.scrollFactorX,v=a.scrollFactorY;a.mask&&a.mask.preRenderCanvas(s,null,n);for(var p=0;p<u.length;p++){var g=u[p];if(!!g.willRender(n)){var m=g.alpha,x=g.scrollFactorX,y=g.scrollFactorY;!f&&g.blendMode!==s.currentBlendMode&&s.setBlendMode(g.blendMode),g.setScrollFactor(x*d,y*v),g.setAlpha(m*c),g.renderCanvas(s,g,n,l),g.setAlpha(m),g.setScrollFactor(x,y)}}a.mask&&a.mask.postRenderCanvas(s)}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(443),a=i(443),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1058),a=i(1059),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=i(25),n=i(12),h=new a,u=function(l,f,c,d){var v=f.text,p=v.length;if(p!==0){c.addToRenderList(f);var g=l.pipelines.set(f.pipeline,f),m=s(f,c,d),x=m.sprite,y=m.calc,T=h,S=f.cropWidth>0||f.cropHeight>0;S&&(g.flush(),l.pushScissor(y.tx,y.ty,f.cropWidth*y.scaleX,f.cropHeight*y.scaleY));var C=f.frame,E=C.glTexture,P=f.tintFill,M=n.getTintAppendFloatAlpha(f.tintTopLeft,c.alpha*f._alphaTL),R=n.getTintAppendFloatAlpha(f.tintTopRight,c.alpha*f._alphaTR),A=n.getTintAppendFloatAlpha(f.tintBottomLeft,c.alpha*f._alphaBL),O=n.getTintAppendFloatAlpha(f.tintBottomRight,c.alpha*f._alphaBR),F=g.setGameObject(f),b=0,w=0,N=0,V=0,W=f.letterSpacing,U,D=0,L=0,I,B=f.scrollX,G=f.scrollY,z=f.fontData,Y=z.chars,X=z.lineHeight,H=f.fontSize/z.size,$=0,k=f._align,K=0,Z=0,j=f.getTextBounds(!1);f.maxWidth>0&&(v=j.wrappedText,p=v.length);var J=f._bounds.lines;k===1?Z=(J.longest-J.lengths[0])/2:k===2&&(Z=J.longest-J.lengths[0]);var q=c.roundPixels,ot=f.displayCallback,nt=f.callbackData;l.pipelines.preBatch(f);for(var tt=0;tt<p;tt++){if(N=v.charCodeAt(tt),N===10){K++,k===1?Z=(J.longest-J.lengths[K])/2:k===2&&(Z=J.longest-J.lengths[K]),b=0,w+=X,I=null;continue}if(U=Y[N],!!U){D=U.width,L=U.height;var Q=U.xOffset+b-B,lt=U.yOffset+w-G;if(I!==null){var et=U.kerning[V];Q+=et!==void 0?et:0}if(b+=U.xAdvance+W,I=U,V=N,!(D===0||L===0||N===32)){if(H=f.fontSize/f.fontData.size,$=0,ot){nt.color=0,nt.tint.topLeft=M,nt.tint.topRight=R,nt.tint.bottomLeft=A,nt.tint.bottomRight=O,nt.index=tt,nt.charCode=N,nt.x=Q,nt.y=lt,nt.scale=H,nt.rotation=$,nt.data=U.data;var at=ot(nt);Q=at.x,lt=at.y,H=at.scale,$=at.rotation,at.color?(M=at.color,R=at.color,A=at.color,O=at.color):(M=at.tint.topLeft,R=at.tint.topRight,A=at.tint.bottomLeft,O=at.tint.bottomRight),M=n.getTintAppendFloatAlpha(M,c.alpha*f._alphaTL),R=n.getTintAppendFloatAlpha(R,c.alpha*f._alphaTR),A=n.getTintAppendFloatAlpha(A,c.alpha*f._alphaBL),O=n.getTintAppendFloatAlpha(O,c.alpha*f._alphaBR)}Q*=H,lt*=H,Q-=f.displayOriginX,lt-=f.displayOriginY,Q+=Z,T.applyITRS(Q,lt,$,H,H),y.multiply(T,x);var ie=U.u0,se=U.v0,Et=U.u1,vt=U.v1,It=D,bt=L,Ot=x.e,ne=x.f,ii=bt*x.c+x.e,si=bt*x.d+x.f,ni=It*x.a+bt*x.c+x.e,ri=It*x.b+bt*x.d+x.f,ai=It*x.a+x.e,oi=It*x.b+x.f;q&&(Ot=Math.round(Ot),ne=Math.round(ne),ii=Math.round(ii),si=Math.round(si),ni=Math.round(ni),ri=Math.round(ri),ai=Math.round(ai),oi=Math.round(oi)),g.batchQuad(f,Ot,ne,ii,si,ni,ri,ai,oi,ie,se,Et,vt,M,R,A,O,P,E,F)}}}S&&(g.flush(),l.popScissor()),l.pipelines.postBatch(f)}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(30),a=function(n,h,u,l){var f=h._text,c=f.length,d=n.currentContext;if(!(c===0||!s(n,d,h,u,l))){u.addToRenderList(h);var v=h.fromAtlas?h.frame:h.texture.frames.__BASE,p=h.displayCallback,g=h.callbackData,m=h.fontData.chars,x=h.fontData.lineHeight,y=h._letterSpacing,T=0,S=0,C=0,E=null,P=0,M=0,R=0,A=0,O=0,F=0,b=null,w=0,N=h.frame.source.image,V=v.cutX,W=v.cutY,U=0,D=0,L=h._fontSize/h.fontData.size,I=h._align,B=0,G=0;h.getTextBounds(!1);var z=h._bounds.lines;I===1?G=(z.longest-z.lengths[0])/2:I===2&&(G=z.longest-z.lengths[0]),d.translate(-h.displayOriginX,-h.displayOriginY);var Y=u.roundPixels;h.cropWidth>0&&h.cropHeight>0&&(d.beginPath(),d.rect(0,0,h.cropWidth,h.cropHeight),d.clip());for(var X=0;X<c;X++){if(D=L,U=0,C=f.charCodeAt(X),C===10){B++,I===1?G=(z.longest-z.lengths[B])/2:I===2&&(G=z.longest-z.lengths[B]),T=0,S+=x,b=null;continue}if(E=m[C],!!E){if(P=V+E.x,M=W+E.y,R=E.width,A=E.height,O=E.xOffset+T-h.scrollX,F=E.yOffset+S-h.scrollY,b!==null){var H=E.kerning[w];O+=H!==void 0?H:0}if(p){g.index=X,g.charCode=C,g.x=O,g.y=F,g.scale=D,g.rotation=U,g.data=E.data;var $=p(g);O=$.x,F=$.y,D=$.scale,U=$.rotation}O*=D,F*=D,O+=G,T+=E.xAdvance+y,b=E,w=C,!(R===0||A===0||C===32)&&(Y&&(O=Math.round(O),F=Math.round(F)),d.save(),d.translate(O,F),d.rotate(U),d.scale(D,D),d.drawImage(N,P,M,R,A,0,0,R,A),d.restore())}}d.restore()}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1061),a=i(1062),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=function(n,h,u,l){n.pipelines.clear();var f=s(h,u,l).calc;h.render.call(h,n,u,f),n.pipelines.rebind()};e.exports=a},function(e,r){},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1064),a=i(448),a=i(448),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(217),a=i(19),n=i(25),h=i(12),u=function(v,p,g){this.x=v,this.y=p,this.width=g},l=function(v,p,g){this.points=[],this.pointsLength=1,this.points[0]=new u(v,p,g)},f=[],c=new n,d=function(v,p,g,m){if(p.commandBuffer.length!==0){g.addToRenderList(p);var x=v.pipelines.set(p.pipeline,p);v.pipelines.preBatch(p);for(var y=a(p,g,m).calc,T=c.loadIdentity(),S=p.commandBuffer,C=g.alpha*p.alpha,E=1,P=x.fillTint,M=x.strokeTint,R=0,A=0,O=0,F=.01,b=Math.PI*2,w,N=[],V=0,W=!0,U=null,D=h.getTintAppendFloatAlpha,L=0;L<S.length;L++)switch(w=S[L],w){case s.BEGIN_PATH:{N.length=0,U=null,W=!0;break}case s.CLOSE_PATH:{W=!1,U&&U.points.length&&U.points.push(U.points[0]);break}case s.FILL_PATH:{for(V=0;V<N.length;V++)x.batchFillPath(N[V].points,T,y);break}case s.STROKE_PATH:{for(V=0;V<N.length;V++)x.batchStrokePath(N[V].points,E,W,T,y);break}case s.LINE_STYLE:{E=S[++L];var I=S[++L],B=S[++L]*C,G=D(I,B);M.TL=G,M.TR=G,M.BL=G,M.BR=G;break}case s.FILL_STYLE:{var z=S[++L],Y=S[++L]*C,X=D(z,Y);P.TL=X,P.TR=X,P.BL=X,P.BR=X;break}case s.GRADIENT_FILL_STYLE:{var H=S[++L]*C,$=S[++L]*C,k=S[++L]*C,K=S[++L]*C;P.TL=D(S[++L],H),P.TR=D(S[++L],$),P.BL=D(S[++L],k),P.BR=D(S[++L],K);break}case s.GRADIENT_LINE_STYLE:{E=S[++L];var Z=S[++L]*C;M.TL=D(S[++L],Z),M.TR=D(S[++L],Z),M.BL=D(S[++L],Z),M.BR=D(S[++L],Z);break}case s.ARC:{var j=0,J=S[++L],q=S[++L],ot=S[++L],nt=S[++L],tt=S[++L],Q=S[++L],lt=S[++L];for(tt-=nt,Q?tt<-b?tt=-b:tt>0&&(tt=-b+tt%b):tt>b?tt=b:tt<0&&(tt=b+tt%b),U===null&&(U=new l(J+Math.cos(nt)*ot,q+Math.sin(nt)*ot,E),N.push(U),j+=F);j<1+lt;)O=tt*j+nt,R=J+Math.cos(O)*ot,A=q+Math.sin(O)*ot,U.points.push(new u(R,A,E)),j+=F;O=tt+nt,R=J+Math.cos(O)*ot,A=q+Math.sin(O)*ot,U.points.push(new u(R,A,E));break}case s.FILL_RECT:{x.batchFillRect(S[++L],S[++L],S[++L],S[++L],T,y);break}case s.FILL_TRIANGLE:{x.batchFillTriangle(S[++L],S[++L],S[++L],S[++L],S[++L],S[++L],T,y);break}case s.STROKE_TRIANGLE:{x.batchStrokeTriangle(S[++L],S[++L],S[++L],S[++L],S[++L],S[++L],E,T,y);break}case s.LINE_TO:{U!==null?U.points.push(new u(S[++L],S[++L],E)):(U=new l(S[++L],S[++L],E),N.push(U));break}case s.MOVE_TO:{U=new l(S[++L],S[++L],E),N.push(U);break}case s.SAVE:{f.push(T.copyToArray());break}case s.RESTORE:{T.copyFromArray(f.pop());break}case s.TRANSLATE:{J=S[++L],q=S[++L],T.translate(J,q);break}case s.SCALE:{J=S[++L],q=S[++L],T.scale(J,q);break}case s.ROTATE:{T.rotate(S[++L]);break}}v.pipelines.postBatch(p)}};e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1066),a=i(1067),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){n.addToRenderList(a),a.pipeline.batchSprite(a,n,h)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){n.addToRenderList(a),s.batchSprite(a,a.frame,n,h)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1069),a=i(1070),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){n.addToRenderList(a),this.pipeline.batchSprite(a,n,h)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){n.addToRenderList(a),s.batchSprite(a,a.frame,n,h)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1072),a=i(1073),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=a.list,u=h.length;if(u!==0){a.depthSort(),s.pipelines.preBatch(a);var l=a.blendMode!==-1;l||s.setBlendMode(0);for(var f=a.alpha,c=0;c<u;c++){var d=h[c];if(!!d.willRender(n)){var v,p,g,m;if(d.alphaTopLeft!==void 0)v=d.alphaTopLeft,p=d.alphaTopRight,g=d.alphaBottomLeft,m=d.alphaBottomRight;else{var x=d.alpha;v=x,p=x,g=x,m=x}!l&&d.blendMode!==s.currentBlendMode&&s.setBlendMode(d.blendMode);var y=d.mask;y&&y.preRenderWebGL(s,d,n);var T=d.type;T!==s.currentType&&(s.newType=!0,s.currentType=T),s.nextTypeMatch=c<u-1?h[c+1].type===s.currentType:!1,d.setAlpha(v*f,p*f,g*f,m*f),d.renderWebGL(s,d,n),d.setAlpha(v,p,g,m),y&&y.postRenderWebGL(s,n),s.newType=!1}}s.pipelines.postBatch(a)}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=a.list;if(h.length!==0){a.depthSort();var u=a.blendMode!==-1;u||s.setBlendMode(0);var l=a._alpha;a.mask&&a.mask.preRenderCanvas(s,null,n);for(var f=0;f<h.length;f++){var c=h[f];if(!!c.willRender(n)){var d=c.alpha;!u&&c.blendMode!==s.currentBlendMode&&s.setBlendMode(c.blendMode),c.setAlpha(d*l),c.renderCanvas(s,c,n),c.setAlpha(d)}}a.mask&&a.mask.postRenderCanvas(s)}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EmitterOp:i(449),GravityWell:i(450),Particle:i(451),ParticleEmitter:i(452),ParticleEmitterManager:i(220),Zones:i(1078)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1076),a=i(1077),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(25),a=i(12),n=new s,h=new s,u=new s,l=new s,f=function(c,d,v,p){var g=d.emitters.list,m=g.length;if(m!==0){var x=c.pipelines.set(d.pipeline),y=n,T=h,S=u,C=l;p?(C.loadIdentity(),C.multiply(p),C.translate(d.x,d.y),C.rotate(d.rotation),C.scale(d.scaleX,d.scaleY)):C.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var E=v.roundPixels,P=d.defaultFrame.glTexture,M=a.getTintAppendFloatAlpha,R=x.setGameObject(d,d.defaultFrame);c.pipelines.preBatch(d);for(var A=0;A<m;A++){var O=g[A],F=O.alive,b=F.length;if(!(!O.visible||b===0)){v.addToRenderList(O);var w=O.scrollFactorX,N=O.scrollFactorY;c.setBlendMode(O.blendMode),O.mask&&(O.mask.preRenderWebGL(c,O,v),c.pipelines.set(d.pipeline));for(var V=0,W=0;W<b;W++){var U=F[W],D=U.alpha*v.alpha;if(!(D<=0)){S.applyITRS(U.x,U.y,U.rotation,U.scaleX,U.scaleY),y.copyFrom(v.matrix),y.multiplyWithOffset(C,-v.scrollX*w,-v.scrollY*N),S.e=U.x,S.f=U.y,y.multiply(S,T);var L=U.frame,I=-L.halfWidth,B=-L.halfHeight,G=I+L.width,z=B+L.height,Y=T.getXRound(I,B,E),X=T.getYRound(I,B,E),H=T.getXRound(I,z,E),$=T.getYRound(I,z,E),k=T.getXRound(G,z,E),K=T.getYRound(G,z,E),Z=T.getXRound(G,B,E),j=T.getYRound(G,B,E),J=M(U.tint,D);x.batchQuad(O,Y,X,H,$,k,K,Z,j,L.u0,L.v0,L.u1,L.v1,J,J,J,J,V,P,R)}}O.mask&&O.mask.postRenderWebGL(c,v)}}c.pipelines.postBatch(d)}};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(25),a=new s,n=new s,h=new s,u=new s,l=function(f,c,d,v){var p=c.emitters.list,g=p.length;if(g!==0){var m=a.copyFrom(d.matrix),x=n,y=h,T=u;v?(T.loadIdentity(),T.multiply(v),T.translate(c.x,c.y),T.rotate(c.rotation),T.scale(c.scaleX,c.scaleY)):T.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);for(var S=f.currentContext,C=d.roundPixels,E=0;E<g;E++){var P=p[E],M=P.alive,R=M.length;if(!(!P.visible||R===0)){d.addToRenderList(P);var A=P.scrollFactorX,O=P.scrollFactorY;S.save(),S.globalCompositeOperation=f.blendModes[P.blendMode];for(var F=0;F<R;F++){var b=M[F],w=b.alpha*d.alpha;if(!(w<=0)){y.applyITRS(b.x,b.y,b.rotation,b.scaleX,b.scaleY),m.copyFrom(d.matrix),m.multiplyWithOffset(T,-d.scrollX*A,-d.scrollY*O),y.e=b.x,y.f=b.y,m.multiply(y,x);var N=b.frame,V=N.canvasData,W=-N.halfWidth,U=-N.halfHeight;S.globalAlpha=w,S.save(),x.setToContext(S),C&&(W=Math.round(W),U=Math.round(U)),S.imageSmoothingEnabled=!(!f.antialias||N.source.scaleMode),S.drawImage(N.source.image,V.x,V.y,V.width,V.height,W,U,V.width,V.height),S.restore()}}S.restore()}}}};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DeathZone:i(453),EdgeZone:i(454),RandomZone:i(456)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1080),a=i(1081),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),a=function(n,h,u,l){u.addToRenderList(h);var f=u.alpha,c=h.renderTarget,d=c.width,v=c.height,p=s.getTintAppendFloatAlpha,g=n.pipelines.set(h.pipeline),m=g.setTexture2D(c.texture);n.pipelines.preBatch(h),g.batchTexture(h,c.texture,d,v,h.x,h.y,d,v,h.scaleX,h.scaleY,h.rotation,h.flipX,!h.flipY,h.scrollFactorX,h.scrollFactorY,h.displayOriginX,h.displayOriginY,0,0,d,v,p(h.tintTopLeft,f*h._alphaTL),p(h.tintTopRight,f*h._alphaTR),p(h.tintBottomLeft,f*h._alphaBL),p(h.tintBottomRight,f*h._alphaBR),h.tintFill,0,0,u,l,!0,m),n.resetTextures(),n.pipelines.postBatch(h)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){n.addToRenderList(a),s.batchSprite(a,a.frame,n,h)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1083),a=i(17),n={Parse:i(1084)};n=a(!1,n,s),e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),a=function(n,h){var u=h.width,l=h.height,f=Math.floor(u/2),c=Math.floor(l/2),d=s(h,"chars","");if(d!==""){var v=s(h,"image",""),p=n.sys.textures.getFrame(v),g=p.cutX,m=p.cutY,x=p.source.width,y=p.source.height,T=s(h,"offset.x",0),S=s(h,"offset.y",0),C=s(h,"spacing.x",0),E=s(h,"spacing.y",0),P=s(h,"lineSpacing",0),M=s(h,"charsPerRow",null);M===null&&(M=x/u,M>d.length&&(M=d.length));for(var R=T,A=S,O={retroFont:!0,font:v,size:u,lineHeight:l+P,chars:{}},F=0,b=0;b<d.length;b++){var w=d.charCodeAt(b),N=(g+R)/x,V=(m+A)/y,W=(g+R+u)/x,U=(m+A+l)/y;O.chars[w]={x:R,y:A,width:u,height:l,centerX:f,centerY:c,xOffset:0,yOffset:0,xAdvance:u,data:{},kerning:{},u0:N,v0:V,u1:W,v1:U},F++,F===M?(F=0,R=T,A+=l+E):R+=u+C}var D={data:O,frame:null,texture:v};return D}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1086),a=i(1087),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=i(12),n=function(h,u,l,f){l.addToRenderList(u);var c=h.pipelines.set(u.pipeline,u),d=s(u,l,f).calc,v=u.vertices,p=u.uv,g=u.colors,m=u.alphas,x=u.alpha,y=a.getTintAppendFloatAlpha,T=l.roundPixels,S=v.length,C=Math.floor(S*.5);c.flush(),h.pipelines.preBatch(u);var E=c.setGameObject(u),P=c.vertexViewF32,M=c.vertexViewU32,R=c.vertexCount*c.currentShader.vertexComponentCount-1,A=0,O=u.tintFill;u.dirty&&u.updateVertices();for(var F=u.debugCallback,b=[],w=0;w<S;w+=2){var N=v[w+0],V=v[w+1],W=N*d.a+V*d.c+d.e,U=N*d.b+V*d.d+d.f;T&&(W=Math.round(W),U=Math.round(U)),P[++R]=W,P[++R]=U,P[++R]=p[w+0],P[++R]=p[w+1],P[++R]=E,P[++R]=O,M[++R]=y(g[A],l.alpha*(m[A]*x)),A++,F&&(b[w+0]=W,b[w+1]=U)}F&&F.call(u,u,S,b),c.vertexCount+=C,h.pipelines.postBatch(u)};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1089),a=i(1090),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),a=function(n,h,u,l){if(!(h.width===0||h.height===0)){u.addToRenderList(h);var f=h.frame,c=f.width,d=f.height,v=s.getTintAppendFloatAlpha,p=n.pipelines.set(h.pipeline,h),g=p.setTexture2D(f.glTexture,h);n.pipelines.preBatch(h),p.batchTexture(h,f.glTexture,c,d,h.x,h.y,c/h.style.resolution,d/h.style.resolution,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.displayOriginX,h.displayOriginY,0,0,c,d,v(h.tintTopLeft,u.alpha*h._alphaTL),v(h.tintTopRight,u.alpha*h._alphaTR),v(h.tintBottomLeft,u.alpha*h._alphaBL),v(h.tintBottomRight,u.alpha*h._alphaBR),h.tintFill,0,0,u,l,!1,g),n.pipelines.postBatch(h)}};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){a.width===0||a.height===0||(n.addToRenderList(a),s.batchSprite(a,a.frame,n,h))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1092),a=i(1093),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),a=function(n,h,u,l){h.updateCanvas();var f=h.width,c=h.height;if(!(f===0||c===0)){u.addToRenderList(h),n.pipelines.preBatch(h);var d=s.getTintAppendFloatAlpha,v=n.pipelines.set(h.pipeline,h),p=v.setTexture2D(h.fillPattern,h);v.batchTexture(h,h.fillPattern,h.displayFrame.width*h.tileScaleX,h.displayFrame.height*h.tileScaleY,h.x,h.y,f,c,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.originX*f,h.originY*c,0,0,f,c,d(h.tintTopLeft,u.alpha*h._alphaTL),d(h.tintTopRight,u.alpha*h._alphaTR),d(h.tintBottomLeft,u.alpha*h._alphaBL),d(h.tintBottomRight,u.alpha*h._alphaBR),h.tintFill,h.tilePositionX%h.displayFrame.width/h.displayFrame.width,h.tilePositionY%h.displayFrame.height/h.displayFrame.height,u,l,!1,p),n.pipelines.postBatch(h)}};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){a.updateCanvas(),n.addToRenderList(a),s.batchSprite(a,a.frame,n,h)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1095),a=i(1096),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){a.videoTexture&&(n.addToRenderList(a),a.pipeline.batchSprite(a,n,h))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){a.videoTexture&&(n.addToRenderList(a),s.batchSprite(a,a.frame,n,h))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1098),a=i(1099),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=i(114),n=i(81),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=s(l,f,c),p=d.calcMatrix.copyFrom(v.calc),g=l._displayOriginX,m=l._displayOriginY,x=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&a(d,p,l,x,g,m),l.isStroked&&n(d,l,x,g,m),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(36),a=i(48),n=i(60),h=i(30),u=function(l,f,c,d){c.addToRenderList(f);var v=l.currentContext;if(h(l,v,f,c,d)){var p=f.radius;v.beginPath(),v.arc(p-f.originX*(p*2),p-f.originY*(p*2),p,s(f._startAngle),s(f._endAngle),f.anticlockwise),f.closePath&&v.closePath(),f.isFilled&&(a(v,f),v.fill()),f.isStroked&&(n(v,f),v.stroke()),v.restore()}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1101),a=i(1102),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(114),a=i(19),n=i(81),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=a(l,f,c),p=d.calcMatrix.copyFrom(v.calc),g=l._displayOriginX+l._curveBounds.x,m=l._displayOriginY+l._curveBounds.y,x=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&s(d,p,l,x,g,m),l.isStroked&&n(d,l,x,g,m),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),a=i(60),n=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(n(u,d,l,f,c)){var v=l._displayOriginX+l._curveBounds.x,p=l._displayOriginY+l._curveBounds.y,g=l.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;d.beginPath(),d.moveTo(x,y),l.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-v,C=g[T+1]-p;d.lineTo(S,C)}l.closePath&&d.closePath(),l.isFilled&&(s(d,l),d.fill()),l.isStroked&&(a(d,l),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1104),a=i(1105),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(114),a=i(19),n=i(81),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=a(l,f,c),p=d.calcMatrix.copyFrom(v.calc),g=l._displayOriginX,m=l._displayOriginY,x=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&s(d,p,l,x,g,m),l.isStroked&&n(d,l,x,g,m),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),a=i(60),n=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(n(u,d,l,f,c)){var v=l._displayOriginX,p=l._displayOriginY,g=l.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;d.beginPath(),d.moveTo(x,y),l.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-v,C=g[T+1]-p;d.lineTo(S,C)}d.closePath(),l.isFilled&&(s(d,l),d.fill()),l.isStroked&&(a(d,l),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1107),a=i(1108),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=i(12),n=function(h,u,l,f){l.addToRenderList(u);var c=h.pipelines.set(u.pipeline),d=s(u,l,f),v=c.calcMatrix.copyFrom(d.calc);v.translate(-u._displayOriginX,-u._displayOriginY);var p=l.alpha*u.alpha,g=u.width,m=u.height,x=u.cellWidth,y=u.cellHeight,T=Math.ceil(g/x),S=Math.ceil(m/y),C=x,E=y,P=x-(T*x-g),M=y-(S*y-m),R,A,O=u.showCells,F=u.showAltCells,b=u.showOutline,w=0,N=0,V=0,W=0,U=0;if(b&&(C--,E--,P===x&&P--,M===y&&M--),h.pipelines.preBatch(u),O&&u.fillAlpha>0)for(R=c.fillTint,A=a.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*p),R.TL=A,R.TR=A,R.BL=A,R.BR=A,N=0;N<S;N++)for(F&&(V=N%2),w=0;w<T;w++){if(F&&V){V=0;continue}V++,W=w<T-1?C:P,U=N<S-1?E:M,c.batchFillRect(w*x,N*y,W,U)}if(F&&u.altFillAlpha>0)for(R=c.fillTint,A=a.getTintAppendFloatAlpha(u.altFillColor,u.altFillAlpha*p),R.TL=A,R.TR=A,R.BL=A,R.BR=A,N=0;N<S;N++)for(F&&(V=N%2),w=0;w<T;w++){if(F&&!V){V=1;continue}V=0,W=w<T-1?C:P,U=N<S-1?E:M,c.batchFillRect(w*x,N*y,W,U)}if(b&&u.outlineFillAlpha>0){var D=c.strokeTint,L=a.getTintAppendFloatAlpha(u.outlineFillColor,u.outlineFillAlpha*p);for(D.TL=L,D.TR=L,D.BL=L,D.BR=L,w=1;w<T;w++){var I=w*x;c.batchLine(I,0,I,m,1,1,1,0,!1)}for(N=1;N<S;N++){var B=N*y;c.batchLine(0,B,g,B,1,1,1,0,!1)}}h.pipelines.postBatch(u)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),a=i(60),n=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(n(u,d,l,f,c)){var v=-l._displayOriginX,p=-l._displayOriginY,g=f.alpha*l.alpha,m=l.width,x=l.height,y=l.cellWidth,T=l.cellHeight,S=Math.ceil(m/y),C=Math.ceil(x/T),E=y,P=T,M=y-(S*y-m),R=T-(C*T-x),A=l.showCells,O=l.showAltCells,F=l.showOutline,b=0,w=0,N=0,V=0,W=0;if(F&&(E--,P--,M===y&&M--,R===T&&R--),A&&l.fillAlpha>0)for(s(d,l),w=0;w<C;w++)for(O&&(N=w%2),b=0;b<S;b++){if(O&&N){N=0;continue}N++,V=b<S-1?E:M,W=w<C-1?P:R,d.fillRect(v+b*y,p+w*T,V,W)}if(O&&l.altFillAlpha>0)for(s(d,l,l.altFillColor,l.altFillAlpha*g),w=0;w<C;w++)for(O&&(N=w%2),b=0;b<S;b++){if(O&&!N){N=1;continue}N=0,V=b<S-1?E:M,W=w<C-1?P:R,d.fillRect(v+b*y,p+w*T,V,W)}if(F&&l.outlineFillAlpha>0){for(a(d,l,l.outlineFillColor,l.outlineFillAlpha*g),b=1;b<S;b++){var U=b*y;d.beginPath(),d.moveTo(U+v,p),d.lineTo(U+v,x+p),d.stroke()}for(w=1;w<C;w++){var D=w*T;d.beginPath(),d.moveTo(v,D+p),d.lineTo(v+m,D+p),d.stroke()}}d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1110),a=i(1111),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=i(12),n=function(h,u,l,f){l.addToRenderList(u);var c=h.pipelines.set(u.pipeline),d=s(u,l,f),v=c.calcMatrix.copyFrom(d.calc),p=u.width,g=u.height,m=p/2,x=p/u.projection,y=l.alpha*u.alpha;if(!!u.isFilled){var T,S,C,E,P,M,R,A,O;h.pipelines.preBatch(u),u.showTop&&(T=a.getTintAppendFloatAlpha(u.fillTop,y),S=v.getX(-m,-g),C=v.getY(-m,-g),E=v.getX(0,-x-g),P=v.getY(0,-x-g),M=v.getX(m,-g),R=v.getY(m,-g),A=v.getX(0,x-g),O=v.getY(0,x-g),c.batchQuad(u,S,C,E,P,M,R,A,O,0,0,1,1,T,T,T,T,2)),u.showLeft&&(T=a.getTintAppendFloatAlpha(u.fillLeft,y),S=v.getX(-m,0),C=v.getY(-m,0),E=v.getX(0,x),P=v.getY(0,x),M=v.getX(0,x-g),R=v.getY(0,x-g),A=v.getX(-m,-g),O=v.getY(-m,-g),c.batchQuad(u,S,C,E,P,M,R,A,O,0,0,1,1,T,T,T,T,2)),u.showRight&&(T=a.getTintAppendFloatAlpha(u.fillRight,y),S=v.getX(m,0),C=v.getY(m,0),E=v.getX(0,x),P=v.getY(0,x),M=v.getX(0,x-g),R=v.getY(0,x-g),A=v.getX(m,-g),O=v.getY(m,-g),c.batchQuad(u,S,C,E,P,M,R,A,O,0,0,1,1,T,T,T,T,2)),h.pipelines.postBatch(u)}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),a=i(30),n=function(h,u,l,f){l.addToRenderList(u);var c=h.currentContext;if(a(h,c,u,l,f)&&u.isFilled){var d=u.width,v=u.height,p=d/2,g=d/u.projection;u.showTop&&(s(c,u,u.fillTop),c.beginPath(),c.moveTo(-p,-v),c.lineTo(0,-g-v),c.lineTo(p,-v),c.lineTo(p,-1),c.lineTo(0,g-1),c.lineTo(-p,-1),c.lineTo(-p,-v),c.fill()),u.showLeft&&(s(c,u,u.fillLeft),c.beginPath(),c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-v),c.lineTo(-p,-v),c.lineTo(-p,0),c.fill()),u.showRight&&(s(c,u,u.fillRight),c.beginPath(),c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-v),c.lineTo(p,-v),c.lineTo(p,0),c.fill()),c.restore()}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1113),a=i(1114),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=i(12),n=function(h,u,l,f){l.addToRenderList(u);var c=h.pipelines.set(u.pipeline),d=s(u,l,f),v=c.calcMatrix.copyFrom(d.calc),p=u.width,g=u.height,m=p/2,x=p/u.projection,y=u.isReversed,T=l.alpha*u.alpha;if(!!u.isFilled){h.pipelines.preBatch(u);var S,C,E,P,M,R,A;if(u.showTop&&y){S=a.getTintAppendFloatAlpha(u.fillTop,T),C=v.getX(-m,-g),E=v.getY(-m,-g),P=v.getX(0,-x-g),M=v.getY(0,-x-g),R=v.getX(m,-g),A=v.getY(m,-g);var O=v.getX(0,x-g),F=v.getY(0,x-g);c.batchQuad(u,C,E,P,M,R,A,O,F,0,0,1,1,S,S,S,S,2)}u.showLeft&&(S=a.getTintAppendFloatAlpha(u.fillLeft,T),y?(C=v.getX(-m,-g),E=v.getY(-m,-g),P=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),A=v.getY(0,x-g)):(C=v.getX(-m,0),E=v.getY(-m,0),P=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),A=v.getY(0,x-g)),c.batchTri(u,C,E,P,M,R,A,0,0,1,1,S,S,S,2)),u.showRight&&(S=a.getTintAppendFloatAlpha(u.fillRight,T),y?(C=v.getX(m,-g),E=v.getY(m,-g),P=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),A=v.getY(0,x-g)):(C=v.getX(m,0),E=v.getY(m,0),P=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),A=v.getY(0,x-g)),c.batchTri(u,C,E,P,M,R,A,0,0,1,1,S,S,S,2)),h.pipelines.postBatch(u)}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),a=i(30),n=function(h,u,l,f){l.addToRenderList(u);var c=h.currentContext;if(a(h,c,u,l,f)&&u.isFilled){var d=u.width,v=u.height,p=d/2,g=d/u.projection,m=u.isReversed;u.showTop&&m&&(s(c,u,u.fillTop),c.beginPath(),c.moveTo(-p,-v),c.lineTo(0,-g-v),c.lineTo(p,-v),c.lineTo(0,g-v),c.fill()),u.showLeft&&(s(c,u,u.fillLeft),c.beginPath(),m?(c.moveTo(-p,-v),c.lineTo(0,g),c.lineTo(0,g-v)):(c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-v)),c.fill()),u.showRight&&(s(c,u,u.fillRight),c.beginPath(),m?(c.moveTo(p,-v),c.lineTo(0,g),c.lineTo(0,g-v)):(c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-v)),c.fill()),c.restore()}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1116),a=i(1117),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=i(12),n=function(h,u,l,f){l.addToRenderList(u);var c=h.pipelines.set(u.pipeline),d=s(u,l,f);c.calcMatrix.copyFrom(d.calc);var v=u._displayOriginX,p=u._displayOriginY,g=l.alpha*u.alpha;if(h.pipelines.preBatch(u),u.isStroked){var m=c.strokeTint,x=a.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*g);m.TL=x,m.TR=x,m.BL=x,m.BR=x;var y=u._startWidth,T=u._endWidth;c.batchLine(u.geom.x1-v,u.geom.y1-p,u.geom.x2-v,u.geom.y2-p,y,T,1,0,!1,d.sprite,d.camera)}h.pipelines.postBatch(u)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(60),a=i(30),n=function(h,u,l,f){l.addToRenderList(u);var c=h.currentContext;if(a(h,c,u,l,f)){var d=u._displayOriginX,v=u._displayOriginY;u.isStroked&&(s(c,u),c.beginPath(),c.moveTo(u.geom.x1-d,u.geom.y1-v),c.lineTo(u.geom.x2-d,u.geom.y2-v),c.stroke()),c.restore()}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1119),a=i(1120),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(114),a=i(19),n=i(81),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=a(l,f,c),p=d.calcMatrix.copyFrom(v.calc),g=l._displayOriginX,m=l._displayOriginY,x=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&s(d,p,l,x,g,m),l.isStroked&&n(d,l,x,g,m),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),a=i(60),n=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(n(u,d,l,f,c)){var v=l._displayOriginX,p=l._displayOriginY,g=l.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;d.beginPath(),d.moveTo(x,y),l.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-v,C=g[T+1]-p;d.lineTo(S,C)}d.closePath(),l.isFilled&&(s(d,l),d.fill()),l.isStroked&&(a(d,l),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1122),a=i(1123),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=i(81),n=i(12),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=s(l,f,c);d.calcMatrix.copyFrom(v.calc);var p=l._displayOriginX,g=l._displayOriginY,m=f.alpha*l.alpha;if(u.pipelines.preBatch(l),l.isFilled){var x=d.fillTint,y=n.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y,d.batchFillRect(-p,-g,l.width,l.height)}l.isStroked&&a(d,l,m,p,g),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),a=i(60),n=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(n(u,d,l,f,c)){var v=l._displayOriginX,p=l._displayOriginY;l.isFilled&&(s(d,l),d.fillRect(-v,-p,l.width,l.height)),l.isStroked&&(a(d,l),d.beginPath(),d.rect(-v,-p,l.width,l.height),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1125),a=i(1126),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(114),a=i(19),n=i(81),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=a(l,f,c),p=d.calcMatrix.copyFrom(v.calc),g=l._displayOriginX,m=l._displayOriginY,x=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&s(d,p,l,x,g,m),l.isStroked&&n(d,l,x,g,m),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),a=i(60),n=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(n(u,d,l,f,c)){var v=l._displayOriginX,p=l._displayOriginY,g=l.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;d.beginPath(),d.moveTo(x,y),l.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-v,C=g[T+1]-p;d.lineTo(S,C)}d.closePath(),l.isFilled&&(s(d,l),d.fill()),l.isStroked&&(a(d,l),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1128),a=i(1129),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=i(81),n=i(12),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=s(l,f,c);d.calcMatrix.copyFrom(v.calc);var p=l._displayOriginX,g=l._displayOriginY,m=f.alpha*l.alpha;if(u.pipelines.preBatch(l),l.isFilled){var x=d.fillTint,y=n.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y;var T=l.geom.x1-p,S=l.geom.y1-g,C=l.geom.x2-p,E=l.geom.y2-g,P=l.geom.x3-p,M=l.geom.y3-g;d.batchFillTriangle(T,S,C,E,P,M,v.sprite,v.camera)}l.isStroked&&a(d,l,m,p,g),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),a=i(60),n=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(n(u,d,l,f,c)){var v=l._displayOriginX,p=l._displayOriginY,g=l.geom.x1-v,m=l.geom.y1-p,x=l.geom.x2-v,y=l.geom.y2-p,T=l.geom.x3-v,S=l.geom.y3-p;d.beginPath(),d.moveTo(g,m),d.lineTo(x,y),d.lineTo(T,S),d.closePath(),l.isFilled&&(s(d,l),d.fill()),l.isStroked&&(a(d,l),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(213),a=i(5);a.register("blitter",function(n,h,u,l){return this.displayList.add(new s(this.scene,n,h,u,l))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(214),a=i(5);a.register("container",function(n,h,u){return this.displayList.add(new s(this.scene,n,h,u))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(442),a=i(5);a.register("dom",function(n,h,u,l,f){var c=new s(this.scene,n,h,u,l,f);return this.displayList.add(c),c})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(215),a=i(5);a.register("dynamicBitmapText",function(n,h,u,l,f){return this.displayList.add(new s(this.scene,n,h,u,l,f))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(444),a=i(5);a.register("extern",function(){var n=new s(this.scene);return this.displayList.add(n),n})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(216),a=i(5);a.register("graphics",function(n){return this.displayList.add(new s(this.scene,n))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(113),a=i(5);a.register("group",function(n,h){return this.updateList.add(new s(this.scene,n,h))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(125),a=i(5);a.register("image",function(n,h,u,l){return this.displayList.add(new s(this.scene,n,h,u,l))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(219),a=i(5);a.register("layer",function(n){return this.displayList.add(new s(this.scene,n))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(220);s.register("particles",function(n,h,u){return this.displayList.add(new a(this.scene,n,h,u))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(457);s.register("follower",function(n,h,u,l,f){var c=new a(this.scene,n,h,u,l,f);return this.displayList.add(c),this.updateList.add(c),c})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(221);s.register("renderTexture",function(n,h,u,l,f,c){return this.displayList.add(new a(this.scene,n,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(223),a=i(5);a.register("rope",function(n,h,u,l,f,c,d,v){return this.displayList.add(new s(this.scene,n,h,u,l,f,c,d,v))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(73);s.register("sprite",function(n,h,u,l){var f=new a(this.scene,n,h,u,l);return this.displayList.add(f),f})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(148),a=i(5);a.register("bitmapText",function(n,h,u,l,f,c){return this.displayList.add(new s(this.scene,n,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(224),a=i(5);a.register("text",function(n,h,u,l){return this.displayList.add(new s(this.scene,n,h,u,l))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(225),a=i(5);a.register("tileSprite",function(n,h,u,l,f,c){return this.displayList.add(new s(this.scene,n,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(129),a=i(5);a.register("zone",function(n,h,u,l){return this.displayList.add(new s(this.scene,n,h,u,l))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(226),a=i(5);a.register("video",function(n,h,u){return this.displayList.add(new s(this.scene,n,h,u))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(461),a=i(5);a.register("arc",function(n,h,u,l,f,c,d,v){return this.displayList.add(new s(this.scene,n,h,u,l,f,c,d,v))}),a.register("circle",function(n,h,u,l,f){return this.displayList.add(new s(this.scene,n,h,u,0,360,!1,l,f))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(462);s.register("curve",function(n,h,u,l,f){return this.displayList.add(new a(this.scene,n,h,u,l,f))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(463),a=i(5);a.register("ellipse",function(n,h,u,l,f,c){return this.displayList.add(new s(this.scene,n,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(464);s.register("grid",function(n,h,u,l,f,c,d,v,p,g){return this.displayList.add(new a(this.scene,n,h,u,l,f,c,d,v,p,g))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(465);s.register("isobox",function(n,h,u,l,f,c,d){return this.displayList.add(new a(this.scene,n,h,u,l,f,c,d))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(466);s.register("isotriangle",function(n,h,u,l,f,c,d,v){return this.displayList.add(new a(this.scene,n,h,u,l,f,c,d,v))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(467);s.register("line",function(n,h,u,l,f,c,d,v){return this.displayList.add(new a(this.scene,n,h,u,l,f,c,d,v))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(468);s.register("polygon",function(n,h,u,l,f){return this.displayList.add(new a(this.scene,n,h,u,l,f))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(473);s.register("rectangle",function(n,h,u,l,f,c){return this.displayList.add(new a(this.scene,n,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(474),a=i(5);a.register("star",function(n,h,u,l,f,c,d){return this.displayList.add(new s(this.scene,n,h,u,l,f,c,d))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(475);s.register("triangle",function(n,h,u,l,f,c,d,v,p,g){return this.displayList.add(new a(this.scene,n,h,u,l,f,c,d,v,p,g))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(213),a=i(28),n=i(16),h=i(13);n.register("blitter",function(u,l){u===void 0&&(u={});var f=h(u,"key",null),c=h(u,"frame",null),d=new s(this.scene,0,0,f,c);return l!==void 0&&(u.add=l),a(this.scene,d,u),d})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(214),n=i(16),h=i(13);n.register("container",function(u,l){u===void 0&&(u={});var f=h(u,"x",0),c=h(u,"y",0),d=h(u,"children",null),v=new a(this.scene,f,c,d);return l!==void 0&&(u.add=l),s(this.scene,v,u),v})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(215),a=i(28),n=i(16),h=i(13);n.register("dynamicBitmapText",function(u,l){u===void 0&&(u={});var f=h(u,"font",""),c=h(u,"text",""),d=h(u,"size",!1),v=new s(this.scene,0,0,f,c,d);return l!==void 0&&(u.add=l),a(this.scene,v,u),v})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(16),a=i(216);s.register("graphics",function(n,h){n===void 0&&(n={}),h!==void 0&&(n.add=h);var u=new a(this.scene,n);return n.add&&this.scene.sys.displayList.add(u),u})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(16),a=i(113);s.register("group",function(n){return new a(this.scene,null,n)})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(16),n=i(13),h=i(125);a.register("image",function(u,l){u===void 0&&(u={});var f=n(u,"key",null),c=n(u,"frame",null),d=new h(this.scene,0,0,f,c);return l!==void 0&&(u.add=l),s(this.scene,d,u),d})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(219),n=i(16),h=i(13);n.register("layer",function(u,l){u===void 0&&(u={});var f=h(u,"children",null),c=new a(this.scene,f);return l!==void 0&&(u.add=l),s(this.scene,c,u),c})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(16),a=i(13),n=i(2),h=i(220);s.register("particles",function(u,l){u===void 0&&(u={});var f=a(u,"key",null),c=a(u,"frame",null),d=n(u,"emitters",null),v=new h(this.scene,f,c,d);l!==void 0&&(u.add=l);var p=n(u,"add",!1);return p?this.displayList.add(v):this.updateList.add(v),v})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(16),n=i(13),h=i(221);a.register("renderTexture",function(u,l){u===void 0&&(u={});var f=n(u,"x",0),c=n(u,"y",0),d=n(u,"width",32),v=n(u,"height",32),p=n(u,"key",void 0),g=n(u,"frame",void 0),m=new h(this.scene,f,c,d,v,p,g);return l!==void 0&&(u.add=l),s(this.scene,m,u),m})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(16),n=i(13),h=i(6),u=i(223);a.register("rope",function(l,f){l===void 0&&(l={});var c=n(l,"key",null),d=n(l,"frame",null),v=n(l,"horizontal",!0),p=h(l,"points",void 0),g=h(l,"colors",void 0),m=h(l,"alphas",void 0),x=new u(this.scene,0,0,c,d,p,v,g,m);return f!==void 0&&(l.add=f),s(this.scene,x,l),l.add||this.updateList.add(x),x})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(439),n=i(16),h=i(13),u=i(73);n.register("sprite",function(l,f){l===void 0&&(l={});var c=h(l,"key",null),d=h(l,"frame",null),v=new u(this.scene,0,0,c,d);return f!==void 0&&(l.add=f),s(this.scene,v,l),a(v,l),v})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(148),a=i(28),n=i(16),h=i(13),u=i(6);n.register("bitmapText",function(l,f){l===void 0&&(l={});var c=u(l,"font",""),d=h(l,"text",""),v=h(l,"size",!1),p=u(l,"align",0),g=new s(this.scene,0,0,c,d,v,p);return f!==void 0&&(l.add=f),a(this.scene,g,l),g})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(16),n=i(13),h=i(224);a.register("text",function(u,l){u===void 0&&(u={});var f=n(u,"text",""),c=n(u,"style",null),d=n(u,"padding",null);d!==null&&(c.padding=d);var v=new h(this.scene,0,0,f,c);return l!==void 0&&(u.add=l),s(this.scene,v,u),v.autoRound=n(u,"autoRound",!0),v.resolution=n(u,"resolution",1),v})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(16),n=i(13),h=i(225);a.register("tileSprite",function(u,l){u===void 0&&(u={});var f=n(u,"x",0),c=n(u,"y",0),d=n(u,"width",512),v=n(u,"height",512),p=n(u,"key",""),g=n(u,"frame",""),m=new h(this.scene,f,c,d,v,p,g);return l!==void 0&&(u.add=l),s(this.scene,m,u),m})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(16),a=i(13),n=i(129);s.register("zone",function(h){var u=a(h,"x",0),l=a(h,"y",0),f=a(h,"width",1),c=a(h,"height",f);return new n(this.scene,u,l,f,c)})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(16),n=i(13),h=i(226);a.register("video",function(u,l){u===void 0&&(u={});var f=n(u,"key",null),c=new h(this.scene,0,0,f);return l!==void 0&&(u.add=l),s(this.scene,c,u),u.add||this.updateList.add(c),c})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1177),a=i(1178),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=function(n,h,u,l){if(!!h.shader){if(u.addToRenderList(h),n.pipelines.clear(),h.renderToTexture)h.load(),h.flush();else{var f=s(h,u,l).calc;(n.width!==h._rendererWidth||n.height!==h._rendererHeight)&&h.projOrtho(0,n.width,n.height,0),h.load(f.matrix),h.flush()}n.pipelines.rebind()}};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1180),a=i(1181),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=function(n,h,u,l){var f=h.faces,c=f.length;if(c!==0){u.addToRenderList(h);var d=n.pipelines.set(h.pipeline,h),v=s(h,u,l).calc,p=d.setGameObject(h),g=d.vertexViewF32,m=d.vertexViewU32,x=d.vertexCount*d.currentShader.vertexComponentCount-1,y=h.tintFill,T=[],S=h.debugCallback,C=v.a,E=v.b,P=v.c,M=v.d,R=v.e,A=v.f,O=h.viewPosition.z,F=h.hideCCW,b=u.roundPixels,w=u.alpha*h.alpha,N=0;n.pipelines.preBatch(h);for(var V=0;V<c;V++){var W=f[V];!W.isInView(u,F,O,w,C,E,P,M,R,A,b)||(d.shouldFlush(3)&&(d.flush(),x=0),x=W.load(g,m,x,p,y),N++,d.vertexCount+=3,S&&T.push(W))}h.totalFrame+=N,S&&S.call(h,h,T),n.pipelines.postBatch(h)}};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1183),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),a=function(n,h,u,l){u.addToRenderList(h);var f=n.pipelines.set(h.pipeline),c=s(h,u,l).calc,d=h.width,v=h.height,p=-h._radius,g=-h._radius,m=p+d,x=g+v,y=c.getX(0,0),T=c.getY(0,0),S=c.getX(p,g),C=c.getY(p,g),E=c.getX(p,x),P=c.getY(p,x),M=c.getX(m,x),R=c.getY(m,x),A=c.getX(m,g),O=c.getY(m,g);n.pipelines.preBatch(h),f.batchPointLight(h,u,S,C,E,P,M,R,A,O,y,T),n.pipelines.postBatch(h)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(229),a=i(5);a.register("shader",function(n,h,u,l,f,c,d){return this.displayList.add(new s(this.scene,n,h,u,l,f,c,d))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(230),a=i(5);a.register("mesh",function(n,h,u,l,f,c,d,v,p,g,m){return this.displayList.add(new s(this.scene,n,h,u,l,f,c,d,v,p,g,m))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(150);s.register("pointlight",function(n,h,u,l,f,c){return this.displayList.add(new a(this.scene,n,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(16),n=i(13),h=i(229);a.register("shader",function(u,l){u===void 0&&(u={});var f=n(u,"key",null),c=n(u,"x",0),d=n(u,"y",0),v=n(u,"width",128),p=n(u,"height",128),g=new h(this.scene,f,c,d,v,p);return l!==void 0&&(u.add=l),s(this.scene,g,u),g})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(16),n=i(13),h=i(6),u=i(230);a.register("mesh",function(l,f){l===void 0&&(l={});var c=n(l,"key",null),d=n(l,"frame",null),v=h(l,"vertices",[]),p=h(l,"uvs",[]),g=h(l,"indicies",[]),m=h(l,"containsZ",!1),x=h(l,"normals",[]),y=h(l,"colors",16777215),T=h(l,"alphas",1),S=new u(this.scene,0,0,c,d,v,p,g,m,x,y,T);return f!==void 0&&(l.add=f),s(this.scene,S,l),S})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),a=i(16),n=i(13),h=i(150);a.register("pointlight",function(u,l){u===void 0&&(u={});var f=n(u,"color",16777215),c=n(u,"radius",128),d=n(u,"intensity",1),v=n(u,"attenuation",.1),p=new h(this.scene,0,0,f,c,d,v);return l!==void 0&&(u.add=l),s(this.scene,p,u),p})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(482),n=i(24),h=i(20),u=new s({Extends:a,initialize:function(f){this.scene=f,this.systems=f.sys,f.sys.settings.isBooted||f.sys.events.once(h.BOOT,this.boot,this),a.call(this)},boot:function(){var l=this.systems.events;l.on(h.SHUTDOWN,this.shutdown,this),l.on(h.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});n.register("LightsPlugin",u,"lights"),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(65);s.Area=i(1192),s.Circumference=i(302),s.CircumferencePoint=i(169),s.Clone=i(1193),s.Contains=i(66),s.ContainsPoint=i(1194),s.ContainsRect=i(1195),s.CopyFrom=i(1196),s.Equals=i(1197),s.GetBounds=i(1198),s.GetPoint=i(300),s.GetPoints=i(301),s.Offset=i(1199),s.OffsetPoint=i(1200),s.Random=i(170),e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.radius>0?Math.PI*s.radius*s.radius:0};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(65),a=function(n){return new s(n.x,n.y,n.radius)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(66),a=function(n,h){return s(n,h.x,h.y)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(66),a=function(n,h){return s(n,h.x,h.y)&&s(n,h.right,h.y)&&s(n,h.x,h.bottom)&&s(n,h.right,h.bottom)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a.setTo(s.x,s.y,s.radius)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x===a.x&&s.y===a.y&&s.radius===a.radius};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=function(n,h){return h===void 0&&(h=new s),h.x=n.left,h.y=n.top,h.width=n.diameter,h.height=n.diameter,h};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s.x+=a,s.y+=n,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x+=a.x,s.y+=a.y,s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(111);s.Area=i(1202),s.Circumference=i(447),s.CircumferencePoint=i(218),s.Clone=i(1203),s.Contains=i(112),s.ContainsPoint=i(1204),s.ContainsRect=i(1205),s.CopyFrom=i(1206),s.Equals=i(1207),s.GetBounds=i(1208),s.GetPoint=i(445),s.GetPoints=i(446),s.Offset=i(1209),s.OffsetPoint=i(1210),s.Random=i(180),e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.isEmpty()?0:s.getMajorRadius()*s.getMinorRadius()*Math.PI};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(111),a=function(n){return new s(n.x,n.y,n.width,n.height)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(112),a=function(n,h){return s(n,h.x,h.y)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(112),a=function(n,h){return s(n,h.x,h.y)&&s(n,h.right,h.y)&&s(n,h.x,h.bottom)&&s(n,h.right,h.bottom)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a.setTo(s.x,s.y,s.width,s.height)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x===a.x&&s.y===a.y&&s.width===a.width&&s.height===a.height};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=function(n,h){return h===void 0&&(h=new s),h.x=n.left,h.y=n.top,h.width=n.width,h.height=n.height,h};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s.x+=a,s.y+=n,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x+=a.x,s.y+=a.y,s};e.exports=i},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=i(231),n=function(h,u,l){if(l===void 0&&(l=[]),a(h,u)){var f=h.x,c=h.y,d=h.radius,v=u.x,p=u.y,g=u.radius,m,x,y,T,S;if(c===p)S=(g*g-d*d-v*v+f*f)/(2*(f-v)),m=1,x=-2*p,y=v*v+S*S-2*v*S+p*p-g*g,T=x*x-4*m*y,T===0?l.push(new s(S,-x/(2*m))):T>0&&(l.push(new s(S,(-x+Math.sqrt(T))/(2*m))),l.push(new s(S,(-x-Math.sqrt(T))/(2*m))));else{var C=(f-v)/(c-p),E=(g*g-d*d-v*v+f*f-p*p+c*c)/(2*(c-p));m=C*C+1,x=2*c*C-2*E*C-2*f,y=f*f+c*c+E*E-d*d-2*c*E,T=x*x-4*m*y,T===0?(S=-x/(2*m),l.push(new s(S,E-S*C))):T>0&&(S=(-x+Math.sqrt(T))/(2*m),l.push(new s(S,E-S*C)),S=(-x-Math.sqrt(T))/(2*m),l.push(new s(S,E-S*C)))}}return l};e.exports=n},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(232),a=i(151),n=function(h,u,l){if(l===void 0&&(l=[]),a(h,u)){var f=u.getLineA(),c=u.getLineB(),d=u.getLineC(),v=u.getLineD();s(f,h,l),s(c,h,l),s(d,h,l),s(v,h,l)}return l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(140),a=i(487),n=i(47),h=new n;function u(c,d,v,p,g){var m=Math.cos(c),x=Math.sin(c);h.setTo(d,v,d+m,v+x);var y=a(h,p);y&&g.push(new s(y.x,y.y,c,y.w))}function l(c,d){return c.z-d.z}var f=function(c,d,v){Array.isArray(v)||(v=[v]);for(var p=[],g=[],m=0;m<v.length;m++)for(var x=v[m].points,y=0;y<x.length;y++){var T=Math.atan2(x[y].y-d,x[y].x-c);g.indexOf(T)===-1&&(u(T,c,d,v,p),u(T-1e-5,c,d,v,p),u(T+1e-5,c,d,v,p),g.push(T))}return p.sort(l)};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=i(152),n=function(h,u,l){return l===void 0&&(l=new s),a(h,u)&&(l.x=Math.max(h.x,u.x),l.y=Math.max(h.y,u.y),l.width=Math.min(h.right,u.right)-l.x,l.height=Math.min(h.bottom,u.bottom)-l.y),l};e.exports=n},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(234),a=i(152),n=function(h,u,l){if(l===void 0&&(l=[]),a(h,u)){var f=h.getLineA(),c=h.getLineB(),d=h.getLineC(),v=h.getLineD();s(f,u,l),s(c,u,l),s(d,u,l),s(v,u,l)}return l};e.exports=n},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(489),a=i(234),n=function(h,u,l){if(l===void 0&&(l=[]),s(h,u)){var f=u.getLineA(),c=u.getLineB(),d=u.getLineC();a(f,h,l),a(c,h,l),a(d,h,l)}return l};e.exports=n},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(232),a=i(491),n=function(h,u,l){if(l===void 0&&(l=[]),a(h,u)){var f=h.getLineA(),c=h.getLineB(),d=h.getLineC();s(f,u,l),s(c,u,l),s(d,u,l)}return l};e.exports=n},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(494),a=i(492),n=function(h,u,l){if(l===void 0&&(l=[]),s(h,u)){var f=u.getLineA(),c=u.getLineB(),d=u.getLineC();a(h,f,l),a(h,c,l),a(h,d,l)}return l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(496),a=function(n,h){if(!s(n,h))return!1;var u=Math.min(h.x1,h.x2),l=Math.max(h.x1,h.x2),f=Math.min(h.y1,h.y2),c=Math.max(h.y1,h.y2);return n.x>=u&&n.x<=l&&n.y>=f&&n.y<=c};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u,l){return l===void 0&&(l=0),!(a>s.right+l||n<s.left-l||h>s.bottom+l||u<s.top-l)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(47);s.Angle=i(97),s.BresenhamPoints=i(317),s.CenterOn=i(1222),s.Clone=i(1223),s.CopyFrom=i(1224),s.Equals=i(1225),s.Extend=i(1226),s.GetEasedPoints=i(1227),s.GetMidPoint=i(1228),s.GetNearestPoint=i(1229),s.GetNormal=i(1230),s.GetPoint=i(307),s.GetPoints=i(172),s.GetShortestDistance=i(1231),s.Height=i(1232),s.Length=i(67),s.NormalAngle=i(497),s.NormalX=i(1233),s.NormalY=i(1234),s.Offset=i(1235),s.PerpSlope=i(1236),s.Random=i(173),s.ReflectAngle=i(1237),s.Rotate=i(1238),s.RotateAroundPoint=i(1239),s.RotateAroundXY=i(236),s.SetToAngle=i(1240),s.Slope=i(1241),s.Width=i(1242),e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=a-(s.x1+s.x2)/2,u=n-(s.y1+s.y2)/2;return s.x1+=h,s.y1+=u,s.x2+=h,s.y2+=u,s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(47),a=function(n){return new s(n.x1,n.y1,n.x2,n.y2)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a.setTo(s.x1,s.y1,s.x2,s.y2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x1===a.x1&&s.y1===a.y1&&s.x2===a.x2&&s.y2===a.y2};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),a=function(n,h,u){u===void 0&&(u=h);var l=s(n),f=n.x2-n.x1,c=n.y2-n.y1;return h&&(n.x1=n.x1-f/l*h,n.y1=n.y1-c/l*h),u&&(n.x2=n.x2+f/l*u,n.y2=n.y2+c/l*u),n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(352),a=i(80),n=i(4),h=function(u,l,f,c,d){c===void 0&&(c=0),d===void 0&&(d=[]);var v=[],p=u.x1,g=u.y1,m=u.x2-p,x=u.y2-g,y=a(l,d),T,S,C=f-1;for(T=0;T<C;T++)S=y(T/C),v.push(new n(p+m*S,g+x*S));if(S=y(1),v.push(new n(p+m*S,g+x*S)),c>0){var E=v[0],P=[E];for(T=1;T<v.length-1;T++){var M=v[T];s(E,M)>=c&&(P.push(M),E=M)}var R=v[v.length-1];return s(E,R)<c&&P.pop(),P.push(R),P}else return v};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h){return h===void 0&&(h=new s),h.x=(n.x1+n.x2)/2,h.y=(n.y1+n.y2)/2,h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h,u){u===void 0&&(u=new s);var l=n.x1,f=n.y1,c=n.x2,d=n.y2,v=(c-l)*(c-l)+(d-f)*(d-f);if(v===0)return u;var p=((h.x-l)*(c-l)+(h.y-f)*(d-f))/v;return u.x=l+p*(c-l),u.y=f+p*(d-f),u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),a=i(97),n=i(4),h=function(u,l){l===void 0&&(l=new n);var f=a(u)-s.TAU;return l.x=Math.cos(f),l.y=Math.sin(f),l};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=s.x1,h=s.y1,u=s.x2,l=s.y2,f=(u-n)*(u-n)+(l-h)*(l-h);if(f===0)return!1;var c=((h-a.y)*(u-n)-(n-a.x)*(l-h))/f;return Math.abs(c)*Math.sqrt(f)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.abs(s.y1-s.y2)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),a=i(97),n=function(h){return Math.cos(a(h)-s.TAU)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),a=i(97),n=function(h){return Math.sin(a(h)-s.TAU)};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s.x1+=a,s.y1+=n,s.x2+=a,s.y2+=n,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return-((s.x2-s.x1)/(s.y2-s.y1))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(97),a=i(497),n=function(h,u){return 2*a(u)-Math.PI-s(h)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(236),a=function(n,h){var u=(n.x1+n.x2)/2,l=(n.y1+n.y2)/2;return s(n,u,l,h)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(236),a=function(n,h,u){return s(n,h.x,h.y,u)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h,u){return s.x1=a,s.y1=n,s.x2=a+Math.cos(h)*u,s.y2=n+Math.sin(h)*u,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s.y2-s.y1)/(s.x2-s.x1)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.abs(s.x1-s.x2)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Face:i(116),GenerateGridVerts:i(1244),GenerateObjVerts:i(480),GenerateVerts:i(479),ParseObj:i(498),ParseObjMaterial:i(499),RotateFace:i(1245),Vertex:i(117)};e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(116),a=i(2),n=i(69),h=i(39),u=i(117),l=new h,f=new h,c=new n,d=function(v){var p=a(v,"mesh"),g=a(v,"texture",null),m=a(v,"frame"),x=a(v,"width",1),y=a(v,"height",x),T=a(v,"widthSegments",1),S=a(v,"heightSegments",T),C=a(v,"x",0),E=a(v,"y",0),P=a(v,"z",0),M=a(v,"rotateX",0),R=a(v,"rotateY",0),A=a(v,"rotateZ",0),O=a(v,"zIsUp",!0),F=a(v,"isOrtho",p?p.dirtyCache[11]:!1),b=a(v,"colors",[16777215]),w=a(v,"alphas",[1]),N=a(v,"tile",!1),V=a(v,"flipY",!1),W=a(v,"width",null),U={faces:[],verts:[]};if(l.set(C,E,P),f.set(M,R,A),c.fromRotationXYTranslation(f,l,O),!g&&p)g=p.texture;else if(p&&typeof g=="string")g=p.scene.sys.textures.get(g);else return U;var D=g.get(m);!W&&F&&g&&p&&(x=D.width/p.height,y=D.height/p.height);var L=x/2,I=y/2,B=Math.floor(T),G=Math.floor(S),z=B+1,Y=G+1,X=x/B,H=y/G,$=[],k=[],K,Z,j=0,J=1,q=0,ot=1;D&&(j=D.u0,J=D.u1,V?(q=D.v1,ot=D.v0):(q=D.v0,ot=D.v1));var nt=J-j,tt=ot-q;for(Z=0;Z<Y;Z++){var Q=Z*H-I;for(K=0;K<z;K++){var lt=K*X-L;k.push(lt,-Q);var et=j+nt*(K/B),at=q+tt*(Z/G);$.push(et,at)}}Array.isArray(b)||(b=[b]),Array.isArray(w)||(w=[w]);var ie=0,se=0;for(Z=0;Z<G;Z++)for(K=0;K<B;K++){var Et=(K+z*Z)*2,vt=(K+z*(Z+1))*2,It=(K+1+z*(Z+1))*2,bt=(K+1+z*Z)*2,Ot=b[se],ne=w[ie],ii=new u(k[Et],k[Et+1],0,$[Et],$[Et+1],Ot,ne).transformMat4(c),si=new u(k[vt],k[vt+1],0,$[vt],$[vt+1],Ot,ne).transformMat4(c),ni=new u(k[bt],k[bt+1],0,$[bt],$[bt+1],Ot,ne).transformMat4(c),ri=new u(k[vt],k[vt+1],0,$[vt],$[vt+1],Ot,ne).transformMat4(c),ai=new u(k[It],k[It+1],0,$[It],$[It+1],Ot,ne).transformMat4(c),oi=new u(k[bt],k[bt+1],0,$[bt],$[bt+1],Ot,ne).transformMat4(c);N&&(ii.setUVs(j,ot),si.setUVs(j,q),ni.setUVs(J,ot),ri.setUVs(j,q),ai.setUVs(J,q),oi.setUVs(J,ot)),se++,se===b.length&&(se=0),ie++,ie===w.length&&(ie=0),U.verts.push(ii,si,ni,ri,ai,oi),U.faces.push(new s(ii,si,ni),new s(ri,ai,oi))}return p&&(p.faces=p.faces.concat(U.faces),p.vertices=p.vertices.concat(U.verts)),U};e.exports=d},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){var u,l;if(n===void 0&&h===void 0){var f=s.getInCenter();u=f.x,l=f.y}var c=Math.cos(a),d=Math.sin(a),v=s.vertex1,p=s.vertex2,g=s.vertex3,m=v.x-u,x=v.y-l;v.set(m*c-x*d+u,m*d+x*c+l),m=p.x-u,x=p.y-l,p.set(m*c-x*d+u,m*d+x*c+l),m=g.x-u,x=g.y-l,g.set(m*c-x*d+u,m*d+x*c+l)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4);s.Ceil=i(1247),s.Clone=i(1248),s.CopyFrom=i(1249),s.Equals=i(1250),s.Floor=i(1251),s.GetCentroid=i(1252),s.GetMagnitude=i(500),s.GetMagnitudeSq=i(501),s.GetRectangleFromPoints=i(1253),s.Interpolate=i(1254),s.Invert=i(1255),s.Negative=i(1256),s.Project=i(1257),s.ProjectUnit=i(1258),s.SetMagnitude=i(1259),e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.setTo(Math.ceil(s.x),Math.ceil(s.y))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n){return new s(n.x,n.y)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a.setTo(s.x,s.y)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x===a.x&&s.y===a.y};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.setTo(Math.floor(s.x),Math.floor(s.y))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h){if(h===void 0&&(h=new s),!Array.isArray(n))throw new Error("GetCentroid points argument must be an array");var u=n.length;if(u<1)throw new Error("GetCentroid points array must not be empty");if(u===1)h.x=n[0].x,h.y=n[0].y;else{for(var l=0;l<u;l++)h.x+=n[l].x,h.y+=n[l].y;h.x/=u,h.y/=u}return h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=function(n,h){h===void 0&&(h=new s);for(var u=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,d=0;d<n.length;d++){var v=n[d];v.x>u&&(u=v.x),v.x<l&&(l=v.x),v.y>f&&(f=v.y),v.y<c&&(c=v.y)}return h.x=l,h.y=c,h.width=u-l,h.height=f-c,h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h,u,l){return u===void 0&&(u=0),l===void 0&&(l=new s),l.x=n.x+(h.x-n.x)*u,l.y=n.y+(h.y-n.y)*u,l};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.setTo(s.y,s.x)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h){return h===void 0&&(h=new s),h.setTo(-n.x,-n.y)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=i(501),n=function(h,u,l){l===void 0&&(l=new s);var f=h.x*u.x+h.y*u.y,c=f/a(u);return c!==0&&(l.x=c*u.x,l.y=c*u.y),l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h,u){u===void 0&&(u=new s);var l=n.x*h.x+n.y*h.y;return l!==0&&(u.x=l*h.x,u.y=l*h.y),u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(500),a=function(n,h){if(n.x!==0||n.y!==0){var u=s(n);n.x/=u,n.y/=u}return n.x*=h,n.y*=h,n};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(227);s.Clone=i(1261),s.Contains=i(228),s.ContainsPoint=i(1262),s.Earcut=i(59),s.GetAABB=i(469),s.GetNumberArray=i(1263),s.GetPoints=i(470),s.Perimeter=i(471),s.Reverse=i(1264),s.Simplify=i(1265),s.Smooth=i(472),s.Translate=i(1266),e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(227),a=function(n){return new s(n.points)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(228),a=function(n,h){return s(n,h.x,h.y)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a===void 0&&(a=[]);for(var n=0;n<s.points.length;n++)a.push(s.points[n].x),a.push(s.points[n].y);return a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.points.reverse(),s};e.exports=i},function(e,r){function i(l,f){var c=l.x-f.x,d=l.y-f.y;return c*c+d*d}function s(l,f,c){var d=f.x,v=f.y,p=c.x-d,g=c.y-v;if(p!==0||g!==0){var m=((l.x-d)*p+(l.y-v)*g)/(p*p+g*g);m>1?(d=c.x,v=c.y):m>0&&(d+=p*m,v+=g*m)}return p=l.x-d,g=l.y-v,p*p+g*g}function a(l,f){for(var c=l[0],d=[c],v,p=1,g=l.length;p<g;p++)v=l[p],i(v,c)>f&&(d.push(v),c=v);return c!==v&&d.push(v),d}function n(l,f,c,d,v){for(var p=d,g,m=f+1;m<c;m++){var x=s(l[m],l[f],l[c]);x>p&&(g=m,p=x)}p>d&&(g-f>1&&n(l,f,g,d,v),v.push(l[g]),c-g>1&&n(l,g,c,d,v))}function h(l,f){var c=l.length-1,d=[l[0]];return n(l,0,c,f,d),d.push(l[c]),d}var u=function(l,f,c){f===void 0&&(f=1),c===void 0&&(c=!1);var d=l.points;if(d.length>2){var v=f*f;c||(d=a(d,v)),l.setTo(h(d,v))}return l};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){for(var h=s.points,u=0;u<h.length;u++)h[u].x+=a,h[u].y+=n;return s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.width*s.height};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s.width=Math.ceil(s.width),s.height=Math.ceil(s.height),s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=function(n){return new s(n.x,n.y,n.width,n.height)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(57),a=function(n,h){return s(n,h.x,h.y)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a.setTo(s.x,s.y,s.width,s.height)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x===a.x&&s.y===a.y&&s.width===a.width&&s.height===a.height};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(237),a=function(n,h){var u=s(n);return u<s(h)?n.setSize(h.height*u,h.height):n.setSize(h.width,h.width/u),n.setPosition(h.centerX-n.width/2,h.centerY-n.height/2)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(237),a=function(n,h){var u=s(n);return u>s(h)?n.setSize(h.height*u,h.height):n.setSize(h.width,h.width/u),n.setPosition(h.centerX-n.width/2,h.centerY-n.height/2)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s.width=Math.floor(s.width),s.height=Math.floor(s.height),s};e.exports=i},function(e,r,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=function(n,h,u,l,f){return f===void 0&&(f=new s),f.setTo(Math.min(n,u),Math.min(h,l),Math.abs(n-u),Math.abs(h-l))};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h){return h===void 0&&(h=new s),h.x=n.centerX,h.y=n.centerY,h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=function(n,h){return h===void 0&&(h=new s),h.x=n.width,h.y=n.height,h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(190),a=function(n,h,u){var l=n.centerX,f=n.centerY;return n.setSize(n.width+h*2,n.height+u*2),s(n,l,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),a=i(152),n=function(h,u,l){return l===void 0&&(l=new s),a(h,u)?(l.x=Math.max(h.x,u.x),l.y=Math.max(h.y,u.y),l.width=Math.min(h.right,u.right)-l.x,l.height=Math.min(h.bottom,u.bottom)-l.y):l.setEmpty(),l};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){for(var n=s.x,h=s.right,u=s.y,l=s.bottom,f=0;f<a.length;f++)n=Math.min(n,a[f].x),h=Math.max(h,a[f].x),u=Math.min(u,a[f].y),l=Math.max(l,a[f].y);return s.x=n,s.y=u,s.width=h-n,s.height=l-u,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){var n=Math.min(s.x,a.x),h=Math.max(s.right,a.right);s.x=n,s.width=h-n;var u=Math.min(s.y,a.y),l=Math.max(s.bottom,a.bottom);return s.y=u,s.height=l-u,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){var h=Math.min(s.x,a),u=Math.max(s.right,a);s.x=h,s.width=u-h;var l=Math.min(s.y,n),f=Math.max(s.bottom,n);return s.y=l,s.height=f-l,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return s.x+=a,s.y+=n,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x+=a.x,s.y+=a.y,s};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x<a.right&&s.right>a.x&&s.y<a.bottom&&s.bottom>a.y};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),a=i(36),n=function(h,u,l){l===void 0&&(l=new s),u=a(u);var f=Math.sin(u),c=Math.cos(u),d=c>0?h.width/2:h.width/-2,v=f>0?h.height/2:h.height/-2;return Math.abs(d*f)<Math.abs(v*c)?v=d*f/c:d=v*c/f,l.x=d+h.centerX,l.y=v+h.centerY,l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(195),a=i(503),n=i(4),h=function(u,l,f){if(f===void 0&&(f=new n),a(u,l))switch(s(0,3)){case 0:f.x=u.x+Math.random()*(l.right-u.x),f.y=u.y+Math.random()*(l.top-u.y);break;case 1:f.x=l.x+Math.random()*(u.right-l.x),f.y=l.bottom+Math.random()*(u.bottom-l.bottom);break;case 2:f.x=u.x+Math.random()*(l.x-u.x),f.y=l.y+Math.random()*(u.bottom-l.y);break;case 3:f.x=l.right+Math.random()*(u.right-l.right),f.y=u.y+Math.random()*(l.bottom-u.y);break}return f};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.width===a.width&&s.height===a.height};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n){return n===void 0&&(n=a),s.width*=a,s.height*=n,s};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(82);s.Area=i(1294),s.BuildEquilateral=i(1295),s.BuildFromPolygon=i(1296),s.BuildRight=i(1297),s.CenterOn=i(1298),s.Centroid=i(504),s.CircumCenter=i(1299),s.CircumCircle=i(1300),s.Clone=i(1301),s.Contains=i(115),s.ContainsArray=i(235),s.ContainsPoint=i(1302),s.CopyFrom=i(1303),s.Decompose=i(495),s.Equals=i(1304),s.GetPoint=i(476),s.GetPoints=i(477),s.InCenter=i(506),s.Perimeter=i(1305),s.Offset=i(505),s.Random=i(181),s.Rotate=i(1306),s.RotateAroundPoint=i(1307),s.RotateAroundXY=i(238),e.exports=s},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var a=s.x1,n=s.y1,h=s.x2,u=s.y2,l=s.x3,f=s.y3;return Math.abs(((l-a)*(u-n)-(h-a)*(f-n))/2)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(82),a=function(n,h,u){var l=u*(Math.sqrt(3)/2),f=n,c=h,d=n+u/2,v=h+l,p=n-u/2,g=h+l;return new s(f,c,d,v,p,g)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(59),a=i(82),n=function(h,u,l,f,c){u===void 0&&(u=null),l===void 0&&(l=1),f===void 0&&(f=1),c===void 0&&(c=[]);for(var d=s(h,u),v,p,g,m,x,y,T,S,C,E=0;E<d.length;E+=3)v=d[E],p=d[E+1],g=d[E+2],m=h[v*2]*l,x=h[v*2+1]*f,y=h[p*2]*l,T=h[p*2+1]*f,S=h[g*2]*l,C=h[g*2+1]*f,c.push(new a(m,x,y,T,S,C));return c};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(82),a=function(n,h,u,l){l===void 0&&(l=u);var f=n,c=h,d=n,v=h-l,p=n+u,g=h;return new s(f,c,d,v,p,g)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(504),a=i(505),n=function(h,u,l,f){f===void 0&&(f=s);var c=f(h),d=u-c.x,v=l-c.y;return a(h,d,v)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3);function a(h,u,l,f){return h*f-u*l}var n=function(h,u){u===void 0&&(u=new s);var l=h.x3,f=h.y3,c=h.x1-l,d=h.y1-f,v=h.x2-l,p=h.y2-f,g=2*a(c,d,v,p),m=a(d,c*c+d*d,p,v*v+p*p),x=a(c,c*c+d*d,v,v*v+p*p);return u.x=l-m/g,u.y=f+x/g,u};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(65),a=function(n,h){h===void 0&&(h=new s);var u=n.x1,l=n.y1,f=n.x2,c=n.y2,d=n.x3,v=n.y3,p=f-u,g=c-l,m=d-u,x=v-l,y=p*(u+f)+g*(l+c),T=m*(u+d)+x*(l+v),S=2*(p*(v-c)-g*(d-f)),C,E;if(Math.abs(S)<1e-6){var P=Math.min(u,f,d),M=Math.min(l,c,v);C=(Math.max(u,f,d)-P)*.5,E=(Math.max(l,c,v)-M)*.5,h.x=P+C,h.y=M+E,h.radius=Math.sqrt(C*C+E*E)}else h.x=(x*y-g*T)/S,h.y=(p*T-m*y)/S,C=h.x-u,E=h.y-l,h.radius=Math.sqrt(C*C+E*E);return h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(82),a=function(n){return new s(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(115),a=function(n,h){return s(n,h.x,h.y)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a.setTo(s.x1,s.y1,s.x2,s.y2,s.x3,s.y3)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.x1===a.x1&&s.y1===a.y1&&s.x2===a.x2&&s.y2===a.y2&&s.x3===a.x3&&s.y3===a.y3};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),a=function(n){var h=n.getLineA(),u=n.getLineB(),l=n.getLineC();return s(h)+s(u)+s(l)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(238),a=i(506),n=function(h,u){var l=a(h);return s(h,l.x,l.y,u)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(238),a=function(n,h,u){return s(n,h.x,h.y,u)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(203),a=i(17),n={CreatePixelPerfectHandler:i(507),CreateInteractiveObject:i(508),Events:i(51),Gamepad:i(1309),InputManager:i(409),InputPlugin:i(1321),InputPluginCache:i(153),Keyboard:i(1322),Mouse:i(1336),Pointer:i(412),Touch:i(1337)};n=a(!1,n,s),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Axis:i(509),Button:i(510),Events:i(239),Gamepad:i(511),GamepadPlugin:i(1316),Configs:i(1317)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="connected"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="disconnected"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(9),n=i(239),h=i(511),u=i(6),l=i(153),f=i(51),c=new s({Extends:a,initialize:function(v){a.call(this),this.scene=v.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=v,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,v.pluginEvents.once(f.BOOT,this.boot,this),v.pluginEvents.on(f.START,this.start,this)},boot:function(){var d=this.scene.sys.game,v=this.settings.input,p=d.config;this.enabled=u(v,"gamepad",p.inputGamepad)&&d.device.input.gamepads,this.target=u(v,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(f.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(f.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var d=this,v=this.target,p=function(g){g.defaultPrevented||!d.isActive()||(d.refreshPads(),d.queue.push(g))};this.onGamepadHandler=p,v.addEventListener("gamepadconnected",p,!1),v.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(f.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(f.UPDATE,this.update);for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].removeAllListeners()},disconnectAll:function(){for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].pad.connected=!1},refreshPads:function(){var d=navigator.getGamepads();if(!d)this.disconnectAll();else for(var v=this.gamepads,p=0;p<d.length;p++){var g=d[p];if(!!g){var m=g.id,x=g.index,y=v[x];if(y)y.id!==m?(y.destroy(),v[x]=new h(this,g)):y.update(g);else{var T=new h(this,g);v[x]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var d=[],v=this.gamepads,p=0;p<v.length;p++)v[p]&&d.push(v[p]);return d},getPad:function(d){for(var v=this.gamepads,p=0;p<v.length;p++)if(v[p]&&v[p].index===d)return v[p]},update:function(){if(!!this.enabled){this.refreshPads();var d=this.queue.length;if(d!==0)for(var v=this.queue.splice(0,d),p=0;p<d;p++){var g=v[p],m=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(n.CONNECTED,m,g):g.type==="gamepaddisconnected"&&this.emit(n.DISCONNECTED,m,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var d=0;d<this.gamepads.length;d++)this.gamepads[d]&&this.gamepads[d].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});l.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DUALSHOCK_4:i(1318),SNES_USB:i(1319),XBOX_360:i(1320)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(65),a=i(66),n=i(0),h=i(203),u=i(508),l=i(507),f=i(50),c=i(111),d=i(112),v=i(51),p=i(9),g=i(2),m=i(56),x=i(153),y=i(7),T=i(24),S=i(10),C=i(57),E=i(20),P=i(82),M=i(115),R=new n({Extends:p,initialize:function(O){p.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,x.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var F={cancelled:!1};this._eventContainer={stopPropagation:function(){F.cancelled=!0}},this._eventData=F,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(E.BOOT,this.boot,this),O.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(v.BOOT)},start:function(){var A=this.systems.events;A.on(E.TRANSITION_START,this.transitionIn,this),A.on(E.TRANSITION_OUT,this.transitionOut,this),A.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),A.on(E.PRE_UPDATE,this.preUpdate,this),A.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(v.GAME_OUT,this.onGameOut,this),this.manager.events.on(v.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(v.START)},onGameOver:function(A){this.isActive()&&this.emit(v.GAME_OVER,A.timeStamp,A)},onGameOut:function(A){this.isActive()&&this.emit(v.GAME_OUT,A.timeStamp,A)},preUpdate:function(){this.pluginEvents.emit(v.PRE_UPDATE);var A=this._pendingRemoval,O=this._pendingInsertion,F=A.length,b=O.length;if(!(F===0&&b===0)){for(var w=this._list,N=0;N<F;N++){var V=A[N],W=w.indexOf(V);W>-1&&(w.splice(W,1),this.clear(V,!0))}A.length=0,this._pendingRemoval.length=0,this._list=w.concat(O.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(A,O){if(!this.isActive())return!1;if(this.pluginEvents.emit(v.UPDATE,A,O),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var F,b=this.manager,w=b.pointers,N=b.pointersTotal;for(F=0;F<N;F++)w[F].updateMotion();if(this._list.length===0)return!1;var V=this.pollRate;if(V===-1)return!1;if(V>0)if(this._pollTimer-=O,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var W=!1;for(F=0;F<N;F++){var U=0,D=w[F];this._tempZones=[],this._temp=this.hitTestPointer(D),this.sortGameObjects(this._temp,D),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),U+=this.processOverOutEvents(D),this.getDragState(D)===2&&this.processDragThresholdEvent(D,A),U>0&&(W=!0)}return W},update:function(A,O){if(!this.isActive())return!1;for(var F=O.length,b=!1,w=0;w<F;w++){var N=0,V=O[w];switch(this._tempZones=[],this._temp=this.hitTestPointer(V),this.sortGameObjects(this._temp,V),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),A){case h.MOUSE_DOWN:N+=this.processDragDownEvent(V),N+=this.processDownEvents(V),N+=this.processOverOutEvents(V);break;case h.MOUSE_UP:N+=this.processDragUpEvent(V),N+=this.processUpEvents(V),N+=this.processOverOutEvents(V);break;case h.TOUCH_START:N+=this.processDragDownEvent(V),N+=this.processDownEvents(V),N+=this.processOverEvents(V);break;case h.TOUCH_END:case h.TOUCH_CANCEL:N+=this.processDragUpEvent(V),N+=this.processUpEvents(V),N+=this.processOutEvents(V);break;case h.MOUSE_MOVE:case h.TOUCH_MOVE:N+=this.processDragMoveEvent(V),N+=this.processMoveEvents(V),N+=this.processOverOutEvents(V);break;case h.MOUSE_WHEEL:N+=this.processWheelEvent(V);break}N>0&&(b=!0)}return this._updatedThisFrame=!0,b},clear:function(A,O){O===void 0&&(O=!1);var F=A.input;if(!!F){O||this.queueForRemoval(A),F.gameObject=void 0,F.target=void 0,F.hitArea=void 0,F.hitAreaCallback=void 0,F.callbackContext=void 0,A.input=null;var b=this._draggable.indexOf(A);return b>-1&&this._draggable.splice(b,1),b=this._drag[0].indexOf(A),b>-1&&this._drag[0].splice(b,1),b=this._over[0].indexOf(A),b>-1&&(this._over[0].splice(b,1),this.manager.resetCursor(F)),A}},disable:function(A){A.input.enabled=!1},enable:function(A,O,F,b){return b===void 0&&(b=!1),A.input?A.input.enabled=!0:this.setHitArea(A,O,F),A.input&&b&&!A.input.dropZone&&(A.input.dropZone=b),this},hitTestPointer:function(A){for(var O=this.cameras.getCamerasBelowPointer(A),F=0;F<O.length;F++){for(var b=O[F],w=this.manager.hitTest(A,this._list,b),N=0;N<w.length;N++){var V=w[N];V.input.dropZone&&this._tempZones.push(V)}if(w.length>0)return A.camera=b,w}return A.camera=O[0],[]},processDownEvents:function(A){var O=0,F=this._temp,b=this._eventData,w=this._eventContainer;b.cancelled=!1;for(var N=!1,V=0;V<F.length;V++){var W=F[V];if(!!W.input){if(O++,W.emit(v.GAMEOBJECT_POINTER_DOWN,A,W.input.localX,W.input.localY,w),b.cancelled||!W.input){N=!0;break}if(this.emit(v.GAMEOBJECT_DOWN,A,W,w),b.cancelled||!W.input){N=!0;break}}}return!N&&this.manager&&(A.downElement===this.manager.game.canvas?this.emit(v.POINTER_DOWN,A,F):this.emit(v.POINTER_DOWN_OUTSIDE,A)),O},getDragState:function(A){return this._dragState[A.id]},setDragState:function(A,O){this._dragState[A.id]=O},processDragThresholdEvent:function(A,O){var F=!1,b=this.dragTimeThreshold,w=this.dragDistanceThreshold;if((w>0&&f(A.x,A.y,A.downX,A.downY)>=w||b>0&&O>=A.downTime+b)&&(F=!0),F)return this.setDragState(A,3),this.processDragStartList(A)},processDragStartList:function(A){if(this.getDragState(A)!==3)return 0;for(var O=this._drag[A.id],F=0;F<O.length;F++){var b=O[F],w=b.input;w.dragState=2,w.dragStartX=b.x,w.dragStartY=b.y,w.dragStartXGlobal=A.worldX,w.dragStartYGlobal=A.worldY,w.dragX=w.dragStartXGlobal-w.dragStartX,w.dragY=w.dragStartYGlobal-w.dragStartY,b.emit(v.GAMEOBJECT_DRAG_START,A,w.dragX,w.dragY),this.emit(v.DRAG_START,A,b)}return this.setDragState(A,4),O.length},processDragDownEvent:function(A){var O=this._temp;if(this._draggable.length===0||O.length===0||!A.primaryDown||this.getDragState(A)!==0)return 0;this.setDragState(A,1);for(var F=[],b=0;b<O.length;b++){var w=O[b];w.input.draggable&&w.input.dragState===0&&F.push(w)}return F.length===0?(this.setDragState(A,0),0):(F.length>1&&(this.sortGameObjects(F,A),this.topOnly&&F.splice(1)),this._drag[A.id]=F,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(A,3),this.processDragStartList(A)):(this.setDragState(A,2),0))},processDragMoveEvent:function(A){if(this.getDragState(A)===2&&this.processDragThresholdEvent(A,this.manager.game.loop.now),this.getDragState(A)!==4)return 0;for(var O=this._tempZones,F=this._drag[A.id],b=0;b<F.length;b++){var w=F[b],N=w.input,V=N.target;if(V){var W=O.indexOf(V);W===0?(w.emit(v.GAMEOBJECT_DRAG_OVER,A,V),this.emit(v.DRAG_OVER,A,w,V)):W>0?(w.emit(v.GAMEOBJECT_DRAG_LEAVE,A,V),this.emit(v.DRAG_LEAVE,A,w,V),N.target=O[0],V=N.target,w.emit(v.GAMEOBJECT_DRAG_ENTER,A,V),this.emit(v.DRAG_ENTER,A,w,V)):(w.emit(v.GAMEOBJECT_DRAG_LEAVE,A,V),this.emit(v.DRAG_LEAVE,A,w,V),O[0]?(N.target=O[0],V=N.target,w.emit(v.GAMEOBJECT_DRAG_ENTER,A,V),this.emit(v.DRAG_ENTER,A,w,V)):N.target=null)}else!V&&O[0]&&(N.target=O[0],V=N.target,w.emit(v.GAMEOBJECT_DRAG_ENTER,A,V),this.emit(v.DRAG_ENTER,A,w,V));var U,D;if(!w.parentContainer)U=A.worldX-N.dragX,D=A.worldY-N.dragY;else{var L=A.worldX-N.dragStartXGlobal,I=A.worldY-N.dragStartYGlobal,B=w.getParentRotation(),G=L*Math.cos(B)+I*Math.sin(B),z=I*Math.cos(B)-L*Math.sin(B);G*=1/w.parentContainer.scaleX,z*=1/w.parentContainer.scaleY,U=G+N.dragStartX,D=z+N.dragStartY}w.emit(v.GAMEOBJECT_DRAG,A,U,D),this.emit(v.DRAG,A,w,U,D)}return F.length},processDragUpEvent:function(A){for(var O=this._drag[A.id],F=0;F<O.length;F++){var b=O[F],w=b.input;if(w&&w.dragState===2){w.dragState=0,w.dragX=w.localX-b.displayOriginX,w.dragY=w.localY-b.displayOriginY;var N=!1,V=w.target;V&&(b.emit(v.GAMEOBJECT_DROP,A,V),this.emit(v.DROP,A,b,V),w.target=null,N=!0),b.input&&(b.emit(v.GAMEOBJECT_DRAG_END,A,w.dragX,w.dragY,N),this.emit(v.DRAG_END,A,b,N))}}return this.setDragState(A,0),O.splice(0),0},processMoveEvents:function(A){var O=0,F=this._temp,b=this._eventData,w=this._eventContainer;b.cancelled=!1;for(var N=!1,V=0;V<F.length;V++){var W=F[V];if(!!W.input){if(O++,W.emit(v.GAMEOBJECT_POINTER_MOVE,A,W.input.localX,W.input.localY,w),b.cancelled||!W.input){N=!0;break}if(this.emit(v.GAMEOBJECT_MOVE,A,W,w),b.cancelled||!W.input){N=!0;break}if(this.topOnly)break}}return N||this.emit(v.POINTER_MOVE,A,F),O},processWheelEvent:function(A){var O=0,F=this._temp,b=this._eventData,w=this._eventContainer;b.cancelled=!1;for(var N=!1,V=A.deltaX,W=A.deltaY,U=A.deltaZ,D=0;D<F.length;D++){var L=F[D];if(!!L.input){if(O++,L.emit(v.GAMEOBJECT_POINTER_WHEEL,A,V,W,U,w),b.cancelled||!L.input){N=!0;break}if(this.emit(v.GAMEOBJECT_WHEEL,A,L,V,W,U,w),b.cancelled||!L.input){N=!0;break}}}return N||this.emit(v.POINTER_WHEEL,A,F,V,W,U),O},processOverEvents:function(A){var O=this._temp,F=0,b=O.length,w=[];if(b>0){var N=this.manager,V=this._eventData,W=this._eventContainer;V.cancelled=!1;for(var U=!1,D=0;D<b;D++){var L=O[D];if(!!L.input){if(w.push(L),N.setCursor(L.input),L.emit(v.GAMEOBJECT_POINTER_OVER,A,L.input.localX,L.input.localY,W),F++,V.cancelled||!L.input){U=!0;break}if(this.emit(v.GAMEOBJECT_OVER,A,L,W),V.cancelled||!L.input){U=!0;break}}}U||this.emit(v.POINTER_OVER,A,w)}return this._over[A.id]=w,F},processOutEvents:function(A){var O=this._over[A.id],F=0,b=O.length;if(b>0){var w=this.manager,N=this._eventData,V=this._eventContainer;N.cancelled=!1;var W=!1;this.sortGameObjects(O,A);for(var U=0;U<b;U++){var D=O[U];if(D=O[U],!!D.input){if(w.resetCursor(D.input),D.emit(v.GAMEOBJECT_POINTER_OUT,A,V),F++,N.cancelled||!D.input){W=!0;break}if(this.emit(v.GAMEOBJECT_OUT,A,D,V),N.cancelled||!D.input){W=!0;break}W||this.emit(v.POINTER_OUT,A,O)}}this._over[A.id]=[]}return F},processOverOutEvents:function(A){var O=this._temp,F,b,w=[],N=[],V=[],W=this._over[A.id],U=this._drag[A.id],D=this.manager;for(F=0;F<W.length;F++)b=W[F],O.indexOf(b)===-1&&U.indexOf(b)===-1?w.push(b):V.push(b);for(F=0;F<O.length;F++)b=O[F],W.indexOf(b)===-1&&N.push(b);var L=w.length,I=0,B=this._eventData,G=this._eventContainer;B.cancelled=!1;var z=!1;if(L>0){for(this.sortGameObjects(w,A),F=0;F<L;F++)if(b=w[F],!!b.input){if(D.resetCursor(b.input),b.emit(v.GAMEOBJECT_POINTER_OUT,A,G),I++,B.cancelled||!b.input){z=!0;break}if(this.emit(v.GAMEOBJECT_OUT,A,b,G),B.cancelled||!b.input){z=!0;break}}z||this.emit(v.POINTER_OUT,A,w)}if(L=N.length,B.cancelled=!1,z=!1,L>0){for(this.sortGameObjects(N,A),F=0;F<L;F++)if(b=N[F],!!b.input){if(D.setCursor(b.input),b.emit(v.GAMEOBJECT_POINTER_OVER,A,b.input.localX,b.input.localY,G),I++,B.cancelled||!b.input){z=!0;break}if(this.emit(v.GAMEOBJECT_OVER,A,b,G),B.cancelled||!b.input){z=!0;break}}z||this.emit(v.POINTER_OVER,A,N)}return W=V.concat(N),this._over[A.id]=this.sortGameObjects(W,A),I},processUpEvents:function(A){var O=this._temp,F=this._eventData,b=this._eventContainer;F.cancelled=!1;for(var w=!1,N=0;N<O.length;N++){var V=O[N];if(!!V.input){if(V.emit(v.GAMEOBJECT_POINTER_UP,A,V.input.localX,V.input.localY,b),F.cancelled||!V.input){w=!0;break}if(this.emit(v.GAMEOBJECT_UP,A,V,b),F.cancelled||!V.input){w=!0;break}}}return!w&&this.manager&&(A.upElement===this.manager.game.canvas?this.emit(v.POINTER_UP,A,O):this.emit(v.POINTER_UP_OUTSIDE,A)),O.length},queueForInsertion:function(A){return this._pendingInsertion.indexOf(A)===-1&&this._list.indexOf(A)===-1&&this._pendingInsertion.push(A),this},queueForRemoval:function(A){return this._pendingRemoval.push(A),this},setDraggable:function(A,O){O===void 0&&(O=!0),Array.isArray(A)||(A=[A]);for(var F=0;F<A.length;F++){var b=A[F];b.input.draggable=O;var w=this._draggable.indexOf(b);O&&w===-1?this._draggable.push(b):!O&&w>-1&&this._draggable.splice(w,1)}return this},makePixelPerfect:function(A){A===void 0&&(A=1);var O=this.systems.textures;return l(O,A)},setHitArea:function(A,O,F){if(O===void 0)return this.setHitAreaFromTexture(A);Array.isArray(A)||(A=[A]);var b=!1,w=!1,N=!1,V=!1,W=!1,U=!0;if(y(O)){var D=O;O=g(D,"hitArea",null),F=g(D,"hitAreaCallback",null),b=g(D,"draggable",!1),w=g(D,"dropZone",!1),N=g(D,"cursor",!1),V=g(D,"useHandCursor",!1),W=g(D,"pixelPerfect",!1);var L=g(D,"alphaTolerance",1);W&&(O={},F=this.makePixelPerfect(L)),(!O||!F)&&(this.setHitAreaFromTexture(A),U=!1)}else typeof O=="function"&&!F&&(F=O,O={});for(var I=0;I<A.length;I++){var B=A[I];if(W&&B.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var G=B.input?B.input:u(B,O,F);G.customHitArea=U,G.dropZone=w,G.cursor=V?"pointer":N,B.input=G,b&&this.setDraggable(B),this.queueForInsertion(B)}return this},setHitAreaCircle:function(A,O,F,b,w){w===void 0&&(w=a);var N=new s(O,F,b);return this.setHitArea(A,N,w)},setHitAreaEllipse:function(A,O,F,b,w,N){N===void 0&&(N=d);var V=new c(O,F,b,w);return this.setHitArea(A,V,N)},setHitAreaFromTexture:function(A,O){O===void 0&&(O=C),Array.isArray(A)||(A=[A]);for(var F=0;F<A.length;F++){var b=A[F],w=b.frame,N=0,V=0;if(b.width?(N=b.width,V=b.height):w&&(N=w.realWidth,V=w.realHeight),b.type==="Container"&&(N===0||V===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}N!==0&&V!==0&&(b.input=u(b,new S(0,0,N,V),O),this.queueForInsertion(b))}return this},setHitAreaRectangle:function(A,O,F,b,w,N){N===void 0&&(N=C);var V=new S(O,F,b,w);return this.setHitArea(A,V,N)},setHitAreaTriangle:function(A,O,F,b,w,N,V,W){W===void 0&&(W=M);var U=new P(O,F,b,w,N,V);return this.setHitArea(A,U,W)},enableDebug:function(A,O){O===void 0&&(O=65280);var F=A.input;if(!F||!F.hitArea)return this;var b=F.hitArea,w=b.type,N=F.hitAreaDebug,V=this.systems.add,W=this.systems.updateList;N&&(W.remove(N),N.destroy(),N=null);var U=0,D=0;switch(w){case m.CIRCLE:N=V.arc(0,0,b.radius),U=b.x-b.radius,D=b.y-b.radius;break;case m.ELLIPSE:N=V.ellipse(0,0,b.width,b.height),U=b.x-b.width/2,D=b.y-b.height/2;break;case m.LINE:N=V.line(0,0,b.x1,b.y1,b.x2,b.y2);break;case m.POLYGON:N=V.polygon(0,0,b.points);break;case m.RECTANGLE:N=V.rectangle(0,0,b.width,b.height),U=b.x,D=b.y;break;case m.TRIANGLE:N=V.triangle(0,0,b.x1,b.y1,b.x2,b.y2,b.x3,b.y3);break}return N&&(N.isFilled=!1,N.preUpdate=function(){N.setStrokeStyle(1/A.scale,O),N.setDisplayOrigin(A.displayOriginX,A.displayOriginY);var L=A.x,I=A.y,B=A.rotation,G=A.scaleX,z=A.scaleY;if(A.parentContainer){var Y=A.getWorldTransformMatrix();L=Y.tx,I=Y.ty,B=Y.rotation,G=Y.scaleX,z=Y.scaleY}N.setRotation(B),N.setScale(G,z),N.setPosition(L+U,I+D),N.setScrollFactor(A.scrollFactorX,A.scrollFactorY),N.setDepth(A.depth)},W.add(N),F.hitAreaDebug=N),this},removeDebug:function(A){var O=A.input;if(O&&O.hitAreaDebug){var F=O.hitAreaDebug;this.systems.updateList.remove(F),F.destroy(),O.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(A){return this.pollRate=A,this._pollTimer=0,this},setGlobalTopOnly:function(A){return this.manager.globalTopOnly=A,this},setTopOnly:function(A){return this.topOnly=A,this},sortGameObjects:function(A,O){if(A.length<2)return A;var F=O.camera.renderList;return A.sort(function(b,w){return F.indexOf(w)-F.indexOf(b)})},sortDropZones:function(A){return A.length<2?A:(this.scene.sys.depthSort(),A.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(A,O){if(!A.parentContainer&&!O.parentContainer)return this.displayList.getIndex(O)-this.displayList.getIndex(A);if(A.parentContainer===O.parentContainer)return O.parentContainer.getIndex(O)-A.parentContainer.getIndex(A);if(A.parentContainer===O)return-1;if(O.parentContainer===A)return 1;for(var F=A.getIndexList(),b=O.getIndexList(),w=Math.min(F.length,b.length),N=0;N<w;N++){var V=F[N],W=b[N];if(V!==W)return W-V}return b.length-F.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(A){return this.manager.addPointer(A)},setDefaultCursor:function(A){return this.manager.setDefaultCursor(A),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(v.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var A=0;A<10;A++)this._drag[A]=[],this._over[A]=[];this.removeAllListeners();var O=this.manager;O.canvas.style.cursor=O.defaultCursor;var F=this.systems.events;F.off(E.TRANSITION_START,this.transitionIn,this),F.off(E.TRANSITION_OUT,this.transitionOut,this),F.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),F.off(E.PRE_UPDATE,this.preUpdate,this),O.events.off(v.GAME_OUT,this.onGameOut,this),O.events.off(v.GAME_OVER,this.onGameOver,this),F.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(v.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",R,"input"),e.exports=R},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:i(154),KeyboardManager:i(410),KeyboardPlugin:i(1330),Key:i(512),KeyCodes:i(143),KeyCombo:i(513),AdvanceKeyCombo:i(515),ProcessKeyCombo:i(514),ResetKeyCombo:i(516),JustDown:i(1332),JustUp:i(1333),DownDuration:i(1334),UpDuration:i(1335)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keycombomatch"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown-"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup-"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(9),n=i(154),h=i(22),u=i(6),l=i(51),f=i(153),c=i(512),d=i(143),v=i(513),p=i(1331),g=i(20),m=i(76),x=new s({Extends:a,initialize:function(T){a.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(l.BOOT,this.boot,this),T.pluginEvents.on(l.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=u(y,"keyboard",!0);var T=u(y,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(l.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this),this.game.events.on(h.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:d.UP,down:d.DOWN,left:d.LEFT,right:d.RIGHT,space:d.SPACE,shift:d.SHIFT})},addKeys:function(y,T,S){T===void 0&&(T=!0),S===void 0&&(S=!1);var C={};if(typeof y=="string"){y=y.split(",");for(var E=0;E<y.length;E++){var P=y[E].trim();P&&(C[P]=this.addKey(P,T,S))}}else for(var M in y)C[M]=this.addKey(y[M],T,S);return C},addKey:function(y,T,S){T===void 0&&(T=!0),S===void 0&&(S=!1);var C=this.keys;if(y instanceof c){var E=C.indexOf(y);return E>-1?C[E]=y:C[y.keyCode]=y,T&&this.addCapture(y.keyCode),y.setEmitOnRepeat(S),y}return typeof y=="string"&&(y=d[y.toUpperCase()]),C[y]||(C[y]=new c(this,y),T&&this.addCapture(y),C[y].setEmitOnRepeat(S)),C[y]},removeKey:function(y,T){T===void 0&&(T=!1);var S=this.keys,C;if(y instanceof c){var E=S.indexOf(y);E>-1&&(C=this.keys[E],this.keys[E]=void 0)}else typeof y=="string"&&(y=d[y.toUpperCase()]);return S[y]&&(C=S[y],S[y]=void 0),C&&(C.plugin=null,T&&C.destroy()),this},removeAllKeys:function(y){for(var T=this.keys,S=0;S<T.length;S++){var C=T[S];C&&(T[S]=void 0,y&&C.destroy())}return this},createCombo:function(y,T){return new v(this,y,T)},checkDown:function(y,T){if(T===void 0&&(T=0),this.enabled&&y.isDown){var S=m(this.time-y.timeDown,T);if(S>y._tick)return y._tick=S,!0}return!1},update:function(){var y=this.manager.queue,T=y.length;if(!(!this.isActive()||T===0))for(var S=this.keys,C=0;C<T;C++){var E=y[C],P=E.keyCode,M=S[P],R=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(P===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=P,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(M&&(R=M.isDown,M.onDown(E)),!E.cancelled&&(!M||!R)&&(p[P]&&this.emit(n.KEY_DOWN+p[P],E),E.cancelled||this.emit(n.ANY_KEY_DOWN,E))):(M&&M.onUp(E),E.cancelled||(p[P]&&this.emit(n.KEY_UP+p[P],E),E.cancelled||this.emit(n.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(l.MANAGER_PROCESS,this.update,this),this.game.events.off(h.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});f.register("KeyboardPlugin",x,"keyboard","keyboard","inputKeyboard"),e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(143),a={};for(var n in s)a[s[n]]=n;e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s._justDown?(s._justDown=!1,!0):!1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s._justUp?(s._justUp=!1,!0):!1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a===void 0&&(a=50);var n=s.plugin.game.loop.time-s.timeDown;return s.isDown&&n<a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){a===void 0&&(a=50);var n=s.plugin.game.loop.time-s.timeUp;return s.isUp&&n<a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={MouseManager:i(411)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TouchManager:i(413)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(21),a=i(17),n={Events:i(95),FileTypes:i(1339),File:i(23),FileTypesManager:i(8),GetURL:i(155),LoaderPlugin:i(1365),MergeXHRSettings:i(240),MultiFile:i(49),XHRLoader:i(517),XHRSettings:i(156)};n=a(!1,n,s),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AnimationJSONFile:i(1340),AsepriteFile:i(1341),AtlasJSONFile:i(1342),AtlasXMLFile:i(1343),AudioFile:i(518),AudioSpriteFile:i(1344),BinaryFile:i(1345),BitmapFontFile:i(1346),CSSFile:i(1347),GLSLFile:i(1348),HTML5AudioFile:i(519),HTMLFile:i(1349),HTMLTextureFile:i(1350),ImageFile:i(71),JSONFile:i(61),MultiAtlasFile:i(1351),MultiScriptFile:i(1352),OBJFile:i(1353),PackFile:i(1354),PluginFile:i(1355),SceneFile:i(1356),ScenePluginFile:i(1357),ScriptFile:i(520),SpriteSheetFile:i(1358),SVGFile:i(1359),TextFile:i(242),TilemapCSVFile:i(1360),TilemapImpactFile:i(1361),TilemapJSONFile:i(1362),UnityAtlasFile:i(1363),VideoFile:i(1364),XMLFile:i(241)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(61),h=i(95),u=new s({Extends:n,initialize:function(f,c,d,v,p){n.call(this,f,c,d,v,p),this.type="animationJSON"},onProcess:function(){this.loader.once(h.POST_PROCESS,this.onLoadComplete,this),n.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});a.register("animation",function(l,f,c,d){if(Array.isArray(l))for(var v=0;v<l.length;v++)this.addFile(new u(this,l[v]));else this.addFile(new u(this,l,f,d,c));return this}),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(2),h=i(71),u=i(7),l=i(61),f=i(49),c=new s({Extends:f,initialize:function(v,p,g,m,x,y){var T,S;if(u(p)){var C=p;p=n(C,"key"),T=new h(v,{key:p,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new l(v,{key:p,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","json"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new h(v,p,g,x),S=new l(v,p,m,y);T.linkFile?f.call(this,v,"atlasjson",p,[T,S,T.linkFile]):f.call(this,v,"atlasjson",p,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,v.data,p),v.addToCache(),this.complete=!0}}});a.register("aseprite",function(d,v,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new c(this,d[y]),this.addFile(x.files);else x=new c(this,d,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(2),h=i(71),u=i(7),l=i(61),f=i(49),c=new s({Extends:f,initialize:function(v,p,g,m,x,y){var T,S;if(u(p)){var C=p;p=n(C,"key"),T=new h(v,{key:p,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new l(v,{key:p,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","json"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new h(v,p,g,x),S=new l(v,p,m,y);T.linkFile?f.call(this,v,"atlasjson",p,[T,S,T.linkFile]):f.call(this,v,"atlasjson",p,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});a.register("atlas",function(d,v,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new c(this,d[y]),this.addFile(x.files);else x=new c(this,d,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(2),h=i(71),u=i(7),l=i(49),f=i(241),c=new s({Extends:l,initialize:function(v,p,g,m,x,y){var T,S;if(u(p)){var C=p;p=n(C,"key"),T=new h(v,{key:p,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new f(v,{key:p,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","xml"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new h(v,p,g,x),S=new f(v,p,m,y);T.linkFile?l.call(this,v,"atlasxml",p,[T,S,T.linkFile]):l.call(this,v,"atlasxml",p,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(d.key,d.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});a.register("atlasXML",function(d,v,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new c(this,d[y]),this.addFile(x.files);else x=new c(this,d,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(518),a=i(0),n=i(8),h=i(2),u=i(7),l=i(61),f=i(49),c=new a({Extends:f,initialize:function(v,p,g,m,x,y,T){if(u(p)){var S=p;p=h(S,"key"),g=h(S,"jsonURL"),m=h(S,"audioURL"),x=h(S,"audioConfig"),y=h(S,"audioXhrSettings"),T=h(S,"jsonXhrSettings")}var C;if(!m)C=new l(v,p,g,T),f.call(this,v,"audiosprite",p,[C]),this.config.resourceLoad=!0,this.config.audioConfig=x,this.config.audioXhrSettings=y;else{var E=s.create(v,p,m,x,y);E&&(C=new l(v,p,g,T),f.call(this,v,"audiosprite",p,[E,C]),this.config.resourceLoad=!1)}},onFileComplete:function(d){var v=this.files.indexOf(d);if(v!==-1&&(this.pending--,this.config.resourceLoad&&d.type==="json"&&d.data.hasOwnProperty("resources"))){var p=d.data.resources,g=h(this.config,"audioConfig"),m=h(this.config,"audioXhrSettings"),x=s.create(this.loader,d.key,p,g,m);x&&(this.addToMultiFile(x),this.loader.addFile(x))}},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1];d.addToCache(),v.addToCache(),this.complete=!0}}});n.register("audioSprite",function(d,v,p,g,m,x){var y=this.systems.game,T=y.config.audio,S=y.device.audio;if(T&&T.noAudio||!S.webAudio&&!S.audioData)return this;var C;if(Array.isArray(d))for(var E=0;E<d.length;E++)C=new c(this,d[E]),C.files&&this.addFile(C.files);else C=new c(this,d,v,p,g,m,x),C.files&&this.addFile(C.files);return this})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=new s({Extends:n,initialize:function(d,v,p,g,m){var x="bin";if(l(v)){var y=v;v=u(y,"key"),p=u(y,"url"),g=u(y,"xhrSettings"),x=u(y,"extension",x),m=u(y,"dataType",m)}var T={type:"binary",cache:d.cacheManager.binary,extension:x,responseType:"arraybuffer",key:v,url:p,xhrSettings:g,config:{dataType:m}};n.call(this,d,T)},onProcess:function(){this.state=a.FILE_PROCESSING;var c=this.config.dataType;this.data=c?new c(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});h.register("binary",function(c,d,v,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new f(this,c[g]));else this.addFile(new f(this,c,d,p,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(2),h=i(71),u=i(7),l=i(49),f=i(212),c=i(241),d=new s({Extends:l,initialize:function(p,g,m,x,y,T){var S,C;if(u(g)){var E=g;g=n(E,"key"),S=new h(p,{key:g,url:n(E,"textureURL"),extension:n(E,"textureExtension","png"),normalMap:n(E,"normalMap"),xhrSettings:n(E,"textureXhrSettings")}),C=new c(p,{key:g,url:n(E,"fontDataURL"),extension:n(E,"fontDataExtension","xml"),xhrSettings:n(E,"fontDataXhrSettings")})}else S=new h(p,g,m,y),C=new c(p,g,x,T);S.linkFile?l.call(this,p,"bitmapfont",g,[S,C,S.linkFile]):l.call(this,p,"bitmapfont",g,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],p=this.files[1];v.addToCache(),p.pendingDestroy();var g=v.cache.get(v.key),m=f(p.data,v.cache.getFrame(v.key),0,0,g);this.loader.cacheManager.bitmapFont.add(v.key,{data:m,texture:v.key,frame:null}),this.complete=!0}}});a.register("bitmapFont",function(v,p,g,m,x){var y;if(Array.isArray(v))for(var T=0;T<v.length;T++)y=new d(this,v[T]),this.addFile(y.files);else y=new d(this,v,p,g,m,x),this.addFile(y.files);return this}),e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=new s({Extends:n,initialize:function(d,v,p,g){var m="css";if(l(v)){var x=v;v=u(x,"key"),p=u(x,"url"),g=u(x,"xhrSettings"),m=u(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};n.call(this,d,y)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("css",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=i(396),c=new s({Extends:n,initialize:function(v,p,g,m,x){var y="glsl";if(l(p)){var T=p;p=u(T,"key"),g=u(T,"url"),m=u(T,"shaderType","fragment"),x=u(T,"xhrSettings"),y=u(T,"extension",y)}else m===void 0&&(m="fragment");var S={type:"glsl",cache:v.cacheManager.shader,extension:y,responseType:"text",key:p,url:g,config:{shaderType:m},xhrSettings:x};n.call(this,v,S)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.split(`
`),v=this.extractBlock(d,0);if(v)for(;v;){var p=this.getShaderName(v.header),g=this.getShaderType(v.header),m=this.getShaderUniforms(v.header),x=v.shader;if(this.cache.has(p)){var y=this.cache.get(p);g==="fragment"?y.fragmentSrc=x:y.vertexSrc=x,y.uniforms||(y.uniforms=m)}else g==="fragment"?this.cache.add(p,new f(p,x,"",m)):this.cache.add(p,new f(p,"",x,m));v=this.extractBlock(d,v.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new f(this.key,this.data)):this.cache.add(this.key,new f(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(d){for(var v=0;v<d.length;v++){var p=d[v].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(d){for(var v=0;v<d.length;v++){var p=d[v].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(d){for(var v={},p=0;p<d.length;p++){var g=d[p].trim();if(g.substring(0,8)==="uniform."){var m=g.indexOf(":");if(m){var x=g.substring(8,m);try{v[x]=JSON.parse(g.substring(m+1))}catch{console.warn("Invalid uniform JSON: "+x)}}}}return v},extractBlock:function(d,v){for(var p=-1,g=-1,m=-1,x=!1,y=!1,T=[],S=[],C=v;C<d.length;C++){var E=d[C].trim();if(E==="---")if(p===-1)p=C,x=!0;else if(x)g=C,x=!1,y=!0;else{y=!1;break}else x?T.push(E):y&&(S.push(E),m=C)}return!x&&g!==-1?{header:T,shader:S.join(`
`),offset:m}:null}});h.register("glsl",function(d,v,p,g){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new c(this,d[m]));else this.addFile(new c(this,d,v,p,g));return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=new s({Extends:n,initialize:function(d,v,p,g){var m="html";if(l(v)){var x=v;v=u(x,"key"),p=u(x,"url"),g=u(x,"xhrSettings"),m=u(x,"extension",m)}var y={type:"text",cache:d.cacheManager.html,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};n.call(this,d,y)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("html",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=new s({Extends:n,initialize:function(d,v,p,g,m,x){g===void 0&&(g=512),m===void 0&&(m=512);var y="html";if(l(v)){var T=v;v=u(T,"key"),p=u(T,"url"),x=u(T,"xhrSettings"),y=u(T,"extension",y),g=u(T,"width",g),m=u(T,"height",m)}var S={type:"html",cache:d.textureManager,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{width:g,height:m}};n.call(this,d,S)},onProcess:function(){this.state=a.FILE_PROCESSING;var c=this.config.width,d=this.config.height,v=[];v.push('<svg width="'+c+'px" height="'+d+'px" viewBox="0 0 '+c+" "+d+'" xmlns="http://www.w3.org/2000/svg">'),v.push('<foreignObject width="100%" height="100%">'),v.push('<body xmlns="http://www.w3.org/1999/xhtml">'),v.push(this.xhrLoader.responseText),v.push("</body>"),v.push("</foreignObject>"),v.push("</svg>");var p=[v.join(`
`)],g=this;try{var m=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=a.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){n.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(g.data),g.onProcessError()},n.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){var c=this.cache.addImage(this.key,this.data);this.pendingDestroy(c)}});h.register("htmlTexture",function(c,d,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new f(this,c[m]));else this.addFile(new f(this,c,d,v,p,g));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(2),h=i(71),u=i(7),l=i(61),f=i(49),c=new s({Extends:f,initialize:function(v,p,g,m,x,y,T){if(u(p)){var S=p;p=n(S,"key"),n(S,"url",!1)?g=n(S,"url"):g=n(S,"atlasURL"),y=n(S,"xhrSettings"),m=n(S,"path"),x=n(S,"baseURL"),T=n(S,"textureXhrSettings")}var C=new l(v,p,g,y);f.call(this,v,"multiatlas",p,[C]),this.config.path=m,this.config.baseURL=x,this.config.textureXhrSettings=T},onFileComplete:function(d){var v=this.files.indexOf(d);if(v!==-1&&(this.pending--,d.type==="json"&&d.data.hasOwnProperty("textures"))){var p=d.data.textures,g=this.config,m=this.loader,x=m.baseURL,y=m.path,T=m.prefix,S=n(g,"baseURL",this.baseURL),C=n(g,"path",this.path),E=n(g,"prefix",this.prefix),P=n(g,"textureXhrSettings");m.setBaseURL(S),m.setPath(C),m.setPrefix(E);for(var M=0;M<p.length;M++){var R=p[M].image,A="MA"+this.multiKeyIndex+"_"+R,O=new h(m,A,R,P);if(this.addToMultiFile(O),m.addFile(O),p[M].normalMap){var F=new h(m,A,p[M].normalMap,P);F.type="normalMap",O.setLink(F),this.addToMultiFile(F),m.addFile(F)}}m.setBaseURL(x),m.setPath(y),m.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var d=this.files[0],v=[],p=[],g=[],m=1;m<this.files.length;m++){var x=this.files[m];if(x.type!=="normalMap")for(var y=x.key.indexOf("_"),T=x.key.substr(y+1),S=x.data,C=0;C<d.data.textures.length;C++){var E=d.data.textures[C];if(E.image===T){p.push(S),v.push(E),x.linkFile&&g.push(x.linkFile.data);break}}}for(g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,v,g),this.complete=!0,m=0;m<this.files.length;m++)this.files[m].pendingDestroy()}}});a.register("multiatlas",function(d,v,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new c(this,d[y]),this.addFile(x.files);else x=new c(this,d,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(2),h=i(7),u=i(49),l=i(520),f=new s({Extends:u,initialize:function(d,v,p,g){var m="js",x=[];if(h(v)){var y=v;v=n(y,"key"),p=n(y,"url"),g=n(y,"xhrSettings"),m=n(y,"extension",m)}Array.isArray(p)||(p=[p]);for(var T=0;T<p.length;T++){var S=new l(d,{key:v+"_"+T.toString(),url:p[T],extension:m,xhrSettings:g});S.onProcess=function(){this.onProcessComplete()},x.push(S)}u.call(this,d,"scripts",v,x)},addToCache:function(){if(this.isReadyToProcess()){for(var c=0;c<this.files.length;c++){var d=this.files[c];d.data=document.createElement("script"),d.data.language="javascript",d.data.type="text/javascript",d.data.defer=!1,d.data.text=d.xhrLoader.responseText,document.head.appendChild(d.data)}this.complete=!0}}});a.register("scripts",function(c,d,v){var p;if(Array.isArray(c))for(var g=0;g<c.length;g++)p=new f(this,c[g]),this.addFile(p.files);else p=new f(this,c,d,v),this.addFile(p.files);return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(2),h=i(7),u=i(49),l=i(498),f=i(499),c=i(242),d=new s({Extends:u,initialize:function(p,g,m,x,y,T){var S,C,E=p.cacheManager.obj;if(h(g)){var P=g;g=n(P,"key"),S=new c(p,{key:g,type:"obj",cache:E,url:n(P,"url"),extension:n(P,"extension","obj"),xhrSettings:n(P,"xhrSettings"),config:{flipUV:n(P,"flipUV",y)}}),x=n(P,"matURL"),x&&(C=new c(p,{key:g,type:"mat",cache:E,url:x,extension:n(P,"matExtension","mat"),xhrSettings:n(P,"xhrSettings")}))}else S=new c(p,{key:g,url:m,type:"obj",cache:E,extension:"obj",xhrSettings:T,config:{flipUV:y}}),x&&(C=new c(p,{key:g,url:x,type:"mat",cache:E,extension:"mat",xhrSettings:T}));u.call(this,p,"obj",g,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],p=this.files[1],g=l(v.data,v.config.flipUV);p&&(g.materials=f(p.data)),v.cache.add(v.key,g),this.complete=!0}}});a.register("obj",function(v,p,g,m,x){var y;if(Array.isArray(v))for(var T=0;T<v.length;T++)y=new d(this,v[T]),this.addFile(y.files);else y=new d(this,v,p,g,m,x),this.addFile(y.files);return this}),e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(8),h=i(61),u=new s({Extends:h,initialize:function(f,c,d,v,p){h.call(this,f,c,d,v,p),this.type="packfile"},onProcess:function(){this.state!==a.FILE_POPULATED&&(this.state=a.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});n.register("pack",function(l,f,c,d){if(Array.isArray(l))for(var v=0;v<l.length;v++)this.addFile(new u(this,l[v]));else this.addFile(new u(this,l,f,d,c));return this}),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=new s({Extends:n,initialize:function(d,v,p,g,m,x){var y="js";if(l(v)){var T=v;v=u(T,"key"),p=u(T,"url"),x=u(T,"xhrSettings"),y=u(T,"extension",y),g=u(T,"start"),m=u(T,"mapping")}var S={type:"plugin",cache:!1,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{start:g,mapping:m}};n.call(this,d,S),typeof p=="function"&&(this.data=p,this.state=a.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,d=this.config,v=u(d,"start",!1),p=u(d,"mapping",null);if(this.state===a.FILE_POPULATED)c.install(this.key,this.data,v,p);else{this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=c.install(this.key,window[this.key],v,p);(v||p)&&(this.loader.systems[p]=g,this.loader.scene[p]=g)}this.onProcessComplete()}});h.register("plugin",function(c,d,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new f(this,c[m]));else this.addFile(new f(this,c,d,v,p,g));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=new s({Extends:n,initialize:function(d,v,p,g){var m="js";if(l(v)){var x=v;v=u(x,"key"),p=u(x,"url"),g=u(x,"xhrSettings"),m=u(x,"extension",m)}var y={type:"text",extension:m,responseType:"text",key:v,url:p,xhrSettings:g};n.call(this,d,y)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),d=eval;this.loader.sceneManager.add(this.key,d(c)),this.complete=!0}});h.register("sceneFile",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=new s({Extends:n,initialize:function(d,v,p,g,m,x){var y="js";if(l(v)){var T=v;v=u(T,"key"),p=u(T,"url"),x=u(T,"xhrSettings"),y=u(T,"extension",y),g=u(T,"systemKey"),m=u(T,"sceneKey")}var S={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{systemKey:g,sceneKey:m}};n.call(this,d,S),typeof p=="function"&&(this.data=p,this.state=a.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,d=this.config,v=this.key,p=u(d,"systemKey",v),g=u(d,"sceneKey",v);this.state===a.FILE_POPULATED?c.installScenePlugin(p,this.data,g,this.loader.scene,!0):(this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),c.installScenePlugin(p,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});h.register("scenePlugin",function(c,d,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new f(this,c[m]));else this.addFile(new f(this,c,d,v,p,g));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(71),h=new s({Extends:n,initialize:function(l,f,c,d,v){n.call(this,l,f,c,v,d),this.type="spritesheet"},addToCache:function(){var u=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(u)}});a.register("spritesheet",function(u,l,f,c){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new h(this,u[d]));else this.addFile(new h(this,u,l,f,c));return this}),e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=new s({Extends:n,initialize:function(d,v,p,g,m){var x="svg";if(l(v)){var y=v;v=u(y,"key"),p=u(y,"url"),g=u(y,"svgConfig",{}),m=u(y,"xhrSettings"),x=u(y,"extension",x)}var T={type:"svg",cache:d.textureManager,extension:x,responseType:"text",key:v,url:p,xhrSettings:m,config:{width:u(g,"width"),height:u(g,"height"),scale:u(g,"scale")}};n.call(this,d,T)},onProcess:function(){this.state=a.FILE_PROCESSING;var c=this.xhrLoader.responseText,d=[c],v=this.config.width,p=this.config.height,g=this.config.scale;t:if(v&&p||g){var m=null,x=new DOMParser;m=x.parseFromString(c,"text/xml");var y=m.getElementsByTagName("svg")[0],T=y.hasAttribute("viewBox"),S=parseFloat(y.getAttribute("width")),C=parseFloat(y.getAttribute("height"));if(!T&&S&&C)y.setAttribute("viewBox","0  0 "+S+" "+C);else if(T&&!S&&!C){var E=y.getAttribute("viewBox").split(/\s+|,/);S=E[2],C=E[3]}if(g)if(S&&C)v=S*g,p=C*g;else break t;y.setAttribute("width",v.toString()+"px"),y.setAttribute("height",p.toString()+"px"),d=[new XMLSerializer().serializeToString(y)]}try{var P=new window.Blob(d,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var M=this,R=!1;this.data.onload=function(){R||n.revokeObjectURL(M.data),M.onProcessComplete()},this.data.onerror=function(){R?M.onProcessError():(R=!0,n.revokeObjectURL(M.data),M.data.src="data:image/svg+xml,"+encodeURIComponent(d.join("")))},n.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){var c=this.cache.addImage(this.key,this.data);this.pendingDestroy(c)}});h.register("svg",function(c,d,v,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new f(this,c[g]));else this.addFile(new f(this,c,d,v,p));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(2),l=i(7),f=i(40),c=new s({Extends:n,initialize:function(v,p,g,m){var x="csv";if(l(p)){var y=p;p=u(y,"key"),g=u(y,"url"),m=u(y,"xhrSettings"),x=u(y,"extension",x)}var T={type:"tilemapCSV",cache:v.cacheManager.tilemap,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};n.call(this,v,T),this.tilemapFormat=f.CSV},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,d),this.pendingDestroy(d)}});h.register("tilemapCSV",function(d,v,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new c(this,d[g]));else this.addFile(new c(this,d,v,p));return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(61),h=i(40),u=new s({Extends:n,initialize:function(f,c,d,v){n.call(this,f,c,d,v),this.type="tilemapJSON",this.cache=f.cacheManager.tilemap},addToCache:function(){var l={format:h.WELTMEISTER,data:this.data};this.cache.add(this.key,l),this.pendingDestroy(l)}});a.register("tilemapImpact",function(l,f,c){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new u(this,l[d]));else this.addFile(new u(this,l,f,c));return this}),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(61),h=i(40),u=new s({Extends:n,initialize:function(f,c,d,v){n.call(this,f,c,d,v),this.type="tilemapJSON",this.cache=f.cacheManager.tilemap},addToCache:function(){var l={format:h.TILED_JSON,data:this.data};this.cache.add(this.key,l),this.pendingDestroy(l)}});a.register("tilemapTiledJSON",function(l,f,c){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new u(this,l[d]));else this.addFile(new u(this,l,f,c));return this}),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(8),n=i(2),h=i(71),u=i(7),l=i(49),f=i(242),c=new s({Extends:l,initialize:function(v,p,g,m,x,y){var T,S;if(u(p)){var C=p;p=n(C,"key"),T=new h(v,{key:p,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new f(v,{key:p,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","txt"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new h(v,p,g,x),S=new f(v,p,m,y);T.linkFile?l.call(this,v,"unityatlas",p,[T,S,T.linkFile]):l.call(this,v,"unityatlas",p,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(d.key,d.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});a.register("unityAtlas",function(d,v,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new c(this,d[y]),this.addFile(x.files);else x=new c(this,d,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(23),h=i(8),u=i(155),l=i(2),f=i(7),c=new s({Extends:n,initialize:function(v,p,g,m,x,y,T){m===void 0&&(m="loadeddata"),x===void 0&&(x=!1),y===void 0&&(y=!1),m!=="loadeddata"&&m!=="canplay"&&m!=="canplaythrough"&&(m="loadeddata");var S={type:"video",cache:v.cacheManager.video,extension:g.type,responseType:"blob",key:p,url:g.url,xhrSettings:T,config:{loadEvent:m,asBlob:x,noAudio:y}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),n.call(this,v,S)},onProcess:function(){if(this.state=a.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var d=this.createVideoElement();this.data=d;var v=this;this.data.onloadeddata=function(){v.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(v.data),v.onProcessError()},n.createObjectURL(d,this.xhrLoader.response,""),d.load()},createVideoElement:function(){var d=document.createElement("video");return d.controls=!1,d.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(d.muted=!0,d.defaultMuted=!0,d.setAttribute("autoplay","autoplay")),d.setAttribute("playsinline","playsinline"),d.setAttribute("preload","auto"),d},onVideoLoadHandler:function(d){var v=d.target;v.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),v.removeEventListener("error",this.onErrorCallback,!0),this.data=v,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(d){var v=d.target;v&&(v.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),v.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var d=this.config.loadEvent;if(this.config.asBlob)n.prototype.load.call(this);else{this.percentComplete=0;var v=this.createVideoElement();v.addEventListener(d,this.onLoadCallback,!0),v.addEventListener("error",this.onErrorCallback,!0),v.src=u(this,this.loader.baseURL),v.load()}}});c.create=function(d,v,p,g,m,x,y){var T=d.systems.game;f(v)&&(p=l(v,"url",[]),g=l(v,"loadEvent","loadeddata"),m=l(v,"asBlob",!1),x=l(v,"noAudio",!1),y=l(v,"xhrSettings"),v=l(v,"key"));var S=c.getVideoURL(T,p);if(S)return new c(d,v,S,g,m,x,y)},c.getVideoURL=function(d,v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var g=l(v[p],"url",v[p]);if(g.indexOf("blob:")===0)return{url:g,type:""};var m;if(g.indexOf("data:")===0?m=g.split(",")[0].match(/\/(.*?);/):m=g.match(/\.([a-zA-Z0-9]+)($|\?)/),m=l(v[p],"type",m?m[1]:"").toLowerCase(),d.device.video[m])return{url:g,type:m}}return null},h.register("video",function(d,v,p,g,m,x){var y;if(Array.isArray(d))for(var T=0;T<d.length;T++)y=c.create(this,d[T]),y&&this.addFile(y);else y=c.create(this,d,v,p,g,m,x),y&&this.addFile(y);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(21),n=i(149),h=i(9),u=i(95),l=i(8),f=i(2),c=i(24),d=i(20),v=i(156),p=new s({Extends:h,initialize:function(m){h.call(this);var x=m.sys.game.config,y=m.sys.settings.loader;this.scene=m,this.systems=m.sys,this.cacheManager=m.sys.cache,this.textureManager=m.sys.textures,this.sceneManager=m.sys.game.scene,l.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(f(y,"baseURL",x.loaderBaseURL)),this.setPath(f(y,"path",x.loaderPath)),this.setPrefix(f(y,"prefix",x.loaderPrefix)),this.maxParallelDownloads=f(y,"maxParallelDownloads",x.loaderMaxParallelDownloads),this.xhr=v(f(y,"responseType",x.loaderResponseType),f(y,"async",x.loaderAsync),f(y,"user",x.loaderUser),f(y,"password",x.loaderPassword),f(y,"timeout",x.loaderTimeout),f(y,"withCredentials",x.loaderWithCredentials)),this.crossOrigin=f(y,"crossOrigin",x.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new n,this.inflight=new n,this.queue=new n,this._deleteQueue=new n,this.totalFailed=0,this.totalComplete=0,this.state=a.LOADER_IDLE,this.multiKeyIndex=0,m.sys.events.once(d.BOOT,this.boot,this),m.sys.events.on(d.START,this.pluginStart,this)},boot:function(){this.systems.events.once(d.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(d.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++){var x=g[m];this.keyExists(x)||(this.list.set(x),this.emit(u.ADD,x.key,x.type,this,x),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var m=g.hasCacheConflict();return m||this.list.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),!m&&this.isLoading()&&(this.inflight.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),this.queue.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1})),m},addPack:function(g,m){m&&g.hasOwnProperty(m)&&(g={packKey:g[m]});var x=0,y=this.baseURL,T=this.path,S=this.prefix;for(var C in g)if(!!Object.prototype.hasOwnProperty.call(g,C)){var E=g[C],P=f(E,"baseURL",y),M=f(E,"path",T),R=f(E,"prefix",S),A=f(E,"files",null),O=f(E,"defaultType","void");if(Array.isArray(A)){this.setBaseURL(P),this.setPath(M),this.setPrefix(R);for(var F=0;F<A.length;F++){var b=A[F],w=b.hasOwnProperty("type")?b.type:O;this[w]&&(this[w](b),x++)}}}return this.setBaseURL(y),this.setPath(T),this.setPrefix(S),x>0},isLoading:function(){return this.state===a.LOADER_LOADING||this.state===a.LOADER_PROCESSING},isReady:function(){return this.state===a.LOADER_IDLE||this.state===a.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(u.START,this),this.list.size===0?this.loadComplete():(this.state=a.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(d.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(u.PROGRESS,this.progress)},update:function(){this.state===a.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===a.FILE_POPULATED||g.state===a.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,m){!this.inflight||(this.inflight.delete(g),this.updateProgress(),m?(this.totalComplete++,this.queue.set(g),this.emit(u.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(u.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===a.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===a.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&g.multiFile.addToCache():g.addToCache()),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(u.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=a.LOADER_COMPLETE,this.systems.events.off(d.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(u.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,m){return this.save(JSON.stringify(g),m)},save:function(g,m,x){m===void 0&&(m="file.json"),x===void 0&&(x="application/json");var y=new Blob([g],{type:x}),T=URL.createObjectURL(y),S=document.createElement("a");return S.download=m,S.textContent="Download "+m,S.href=T,S.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,m=this.systems.settings.loader;this.setBaseURL(f(m,"baseURL",g.loaderBaseURL)),this.setPath(f(m,"path",g.loaderPath)),this.setPrefix(f(m,"prefix",g.loaderPrefix)),this.state=a.LOADER_IDLE},shutdown:function(){this.reset(),this.state=a.LOADER_SHUTDOWN,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=a.LOADER_DESTROYED,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});c.register("Loader",p,"load"),e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(62),a=i(17),n={ArcadePhysics:i(1367),Body:i(527),Collider:i(528),Components:i(243),Events:i(245),Factory:i(521),GetOverlapX:i(246),GetOverlapY:i(247),SeparateX:i(537),SeparateY:i(538),Group:i(524),Image:i(522),Sprite:i(157),StaticBody:i(539),StaticGroup:i(525),Tilemap:i(1391),World:i(526)};n=a(!1,n,s),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(36),n=i(50),h=i(353),u=i(521),l=i(2),f=i(127),c=i(523),d=i(244),v=i(24),p=i(20),g=i(3),m=i(526),x=new s({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,T.sys.events.once(p.BOOT,this.boot,this),T.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new u(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new u(this.world));var y=this.systems.events;l(this.config,"customUpdate",!1)||y.on(p.UPDATE,this.world.update,this.world),y.on(p.POST_UPDATE,this.world.postUpdate,this.world),y.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,T=this.systems.settings.physics,S=f(l(T,"arcade",{}),l(y,"arcade",{}));return S},overlap:function(y,T,S,C,E){return S===void 0&&(S=null),C===void 0&&(C=null),E===void 0&&(E=S),this.world.collideObjects(y,T,S,C,E,!0)},collide:function(y,T,S,C,E){return S===void 0&&(S=null),C===void 0&&(C=null),E===void 0&&(E=S),this.world.collideObjects(y,T,S,C,E,!1)},collideTiles:function(y,T,S,C,E){return this.world.collideTiles(y,T,S,C,E)},overlapTiles:function(y,T,S,C,E){return this.world.overlapTiles(y,T,S,C,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,T,S,C,E,P){C===void 0&&(C=60);var M=Math.atan2(S-y.y,T-y.x);return y.body.acceleration.setToPolar(M,C),E!==void 0&&P!==void 0&&y.body.maxVelocity.set(E,P),M},accelerateToObject:function(y,T,S,C,E){return this.accelerateTo(y,T.x,T.y,S,C,E)},closest:function(y,T){T||(T=this.world.bodies.entries);for(var S=Number.MAX_VALUE,C=null,E=y.x,P=y.y,M=T.length,R=0;R<M;R++){var A=T[R],O=A.body||A;if(!(y===A||y===O||y===O.gameObject||y===O.center)){var F=h(E,P,O.center.x,O.center.y);F<S&&(C=A,S=F)}}return C},furthest:function(y,T){T||(T=this.world.bodies.entries);for(var S=-1,C=null,E=y.x,P=y.y,M=T.length,R=0;R<M;R++){var A=T[R],O=A.body||A;if(!(y===A||y===O||y===O.gameObject||y===O.center)){var F=h(E,P,O.center.x,O.center.y);F>S&&(C=A,S=F)}}return C},moveTo:function(y,T,S,C,E){C===void 0&&(C=60),E===void 0&&(E=0);var P=Math.atan2(S-y.y,T-y.x);return E>0&&(C=n(y.x,y.y,T,S)/(E/1e3)),y.body.velocity.setToPolar(P,C),P},moveToObject:function(y,T,S,C){return this.moveTo(y,T.x,T.y,S,C)},velocityFromAngle:function(y,T,S){return T===void 0&&(T=60),S===void 0&&(S=new g),S.setToPolar(a(y),T)},velocityFromRotation:function(y,T,S){return T===void 0&&(T=60),S===void 0&&(S=new g),S.setToPolar(y,T)},overlapRect:function(y,T,S,C,E,P){return d(this.world,y,T,S,C,E,P)},overlapCirc:function(y,T,S,C,E){return c(this.world,y,T,S,C,E)},shutdown:function(){if(!!this.world){var y=this.systems.events;y.off(p.UPDATE,this.world.update,this.world),y.off(p.POST_UPDATE,this.world.postUpdate,this.world),y.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});v.register("ArcadePhysics",x,"arcadePhysics"),e.exports=x},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setAcceleration:function(s,a){return this.body.acceleration.set(s,a),this},setAccelerationX:function(s){return this.body.acceleration.x=s,this},setAccelerationY:function(s){return this.body.acceleration.y=s,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setAngularVelocity:function(s){return this.body.angularVelocity=s,this},setAngularAcceleration:function(s){return this.body.angularAcceleration=s,this},setAngularDrag:function(s){return this.body.angularDrag=s,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setBounce:function(s,a){return this.body.bounce.set(s,a),this},setBounceX:function(s){return this.body.bounce.x=s,this},setBounceY:function(s){return this.body.bounce.y=s,this},setCollideWorldBounds:function(s,a,n){return this.body.setCollideWorldBounds(s,a,n),this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setDebug:function(s,a,n){return this.debugShowBody=s,this.debugShowVelocity=a,this.debugBodyColor=n,this},setDebugBodyColor:function(s){return this.body.debugBodyColor=s,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(s){this.body.debugShowBody=s}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(s){this.body.debugShowVelocity=s}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(s){this.body.debugBodyColor=s}}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setDrag:function(s,a){return this.body.drag.set(s,a),this},setDragX:function(s){return this.body.drag.x=s,this},setDragY:function(s){return this.body.drag.y=s,this},setDamping:function(s){return this.body.useDamping=s,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={enableBody:function(s,a,n,h,u){return s&&this.body.reset(a,n),h&&(this.body.gameObject.active=!0),u&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(s,a){return s===void 0&&(s=!1),a===void 0&&(a=!1),this.body.stop(),this.body.enable=!1,s&&(this.body.gameObject.active=!1),a&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setFriction:function(s,a){return this.body.friction.set(s,a),this},setFrictionX:function(s){return this.body.friction.x=s,this},setFrictionY:function(s){return this.body.friction.y=s,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setGravity:function(s,a){return this.body.gravity.set(s,a),this},setGravityX:function(s){return this.body.gravity.x=s,this},setGravityY:function(s){return this.body.gravity.y=s,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setImmovable:function(s){return s===void 0&&(s=!0),this.body.immovable=s,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setMass:function(s){return this.body.mass=s,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setPushable:function(s){return s===void 0&&(s=!0),this.body.pushable=s,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setOffset:function(s,a){return this.body.setOffset(s,a),this},setSize:function(s,a,n){return this.body.setSize(s,a,n),this},setBodySize:function(s,a,n){return this.body.setSize(s,a,n),this},setCircle:function(s,a,n){return this.body.setCircle(s,a,n),this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setVelocity:function(s,a){return this.body.setVelocity(s,a),this},setVelocityX:function(s){return this.body.setVelocityX(s),this},setVelocityY:function(s){return this.body.setVelocityY(s),this},setMaxVelocity:function(s,a){return this.body.maxVelocity.set(s,a),this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collide"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="overlap"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tilecollide"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tileoverlap"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldbounds"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldstep"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i,s,a,n,h,u,l,f,c,d,v,p,g,m,x,y,T,S=function(A,O,F){i=A,s=O;var b=i.velocity.x,w=s.velocity.x;return a=i.pushable,c=i._dx<0,d=i._dx>0,v=i._dx===0,x=Math.abs(i.right-s.x)<=Math.abs(s.right-i.x),l=w-b*i.bounce.x,n=s.pushable,p=s._dx<0,g=s._dx>0,m=s._dx===0,y=!x,f=b-w*s.bounce.x,T=Math.abs(F),C()},C=function(){return d&&x&&s.blocked.right?(i.processX(-T,l,!1,!0),1):c&&y&&s.blocked.left?(i.processX(T,l,!0),1):g&&y&&i.blocked.right?(s.processX(-T,f,!1,!0),2):p&&x&&i.blocked.left?(s.processX(T,f,!0),2):0},E=function(){var A=i.velocity.x,O=s.velocity.x,F=Math.sqrt(O*O*s.mass/i.mass)*(O>0?1:-1),b=Math.sqrt(A*A*i.mass/s.mass)*(A>0?1:-1),w=(F+b)*.5;return F-=w,b-=w,h=w+F*i.bounce.x,u=w+b*s.bounce.x,c&&y?P(0):p&&x?P(1):d&&x?P(2):g&&y?P(3):!1},P=function(A){if(a&&n)T*=.5,A===0||A===3?(i.processX(T,h),s.processX(-T,u)):(i.processX(-T,h),s.processX(T,u));else if(a&&!n)A===0||A===3?i.processX(T,l,!0):i.processX(-T,l,!1,!0);else if(!a&&n)A===0||A===3?s.processX(-T,f,!1,!0):s.processX(T,f,!0);else{var O=T*.5;A===0?m?(i.processX(T,0,!0),s.processX(0,null,!1,!0)):g?(i.processX(O,0,!0),s.processX(-O,0,!1,!0)):(i.processX(O,s.velocity.x,!0),s.processX(-O,null,!1,!0)):A===1?v?(i.processX(0,null,!1,!0),s.processX(T,0,!0)):d?(i.processX(-O,0,!1,!0),s.processX(O,0,!0)):(i.processX(-O,null,!1,!0),s.processX(O,i.velocity.x,!0)):A===2?m?(i.processX(-T,0,!1,!0),s.processX(0,null,!0)):p?(i.processX(-O,0,!1,!0),s.processX(O,0,!0)):(i.processX(-O,s.velocity.x,!1,!0),s.processX(O,null,!0)):A===3&&(v?(i.processX(0,null,!0),s.processX(-T,0,!1,!0)):c?(i.processX(O,0,!0),s.processX(-O,0,!1,!0)):(i.processX(O,s.velocity.y,!0),s.processX(-O,null,!1,!0)))}return!0},M=function(A){A===1?s.velocity.x=0:x?s.processX(T,f,!0):s.processX(-T,f,!1,!0),i.moves&&(s.y+=(i.y-i.prev.y)*i.friction.y,s._dy=s.y-s.prev.y)},R=function(A){A===2?i.velocity.x=0:y?i.processX(T,l,!0):i.processX(-T,l,!1,!0),s.moves&&(i.y+=(s.y-s.prev.y)*s.friction.y,i._dy=i.y-i.prev.y)};e.exports={BlockCheck:C,Check:E,Set:S,Run:P,RunImmovableBody1:M,RunImmovableBody2:R}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i,s,a,n,h,u,l,f,c,d,v,p,g,m,x,y,T,S=function(A,O,F){i=A,s=O;var b=i.velocity.y,w=s.velocity.y;return a=i.pushable,c=i._dy<0,d=i._dy>0,v=i._dy===0,x=Math.abs(i.bottom-s.y)<=Math.abs(s.bottom-i.y),l=w-b*i.bounce.y,n=s.pushable,p=s._dy<0,g=s._dy>0,m=s._dy===0,y=!x,f=b-w*s.bounce.y,T=Math.abs(F),C()},C=function(){return d&&x&&s.blocked.down?(i.processY(-T,l,!1,!0),1):c&&y&&s.blocked.up?(i.processY(T,l,!0),1):g&&y&&i.blocked.down?(s.processY(-T,f,!1,!0),2):p&&x&&i.blocked.up?(s.processY(T,f,!0),2):0},E=function(){var A=i.velocity.y,O=s.velocity.y,F=Math.sqrt(O*O*s.mass/i.mass)*(O>0?1:-1),b=Math.sqrt(A*A*i.mass/s.mass)*(A>0?1:-1),w=(F+b)*.5;return F-=w,b-=w,h=w+F*i.bounce.y,u=w+b*s.bounce.y,c&&y?P(0):p&&x?P(1):d&&x?P(2):g&&y?P(3):!1},P=function(A){if(a&&n)T*=.5,A===0||A===3?(i.processY(T,h),s.processY(-T,u)):(i.processY(-T,h),s.processY(T,u));else if(a&&!n)A===0||A===3?i.processY(T,l,!0):i.processY(-T,l,!1,!0);else if(!a&&n)A===0||A===3?s.processY(-T,f,!1,!0):s.processY(T,f,!0);else{var O=T*.5;A===0?m?(i.processY(T,0,!0),s.processY(0,null,!1,!0)):g?(i.processY(O,0,!0),s.processY(-O,0,!1,!0)):(i.processY(O,s.velocity.y,!0),s.processY(-O,null,!1,!0)):A===1?v?(i.processY(0,null,!1,!0),s.processY(T,0,!0)):d?(i.processY(-O,0,!1,!0),s.processY(O,0,!0)):(i.processY(-O,null,!1,!0),s.processY(O,i.velocity.y,!0)):A===2?m?(i.processY(-T,0,!1,!0),s.processY(0,null,!0)):p?(i.processY(-O,0,!1,!0),s.processY(O,0,!0)):(i.processY(-O,s.velocity.y,!1,!0),s.processY(O,null,!0)):A===3&&(v?(i.processY(0,null,!0),s.processY(-T,0,!1,!0)):c?(i.processY(O,0,!0),s.processY(-O,0,!1,!0)):(i.processY(O,s.velocity.y,!0),s.processY(-O,null,!1,!0)))}return!0},M=function(A){A===1?s.velocity.y=0:x?s.processY(T,f,!0):s.processY(-T,f,!1,!0),i.moves&&(s.x+=(i.x-i.prev.x)*i.friction.x,s._dx=s.x-s.prev.x)},R=function(A){A===2?i.velocity.y=0:y?i.processY(T,l,!0):i.processY(-T,l,!1,!0),s.moves&&(i.x+=(s.x-s.prev.x)*s.friction.x,i._dx=i.x-i.prev.x)};e.exports={BlockCheck:C,Check:E,Set:S,Run:P,RunImmovableBody1:M,RunImmovableBody2:R}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ProcessTileCallbacks:i(530),ProcessTileSeparationX:i(534),ProcessTileSeparationY:i(536),SeparateTile:i(532),TileCheckX:i(533),TileCheckY:i(535),TileIntersectsBody:i(248)};e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(3),n=new s({initialize:function(){this.boundsCenter=new a,this.centerDiff=new a},parseBody:function(h){if(h=h.hasOwnProperty("body")?h.body:h,!h.hasOwnProperty("bounds")||!h.hasOwnProperty("centerOfMass"))return!1;var u=this.boundsCenter,l=this.centerDiff,f=h.bounds.max.x-h.bounds.min.x,c=h.bounds.max.y-h.bounds.min.y,d=f*h.centerOfMass.x,v=c*h.centerOfMass.y;return u.set(f/2,c/2),l.set(d-u.x,v-u.y),!0},getTopLeft:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new a(u+f.x+c.x,l+f.y+c.y)}return!1},getTopCenter:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new a(u+c.x,l+f.y+c.y)}return!1},getTopRight:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new a(u-(f.x-c.x),l+f.y+c.y)}return!1},getLeftCenter:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new a(u+f.x+c.x,l+c.y)}return!1},getCenter:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.centerDiff;return new a(u+f.x,l+f.y)}return!1},getRightCenter:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new a(u-(f.x-c.x),l+c.y)}return!1},getBottomLeft:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new a(u+f.x+c.x,l-(f.y-c.y))}return!1},getBottomCenter:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new a(u+c.x,l-(f.y-c.y))}return!1},getBottomRight:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new a(u-(f.x-c.x),l-(f.y-c.y))}return!1}});e.exports=n},function(e,r){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={decomp:A,quickDecomp:w,isSimple:F,removeCollinearPoints:N,removeDuplicatePoints:V,makeCCW:x};function i(D,L,I){I=I||0;var B=[0,0],G,z,Y,X,H,$,k;return G=D[1][1]-D[0][1],z=D[0][0]-D[1][0],Y=G*D[0][0]+z*D[0][1],X=L[1][1]-L[0][1],H=L[0][0]-L[1][0],$=X*L[0][0]+H*L[0][1],k=G*H-X*z,W(k,0,I)||(B[0]=(H*Y-z*$)/k,B[1]=(G*$-X*Y)/k),B}function s(D,L,I,B){var G=L[0]-D[0],z=L[1]-D[1],Y=B[0]-I[0],X=B[1]-I[1];if(Y*z-X*G===0)return!1;var H=(G*(I[1]-D[1])+z*(D[0]-I[0]))/(Y*z-X*G),$=(Y*(D[1]-I[1])+X*(I[0]-D[0]))/(X*G-Y*z);return H>=0&&H<=1&&$>=0&&$<=1}function a(D,L,I){return(L[0]-D[0])*(I[1]-D[1])-(I[0]-D[0])*(L[1]-D[1])}function n(D,L,I){return a(D,L,I)>0}function h(D,L,I){return a(D,L,I)>=0}function u(D,L,I){return a(D,L,I)<0}function l(D,L,I){return a(D,L,I)<=0}var f=[],c=[];function d(D,L,I,B){if(B){var G=f,z=c;G[0]=L[0]-D[0],G[1]=L[1]-D[1],z[0]=I[0]-L[0],z[1]=I[1]-L[1];var Y=G[0]*z[0]+G[1]*z[1],X=Math.sqrt(G[0]*G[0]+G[1]*G[1]),H=Math.sqrt(z[0]*z[0]+z[1]*z[1]),$=Math.acos(Y/(X*H));return $<B}else return a(D,L,I)===0}function v(D,L){var I=L[0]-D[0],B=L[1]-D[1];return I*I+B*B}function p(D,L){var I=D.length;return D[L<0?L%I+I:L%I]}function g(D){D.length=0}function m(D,L,I,B){for(var G=I;G<B;G++)D.push(L[G])}function x(D){for(var L=0,I=D,B=1;B<D.length;++B)(I[B][1]<I[L][1]||I[B][1]===I[L][1]&&I[B][0]>I[L][0])&&(L=B);return n(p(D,L-1),p(D,L),p(D,L+1))?!1:(y(D),!0)}function y(D){for(var L=[],I=D.length,B=0;B!==I;B++)L.push(D.pop());for(var B=0;B!==I;B++)D[B]=L[B]}function T(D,L){return u(p(D,L-1),p(D,L),p(D,L+1))}var S=[],C=[];function E(D,L,I){var B,G,z=S,Y=C;if(h(p(D,L+1),p(D,L),p(D,I))&&l(p(D,L-1),p(D,L),p(D,I)))return!1;G=v(p(D,L),p(D,I));for(var X=0;X!==D.length;++X)if(!((X+1)%D.length===L||X===L)&&h(p(D,L),p(D,I),p(D,X+1))&&l(p(D,L),p(D,I),p(D,X))&&(z[0]=p(D,L),z[1]=p(D,I),Y[0]=p(D,X),Y[1]=p(D,X+1),B=i(z,Y),v(p(D,L),B)<G))return!1;return!0}function P(D,L,I){for(var B=0;B!==D.length;++B)if(!(B===L||B===I||(B+1)%D.length===L||(B+1)%D.length===I)&&s(p(D,L),p(D,I),p(D,B),p(D,B+1)))return!1;return!0}function M(D,L,I,B){var G=B||[];if(g(G),L<I)for(var z=L;z<=I;z++)G.push(D[z]);else{for(var z=0;z<=I;z++)G.push(D[z]);for(var z=L;z<D.length;z++)G.push(D[z])}return G}function R(D){for(var L=[],I=[],B=[],G=[],z=Number.MAX_VALUE,Y=0;Y<D.length;++Y)if(T(D,Y)){for(var X=0;X<D.length;++X)if(E(D,Y,X)){I=R(M(D,Y,X,G)),B=R(M(D,X,Y,G));for(var H=0;H<B.length;H++)I.push(B[H]);I.length<z&&(L=I,z=I.length,L.push([p(D,Y),p(D,X)]))}}return L}function A(D){var L=R(D);return L.length>0?O(D,L):[D]}function O(D,L){if(L.length===0)return[D];if(L instanceof Array&&L.length&&L[0]instanceof Array&&L[0].length===2&&L[0][0]instanceof Array){for(var I=[D],B=0;B<L.length;B++)for(var G=L[B],z=0;z<I.length;z++){var Y=I[z],X=O(Y,G);if(X){I.splice(z,1),I.push(X[0],X[1]);break}}return I}else{var G=L,B=D.indexOf(G[0]),z=D.indexOf(G[1]);return B!==-1&&z!==-1?[M(D,B,z),M(D,z,B)]:!1}}function F(D){var L=D,I;for(I=0;I<L.length-1;I++)for(var B=0;B<I-1;B++)if(s(L[I],L[I+1],L[B],L[B+1]))return!1;for(I=1;I<L.length-2;I++)if(s(L[0],L[L.length-1],L[I],L[I+1]))return!1;return!0}function b(D,L,I,B,G){G=G||0;var z=L[1]-D[1],Y=D[0]-L[0],X=z*D[0]+Y*D[1],H=B[1]-I[1],$=I[0]-B[0],k=H*I[0]+$*I[1],K=z*$-H*Y;return W(K,0,G)?[0,0]:[($*X-Y*k)/K,(z*k-H*X)/K]}function w(D,L,I,B,G,z,Y){z=z||100,Y=Y||0,G=G||25,L=typeof L!="undefined"?L:[],I=I||[],B=B||[];var X=[0,0],H=[0,0],$=[0,0],k=0,K=0,Z=0,j=0,J=0,q=0,ot=0,nt=[],tt=[],Q=D,lt=D;if(lt.length<3)return L;if(Y++,Y>z)return console.warn("quickDecomp: max level ("+z+") reached."),L;for(var et=0;et<D.length;++et)if(T(Q,et)){I.push(Q[et]),k=K=Number.MAX_VALUE;for(var at=0;at<D.length;++at)n(p(Q,et-1),p(Q,et),p(Q,at))&&l(p(Q,et-1),p(Q,et),p(Q,at-1))&&($=b(p(Q,et-1),p(Q,et),p(Q,at),p(Q,at-1)),u(p(Q,et+1),p(Q,et),$)&&(Z=v(Q[et],$),Z<K&&(K=Z,H=$,q=at))),n(p(Q,et+1),p(Q,et),p(Q,at+1))&&l(p(Q,et+1),p(Q,et),p(Q,at))&&($=b(p(Q,et+1),p(Q,et),p(Q,at),p(Q,at+1)),n(p(Q,et-1),p(Q,et),$)&&(Z=v(Q[et],$),Z<k&&(k=Z,X=$,J=at)));if(q===(J+1)%D.length)$[0]=(H[0]+X[0])/2,$[1]=(H[1]+X[1])/2,B.push($),et<J?(m(nt,Q,et,J+1),nt.push($),tt.push($),q!==0&&m(tt,Q,q,Q.length),m(tt,Q,0,et+1)):(et!==0&&m(nt,Q,et,Q.length),m(nt,Q,0,J+1),nt.push($),tt.push($),m(tt,Q,q,et+1));else{if(q>J&&(J+=D.length),j=Number.MAX_VALUE,J<q)return L;for(var at=q;at<=J;++at)h(p(Q,et-1),p(Q,et),p(Q,at))&&l(p(Q,et+1),p(Q,et),p(Q,at))&&(Z=v(p(Q,et),p(Q,at)),Z<j&&P(Q,et,at)&&(j=Z,ot=at%D.length));et<ot?(m(nt,Q,et,ot+1),ot!==0&&m(tt,Q,ot,lt.length),m(tt,Q,0,et+1)):(et!==0&&m(nt,Q,et,lt.length),m(nt,Q,0,ot+1),m(tt,Q,ot,et+1))}return nt.length<tt.length?(w(nt,L,I,B,G,z,Y),w(tt,L,I,B,G,z,Y)):(w(tt,L,I,B,G,z,Y),w(nt,L,I,B,G,z,Y)),L}return L.push(D),L}function N(D,L){for(var I=0,B=D.length-1;D.length>3&&B>=0;--B)d(p(D,B-1),p(D,B),p(D,B+1),L)&&(D.splice(B%D.length,1),I++);return I}function V(D,L){for(var I=D.length-1;I>=1;--I)for(var B=D[I],G=I-1;G>=0;--G)if(U(B,D[G],L)){D.splice(I,1);continue}}function W(D,L,I){return I=I||0,Math.abs(D-L)<=I}function U(D,L,I){return W(D[0],L[0],I)&&W(D[1],L[1],I)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),a=i(0),n=i(591),h=i(128),u=i(592),l=i(1395),f=i(1396),c=i(1397),d=i(593),v=i(589),p=i(590),g=i(1398),m=i(64),x=new a({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(y,T,S,C,E){var P=s.rectangle(y,T,S,C,E);return this.world.add(P),P},trapezoid:function(y,T,S,C,E,P){var M=s.trapezoid(y,T,S,C,E,P);return this.world.add(M),M},circle:function(y,T,S,C,E){var P=s.circle(y,T,S,C,E);return this.world.add(P),P},polygon:function(y,T,S,C,E){var P=s.polygon(y,T,S,C,E);return this.world.add(P),P},fromVertices:function(y,T,S,C,E,P,M){typeof S=="string"&&(S=m.fromPath(S));var R=s.fromVertices(y,T,S,C,E,P,M);return this.world.add(R),R},fromPhysicsEditor:function(y,T,S,C,E){E===void 0&&(E=!0);var P=v.parseBody(y,T,S,C);return E&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(y,T,S,C,E,P){C===void 0&&(C=1),E===void 0&&(E={}),P===void 0&&(P=!0);for(var M=S.getElementsByTagName("path"),R=[],A=0;A<M.length;A++){var O=u.pathToVertices(M[A],30);C!==1&&m.scale(O,C,C),R.push(O)}var F=s.fromVertices(y,T,R,E);return P&&this.world.add(F),F},fromJSON:function(y,T,S,C,E){C===void 0&&(C={}),E===void 0&&(E=!0);var P=p.parseBody(y,T,S,C);return P&&E&&this.world.add(P),P},imageStack:function(y,T,S,C,E,P,M,R,A){M===void 0&&(M=0),R===void 0&&(R=0),A===void 0&&(A={});var O=this.world,F=this.sys.displayList;A.addToWorld=!1;var b=n.stack(S,C,E,P,M,R,function(w,N){var V=new f(O,w,N,y,T,A);return F.add(V),V.body});return O.add(b),b},stack:function(y,T,S,C,E,P,M){var R=n.stack(y,T,S,C,E,P,M);return this.world.add(R),R},pyramid:function(y,T,S,C,E,P,M){var R=n.pyramid(y,T,S,C,E,P,M);return this.world.add(R),R},chain:function(y,T,S,C,E,P){return n.chain(y,T,S,C,E,P)},mesh:function(y,T,S,C,E){return n.mesh(y,T,S,C,E)},newtonsCradle:function(y,T,S,C,E){var P=n.newtonsCradle(y,T,S,C,E);return this.world.add(P),P},car:function(y,T,S,C,E){var P=n.car(y,T,S,C,E);return this.world.add(P),P},softBody:function(y,T,S,C,E,P,M,R,A,O){var F=n.softBody(y,T,S,C,E,P,M,R,A,O);return this.world.add(F),F},joint:function(y,T,S,C,E){return this.constraint(y,T,S,C,E)},spring:function(y,T,S,C,E){return this.constraint(y,T,S,C,E)},constraint:function(y,T,S,C,E){C===void 0&&(C=1),E===void 0&&(E={}),E.bodyA=y.type==="body"?y:y.body,E.bodyB=T.type==="body"?T:T.body,isNaN(S)||(E.length=S),E.stiffness=C;var P=h.create(E);return this.world.add(P),P},worldConstraint:function(y,T,S,C){S===void 0&&(S=1),C===void 0&&(C={}),C.bodyB=y.type==="body"?y:y.body,isNaN(T)||(C.length=T),C.stiffness=S;var E=h.create(C);return this.world.add(E),E},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var T=new g(this.scene,this.world,y);return this.world.add(T.constraint),T},image:function(y,T,S,C,E){var P=new f(this.world,y,T,S,C,E);return this.sys.displayList.add(P),P},tileBody:function(y,T){return new d(this.world,y,T)},sprite:function(y,T,S,C,E){var P=new c(this.world,y,T,S,C,E);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(y,T,S){return l(this.world,y,T,S)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(249),a=i(2),n=i(3);function h(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}var u=function(l,f,c,d){c===void 0&&(c={}),d===void 0&&(d=!0);var v=f.x,p=f.y;f.body={temp:!0,position:{x:v,y:p}};var g=[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity];if(g.forEach(function(x){for(var y in x)h(x[y])?Object.defineProperty(f,y,{get:x[y].get,set:x[y].set}):Object.defineProperty(f,y,{value:x[y]})}),f.world=l,f._tempVec2=new n(v,p),c.hasOwnProperty("type")&&c.type==="body")f.setExistingBody(c,d);else{var m=a(c,"shape",null);m||(m="rectangle"),c.addToWorld=d,f.setBody(m,c)}return f};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(249),n=i(15),h=i(2),u=i(125),l=i(167),f=i(3),c=new s({Extends:u,Mixins:[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity,l],initialize:function(v,p,g,m,x,y){n.call(this,v.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,x),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new f(p,g);var T=h(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(p,g),this.initPipeline()}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(164),a=i(0),n=i(249),h=i(15),u=i(2),l=i(167),f=i(73),c=i(3),d=new a({Extends:f,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,l],initialize:function(p,g,m,x,y,T){h.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(x,y),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new c(g,m);var S=u(T,"shape",null);S?this.setBody(S,T):this.setRectangle(this.width,this.height,T),this.setPosition(g,m),this.initPipeline()}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(84),a=i(0),n=i(118),h=i(128),u=i(273),l=i(272),f=i(51),c=i(127),d=i(165),v=i(3),p=i(64),g=new a({initialize:function(x,y,T){T===void 0&&(T={});var S={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=x,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new v,this.body=null,this.part=null,this.constraint=h.create(c(T,S)),this.world.on(l.BEFORE_UPDATE,this.update,this),x.sys.input.on(f.POINTER_DOWN,this.onDown,this),x.sys.input.on(f.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var x=this.position,y=this.constraint;this.camera.getWorldPoint(m.x,m.y,x);for(var T=n.allBodies(this.world.localWorld),S=0;S<T.length;S++){var C=T[S];if(!C.ignorePointer&&s.contains(C.bounds,x)&&u.canCollide(C.collisionFilter,y.collisionFilter)&&this.hitTestBody(C,x))return this.world.emit(l.DRAG_START,C,this.part,this),!0}return!1},hitTestBody:function(m,x){for(var y=this.constraint,T=m.parts.length,S=T>1?1:0,C=S;C<T;C++){var E=m.parts[C];if(p.contains(E.vertices,x))return y.pointA=x,y.pointB={x:x.x-m.position.x,y:x.y-m.position.y},y.bodyB=m,y.angleB=m.angle,d.set(m,!1),this.part=E,this.body=m,!0}return!1},update:function(){var m=this.pointer,x=this.body;if(!this.active||!m){x&&this.stopDrag();return}if(!m.isDown&&x){this.stopDrag();return}else if(m.isDown){if(!x&&!this.getBody(m))return;x=this.body;var y=this.position,T=this.constraint;this.camera.getWorldPoint(m.x,m.y,y),T.pointA.x=y.x,T.pointA.y=y.y,d.set(x,!1),this.world.emit(l.DRAG,x,this)}},stopDrag:function(){var m=this.body,x=this.constraint;x.bodyB=null,x.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(l.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(l.BEFORE_UPDATE,this.update),this.scene.sys.input.off(f.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(f.POINTER_UP,this.onUp,this)}});e.exports=g},function(e,r,i){var s={};e.exports=s;var a=i(595),n=i(32);(function(){s.name="matter-js",s.version="0.14.2",s.uses=[],s.used=[],s.use=function(){a.use(s,Array.prototype.slice.call(arguments))},s.before=function(h,u){return h=h.replace(/^Matter./,""),n.chainPathBefore(s,h,u)},s.after=function(h,u){return h=h.replace(/^Matter./,""),n.chainPathAfter(s,h,u)}})()},function(e,r,i){var s={};e.exports=s;var a=i(83),n=i(274),h=i(84),u=i(86),l=i(64);(function(){s.collides=function(f,c){for(var d=[],v=0;v<c.length;v++){var p=c[v];if(f!==p&&h.overlaps(p.bounds,f.bounds))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(h.overlaps(m.bounds,f.bounds)){var x=n.collides(m,f);if(x.collided){d.push(x);break}}}}return d},s.ray=function(f,c,d,v){v=v||1e-100;for(var p=a.angle(c,d),g=a.magnitude(a.sub(c,d)),m=(d.x+c.x)*.5,x=(d.y+c.y)*.5,y=u.rectangle(m,x,g,v,{angle:p}),T=s.collides(y,f),S=0;S<T.length;S+=1){var C=T[S];C.body=C.bodyB=C.bodyA}return T},s.region=function(f,c,d){for(var v=[],p=0;p<f.length;p++){var g=f[p],m=h.overlaps(g.bounds,c);(m&&!d||!m&&d)&&v.push(g)}return v},s.point=function(f,c){for(var d=[],v=0;v<f.length;v++){var p=f[v];if(h.contains(p.bounds,c))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(h.contains(m.bounds,c)&&l.contains(m.vertices,c)){d.push(p);break}}}return d}})()},function(e,r,i){var s={};e.exports=s;var a=i(596),n=i(165),h=i(599),u=i(598),l=i(1523),f=i(597),c=i(166),d=i(118),v=i(128),p=i(32),g=i(41);(function(){s.create=function(m,x){x=p.isElement(m)?x:m,m=p.isElement(m)?m:null,x=x||{},(m||x.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:f}},T=p.extend(y,x);return T.world=x.world||a.create(T.world),T.pairs=u.create(),T.broadphase=T.broadphase.controller.create(T.broadphase),T.metrics=T.metrics||{extended:!1},T.metrics=l.create(T.metrics),T},s.update=function(m,x,y){x=x||1e3/60,y=y||1;var T=m.world,S=m.timing,C=m.broadphase,E=[],P;S.timestamp+=x*S.timeScale;var M={timestamp:S.timestamp};c.trigger(m,"beforeUpdate",M);var R=d.allBodies(T),A=d.allConstraints(T);for(l.reset(m.metrics),m.enableSleeping&&n.update(R,S.timeScale),s._bodiesApplyGravity(R,T.gravity),s._bodiesUpdate(R,x,S.timeScale,y,T.bounds),v.preSolveAll(R),P=0;P<m.constraintIterations;P++)v.solveAll(A,S.timeScale);v.postSolveAll(R),C.controller?(T.isModified&&C.controller.clear(C),C.controller.update(C,R,m,T.isModified),E=C.pairsList):E=R,T.isModified&&d.setModified(T,!1,!1,!0);var O=C.detector(E,m),F=m.pairs,b=S.timestamp;for(u.update(F,O,b),u.removeOld(F,b),m.enableSleeping&&n.afterCollisions(F.list,S.timeScale),F.collisionStart.length>0&&c.trigger(m,"collisionStart",{pairs:F.collisionStart}),h.preSolvePosition(F.list),P=0;P<m.positionIterations;P++)h.solvePosition(F.list,R,S.timeScale);for(h.postSolvePosition(R),v.preSolveAll(R),P=0;P<m.constraintIterations;P++)v.solveAll(A,S.timeScale);for(v.postSolveAll(R),h.preSolveVelocity(F.list),P=0;P<m.velocityIterations;P++)h.solveVelocity(F.list,S.timeScale);return F.collisionActive.length>0&&c.trigger(m,"collisionActive",{pairs:F.collisionActive}),F.collisionEnd.length>0&&c.trigger(m,"collisionEnd",{pairs:F.collisionEnd}),l.update(m.metrics,m),s._bodiesClearForces(R),c.trigger(m,"afterUpdate",M),m},s.merge=function(m,x){if(p.extend(m,x),x.world){m.world=x.world,s.clear(m);for(var y=d.allBodies(m.world),T=0;T<y.length;T++){var S=y[T];n.set(S,!1),S.id=p.nextId()}}},s.clear=function(m){var x=m.world;u.clear(m.pairs);var y=m.broadphase;if(y.controller){var T=d.allBodies(x);y.controller.clear(y),y.controller.update(y,T,m,!0)}},s._bodiesClearForces=function(m){for(var x=0;x<m.length;x++){var y=m[x];y.force.x=0,y.force.y=0,y.torque=0}},s._bodiesApplyGravity=function(m,x){var y=typeof x.scale!="undefined"?x.scale:.001;if(!(x.x===0&&x.y===0||y===0))for(var T=0;T<m.length;T++){var S=m[T];S.ignoreGravity||S.isStatic||S.isSleeping||(S.force.x+=S.mass*x.x*y*S.gravityScale.x,S.force.y+=S.mass*x.y*y*S.gravityScale.y)}},s._bodiesUpdate=function(m,x,y,T,S){for(var C=0;C<m.length;C++){var E=m[C];E.isStatic||E.isSleeping||g.update(E,x,y,T)}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),a=i(41),n=i(0),h=i(32),u=i(118),l=i(1401),f=i(9),c=i(272),d=i(2),v=i(6),p=i(41),g=i(166),m=i(593),x=i(596),y=i(83),T=new n({Extends:f,initialize:function(C,E){f.call(this),this.scene=C,this.engine=l.create(E),this.localWorld=this.engine.world;var P=v(E,"gravity",null);P?this.setGravity(P.x,P.y,P.scale):P===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=v(E,"enabled",!0),this.correction=v(E,"correction",1),this.getDelta=v(E,"getDelta",this.update60Hz);var M=d(E,"runner",{}),R=d(M,"fps",!1),A=d(M,"fps",60),O=d(M,"delta",1e3/A),F=d(M,"deltaMin",1e3/A),b=d(M,"deltaMax",1e3/(A*.5));R||(A=1e3/O),this.runner={fps:A,correction:d(M,"correction",1),deltaSampleSize:d(M,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:d(M,"isFixed",!1),delta:O,deltaMin:F,deltaMax:b},this.autoUpdate=v(E,"autoUpdate",!0);var w=v(E,"debug",!1);if(this.drawDebug=typeof w=="object"?!0:w,this.debugGraphic,this.debugConfig={showAxes:d(w,"showAxes",!1),showAngleIndicator:d(w,"showAngleIndicator",!1),angleColor:d(w,"angleColor",15208787),showBroadphase:d(w,"showBroadphase",!1),broadphaseColor:d(w,"broadphaseColor",16757760),showBounds:d(w,"showBounds",!1),boundsColor:d(w,"boundsColor",16777215),showVelocity:d(w,"showVelocity",!1),velocityColor:d(w,"velocityColor",44783),showCollisions:d(w,"showCollisions",!1),collisionColor:d(w,"collisionColor",16094476),showSeparations:d(w,"showSeparations",!1),separationColor:d(w,"separationColor",16753920),showBody:d(w,"showBody",!0),showStaticBody:d(w,"showStaticBody",!0),showInternalEdges:d(w,"showInternalEdges",!1),renderFill:d(w,"renderFill",!1),renderLine:d(w,"renderLine",!0),fillColor:d(w,"fillColor",1075465),fillOpacity:d(w,"fillOpacity",1),lineColor:d(w,"lineColor",2678297),lineOpacity:d(w,"lineOpacity",1),lineThickness:d(w,"lineThickness",1),staticFillColor:d(w,"staticFillColor",857979),staticLineColor:d(w,"staticLineColor",1255396),showSleeping:d(w,"showSleeping",!1),staticBodySleepOpacity:d(w,"staticBodySleepOpacity",.7),sleepFillColor:d(w,"sleepFillColor",4605510),sleepLineColor:d(w,"sleepLineColor",10066585),showSensors:d(w,"showSensors",!0),sensorFillColor:d(w,"sensorFillColor",857979),sensorLineColor:d(w,"sensorLineColor",1255396),showPositions:d(w,"showPositions",!0),positionSize:d(w,"positionSize",4),positionColor:d(w,"positionColor",14697178),showJoint:d(w,"showJoint",!0),jointColor:d(w,"jointColor",14737474),jointLineOpacity:d(w,"jointLineOpacity",1),jointLineThickness:d(w,"jointLineThickness",2),pinSize:d(w,"pinSize",4),pinColor:d(w,"pinColor",4382944),springColor:d(w,"springColor",14697184),anchorColor:d(w,"anchorColor",15724527),anchorSize:d(w,"anchorSize",4),showConvexHulls:d(w,"showConvexHulls",!1),hullColor:d(w,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),d(E,"setBounds",!1)){var N=E.setBounds;if(typeof N=="boolean")this.setBounds();else{var V=d(N,"x",0),W=d(N,"y",0),U=d(N,"width",C.sys.scale.width),D=d(N,"height",C.sys.scale.height),L=d(N,"thickness",64),I=d(N,"left",!0),B=d(N,"right",!0),G=d(N,"top",!0),z=d(N,"bottom",!0);this.setBounds(V,W,U,D,L,I,B,G,z)}}},setCompositeRenderStyle:function(S){var C=S.bodies,E=S.constraints,P=S.composites,M,R,A;for(M=0;M<C.length;M++)R=C[M],A=R.render,this.setBodyRenderStyle(R,A.lineColor,A.lineOpacity,A.lineThickness,A.fillColor,A.fillOpacity);for(M=0;M<E.length;M++)R=E[M],A=R.render,this.setConstraintRenderStyle(R,A.lineColor,A.lineOpacity,A.lineThickness,A.pinSize,A.anchorColor,A.anchorSize);for(M=0;M<P.length;M++)R=P[M],this.setCompositeRenderStyle(R);return this},setBodyRenderStyle:function(S,C,E,P,M,R){var A=S.render,O=this.debugConfig;return A?(C==null&&(C=S.isStatic?O.staticLineColor:O.lineColor),E==null&&(E=O.lineOpacity),P==null&&(P=O.lineThickness),M==null&&(M=S.isStatic?O.staticFillColor:O.fillColor),R==null&&(R=O.fillOpacity),C!==!1&&(A.lineColor=C),E!==!1&&(A.lineOpacity=E),P!==!1&&(A.lineThickness=P),M!==!1&&(A.fillColor=M),R!==!1&&(A.fillOpacity=R),this):this},setConstraintRenderStyle:function(S,C,E,P,M,R,A){var O=S.render,F=this.debugConfig;if(!O)return this;if(C==null){var b=O.type;b==="line"?C=F.jointColor:b==="pin"?C=F.pinColor:b==="spring"&&(C=F.springColor)}return E==null&&(E=F.jointLineOpacity),P==null&&(P=F.jointLineThickness),M==null&&(M=F.pinSize),R==null&&(R=F.anchorColor),A==null&&(A=F.anchorSize),C!==!1&&(O.lineColor=C),E!==!1&&(O.lineOpacity=E),P!==!1&&(O.lineThickness=P),M!==!1&&(O.pinSize=M),R!==!1&&(O.anchorColor=R),A!==!1&&(O.anchorSize=A),this},setEventsProxy:function(){var S=this,C=this.engine,E=this.localWorld;this.drawDebug&&(g.on(E,"compositeModified",function(P){S.setCompositeRenderStyle(P)}),g.on(E,"beforeAdd",function(P){for(var M=[].concat(P.object),R=0;R<M.length;R++){var A=M[R],O=A.render;A.type==="body"?S.setBodyRenderStyle(A,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity):A.type==="composite"?S.setCompositeRenderStyle(A):A.type==="constraint"&&S.setConstraintRenderStyle(A,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize)}})),g.on(E,"beforeAdd",function(P){S.emit(c.BEFORE_ADD,P)}),g.on(E,"afterAdd",function(P){S.emit(c.AFTER_ADD,P)}),g.on(E,"beforeRemove",function(P){S.emit(c.BEFORE_REMOVE,P)}),g.on(E,"afterRemove",function(P){S.emit(c.AFTER_REMOVE,P)}),g.on(C,"beforeUpdate",function(P){S.emit(c.BEFORE_UPDATE,P)}),g.on(C,"afterUpdate",function(P){S.emit(c.AFTER_UPDATE,P)}),g.on(C,"collisionStart",function(P){var M=P.pairs,R,A;M.length>0&&(R=M[0].bodyA,A=M[0].bodyB),S.emit(c.COLLISION_START,P,R,A)}),g.on(C,"collisionActive",function(P){var M=P.pairs,R,A;M.length>0&&(R=M[0].bodyA,A=M[0].bodyB),S.emit(c.COLLISION_ACTIVE,P,R,A)}),g.on(C,"collisionEnd",function(P){var M=P.pairs,R,A;M.length>0&&(R=M[0].bodyA,A=M[0].bodyB),S.emit(c.COLLISION_END,P,R,A)})},setBounds:function(S,C,E,P,M,R,A,O,F){return S===void 0&&(S=0),C===void 0&&(C=0),E===void 0&&(E=this.scene.sys.scale.width),P===void 0&&(P=this.scene.sys.scale.height),M===void 0&&(M=64),R===void 0&&(R=!0),A===void 0&&(A=!0),O===void 0&&(O=!0),F===void 0&&(F=!0),this.updateWall(R,"left",S-M,C-M,M,P+M*2),this.updateWall(A,"right",S+E,C-M,M,P+M*2),this.updateWall(O,"top",S,C-M,E,M),this.updateWall(F,"bottom",S,C+P,E,M),this},updateWall:function(S,C,E,P,M,R){var A=this.walls[C];S?(A&&x.remove(this.localWorld,A),E+=M/2,P+=R/2,this.walls[C]=this.create(E,P,M,R,{isStatic:!0,friction:0,frictionStatic:0})):(A&&x.remove(this.localWorld,A),this.walls[C]=null)},createDebugGraphic:function(){var S=this.scene.sys.add.graphics({x:0,y:0});return S.setDepth(Number.MAX_VALUE),this.debugGraphic=S,this.drawDebug=!0,S},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(S,C,E){return S===void 0&&(S=0),C===void 0&&(C=1),this.localWorld.gravity.x=S,this.localWorld.gravity.y=C,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(S,C,E,P,M){var R=s.rectangle(S,C,E,P,M);return x.add(this.localWorld,R),R},add:function(S){return x.add(this.localWorld,S),this},remove:function(S,C){Array.isArray(S)||(S=[S]);for(var E=0;E<S.length;E++){var P=S[E],M=P.body?P.body:P;u.remove(this.localWorld,M,C)}return this},removeConstraint:function(S,C){return u.remove(this.localWorld,S,C),this},convertTilemapLayer:function(S,C){var E=S.layer,P=S.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(P,C),this},convertTiles:function(S,C){if(S.length===0)return this;for(var E=0;E<S.length;E++)new m(this,S[E],C);return this},nextGroup:function(S){return p.nextGroup(S)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(c.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(c.RESUME),this},update:function(S,C){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,P=this.runner,M=E.timing,R=this.correction;P.isFixed?C=this.getDelta(S,C):(C=S-P.timePrev||P.delta,P.timePrev=S,P.deltaHistory.push(C),P.deltaHistory=P.deltaHistory.slice(-P.deltaSampleSize),C=Math.min.apply(null,P.deltaHistory),C=C<P.deltaMin?P.deltaMin:C,C=C>P.deltaMax?P.deltaMax:C,R=C/P.delta,P.delta=C),P.timeScalePrev!==0&&(R*=M.timeScale/P.timeScalePrev),M.timeScale===0&&(R=0),P.timeScalePrev=M.timeScale,P.correction=R,P.frameCounter+=1,S-P.counterTimestamp>=1e3&&(P.fps=P.frameCounter*((S-P.counterTimestamp)/1e3),P.counterTimestamp=S,P.frameCounter=0),l.update(E,C,R)}},step:function(S,C){l.update(this.engine,S,C)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(S){var C=S.hasOwnProperty("body")?S.body:S;return u.get(this.localWorld,C.id,C.type)!==null},getAllBodies:function(){return u.allBodies(this.localWorld)},getAllConstraints:function(){return u.allConstraints(this.localWorld)},getAllComposites:function(){return u.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var S=this.debugConfig,C=this.engine,E=this.debugGraphic,P=u.allBodies(this.localWorld);this.debugGraphic.clear(),S.showBroadphase&&C.broadphase.controller&&this.renderGrid(C.broadphase,E,S.broadphaseColor,.5),S.showBounds&&this.renderBodyBounds(P,E,S.boundsColor,.5),(S.showBody||S.showStaticBody)&&this.renderBodies(P),S.showJoint&&this.renderJoints(),(S.showAxes||S.showAngleIndicator)&&this.renderBodyAxes(P,E,S.showAxes,S.angleColor,.5),S.showVelocity&&this.renderBodyVelocity(P,E,S.velocityColor,1,2),S.showSeparations&&this.renderSeparations(C.pairs.list,E,S.separationColor),S.showCollisions&&this.renderCollisions(C.pairs.list,E,S.collisionColor)}},renderGrid:function(S,C,E,P){C.lineStyle(1,E,P);for(var M=h.keys(S.buckets),R=0;R<M.length;R++){var A=M[R];if(!(S.buckets[A].length<2)){var O=A.split(/C|R/);C.strokeRect(parseInt(O[1],10)*S.bucketWidth,parseInt(O[2],10)*S.bucketHeight,S.bucketWidth,S.bucketHeight)}}return this},renderSeparations:function(S,C,E){C.lineStyle(1,E,1);for(var P=0;P<S.length;P++){var M=S[P];if(!!M.isActive){var R=M.collision,A=R.bodyA,O=R.bodyB,F=A.position,b=O.position,w=R.penetration,N=!A.isStatic&&!O.isStatic?4:1;O.isStatic&&(N=0),C.lineBetween(b.x,b.y,b.x-w.x*N,b.y-w.y*N),N=!A.isStatic&&!O.isStatic?4:1,A.isStatic&&(N=0),C.lineBetween(F.x,F.y,F.x-w.x*N,F.y-w.y*N)}}return this},renderCollisions:function(S,C,E){C.lineStyle(1,E,.5),C.fillStyle(E,1);var P,M;for(P=0;P<S.length;P++)if(M=S[P],!!M.isActive)for(var R=0;R<M.activeContacts.length;R++){var A=M.activeContacts[R],O=A.vertex;C.fillRect(O.x-2,O.y-2,5,5)}for(P=0;P<S.length;P++)if(M=S[P],!!M.isActive){var F=M.collision,b=M.activeContacts;if(b.length>0){var w=b[0].vertex.x,N=b[0].vertex.y;b.length===2&&(w=(b[0].vertex.x+b[1].vertex.x)/2,N=(b[0].vertex.y+b[1].vertex.y)/2),F.bodyB===F.supports[0].body||F.bodyA.isStatic?C.lineBetween(w-F.normal.x*8,N-F.normal.y*8,w,N):C.lineBetween(w+F.normal.x*8,N+F.normal.y*8,w,N)}}return this},renderBodyBounds:function(S,C,E,P){C.lineStyle(1,E,P);for(var M=0;M<S.length;M++){var R=S[M];if(!!R.render.visible){var A=R.bounds;if(A)C.strokeRect(A.min.x,A.min.y,A.max.x-A.min.x,A.max.y-A.min.y);else for(var O=R.parts,F=O.length>1?1:0;F<O.length;F++){var b=O[F];C.strokeRect(b.bounds.min.x,b.bounds.min.y,b.bounds.max.x-b.bounds.min.x,b.bounds.max.y-b.bounds.min.y)}}}return this},renderBodyAxes:function(S,C,E,P,M){C.lineStyle(1,P,M);for(var R=0;R<S.length;R++){var A=S[R],O=A.parts;if(!!A.render.visible){var F,b,w;if(E)for(b=O.length>1?1:0;b<O.length;b++)for(F=O[b],w=0;w<F.axes.length;w++){var N=F.axes[w];C.lineBetween(F.position.x,F.position.y,F.position.x+N.x*20,F.position.y+N.y*20)}else for(b=O.length>1?1:0;b<O.length;b++)for(F=O[b],w=0;w<F.axes.length;w++)C.lineBetween(F.position.x,F.position.y,(F.vertices[0].x+F.vertices[F.vertices.length-1].x)/2,(F.vertices[0].y+F.vertices[F.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(S,C,E,P,M){C.lineStyle(M,E,P);for(var R=0;R<S.length;R++){var A=S[R];!A.render.visible||C.lineBetween(A.position.x,A.position.y,A.position.x+(A.position.x-A.positionPrev.x)*2,A.position.y+(A.position.y-A.positionPrev.y)*2)}return this},renderBodies:function(S){for(var C=this.debugGraphic,E=this.debugConfig,P=E.showBody,M=E.showStaticBody,R=E.showSleeping,A=E.showInternalEdges,O=E.showConvexHulls,F=E.renderFill,b=E.renderLine,w=E.staticBodySleepOpacity,N=E.sleepFillColor,V=E.sleepLineColor,W=E.hullColor,U=0;U<S.length;U++){var D=S[U];if(!!D.render.visible&&!(!M&&D.isStatic||!P&&!D.isStatic)){var L=D.render.lineColor,I=D.render.lineOpacity,B=D.render.lineThickness,G=D.render.fillColor,z=D.render.fillOpacity;R&&D.isSleeping&&(D.isStatic?(I*=w,z*=w):(L=V,G=N)),F||(G=null),b||(L=null),this.renderBody(D,C,A,L,I,B,G,z);var Y=D.parts.length;O&&Y>1&&this.renderConvexHull(D,C,W,B)}}},renderBody:function(S,C,E,P,M,R,A,O){P===void 0&&(P=null),M===void 0&&(M=null),R===void 0&&(R=1),A===void 0&&(A=null),O===void 0&&(O=null);for(var F=this.debugConfig,b=F.sensorFillColor,w=F.sensorLineColor,N=S.parts,V=N.length,W=V>1?1:0;W<V;W++){var U=N[W],D=U.render,L=D.opacity;if(!(!D.visible||L===0||U.isSensor&&!F.showSensors)){var I=U.circleRadius;if(C.beginPath(),U.isSensor?(A!==null&&C.fillStyle(b,O*L),P!==null&&C.lineStyle(R,w,M*L)):(A!==null&&C.fillStyle(A,O*L),P!==null&&C.lineStyle(R,P,M*L)),I)C.arc(U.position.x,U.position.y,I,0,2*Math.PI);else{var B=U.vertices,G=B.length;C.moveTo(B[0].x,B[0].y);for(var z=1;z<G;z++){var Y=B[z];if(!B[z-1].isInternal||E?C.lineTo(Y.x,Y.y):C.moveTo(Y.x,Y.y),z<G&&Y.isInternal&&!E){var X=(z+1)%G;C.moveTo(B[X].x,B[X].y)}}C.closePath()}A!==null&&C.fillPath(),P!==null&&C.strokePath()}}if(F.showPositions&&!S.isStatic){var H=S.position.x,$=S.position.y,k=Math.ceil(F.positionSize/2);C.fillStyle(F.positionColor,1),C.fillRect(H-k,$-k,F.positionSize,F.positionSize)}return this},renderConvexHull:function(S,C,E,P){P===void 0&&(P=1);var M=S.parts,R=M.length;if(R>1){var A=S.vertices;C.lineStyle(P,E),C.beginPath(),C.moveTo(A[0].x,A[0].y);for(var O=1;O<A.length;O++)C.lineTo(A[O].x,A[O].y);C.lineTo(A[0].x,A[0].y),C.strokePath()}return this},renderJoints:function(){for(var S=this.debugGraphic,C=u.allConstraints(this.localWorld),E=0;E<C.length;E++){var P=C[E].render,M=P.lineColor,R=P.lineOpacity,A=P.lineThickness,O=P.pinSize,F=P.anchorColor,b=P.anchorSize;this.renderConstraint(C[E],S,M,R,A,O,F,b)}},renderConstraint:function(S,C,E,P,M,R,A,O){var F=S.render;if(!F.visible||!S.pointA||!S.pointB)return this;C.lineStyle(M,E,P);var b=S.bodyA,w=S.bodyB,N,V;if(b?N=y.add(b.position,S.pointA):N=S.pointA,F.type==="pin")C.strokeCircle(N.x,N.y,R);else{if(w?V=y.add(w.position,S.pointB):V=S.pointB,C.beginPath(),C.moveTo(N.x,N.y),F.type==="spring")for(var W=y.sub(V,N),U=y.perp(y.normalise(W)),D=Math.ceil(h.clamp(S.length/5,12,20)),L,I=1;I<D;I+=1)L=I%2===0?1:-1,C.lineTo(N.x+W.x*(I/D)+U.x*L*4,N.y+W.y*(I/D)+U.y*L*4);C.lineTo(V.x,V.y)}return C.strokePath(),F.anchors&&O>0&&(C.fillStyle(A),C.fillCircle(N.x,N.y,O),C.fillCircle(V.x,V.y,O)),this},resetCollisionIDs:function(){return a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),x.clear(this.localWorld,!1),l.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});e.exports=T},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BasePlugin:i(540),DefaultPlugins:i(197),PluginCache:i(24),PluginManager:i(414),ScenePlugin:i(1404)}},function(e,r,i){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=i(540),a=i(0),n=i(20),h=new a({Extends:s,initialize:function(l,f,c){s.call(this,f),this.scene=l,this.systems=l.sys,this.pluginKey=c,l.sys.events.once(n.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:i(1406),Events:i(91),Snapshot:i(1407),WebGL:i(1408)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasRenderer:i(368),GetBlendModes:i(370),SetTransform:i(30)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:i(369),WebGL:i(383)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(107),a=i(17),n={PipelineManager:i(372),Pipelines:i(1409),RenderTarget:i(141),Utils:i(12),WebGLPipeline:i(58),WebGLRenderer:i(371),WebGLShader:i(375)};n=a(!1,n,s),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(92),a=i(17),n={BitmapMaskPipeline:i(373),Events:i(374),GraphicsPipeline:i(376),LightPipeline:i(377),MultiPipeline:i(108),PointLightPipeline:i(378),PostFXPipeline:i(1410),RopePipeline:i(379),SinglePipeline:i(380),UtilityPipeline:i(381)};n=a(!1,n,s),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(198),n=i(2),h=i(1411),u=i(382),l=i(58),f=new s({Extends:l,initialize:function(d){d.renderTarget=n(d,"renderTarget",1),d.fragShader=n(d,"fragShader",h),d.vertShader=n(d,"vertShader",u),d.attributes=n(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.batchSize=1,d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],l.call(this,d),this.isPostFX=!0,this.gameObject,this.colorMatrix=new a,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){l.prototype.boot.call(this);var c=this.manager.UTILITY_PIPELINE;this.fullFrame1=c.fullFrame1,this.fullFrame2=c.fullFrame2,this.halfFrame1=c.halfFrame1,this.halfFrame2=c.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(c){this.bindAndDraw(c)},copyFrame:function(c,d,v,p,g){this.manager.copyFrame(c,d,v,p,g)},copyToGame:function(c){this.manager.copyToGame(c)},drawFrame:function(c,d,v){this.manager.drawFrame(c,d,v,this.colorMatrix)},blendFrames:function(c,d,v,p,g){this.manager.blendFrames(c,d,v,p,g)},blendFramesAdditive:function(c,d,v,p,g){this.manager.blendFramesAdditive(c,d,v,p,g)},clearFrame:function(c,d){this.manager.clearFrame(c,d)},blitFrame:function(c,d,v,p,g,m){this.manager.blitFrame(c,d,v,p,g,m)},copyFrameRect:function(c,d,v,p,g,m,x,y){this.manager.copyFrameRect(c,d,v,p,g,m,x,y)},bindAndDraw:function(c,d,v,p,g){v===void 0&&(v=!0),p===void 0&&(p=!0);var m=this.gl,x=this.renderer;this.bind(g),this.set1i("uMainSampler",0),d?(m.viewport(0,0,d.width,d.height),m.bindFramebuffer(m.FRAMEBUFFER,d.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,d.texture,0),v&&(p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(x.popFramebuffer(!1,!1,!1),x.currentFramebuffer||m.viewport(0,0,x.width,x.height)),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,c.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),d?(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,null)):x.resetTextures()}});e.exports=f},function(e,r){e.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(17),a=i(201),n={Center:i(403),Events:i(104),Orientation:i(404),ScaleManager:i(415),ScaleModes:i(405),Zoom:i(406)};n=s(!1,n,a.CENTER),n=s(!1,n,a.ORIENTATION),n=s(!1,n,a.SCALE_MODE),n=s(!1,n,a.ZOOM),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(144),a=i(17),n={Events:i(20),GetPhysicsPlugins:i(419),GetScenePlugins:i(420),SceneManager:i(417),ScenePlugin:i(1414),Settings:i(421),Systems:i(204)};n=a(!1,n,s),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),a=i(0),n=i(20),h=i(2),u=i(24),l=new a({initialize:function(c){this.scene=c,this.systems=c.sys,this.settings=c.sys.settings,this.key=c.sys.settings.key,this.manager=c.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,c.sys.events.once(n.BOOT,this.boot,this),c.sys.events.on(n.START,this.pluginStart,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(n.SHUTDOWN,this.shutdown,this)},start:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",f,c),this},restart:function(f){var c=this.key;return this.manager.queueOp("stop",c),this.manager.queueOp("start",c,f),this},transition:function(f){f===void 0&&(f={});var c=h(f,"target",!1),d=this.manager.getScene(c);if(!c||!this.checkValidTransition(d))return!1;var v=h(f,"duration",1e3);this._elapsed=0,this._target=d,this._duration=v,this._willSleep=h(f,"sleep",!1),this._willRemove=h(f,"remove",!1);var p=h(f,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=h(f,"onUpdateScope",this.scene));var g=h(f,"allowInput",!1);this.settings.transitionAllowInput=g;var m=d.sys.settings;return m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=v,m.transitionAllowInput=g,h(f,"moveAbove",!1)?this.manager.moveAbove(this.key,c):h(f,"moveBelow",!1)&&this.manager.moveBelow(this.key,c),d.sys.isSleeping()?d.sys.wake(h(f,"data")):this.manager.start(c,h(f,"data")),this.systems.events.emit(n.TRANSITION_OUT,d,v),this.systems.events.on(n.UPDATE,this.step,this),!0},checkValidTransition:function(f){return!(!f||f.sys.isActive()||f.sys.isTransitioning()||f===this.scene||this.systems.isTransitioning())},step:function(f,c){this._elapsed+=c,this.transitionProgress=s(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var f=this._target.sys,c=this._target.sys.settings;this.systems.events.off(n.UPDATE,this.step,this),f.events.emit(n.TRANSITION_COMPLETE,this.scene),c.isTransition=!1,c.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(f,c,d,v){return this.manager.add(f,c,d,v)},launch:function(f,c){return f&&f!==this.key&&this.manager.queueOp("start",f,c),this},run:function(f,c){return f&&f!==this.key&&this.manager.queueOp("run",f,c),this},pause:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("pause",f,c),this},resume:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("resume",f,c),this},sleep:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("sleep",f,c),this},wake:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("wake",f,c),this},switch:function(f){return f!==this.key&&this.manager.queueOp("switch",this.key,f),this},stop:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("stop",f,c),this},setActive:function(f,c,d){c===void 0&&(c=this.key);var v=this.manager.getScene(c);return v&&v.sys.setActive(f,d),this},setVisible:function(f,c){c===void 0&&(c=this.key);var d=this.manager.getScene(c);return d&&d.sys.setVisible(f),this},isSleeping:function(f){return f===void 0&&(f=this.key),this.manager.isSleeping(f)},isActive:function(f){return f===void 0&&(f=this.key),this.manager.isActive(f)},isPaused:function(f){return f===void 0&&(f=this.key),this.manager.isPaused(f)},isVisible:function(f){return f===void 0&&(f=this.key),this.manager.isVisible(f)},swapPosition:function(f,c){return c===void 0&&(c=this.key),f!==c&&this.manager.swapPosition(f,c),this},moveAbove:function(f,c){return c===void 0&&(c=this.key),f!==c&&this.manager.moveAbove(f,c),this},moveBelow:function(f,c){return c===void 0&&(c=this.key),f!==c&&this.manager.moveBelow(f,c),this},remove:function(f){return f===void 0&&(f=this.key),this.manager.remove(f),this},moveUp:function(f){return f===void 0&&(f=this.key),this.manager.moveUp(f),this},moveDown:function(f){return f===void 0&&(f=this.key),this.manager.moveDown(f),this},bringToTop:function(f){return f===void 0&&(f=this.key),this.manager.bringToTop(f),this},sendToBack:function(f){return f===void 0&&(f=this.key),this.manager.sendToBack(f),this},get:function(f){return this.manager.getScene(f)},getIndex:function(f){return f===void 0&&(f=this.key),this.manager.getIndex(f)},shutdown:function(){var f=this.systems.events;f.off(n.SHUTDOWN,this.shutdown,this),f.off(n.POST_UPDATE,this.step,this),f.off(n.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});u.register("ScenePlugin",l,"scenePlugin"),e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:i(438),List:i(110),Map:i(102),ProcessQueue:i(211),RTree:i(531),Set:i(149),Size:i(416)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(17),a=i(1417),n={CanvasTexture:i(423),Events:i(106),FilterMode:a,Frame:i(109),Parsers:i(425),Texture:i(206),TextureManager:i(422),TextureSource:i(424)};n=s(!1,n,a),e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={LINEAR:0,NEAREST:1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(17),a=i(1419),n={Components:i(251),Parsers:i(1452),Formats:i(40),ImageCollection:i(576),ParseToTilemap:i(262),Tile:i(85),Tilemap:i(580),TilemapCreator:i(1459),TilemapFactory:i(1460),Tileset:i(122),TilemapLayer:i(581),Orientation:i(29),LayerData:i(120),MapData:i(121),ObjectLayer:i(572)};n=s(!1,n,a.ORIENTATION),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ORIENTATION:i(29)};e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=i(63),n=function(h,u,l,f,c,d,v,p){v===void 0&&(v=!0),h<0&&(h=0),u<0&&(u=0);for(var g=s(h,u,l,f,null,p),m=c-h,x=d-u,y=0;y<g.length;y++){var T=g[y].x+m,S=g[y].y+x;T>=0&&T<p.width&&S>=0&&S<p.height&&p.data[S][T]&&p.data[S][T].copy(g[y])}v&&a(c-1,d-1,l+2,f+2,p)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=i(542),n=function(h,u,l,f,c,d){l||(l={}),Array.isArray(h)||(h=[h]);var v=d.tilemapLayer;f||(f=v.scene),c||(c=f.cameras.main);var p=s(0,0,d.width,d.height,null,d),g=[],m;for(m=0;m<p.length;m++){var x=p[m];if(h.indexOf(x.index)!==-1){var y=v.tileToWorldXY(x.x,x.y,void 0,c,d);l.x=y.x,l.y=y.y,g.push(f.make.sprite(l))}}if(typeof u=="number")for(m=0;m<h.length;m++)a(h[m],u,0,0,d.width,d.height,d);else if(Array.isArray(u))for(m=0;m<h.length;m++)a(h[m],u[m],0,0,d.width,d.height,d);return g};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=i(63),n=i(72),h=function(u,l,f,c,d,v,p){for(var g=p.collideIndexes.indexOf(u)!==-1,m=s(l,f,c,d,null,p),x=0;x<m.length;x++)m[x].index=u,n(m[x],g);v&&a(l-1,f-1,c+2,d+2,p)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=function(n,h,u,l,f,c,d,v){var p=s(u,l,f,c,d,v);return p.filter(n,h)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){a===void 0&&(a=0),n===void 0&&(n=!1);var u=0,l,f,c;if(n){for(f=h.height-1;f>=0;f--)for(l=h.width-1;l>=0;l--)if(c=h.data[f][l],c&&c.index===s){if(u===a)return c;u+=1}}else for(f=0;f<h.height;f++)for(l=0;l<h.width;l++)if(c=h.data[f][l],c&&c.index===s){if(u===a)return c;u+=1}return null};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=function(n,h,u,l,f,c,d,v){var p=s(u,l,f,c,d,v);return p.find(n,h)||null};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=function(n,h,u,l,f,c,d,v){var p=s(u,l,f,c,d,v);p.forEach(n,h)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),a=i(544),n=i(545),h=i(547),u=i(1),l=i(548),f=function(c){return c===s.ORTHOGONAL?a:c===s.HEXAGONAL?n:c===s.STAGGERED?l:c===s.ISOMETRIC?h:u};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(158),a=i(3),n=new a,h=function(u,l,f,c,d){return d.tilemapLayer.worldToTileXY(u,l,!0,n,c),s(n.x,n.y,f,d)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(483),a=i(26),n=i(484),h=i(1),u=i(3),l=function(p,g){return n.RectangleToTriangle(g,p)},f=new u,c=new u,d=new u,v=function(p,g,m,x){if(p===void 0)return[];var y=h;p instanceof s.Circle?y=n.CircleToRectangle:p instanceof s.Rectangle?y=n.RectangleToRectangle:p instanceof s.Triangle?y=l:p instanceof s.Line&&(y=n.LineToRectangle),x.tilemapLayer.worldToTileXY(p.left,p.top,!0,c,m);var T=c.x,S=c.y;x.tilemapLayer.worldToTileXY(p.right,p.bottom,!0,d,m);var C=Math.ceil(d.x),E=Math.ceil(d.y),P=Math.max(C-T,1),M=Math.max(E-S,1),R=a(T,S,P,M,g,x),A=x.tileWidth,O=x.tileHeight;x.tilemapLayer&&(A*=x.tilemapLayer.scaleX,O*=x.tilemapLayer.scaleY);for(var F=[],b=new s.Rectangle(0,0,A,O),w=0;w<R.length;w++){var N=R[w];x.tilemapLayer.tileToWorldXY(N.x,N.y,f,m),b.x=f.x,b.y=f.y,y(p,b)&&F.push(N)}return F};e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),a=i(1),n=i(253),h=function(u){return u===s.ORTHOGONAL?n:a};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),a=i(550),n=i(551),h=i(1),u=i(552),l=i(553),f=function(c){return c===s.ORTHOGONAL?l:c===s.ISOMETRIC?n:c===s.HEXAGONAL?a:c===s.STAGGERED?u:h};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),a=i(554),n=i(1),h=i(555),u=i(254),l=function(f){return f===s.ORTHOGONAL?u:f===s.HEXAGONAL?a:f===s.STAGGERED?h:n};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),a=i(1),n=i(255),h=function(u){return u===s.ORTHOGONAL?n:a};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),a=i(556),n=i(557),h=i(1),u=i(558),l=i(559),f=function(c){return c===s.ORTHOGONAL?l:c===s.ISOMETRIC?n:c===s.HEXAGONAL?a:c===s.STAGGERED?u:h};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),a=i(560),n=i(1),h=i(561),u=i(256),l=function(f){return f===s.ORTHOGONAL?u:f===s.HEXAGONAL?a:f===s.STAGGERED?h:n};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(562),a=i(3),n=new a,h=function(u,l,f,c){c.tilemapLayer.worldToTileXY(u,l,!0,n,f);var d=n.x,v=n.y;return s(d,v,c)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(257),a=i(3),n=new a,h=function(u,l,f,c,d,v){return v.tilemapLayer.worldToTileXY(l,f,!0,n,d,v),s(u,n.x,n.y,c,v)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(63),a=i(257),n=function(h,u,l,f,c){if(f===void 0&&(f=!0),!Array.isArray(h))return null;Array.isArray(h[0])||(h=[h]);for(var d=h.length,v=h[0].length,p=0;p<d;p++)for(var g=0;g<v;g++){var m=h[p][g];a(m,u+g,l+p,!1,c)}f&&s(u-1,l-1,v+2,d+2,c)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=i(210),n=function(h,u,l,f,c,d){var v,p=s(h,u,l,f,{},d);if(!c)for(c=[],v=0;v<p.length;v++)c.indexOf(p[v].index)===-1&&c.push(p[v].index);for(v=0;v<p.length;v++)p[v].index=a(c)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(563),a=i(3),n=new a,h=function(u,l,f,c,d,v){return v.tilemapLayer.worldToTileXY(u,l,!0,n,d,v),s(n.x,n.y,f,c,v)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=i(397),n=new a(105,210,231,150),h=new a(243,134,48,200),u=new a(40,39,37,150),l=function(f,c,d){c===void 0&&(c={});var v=c.tileColor!==void 0?c.tileColor:n,p=c.collidingTileColor!==void 0?c.collidingTileColor:h,g=c.faceColor!==void 0?c.faceColor:u,m=s(0,0,d.width,d.height,null,d);f.translateCanvas(d.tilemapLayer.x,d.tilemapLayer.y),f.scaleCanvas(d.tilemapLayer.scaleX,d.tilemapLayer.scaleY);for(var x=0;x<m.length;x++){var y=m[x],T=y.width,S=y.height,C=y.pixelX,E=y.pixelY,P=y.collides?p:v;P!==null&&(f.fillStyle(P.color,P.alpha/255),f.fillRect(C,E,T,S)),C+=1,E+=1,T-=2,S-=2,g!==null&&(f.lineStyle(1,g.color,g.alpha/255),y.faceTop&&f.lineBetween(C,E,C+T,E),y.faceRight&&f.lineBetween(C+T,E,C+T,E+S),y.faceBottom&&f.lineBetween(C,E+S,C+T,E+S),y.faceLeft&&f.lineBetween(C,E,C,E+S))}};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(72),a=i(63),n=i(160),h=function(u,l,f,c,d){l===void 0&&(l=!0),f===void 0&&(f=!0),d===void 0&&(d=!0),Array.isArray(u)||(u=[u]);for(var v=0;v<u.length;v++)n(u[v],l,c);if(d)for(var p=0;p<c.height;p++)for(var g=0;g<c.width;g++){var m=c.data[p][g];m&&u.indexOf(m.index)!==-1&&s(m,l)}f&&a(0,0,c.width,c.height,c)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(72),a=i(63),n=i(160),h=function(u,l,f,c,d,v){if(f===void 0&&(f=!0),c===void 0&&(c=!0),v===void 0&&(v=!0),!(u>l)){for(var p=u;p<=l;p++)n(p,f,d);if(v)for(var g=0;g<d.height;g++)for(var m=0;m<d.width;m++){var x=d.data[g][m];x&&x.index>=u&&x.index<=l&&s(x,f)}c&&a(0,0,d.width,d.height,d)}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(72),a=i(63),n=i(160),h=function(u,l,f,c){l===void 0&&(l=!0),f===void 0&&(f=!0),Array.isArray(u)||(u=[u]);for(var d=0;d<c.height;d++)for(var v=0;v<c.width;v++){var p=c.data[d][v];p&&u.indexOf(p.index)===-1&&(s(p,l),n(p.index,l,c))}f&&a(0,0,c.width,c.height,c)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(72),a=i(63),n=i(126),h=function(u,l,f,c){l===void 0&&(l=!0),f===void 0&&(f=!0);for(var d=0;d<c.height;d++)for(var v=0;v<c.width;v++){var p=c.data[d][v];if(!!p){for(var g in u)if(!!n(p.properties,g)){var m=u[g];Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)p.properties[g]===m[x]&&s(p,l)}}}f&&a(0,0,c.width,c.height,c)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(72),a=i(63),n=function(h,u,l){h===void 0&&(h=!0),u===void 0&&(u=!0);for(var f=0;f<l.height;f++)for(var c=0;c<l.width;c++){var d=l.data[f][c];if(!!d){var v=d.getCollisionGroup();v&&v.objects&&v.objects.length>0&&s(d,h)}}u&&a(0,0,l.width,l.height,l)};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a,n,h){if(typeof s=="number")h.callbacks[s]=a!==null?{callback:a,callbackContext:n}:void 0;else for(var u=0,l=s.length;u<l;u++)h.callbacks[s[u]]=a!==null?{callback:a,callbackContext:n}:void 0};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=function(n,h,u,l,f,c,d){for(var v=s(n,h,u,l,null,d),p=0;p<v.length;p++)v[p].setCollisionCallback(f,c)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=i(131),n=function(h,u,l,f,c){var d=s(h,u,l,f,null,c),v=d.map(function(g){return g.index});a(v);for(var p=0;p<d.length;p++)d[p].index=v[p]};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=function(n,h,u,l,f,c,d){for(var v=s(u,l,f,c,null,d),p=0;p<v.length;p++)v[p]&&(v[p].index===n?v[p].index=h:v[p].index===h&&(v[p].index=n))};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),a=function(n,h,u,l,f,c){if(!!f){var d,v=s(n,h,u,l,null,c),p=0;for(d=0;d<f.length;d++)p+=f[d].weight;if(!(p<=0))for(d=0;d<v.length;d++){for(var g=Math.random()*p,m=0,x=-1,y=0;y<f.length;y++)if(m+=f[y].weight,g<=m){var T=f[y].index;x=Array.isArray(T)?T[Math.floor(Math.random()*T.length)]:T;break}v[d].index=x}}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FromOrientationString:i(258),Parse:i(564),Parse2DArray:i(259),ParseCSV:i(565),Impact:i(1454),Tiled:i(1455)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){for(var n=0;n<s.length;n++){var h=s[n],u=n;if(h.name&&h.name!==""&&(u=h.name),Array.isArray(h.wangtiles)&&h.wangtiles.length>0){var l={},f={},c,d,v;if(Array.isArray(h.edgecolors))for(c=0;c<h.edgecolors.length;c++)v=1+c,d=h.edgecolors[c],d.name!==""&&(l[v]=d.name);if(Array.isArray(h.cornercolors))for(c=0;c<h.cornercolors.length;c++)v=1+c,d=h.cornercolors[c],d.name!==""&&(f[v]=d.name);if(Array.isArray(h.colors))for(c=0;c<h.colors.length;c++)d=h.colors[c],v=1+c,d.name!==""&&(l[v]=f[v]=d.name);for(var p=[l,f,l,f,l,f,l,f],g=0;g<h.wangtiles.length;g++){var m=h.wangtiles[g],x=a[m.tileid]||(a[m.tileid]={});x=x.wangid||(x.wangid={});for(var y=[],T=0;T<Math.min(p.length,m.wangid.length);T++){if(d=m.wangid[T],d===0){y.push(void 0);continue}var S=p[T][d];if(S!==void 0){y.push(S);continue}y.push(d)}x[u]=y}}}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ParseTileLayers:i(578),ParseTilesets:i(579),ParseWeltmeister:i(577)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AssignTileProperties:i(567),Base64Decode:i(574),BuildTilesetIndex:i(568),CreateGroupLayer:i(161),ParseGID:i(261),ParseImageLayers:i(569),ParseJSONTiled:i(566),ParseObject:i(260),ParseObjectLayers:i(570),ParseTileLayers:i(573),ParseTilesets:i(575)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),a=i(1);s=i(1457),a=i(1458),e.exports={renderWebGL:s,renderCanvas:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),a=function(n,h,u){var l=h.cull(u),f=l.length,c=u.alpha*h.alpha;if(!(f===0||c<=0)){var d=h.gidMap,v=n.pipelines.set(h.pipeline,h),p=s.getTintAppendFloatAlpha,g=h.scrollFactorX,m=h.scrollFactorY,x=h.x,y=h.y,T=h.scaleX,S=h.scaleY;n.pipelines.preBatch(h);for(var C=0;C<f;C++){var E=l[C],P=d[E.index];if(!!P){var M=P.getTileTextureCoordinates(E.index);if(M!==null){var R=P.glTexture,A=v.setTexture2D(R,h),O=P.tileWidth,F=P.tileHeight,b=M.x,w=M.y,N=P.tileWidth*.5,V=P.tileHeight*.5,W=p(E.tint,c*E.alpha);v.batchTexture(h,R,R.width,R.height,x+(N+E.pixelX)*T,y+(V+E.pixelY)*S,E.width,E.height,T,S,E.rotation,E.flipX,E.flipY,g,m,N,V,b,w,O,F,W,W,W,W,!1,0,0,u,null,!0,A)}}}n.pipelines.postBatch(h)}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(25),a=new s,n=new s,h=new s,u=function(l,f,c,d){var v=f.cull(c),p=v.length,g=c.alpha*f.alpha;if(!(p===0||g<=0)){var m=a,x=n,y=h;x.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY),m.copyFrom(c.matrix);var T=l.currentContext,S=f.gidMap;T.save(),d?(m.multiplyWithOffset(d,-c.scrollX*f.scrollFactorX,-c.scrollY*f.scrollFactorY),x.e=f.x,x.f=f.y,m.multiply(x,y),y.copyToContext(T)):(x.e-=c.scrollX*f.scrollFactorX,x.f-=c.scrollY*f.scrollFactorY,x.copyToContext(T)),(!l.antialias||f.scaleX>1||f.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var C=0;C<p;C++){var E=v[C],P=S[E.index];if(!!P){var M=P.image.getSourceImage(),R=P.getTileTextureCoordinates(E.index);if(R!==null){var A=P.tileWidth,O=P.tileHeight,F=A*.5,b=O*.5;T.save(),T.translate(E.pixelX+F,E.pixelY+b),E.rotation!==0&&T.rotate(E.rotation),(E.flipX||E.flipY)&&T.scale(E.flipX?-1:1,E.flipY?-1:1),T.globalAlpha=g*E.alpha,T.drawImage(M,R.x,R.y,A,O,-F,-b,A,O),T.restore()}}}T.restore()}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(16),a=i(262);s.register("tilemap",function(n){var h=n!==void 0?n:{};return a(this.scene,h.key,h.tileWidth,h.tileHeight,h.width,h.height,h.data,h.insertNull)})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),a=i(262);s.register("tilemap",function(n,h,u,l,f,c,d){return n===null&&(n=void 0),h===null&&(h=void 0),u===null&&(u=void 0),l===null&&(l=void 0),f===null&&(f=void 0),a(this.scene,n,h,u,l,f,c,d)})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clock:i(1462),TimerEvent:i(582)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),a=i(24),n=i(20),h=i(582),u=i(93),l=new s({initialize:function(c){this.scene=c,this.systems=c.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],c.sys.events.once(n.BOOT,this.boot,this),c.sys.events.on(n.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){var f=this.systems.events;f.on(n.PRE_UPDATE,this.preUpdate,this),f.on(n.UPDATE,this.update,this),f.once(n.SHUTDOWN,this.shutdown,this)},addEvent:function(f){var c;return f instanceof h?(c=f,this.removeEvent(c),c.elapsed=c.startAt,c.hasDispatched=!1,c.repeatCount=c.repeat===-1||c.loop?999999999999:c.repeat):c=new h(f),this._pendingInsertion.push(c),c},delayedCall:function(f,c,d,v){return this.addEvent({delay:f,callback:c,args:d,callbackScope:v})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(f){Array.isArray(f)||(f=[f]);for(var c=0;c<f.length;c++){var d=f[c];u(this._pendingRemoval,d),u(this._pendingInsertion,d),u(this._active,d)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var f=this._pendingRemoval.length,c=this._pendingInsertion.length;if(!(f===0&&c===0)){var d,v;for(d=0;d<f;d++){v=this._pendingRemoval[d];var p=this._active.indexOf(v);p>-1&&this._active.splice(p,1),v.destroy()}for(d=0;d<c;d++)v=this._pendingInsertion[d],this._active.push(v);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(f,c){if(this.now=f,!this.paused){c*=this.timeScale;for(var d=0;d<this._active.length;d++){var v=this._active[d];if(!v.paused&&(v.elapsed+=c*v.timeScale,v.elapsed>=v.delay)){var p=v.elapsed-v.delay;v.elapsed=v.delay,!v.hasDispatched&&v.callback&&(v.hasDispatched=!0,v.callback.apply(v.callbackScope,v.args)),v.repeatCount>0?(v.repeatCount--,v.elapsed=p,v.hasDispatched=!1):this._pendingRemoval.push(v)}}}},shutdown:function(){var f;for(f=0;f<this._pendingInsertion.length;f++)this._pendingInsertion[f].destroy();for(f=0;f<this._active.length;f++)this._active[f].destroy();for(f=0;f<this._pendingRemoval.length;f++)this._pendingRemoval[f].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var c=this.systems.events;c.off(n.PRE_UPDATE,this.preUpdate,this),c.off(n.UPDATE,this.update,this),c.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});a.register("Clock",l,"time"),e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(100),a=i(17),n={Builders:i(1464),Events:i(267),TweenManager:i(1480),Tween:i(266),TweenData:i(268),Timeline:i(588)};n=a(!1,n,s),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetBoolean:i(99),GetEaseFunction:i(80),GetNewValue:i(162),GetProps:i(583),GetTargets:i(263),GetTweens:i(584),GetValueOp:i(264),NumberTweenBuilder:i(585),StaggerBuilder:i(586),TimelineBuilder:i(587),TweenBuilder:i(163)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="active"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="repeat"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="yoyo"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(93),a=i(0),n=i(585),h=i(24),u=i(20),l=i(586),f=i(587),c=i(100),d=i(163),v=new a({initialize:function(g){this.scene=g,this.systems=g.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,g.sys.events.once(u.BOOT,this.boot,this),g.sys.events.on(u.START,this.start,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){var p=this.systems.events;p.on(u.PRE_UPDATE,this.preUpdate,this),p.on(u.UPDATE,this.update,this),p.once(u.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(p){return f(this,p)},timeline:function(p){var g=f(this,p);return g.paused||(this._add.push(g),this._toProcess++),g},create:function(p){return d(this,p)},add:function(p){var g=d(this,p);return this._add.push(g),this._toProcess++,g},existing:function(p){return this._add.push(p),this._toProcess++,this},addCounter:function(p){var g=n(this,p);return this._add.push(g),this._toProcess++,g},stagger:function(p,g){return l(p,g)},preUpdate:function(){if(this._toProcess!==0){var p=this._destroy,g=this._active,m=this._pending,x,y;for(x=0;x<p.length;x++){y=p[x];var T=g.indexOf(y);T===-1?(T=m.indexOf(y),T>-1&&(y.state=c.REMOVED,m.splice(T,1))):(y.state=c.REMOVED,g.splice(T,1))}for(p.length=0,p=this._add,x=0;x<p.length;x++)y=p[x],y.state===c.PENDING_ADD&&(y.init()?(y.play(),this._active.push(y)):this._pending.push(y));p.length=0,this._toProcess=0}},update:function(p,g){var m=this._active,x;g*=this.timeScale;for(var y=0;y<m.length;y++)x=m[y],x.update(p,g)&&(this._destroy.push(x),this._toProcess++)},remove:function(p){return s(this._add,p),s(this._pending,p),s(this._active,p),s(this._destroy,p),p.state=c.REMOVED,this},makeActive:function(p){if(this._add.indexOf(p)!==-1||this._active.indexOf(p)!==-1)return this;var g=this._pending.indexOf(p);return g!==-1&&this._pending.splice(g,1),this._add.push(p),p.state=c.PENDING_ADD,this._toProcess++,this},each:function(p,g){for(var m=[null],x=1;x<arguments.length;x++)m.push(arguments[x]);for(var y in this.list)m[0]=this.list[y],p.apply(g,m)},getAllTweens:function(){for(var p=this._active,g=[],m=0;m<p.length;m++)g.push(p[m]);return g},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(p,g){g===void 0&&(g=!1);var m=this._active,x,y=[],T,S;for(Array.isArray(p)||(p=[p]),T=0;T<m.length;T++)for(x=m[T],S=0;S<p.length;S++)x.hasTarget(p[S])&&y.push(x);if(g)for(m=this._pending,T=0;T<m.length;T++)for(x=m[T],S=0;S<p.length;S++)x.hasTarget(p[S])&&y.push(x);return y},isTweening:function(p){for(var g=this._active,m,x=0;x<g.length;x++)if(m=g[x],m.hasTarget(p)&&m.isPlaying())return!0;return!1},killAll:function(){for(var p=this.getAllTweens(),g=0;g<p.length;g++)p[g].stop();return this},killTweensOf:function(p){for(var g=this.getTweensOf(p),m=0;m<g.length;m++)g[m].stop();return this},pauseAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].pause();return this},resumeAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].resume();return this},setGlobalTimeScale:function(p){return this.timeScale=p,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var p=this.systems.events;p.off(u.PRE_UPDATE,this.preUpdate,this),p.off(u.UPDATE,this.update,this),p.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});h.register("TweenManager",v,"tweens"),e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Array:i(208),Base64:i(1482),Objects:i(1484),String:i(1488),NOOP:i(1)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ArrayBufferToBase64:i(1483),Base64ToArrayBuffer:i(433)}},function(e,r){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(a,n){for(var h=new Uint8Array(a),u=h.length,l=n?"data:"+n+";base64,":"",f=0;f<u;f+=3)l+=i[h[f]>>2],l+=i[(h[f]&3)<<4|h[f+1]>>4],l+=i[(h[f+1]&15)<<2|h[f+2]>>6],l+=i[h[f+2]&63];return u%3===2?l=l.substring(0,l.length-1)+"=":u%3===1&&(l=l.substring(0,l.length-2)+"=="),l};e.exports=s},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clone:i(77),DeepCopy:i(175),Extend:i(17),GetAdvancedValue:i(13),GetFastValue:i(2),GetMinMaxValue:i(1485),GetValue:i(6),HasAll:i(1486),HasAny:i(455),HasValue:i(126),IsPlainObject:i(7),Merge:i(127),MergeRight:i(1487),Pick:i(571),SetValue:i(478)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),a=i(18),n=function(h,u,l,f,c){c===void 0&&(c=l);var d=s(h,u,c);return a(d,l,f)};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){for(var n=0;n<a.length;n++)if(!s.hasOwnProperty(a[n]))return!1;return!0};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(77),a=function(n,h){var u=s(n);for(var l in h)u.hasOwnProperty(l)&&(u[l]=h[l]);return u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Format:i(1489),Pad:i(186),RemoveAt:i(1490),Reverse:i(1491),UppercaseFirst:i(205),UUID:i(222)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return s.replace(/%([0-9]+)/g,function(n,h){return a[Number(h)-1]})};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,a){return a===0?s.slice(1):s.slice(0,a-1)+s.slice(a)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.split("").reverse().join("")};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SoundManagerCreator:i(426),Events:i(70),BaseSound:i(146),BaseSoundManager:i(145),WebAudioSound:i(434),WebAudioSoundManager:i(432),HTML5AudioSound:i(429),HTML5AudioSoundManager:i(427),NoAudioSound:i(431),NoAudioSoundManager:i(430)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Arcade:i(1366),Matter:i(1494)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BodyBounds:i(1392),Components:i(249),Events:i(272),Factory:i(1394),MatterGameObject:i(1395),Image:i(1396),Matter:i(594),MatterPhysics:i(1524),PolyDecomp:i(1393),Sprite:i(1397),TileBody:i(593),PhysicsEditorParser:i(589),PhysicsJSONParser:i(590),PointerConstraint:i(1398),World:i(1402)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setBounce:function(s){return this.body.restitution=s,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setCollisionCategory:function(s){return this.body.collisionFilter.category=s,this},setCollisionGroup:function(s){return this.body.collisionFilter.group=s,this},setCollidesWith:function(s){var a=0;if(!Array.isArray(s))a=s;else for(var n=0;n<s.length;n++)a|=s[n];return this.body.collisionFilter.mask=a,this},setOnCollide:function(s){return this.body.onCollideCallback=s,this},setOnCollideEnd:function(s){return this.body.onCollideEndCallback=s,this},setOnCollideActive:function(s){return this.body.onCollideActiveCallback=s,this},setOnCollideWith:function(s,a){Array.isArray(s)||(s=[s]);for(var n=0;n<s.length;n++){var h=s[n].hasOwnProperty("body")?s[n].body:s[n];this.body.setOnCollideWith(h,a)}return this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(41),a={applyForce:function(n){return this._tempVec2.set(this.body.position.x,this.body.position.y),s.applyForce(this.body,this._tempVec2,n),this},applyForceFrom:function(n,h){return s.applyForce(this.body,n,h),this},thrust:function(n){var h=this.body.angle;return this._tempVec2.set(n*Math.cos(h),n*Math.sin(h)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(n){var h=this.body.angle-Math.PI/2;return this._tempVec2.set(n*Math.cos(h),n*Math.sin(h)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(n){var h=this.body.angle+Math.PI/2;return this._tempVec2.set(n*Math.cos(h),n*Math.sin(h)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(n){var h=this.body.angle-Math.PI;return this._tempVec2.set(n*Math.cos(h),n*Math.sin(h)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setFriction:function(s,a,n){return this.body.friction=s,a!==void 0&&(this.body.frictionAir=a),n!==void 0&&(this.body.frictionStatic=n),this},setFrictionAir:function(s){return this.body.frictionAir=s,this},setFrictionStatic:function(s){return this.body.frictionStatic=s,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setIgnoreGravity:function(s){return this.body.ignoreGravity=s,this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(41),a=i(3),n={setMass:function(h){return s.setMass(this.body,h),this},setDensity:function(h){return s.setDensity(this.body,h),this},centerOfMass:{get:function(){return new a(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setSensor:function(s){return this.body.isSensor=s,this},isSensor:function(){return this.body.isSensor}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),a=i(41),n=i(124),h=i(2),u=i(589),l=i(590),f=i(64),c={setRectangle:function(d,v,p){return this.setBody({type:"rectangle",width:d,height:v},p)},setCircle:function(d,v){return this.setBody({type:"circle",radius:d},v)},setPolygon:function(d,v,p){return this.setBody({type:"polygon",sides:v,radius:d},p)},setTrapezoid:function(d,v,p,g){return this.setBody({type:"trapezoid",width:d,height:v,slope:p},g)},setExistingBody:function(d,v){v===void 0&&(v=!0),this.body&&this.world.remove(this.body,!0),this.body=d;for(var p=0;p<d.parts.length;p++)d.parts[p].gameObject=this;var g=this;if(d.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},v&&(this.world.has(d)&&this.world.remove(d,!0),this.world.add(d)),this._originComponent){var m=d.render.sprite.xOffset,x=d.render.sprite.yOffset,y=d.centerOfMass.x,T=d.centerOfMass.y;if(n(y,.5)&&n(T,.5))this.setOrigin(m+.5,x+.5);else{var S=d.centerOffset.x,C=d.centerOffset.y;this.setOrigin(m+S/this.displayWidth,x+C/this.displayHeight)}}return this},setBody:function(d,v){if(!d)return this;var p;typeof d=="string"&&(d={type:d});var g=h(d,"type","rectangle"),m=h(d,"x",this._tempVec2.x),x=h(d,"y",this._tempVec2.y),y=h(d,"width",this.width),T=h(d,"height",this.height);switch(g){case"rectangle":p=s.rectangle(m,x,y,T,v);break;case"circle":var S=h(d,"radius",Math.max(y,T)/2),C=h(d,"maxSides",25);p=s.circle(m,x,S,v,C);break;case"trapezoid":var E=h(d,"slope",.5);p=s.trapezoid(m,x,y,T,E,v);break;case"polygon":var P=h(d,"sides",5),M=h(d,"radius",Math.max(y,T)/2);p=s.polygon(m,x,P,M,v);break;case"fromVertices":case"fromVerts":var R=h(d,"verts",null);if(R)if(typeof R=="string"&&(R=f.fromPath(R)),this.body&&!this.body.hasOwnProperty("temp"))a.setVertices(this.body,R),p=this.body;else{var A=h(d,"flagInternal",!1),O=h(d,"removeCollinear",.01),F=h(d,"minimumArea",10);p=s.fromVertices(m,x,R,v,A,O,F)}break;case"fromPhysicsEditor":p=u.parseBody(m,x,d,v);break;case"fromPhysicsTracer":p=l.parseBody(m,x,d,v);break}return p&&this.setExistingBody(p,d.addToWorld),this}};e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(272),a=i(165),n=i(166),h={setToSleep:function(){return a.set(this.body,!0),this},setAwake:function(){return a.set(this.body,!1),this},setSleepThreshold:function(u){return u===void 0&&(u=60),this.body.sleepThreshold=u,this},setSleepEvents:function(u,l){return this.setSleepStartEvent(u),this.setSleepEndEvent(l),this},setSleepStartEvent:function(u){if(u){var l=this.world;n.on(this.body,"sleepStart",function(f){l.emit(s.SLEEP_START,f,this)})}else n.off(this.body,"sleepStart");return this},setSleepEndEvent:function(u){if(u){var l=this.world;n.on(this.body,"sleepEnd",function(f){l.emit(s.SLEEP_END,f,this)})}else n.off(this.body,"sleepEnd");return this}};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afteradd"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterremove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeadd"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeremove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionactive"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionend"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepend"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepstart"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(41),a={setStatic:function(n){return s.setStatic(this.body,n),this},isStatic:function(){return this.body.isStatic}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(41),a=i(14),n=i(269),h=i(270),u=4,l={x:{get:function(){return this.body.position.x},set:function(f){this._tempVec2.set(f,this.y),s.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(f){this._tempVec2.set(this.x,f),s.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(f){var c=1/this._scaleX,d=1/this._scaleY;this._scaleX=f,this._scaleX===0?this.renderFlags&=~u:this.renderFlags|=u,s.scale(this.body,c,d),s.scale(this.body,f,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(f){var c=1/this._scaleX,d=1/this._scaleY;this._scaleY=f,this._scaleY===0?this.renderFlags&=~u:this.renderFlags|=u,s.scale(this.body,c,d),s.scale(this.body,this._scaleX,f)}},angle:{get:function(){return h(this.body.angle*a.RAD_TO_DEG)},set:function(f){this.rotation=h(f)*a.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(f){this._rotation=n(f),s.setAngle(this.body,this._rotation)}},setPosition:function(f,c){return f===void 0&&(f=0),c===void 0&&(c=f),this._tempVec2.set(f,c),s.setPosition(this.body,this._tempVec2),this},setRotation:function(f){return f===void 0&&(f=0),this._rotation=n(f),s.setAngle(this.body,f),this},setFixedRotation:function(){return s.setInertia(this.body,1/0),this},setAngle:function(f){return f===void 0&&(f=0),this.angle=f,s.setAngle(this.body,this.rotation),this},setScale:function(f,c,d){f===void 0&&(f=1),c===void 0&&(c=f);var v=1/this._scaleX,p=1/this._scaleY;return this._scaleX=f,this._scaleY=c,s.scale(this.body,v,p,d),s.scale(this.body,f,c,d),this}};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(41),a={setAngularVelocity:function(n){return s.setAngularVelocity(this.body,n),this},setVelocityX:function(n){return this._tempVec2.set(n,this.body.velocity.y),s.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(n){return this._tempVec2.set(this.body.velocity.x,n),s.setVelocity(this.body,this._tempVec2),this},setVelocity:function(n,h){return this._tempVec2.set(n,h),s.setVelocity(this.body,this._tempVec2),this}};e.exports=a},function(e,r,i){var s={};e.exports=s;var a=i(118),n=i(32);(function(){s.create=function(h){var u={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return n.extend(u,!1,h)},s.reset=function(h){h.extended&&(h.narrowDetections=0,h.narrowphaseTests=0,h.narrowReuse=0,h.narrowReuseCount=0,h.midphaseTests=0,h.broadphaseTests=0,h.narrowEff=0,h.midEff=0,h.broadEff=0,h.collisions=0,h.buckets=0,h.pairs=0,h.bodies=0)},s.update=function(h,u){if(h.extended){var l=u.world,f=a.allBodies(l);h.collisions=h.narrowDetections,h.pairs=u.pairs.list.length,h.bodies=f.length,h.midEff=(h.narrowDetections/(h.midphaseTests||1)).toFixed(2),h.narrowEff=(h.narrowDetections/(h.narrowphaseTests||1)).toFixed(2),h.broadEff=(1-h.broadphaseTests/(f.length||1)).toFixed(2),h.narrowReuse=(h.narrowReuseCount/(h.narrowphaseTests||1)).toFixed(2)}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(123),a=i(271),n=i(86),h=i(41),u=i(1392),l=i(84),f=i(0),c=i(118),d=i(591),v=i(128),p=i(273),g=i(50),m=i(1394),x=i(2),y=i(6),T=i(597),S=i(1525),C=i(1526),E=i(1399),P=i(1527),M=i(127),R=i(250),A=i(598),O=i(595),F=i(24),b=i(1400),w=i(599),N=i(274),V=i(20),W=i(592),U=i(83),D=i(64),L=i(1402),I=new f({initialize:function(G){this.scene=G,this.systems=G.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=h,this.composite=c,this.detector=p,this.grid=T,this.pair=R,this.pairs=A,this.query=b,this.resolver=w,this.sat=N,this.constraint=v,this.bodies=n,this.composites=d,this.axes=a,this.bounds=l,this.svg=W,this.vector=U,this.vertices=D,this.verts=D,this._tempVec2=U.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),w._restingThresh=y(this.config,"restingThresh",4),w._restingThreshTangent=y(this.config,"restingThreshTangent",6),w._positionDampen=y(this.config,"positionDampen",.9),w._positionWarming=y(this.config,"positionWarming",.8),w._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),G.sys.events.once(V.BOOT,this.boot,this),G.sys.events.on(V.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new m(this.world),this.bodyBounds=new u,this.systems.events.once(V.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new m(this.world));var B=this.systems.events;B.on(V.UPDATE,this.world.update,this.world),B.on(V.POST_UPDATE,this.world.postUpdate,this.world),B.once(V.SHUTDOWN,this.shutdown,this)},getConfig:function(){var B=this.systems.game.config.physics,G=this.systems.settings.physics,z=M(x(G,"matter",{}),x(B,"matter",{}));return z},enableAttractorPlugin:function(){return O.register(S),O.use(E,S),this},enableWrapPlugin:function(){return O.register(P),O.use(E,P),this},enableCollisionEventsPlugin:function(){return O.register(C),O.use(E,C),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(B,G){this.world.step(B,G)},containsPoint:function(B,G,z){B=this.getMatterBodies(B);var Y=U.create(G,z),X=b.point(B,Y);return X.length>0},intersectPoint:function(B,G,z){z=this.getMatterBodies(z);var Y=U.create(B,G),X=[],H=b.point(z,Y);return H.forEach(function($){X.indexOf($)===-1&&X.push($)}),X},intersectRect:function(B,G,z,Y,X,H){X===void 0&&(X=!1),H=this.getMatterBodies(H);var $={min:{x:B,y:G},max:{x:B+z,y:G+Y}},k=[],K=b.region(H,$,X);return K.forEach(function(Z){k.indexOf(Z)===-1&&k.push(Z)}),k},intersectRay:function(B,G,z,Y,X,H){X===void 0&&(X=1),H=this.getMatterBodies(H);for(var $=[],k=b.ray(H,U.create(B,G),U.create(z,Y),X),K=0;K<k.length;K++)$.push(k[K].body);return $},intersectBody:function(B,G){G=this.getMatterBodies(G);for(var z=[],Y=b.collides(B,G),X=0;X<Y.length;X++){var H=Y[X];H.bodyA===B?z.push(H.bodyB):z.push(H.bodyA)}return z},overlap:function(B,G,z,Y,X){z===void 0&&(z=null),Y===void 0&&(Y=null),X===void 0&&(X=z),Array.isArray(B)||(B=[B]),B=this.getMatterBodies(B),G=this.getMatterBodies(G);for(var H=!1,$=0;$<B.length;$++)for(var k=B[$],K=b.collides(k,G),Z=0;Z<K.length;Z++){var j=K[Z],J=j.bodyA.id===k.id?j.bodyB:j.bodyA;if(!Y||Y.call(X,k,J,j)){if(H=!0,z)z.call(X,k,J,j);else if(!Y)return!0}}return H},setCollisionCategory:function(B,G){return B=this.getMatterBodies(B),B.forEach(function(z){z.collisionFilter.category=G}),this},setCollisionGroup:function(B,G){return B=this.getMatterBodies(B),B.forEach(function(z){z.collisionFilter.group=G}),this},setCollidesWith:function(B,G){B=this.getMatterBodies(B);var z=0;if(!Array.isArray(G))z=G;else for(var Y=0;Y<G.length;Y++)z|=G[Y];return B.forEach(function(X){X.collisionFilter.mask=z}),this},getMatterBodies:function(B){if(!B)return this.world.getAllBodies();Array.isArray(B)||(B=[B]);for(var G=[],z=0;z<B.length;z++){var Y=B[z].hasOwnProperty("body")?B[z].body:B[z];G.push(Y)}return G},setVelocity:function(B,G,z){B=this.getMatterBodies(B);var Y=this._tempVec2;return Y.x=G,Y.y=z,B.forEach(function(X){h.setVelocity(X,Y)}),this},setVelocityX:function(B,G){B=this.getMatterBodies(B);var z=this._tempVec2;return z.x=G,B.forEach(function(Y){z.y=Y.velocity.y,h.setVelocity(Y,z)}),this},setVelocityY:function(B,G){B=this.getMatterBodies(B);var z=this._tempVec2;return z.y=G,B.forEach(function(Y){z.x=Y.velocity.x,h.setVelocity(Y,z)}),this},setAngularVelocity:function(B,G){return B=this.getMatterBodies(B),B.forEach(function(z){h.setAngularVelocity(z,G)}),this},applyForce:function(B,G){B=this.getMatterBodies(B);var z=this._tempVec2;return B.forEach(function(Y){z.x=Y.position.x,z.y=Y.position.y,h.applyForce(Y,z,G)}),this},applyForceFromPosition:function(B,G,z,Y){B=this.getMatterBodies(B);var X=this._tempVec2;return B.forEach(function(H){Y===void 0&&(Y=H.angle),X.x=z*Math.cos(Y),X.y=z*Math.sin(Y),h.applyForce(H,G,X)}),this},applyForceFromAngle:function(B,G,z){B=this.getMatterBodies(B);var Y=this._tempVec2;return B.forEach(function(X){z===void 0&&(z=X.angle),Y.x=G*Math.cos(z),Y.y=G*Math.sin(z),h.applyForce(X,{x:X.position.x,y:X.position.y},Y)}),this},getConstraintLength:function(B){var G=B.pointA.x,z=B.pointA.y,Y=B.pointB.x,X=B.pointB.y;return B.bodyA&&(G+=B.bodyA.position.x,z+=B.bodyA.position.y),B.bodyB&&(Y+=B.bodyB.position.x,X+=B.bodyB.position.y),g(G,z,Y,X)},alignBody:function(B,G,z,Y){B=B.hasOwnProperty("body")?B.body:B;var X;switch(Y){case s.TOP_LEFT:case s.LEFT_TOP:X=this.bodyBounds.getTopLeft(B,G,z);break;case s.TOP_CENTER:X=this.bodyBounds.getTopCenter(B,G,z);break;case s.TOP_RIGHT:case s.RIGHT_TOP:X=this.bodyBounds.getTopRight(B,G,z);break;case s.LEFT_CENTER:X=this.bodyBounds.getLeftCenter(B,G,z);break;case s.CENTER:X=this.bodyBounds.getCenter(B,G,z);break;case s.RIGHT_CENTER:X=this.bodyBounds.getRightCenter(B,G,z);break;case s.LEFT_BOTTOM:case s.BOTTOM_LEFT:X=this.bodyBounds.getBottomLeft(B,G,z);break;case s.BOTTOM_CENTER:X=this.bodyBounds.getBottomCenter(B,G,z);break;case s.BOTTOM_RIGHT:case s.RIGHT_BOTTOM:X=this.bodyBounds.getBottomRight(B,G,z);break}return X&&h.setPosition(B,X),this},shutdown:function(){var B=this.systems.events;this.world&&(B.off(V.UPDATE,this.world.update,this.world),B.off(V.POST_UPDATE,this.world.postUpdate,this.world)),B.off(V.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(V.START,this.start,this),this.scene=null,this.systems=null}});F.register("MatterPhysics",I,"matterPhysics"),e.exports=I},function(e,r,i){var s=i(594),a={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Body.create",function(){a.Body.init(this)}),n.before("Engine.update",function(h){a.Engine.update(h)})},Body:{init:function(n){n.plugin.attractors=n.plugin.attractors||[]}},Engine:{update:function(n){for(var h=s.Composite.allBodies(n.world),u=0;u<h.length;u++){var l=h[u],f=l.plugin.attractors;if(f&&f.length>0)for(var c=0;c<h.length;c++){var d=h[c];if(u!==c)for(var v=0;v<f.length;v++){var p=f[v],g=p;s.Common.isFunction(p)&&(g=p(l,d)),g&&s.Body.applyForce(d,d.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(n,h){var u=s.Vector.sub(h.position,n.position),l=s.Vector.magnitudeSquared(u)||1e-4,f=s.Vector.normalise(u),c=-a.Attractors.gravityConstant*(n.mass*h.mass/l),d=s.Vector.mult(f,c);s.Body.applyForce(n,n.position,s.Vector.neg(d)),s.Body.applyForce(h,h.position,d)}}};e.exports=a},function(e,r){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Engine.create",function(){s.Events.on(this,"collisionStart",function(a){a.pairs.map(function(n){var h=n.bodyA,u=n.bodyB;h.gameObject&&h.gameObject.emit("collide",h,u,n),u.gameObject&&u.gameObject.emit("collide",u,h,n),s.Events.trigger(h,"onCollide",{pair:n}),s.Events.trigger(u,"onCollide",{pair:n}),h.onCollideCallback&&h.onCollideCallback(n),u.onCollideCallback&&u.onCollideCallback(n),h.onCollideWith[u.id]&&h.onCollideWith[u.id](u,n),u.onCollideWith[h.id]&&u.onCollideWith[h.id](h,n)})}),s.Events.on(this,"collisionActive",function(a){a.pairs.map(function(n){var h=n.bodyA,u=n.bodyB;h.gameObject&&h.gameObject.emit("collideActive",h,u,n),u.gameObject&&u.gameObject.emit("collideActive",u,h,n),s.Events.trigger(h,"onCollideActive",{pair:n}),s.Events.trigger(u,"onCollideActive",{pair:n}),h.onCollideActiveCallback&&h.onCollideActiveCallback(n),u.onCollideActiveCallback&&u.onCollideActiveCallback(n)})}),s.Events.on(this,"collisionEnd",function(a){a.pairs.map(function(n){var h=n.bodyA,u=n.bodyB;h.gameObject&&h.gameObject.emit("collideEnd",h,u,n),u.gameObject&&u.gameObject.emit("collideEnd",u,h,n),s.Events.trigger(h,"onCollideEnd",{pair:n}),s.Events.trigger(u,"onCollideEnd",{pair:n}),h.onCollideEndCallback&&h.onCollideEndCallback(n),u.onCollideEndCallback&&u.onCollideEndCallback(n)})})})}};e.exports=i},function(e,r,i){var s=i(594),a={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Engine.update",function(){a.Engine.update(this)})},Engine:{update:function(n){for(var h=n.world,u=s.Composite.allBodies(h),l=s.Composite.allComposites(h),f=0;f<u.length;f+=1){var c=u[f];c.plugin.wrap&&a.Body.wrap(c,c.plugin.wrap)}for(f=0;f<l.length;f+=1){var d=l[f];d.plugin.wrap&&a.Composite.wrap(d,d.plugin.wrap)}}},Bounds:{wrap:function(n,h){var u=null,l=null;if(typeof h.min.x!="undefined"&&typeof h.max.x!="undefined"&&(n.min.x>h.max.x?u=h.min.x-n.max.x:n.max.x<h.min.x&&(u=h.max.x-n.min.x)),typeof h.min.y!="undefined"&&typeof h.max.y!="undefined"&&(n.min.y>h.max.y?l=h.min.y-n.max.y:n.max.y<h.min.y&&(l=h.max.y-n.min.y)),u!==null||l!==null)return{x:u||0,y:l||0}}},Body:{wrap:function(n,h){var u=a.Bounds.wrap(n.bounds,h);return u&&s.Body.translate(n,u),u}},Composite:{bounds:function(n){for(var h=s.Composite.allBodies(n),u=[],l=0;l<h.length;l+=1){var f=h[l];u.push(f.bounds.min,f.bounds.max)}return s.Bounds.create(u)},wrap:function(n,h){var u=a.Bounds.wrap(a.Composite.bounds(n),h);return u&&s.Composite.translate(n,u),u}}};e.exports=a},function(e,r,i){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var a=i(33),n=i(17),h={Actions:i(275),Animations:i(723),BlendModes:i(35),Cache:i(735),Cameras:i(738),Core:i(806),Class:i(0),Create:i(888),Curves:i(894),Data:i(896),Display:i(898),DOM:i(917),Events:i(918),Game:i(920),GameObjects:i(1011),Geom:i(483),Input:i(1308),Loader:i(1338),Math:i(193),Physics:i(1493),Plugins:i(1403),Renderer:i(1405),Scale:i(1412),ScaleModes:i(168),Scene:i(418),Scenes:i(1413),Structs:i(1415),Textures:i(1416),Tilemaps:i(1418),Time:i(1461),Tweens:i(1463),Utils:i(1481)};h.Sound=i(1492),h=n(!1,h,a),e.exports=h,s.Phaser=h}).call(this,i(600))}])})})(Zv);var yn=U0(Zv.exports);class it{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,e){it.prototype[t]=e}}var Lh=function(o){var t,e,r;if(typeof o!="object"||o===null)return o;t=Array.isArray(o)?[]:{};for(r in o)e=o[r],t[r]=Lh(e);return t},X0=function(o,t,e,r){Array.isArray(t)&&(r=e,e=t,t=void 0),t===void 0&&(t="__BASE"),e=Lh(e),r=Lh(r),this.textureKey=o,this.baseFrameName=t,this.columns.data=e,this.columns.count=e?e.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=r,this.rows.count=r?r.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var i=this.scene.textures.get(o);if(!i)return this.clear(),this;if(!e||!r)return this.clear(),this;for(var s=i.frames[t],a=s.width,n=0,h=0,u=e.length;h<u;h++)e[h]===void 0?n++:typeof e[h]=="number"?a-=e[h]:a-=e[h].width;for(var l=a/n,f=s.height,c=0,h=0,u=r.length;h<u;h++)r[h]===void 0?c++:typeof r[h]=="number"?f-=r[h]:f-=r[h].width;for(var d=f/c,v,p,g,m,x,y=0,T=0,S=0,C=r.length;S<C;S++){r[S]===void 0&&(r[S]=d),typeof r[S]=="number"&&(r[S]={height:r[S],stretch:S%2}),v=r[S],g=v.height,this.rows.stretch+=v.stretch|0,this.rows.minHeight+=v.stretch>0?0:g,y=0;for(var h=0,E=e.length;h<E;h++){if(e[h]===void 0&&(e[h]=l),typeof e[h]=="number"&&(e[h]={width:e[h],stretch:h%2}),p=e[h],m=p.width,S===0&&(this.columns.stretch+=p.stretch|0,this.columns.minWidth+=p.stretch>0?0:m),m>=1&&g>=1){x=this.getFrameNameCallback(h,S,t);var P=typeof x;(P==="string"||P==="number")&&i.add(x,0,y+s.cutX,T+s.cutY,m,g)}y+=m}T+=g}return this.updateTexture(),this},Xu=function(o,t,e){return e===void 0&&(e="image"),o[t]||(o[t]=o.scene.make[e]({add:!1,origin:{x:0,y:0}}),o.once("destroy",function(){o[t]&&(o[t].destroy(),o[t]=void 0)})),o[t]},H0=function(){if(this.clear(),this.textureKey===void 0)return this;var o=this.scene.textures.get(this.textureKey);if(!o)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,e=this.rows.minHeight*this.maxFixedPartScaleY,r=this.width-t,i=this.height-e,s=r>=0?this.maxFixedPartScaleX:this.width/t,a=i>=0?this.maxFixedPartScaleY:this.height/e;if(this.preserveRatio){var n=Math.min(s,a);if(s>n){var h=(s-n)*t;r>=0?r+=h:r=h,s=n}if(a>n){var u=(a-n)*e;i>=0?i+=u:i=u,a=n}}this.columns.scale=s,this.rows.scale=a;var l;r>0?l=this.columns.stretch>0?r/this.columns.stretch:0:l=0;var f;i>0?f=this.rows.stretch>0?i/this.rows.stretch:0:f=0;for(var c,d,v,p,g,m=0,x=0,y,T,S=0,C=this.rows.count;S<C;S++){v=this.rows.data[S],g=v.stretch===0?v.height*a:f*v.stretch,m=0;for(var E=0,P=this.columns.count;E<P;E++)d=this.columns.data[E],p=d.stretch===0?d.width*s:l*d.stretch,c=this.getFrameNameCallback(E,S,this.baseFrameName),o.has(c)&&p>0&&g>0&&(v.stretch===0&&d.stretch===0||this.getStretchMode(E,S)===0?T=0:T=1,T===0?(y=Xu(this,"_image","image"),y.setTexture(this.textureKey,c).setDisplaySize(p,g)):(y=Xu(this,"_tileSprite","tileSprite"),y.setTexture(this.textureKey,c).setSize(p,g))),y&&(this.draw(y,m,x),y=void 0),m+=p;x+=g}};const $0=Phaser.Utils.Objects.IsPlainObject,Hu=Phaser.Utils.Objects.GetValue;var k0=function(o){return $0(o)?(this.stretchMode.edge=fo(Hu(o,"edge",0)),this.stretchMode.internal=fo(Hu(o,"internal",0))):(o=fo(o),this.stretchMode.edge=o,this.stretchMode.internal=o),this},fo=function(o){return typeof o=="string"&&(o=K0[o]),o};const K0={scale:0,repeat:1};var Z0=function(o,t){return o===0||o===this.columns.count-1||t===0||t===this.rows.count-1},J0=function(o,t){return Z0.call(this,o,t)?this.stretchMode.edge:this.stretchMode.internal},Q0=function(o){return o==null&&(o=!0),this.preserveRatio=o,this},j0=function(o,t){return t===void 0&&(t=o),this.maxFixedPartScaleX=o,this.maxFixedPartScaleY=t,this},q0={setTexture:X0,updateTexture:H0,setStretchMode:k0,getStretchMode:J0,setPreserveRatio:Q0,setMaxFixedPartScale:j0};const _0="__BASE";var tx=function(o,t,e){return e===_0?`${o},${t}`:`${e}_${o},${t}`};const ex=Phaser.GameObjects.RenderTexture,ks=Phaser.Utils.Objects.IsPlainObject,mt=Phaser.Utils.Objects.GetValue;class ol extends ex{constructor(t,e,r,i,s,a,n,h,u,l){ks(e)?(l=e,e=mt(l,"x",0),r=mt(l,"y",0),i=mt(l,"width",1),s=mt(l,"height",1),a=mt(l,"key",void 0),n=mt(l,"baseFrame",void 0),h=mt(l,"columns",void 0),u=mt(l,"rows",void 0)):ks(i)?(l=i,i=mt(l,"width",1),s=mt(l,"height",1),a=mt(l,"key",void 0),n=mt(l,"baseFrame",void 0),h=mt(l,"columns",void 0),u=mt(l,"rows",void 0)):ks(a)?(l=a,a=mt(l,"key",void 0),n=mt(l,"baseFrame",void 0),h=mt(l,"columns",void 0),u=mt(l,"rows",void 0)):ks(n)?(l=n,n=mt(l,"baseFrame",void 0),h=mt(l,"columns",void 0),u=mt(l,"rows",void 0)):Array.isArray(n)?(l=u,u=h,h=n,n=mt(l,"baseFrame",void 0)):ks(h)&&(l=h,h=mt(l,"columns",void 0),u=mt(l,"rows",void 0)),super(t,e,r,i,s),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setOrigin(.5,.5),this.setGetFrameNameCallback(mt(l,"getFrameNameCallback",void 0)),this.setStretchMode(mt(l,"stretchMode",0)),this.setPreserveRatio(mt(l,"preserveRatio",!0));var f=mt(l,"maxFixedPartScale",1),c=mt(l,"maxFixedPartScaleX",f),d=mt(l,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(c,d),this.setTexture(a,n,h,u)}setGetFrameNameCallback(t){return t===void 0&&(t=tx),this.getFrameNameCallback=t,this}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(t,e){return this.width===t&&this.height===e?this:(super.resize(t,e),this.updateTexture(),this)}}Object.assign(ol.prototype,q0);var Jv=function(o){return o==null||o===""||o.length===0},ix=function(o,t,e){var r=o;if(!Jv(t)){typeof t=="string"&&(t=t.split("."));for(var i,s=0,a=t.length;s<a;s++){if(i=t[s],r[i]==null||typeof r[i]!="object"){var n;s===a-1?e===void 0?n={}:n=e:n={},r[i]=n}r=r[i]}}return r},st=function(o,t,e){if(typeof o=="object"){if(Jv(t)){if(e==null)return;typeof e=="object"&&(o=e)}else{typeof t=="string"&&(t=t.split("."));var r=t.pop(),i=ix(o,t);i[r]=e}return o}};it.register("ninePatch",function(o,t,e,r,i,s,a,n){var h=new ol(this.scene,o,t,e,r,i,s,a,n);return this.scene.add.existing(h),h});st(window,"RexPlugins.UI.NinePatch",ol);const Li=Phaser.Utils.Objects.GetValue;class Qv{constructor(t,e,r,i,s){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,r,i,s)}setTo(t,e,r,i,s){return this.setPosition(t,e),this.setRadius(s),this.setSize(r,i),this}setPosition(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,e){return this.width=t,this.height=e,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var e,r;typeof t=="number"?(e=t,r=t):(e=Li(t,"x",0),r=Li(t,"y",0));var i=this.cornerRadius;i.tl=sr(Li(t,"tl",void 0),e,r),i.tr=sr(Li(t,"tr",void 0),e,r),i.bl=sr(Li(t,"bl",void 0),e,r),i.br=sr(Li(t,"br",void 0),e,r)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){nr(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){nr(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){nr(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){nr(this.cornerRadius.br,t)}}var sr=function(o,t,e){return o===void 0?{x:t,y:e}:typeof o=="number"?{x:o,y:o}:o},nr=function(o,t){typeof t=="number"?(o.x=t,o.y=t):(o.x=Li(t,"x",0),o.y=Li(t,"y",0))},bs=function(o,t,e){var r=e.length;if(r>=2){var i=e[r-2],s=e[r-1];if(o===i&&t===s)return e}return e.push(o,t),e};const $u=Phaser.Math.DegToRad;var Ds=function(o,t,e,r,i,s,a,n,h){a&&s>i?s-=360:!a&&s<i&&(s+=360);var u=s-i,l=$u(u)/n;i=$u(i);for(var f=0;f<=n;f++){var c=i+l*f,d=o+e*Math.cos(c),v=t+r*Math.sin(c);bs(d,v,h)}return h},sx=Phaser.Renderer.WebGL.Utils,jv=function(o,t,e,r,i,s){for(var a=sx.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*r),n=e.pathData,h=e.pathIndexes,u=0;u<h.length;u+=3){var l=h[u]*2,f=h[u+1]*2,c=h[u+2]*2,d=n[l+0]-i,v=n[l+1]-s,p=n[f+0]-i,g=n[f+1]-s,m=n[c+0]-i,x=n[c+1]-s,y=t.getX(d,v),T=t.getY(d,v),S=t.getX(p,g),C=t.getY(p,g),E=t.getX(m,x),P=t.getY(m,x);o.batchTri(e,y,T,S,C,E,P,0,0,1,1,a,a,a,2)}},nx=Phaser.Renderer.WebGL.Utils,Ca=function(o,t,e,r,i){var s=o.strokeTint,a=nx.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*e);s.TL=a,s.TR=a,s.BL=a,s.BR=a;var n=t.pathData,h=n.length-1,u=t.lineWidth,l=u/2,f=n[0]-r,c=n[1]-i;t.closePath||(h-=2);for(var d=2;d<h;d+=2){var v=n[d]-r,p=n[d+1]-i;o.batchLine(f,c,v,p,l,l,u,d-2,t.closePath?d===h-1:!1),f=v,c=p}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const hl=Phaser.GameObjects.Components.TransformMatrix;var qv=new hl,_v=new hl,tp=new hl,rx={camera:qv,sprite:_v,calc:tp},ep=function(o,t,e){var r=qv,i=_v,s=tp;return i.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),r.copyFrom(t.matrix),e?(r.multiplyWithOffset(e,-t.scrollX*o.scrollFactorX,-t.scrollY*o.scrollFactorY),i.e=o.x,i.f=o.y):(i.e-=t.scrollX*o.scrollFactorX,i.f-=t.scrollY*o.scrollFactorY),r.multiply(i,s),rx},ax=function(o,t,e,r){t.dirty&&(t.updateData(),t.dirty=!1),e.addToRenderList(t);var i=o.pipelines.set(t.pipeline),s=ep(t,e,r),a=i.calcMatrix.copyFrom(s.calc),n=t._displayOriginX,h=t._displayOriginY,u=e.alpha*t.alpha;o.pipelines.preBatch(t),t.isFilled&&jv(i,a,t,u,n,h),t.isStroked&&Ca(i,t,u,n,h),o.pipelines.postBatch(t)},Gn=function(o,t,e,r){var i=e||t.fillColor,s=r||t.fillAlpha,a=(i&16711680)>>>16,n=(i&65280)>>>8,h=i&255;o.fillStyle="rgba("+a+","+n+","+h+","+s+")"},Nn=function(o,t,e,r){var i=e||t.strokeColor,s=r||t.strokeAlpha,a=(i&16711680)>>>16,n=(i&65280)>>>8,h=i&255;o.strokeStyle="rgba("+a+","+n+","+h+","+s+")",o.lineWidth=t.lineWidth};const ox=Phaser.Renderer.Canvas.SetTransform;var hx=function(o,t,e,r){t.dirty&&(t.updateData(),t.dirty=!1),e.addToRenderList(t);var i=o.currentContext;if(ox(o,i,t,e,r)){var s=t._displayOriginX,a=t._displayOriginY,n=t.pathData,h=n.length-1,u=n[0]-s,l=n[1]-a;i.beginPath(),i.moveTo(u,l),t.closePath||(h-=2);for(var f=2;f<h;f+=2){var c=n[f]-s,d=n[f+1]-a;i.lineTo(c,d)}i.closePath(),t.isFilled&&(Gn(i,t),i.fill()),t.isStroked&&(Nn(i,t),i.stroke()),i.restore()}},lx={renderWebGL:ax,renderCanvas:hx};const ux=Phaser.GameObjects.Shape,ku=Phaser.Utils.Objects.GetValue,fx=Phaser.Geom.Polygon.Earcut;class ll extends ux{constructor(t,e,r,i,s,a,n,h){e===void 0&&(e=0),r===void 0&&(r=0);var u=new Qv;super(t,"rexRoundRectangleShape",u);var l=ku(a,"radius",a);u.setTo(0,0,i,s,l);var f=ku(a,"iteration",void 0);this.setIteration(f),this.setPosition(e,r),n!==void 0&&this.setFillStyle(n,h),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,e=this.pathData;e.length=0;var r=t.cornerRadius,i,s=this.iteration+1;if(i=r.br,rr(i)){var a=t.width-i.x,n=t.height-i.y;Ds(a,n,i.x,i.y,0,90,!1,s,e)}else bs(t.width,t.height,e);if(i=r.bl,rr(i)){var a=i.x,n=t.height-i.y;Ds(a,n,i.x,i.y,90,180,!1,s,e)}else bs(0,t.height,e);if(i=r.tl,rr(i)){var a=i.x,n=i.y;Ds(a,n,i.x,i.y,180,270,!1,s,e)}else bs(0,0,e);if(i=r.tr,rr(i)){var a=t.width-i.x,n=i.y;Ds(a,n,i.x,i.y,270,360,!1,s,e)}else bs(t.width,0,e);return e.push(e[0],e[1]),this.pathIndexes=fx(e),this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,e){if(e===void 0&&(e=t),this.geom.width===t&&this.geom.height===e)return this;this.geom.setSize(t,e),this.updateDisplayOrigin(),this.dirty=!0;var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiuBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}}var rr=function(o){return o.x!==0&&o.y!==0};Object.assign(ll.prototype,lx);it.register("roundRectangle",function(o,t,e,r,i,s,a){var n=new ll(this.scene,o,t,e,r,i,s,a);return this.scene.add.existing(n),n});st(window,"RexPlugins.UI.RoundRectangle",ll);const dx=Phaser.Renderer.WebGL.Utils;var cx=function(o,t,e,r){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){e.addToRenderList(t);var i=t.frame,s=i.width,a=i.height,n=dx.getTintAppendFloatAlpha,h=o.pipelines.set(t.pipeline,t),u=h.setTexture2D(i.glTexture,t);o.pipelines.preBatch(t),h.batchTexture(t,i.glTexture,s,a,t.x,t.y,s/t.resolution,a/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,s,a,n(t.tintTopLeft,e.alpha*t._alphaTL),n(t.tintTopRight,e.alpha*t._alphaTR),n(t.tintBottomLeft,e.alpha*t._alphaBL),n(t.tintBottomRight,e.alpha*t._alphaBR),t.tintFill,0,0,e,r,!1,u),o.pipelines.postBatch(t)}},vx=function(o,t,e,r){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(e.addToRenderList(t),o.batchSprite(t,t.frame,e,r))},px={renderWebGL:cx,renderCanvas:vx};const gx=Phaser.Display.Color;var mx={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(o){return this.context.fillStyle=o,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(o,t){var e=this,r=new Image;return r.onload=function(){e.width!==r.width||e.height!==r.height?e.resize(r.width,r.height):e.clear(),e.context.drawImage(r,0,0),e.updateTexture(),t&&t(),r.onload=null,r.src="",r.remove()},r.src=o,this},loadFromURLPromise(o){var t=this;return new Promise(function(e,r){t.loadFromURL(o,e)})},getDataURL(o,t){return this.canvas.toDataURL(o,t)},getPixel(o,t,e){e===void 0&&(e=new gx);var r=this.context.getImageData(o,t,1,1);return e.setTo(r.data[0],r.data[1],r.data[2],r.data[3]),e},setPixel(o,t,e,r,i,s){if(typeof e!="number"){var a=e;e=a.red,r=a.green,i=a.blue,s=a.alpha}s===void 0&&(s=e!==0||r!==0||i!==0?255:0);var n=this.context.createImageData(1,1);return n.data[0]=e,n.data[1]=r,n.data[2]=i,n.data[3]=s,this.context.putImageData(n,o,t),this.dirty=!0,this}},ip=function(o,t,e,r,i,s,a){var n=o.textures,h=o.renderer;r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=t.width),a===void 0&&(a=t.height);var u;n.exists(e)?u=n.get(e):u=n.createCanvas(e,s,a);var l=u.getSourceImage();l.width!==s&&(l.width=s),l.height!==a&&(l.height=a);var f=l.getContext("2d");f.clearRect(0,0,s,a),f.drawImage(t,r,i,s,a),h.gl&&u&&h.canvasToTexture(l,u.source[0].glTexture,!0,0)},xx={updateTexture(o,t){o&&(t?o.call(t,this.canvas,this.context):o(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},generateTexture(o,t,e,r,i){var s=this.canvas;return r===void 0?r=s.width:r*=this.resolution,i===void 0?i=s.height:i*=this.resolution,ip(this.scene,s,o,t,e,r,i),this},loadTexture(o,t){var e=this.scene.textures.getFrame(o,t);return e?(this.width!==e.cutWidth||this.height!==e.cutHeight?this.resize(e.cutWidth,e.cutHeight):this.clear(),this.context.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this):this}};const Ku=Phaser.Display.Canvas.CanvasPool,yx=Phaser.GameObjects.GameObject;class Gi extends yx{constructor(t,e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=1),s===void 0&&(s=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=i,this._height=s,i=Math.max(Math.ceil(i*this.resolution),1),s=Math.max(Math.ceil(s*this.resolution),1),this.canvas=Ku.create(this,i,s),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(e,r),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),Ku.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setSize(t,e){return this._width===t&&this._height===e?this:(this._width=t,this._height=e,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),e=Math.max(Math.ceil(e*this.resolution),1),this.canvas.width=t,this.canvas.height=e,this.frame.setSize(t,e),this.dirty=!0,this)}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,e){return this.displayWidth=t,this.displayHeight=e,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,e){return this.setSize(t,e),this}}const ue=Phaser.GameObjects.Components;Phaser.Class.mixin(Gi,[ue.Alpha,ue.BlendMode,ue.Crop,ue.Depth,ue.Flip,ue.GetBounds,ue.Mask,ue.Origin,ue.Pipeline,ue.ScrollFactor,ue.Tint,ue.Transform,ue.Visible,px,mx,xx]);const Tx=Phaser.Utils.String.Pad;var ut=function(o,t,e){if(o==null)return o;switch(typeof o){case"string":return o;case"number":return`#${Tx(Math.floor(o).toString(16),6,"0",1)}`;case"function":return o(t,e);case"object":return o.hasOwnProperty("r")?o.hasOwnProperty("a")?`rgba(${o.r},${o.g},${o.b},${o.a})`:`rgb(${o.r},${o.g},${o.b})`:o.hasOwnProperty("h")?o.hasOwnProperty("a")?`hsla(${o.h},${o.s},${o.l},${o.a})`:`hsl(${o.h},${o.s},${o.l})`:o;default:return o}};const Ea=Phaser.Math.DegToRad,Zu=Ea(0),Ju=Ea(90),Qu=Ea(180),ju=Ea(270);var sp=function(o,t,e,r,i,s,a){var n=new Qv(t,e,r,i,s),h=n.minWidth,u=n.minHeight,l=r>=h?1:r/h,f=i>=u?1:i/u,c=n.cornerRadius,d,v,p,g,m;o.save(),o.beginPath(),o.translate(t,e),d=c.br,v=d.x*l,p=d.y*f,g=r-v,m=i-p,o.moveTo(r,m),v>0&&p>0?ar(o,g,m,v,p,Zu,Ju,a):(o.lineTo(r,i),o.lineTo(g,i)),d=c.bl,v=d.x*l,p=d.y*f,g=v,m=i-p,o.lineTo(v,i),v>0&&p>0?ar(o,g,m,v,p,Ju,Qu,a):(o.lineTo(0,i),o.lineTo(0,m)),d=c.tl,v=d.x*l,p=d.y*f,g=v,m=p,o.lineTo(0,m),v>0&&p>0?ar(o,g,m,v,p,Qu,ju,a):(o.lineTo(0,0),o.lineTo(g,0)),d=c.tr,v=d.x*l,p=d.y*f,g=r-v,m=p,o.lineTo(g,0),v>0&&p>0?ar(o,g,m,v,p,ju,Zu,a):(o.lineTo(r,0),o.lineTo(r,m)),o.closePath(),o.restore()},ar=function(o,t,e,r,i,s,a,n){if(n==null)o.ellipse(t,e,r,i,0,s,a);else{n+=1;for(var h,u,l,f=(a-s)/n,c=0;c<=n;c++)l=s+f*c,h=t+r*Math.cos(l),u=e+i*Math.sin(l),o.lineTo(h,u)}},Sx=function(o,t,e,r,i,s,a,n,h,u,l,f,c){if(sp(t,e,r,i,s,a,c),n!=null){if(l!=null){var d;f?d=t.createLinearGradient(0,0,i,0):d=t.createLinearGradient(0,0,0,s),d.addColorStop(0,n),d.addColorStop(1,l),n=d}t.fillStyle=n,t.fill()}h!=null&&u>0&&(t.strokeStyle=h,t.lineWidth=u,t.stroke())},ul=function(o,t,e,r,i,s,a,n){if(!(t==null&&e==null)){var h=o.canvas.width,u=o.canvas.height;e==null&&(r=0);var l=r/2;h-=r,u-=r,Sx(o.canvas,o.context,l,l,h,u,i,t,e,r,s,a,n)}},Cx=function(){ul(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const qu=Phaser.Utils.Objects.GetValue;class np extends Gi{constructor(t,e,r,i,s,a,n,h,u,l,f){super(t,e,r,i,s),this.type="rexRoundRectangleCanvas";var c=qu(a,"radius",a),d=qu(a,"iteration",void 0);this.setRadius(c),this.setIteration(d),this.setFillStyle(n,l,f),this.setStrokeStyle(h,u)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=ut(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=ut(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._fillStyle}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,e,r){return r===void 0&&(r=!0),this.fillStyle=t,this.fillColor2=e,this.isHorizontalGradient=r,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=ut(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,e){return this.strokeStyle=t,this.lineWidth=e,this}updateTexture(){return this.clear(),Cx.call(this),super.updateTexture(),this}}it.register("roundRectangleCanvas",function(o,t,e,r,i,s,a,n,h,u){var l=new np(this.scene,o,t,e,r,i,s,a,n,h,u);return this.scene.add.existing(l),l});st(window,"RexPlugins.UI.RoundRectangleCanvas",np);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Ex=Phaser.Renderer.WebGL.Utils,Px=function(o,t,e,r){if(!(t.width===0||t.height===0)){e.addToRenderList(t);var i=t.frame,s=i.width,a=i.height,n=Ex.getTintAppendFloatAlpha,h=o.pipelines.set(t.pipeline,t),u=h.setTexture2D(i.glTexture,t);o.pipelines.preBatch(t),h.batchTexture(t,i.glTexture,s,a,t.x,t.y,s/t.style.resolution,a/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,s,a,n(t.tintTopLeft,e.alpha*t._alphaTL),n(t.tintTopRight,e.alpha*t._alphaTR),n(t.tintBottomLeft,e.alpha*t._alphaBL),n(t.tintBottomRight,e.alpha*t._alphaBR),t.tintFill,0,0,e,r,!1,u),o.pipelines.postBatch(t)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Mx=function(o,t,e,r){t.width===0||t.height===0||(e.addToRenderList(t),o.batchSprite(t,t.frame,e,r))},Ax={renderWebGL:Px,renderCanvas:Mx};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const or=Phaser.Display.Canvas.CanvasPool;var _u=function(o){var t=or.create(this),e=t.getContext("2d");o.syncFont(t,e);var r=e.measureText(o.testString);if("actualBoundingBoxAscent"in r){var i=r.actualBoundingBoxAscent,s=r.actualBoundingBoxDescent,u={ascent:i,descent:s,fontSize:i+s};return or.remove(t),u}var a=Math.ceil(r.width*o.baselineX),n=a,h=2*n;n=n*o.baselineY|0,t.width=a,t.height=h,e.fillStyle="#f00",e.fillRect(0,0,a,h),e.font=o._font,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(o.testString,0,n);var u={ascent:0,descent:0,fontSize:0};if(!e.getImageData(0,0,a,h))return u.ascent=n,u.descent=n+6,u.fontSize=u.ascent+u.descent,or.remove(t),u;var l=e.getImageData(0,0,a,h).data,f=l.length,c=a*4,d,v,p=0,g=!1;for(d=0;d<n;d++){for(v=0;v<c;v+=4)if(l[p+v]!==255){g=!0;break}if(!g)p+=c;else break}for(u.ascent=n-d,p=f-c,g=!1,d=h;d>n;d--){for(v=0;v<c;v+=4)if(l[p+v]!==255){g=!0;break}if(!g)p-=c;else break}return u.descent=d-n,u.fontSize=u.ascent+u.descent,or.remove(t),u},Bt={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const Rx=Phaser.Utils.Objects.GetAdvancedValue,re=Phaser.Utils.Objects.GetValue;var co={backgroundColor:["backgroundColor",null,ut],backgroundColor2:["backgroundColor2",null,ut],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,ut],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",ut],stroke:["stroke","#fff",ut],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",ut],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",ut],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};class fl{constructor(t,e){this.parent=t,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(e,!1,!0);var r=re(e,"metrics",!1);r?this.metrics={ascent:re(r,"ascent",0),descent:re(r,"descent",0),fontSize:re(r,"fontSize",0)}:this.metrics=_u(this)}get canvas(){return this.parent.canvasText.canvas}get context(){return this.parent.canvasText.context}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Bt.NO_WRAP&&this.wrapWidth===0}setStyle(t,e,r){if(e===void 0&&(e=!0),r===void 0&&(r=!1),t&&t.hasOwnProperty("wrap")){var i=t.wrap;if(i.hasOwnProperty("mode")){var s=i.mode;typeof s=="string"&&(i.mode=tf[s])}else i.hasOwnProperty("width")&&(i.mode=1)}t&&t.rtl&&r&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");for(var a in co){var n=co[a],h=n[0],u=r?n[1]:this[a],l=n[2];if(a==="wrapCallback"||a==="wrapCallbackScope")this[a]=re(t,h,u);else{var f=Rx(t,h,u);l&&(f=l(f)),this[a]=f}}var c=re(t,"font",null);c===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=c;var d=re(t,"fill",null);d!==null&&(this.color=ut(d));var v=re(t,"images",void 0);return v&&this.parent.addImage(v),e?this.update(!0):this.parent}syncFont(t,e){e.font=this._font}syncStyle(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=_u(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=re(t,"fontFamily","Courier"),this.fontSize=re(t,"fontSize","16px"),this.fontStyle=re(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,e,r){return r===void 0&&(r=!0),this.backgroundColor=ut(t,this.canvas,this.context),this.backgroundColor2=ut(e,this.canvas,this.context),this.backgroundHorizontalGradient=r,this.update(!1)}setBackgroundStrokeColor(t,e){return this.backgroundStrokeColor=ut(t,this.canvas,this.context),this.backgroundStrokeLineWidth=e,this.update(!1)}setBackgroundCornerRadius(t,e){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=e,this.update(!1)}setFill(t){return this.color=ut(t,this.canvas,this.context),this.update(!1)}setColor(t){return this.color=ut(t,this.canvas,this.context),this.update(!1)}setStroke(t,e){return t===void 0?this.strokeThickness=0:(e===void 0&&(e=this.strokeThickness),this.stroke=ut(t,this.canvas,this.context),this.strokeThickness=e),this.update(!0)}setShadow(t,e,r,i,s,a){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r="#000"),i===void 0&&(i=0),s===void 0&&(s=!1),a===void 0&&(a=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=ut(r,this.canvas,this.context),this.shadowBlur=i,this.shadowStroke=s,this.shadowFill=a,this.update(!1)}setShadowOffset(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=ut(t,this.canvas,this.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,e,r){return t===void 0&&(t="#000"),e===void 0&&(e=0),r===void 0&&(r=0),this.underlineColor=ut(t,this.canvas,this.context),this.underlineThickness=e,this.underlineOffset=r,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=ut(t,this.canvas,this.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=tf[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,e){return t===void 0&&(t="left"),e===void 0&&(e="top"),this.halign=t,this.valign=e,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,e){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,typeof e=="string"?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=re(e,"fontFamily",this.fontFamily),this.fontSize=re(e,"fontSize",this.fontSize),this.fontStyle=re(e,"fontStyle",this.fontStyle)),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={};for(var e in co)t[e]=this[e];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}}const tf={none:Bt.NO_WRAP,word:Bt.WORD_WRAP,char:Bt.CHAR_WRAP,character:Bt.CHAR_WRAP},vo=Phaser.Display.Canvas.CanvasPool;var Ox=function(o,t,e){e===void 0&&(e={});var r=vo.create(this),i=r.getContext("2d");o.syncFont(r,i);var s=i.measureText(t),a=Math.ceil(s.width*o.baselineX),n=a,h=2*n;if(n=n*o.baselineY|0,r.width=a,r.height=h,i.fillStyle="#f00",i.fillRect(0,0,a,h),i.font=o._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o.testString,0,n),e.left=0,a===0||h===0||!i.getImageData(0,0,a,h))return vo.remove(r),e;for(var u=i.getImageData(0,0,a,h).data,l=!1,f=0;f<a;f++){for(var c=0;c<h;c++){var d=(c*a+f)*4;if(u[d]!==255){e.left=f,l=!0;break}}if(l)break}return vo.remove(r),e},Lx={draw(o,t,e,r){var i=this.penManager;this.hitAreaManager.clear();var s=this.context;s.save();var a=this.defaultStyle;this.clear(),ul(this,a.backgroundColor,a.backgroundStrokeColor,a.backgroundStrokeLineWidth,a.backgroundCornerRadius,a.backgroundColor2,a.backgroundHorizontalGradient,a.backgroundCornerIteration),o+=this.startXOffset,t+=this.startYOffset;var n=a.halign,h=a.valign,u,l=a.lineHeight,f=i.lines,c=f.length,d=a.maxLines,v,p,g;d>0&&c>d?(v=d,h==="center"?p=Math.floor((c-v)/2):h==="bottom"?p=c-v:p=0):(v=c,p=0),g=p+v;var m,x,y=this.rtl,T=y?this.parent.width:void 0;h==="center"?x=Math.max((r-v*l)/2,0):h==="bottom"?x=Math.max(r-v*l-2,0):x=0,x+=t;for(var S=p;S<g;S++)if(u=i.getLineWidth(S),u!==0){for(var C=f[S],E=C.length,P=n,M=0;M<E;M++){var R=C[M].prop.align;if(R){P=R;break}}P==="center"?m=(e-u)/2:P==="right"?m=y?0:e-u:m=y?e-u:0,m+=o;for(var M=0;M<E;M++)this.drawPen(C[M],m,x,T)}s.restore()},drawPen(o,t,e,r){t+=o.x,e+=o.y+(o.prop.y||0),r!==void 0&&(t=r-t);var i=this.canvas,s=this.context;s.save();var a=this.parser.propToContextStyle(this.defaultStyle,o.prop);a.buildFont(),a.syncFont(i,s),a.syncStyle(i,s),a.underlineThickness>0&&o.width>0&&this.drawUnderline(t,e,o.width,a),o.isTextPen&&this.drawText(t,e,o.text,a),o.isImagePen&&this.drawImage(t,e,o.prop.img,a),s.restore(),o.hasAreaMarker&&o.width>0&&this.hitAreaManager.add(o.prop.area,t,e-this.startYOffset,o.width,this.defaultStyle.lineHeight)},clear(){var o=this.canvas;this.context.clearRect(0,0,o.width,o.height)},drawUnderline(o,t,e,r){t+=r.underlineOffset-r.underlineThickness/2,this.autoRound&&(o=Math.round(o),t=Math.round(t));var i=this.context,s=i.lineCap;i.lineCap="butt",i.strokeStyle=r.underlineColor,i.lineWidth=r.underlineThickness,i.beginPath(),i.moveTo(o,t),i.lineTo(o+e,t),i.stroke(),i.lineCap=s},drawText(o,t,e,r){this.autoRound&&(o=Math.round(o),t=Math.round(t));var i=this.context;r.stroke&&r.stroke!=="none"&&r.strokeThickness>0&&(r.syncShadow(i,r.shadowStroke),i.strokeText(e,o,t)),r.color&&r.color!=="none"&&(r.syncShadow(i,r.shadowFill),i.fillText(e,o,t))},drawImage(o,t,e,r){t-=this.startYOffset,this.parent.imageManager.draw(e,this.context,o,t,this.autoRound)}};class Ni{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const Xi=Phaser.Utils.Objects.GetValue,Fx=Bt.NO_NEWLINE,ef=Bt.RAW_NEWLINE;class bx{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=Xi(t,"text",""),this.x=Xi(t,"x",0),this.y=Xi(t,"y",0),this.width=Xi(t,"width",0);var e=Xi(t,"prop",null);e===null&&(e={}),this.prop=e,this.newLineMode=Xi(t,"newLineMode",0),this.startIndex=Xi(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===ef&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==Fx&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===ef&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}var ws=function(o){if(Array.isArray(o))o.length=0;else for(var t in o)delete o[t]},ns=function(o,t){var e=Array.isArray(o);if(t===void 0?t=e?[]:{}:ws(t),e){t.length=o.length;for(var r=0,i=o.length;r<i;r++)t[r]=o[r]}else for(var s in o)t[s]=o[s];return t},Ae=function(){};const hr=Phaser.Utils.Objects.GetFastValue,sf=Bt.NO_NEWLINE,Dx=Bt.WRAPPED_NEWLINE;var wx=new Ni,Ix=new Ni;class dl{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=hr(t,"pensPool",wx),this.LinesPool=hr(t,"linesPool",Ix),this.tagToText=hr(t,"tagToText",Ae),this.tagToTextScope=hr(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,e=this.lines.length;t<e;t++)this.lines[t].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,e,r,i,s,a){var n=this.PensPool.pop();return n==null&&(n=new bx),Hi.text=t,Hi.x=e,Hi.y=r,Hi.width=i,Hi.prop=s,Hi.newLineMode=a,n.resetFromJSON(Hi),this.addPen(n),this}addImagePen(t,e,r,i){return this.addTextPen("",t,e,r,i,sf),this}addNewLinePen(){var t=this.lastPen,e=t?t.lastX:0,r=t?t.y:0,i=t?ns(t.prop):null;return this.addTextPen("",e,r,0,i,Dx),this}addPen(t){var e=this.lastPen;e==null?t.startIndex=0:t.startIndex=e.endIndex,this.pens.push(t);var r=this.lastLine;r==null&&(r=this.LinesPool.pop()||[],this.lines.push(r)),r.push(t),t.newLineMode!==sf&&(r=this.LinesPool.pop()||[],this.lines.push(r)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new dl),t.clear();for(var e=0,r=this.lines.length;e<r;e++)for(var i=this.lines[e],s=0,a=i.length;s<a;s++){var n=i[s];t.addPen(n.text,n.x,n.y,n.width,ns(n.prop),n.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var e=this.lines[t];return e&&e[0]?e[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var e,r=!1,i;for(e=t;e>=0&&(i=this.lines[e],r=i!=null&&i.length>0,!r);e--);if(!r)return 0;var s=i[i.length-1];return s.endIndex}getLineWidth(t){var e=this.lines[t];if(!e)return 0;var r=e[e.length-1];if(r==null)return 0;var i=r.lastX;return i}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,e=0,r=0,i=this.lines.length;r<i;r++)t=this.getLineWidth(r),t>e&&(e=t);return this.maxLinesWidth=e,e}getLineWidths(){for(var t=[],e=0,r=this.lines.length;e<r;e++)t.push(this.getLineWidth(e));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",e=this.pens,r=0,i=e.length;r<i;r++)t+=e[r].plainText;return t}get rawTextLength(){for(var t=0,e=this.pens,r=0,i=this.pens.length;r<i;r++)t+=e[r].rawTextLength;return t}getSliceTagText(t,e,r){if(t===void 0&&(t=0),e===void 0){var i=this.lastPen;if(i==null)return"";e=i.endIndex}r===void 0&&(r=!1);for(var s="",a,n,h,u,l,f,c,d=0,v=this.pens.length;d<v&&(a=this.pens[d],u=a.endIndex,!(!(u<=t)&&(a=this.pens[d],n=r?a.wrapText:a.plainText,f=a.prop,h=a.startIndex,l=h>=t&&u<=e,l||(n=n.substring(t-h,e-h)),this.tagToTextScope?s+=this.tagToText.call(this.tagToTextScope,n,f,c):s+=this.tagToText(n,f,c),c=f,u>=e)));d++);return s}get length(){return this.lines.length}set length(t){this.clear()}}var Hi={};const Bx=Phaser.Geom.Rectangle;var nf=new Ni;class Gx{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return nf.pushMultiple(this.hitAreas),this}add(t,e,r,i,s){var a=nf.pop();return a===null?a=new Bx(e,r,i,s):a.setTo(e,r,i,s),a.key=t,this.hitAreas.push(a),this}getFirst(t,e){for(var r=0,i=this.hitAreas.length;r<i;r++){var s=this.hitAreas[r];if(s.contains(t,e))return s}return null}drawBounds(t,e,r){e===void 0&&(e=16777215),r&&t.save().scaleCanvas(r.scaleX,r.scaleY).rotateCanvas(r.rotation).translateCanvas(r.x,r.y);for(var i=0,s=this.hitAreas.length;i<s;i++){var a=this.hitAreas[i];t.lineStyle(1,e).strokeRect(a.x,a.y,a.width,a.height)}return r&&t.restore(),this}}var Nx=function(){this.parent.on("pointerdown",zx,this).on("pointerup",Vx,this).on("pointermove",po,this).on("pointerover",po,this).on("pointerout",function(o,t){po.call(this,o,null,null,t)},this)},zx=function(o,t,e,r){var i=this.hitAreaManager.getFirst(t,e);i!==null&&Tn.call(this,"areadown",i.key,o,t,e)},Vx=function(o,t,e,r){var i=this.hitAreaManager.getFirst(t,e);i!==null&&Tn.call(this,"areaup",i.key,o,t,e)},po=function(o,t,e,r){if(t===null){this.lastHitAreaKey!==null&&Tn.call(this,"areaout",this.lastHitAreaKey,o),this.lastHitAreaKey=null;return}var i=this.hitAreaManager.getFirst(t,e),s=i?i.key:null;this.lastHitAreaKey!==s&&(this.lastHitAreaKey!==null&&Tn.call(this,"areaout",this.lastHitAreaKey,o),s!==null&&Tn.call(this,"areaover",s,o,t,e),this.lastHitAreaKey=s)},Tn=function(o,t,e,r,i){this.parent.emit(`${o}-${t}`,e,r,i),this.parent.emit(o,t,e,r,i)},cl=new Ni,Yx=function(o){!o||cl.push(o)},Wx=function(o){!o||cl.pushMultiple(o)},es=function(o,t,e){var r=cl.pop();return r===null&&(r={}),r.text=o,r.width=t,r.newLineMode=e,r};const Ux=Bt.NO_NEWLINE,Xx=Bt.RAW_NEWLINE,go=Bt.WRAPPED_NEWLINE,rf=Bt.NO_WRAP,Hx=Bt.WORD_WRAP,$x=Bt.CHAR_WRAP,kx=Bt.SPLITREGEXP;var rp=function(o,t,e,r,i){r<=0&&(e=rf);var s=[];if(!o||!o.length)return s;for(var a=e===rf,n=e===Hx,h=o.split(kx),u,l,f,c=0,d=h.length;c<d;c++){if(u=h[c],f=c===d-1?Ux:Xx,a){var v=t(u);s.push(es(u,v,f));continue}if(l=c===0?r-i:r,u.length<=100){var v=t(u);if(v<=l){s.push(es(u,v,f));continue}}var p,g;n?(p=u.split(" "),g=p[p.length-1]==="",g&&(p.length-=1)):p=u;for(var m,x,y,T="",S=0,C,E=n?t(" "):void 0,P=0,M=p.length;P<M;P++){if(m=p[P],x=t(m),y=P===M-1,n&&(!y||g)&&(m+=" ",x+=E),n&&x>r){T!==""?s.push(es(T,S,go)):P===0&&i>0&&s.push(es("",0,go)),s.push(...rp(m,t,$x,r,0));var R=s.pop();T=R.text,S=R.width,Yx(R),T===" "&&(T="",S=0);continue}C=S+x,C>l?(s.push(es(T,S,go)),T=m,S=x,l=r):(T+=m,S=C),y&&s.push(es(T,S,f))}}return s};const lr=Phaser.Utils.Objects.GetValue,Kx=Bt.NO_WRAP,Zx=Bt.NO_NEWLINE;class ap{constructor(t){this.parent=t.parent,this.context=lr(t,"context",null),this.canvas=this.context.canvas,this.parser=lr(t,"parser",null),this.defaultStyle=lr(t,"style",null),this.autoRound=!0,this.pensPool=lr(t,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new Gx,this.lastHitAreaKey=null;var e=this.context;this.getTextWidth=function(r){return e.measureText(r).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(t,e,r,i,s){if(s===void 0&&(s=this.penManager),s.clear(),t==="")return s;var a=this.parent.style;if(a.isWrapFitMode){var n=this.parent.padding;r=a.fixedWidth-n.left-n.right}for(var h=this.canvas,u=this.context,l=function(b){return u.measureText(b).width},f=0,c=0,d=a.wrapCallback,v=a.wrapCallbackScope,p=!0,g,m,x,y=this.parser.splitText(t),T,S,C=0,E=y.length;C<E;C++)if(T=this.parser.tagTextToProp(y[C],m),g=T.plainText,m=T.prop,m.img){var P=this.imageManager.getOuterWidth(m.img);r>0&&e!==Kx&&r<f+P&&(s.addNewLinePen(),c+=i,f=0),s.addImagePen(f,c,P,ns(m)),f+=P}else if(g!==""){if(u.save(),x=this.parser.propToContextStyle(this.defaultStyle,m),x.buildFont(),x.syncFont(h,u),x.syncStyle(h,u),!d)S=rp(g,l,e,r,f);else{S=d.call(v,g,l,r,f),typeof S=="string"&&(S=S.split(`
`));for(var A,M=0,R=S.length;M<R;M++)A=S[M],typeof A=="string"?S[M]=es(A,l(A),M<R-1?2:0):p=!1}for(var A,M=0,R=S.length;M<R;M++)A=S[M],s.addTextPen(A.text,f,c,A.width,ns(m),A.newLineMode),A.newLineMode!==Zx?(f=0,c+=i):f+=A.width;p&&Wx(S),S=null,u.restore()}for(var C=0,E=this.lines.length;C<E;C++){var O=this.lines[C],F=O[O.length-1];F&&(F.width+=this.parser.getStrokeThinkness(this.defaultStyle,F.prop))}return s}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&t>e&&(t=e),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,e=this.defaultStyle.lineHeight*t;return t>0&&(e-=this.defaultStyle.lineSpacing),e}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new dl({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,e,r){var i;if(t==null)i=this.penManager.plainText;else{var s=this.parser.splitText(t,1);i="";for(var a=0,n=s.length;a<n;a++)i+=s[a]}return(e!=null||r!=null)&&(e==null&&(e=0),r==null&&(r=i.length),i=i.substring(e,r)),i}getPenManager(t,e){if(t===void 0)return this.copyPenManager(e,this.penManager);e===void 0&&(e=this.newPenManager());var r=this.defaultStyle;return this.updatePenManager(t,r.wrapMode,r.wrapWidth,r.lineHeight,e),e}getText(t,e,r,i){if(t==null)return this.penManager.getSliceTagText(e,r,i);var s=this.tmpPenManager,a=this.defaultStyle;return this.updatePenManager(t,a.wrapMode,a.wrapWidth,a.lineHeight,s),s.getSliceTagText(e,r,i)}copyPenManager(t,e){return e===void 0&&(e=this.penManager),e.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var Jx={setInteractive:Nx};Object.assign(ap.prototype,Lx,Jx);const mo=Phaser.Utils.Objects.GetValue;var xo=function(o,t){t===void 0&&(t={key:o}),t.hasOwnProperty("key")||(t.key=o);var e=t.key,r=t.frame,i=t.width,s=t.height;if(i===void 0||s===void 0){var a=this.textureManager.getFrame(e,r),n=a?a.cutWidth:0,h=a?a.cutHeight:0;i===void 0&&s===void 0?(i=n,s=h):i===void 0?i=n*(s/h):s===void 0&&(s=h*(i/n))}this.images[o]={key:e,frame:r,width:i,height:s,y:mo(t,"y",0),left:mo(t,"left",0),right:mo(t,"right",0)}},Qx=function(o,t,e,r,i){var s=this.get(o);e+=s.left,r+=s.y,i&&(e=Math.round(e),r=Math.round(r));var a=this.textureManager.getFrame(s.key,s.frame);t.drawImage(a.source.image,a.cutX,a.cutY,a.cutWidth,a.cutHeight,e,r,s.width,s.height)};class vl{constructor(t){this.textureManager=t.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,e){if(typeof t=="string")xo.call(this,t,e);else if(Array.isArray(t))for(var r=t,i=0,s=r.length;i<s;i++)xo.call(this,r[i]);else{var r=t;for(var t in r)xo.call(this,t,r[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var e=this.get(t);return e?e.width+e.left+e.right:0}getFrame(t){var e=this.get(t);return e?this.textureManager.getFrame(e.key,e.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var jx={draw:Qx};Object.assign(vl.prototype,jx);const qx=Phaser.Utils.Objects.IsPlainObject,_x=Phaser.DOM.AddToDOM,af=Phaser.Display.Canvas.CanvasPool,of=Phaser.GameObjects.GameObject,Ye=Phaser.Utils.Objects.GetValue,ty=Phaser.DOM.RemoveFromDOM,ey=Bt.SPLITREGEXP;var yo={};class pl extends of{constructor(t,e,r,i,s,a,n){if(qx(e)){var h=e;e=Ye(h,"x",0),r=Ye(h,"y",0),i=Ye(h,"text",""),s=Ye(h,"style","")}if(e===void 0&&(e=0),r===void 0&&(r=0),super(t,a),this.renderer=t.sys.game.renderer,this.setPosition(e,r),this.setOrigin(0,0),this.initPipeline(),this.canvas=af.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,s){if(s.hasOwnProperty("align")){var u=s.align;delete s.align,s.halign=u}s.hasOwnProperty("stroke")&&!s.hasOwnProperty("strokeThickness")&&(s.strokeThickness=1)}this.style=new fl(this,s),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),yo.hasOwnProperty(a)||(yo[a]=new Ni),this.canvasText=new ap({parent:this,context:this.context,parser:n,style:this.style,pensPool:yo[a]}),this.parser=n,this.initRTL(),s&&s.padding&&this.setPadding(s.padding),this.setText(i),t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&ty(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),af.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",_x(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null&&(t=""),Array.isArray(t)&&(t=t.join(`
`)),t!==this._text&&(this._text=t.toString(),this.updateText()),this}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,e){return this.style.setFixedSize(t,e)}setBackgroundColor(t,e,r){return this.style.setBackgroundColor(t,e,r)}setBackgroundStrokeColor(t,e){return this.style.setBackgroundStrokeColor(t,e)}setBackgroundCornerRadius(t,e){return this.style.setBackgroundCornerRadius(t,e)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,e){return this.style.setStroke(t,e)}setShadow(t,e,r,i,s,a){return this.style.setShadow(t,e,r,i,s,a)}setShadowOffset(t,e){return this.style.setShadowOffset(t,e)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}setXOffset(t){return this.style.setXOffset(t)}setPadding(t,e,r,i){if(typeof t=="object"){var s=t,a=Ye(s,"x",null);a!==null?(t=a,r=a):(t=Ye(s,"left",0),r=Ye(s,"right",t));var n=Ye(s,"y",null);n!==null?(e=n,i=n):(e=Ye(s,"top",0),i=Ye(s,"bottom",e))}else t===void 0&&(t=0),e===void 0&&(e=t),r===void 0&&(r=t),i===void 0&&(i=e);return this.padding.left=t,this.padding.top=e,this.padding.right=r,this.padding.bottom=i,this.updateText(!1)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}updateText(t){t===void 0&&(t=!0);var e=this.canvasText,r=this.style;t&&e.updatePenManager(this._text,r.wrapMode,r.wrapWidth,r.lineHeight);var i=this.padding,s,a,n=Math.ceil(e.linesWidth);r.fixedWidth===0?(this.width=n+i.left+i.right,s=n):(this.width=r.fixedWidth,s=this.width-i.left-i.right,s<n&&(s=n)),r.fixedHeight===0?(this.height=e.linesHeight+i.top+i.bottom,a=e.linesHeight):(this.height=r.fixedHeight,a=this.height-i.top-i.bottom,a<e.linesHeight&&(a=e.linesHeight));var h=this.width,u=this.height;this.updateDisplayOrigin();var l=r.resolution;h*=l,u*=l,h=Math.max(Math.ceil(h),1),u=Math.max(Math.ceil(u),1);var f=this.canvas,c=this.context;f.width!==h||f.height!==u?(f.width=h,f.height=u,this.frame.setSize(h,u)):c.clearRect(0,0,h,u),c.save(),c.scale(l,l);var d=this.style.rtl?i.right:i.left,v=i.top;e.draw(d,v,s,a),c.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(f,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=this.width,p.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,e){return this.style.setTextMetrics(t,e)}toJSON(){var t=_t.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t}setInteractive(t,e,r){var i=!!this.input;return of.prototype.setInteractive.call(this,t,e,r),i||this.canvasText.setInteractive(),this}getWrappedText(t,e,r){return t=this.canvasText.getText(t,e,r,!0),t.split(ey)}getPlainText(t,e,r){return this.canvasText.getPlainText(t,e,r)}getText(t,e,r,i){return i===void 0&&(i=!1),this.canvasText.getText(t,e,r,i)}getSubString(t,e,r){return this.getText(t,e,r)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,e){return this.canvasText.getPenManager(t,e)}setSize(t,e){return this.setFixedSize(t,e)}resize(t,e){return this.setFixedSize(t,e)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return this._imageManager||(this._imageManager=new vl(this.scene)),this._imageManager}addImage(t,e){return this.imageManager.add(t,e),this}drawAreaBounds(t,e){return this.canvasText.hitAreaManager.drawBounds(t,e,this),this}measureTextMargins(t,e){return Ox(this.style,t,e)}generateTexture(t,e,r,i,s){var a=this.canvas;return i===void 0?i=a.width:i*=this.resolution,s===void 0?s=a.height:s*=this.resolution,ip(this.scene,a,t,e,r,i,s),this}}const _t=Phaser.GameObjects.Components;Phaser.Class.mixin(pl,[_t.Alpha,_t.BlendMode,_t.ComputedSize,_t.Crop,_t.Depth,_t.Flip,_t.GetBounds,_t.Mask,_t.Origin,_t.Pipeline,_t.ScrollFactor,_t.Tint,_t.Transform,_t.Visible,Ax]);var te=function(o,t){return t===void 0?`\\[${o}\\]`:`\\[${o}=(${t})\\]`},pe=function(o){return`\\[/${o}\\]`};const op="[-.0-9]+",gl="[a-z]+|#[0-9abcdef]+",ml="[^\\]]+",hp="esc",lp=te(hp),up=pe(hp),fp="raw",dp=te(fp),cp=pe(fp),vp="b",pp=te(vp),gp=pe(vp),mp="i",xp=te(mp),yp=pe(mp),Tp="size",Sp=te(Tp,op),Cp=pe(Tp),Ep="color",Pp=te(Ep,gl),Mp=pe(Ep),xl="u",Ap=te(xl),Rp=te(xl,gl),Op=pe(xl),Lp="shadow",Fp=te(Lp),bp=pe(Lp),yl="stroke",Dp=te(yl),wp=te(yl,gl),Ip=pe(yl),Bp="y",Gp=te(Bp,op),Np=pe(Bp),zp="img",Vp=te(zp,ml),Yp=pe(zp),Wp="area",Up=te(Wp,ml),Xp=pe(Wp),Hp="align",$p=te(Hp,ml),kp=pe(Hp),Kp=new RegExp(lp,"i"),Fh=new RegExp(up,"i"),Zp=new RegExp(dp,"i"),bh=new RegExp(cp,"i"),iy=new RegExp(pp,"i"),sy=new RegExp(gp,"i"),ny=new RegExp(xp,"i"),ry=new RegExp(yp,"i"),hf=new RegExp(Sp,"i"),ay=new RegExp(Cp,"i"),lf=new RegExp(Pp,"i"),oy=new RegExp(Mp,"i"),hy=new RegExp(Ap,"i"),uf=new RegExp(Rp,"i"),ly=new RegExp(Op,"i"),uy=new RegExp(Fp,"i"),fy=new RegExp(bp,"i"),dy=new RegExp(Dp,"i"),ff=new RegExp(wp,"i"),cy=new RegExp(Ip,"i"),df=new RegExp(Gp,"i"),vy=new RegExp(Np,"i"),cf=new RegExp(Vp,"i"),py=new RegExp(Yp,"i"),vf=new RegExp(Up,"i"),gy=new RegExp(Xp,"i"),pf=new RegExp($p,"i"),my=new RegExp(kp,"i"),To=new RegExp([dp,cp,lp,up,pp,gp,xp,yp,Sp,Cp,Pp,Mp,Ap,Rp,Op,Fp,bp,Dp,wp,Ip,Gp,Np,Vp,Yp,Up,Xp,$p,kp].join("|"),"ig");var xy=function(o,t){for(var e=[],r=0,i=!1,s=!1;;){var a=To.exec(o);if(!a)break;var n=a[0];if(s)if(Fh.test(n))s=!1;else continue;else if(i)if(bh.test(n))i=!1;else continue;else Kp.test(n)?s=!0:Zp.test(n)&&(i=!0);var h=To.lastIndex-n.length;if(r<h){var u=o.substring(r,h);e.push(u)}t===void 0&&e.push(n),r=To.lastIndex}var l=o.length;return r<l&&e.push(o.substring(r,l)),e};const Ut=!1,$t=!0;var yy={plainText:null,prevProp:null},Ty=function(o,t){t==null&&(t={});var e="";if(t.img&&gt(t,Ut,"img"),t.esc)Fh.test(o)?gt(t,Ut,"esc"):e=o;else if(t.raw)bh.test(o)?gt(t,Ut,"raw"):e=o;else if(Kp.test(o))gt(t,$t,"esc",!0);else if(Fh.test(o))gt(t,Ut,"esc");else if(Zp.test(o))gt(t,$t,"raw",!0);else if(bh.test(o))gt(t,Ut,"raw");else if(iy.test(o))gt(t,$t,"b",!0);else if(sy.test(o))gt(t,Ut,"b");else if(ny.test(o))gt(t,$t,"i",!0);else if(ry.test(o))gt(t,Ut,"i");else if(hf.test(o)){var r=o.match(hf);gt(t,$t,"size",`${r[1]}px`)}else if(ay.test(o))gt(t,Ut,"size");else if(lf.test(o)){var r=o.match(lf);gt(t,$t,"color",r[1])}else if(oy.test(o))gt(t,Ut,"color");else if(hy.test(o))gt(t,$t,"u",!0);else if(uf.test(o)){var r=o.match(uf);gt(t,$t,"u",r[1])}else if(ly.test(o))gt(t,Ut,"u");else if(uy.test(o))gt(t,$t,"shadow",!0);else if(fy.test(o))gt(t,Ut,"shadow");else if(dy.test(o))gt(t,$t,"stroke",!0);else if(ff.test(o)){var r=o.match(ff);gt(t,$t,"stroke",r[1])}else if(cy.test(o))gt(t,Ut,"stroke");else if(df.test(o)){var r=o.match(df);gt(t,$t,"y",parseFloat(r[1]))}else if(vy.test(o))gt(t,Ut,"y");else if(cf.test(o)){var r=o.match(cf);gt(t,$t,"img",r[1])}else if(py.test(o))gt(t,Ut,"img");else if(vf.test(o)){var r=o.match(vf);gt(t,$t,"area",r[1])}else if(gy.test(o))gt(t,Ut,"area");else if(pf.test(o)){var r=o.match(pf);gt(t,$t,"align",r[1])}else my.test(o)?gt(t,Ut,"align"):e=o;var i=yy;return i.plainText=e,i.prop=t,i},gt=function(o,t,e,r){return t===$t?o[e]=r:o.hasOwnProperty(e)&&delete o[e],o},Sy=function(o,t){var e=Ey;if(t.hasOwnProperty("img"))e.image=t.img;else{if(e.image=null,t.hasOwnProperty("family")?e.fontFamily=t.family:e.fontFamily=o.fontFamily,t.hasOwnProperty("size")){var r=t.size;typeof r=="number"&&(r=`${r}px`),e.fontSize=r}else e.fontSize=o.fontSize;e.fontStyle=Cy(t.b,t.i),t.hasOwnProperty("color")?e.color=t.color:e.color=o.color,t.hasOwnProperty("stroke")?t.stroke===!0?(e.stroke=o.stroke,e.strokeThickness=o.strokeThickness):(e.stroke=t.stroke,e.strokeThickness=o.strokeThickness):(e.stroke=o.stroke,e.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(e.shadowColor=o.shadowColor,e.shadowOffsetX=o.shadowOffsetX,e.shadowOffsetY=o.shadowOffsetY,e.shadowBlur=o.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor=t.shadow,e.shadowOffsetX=o.shadowOffsetX,e.shadowOffsetY=o.shadowOffsetY,e.shadowBlur=o.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowStroke=!1,e.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(e.underlineColor=o.underlineColor,e.underlineThickness=o.underlineThickness,e.underlineOffset=o.underlineOffset):(e.underlineColor=t.u,e.underlineThickness=o.underlineThickness,e.underlineOffset=o.underlineOffset):(e.underlineColor="#000",e.underlineThickness=0,e.underlineOffset=0),e},Cy=function(o,t){return o&&t?"bold italic":o?"bold":t?"italic":""},Ey=new fl,Py=function(o,t,e){e==null&&(e=My);var r=[];for(var i in e)t.hasOwnProperty(i)||r.push(`[/${i}]`);for(var i in t){var s=t[i];if(e[i]!==s)switch(i){case"size":r.push(`[size=${s.replace("px","")}]`);break;case"color":case"stroke":case"y":case"img":case"area":case"align":r.push(`[${i}=${s}]`);break;case"u":s===!0?r.push("[u]"):r.push(`[u=${s}]`);break;default:r.push(`[${i}]`);break}}return r.push(o),r.join("")},My={};class Jp{getStrokeThinkness(t,e){var r;return e.hasOwnProperty("stroke")?r=t.strokeThickness:r=0,r}}var Ay={splitText:xy,tagTextToProp:Ty,propToContextStyle:Sy,propToTagText:Py};Object.assign(Jp.prototype,Ay);class Qp extends pl{constructor(t,e,r,i,s){var a=new Jp(s);super(t,e,r,i,s,"rexBBCodeText",a)}}it.register("BBCodeText",function(o,t,e,r){var i=new Qp(this.scene,o,t,e,r);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.BBCodeText",Qp);var Ry={plainText:null,prevProp:null},Oy=new fl;class Ly{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,e){this.tags[t]=e}getTag(t){return this.tags[t]}splitText(t,e){for(var r=[],i=0;;){var s=So.exec(t);if(!s)break;var a=s[0],n=So.lastIndex-a.length;if(i<n&&r.push(t.substring(i,n)),e===void 0)r.push(a);else if(e===1){if(mf.test(a)){var h=a.match(xf);r.push(h[2])}else if(yf.test(a)){var h=a.match(Tf);r.push(h[2])}}i=So.lastIndex}var u=t.length;return i<u&&r.push(t.substring(i,u)),r}tagTextToProp(t,e){var r,i;if(mf.test(t)){var s=t.match(xf);if(s!=null){var a=s[1],n=this.tags;n.hasOwnProperty(a)?i=n[a]:i={},i._class=a,r=s[2]}}else if(yf.test(t)){var s=t.match(Tf);if(s!=null){var h=s[1];i=Fy(h),i._style=h,r=s[2]}}r==null&&(r=t),i==null&&(i={});var u=Ry;return u.plainText=r,u.prop=i,u}propToContextStyle(t,e){var r=Oy;if(e.hasOwnProperty("img"))r.image=e.img;else{if(r.image=null,e.hasOwnProperty("family")||e.hasOwnProperty("fontFamily")||e.hasOwnProperty("font-family")){var i=e.hasOwnProperty("family")?e.family:e.hasOwnProperty("fontFamily")?e.fontFamily:e["font-family"];r.fontFamily=i}else r.fontFamily=t.fontFamily;if(e.hasOwnProperty("size")||e.hasOwnProperty("fontSize")||e.hasOwnProperty("font-size")){var s=e.hasOwnProperty("size")?e.size:e.hasOwnProperty("fontSize")?e.fontSize:e["font-size"];typeof s=="number"&&(s=`${s}px`),r.fontSize=s}else r.fontSize=t.fontSize;if(e.hasOwnProperty("style")||e.hasOwnProperty("fontStyle")||e.hasOwnProperty("font-style")){var a=e.hasOwnProperty("style")?e.style:e.hasOwnProperty("fontStyle")?e.fontStyle:e["font-style"];r.fontStyle=a}else r.fontStyle=t.fontStyle;if(e.hasOwnProperty("color")||e.hasOwnProperty("font-color")){var n=e.hasOwnProperty("color")?e.color:e["font-color"];r.color=n}else r.color=t.color;if(e.hasOwnProperty("stroke")){var h=e.stroke;r.stroke=h.hasOwnProperty("color")?h.color:t.stroke,r.strokeThickness=h.hasOwnProperty("thinkness")?h.thinkness:t.strokeThickness}else r.stroke=t.stroke,r.strokeThickness=t.strokeThickness}if(e.hasOwnProperty("shadow")){var u=e.shadow;r.shadowColor=u.hasOwnProperty("color")?u.color:t.shadowColor,r.shadowOffsetX=u.hasOwnProperty("offsetX")?u.offsetX:t.shadowOffsetX,r.shadowOffsetY=u.hasOwnProperty("offsetY")?u.offsetY:t.shadowOffsetY,r.shadowBlur=u.hasOwnProperty("blur")?u.blur:t.shadowBlur,r.shadowStroke=!0,r.shadowFill=!0}else r.shadowColor=t.shadowColor,r.shadowOffsetX=t.shadowOffsetX,r.shadowOffsetY=t.shadowOffsetY,r.shadowBlur=t.shadowBlur,r.shadowStroke=t.shadowStroke,r.shadowFill=t.shadowFill;if(e.hasOwnProperty("u")||e.hasOwnProperty("underline")){var l=e.hasOwnProperty("u")?e.u:e.underline;r.underlineColor=l.hasOwnProperty("color")?l.color:t.underlineColor,r.underlineThickness=l.hasOwnProperty("thinkness")?l.thinkness:t.underlineThickness,r.underlineOffset=l.hasOwnProperty("offset")?l.offset:t.underlineOffset}else r.underlineColor=t.underlineColor,r.underlineThickness=t.underlineThickness,r.underlineOffset=t.underlineOffset;return r}getStrokeThinkness(t,e){var r;if(e.hasOwnProperty("stroke")){var i=e.stroke;r=i.hasOwnProperty("thinkness")?i.thinkness:t.strokeThickness}else r=t.strokeThickness;return r}propToTagText(t,e,r){return e.hasOwnProperty("_class")?t===""&&this.isTextTag(e._class)?"":`<class='${e._class}'>${t}</class>`:e.hasOwnProperty("_style")?`<style='${e._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var e=this.tags[t];return e?e.img==null:!1}}var Fy=function(o){o=o.split(";");for(var t={},e,r,i,s=0,a=o.length;s<a;s++)if(e=o[s].split(":"),r=e[0],i=e[1],!(gf(r)||gf(i))){switch(r){case"stroke":var n=i.split(" "),l=n.length;i={},l>=1&&(i.color=n[0]),l>=2&&(i.thinkness=parseInt(n[1].replace("px","")));break;case"shadow":var h=i.split(" "),l=h.length;i={},l>=1&&(i.color=h[0]),l>=2&&(i.offsetX=parseInt(h[1].replace("px",""))),l>=3&&(i.offsetY=parseInt(h[2].replace("px",""))),l>=4&&(i.blur=parseInt(h[3].replace("px","")));break;case"u":case"underline":var u=i.split(" "),l=u.length;i={},l>=1&&(i.color=u[0]),l>=2&&(i.thinkness=parseInt(u[1].replace("px",""))),l>=3&&(i.offset=parseInt(u[2].replace("px","")));break;case"y":i=parseFloat(i);break}t[r]=i}return t},gf=function(o){return o=o.replace(by,""),o.length===0},So=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,mf=/<\s*class=/i,xf=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,yf=/<\s*style=/i,Tf=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,by=/^\s+|\s+$/;const Dy=Phaser.Utils.Objects.GetValue;class jp extends pl{constructor(t,e,r,i,s){var a=Dy(s,"tags",void 0),n=new Ly(a);super(t,e,r,i,s,"rexTagText",n)}addTag(t,e){return this.parser.addTag(t,e),this.updateText(!0)}addTags(t){for(var e in t)this.parser.addTag(e,t[e]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}it.register("tagText",function(o,t,e,r){var i=new jp(this.scene,o,t,e,r);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.TagText",jp);var wy=function(o,t){if(this.scene.scale.autoRound&&(o=Math.floor(o),t=Math.floor(t)),this.width===o&&this.height===t)return this;var e=this.node.style;return e.width=`${o}px`,e.height=`${t}px`,this.updateSize(),this};const Iy=Phaser.Utils.Objects.GetValue;var Sf=function(o,t,e){e===void 0&&(e={});var r,i;for(var s in o)r=o[s],i=Iy(t,s,r[1]),i!==void 0&&(e[r[0]]=i);return e},By=function(o,t,e){for(let r in e)t.addEventListener(r,function(i){o.emit(e[r],o,i)})},Gy=function(o){o.addEventListener("touchstart",cs,!1),o.addEventListener("touchmove",cs,!1),o.addEventListener("touchend",cs,!1),o.addEventListener("mousedown",cs,!1),o.addEventListener("mouseup",cs,!1),o.addEventListener("mousemove",cs,!1)},cs=function(o){o.stopPropagation()};const Ny=Phaser.GameObjects.DOMElement,Cf=Phaser.Utils.Objects.IsPlainObject,li=Phaser.Utils.Objects.GetValue;class Tl extends Ny{constructor(t,e,r,i,s,a){Cf(e)?(a=e,e=li(a,"x",0),r=li(a,"y",0),i=li(a,"width",0),s=li(a,"height",0)):Cf(i)&&(a=i,i=li(a,"width",0),s=li(a,"height",0)),a===void 0&&(a={});var n,h=li(a,"type","text");h==="textarea"?(n=document.createElement("textarea"),n.style.resize="none"):(n=document.createElement("input"),n.type=h),Sf(Ef,a,n);var u=li(a,"style",void 0);u=Sf(Pf,a,u);var l=n.style;for(var f in a)f in Ef||f in Pf||f in l&&(u[f]=a[f]);u["box-sizing"]="border-box",super(t,e,r,n,u),this.type="rexInputText",this.resize(i,s),By(this,n,Vy),Gy(n),li(a,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,e){return t===void 0?this.node.select():this.node.setSelectionRange(t,e),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,e){return this.node.style[t]=e,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var zy={resize:wy};Object.assign(Tl.prototype,zy);const Ef={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},Pf={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},Vy={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",focus:"focus",blur:"blur",select:"select"};var qp=function(o,t,e,r){if(t)return!(e&&!e(o,t)||!Mf(o,t)||r&&!r(o,t));for(var i=o.scene.input.manager,s=i.pointersTotal,a=i.pointers,t,n=0;n<s;n++)if(t=a[n],!(e&&!e(o,t))&&!!Mf(o,t)&&!(r&&!r(o,t)))return!0;return!1},Mf=function(o,t){for(var e=o.scene,r=e.input.cameras.getCamerasBelowPointer(t),i=e.input.manager,s=[o],a,n=0,h=r.length;n<h;n++)if(a=i.hitTest(t,s,r[n]),a.length>0)return!0;return!1};const vs=Phaser.Utils.Objects.GetValue,Yy=Phaser.Math.Wrap;class _p extends Tl{constructor(t,e){super(t.scene,e);var r=this.node.style;r.position="absolute",r.opacity=0,r.pointerEvents="none",r.zIndex=0,r.transform="scale(0)",this.setCursor(vs(e,"cursor","|")),this.setCursorFlashDuration(vs(e,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0,this.setEnterClose(vs(e,"enterClose",!0)),this.onOpenCallback=vs(e,"onOpen",void 0),this.onCloseCallback=vs(e,"onClose",void 0),this.onUpdateCallback=vs(e,"onUpdate",void 0),this.textObject=t,t.setInteractive().on("pointerdown",this.setFocus,this).on("destroy",this.destroy,this),this.on("focus",function(){this.cursorFlashTimer=0,this.enterClose&&this.scene.input.keyboard.once("keydown-ENTER",this.setBlur,this),this.setText(this.textObject.text),this.scene.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.textObject,this)},this).on("blur",function(){this.updateText(),this.scene.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.textObject,this)},this)}preDestroy(){this.textObject.off("pointerdown",this.setFocus,this),this.textObject.off("destroy",this.destroy,this),this.scene.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),super.preDestroy()}onClickOutside(t){qp(this.textObject,t)||this.setBlur()}updateText(){var t=this.text;if(this.onUpdateCallback){var e=this.onUpdateCallback(t,this.textObject,this);e&&(t=e)}if(this.isFocused&&this.hasCursor){var r=this.cursorPosition;t=t.substring(0,r)+this.cursor+t.substring(r)}return this.textObject.setText(t),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var e=this.cursorFlashTimer+this.scene.game.loop.delta;return this.cursorFlashTimer=Yy(e,0,this.cursorFlashDuration),t}setEnterClose(t){return t===void 0&&(t=!0),this.enterClose=t,this}open(){return this.setFocus(),this}close(){return this.setBlur(),this}get isOpened(){return this._isFocused}}it.register("hiddenEdit",function(o,t){var e=new _p(o,t);return e});st(window,"RexPlugins.UI.HiddenEdit",_p);const Wy=Phaser.GameObjects.Zone,Uy=Phaser.Utils.Array.Add,Xy=Phaser.Utils.Array.Remove;class zn extends Wy{constructor(t,e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=1),s===void 0&&(s=1),super(t,e,r,i,s),this.children=[]}destroy(t){if(!!this.scene){if(t)for(var e,r=this.children.length-1;r>=0;r--)e=this.children[r],!e.parentContainer&&!e.displayList&&e.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var e=this;return Uy(this.children,t,0,function(r){r.once("destroy",e.onChildDestroy,e)},this),this}remove(t,e){var r=this;return Xy(this.children,t,function(i){i.off("destroy",r.onChildDestroy,r),e&&i.destroy()}),this}onChildDestroy(t,e){this.remove(t,!1)}clear(t){for(var e=this,r,i=0,s=this.children.length;i<s;i++)r=this.children[i],r.off("destroy",e.onChildDestroy,e),t&&r.destroy();return this.children.length=0,this}}const Af=Phaser.GameObjects.Components;Phaser.Class.mixin(zn,[Af.Alpha,Af.Flip]);var rs=function(o){var t;return o.hasOwnProperty("rexContainer")&&(t=o.rexContainer.parent),t},tg=function(o){for(var t=rs(o);t;)o=t,t=rs(t);return o};const Hy=Phaser.Math.DegToRad,$y=Phaser.Math.RadToDeg;var yt=function(o){if(!o.hasOwnProperty("rexContainer")){var t={parent:null,self:null,x:0,y:0,rotation:0,scaleX:0,scaleY:0,alpha:0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return $y(this.rotation)},set:function(e){this.rotation=Hy(e)}}),Object.defineProperty(t,"displayWidth",{get:function(){return o.width*this.scaleX},set:function(e){this.scaleX=e/o.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return o.height*this.scaleY},set:function(e){this.scaleY=e/o.height}}),o.rexContainer=t}return o.rexContainer},ky={setParent(o,t){t===void 0&&(t=this);var e=yt(o);return t?(e.parent=t,e.self=o):(e.parent=null,e.self=null),this},getParent(o){return o===void 0&&(o=this),rs(o)},getTopmostParent(o){return o===void 0&&(o=this),tg(o)}};const eg=zn.prototype.add;var Co=function(o){return this.setParent(o),this.resetChildState(o).updateChildVisible(o).updateChildActive(o).updateChildScrollFactor(o).updateChildMask(o),eg.call(this,o),this},Rf=function(o){this.setParent(o);var t=yt(o);return t.x=o.x,t.y=o.y,t.rotation=o.rotation,t.scaleX=o.scaleX,t.scaleY=o.scaleY,t.alpha=o.alpha,t.visible=o.visible,t.active=o.active,this.updateChildPosition(o).updateChildAlpha(o).updateChildVisible(o).updateChildActive(o).updateChildScrollFactor(o).updateChildMask(o),eg.call(this,o),this},Ky={add(o){return Array.isArray(o)?this.addMultiple(o):Co.call(this,o),this},pin(o){return Array.isArray(o)?this.addMultiple(o):Co.call(this,o),this},addMultiple(o){for(var t=0,e=o.length;t<e;t++)Co.call(this,o[t]);return this},addLocal(o){return Array.isArray(o)?this.addMultiple(o):Rf.call(this,o),this},addLocalMultiple(o){for(var t=0,e=o.length;t<e;t++)Rf.call(this,o[t]);return this}};const Zy=zn.prototype.remove,Jy=zn.prototype.clear;var Qy={remove(o,t){return rs(o)!==this?this:(this.setParent(o,null),Zy.call(this,o,t),this)},clear(o){for(var t=0,e=this.children.length;t<e;t++)this.setParent(this.children[t],null);return Jy.call(this,o),this}},jy={getLocalState(o){return yt(o)},resetChildState(o){return this.resetChildPositionState(o).resetChildVisibleState(o).resetChildAlphaState(o).resetChildActiveState(o),this},resetChildrenState(o){for(var t=0,e=o.length;t<e;t++)this.resetChildState(o[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};const Of=Phaser.Math.RotateAround;var qy={worldToLocal(o){return o.x-=this.x,o.y-=this.y,Of(o,0,0,-this.rotation),o.x/=this.scaleX,o.y/=this.scaleY,o},localToWorld(o){return o.x*=this.scaleX,o.y*=this.scaleY,Of(o,0,0,this.rotation),o.x+=this.x,o.y+=this.y,o}},Rn=function(o,t){return o===t?1:o/t},_y={updateChildPosition(o){o.isRexContainerLite&&(o.syncChildrenEnable=!1);var t=yt(o),e=t.parent;return o.x=t.x,o.y=t.y,e.localToWorld(o),o.scaleX=t.scaleX*e.scaleX,o.scaleY=t.scaleY*e.scaleY,o.rotation=t.rotation+e.rotation,o.isRexContainerLite&&(o.syncChildrenEnable=!0,o.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(o){var t=yt(o),e=t.parent;return t.x=o.x,t.y=o.y,e.worldToLocal(t),t.scaleX=Rn(o.scaleX,e.scaleX),t.scaleY=Rn(o.scaleY,e.scaleY),t.rotation=o.rotation-e.rotation,this},setChildPosition(o,t,e){return o.x=t,o.y=e,this.resetChildPositionState(o),this},setChildLocalPosition(o,t,e){var r=yt(o);return r.x=t,r.y=e,this.updateChildPosition(o),this},resetLocalPositionState(){var o=yt(this).parent;return o&&o.resetChildPositionState(this),this}},t1={updateChildRotation(o){var t=yt(o),e=t.parent;return o.rotation=e.rotation+t.rotation,this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(o){var t=yt(o),e=t.parent;return t.rotation=o.rotation-e.rotation,this},setChildRotation(o,t){return o.rotation=t,this.resetChildRotationState(o),this},setChildAngle(o,t){return o.angle=t,this.resetChildRotationState(o),this},setChildLocalRotation(o,t){var e=yt(o);return e.rotation=t,this.updateChildRotation(o),this},resetLocalRotationState(){var o=yt(this).parent;return o&&o.resetChildRotationState(this),this}},e1={updateChildScale(o){var t=yt(o),e=t.parent;return o.scaleX=e.scaleX*t.scaleX,o.scaleY=e.scaleY*t.scaleY,this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(o){var t=yt(o),e=t.parent;return t.scaleX=Rn(o.scaleX,e.scaleX),t.scaleY=Rn(o.scaleY,e.scaleY),this},setChildScale(o,t,e){return e===void 0&&(e=t),o.scaleX=t,o.scaleY=e,this.resetChildScaleState(o),this},setChildLocalScale(o,t,e){e===void 0&&(e=t);var r=yt(o);return r.scaleX=t,r.scaleY=e,this.updateChildScale(o),this},setChildDisplaySize(o,t,e){return o.setDisplaySize(t,e),this.resetChildScaleState(o),this},resetLocalScaleState(){var o=yt(this).parent;return o&&o.resetChildScaleState(this),this}},i1={updateChildVisible(o){var t=yt(o),e=t.parent,r=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return o.visible=e.visible&&t.visible&&r,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(o){var t=yt(o);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=o.visible,this},setChildVisible(o,t){return this.setChildLocalVisible(o,t),this},setChildLocalVisible(o,t){t===void 0&&(t=!0);var e=yt(o);return e.visible=t,this.updateChildVisible(o),this},setChildMaskVisible(o,t){t===void 0&&(t=!0);var e=yt(o);return e.maskVisible=t,this.updateChildVisible(o),this},resetLocalVisibleState(){var o=yt(this).parent;return o&&o.resetChildVisibleState(this),this}},s1={updateChildAlpha(o){var t=yt(o),e=t.parent;return o.alpha=e.alpha*t.alpha,this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(o){var t=yt(o),e=t.parent;return t.alpha=Rn(o.alpha,e.alpha),this},setChildAlpha(o,t){return o.alpha=t,this.resetChildAlphaState(o),this},setChildLocalAlpha(o,t){var e=yt(o);return e.alpha=t,this.updateChildAlpha(o),this},resetLocalAlphaState(){var o=yt(this).parent;return o&&o.resetChildAlphaState(this),this}},n1={updateChildActive(o){var t=yt(o),e=t.parent;return o.active=e.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(o){var t=yt(o);return t.active=o.active,this},setChildActive(o,t){return o.active=t,this.resetChildActiveState(o),this},setChildLocalActive(o,t){t===void 0&&(t=!0);var e=yt(o);return e.active=t,this.updateChildActive(o),this},resetLocalActiveState(){var o=yt(this).parent;return o&&o.resetChildActiveState(this),this}},r1={updateChildScrollFactor(o){var t=yt(o),e=t.parent;return o.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},a1={updateChildMask(o){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==o&&(o.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(o){return this.mask=o,this},clearMask(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this}},sa=function(o,t){if(o.length===0)return o;t===void 0&&(t=!1);var e=o[0].scene,r=e.sys.displayList;return r.depthSort(),t?o.sort(function(i,s){return r.getIndex(s)-r.getIndex(i)}):o.sort(function(i,s){return r.getIndex(i)-r.getIndex(s)}),o},o1={setDepth(o,t){if(this.depth=o,!t&&this.children)for(var e=this.getAllChildren(),r=0,i=e.length;r<i;r++)e[r].depth=o;return this},swapDepth(o){var t=this.depth,e=o.depth;return this.setDepth(e),o.setDepth(t),this},incDepth(o){if(this.depth+=o,this.children)for(var t=this.getAllChildren(),e=0,r=t.length;e<r;e++)t[e].depth+=o;return this},moveDepthBelow(o){var t=o.scene.children,e=this.getAllChildren([this]);sa(e);for(var r=0,i=e.length;r<i;r++){var s=e[r];if(t.exists(s)){t.moveBelow(o,s);break}}return this},moveDepthAbove(o){var t=o.scene.children,e=this.getAllChildren([this]);sa(e,!0);for(var r=0,i=e.length;r<i;r++){var s=e[r];if(t.exists(s)){t.moveAbove(o,s);break}}return this}},ig=function(o,t){var e=t(o);if(!e&&o.isRexContainerLite)for(var r=o.children,i=0,s=r.length;i<s;i++)ig(r[i],t)},Eo=function(o,t){for(var e=[o];e.length>0;){var r=e.shift(),i=t(r);!i&&r.isRexContainerLite&&e.push(...r.children)}};const $i=Phaser.Utils.Array;var h1={getChildren(o){if(!o)o=this.children;else for(var t=0,e=this.children.length;t<e;t++)o.push(this.children[t]);return o},getAllChildren(o){o===void 0&&(o=[]);var t=this;return Eo(t,function(e){e!==t&&o.push(e)}),o},getAllVisibleChildren(o){o===void 0&&(o=[]);var t=this;return Eo(t,function(e){if(e!==t){if(!e.visible)return!0;o.push(e)}}),o},bfs(o,t){return t===void 0&&(t=this),Eo(t,o),this},dfs(o,t){return t===void 0&&(t=this),ig(t,o),this},contains(o){var t=rs(o);return t?t===this?!0:this.contains(t):!1},getByName(o,t){if(t){for(var e=[this],r,i;e.length;){r=e.shift();for(var s=0,a=r.children.length;s<a;s++){if(i=r.children[s],i.name===o)return i;i.isRexContainerLite&&e.push(i)}}return null}else return $i.GetFirst(this.children,"name",o)},getRandom(o,t){return $i.GetRandom(this.children,o,t)},getFirst(o,t,e,r){return $i.GetFirstElement(this.children,o,t,e,r)},getAll(o,t,e,r){return $i.GetAll(this.children,o,t,e,r)},count(o,t,e,r){return $i.CountAllMatching(this.children,o,t,e,r)},swap(o,t){return $i.Swap(this.children,o,t),this},setAll(o,t,e,r){return $i.SetAll(this.children,o,t,e,r),this}},Fe=function(o){return Object.prototype.toString.call(o)==="[object Array]"},l1={tweenChild(o){var t=o.targets;Fe(t)||(t=[t]);for(var e,r=[],i,s=0,a=t.length;s<a;s++)i=t[s],i.hasOwnProperty("rexContainer")&&(e=i.scene,r.push(i.rexContainer));if(!!e){o.targets=r;var n=e.tweens.add(o),h=function(u,l,f){if(!f.parent){e.tweens.remove(u);return}var c=f.parent,d=f.self;switch(l){case"x":case"y":c.updateChildPosition(d);break;case"angle":case"rotation":c.updateChildRotation(d);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":c.updateChildScale(d);break;case"alpha":c.updateChildAlpha(d);break}};return n.on("update",h),n}},tween(o){var t=this.scene;return o.targets||(o.targets=this),t.tweens.add(o)}},Lf=function(o){var t=this.getAllChildren([this]);return sa(t),o.add(t),this},u1={addToLayer:Lf,addToContainer:Lf};const f1=Phaser.Math.RotateAround;var d1=function(o,t,e){e===void 0&&(e=t);var r={x:(t-o.originX)*o.displayWidth,y:(e-o.originY)*o.displayHeight};return f1(r,0,0,o.rotation),o.originX=t,o.originY=e,o.x=o.x+r.x,o.y=o.y+r.y,o},c1=function(o,t){this.syncChildrenEnable=!1,d1(this,o,t),this.syncChildrenEnable=!0;for(var e=this.getAllChildren(),r=0,i=e.length;r<i;r++)this.resetChildPositionState(e[r]);return this},sg={changeOrigin:c1};Object.assign(sg,ky,Ky,Qy,jy,qy,_y,t1,e1,i1,s1,n1,r1,a1,o1,h1,l1,u1);class De extends zn{constructor(t,e,r,i,s,a){super(t,e,r,i,s),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,a&&this.add(a)}destroy(t){!this.scene||(this.syncChildrenEnable=!1,super.destroy(t))}resize(t,e){return this.setSize(t,e),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return rs(t)}}Object.assign(De.prototype,sg);it.register("container",function(o,t,e,r,i){var s=new De(this.scene,o,t,e,r,i);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.Container",De);it.register("canvas",function(o,t,e,r){var i=new Gi(this.scene,o,t,e,r);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Canvas",Gi);const ur=Phaser.Utils.Objects.GetValue;class ng extends Gi{constructor(t,e,r,i,s,a){super(t,e,r),this.type="rexCircleMaskImage",this.setTexture(i,s,a)}setTexture(t,e,r){typeof e=="object"&&(r=e,e=void 0);var i,s;if(typeof r=="string"?(i=r,s=void 0):(i=ur(r,"maskType",0),s=ur(r,"backgroundColor",void 0)),i===void 0?i=0:typeof i=="string"&&(i=v1[i]),this._textureKey=t,this._frameName=e,i===null)return this.loadTexture(t,e),this.dirty=!0,this;var a=s!=null;a||this.loadTexture(t,e);var n=this.canvas,h=this.context,u=n.width,l=n.height;switch(h.save(),h.globalCompositeOperation=a?"source-over":"destination-in",h.beginPath(),i){case 2:var f=ur(r,"radius",0),c=ur(r,"iteration",void 0);sp(h,0,0,u,l,f,c);break;default:var d=Math.floor(u/2),v=Math.floor(l/2);i===0?h.arc(d,v,Math.min(d,v),0,2*Math.PI):h.ellipse(d,v,d,v,0,0,2*Math.PI);break}return a&&(h.fillStyle=s),h.fill(),h.restore(),a&&(h.save(),h.globalCompositeOperation="destination-atop",this.loadTexture(t,e),h.restore()),this.dirty=!0,this}}const v1={circle:0,ellipse:1,roundRectangle:2};it.register("circleMaskImage",function(o,t,e,r,i){var s=new ng(this.scene,o,t,e,r,i);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.CircleMaskImage",ng);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Kt=function(o,t,e){if(!o||typeof o=="number")return e;if(o.hasOwnProperty(t))return o[t];if(t.indexOf(".")!==-1){for(var r=t.split("."),i=o,s=e,a=0;a<r.length;a++)if(i.hasOwnProperty(r[a]))s=i[r[a]],i=i[r[a]];else{s=e;break}return s}else return e},rg={enableData(){return this.data===void 0&&(this.data={}),this},getData(o,t){return this.enableData(),o===void 0?this.data:Kt(this.data,o,t)},setData(o,t){if(this.enableData(),arguments.length===1){var e=o;for(o in e)this.data[o]=e[o]}else this.data[o]=t;return this},incData(o,t,e){return e===void 0&&(e=0),this.enableData(),this.setData(o,this.getData(o,e)+t),this},mulData(o,t,e){return e===void 0&&(e=0),this.enableData(),this.setData(o,this.getData(o,e)*t),this},clearData(){return this.data&&ws(this.data),this},resetData(o){if(this.clearData(),o){this.enableData();for(var t in o)this.data[t]=o[t]}return this},cloneData(){return this.data?ns(this.data):{}}};const p1=Phaser.Math.DegToRad,g1=Phaser.Math.RadToDeg,fr=Phaser.Utils.Objects.GetValue;class Vs{constructor(t,e){this.setParent(t),this.type=e,this.setActive().setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setDrawBelowCallback().setDrawAboveCallback(),this.originX=0,this.offsetX=0,this.offsetY=0}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return g1(this._rotation)}set angle(t){this.rotation=p1(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,e){return e===void 0&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=fr(t,"width",void 0),r=fr(t,"height",void 0),i=fr(t,"scaleX",void 0),s=fr(t,"scaleY",void 0);return e!==void 0&&(r===void 0&&s===void 0?this.setWidth(e,!0):this.setWidth(e)),r!==void 0&&(e===void 0&&i===void 0?this.setHeight(r,!0):this.setHeight(r)),i!==void 0&&e===void 0&&this.setScaleX(i),s!==void 0&&r===void 0&&this.setScaleY(s),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setLeftSpace(t.rightSpace),this}setOrigin(t){return this.originX=t,this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}onFree(){this.setParent().setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setDrawBelowCallback().setDrawAboveCallback()}drawContent(){}draw(){var t=this.context;t.save();var e=this.x+this.leftSpace+this.offsetX-this.originX*this.width,r=this.y+this.offsetY;this.autoRound&&(e=Math.round(e),r=Math.round(r)),t.translate(e,r),t.globalAlpha=this.alpha,t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback.call(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback.call(this),t.restore()}}Object.assign(Vs.prototype,rg);const ki=Phaser.Utils.Objects.GetValue;class m1 extends Vs{constructor(t,e){super(t,"background"),this.setColor(ki(e,"color",null),ki(e,"color2",null),ki(e,"horizontalGradient",!0)),this.setStroke(ki(e,"stroke",null),ki(e,"strokeThickness",2)),this.setCornerRadius(ki(e,"cornerRadius",0),ki(e,"cornerIteration",null))}set color(t){t=ut(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=ut(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,r){return r===void 0&&(r=!0),this.color=t,this.color2=e,this.horizontalGradient=r,this}set stroke(t){t=ut(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return this.stroke=t,this.strokeThickness=e,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}setCornerRadius(t,e){return this.cornerRadius=t,this.cornerIteration=e,this}drawContent(){ul(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const Ks=Phaser.Utils.Objects.GetValue;class x1 extends Vs{constructor(t,e){super(t,"background"),this.setColor(Ks(e,"color",null),Ks(e,"color2",null),Ks(e,"horizontalGradient",!0)),this.setStroke(Ks(e,"stroke",null),Ks(e,"strokeThickness",2))}set color(t){t=ut(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=ut(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,r){return r===void 0&&(r=!0),this.color=t,this.color2=e,this.horizontalGradient=r,this}set stroke(t){t=ut(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return this.stroke=t,this.strokeThickness=e,this}drawContent(){var t=this.parent.padding,e=t.left,r=t.top,i=this.parent.width-t.left-t.right,s=this.parent.height-t.top-t.bottom,a=this.context;if(this.color!=null){var n;if(this.color2!=null){var h;this.horizontalGradient?h=a.createLinearGradient(0,0,i,0):h=a.createLinearGradient(0,0,0,s),h.addColorStop(0,this.color),h.addColorStop(1,this.color2),n=h}else n=this.color;a.fillStyle=n,a.fillRect(e,r,i,s)}this.stroke!=null&&this.strokeThickness>0&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeThickness,a.strokeRect(e,r,i,s))}}var dr=function(o,t,e){return t.hasOwnProperty(o)?t[o]:e[o]};const fe=Phaser.Utils.Objects.GetValue;class ag{constructor(t){this.set(t)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY}}set(t){this.setBold(fe(t,"bold",!1)),this.setItalic(fe(t,"italic",!1)),this.setFontSize(fe(t,"fontSize","16px")),this.setFontFamily(fe(t,"fontFamily","Courier")),this.setColor(fe(t,"color","#fff")),this.setStrokeStyle(fe(t,"stroke",null),fe(t,"strokeThickness",0)),this.setShadow(fe(t,"shadowColor",null),fe(t,"shadowOffsetX",0),fe(t,"shadowOffsetY",0),fe(t,"shadowBlur",0)),this.setOffset(fe(t,"offsetX",0),fe(t,"offsetY",0))}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(dr("stroke",t,this),dr("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(dr("shadowOffsetX",t,this),dr("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this}setFontFamily(t){return this.fontFamily=t,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=ut(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,e){return this.stroke=ut(t),e!==void 0&&(this.strokeThickness=e),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=ut(t),this}setShadowOffset(t,e){return t===void 0&&(t=0),e===void 0&&(e=0),this.shadowOffsetX=t,this.shadowOffsetY=e,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,e,r,i){return this.setShadowColor(t).setShadowOffset(e,r).setShadowBlur(i),this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,e){return this.setOffsetX(t).setOffsetY(e),this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var e=this.hasFill,r=this.hasStroke;return t.fillStyle=e?this.color:"#000",t.strokeStyle=r?this.stroke:"#000",t.lineWidth=r?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,e){return this.syncFont(t).syncStyle(t),t.measureText(e)}}const cr=Phaser.Utils.Objects.GetValue;var Zr=function(o,t){return t===void 0?o:o[t]},Jr=function(o,t,e){var r=typeof t;r==="string"?o[t]=e:r==="number"?(o.left=t,o.right=t,o.top=t,o.bottom=t):(o.left=cr(t,"left",0),o.right=cr(t,"right",0),o.top=cr(t,"top",0),o.bottom=cr(t,"bottom",0))},y1=function(o,t){var e=this.padding,r=e.left,i=e.right,s=e.top,a=e.bottom;return Jr(this.padding,o,t),this.dirty=this.dirty||r!=this.padding.left||i!=this.padding.right||s!=this.padding.top||a!=this.padding.bottom,this},T1=function(o){return Zr(this.padding,o)},S1=function(o){return this.textStyle.modify(o),this},C1=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},E1=function(){return this.setText(),this};const Vn="text",Sl="image",Cl="command";var El=function(o){var t=o.type;return t===Vn||t===Sl},og=function(o){return o.type===Vn&&o.text===`
`},P1=function(o){return o.type===Cl};class M1 extends Vs{constructor(t,e,r){super(t,Vn),this.style=new ag(r),this.setText(e)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){}get offsetY(){return this.style.offsetY}set offsetY(t){}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){if(this.text===`
`||this.text==="")this.textWidth=0,this.textHeight=0;else{var t=this.style.getTextMetrics(this.context,this.text);this.textWidth=t.width;var e,r;t.hasOwnProperty("actualBoundingBoxAscent")?(e=t.actualBoundingBoxAscent,r=t.actualBoundingBoxDescent):(e=0,r=0),this.textHeight=e+r}return this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}drawContent(){var t=this.style,e=t.hasFill,r=t.hasStroke;if(!(!e&&!r)){var i=this.context;t.syncFont(i).syncStyle(i),r&&(t.syncShadow(i),i.strokeText(this.text,0,0)),e&&(t.syncShadow(i),i.fillText(this.text,0,0))}}draw(){if(!this.visible||this.text===""||this.text===`
`)return this;super.draw()}}var Pa=function(o,t){t&&this.textStyle.modify(t),this.lastAppendedChildren.length=0;for(var e=0,r=o.length;e<r;e++){var i=o.charAt(e),s=this.poolManager.allocate(Vn);s===null?s=new M1(this,i,this.textStyle):s.setParent(this).setActive().modifyStyle(this.textStyle).setText(i),this.children.push(s),this.lastAppendedChildren.push(s)}return this},A1=function(o,t){return o===void 0&&(o=""),this.removeChildren(),Pa.call(this,o,t),this.dirty=!0,this};class R1 extends Vs{constructor(t,e,r){super(t,Sl),this.setTexture(e,r)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,e){return this.key=t,this.frame=e,this.frameObj=this.scene.textures.getFrame(t,e),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}drawContent(){var t=this.context,e=this.frameObj;t.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight)}draw(){if(!this.visible)return this;super.draw()}}var hg=function(o,t,e){var r=this.poolManager.allocate(Sl);return r===null?r=new R1(this,o,t):r.setParent(this).setActive().setTexture(o,t),r.modifyPorperties(e),this.lastAppendedChildren.length=0,this.children.push(r),this.lastAppendedChildren.push(r),this};class O1 extends Vs{constructor(t,e,r,i,s){super(t,Cl),this.setName(e).setParameter(i).setCallback(r,s)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,e){return this.callback=t,this.scope=e,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var ft=function(o,t,e,r){var i=this.poolManager.allocate(Cl);return i===null?i=new O1(this,o,t,e,r):i.setParent(this).setActive().setName(o).setCallback(t,r).setParameter(e),this.lastAppendedChildren.length=0,this.children.push(i),this.lastAppendedChildren.push(i),this},L1=function(o){return this.wrapConfig=o,this},lg=function(o,t){if(!t)return o;o==null&&(o={});for(var e in t)o.hasOwnProperty(e)||(o[e]=t[e]);return o},F1=function(o,t,e,r){r===void 0&&(r={word:[],width:0}),r.word.length=0;for(var i=o.length,s=t,a=r.word,n=0;s<i;){var h=o[s];if(h.type===Vn&&h.text!==" "&&h.text!==`
`)a.push(h),n+=h.outerWidth,s++;else{s===t&&(a.push(h),n+=h.outerWidth);break}if(e)break}return r.width=n,r};const ug={left:0,center:1,right:2},fg={top:0,center:1,bottom:2};var b1=function(o,t,e){var r=o.hAlign,i=o.vAlign;if(typeof r=="string"&&(r=ug[r],o.hAlign=r),typeof i=="string"&&(i=fg[i],o.vAlign=i),r!==0)for(var s=o.lines,a=0,n=s.length;a<n;a++){var h=s[a],u=h.width,l=h.children,f;switch(r){case 1:f=(t-u)/2;break;case 2:f=t-u;break}for(var c=0,d=l.length;c<d;c++){var v=l[c];v.x+=f}}if(i!==0){var p=o.linesHeight,g;switch(i){case 1:g=(e-p)/2;break;case 2:g=e-p;break}for(var l=o.children,c=0,d=l.length;c<d;c++){var v=l[c];v.y+=g}}};const ge=Phaser.Utils.Objects.GetValue;var D1=function(o){var t=ge(o,"start",0),e=ge(o,"padding.top",0),r=ge(o,"padding.bottom",0),i=ge(o,"lineHeight",void 0),s;if(i===void 0)if(s=ge(o,"maxLines",0),this.fixedHeight>0){var I=this.fixedHeight-this.padding.top-this.padding.bottom-e-r;i=I/s}else i=0;else if(this.fixedHeight>0){if(s=ge(o,"maxLines",void 0),s===void 0){var I=this.fixedHeight-this.padding.top-this.padding.bottom-e-r;s=Math.floor(I/i)}}else s=ge(o,"maxLines",0);var a=s===0,n=ge(o,"wrapWidth",void 0);n===void 0&&(this.fixedWidth>0?n=this.fixedWidth-this.padding.left-this.padding.right:n=1/0);for(var h=ge(o,"letterSpacing",0),u=ge(o,"hAlign",0),l=ge(o,"vAlign",0),f=ge(o,"charWrap",!1),c={start:t,isLastPage:!1,padding:{top:e,bottom:r},lineHeight:i,maxLines:s,wrapWidth:n,letterSpacing:h,hAlign:u,vAlign:l,charWrap:f,children:[],lines:[],maxLineWidth:0,linesHeight:0},d=this.children,v=0,p=d.length;v<p;v++)d[v].setActive(!1);n+=h;for(var g=this.padding.left,m=this.padding.top+i+e,x=g,y=m,T=n,S=t,C=d.length,E=c.children,P=c.lines,M=[],R=0,A=0,O;S<C;){var F=d[S];if(!El(F)){S++,F.setActive(),E.push(F),M.push(F);continue}O=F1(d,S,f,O);var b=O.word,w=b.length,N=O.width+w*h;S+=w;var V=og(b[0]);if(T<N||V){if(V){var W=b[0];W.setActive().setPosition(x,y),E.push(W),M.push(W)}if(x=g,y+=i,T=n,P.push({children:M,width:R}),A=Math.max(A,R),R=0,M=[],!a&&P.length===s)break;if(V)continue}T-=N,R+=N;for(var v=0,p=b.length;v<p;v++){var W=b[v];W.setActive().setPosition(x,y),E.push(W),M.push(W),x+=W.outerWidth+h}}M.length>0&&(P.push({children:M,width:R}),A=Math.max(A,R)),c.start+=E.length,c.isLastPage=c.start===C,c.maxLineWidth=A,c.linesHeight=P.length*i+e+r;var U=this.fixedWidth>0?this.fixedWidth:c.maxLineWidth+this.padding.left+this.padding.right,D=this.fixedHeight>0?this.fixedHeight:c.linesHeight+this.padding.top+this.padding.bottom,L=U-this.padding.left-this.padding.right,I=D-this.padding.top-this.padding.bottom-e-r;return b1(c,L,I),this.setSize(U,D),c},w1=function(o){return o=lg(o,this.wrapConfig),D1.call(this,o)},I1=function(o,t,e){var r=o.hAlign,i=o.vAlign;typeof r=="string"&&(r=ug[r],o.hAlign=r),typeof i=="string"&&(i=fg[i],o.vAlign=i);var s=o.rtl,a=o.lines,n=o.lineWidth,h=o.linesWidth,u;switch(r){case 0:u=0;break;case 1:u=(t-h)/2;break;case 2:u=t-h;break}s&&(u+=n);for(var l=0,f=a.length;l<f;l++){var c=a[s?f-l-1:l],d=c.children,v=c.height,p;switch(i){case 0:p=0;break;case 1:p=(e-v)/2;break;case 2:p=e-v;break}for(var g=0,m=d.length;g<m;g++){var x=d[g];x.x+=u,x.y+=p}u+=n}};const Xt=Phaser.Utils.Objects.GetValue;var B1=function(o){var t=Xt(o,"start",0),e=Xt(o,"padding.top",0),r=Xt(o,"padding.bottom",0),i=Xt(o,"padding.left",0),s=Xt(o,"padding.right",0),a=Xt(o,"lineWidth",void 0),n;if(a===void 0)if(n=Xt(o,"maxLines",0),this.fixedWidth>0){var L=this.fixedWidth-this.padding.left-this.padding.right-i-s;a=L/n}else a=0;else if(this.fixedWidth>0){if(n=Xt(o,"maxLines",void 0),n===void 0){var L=this.fixedWidth-this.padding.left-this.padding.right;n=Math.floor(L/a)}}else n=Xt(o,"maxLines",0);var h=n===0,u=Xt(o,"fixedChildHeight",void 0);if(u===void 0){var l=Xt(o,"charPerLine",void 0);if(l!==void 0){var I=this.fixedHeight-this.padding.top-this.padding.bottom-e-r;u=Math.floor(I/l)}}var f=Xt(o,"wrapHeight",void 0);f===void 0&&(this.fixedHeight>0?f=this.fixedHeight-this.padding.top-this.padding.bottom:f=1/0);for(var c=Xt(o,"letterSpacing",0),d=Xt(o,"rtl",!0),v=Xt(o,"hAlign",d?2:0),p=Xt(o,"vAlign",0),g={start:t,isLastPage:!1,padding:{top:e,bottom:r,left:i,right:s},lineWidth:a,maxLines:n,fixedChildHeight:u,wrapHeight:f,letterSpacing:c,hAlign:v,vAlign:p,rtl:d,children:[],lines:[],maxLineHeight:0,linesWidth:0},m=this.children,x=0,y=m.length;x<y;x++)m[x].setActive(!1);f+=c;for(var T=this.padding.left+i,S=this.padding.top+e,C=T,E=S,P=f,M=t,R=m.length,A=g.children,O=g.lines,F=[],b=0,w=0;M<R;){var N=m[M];if(M++,!El(N)){N.setActive(),A.push(N),F.push(N);continue}var V=(u!==void 0?u:N.height)+c,W=og(N);if(P<V||W){if(W&&(N.setActive().setPosition(C,E).setOrigin(.5),A.push(N),F.push(N)),C=T,E=S,P=f,O.push({children:F,height:b}),w=Math.max(w,b),b=0,F=[],!h&&O.length===n)break;if(W)continue}P-=V,b+=V,N.setActive().setPosition(C,E).setOrigin(.5),A.push(N),F.push(N),E+=V}F.length>0&&(O.push({children:F,height:b}),w=Math.max(w,b)),g.start+=A.length,g.isLastPage=g.start===R,g.maxLineHeight=w,g.linesWidth=O.length*a+i+s;var U=this.fixedWidth>0?this.fixedWidth:g.linesWidth+this.padding.left+this.padding.right,D=this.fixedHeight>0?this.fixedHeight:g.maxLineHeight+this.padding.top+this.padding.bottom,L=U-this.padding.left-this.padding.right-i-s,I=D-this.padding.top-this.padding.bottom-e-r;return I1(g,L,I),this.setSize(U,D),g},G1=function(o){return o=lg(o,this.wrapConfig),B1.call(this,o)},N1=function(){var o=this.fixedWidth>0?this.fixedWidth:this.width,t=this.fixedHeight>0?this.fixedHeight:this.height;this.setSize(o,t),this.background.active&&this.background.draw();for(var e,r=0,i=this.children.length;r<i;r++)e=this.children[r],e.active&&e.draw();this.innerBounds.active&&this.innerBounds.draw()},z1=function(){return this.children},V1=function(){return this.lastAppendedChildren};const Y1=Phaser.Utils.Array.GetAll;var W1=function(){return Y1(this.children,"active",!0)},U1={setPadding:y1,getPadding:T1,modifyTextStyle:S1,removeChildren:C1,clearContent:E1,setText:A1,appendText:Pa,appendImage:hg,appendCommand:ft,setWrapConfig:L1,runWordWrap:w1,runVerticalWrap:G1,drawContent:N1,getChildren:z1,getLastAppendedChildren:V1,getActiveChildren:W1};const X1=Phaser.Utils.Objects.GetFastValue;var H1={};class $1{constructor(t){this.pools=X1(t,"pools",H1)}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new Ni),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,r=t.length;e<r;e++)this.free(t[e]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const Ff=Phaser.Utils.Objects.IsPlainObject,me=Phaser.Utils.Objects.GetValue;class Yn extends Gi{constructor(t,e,r,i,s,a){Ff(e)?(a=e,e=me(a,"x",0),r=me(a,"y",0),i=me(a,"width",0),s=me(a,"height",0)):Ff(i)&&(a=i,i=me(a,"width",0),s=me(a,"height",0));var n=i===0?1:i,h=s===0?1:s;super(t,e,r,n,h),this.type="rexDynamicText",this.autoRound=!0,this.padding={},this.textStyle=new ag(me(a,"style",void 0)),this.background=new m1(this,me(a,"background",void 0)),this.innerBounds=new x1(this,me(a,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new $1(a),this.setFixedSize(i,s),this.setPadding(me(a,"padding",0)),this.setWrapConfig(me(a,"wrap",void 0));var u=me(a,"text",void 0);u&&this.setText(u)}setFixedSize(t,e){return t===void 0&&(t=0),e===void 0&&(e=0),t>0&&e>0?(this.fixedWidth!==t||this.fixedHeight!==e)&&(this.dirty=!0):this.dirty=!0,this.fixedWidth=t,this.fixedHeight=e,this}updateTexture(){return this.clear(),this.drawContent(),super.updateTexture(),this}}Object.assign(Yn.prototype,U1);it.register("dynamicText",function(o,t,e,r,i){var s=new Yn(this.scene,o,t,e,r,i);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.DynamicText",Yn);var Ys={setEventEmitter(o,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=o===!0||o===void 0,this._eventEmitter=this._privateEE?new t:o,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(o){return this._eventEmitter&&o&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},bf=function(o){return o.replace(k1,"\\$&").replace(K1,"\\x2d")},k1=/[|\\{}()[\]^$+*?.]/g,K1=/-/g,Z1=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,dg=function(o){return typeof o!="string"||(o===""?o=null:Z1.test(o)?o=parseFloat(o):o==="false"?o=!1:o==="true"&&(o=!0)),o},J1=function(o,t){if(o==null)return[];for(var e=o.split(","),r=0,i=e.length;r<i;r++)e[r]=t(e[r]);return e};const Q1="[a-z0-9-_.]+",j1="[ #a-z-_.0-9,|&]+",q1=function(o){return o};class cg{constructor(t){this.setEventEmitter(Kt(t,"eventEmitter",void 0)),this.setTagExpression(Kt(t,"regex.tag",Q1)),this.setValueExpression(Kt(t,"regex.value",j1)),this.setValueConverter(Kt(t,"valueConvert",!0));var e=Kt(t,"delimiters","<>");this.setDelimiters(e[0],e[1]),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(t){return this.tagExpression=t,this}setValueExpression(t){return this.valueExpression=t,this}setValueConverter(t){return t===!0?t=dg:t||(t=q1),this.valueConverter=t,this}setDelimiters(t,e){e===void 0&&(e=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=e,t=bf(t),e=bf(e);var r=`${t}(${this.tagExpression})(=(${this.valueExpression}))?${e}`,i=`${t}/(${this.tagExpression})${e}`;return this.reTagOn=RegExp(r,"i"),this.reTagOff=RegExp(i,"i"),this.reSplit=RegExp(`${r}|${i}`,"gi"),this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){this.isPaused&&this.onResume();var t=this.source,e=t.length;for(this.reSplit.lastIndex===0&&this.onStart();!this.isPaused;){var r=this.reSplit.exec(t);if(!r){this.progressIndex<e&&this.onContent(t.substring(this.progressIndex,e)),this.onComplete();return}var i=r[0],s=this.reSplit.lastIndex-i.length;this.progressIndex<s&&this.onContent(t.substring(this.progressIndex,s)),this.reTagOff.test(i)?this.onTagEnd(i):this.onTagStart(i),this.progressIndex=this.reSplit.lastIndex}}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}onContent(t){this.emit("content",t),this.lastContent=t}onTagStart(t){var e=t.match(this.reTagOn),r=e[1],i=J1(e[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${r}`,...i),this.skipEventFlag||this.emit("+",r,...i),this.lastTagStart=r}onTagEnd(t){var e=t.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${e}`),this.skipEventFlag||this.emit("-",e),this.lastTagEnd=e}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.emit("complete",this),this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}}Object.assign(cg.prototype,Ys);const _1=Phaser.Utils.Objects.GetValue;var tT=function(o,t,e){var r=_1(e,"tags.color","color"),i;t.on("start",function(){i=o.textStyle.color}).on(`+${r}`,function(s){o.textStyle.setColor(s),t.skipEvent()}).on(`-${r}`,function(){o.textStyle.setColor(i),t.skipEvent()}).on("complete",function(){o.textStyle.setColor(i)})};const eT=Phaser.Utils.Objects.GetValue;var iT=function(o,t,e){var r=eT(e,"tags.stroke","stroke"),i;t.on("start",function(){i=o.textStyle.stroke,o.textStyle.setStrokeStyle(null)}).on(`+${r}`,function(s){s===void 0&&(s=i),o.textStyle.setStrokeStyle(s),t.skipEvent()}).on(`-${r}`,function(){o.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){o.textStyle.setStrokeStyle(i)})};const sT=Phaser.Utils.Objects.GetValue;var nT=function(o,t,e){var r=sT(e,"tags.b","b");t.on("start",function(){o.textStyle.setBold(!1)}).on(`+${r}`,function(){o.textStyle.setBold(!0),t.skipEvent()}).on(`-${r}`,function(){o.textStyle.setBold(!1),t.skipEvent()})};const rT=Phaser.Utils.Objects.GetValue;var aT=function(o,t,e){var r=rT(e,"tags.i","i");t.on("start",function(){o.textStyle.setItalic(!1)}).on(`+${r}`,function(){o.textStyle.setItalic(!0),t.skipEvent()}).on(`-${r}`,function(){o.textStyle.setItalic(!1),t.skipEvent()})};const oT=Phaser.Utils.Objects.GetValue;var hT=function(o,t,e){var r=oT(e,"tags.size","size"),i;t.on("start",function(){i=o.textStyle.fontSize}).on(`+${r}`,function(s){o.textStyle.setFontSize(s),t.skipEvent()}).on(`-${r}`,function(){o.textStyle.setFontSize(i),t.skipEvent()}).on("complete",function(){o.textStyle.setFontSize(i)})};const lT=Phaser.Utils.Objects.GetValue;var uT=function(o,t,e){var r=lT(e,"tags.y","y"),i;t.on("start",function(){i=o.textStyle.offsetY,o.textStyle.setOffsetY(0)}).on(`+${r}`,function(s){s===void 0&&(s=i),o.textStyle.setOffsetY(s),t.skipEvent()}).on(`-${r}`,function(){o.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){o.textStyle.setOffsetY(0)})};const fT=Phaser.Utils.Objects.GetValue;var dT=function(o,t,e){var r=fT(e,"tags.shadow","shadow"),i;t.on("start",function(){i=o.textStyle.shadowColor,o.textStyle.setShadowColor(null)}).on(`+${r}`,function(s){s===void 0&&(s=i),o.textStyle.setShadowColor(s),t.skipEvent()}).on(`-${r}`,function(){o.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){o.textStyle.setShadowColor(i)})};const cT=Phaser.Utils.Objects.GetValue;var vT=function(o,t,e){var r=cT(e,"tags.img","img");t.on(`+${r}`,function(i){var s=o.imageManager.get(i);hg.call(o,s.key,s.frame,{width:s.width,hieght:s.height,leftSpace:s.left,rightSpace:s.right}),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})};const pT=Phaser.Utils.Objects.GetValue;var gT=function(o,t,e){var r=pT(e,"tags.speed","speed"),i;t.on("start",function(){i=o.typeWriter.speed}).on(`+${r}`,function(s){Df(o,s),t.skipEvent()}).on(`-${r}`,function(){Df(o,i),t.skipEvent()}).on("complete",function(){o.typeWriter.speed=i})},mT=function(o){this.typeWriter.setSpeed(o)},Df=function(o,t){ft.call(o,"speed",mT,t,o)};const xT=Phaser.Utils.Objects.GetValue;var yT=function(o,t,e){var r=xT(e,"tags.se","se");t.on(`+${r}`,function(i,s){ft.call(o,"se",TT,[i,s],o),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},TT=function(o){if(!this.skipSoundEffect){var t=o[0],e=o[1];this.soundManager.playSoundEffect(t),e&&this.soundManager.fadeInSoundEffect(e)}};const ST=Phaser.Utils.Objects.GetValue;var CT=function(o,t,e){var r=ST(e,"tags.se.fadein","se.fadein");t.on(`+${r}`,function(i){ft.call(o,"se.fadein",ET,i,o),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},ET=function(o){this.soundManager.fadeInSoundEffect(o)};const PT=Phaser.Utils.Objects.GetValue;var MT=function(o,t,e){var r=PT(e,"tags.se.fadeout","se.fadeout");t.on(`+${r}`,function(i,s){s=s==="stop",ft.call(o,"se.fadeout",AT,[i,s],o),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},AT=function(o){this.soundManager.fadeOutSoundEffect(...o)};const RT=Phaser.Utils.Objects.GetValue;var OT=function(o,t,e){var r=RT(e,"tags.se.volume","se.volume");t.on(`+${r}`,function(i){ft.call(o,"se.volume",LT,i,o),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},LT=function(o){this.soundManager.setSoundEffectVolume(o)};const FT=Phaser.Utils.Objects.GetValue;var bT=function(o,t,e){var r=FT(e,"tags.bgm","bgm");t.on(`+${r}`,function(i,s){ft.call(o,"bgm",DT,[i,s],o),t.skipEvent()}).on(`-${r}`,function(){ft.call(o,"bgm.stop",wT,void 0,o),t.skipEvent()})},DT=function(o){var t=o[0],e=o[1];this.soundManager.playBackgroundMusic(t),e&&this.soundManager.fadeInBackgroundMusic(e)},wT=function(){this.soundManager.stopBackgroundMusic()};const IT=Phaser.Utils.Objects.GetValue;var BT=function(o,t,e){var r=IT(e,"tags.bgm.fadein","bgm.fadein");t.on(`+${r}`,function(i){ft.call(o,"bgm.fadein",GT,i,o),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},GT=function(o){this.soundManager.fadeInBackgroundMusic(o)};const NT=Phaser.Utils.Objects.GetValue;var zT=function(o,t,e){var r=NT(e,"tags.bgm.fadeout","bgm.fadeout");t.on(`+${r}`,function(i,s){ft.call(o,"bgm.fadeout",VT,[i,s],o),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},VT=function(o){this.soundManager.fadeOutBackgroundMusic(...o)};const YT=Phaser.Utils.Objects.GetValue;var WT=function(o,t,e){var r=YT(e,"tags.bgm.cross","bgm.cross");t.on(`+${r}`,function(i,s){ft.call(o,"bgm.cross",UT,[i,s],o),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},UT=function(o){this.soundManager.crossFadeBackgroundMusic(...o)};const XT=Phaser.Utils.Objects.GetValue;var HT=function(o,t,e){var r=XT(e,"tags.bgm.pause","bgm.pause");t.on(`+${r}`,function(){ft.call(o,"bgm.pause",$T,void 0,o),t.skipEvent()}).on(`-${r}`,function(){ft.call(o,"bgm.resume",kT,void 0,o),t.skipEvent()})},$T=function(){this.soundManager.pauseBackgroundMusic()},kT=function(){this.soundManager.resumeBackgroundMusic()};const KT=Phaser.Utils.Objects.GetValue;var ZT=function(o,t,e){var r=KT(e,"tags.camera.fadein","camera.fadein");t.on(`+${r}`,function(i,s,a,n){ft.call(o,"camera.fadein",JT,[i,s,a,n],o),t.skipEvent()})},JT=function(o){this.camera.fadeIn(...o)};const QT=Phaser.Utils.Objects.GetValue;var jT=function(o,t,e){var r=QT(e,"tags.camera.fadeout","camera.fadeout");t.on(`+${r}`,function(i,s,a,n){ft.call(o,"camera.fadeout",qT,[i,s,a,n],o),t.skipEvent()})},qT=function(o){this.camera.fadeOut(...o)};const _T=Phaser.Utils.Objects.GetValue;var tS=function(o,t,e){var r=_T(e,"tags.camera.shake","camera.shake");t.on(`+${r}`,function(i,s){ft.call(o,"camera.shake",eS,[i,s],o),t.skipEvent()})},eS=function(o){this.camera.shake(...o)};const iS=Phaser.Utils.Objects.GetValue;var sS=function(o,t,e){var r=iS(e,"tags.camera.flash","camera.flash");t.on(`+${r}`,function(i,s,a,n){ft.call(o,"camera.flash",nS,[i,s,a,n],o),t.skipEvent()})},nS=function(o){this.camera.flash(...o)};const rS=Phaser.Utils.Objects.GetValue;var aS=function(o,t,e){var r=rS(e,"tags.camera.zoom","camera.zoom");t.on(`+${r}`,function(i){ft.call(o,"camera.zoom",oS,i,o),t.skipEvent()}).on(`+${r}.to`,function(i,s,a){ft.call(o,"camera.zoom.to",hS,[i,s,a],o),t.skipEvent()})},oS=function(o){this.camera.setZoom(o)},hS=function(o){this.camera.zoomTo(...o)};const lS=Phaser.Utils.Objects.GetValue,wf=Phaser.Math.DegToRad;var uS=function(o,t,e){var r=lS(e,"tags.camera.rotate","camera.rotate");t.on(`+${r}`,function(i){i=wf(i),ft.call(o,"camera.rotate",fS,i,o),t.skipEvent()}).on(`+${r}.to`,function(i,s,a){i=wf(i),ft.call(o,"camera.rotate.to",dS,[i,s,a],o),t.skipEvent()})},fS=function(o){this.camera.setRotation(o)},dS=function(o){var t=o[0],e=o[1],r=o[2];this.camera.rotateTo(t,!1,e,r)};const cS=Phaser.Utils.Objects.GetValue;var vS=function(o,t,e){var r=cS(e,"tags.camera.scroll","camera.scroll");t.on(`+${r}`,function(i,s){ft.call(o,"camera.scroll",pS,[i,s],o),t.skipEvent()}).on(`+${r}.to`,function(i,s,a,n){ft.call(o,"camera.scroll.to",gS,[i,s,a,n],o),t.skipEvent()})},pS=function(o){this.camera.setScroll(...o)},gS=function(o){var t=o[0],e=o[1],r=o[2],i=o[3],s=this.camera,a=s.scrollX,n=s.scrollY;s.setScroll(t,e),t+=s.centerX,e+=s.centerY,s.setScroll(a,n),s.pan(t,e,r,i)};const If=Phaser.Utils.Objects.GetValue;var mS=function(o,t,e){var r=If(e,"tags.wait","wait"),i=If(e,"tags.click","click");t.on(`+${r}`,function(s){Bf(o,s),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()}).on(`+${i}`,function(){Bf(o,"click"),t.skipEvent()}).on(`-${i}`,function(){t.skipEvent()})},xS=function(o){this.typeWriter.wait(o)},Bf=function(o,t){ft.call(o,"wait",xS,t,o)};const yS=Phaser.Utils.Objects.GetValue;var Gf=function(o,t){return o.length===2&&o[0]===t},TS=function(o,t,e){var r=yS(e,"sprite","sprite");!r||t.on("+",function(i,...s){if(!t.skipEventFlag){var a=i.split(".");if(Gf(a,r)){var n=a[1];ft.call(o,"sprite.add",SS,[n,...s],o)}else return;t.skipEvent()}}).on("-",function(i){if(!t.skipEventFlag){var s=i.split(".");if(Gf(s,r)){var a=s[1];ft.call(o,"sprite.remove",CS,a,o)}else return;t.skipEvent()}})},SS=function(o){this.spriteManager.add(...o)},CS=function(o){this.spriteManager.remove(o)};const ES=Phaser.Utils.Objects.GetValue;var PS=function(o,t,e){var r=ES(e,"sprite","sprite");!r||t.on("-",function(i){if(!t.skipEventFlag){if(i===r)ft.call(o,"sprite.removeall",MS,void 0,o);else return;t.skipEvent()}})},MS=function(){this.spriteManager.removeAll()};const AS=Phaser.Utils.Objects.GetValue;var RS=function(o,t){return o.length===3&&o[0]===t&&o[2]==="texture"},OS=function(o,t,e){var r=AS(e,"sprite","sprite");!r||t.on("+",function(i,s,a){if(!t.skipEventFlag){var n=i.split(".");if(RS(n,r)){var h=n[1];ft.call(o,"sprite.texture",LS,[h,s,a],o)}else return;t.skipEvent()}})},LS=function(o){this.spriteManager.setTexture(...o)};const FS=Phaser.Utils.Objects.GetValue;var Nf=function(o,t){return o.length===3&&o[0]===t&&o[2]==="play"},bS=function(o,t){return o.length===3&&o[0]===t&&o[2]==="stop"},DS=function(o,t,e){var r=FS(e,"sprite","sprite");!r||t.on("+",function(i){if(!t.skipEventFlag){var s=i.split("."),a;if(Nf(s,r))a=s[1];else return;var n=Array.prototype.slice.call(arguments,1);ft.call(o,"sprite.play",wS,[a,n],o),t.skipEvent()}}).on("+",function(i){if(!t.skipEventFlag){var s=i.split("."),a;if(bS(s,r))a=s[1];else return;ft.call(o,"sprite.stop",zf,a,o),t.skipEvent()}}).on("-",function(i){if(!t.skipEventFlag){var s=i.split("."),a;if(Nf(s,r))a=s[1];else return;ft.call(o,"sprite.stop",zf,a,o),t.skipEvent()}})},wS=function(o){var t=o[0],e=o[1],r=e.shift();this.spriteManager.playAnimation(t,r),e.length>0&&this.spriteManager.chainAnimation(t,e)},zf=function(o){this.spriteManager.stopAnimation(o)};const IS=Phaser.Utils.Objects.GetValue;var BS=function(o,t){return o.length===3&&o[0]===t&&o[2]==="chain"},GS=function(o,t,e){var r=IS(e,"sprite","sprite");!r||t.on("+",function(i){if(!t.skipEventFlag){var s=i.split("."),a;if(BS(s,r))a=s[1];else return;var n=Array.prototype.slice.call(arguments,1);ft.call(o,"sprite.chain",NS,[a,n],o),t.skipEvent()}})},NS=function(o){this.spriteManager.chainAnimation(...o)};const zS=Phaser.Utils.Objects.GetValue;var VS=function(o,t){return o.length===3&&o[0]===t&&o[2]==="pause"},YS=function(o,t,e){var r=zS(e,"sprite","sprite");!r||t.on("+",function(i){if(!t.skipEventFlag){var s=i.split("."),a;if(VS(s,r))a=s[1];else return;ft.call(o,"sprite.pause",WS,a,o),t.skipEvent()}})},WS=function(o){this.spriteManager.pauseAnimation(o)};const US=Phaser.Utils.Objects.GetValue;var XS=function(o,t){return o.length===3&&o[0]===t},HS=function(o,t,e){var r=US(e,"sprite","sprite");!r||t.on("+",function(i,s){if(!t.skipEventFlag){var a=i.split("."),n,h;if(XS(a,r))n=a[1],h=a[2];else return;ft.call(o,"sprite.set",$S,[n,h,s],o),t.skipEvent()}})},$S=function(o){this.spriteManager.setProperty(...o)};const kS=Phaser.Utils.Objects.GetValue;var KS={to:!0,yoyo:!0},ZS=function(o,t){return o.length===4&&o[0]===t&&KS[o[3]]},JS=function(o,t,e){var r=kS(e,"sprite","sprite");!r||t.on("+",function(i,s,a,n){if(!t.skipEventFlag){var h=i.split("."),u,l,f;if(ZS(h,r))u=h[1],l=h[2],f=h[3]==="yoyo";else return;ft.call(o,"sprite.ease",QS,[u,l,s,a,n,f],o),t.skipEvent()}})},QS=function(o){this.spriteManager.easeProperty(...o)},jS=function(o,t,e){t.on("start",function(){o.emit("parser.start",t)}).on("+",function(r,...i){if(!t.skipEventFlag){var s=`+${r}`;o.emit(`parser.${s}`,t,...i),Vf(o,s,i)}}).on("-",function(r){if(!t.skipEventFlag){var i=`-${r}`;o.emit(`parser.${i}`,t),Vf(o,i)}}).on("complete",function(){o.emit("parser.complete",t)})},qS=function(o,t){var e=`tag.${t}`;o==null?this.emit(e):this.emit(e,...o)},Vf=function(o,t,e){ft.call(o,t,qS,e,o)};const _S=Phaser.Utils.Objects.GetValue;var tC=function(o,t,e){var r=_S(e,"tags.r","r");t.on(`+${r}`,function(){Pa.call(o,`
`),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},eC=function(o,t,e){t.on("content",function(r){Pa.call(o,r)})};const Yf=[tT,iT,nT,aT,hT,uT,dT,vT,gT,yT,CT,MT,OT,bT,BT,zT,WT,HT,ZT,jT,tS,sS,aS,uS,vS,mS,TS,PS,OS,DS,GS,YS,HS,JS,jS,tC,eC];var iC=function(o,t,e){for(var r=0,i=Yf.length;r<i;r++)Yf[r](o,t,e)},sC=function(o,t){for(var e=o.commentLineStart,r=t.split(`
`),i=0,s=r.length;i<s;i++){var a=r[i];a===""||(a.trim().length===0||e&&a.startsWith(e))&&(r[i]="")}return r.join("")};const nC=Phaser.Utils.Objects.GetValue;class rC extends cg{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("delimiters")||(e.delimiters="[]"),super(e),iC(t,this,e),this.setCommentLineStartSymbol(nC(e,"comment","//"))}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}start(t){return super.start(sC(this,t)),this}}var vg=function(o,t){return new Promise(function(e,r){o.once(t,function(){e()})})},Zt=function(o){return vg(o,"complete")},aC=function(o){return this.children=o,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(o),this.typing(),Zt(this)};const oC="delay",pg="anim";var gg=function(o){o===void 0&&(o=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var e=this.getNextChild();if(!e){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(El(e)){var r=this.animationConfig;if(r.duration>0){var i=this.timeline.addTimer({name:pg,target:e,duration:r.duration,yoyo:r.yoyo,onStart:r.onStart,onProgress:r.onProgress,onComplete:r.onComplete});this.skipTypingAnimation&&i.seek(1)}else r.onStart&&r.onStart(e,0);this.textPlayer.emit("typing",e),t+=this.speed+o,o=0;var s=this.index===this.children.length;if(t>0&&!s){this.typingTimer=this.timeline.addTimer({name:oC,target:this,duration:t,onComplete:function(a,n,h){a.typingTimer=void 0,gg.call(a,h.remainder)}});break}}else P1(e)&&e.exec()}this.inTypingProcessLoop=!1},hC=function(){return this.timeline.pause(),this},lC=function(){return this.timeline.resume(),this},uC=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},fC=function(o){return this.isTypingPaused?(o===void 0&&(o=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=o):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(o)),this):this};const Je="_remove.wait",Dh="_remove.play",Wf=[Je,Dh];var zi=function(o,t,e,r,i){return function(){o.emit(Je,i),t.apply(r,e)}},Uf=function(o,t,e,r,i){var s=zi(o,e,r,i,"custom"),a=t?`wait.${t}`:"wait";o.emit(a,s)},dC=function(o,t,e,r,i){return o.typeWriter.timeline.delayCall(t,e,r,i)},cC=function(o,t,e,r,i){var s=zi(o,e,r,i,"time"),a;o.once(Je,function(){a&&(a.remove(),a=void 0)}),a=dC(o,t,s),o.emit("wait.time",t)},vC=function(o,t,e,r){var i=zi(o,t,e,r,"click"),s=o.clickEE;o.once(Je,function(){s.off("pointerdown",i,o)}),s.once("pointerdown",i,o),o.emit("wait.click")},Xf=function(o,t,e,r,i){var s=zi(o,e,r,i,"music");t&&(o.once(Je,function(){t.off("complete",s,o)}),t.once("complete",s,o)),o.emit("wait.music",t),t||s()},pC=function(o){switch(o){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},gC=function(o,t,e,r,i){var s=zi(o,e,r,i,`camera.${t}`),a=o.camera,n,h;switch(t){case"camera.fadein":n=a.fadeEffect,h="camerafadeincomplete";break;case"camera.fadeout":n=a.fadeEffect,h="camerafadeoutcomplete";break;case"camera.flash":n=a.flashEffect,h="cameraflashcomplete";break;case"camera.shake":n=a.shakeEffect,h="camerashakecomplete";break;case"camera.zoom":n=a.zoomEffect,h="camerazoomcomplete";break;case"camera.rotate":n=a.rotateToEffect,h="camerarotatecomplete";break;case"camera.scroll":n=a.panEffect,h="camerapancomplete";break}n.isRunning?(o.once(Je,function(u){a.off(h,s,o)}),a.once(h,s,o),o.emit("wait.camera",t)):(o.emit("wait.camera",t),s())},mC=function(o,t,e,r,i){var s=zi(o,e,r,i,"keydown"),a=`keydown-${t.toUpperCase()}`,n=o.scene.input.keyboard;o.once(Je,function(){n.off(a,s,o)}),n.once(a,s,o),o.emit("wait.keydown",t)},xC=function(o){var t=o.split(".");return t[0]==="sprite"&&t.length<=3},yC=function(o,t,e,r,i){var s=zi(o,e,r,i),a=t.split("."),n=o.spriteManager;switch(a.length){case 1:n.isEmpty?(o.emit("wait.sprite"),s()):(o.once(Je,function(d){n.off("empty",s,o)}),n.once("empty",s,o),o.emit("wait.sprite"));break;case 2:var l=a[1];if(n.has(l)){var h=o.spriteManager.get(l),u=h.sprite;o.once(Je,function(){u.off("destroy",s,o)}),u.once("destroy",s,o),o.emit("wait.sprite",l)}else o.emit("wait.sprite",l),s();break;case 3:var l=a[1],f=a[2],c=o.spriteManager.getTweenTask(l,f);c?(o.once(Je,function(){c.off("complete",s,o)}),c.once("complete",s,o),o.emit("wait.sprite",l,f)):(o.emit("wait.sprite",l,f),s());break}};const TC=Phaser.Input.Keyboard.KeyCodes;var mg=function(o,t,e,r,i){typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var s=0,a=t.length;s<a;s++){var n=t[s];if(n==null||n==="wait")Uf(o,void 0,e,r,i);else if(typeof n=="number"||!isNaN(n))cC(o,parseFloat(n),e,r,i);else if(n==="click")vC(o,e,r,i);else if(n==="se"){var h=o.soundManager.getLastSoundEffect();Xf(o,h,e,r,i)}else if(n==="bgm"){var h=o.soundManager.getBackgroundMusic();Xf(o,h,e,r,i)}else TC.hasOwnProperty(n.toUpperCase())?mC(o,n,e,r,i):pC(n)?gC(o,n,e,r,i):xC(n)?yC(o,n,e,r,i):Uf(o,n,e,r,i)}},SC=function(o){return this.ignoreWait?this:(this.pauseTyping(),mg(this.textPlayer,o,this.resumeTyping,[],this),this)},CC=function(o){return this.timeline.setTimeScale(o),this},EC=function(o){return o===void 0&&(o=!0),this.ignoreWait=o,this},PC=function(o){if(o===void 0&&(o=!0),this.skipTypingAnimation=o,o)for(var t=this.timeline.getTimers(pg),e=0,r=t.length;e<r;e++)t[e].seek(1);return this},MC=function(o){if(o===void 0&&(o=!0),this.skipSoundEffect=o,o){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},AC=function(){return this.typingTimer&&this.typingTimer.seek(1),this},RC={start:aC,typing:gg,pause:hC,resume:lC,pauseTyping:uC,resumeTyping:fC,wait:SC,setTimeScale:CC,setIgnoreWait:EC,setSkipTypingAnimation:PC,setSkipSoundEffect:MC,skipCurrentTypingDelay:AC};const OC=Phaser.Scene;var Qr=function(o){return o instanceof OC},xg=function(o){if(o==null||typeof o!="object")return null;if(Qr(o))return o;if(o.scene&&Qr(o.scene))return o.scene;if(o.parent&&o.parent.scene&&Qr(o.parent.scene))return o.parent.scene};const LC=Phaser.Utils.Objects.GetValue;class ee{constructor(t,e){this.parent=t,this.scene=xg(t),this.isShutdown=!1,this.setEventEmitter(LC(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,e){this.destroy(e)}}Object.assign(ee.prototype,Ys);const FC=Phaser.Utils.Objects.GetValue;class Ma extends ee{constructor(t,e){super(t,e),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(FC(e,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=bC[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const bC={no:0,lazy:1,always:2},Po=Phaser.Utils.Objects.GetValue;class DC extends Ma{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=Po(t,"isRunning",!1),this.timeScale=Po(t,"timeScale",1),this.now=Po(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class yg extends DC{startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.events.off("update",this.update,this)}update(t,e){return!this.isRunning||this.timeScale===0?this:(this.tick(e),this)}}var wC=function(o,t){return t===void 0&&(t=.5),o<=t?o=o/t:o=1-(o-t)/(1-t),o};const Hf=Phaser.Math.Clamp;class IC{constructor(t,e){this.setTimeline(t).reset(e)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,e,r,i){return this.target=t,this.onStart=e,this.onProgress=r,this.onComplete=i,this}setDuration(t,e){return e===void 0&&(e=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=e,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=Hf(t,0,1),this.yoyo&&(t=wC(t)),t}setProgress(t){t=Hf(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){!t||t(this.target,this.t,this)}update(t,e){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=e,this.t=this.getProgress(),this.runCallback(this.onProgress);var r=this.remainder<=0;return r&&this.runCallback(this.onComplete),r}}class BC extends Ni{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var e=0,r=t.length;e<r;e++)this.free(t[e]);return this}}const GC=Phaser.Utils.Objects.GetValue,NC=new BC;class zC extends yg{constructor(t,e){super(t,e),this.addedTimers=[],this.timers=[],this.timerPool=GC(e,"pool",NC)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var e=this.timerPool.allocate();return e?e.setTimeline(this).reset(t):e=new IC(this,t),this.addedTimers.push(e),e.runCallback(e.onStart),this.isRunning||this.start(),e}delayCall(t,e,r,i){var s=this.addTimer({duration:t,onComplete:function(a,n,h){r===void 0&&(r=[]),r.push(h),e.apply(i,r)}});return s}getTimers(t){for(var e=[],r=[this.addedTimers,this.timers],i=0,s=r.length;i<s;i++)for(var a=r[i],n=0,h=a.length;n<h;n++){var u=a[n];u.name===t&&e.push(u)}return e}update(t,e){super.update(t,e),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var r=[],i=0,s=this.timers.length;i<s;i++){var a=this.timers[i],n=a.update(this.now,this.delta);n?this.timerPool.free(a):r.push(a)}this.timers=r,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}const Mo=Phaser.Utils.Objects.GetValue;class Tg{constructor(t,e){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.timeline=new zC(t),this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(Mo(e,"onTypingStart",YC)),this.setSpeed(Mo(e,"speed",250)),this.setAnimationConfig(Mo(e,"animation",void 0))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.timeline.destroy(),this.timeline=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}setSpeed(t){return this.speed=t,this}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t===void 0?t={}:t===!1&&(t={duration:0}),t.hasOwnProperty("duration")||(t.duration=1e3),t.hasOwnProperty("onStart")||(t.onStart=VC),this.animationConfig=t,this}getNextChild(){var t=this.children[this.index];return this.index=Math.min(this.index+1,this.children.length),t}}var VC=function(o){o.setVisible()},YC=function(o){for(var t=0,e=o.length;t<e;t++)o[t].setVisible(!1)};Object.assign(Tg.prototype,Ys,RC);class WC extends Ma{startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.events.off("update",this.update,this)}}const yi=Phaser.Utils.Objects.GetValue,$f=Phaser.Math.Clamp;class Sg{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=yi(t,"state",Zs),this.timeScale=yi(t,"timeScale",1),this.delay=yi(t,"delay",0),this.repeat=yi(t,"repeat",0),this.repeatCounter=yi(t,"repeatCounter",0),this.duration=yi(t,"duration",0),this.nowTime=yi(t,"nowTime",0),this.justRestart=yi(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?gs:ps,this.repeatCounter=0,this}stop(){return this.state=Zs,this}update(t,e){this.state===Zs||this.state===vr||e===0||this.timeScale===0||(this.nowTime+=e*this.timeScale,this.state=this.nowTime>=0?gs:ps,this.justRestart=!1,this.nowTime>=this.duration&&(this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=vr)))}get t(){var t;switch(this.state){case Zs:case ps:t=0;break;case gs:t=this.nowTime/this.duration;break;case vr:t=1;break}return $f(t,0,1)}set t(t){t=$f(t,-1,1),t<0?(this.state=ps,this.nowTime=-this.delay*t):(this.state=gs,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}get isIdle(){return this.state===Zs}get isDelay(){return this.state===ps}get isCountDown(){return this.state===gs}get isRunning(){return this.state===ps||this.state===gs}get isDone(){return this.state===vr}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}}const Zs=0,ps=1,gs=2,vr=-1;class UC extends WC{constructor(t,e){super(t,e),this.timer=new Sg}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const pr=Phaser.Utils.Objects.GetValue,kf=Phaser.Utils.Objects.GetAdvancedValue,XC=Phaser.Tweens.Builders.GetEaseFunction;class Ws extends UC{resetFromJSON(t){return this.timer.resetFromJSON(pr(t,"timer")),this.setEnable(pr(t,"enable",!0)),this.setDelay(kf(t,"delay",0)),this.setDuration(kf(t,"duration",1e3)),this.setEase(pr(t,"ease","Linear")),this.setRepeat(pr(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=XC(t),this}setRepeat(t){return this.repeat=t,this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}update(t,e){if(!this.isRunning||!this.enable)return this;var r=this.parent;if(!r.active)return this;var i=this.timer;return i.update(t,e),i.isDelay||this.updateGameObject(r,i),this.emit("update",r,this),i.isDone&&this.complete(),this}updateGameObject(t,e){}}const Kf=Phaser.Utils.Objects.GetValue,Zf=Phaser.Utils.Objects.GetAdvancedValue,HC=Phaser.Math.Linear;class Cg extends Ws{constructor(t,e,r){e.scene=t,e.active=!0,super(e,r),this.volume={},this.resetFromJSON(r)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(Kf(t,"mode",0)),this.setEnable(Kf(t,"enable",!0)),this.setVolumeRange(Zf(t,"volume.start",this.parent.volume),Zf(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=$C[t]),this.mode=t,this}setVolumeRange(t,e){return this.volume.start=t,this.volume.end=e,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,e){t.volume=HC(this.volume.start,this.volume.end,e.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}}const $C={stop:1,destroy:2};var Jf=function(o,t,e,r,i){r===void 0&&(r=1),i===void 0&&(i=0);var s={mode:0,volume:{start:i,end:r},duration:e};typeof t=="string"&&(t=o.sound.add(t));var a;return t.hasOwnProperty("_fade")?(a=t._fade,a.stop().resetFromJSON(s)):(a=new Cg(o,t,s),t._fade=a),a.start(),t.isPlaying||t.setVolume(i).play(),t},Ao=function(o,t,e,r){r===void 0&&(r=!0);var i={mode:r?2:1,volume:{start:t.volume,end:0},duration:e},s;return t.hasOwnProperty("_fade")?(s=t._fade,s.stop().resetFromJSON(i)):(s=new Cg(o,t,i),t._fade=s),s.start(),t.isPlaying||t.play(),t};const Ro=Phaser.Utils.Objects.GetValue,Qf=Phaser.Utils.Array.Remove;class jf{constructor(t,e){this.scene=t,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(Ro(e,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Ro(e,"bgm.fade",500));var r=Ro(e,"bgm.initial",void 0);r&&this.setCurrentBackgroundMusic(r)}destroy(t){if(this.soundEffects.length&&!t)for(var e=this.soundEffects.length-1;e>=0;e--)this.soundEffects[e].destroy();this.soundEffects.length=0,this.backgroundMusic&&!t&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(t){return this.backgroundMusicLoopValue=t,this}setBackgroundMusicFadeTime(t){return this.backgroundMusicFadeTime=t,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(t){var e=this.scene.sound.add(t);return this.soundEffects.push(e),e.once("complete",function(){e.destroy(),this.scene&&Qf(this.soundEffects,e)},this).once("destroy",function(){!this.scene||Qf(this.soundEffects,e)},this).play(),this}setSoundEffectVolume(t){var e=this.getLastSoundEffect();return e&&e.setVolume(t),this}fadeInSoundEffect(t){var e=this.getLastSoundEffect();return e&&Jf(this.scene,e,t),this}fadeOutSoundEffect(t,e){var r=this.getLastSoundEffect();return r&&Ao(this.scene,r,t,e),this}fadeOutAllSoundEffects(t,e){for(var r=this.soundEffects.length-1;r>=0;r--)Ao(this.scene,this.soundEffects[r],t,e);return this}setCurrentBackgroundMusic(t){this.backgroundMusic=t,t&&(t.setLoop(this.backgroundMusicLoopValue),t.once("complete",function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0},this).once("destroy",function(){this.backgroundMusic=void 0},this),t.isPlaying||t.play())}playBackgroundMusic(t){return this.backgroundMusic&&this.backgroundMusic.key===t?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sound.add(t)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(t){return this.backgroundMusic&&Jf(this.scene,this.backgroundMusic,t),this}fadeOutBackgroundMusic(t,e){return this.backgroundMusic&&Ao(this.scene,this.backgroundMusic,t,e),this}crossFadeBackgroundMusic(t,e){var r=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(e,!0).playBackgroundMusic(t).fadeInBackgroundMusic(e),this.backgroundMusicFadeTime=r,this}}class kC{constructor(t,e,r){this.spriteManager=t,this.sprite=e.setName(r),this.tweens={},this.name=r}get scene(){return this.spriteManager.scene}destroy(){this.freeSprite().freeTweens(),this.spriteManager=void 0}freeSprite(){return this.sprite.destroy(),this.sprite=void 0,this}freeTweens(){var t=this.tweens;for(var e in t)t[e].remove(),delete t[e];return this}setProperty(t,e){return this.sprite[t]=e,this}easeProperty(t,e,r,i,s,a){var n=this.tweens;n.hasOwnProperty(t)&&n[t].remove();var h={targets:this.sprite,duration:r,ease:i,yoyo:s,onComplete:function(){n[t].remove(),delete n[t],a&&a()},onCompleteScope:this};return h[t]=e,n[t]=this.scene.tweens.add(h),this}setTexture(t,e){return this.sprite.setTexture(t,e),this}playAnimation(t){return this.sprite.play(t),this}stopAnimation(){return this.sprite.stop(),this}chainAnimation(t){return this.sprite.chain(t),this}pauseAnimation(){return this.sprite.anims.pause(),this}}var KC=function(o){return o>>16&255},ZC=function(o){return o>>8&255},JC=function(o){return o&255};const QC=~(255<<16)&16777215,jC=~(255<<8)&16777215,qC=16776960;var _C=function(o,t){return(t&255)<<16|o&QC},tE=function(o,t){return(t&255)<<8|o&jC},eE=function(o,t){return t&255|o&qC},iE=function(o,t,e,r){return(t&255)<<16|(e&255)<<8|r&255},sE=function(o,t){return o.hasOwnProperty("tintR")||(t===void 0&&(t=16777215),Object.defineProperty(o,"tint",{get:function(){return o._tintRGB},set:function(e){e=Math.floor(e)&16777215,o.setTint(e),o._tintRGB!==e&&(o._tintRGB=e,o._tintR=KC(e),o._tintG=ZC(e),o._tintB=JC(e))}}),Object.defineProperty(o,"tintR",{get:function(){return o._tintR},set:function(e){e=Math.floor(e)&255,o._tintR!==e&&(o._tintR=e,o._tintRGB=_C(o._tintRGB,e),o.tint=o._tintRGB)}}),Object.defineProperty(o,"tintG",{get:function(){return o._tintG},set:function(e){e=Math.floor(e)&255,o._tintG!==e&&(o._tintG=e,o._tintRGB=tE(o._tintRGB,e),o.tint=o._tintRGB)}}),Object.defineProperty(o,"tintB",{get:function(){return o._tintB},set:function(e){e=Math.floor(e)&255,o._tintB!==e&&(o._tintB=e,o._tintRGB=eE(o._tintRGB,e),o.tint=o._tintRGB)}}),Object.defineProperty(o,"tintGray",{get:function(){return Math.floor((o._tintR+o._tintG+o._tintB)/3)},set:function(e){e=Math.floor(e)&255,(o._tintR!==e||o._tintG!==e||o._tintB!==e)&&(o._tintR=e,o._tintG=e,o._tintB=e,o._tintRGB=iE(o._tintRGB,e,e,e),o.tint=o._tintRGB)}}),o.tint=t),o},nE=function(o){for(var t in o)return!1;return!0};const Oo=Phaser.Utils.Objects.GetValue,rE=Phaser.Utils.Array.Remove;class wh{constructor(t,e){this.scene=t,this.setEventEmitter(Oo(e,"eventEmitter",void 0)),this.setCreateCallback(Oo(e,"createCallback","sprite")),this.setSpriteFadeTime(Oo(e,"fade",500)),this.sprites={},this.removedSprites=[]}destroy(t){this.clear(!t),this.createCallback=void 0,this.scene=void 0}setCreateCallback(t){return t==="sprite"?this.createCallback=function(e,r,i){return e.add.sprite(0,0,r,i)}:t==="image"?this.createCallback=function(e,r,i){return e.add.image(0,0,r,i)}:this.createCallback=t,this}setSpriteFadeTime(t){return this.fadeTime=t,this}has(t){return this.sprites.hasOwnProperty(t)}get(t){return this.sprites[t]}getTweenTask(t,e){if(this.has(t)){var r=this.get(t).tweens;if(r.hasOwnProperty(e))return r[e]}return null}get isEmpty(){return nE(this.sprites)&&this.removedSprites.length===0}clear(t){t===void 0&&(t=!0);for(var e in this.sprites)t&&this.sprites[e].destroy(),delete this.sprites[e];return this.removedSprites.length=0,this}add(t,e,r){this.remove(t);var i;if(arguments.length===3)i=this.createCallback(this.scene,e,r);else{var s=Array.prototype.slice.call(arguments,1);i=this.createCallback(this.scene,...s)}this.fadeTime>0&&sE(i),i.once("destroy",function(){rE(this.removedSprites,i),this.isEmpty&&this.emit("empty")},this);var a=new kC(this,i,t);return this.sprites[t]=a,this.fadeTime>0&&a.setProperty("tintGray",0).easeProperty("tintGray",255,this.fadeTime),this}setProperty(t,e,r){return this.has(t)?(this.get(t).setProperty(e,r),this):this}easeProperty(t,e,r,i,s,a,n){return this.has(t)?(i===void 0&&(i=1e3),s===void 0&&(s="Linear"),this.get(t).easeProperty(e,r,i,s,a,n),this):this}remove(t){if(!this.has(t))return this;var e=this.get(t);return delete this.sprites[t],this.removedSprites.push(e.sprite),this.fadeTime>0?e.easeProperty("tintGray",0,this.fadeTime,"Linear",!1,function(){e.destroy()}):e.destroy(),this}removeAll(){for(var t in this.sprites)this.remove(t);return this}setTexture(t,e,r){return this.has(t)?(this.get(t).setTexture(e,r),this):this}playAnimation(t,e){return this.has(t)||this.add(t),this.get(t).playAnimation(e),this}stopAnimation(t){return this.has(t)?(this.get(t).stopAnimation(),this):this}chainAnimation(t,e){return this.has(t)?(this.get(t).chainAnimation(e),this):this}pauseAnimation(t){return this.has(t)?(this.get(t).pauseAnimation(),this):this}}Object.assign(wh.prototype,Ys);var aE=function(o){return Qr(o)?this.clickEE=o.input:this.clickEE=o.setInteractive(),this},oE=function(o){return this.camera=o,this},hE=function(o){var t=this;o?typeof o=="function"?this.nextPageInput=function(e,r,i){var s=zi(t,e,r,i);o.call(t,s)}:this.nextPageInput=function(e,r,i){mg(t,o,e,r,i)}:this.nextPageInput=null},lE=function(o,t){return this.imageManager.add(o,t),this},uE=function(o){return this.isPlaying?this:(this.removeChildren(),this.parser.start(o),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},fE=function(o){var t=Zt(this);return this.play(o),t};const dE=Phaser.Utils.Objects.GetValue;var Eg=function(){if(!this.isPlaying||this.isPageTyping)return this;var o=dE(this.wrapConfig,"callback",this.runWordWrap);typeof o=="string"&&(o=this[o]);var t=o.call(this,this.lastWrapResult);this.lastWrapResult=t,this.emit("page.start");var e=function(){this.emit(Dh),t.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.nextPageInput&&this.nextPageInput(Eg,[],this))};this.once(Dh,function(){this.typeWriter.off("complete",e,this)}),this.typeWriter.once("complete",e,this).start(t.children)},cE=function(){return this.typeWriter.pause(),this},vE=function(){return this.typeWriter.resume(),this},pE=function(o){return this.typeWriter.setTimeScale(o),this},gE=function(o){return this.typeWriter.setIgnoreWait(o),this},mE=function(){if(!this.isPlaying||!this.isPageTyping)return this;var o=this.typeWriter.speed,t=this.typeWriter.ignoreWait,e=this.typeWriter.skipTypingAnimation,r=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setSpeed(o).setIgnoreWait(t).setSkipTypingAnimation(e).setSkipSoundEffect(r)},this).setSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},xE={setClickTarget:aE,setTargetCamera:oE,setNextPageInput:hE,addImage:lE,play:uE,playPromise:fE,typingNextPage:Eg,pause:cE,resume:vE,setTimeScale:pE,setIgnoreWait:gE,showPage:mE},yE=function(o){for(var t=0,e=Wf.length;t<e;t++)o.emit(Wf[t])};const qf=Phaser.Utils.Objects.IsPlainObject,Ti=Phaser.Utils.Objects.GetValue;class Pl extends Yn{constructor(t,e,r,i,s,a){qf(e)?a=e:qf(i)&&(a=i),a===void 0&&(a={});var n=a.text;delete a.text,super(t,e,r,i,s,a),this.type="rexTextPlayer",this.parser=new rC(this,Ti(a,"parser",void 0)),this.typeWriter=new Tg(this,Ti(a,"typing",void 0)),this._imageManager=void 0;var h=Ti(a,"images",void 0);h&&this.addImage(h),this._soundManager=void 0;var u=Ti(a,"sounds",void 0);u&&(this._soundManager=new jf(this.scene,u)),this.setTargetCamera(Ti(a,"camera",this.scene.cameras.main)),this._spriteManager=void 0;var l=Ti(a,"sprites",void 0);l&&(this._spriteManager=new wh(this.scene,l)),this.setClickTarget(Ti(a,"clickTarget",this)),this.setNextPageInput(Ti(a,"nextPageInput",null)),this.isPlaying=!1,n&&this.play(n)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new vl(this.scene)),this._imageManager}get soundManager(){return this._soundManager===void 0&&(this._soundManager=new jf(this.scene)),this._soundManager}get spriteManager(){return this._spriteManager===void 0&&(this._spriteManager=new wh(this.scene)),this._spriteManager}destroy(t){!this.scene||(yE(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this._soundManager&&this._soundManager.destroy(t),this._soundManager=void 0,this.camera=void 0,this._spriteManager&&this._spriteManager.destroy(t),this._spriteManager=void 0,this.clickEE=void 0,super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}}Object.assign(Pl.prototype,xE);it.register("textPlayer",function(o,t,e,r,i){var s=new Pl(this.scene,o,t,e,r,i);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.TextPlayer",Pl);var Lo=function(o,t,e,r,i,s,a,n,h,u,l,f){u===void 0&&(u=0),l===void 0&&(l=2*Math.PI),f===void 0&&(f=!1),t.beginPath(),t.ellipse(e,r,i,s,0,u,l,f),a!=null&&(t.fillStyle=a,t.fill()),n!=null&&(t.strokeStyle=n,t.lineWidth=h,t.stroke())},TE=function(o,t,e,r,i,s,a,n,h,u,l){h===void 0&&n!=null&&(h=2),u===void 0&&(u="start"),l===void 0&&(l="alphabetic"),t.font=s,t.textAlign=u,t.textBaseline=l,t.fillStyle=a,t.strokeStyle=n,t.lineWidth=h,t.lineCap="round",t.lineJoin="round",n!=null&&n!=="none"&&h>0&&t.strokeText(i,e,r),a!=null&&a!=="none"&&t.fillText(i,e,r)},SE=function(){var o=this.radius,t=this.thickness*this.radius,e=this.radius-t/2,r=this.radius-t,i=this.canvas,s=this.context;if(this.trackColor&&t>0&&(s.save(),Lo(i,s,o,o,e,e,void 0,this.trackColor,t),s.restore()),this.barColor&&e>0){var a,n,h;if(this.value===1)a=!1,n=0,h=2*Math.PI;else{a=this.anticlockwise,n=this.startAngle;var u=2*Math.PI*(a?1-this.value:this.value);h=u+n}s.save(),Lo(i,s,o,o,e,e,void 0,this.barColor,t,n,h,a),s.restore()}if(this.centerColor&&r>0){var l;this.centerColor2?(l=this.context.createRadialGradient(o,o,0,o,o,r),l.addColorStop(0,this.centerColor),l.addColorStop(1,this.centerColor2)):l=this.centerColor,s.save(),Lo(i,s,o,o,r,r,l),s.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(s.save(),TE(i,s,o,o,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),s.restore())};const Js=Phaser.Utils.Objects.GetValue,CE=Phaser.Math.Linear;class Pg extends Ws{constructor(t,e){super(t,e),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var e=this.parent;this.propertyKey=Js(t,"key","value");var r=e[this.propertyKey];return this.fromValue=Js(t,"from",r),this.toValue=Js(t,"to",r),this.setEase(Js(t,"ease",this.ease)),this.setDuration(Js(t,"duration",this.duration)),this.timer.setDuration(this.duration),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,e){var r=e.t;r=this.easeFn(r),t[this.propertyKey]=CE(this.fromValue,this.toValue,r)}}const EE=Phaser.Math.Percent;var PE=function(o){return this.easeValuePropName=o,this},ME=function(o){return this.easeValueDuration=o,this},AE=function(o){return this.easeFunction=o,this},RE=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},OE=function(o,t,e){return o==null?this:(t!==void 0&&(o=EE(o,t,e)),this.easeValueTask===void 0&&(this.easeValueTask=new Pg(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:o,duration:this.easeValueDuration,ease:this.easeFunction}),this)},Wn={setEaseValuePropName:PE,setEaseValueDuration:ME,setEaseValueFunction:AE,stopEaseValue:RE,easeValueTo:OE};const Mt=Phaser.Utils.Objects.GetValue,LE=Phaser.Utils.Objects.IsPlainObject,_f=Phaser.Math.Clamp,FE=Phaser.Math.Linear,td=Phaser.Math.Percent,bE=Phaser.Math.DegToRad(270);class Ml extends Gi{constructor(t,e,r,i,s,a,n){LE(e)&&(n=e,e=Mt(n,"x",0),r=Mt(n,"y",0),i=Mt(n,"radius",1),s=Mt(n,"barColor",void 0),a=Mt(n,"value",0));var h=i*2;super(t,e,r,h,h),this.type="rexCircularProgressCanvas",this.eventEmitter=Mt(n,"eventEmitter",this),this.setRadius(i),this.setTrackColor(Mt(n,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(Mt(n,"centerColor",void 0)),this.setThickness(Mt(n,"thickness",.2)),this.setStartAngle(Mt(n,"startAngle",bE)),this.setAnticlockwise(Mt(n,"anticlockwise",!1)),this.setTextColor(Mt(n,"textColor",void 0)),this.setTextStrokeColor(Mt(n,"textStrokeColor",void 0),Mt(n,"textStrokeThickness",void 0));var u=Mt(n,"textFont",void 0);u?this.setTextFont(u):this.setTextFont(Mt(n,"textSize","16px"),Mt(n,"textFamily","Courier"),Mt(n,"textStyle","")),this.setTextFormatCallback(Mt(n,"textFormatCallback",void 0),Mt(n,"textFormatCallbackScope",void 0));var l=Mt(n,"valuechangeCallback",null);if(l!==null){var f=Mt(n,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",l,f)}this.setEaseValuePropName("value").setEaseValueDuration(Mt(n,"easeValue.duration",0)).setEaseValueFunction(Mt(n,"easeValue.ease","Linear")),this.setValue(a)}resize(t,e){return t=Math.floor(Math.min(t,e)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get value(){return this._value}set value(t){t=_f(t,0,1);var e=this._value,r=e!=t;this.dirty=this.dirty||r,this._value=t,r&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,r){return t==null?this:(e!==void 0&&(t=td(t,e,r)),this.value=t,this)}addValue(t,e,r){return e!==void 0&&(t=td(t,e,r)),this.value+=t,this}getValue(t,e){var r=this.value;return t!==void 0&&(r=FE(t,e,r)),r}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=t*2;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=_f(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,e){return this.centerColor=t,this.centerColor2=e,this}get textColor(){return this._textColor}set textColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,e){return e===void 0&&(e=2),this.textStrokeColor=t,this.textStrokeThickness=e,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,e,r){var i;return e===void 0?i=t:i=r+" "+t+" "+e,this.textFont=i,this}setTextFormatCallback(t,e){return this.textFormatCallback=t,this.textFormatCallbackScope=e,this}updateTexture(){return this.clear(),SE.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var e;return this.textFormatCallbackScope?e=this.textFormatCallback(t):e=this.textFormatCallback.call(this.textFormatCallbackScope,t),e}}Object.assign(Ml.prototype,Wn);it.register("circularProgressCanvas",function(o,t,e,r,i,s){var a=new Ml(this.scene,o,t,e,r,i,s);return this.scene.add.existing(a),a});st(window,"RexPlugins.UI.CircularProgressCanvas",Ml);var DE=function(o,t,e,r){t.updateData(),e.addToRenderList(t);var i=o.pipelines.set(t.pipeline),s=ep(t,e,r),a=i.calcMatrix.copyFrom(s.calc),n=t._displayOriginX,h=t._displayOriginY,u=e.alpha*t.alpha;o.pipelines.preBatch(t);for(var l=t.geom,f=0,c=l.length;f<c;f++)l[f].webglRender(i,a,u,n,h);o.pipelines.postBatch(t)};const wE=Phaser.Renderer.Canvas.SetTransform;var IE=function(o,t,e,r){t.updateData(),e.addToRenderList(t);var i=o.currentContext;if(wE(o,i,t,e,r)){for(var s=t._displayOriginX,a=t._displayOriginY,n=t.geom,h=0,u=n.length;h<u;h++)n[h].canvasRender(i,s,a);i.restore()}},BE={renderWebGL:DE,renderCanvas:IE};const GE=Phaser.GameObjects.Shape,NE=Phaser.Utils.Array.Remove;class Al extends GE{constructor(t,e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=i),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,r),this.setSize(i,s),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,e){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=e,this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}setFillStyle(t,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==e,this.fillColor=t,this.fillAlpha=e,this}setStrokeStyle(t,e,r){return r===void 0&&(r=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==e||this.strokeAlpha!==r,this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=r,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,e=0,r=t.length;e<r;e++){var i=t[e];i.dirty&&i.updateData()}return this.dirty=!1,this.isSizeChanged=!1,this}clear(){return this.geom.length=0,ws(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var e=t.name;return e&&(this.shapes[e]=t),this.dirty=!0,this}deleteShape(t){var e=this.getShape(t);return e&&(delete this.shapes[t],NE(this.geom,e)),this}}Object.assign(Al.prototype,BE);var zE=function(o,t){return o===void 0?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=o,this.fillAlpha=t),this},VE=function(o,t,e){return o===void 0||t===void 0?this.isStroked=!1:(e===void 0&&(e=1),this.isStroked=!0,this.lineWidth=o,this.strokeColor=t,this.strokeAlpha=e),this},YE={fillStyle:zE,lineStyle:VE},WE=function(o,t){return this.data===void 0&&(this.data={}),this.data[o]=t,this},UE=function(o,t){return this.data===void 0&&(this.data={}),this.data.hasOwnProperty(o)||(this.data[o]=t),this.data[o]},XE={setData:WE,getData:UE};class Aa{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle(),this.lineStyle(),this}webglRender(t,e,r,i,s){}canvasRender(t,e,r){}updateData(){}}Object.assign(Aa.prototype,YE,XE);const HE=Phaser.Geom.Polygon.Earcut;class Ra extends Aa{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=HE(this.pathData),this}webglRender(t,e,r,i,s){this.isFilled&&jv(t,e,this,r,i,s),this.isStroked&&Ca(t,this,r,i,s)}canvasRender(t,e,r){var i=this.pathData,s=i.length-1,a=i[0]-e,n=i[1]-r;t.beginPath(),t.moveTo(a,n),this.closePath||(s-=2);for(var h=2;h<s;h+=2){var u=i[h]-e,l=i[h+1]-r;t.lineTo(u,l)}this.closePath&&t.closePath(),this.isFilled&&(Gn(t,this),t.fill()),this.isStroked&&(Nn(t,this),t.stroke())}}const ed=Phaser.Math.DegToRad;class Oa extends Ra{constructor(t,e,r,i,s,a,n,h){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),a===void 0&&(a=360),n===void 0&&(n=!1),h===void 0&&(h=!1),super(),this.setCenterPosition(t,e),this.setRadius(r,i),this.setAngle(s,a,n),this.setPie(h),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,e){return e===void 0&&(e=t),this.x=t,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,e){return e===void 0&&(e=t),this.radiusX=t,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,e,r){return r===void 0&&(r=!1),this.startAngle=t,this.endAngle=e,this.anticlockwise=r,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Ds(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,e,r){t.beginPath();var i=this.x-e,s=this.y-r,a=ed(this.startAngle),n=ed(this.endAngle);this.pie&&(t.moveTo(i,s),t.lineTo(i+Math.cos(a)*this.radiusX,s+Math.sin(a)*this.radiusY)),t.ellipse(i,s,this.radiusX,this.radiusY,0,a,n,this.anticlockwise),this.pie&&t.lineTo(i,s),this.isFilled&&(Gn(t,this),t.fill()),this.isStroked&&(Nn(t,this),t.stroke())}}class Ih extends Oa{constructor(t,e,r){super(t,e,r,r,0,360)}}class $E extends Ra{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),e=0,r=t.length;e<r;e++)this.pathData.push(t[e].x,t[e].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class kE extends Oa{constructor(t,e,r,i){super(t,e,r,i,0,360)}}class KE extends Ra{constructor(t,e,r,i){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),super(),this.setP0(t,e),this.setP1(r,i)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var ZE=function(o,t,e){return e.length=0,e.push(o,t),e};const id=Phaser.Math.Interpolation.QuadraticBezier;var sd=function(o,t,e,r,i,s){for(var a=s.length,n=s[a-2],h=s[a-1],u=1,l=i-1;u<=l;u++){var f=u/l;s.push(id(f,n,o,e),id(f,h,t,r))}return s};const JE=Phaser.Math.RotateAround;var QE=function(o,t,e,r){for(var i={x:0,y:0},s=0,a=r.length-1;s<a;s+=2)i.x=r[s],i.y=r[s+1],JE(i,o,t,e),r[s]=i.x,r[s+1]=i.y;return r},jE=function(o,t,e){for(var r=0,i=e.length-1;r<i;r+=2)e[r]+=o,e[r+1]+=t;return e},qE=function(o,t){t===void 0&&(t=[]);for(var e=0,r=o.length-1;e<r;e+=2)t.push({x:o[e],y:o[e+1]});return t};const _E=Phaser.Geom.Polygon;var tP=function(o,t){return t===void 0&&(t=new _E),t.setTo(o),t};const eP=Phaser.Math.DegToRad;class iP{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(t){return this.iterations=t,this}startAt(t,e){return ZE(t,e,this.pathData),this.lastPointX=t,this.lastPointY=e,this}lineTo(t,e,r){return r===void 0&&(r=!1),r&&(t+=this.lastPointX,e+=this.lastPointY),bs(t,e,this.pathData),this.lastPointX=t,this.lastPointY=e,this}verticalLineTo(t,e){return this.lineTo(t,this.lastPointY,e),this}horizontalLineTo(t,e){return this.lineTo(this.lastPointX,t,e),this}ellipticalArc(t,e,r,i,s,a,n){n===void 0&&(n=!1),Ds(t,e,r,i,s,a,n,this.iterations,this.pathData);var h=this.pathData.length;return this.lastPointX=this.pathData[h-2],this.lastPointY=this.pathData[h-1],this}arc(t,e,r,i,s,a){return this.ellipticalArc(t,e,r,r,i,s,a),this}quadraticBezierTo(t,e,r,i){return sd(t,e,r,i,this.iterations,this.pathData),this.lastPointX=r,this.lastPointY=i,this.lastCX=t,this.lastCY=e,this}smoothQuadraticBezierTo(t,e){var r=this.lastPointX*2-this.lastCX,i=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(r,i,t,e),this}cubicBezierCurveTo(t,e,r,i,s,a){return sd(t,e,r,i,s,a,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=a,this.lastCX=r,this.lastCY=i,this}smoothCubicBezierCurveTo(t,e,r,i){var s=this.lastPointX*2-this.lastCX,a=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(s,a,t,e,r,i),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(t,e,r){if(this.pathData.length===0)return this;r=eP(r),QE(t,e,r,this.pathData);var i=this.pathData.length;if(this.lastPointX=this.pathData[i-2],this.lastPointY=this.pathData[i-1],this.lastCX!==void 0){var s={x:this.lastCX,y:this.lastCY};PointRotateAround(s,t,e,r),this.lastCX=s.x,this.lastCY=s.y}return this}offset(t,e){return jE(t,e,this.pathData),this}toPoints(){return qE(this.pathData)}toPolygon(t){return tP(this.pathData,t)}draw(t,e,r){var i=this.toPoints();return e&&t.fillPoints(i,this.closePath,this.closePath),r&&t.strokePoints(i,this.closePath,this.closePath),this}}class sP extends Ra{constructor(){super(),this.builder=new iP(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}startAt(t,e){return this.builder.startAt(t,e),this.dirty=!0,this}lineTo(t,e,r){return this.builder.lineTo(t,e,r),this.dirty=!0,this}verticalLineTo(t,e){return this.builder.verticalLineTo(t,e),this.dirty=!0,this}horizontalLineTo(t,e){return this.builder.horizontalLineTo(t,e),this.dirty=!0,this}ellipticalArc(t,e,r,i,s,a,n){return this.builder.ellipticalArc(t,e,r,i,s,a,n),this.dirty=!0,this}arc(t,e,r,i,s,a){return this.builder.arc(t,e,r,i,s,a),this.dirty=!0,this}quadraticBezierTo(t,e,r,i){return this.builder.quadraticBezierTo(t,e,r,i),this.dirty=!0,this}smoothQuadraticBezierTo(t,e){return this.builder.smoothQuadraticBezierTo(t,e),this.dirty=!0,this}cubicBezierCurveTo(t,e,r,i,s,a){return this.builder.cubicBezierCurveTo(t,e,r,i,s,a),this.dirty=!0,this}smoothCubicBezierCurveTo(t,e,r,i){return this.builder.smoothCubicBezierCurveTo(t,e,r,i),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,e,r){return this.builder.rotateAround(t,e,r),this.dirty=!0,this}offset(t,e){return this.builder.offset(t,e),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}}Phaser.Math.Distance.Between;Phaser.Math.Linear;const nP=Phaser.Renderer.WebGL.Utils;class rP extends Aa{constructor(t,e,r,i){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=r),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,e),this.setSize(r,i)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,e){return this.width=t,this.height=e,this}updateData(){this.pathData.length=0;var t=this.x,e=t+this.width,r=this.y,i=r+this.height;return this.pathData.push(t,r),this.pathData.push(e,r),this.pathData.push(e,i),this.pathData.push(t,i),this.pathData.push(t,r),this}webglRender(t,e,r,i,s){if(this.isFilled){var a=t.fillTint,n=nP.getTintAppendFloatAlpha(this.fillColor,this.fillAlpha*r);a.TL=n,a.TR=n,a.BL=n,a.BR=n,t.batchFillRect(-i+this.x,-s+this.y,this.width,this.height)}this.isStroked&&Ca(t,this,r,i,s)}canvasRender(t,e,r){this.isFilled&&(Gn(t,this),t.fillRect(-e,-r,this.width,this.height)),this.isStroked&&(Nn(t,this),t.beginPath(),t.rect(-e,-r,this.width,this.height),t.stroke())}}const aP=Phaser.Renderer.WebGL.Utils;class oP extends Aa{constructor(t,e,r,i,s,a){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),a===void 0&&(a=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,e),this.setP1(r,i),this.setP2(s,a)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,e){return this.dirty=this.dirty||this.x2!==t||this.y2!==e,this.x2=t,this.y2=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),this}webglRender(t,e,r,i,s){if(this.isFilled){var a=aP.getTintAppendFloatAlpha(this.fillColor,this.fillAlpha*r),n=this.x0-i,h=this.y0-s,u=this.x1-i,l=this.y1-s,f=this.x2-i,c=this.y2-s,d=e.getX(n,h),v=e.getY(n,h),p=e.getX(u,l),g=e.getY(u,l),m=e.getX(f,c),x=e.getY(f,c);t.batchTri(d,v,p,g,m,x,a,a,a)}this.isStroked&&Ca(t,this,r,i,s)}canvasRender(t,e,r){var i=this.x1-e,s=this.y1-r,a=this.x2-e,n=this.y2-r,h=this.x3-e,u=this.y3-r;t.beginPath(),t.moveTo(i,s),t.lineTo(a,n),t.lineTo(h,u),t.closePath(),this.isFilled&&(Gn(t,this),t.fill()),this.isStroked&&(Nn(t,this),t.stroke())}}const jt=Phaser.Utils.Objects.GetValue,hP=Phaser.Utils.Objects.IsPlainObject,nd=Phaser.Math.Clamp,lP=Phaser.Math.Linear,rd=Phaser.Math.Percent,uP=Phaser.Math.DegToRad(270),fP=Phaser.Math.RadToDeg;class La extends Al{constructor(t,e,r,i,s,a,n){hP(e)&&(n=e,e=jt(n,"x",0),r=jt(n,"y",0),i=jt(n,"radius",1),s=jt(n,"barColor",void 0),a=jt(n,"value",0));var h=i*2;super(t,e,r,h,h),this.type="rexCircularProgress",this.eventEmitter=jt(n,"eventEmitter",this),this.addShape(new Ih().setName("track")).addShape(new Oa().setName("bar")).addShape(new Ih().setName("center")),this.setRadius(i),this.setTrackColor(jt(n,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(jt(n,"centerColor",void 0)),this.setThickness(jt(n,"thickness",.2)),this.setStartAngle(jt(n,"startAngle",uP)),this.setAnticlockwise(jt(n,"anticlockwise",!1));var u=jt(n,"valuechangeCallback",null);if(u!==null){var l=jt(n,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",u,l)}this.setEaseValuePropName("value").setEaseValueDuration(jt(n,"easeValue.duration",0)).setEaseValueFunction(jt(n,"easeValue.ease","Linear")),this.setValue(a)}resize(t,e){return t=Math.floor(Math.min(t,e)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get value(){return this._value}set value(t){t=nd(t,0,1);var e=this._value,r=e!=t;this.dirty=this.dirty||r,this._value=t,r&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,r){return t==null?this:(e!==void 0&&(t=rd(t,e,r)),this.value=t,this)}addValue(t,e,r){return e!==void 0&&(t=rd(t,e,r)),this.value+=t,this}getValue(t,e){var r=this.value;return t!==void 0&&(r=lP(t,e,r)),r}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=t*2;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=nd(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}updateShapes(){var t=this.radius,e=this.thickness*this.radius,r=this.radius-e/2,i=this.radius-e,s=this.getShape("track");this.trackColor!=null&&e>0?s.setCenterPosition(t,t).setRadius(r).lineStyle(e,this.trackColor):s.reset();var a=this.getShape("bar");if(this.barColor!=null&&r>0){var n,h,u;if(this.value===1)n=!1,h=0,u=360;else{n=this.anticlockwise,h=fP(this.startAngle);var l=360*(n?1-this.value:this.value);u=l+h}a.setCenterPosition(t,t).setRadius(r).setAngle(h,u,n).lineStyle(e,this.barColor)}else a.reset();var f=this.getShape("center");this.centerColor&&i>0?f.setCenterPosition(t,t).setRadius(i).fillStyle(this.centerColor):f.reset()}}Object.assign(La.prototype,Wn);it.register("circularProgress",function(o,t,e,r,i,s){var a=new La(this.scene,o,t,e,r,i,s);return this.scene.add.existing(a),a});st(window,"RexPlugins.UI.CircularProgress",La);var Fa=function(o){return o.hasOwnProperty("rexSizer")||(o.rexSizer={}),o.rexSizer},dP=function(o){var t=Fa(o);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},Mg=function(o,t){t===void 0&&(Fo===void 0&&(Fo=new Phaser.Geom.Rectangle),t=Fo);var e=o.game.config;return t.setTo(0,0,e.width,e.height),t},Fo,cP=function(o){return o===void 0&&(o=Mg(this.scene)),this.left=Math.max(this.left,o.left),this.right=Math.min(this.right,o.right),this.top=Math.max(this.top,o.top),this.bottom=Math.min(this.bottom,o.bottom),this};const ae=Phaser.Display.Align;var ba={center:ae.CENTER,left:ae.LEFT_CENTER,right:ae.RIGHT_CENTER,top:ae.TOP_CENTER,bottom:ae.BOTTOM_CENTER,"left-top":ae.TOP_LEFT,"left-center":ae.LEFT_CENTER,"left-bottom":ae.BOTTOM_LEFT,"center-top":ae.TOP_CENTER,"center-center":ae.CENTER,"center-bottom":ae.BOTTOM_CENTER,"right-top":ae.TOP_RIGHT,"right-center":ae.RIGHT_CENTER,"right-bottom":ae.BOTTOM_RIGHT},Bh=new Phaser.GameObjects.Zone({sys:{queueDepthSort:Ae,events:{once:Ae}}},0,0,1,1);Bh.setOrigin(0);var xi={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},Dt=function(o){return o.displayWidth!==void 0?o.displayWidth:o.width},Pt=function(o){return o.displayHeight!==void 0?o.displayHeight:o.height},Rl=function(o){var t=Pt(o);return o.y+t-t*o.originY},Ol=function(o){var t=Dt(o);return o.x-t*o.originX+t*.5},Ll=function(o,t){var e=Pt(o);return o.y=t-e+e*o.originY,o},Fl=function(o,t){var e=Dt(o),r=e*o.originX;return o.x=t+r-e*.5,o},vP=function(o,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Fl(o,Ol(t)+e),Ll(o,Rl(t)+r),o},bl=function(o){var t=Dt(o);return o.x-t*o.originX},Dl=function(o,t){var e=Dt(o);return o.x=t+e*o.originX,o},pP=function(o,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Dl(o,bl(t)-e),Ll(o,Rl(t)+r),o},wl=function(o){var t=Dt(o);return o.x+t-t*o.originX},Il=function(o,t){var e=Dt(o);return o.x=t-e+e*o.originX,o},gP=function(o,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Il(o,wl(t)+e),Ll(o,Rl(t)+r),o},Bl=function(o,t){var e=Pt(o),r=e*o.originY;return o.y=t+r-e*.5,o},mP=function(o,t,e){return Fl(o,t),Bl(o,e)},Gl=function(o){var t=Pt(o);return o.y-t*o.originY+t*.5},xP=function(o,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),mP(o,Ol(t)+e,Gl(t)+r),o},yP=function(o,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Dl(o,bl(t)-e),Bl(o,Gl(t)+r),o},TP=function(o,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Il(o,wl(t)+e),Bl(o,Gl(t)+r),o},Nl=function(o){var t=Pt(o);return o.y-t*o.originY},zl=function(o,t){var e=Pt(o);return o.y=t+e*o.originY,o},SP=function(o,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Fl(o,Ol(t)+e),zl(o,Nl(t)-r),o},CP=function(o,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Dl(o,bl(t)-e),zl(o,Nl(t)-r),o},EP=function(o,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Il(o,wl(t)+e),zl(o,Nl(t)-r),o},_e=[];_e[xi.BOTTOM_CENTER]=vP;_e[xi.BOTTOM_LEFT]=pP;_e[xi.BOTTOM_RIGHT]=gP;_e[xi.CENTER]=xP;_e[xi.LEFT_CENTER]=yP;_e[xi.RIGHT_CENTER]=TP;_e[xi.TOP_CENTER]=SP;_e[xi.TOP_LEFT]=CP;_e[xi.TOP_RIGHT]=EP;var Ag=function(o,t,e,r,i){return _e[e](o,t,r,i)},Da=function(o,t,e,r,i,s){Bh.setPosition(t,e).setSize(r,i),Ag(o,Bh,s)};const Qs=Phaser.Utils.Objects.GetValue,PP=Phaser.GameObjects.Group;var MP=function(o,t){var e=o.scene,r,i,s,a;if(typeof t=="number")r=t;else{r=Qs(t,"color",16777215);var n=Qs(t,"name",!1);n&&(i=Qs(n,"createTextCallback",AP),s=Qs(n,"createTextCallbackScope",void 0),a=Qs(n,"align","left-top"),typeof a=="string"&&(a=ba[a]))}if(i&&!o.children){o.children=new PP(e),o.once("destroy",function(v,p){v.children.destroy(!p),v.children=void 0});var h=o.clear.bind(o);o.clear=function(){h(),o.children.clear(!1,!0)}}for(var u=this.getAllShownChildren([this]),l,f,c=0,d=u.length;c<d;c++)l=u[c],l.getBounds&&(r&&o.lineStyle(1,r).strokeRectShape(l.getBounds(js)),l.name&&i&&(s?f=i.call(s,e):f=i(e),f&&(f.setText(l.name),o.children.add(f),Da(f,js.x,js.y,js.width,js.height,a))));return this},AP=function(o,t,e){return o.add.text(0,0,"")},js=new Phaser.Geom.Rectangle;const gr=Phaser.Utils.Objects.GetValue;var Us=function(o,t){return t===void 0&&(t={}),typeof o=="number"?(t.left=o,t.right=o,t.top=o,t.bottom=o):(t.left=gr(o,"left",0),t.right=gr(o,"right",0),t.top=gr(o,"top",0),t.bottom=gr(o,"bottom",0)),t};const RP=De.prototype.add;var Un=function(o){return RP.call(this,o),this.sizerEventsEnable&&(o.emit("sizer.add",o,this),this.emit("add",o,this)),this},OP={addBackground(o,t,e){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(e=t,t=void 0),t===void 0&&(t=0),Un.call(this,o),this.backgroundChildren.push(o);var r=this.getSizerConfig(o);return r.padding=Us(t),e!==void 0&&this.addChildrenMap(e,o),this},isBackground(o){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(o)!==-1}},LP={removeFromParentSizer(){var o=this.getParentSizer();return o&&o.remove(this),this}},ad=function(o,t){return this.childrenMap===void 0&&(this.childrenMap={}),this.childrenMap[o]=t,this},FP=function(o,t){if(typeof o=="string"&&(o=o.split(".")),o.length!==0){var e=o.shift(),r=null;if(e.charAt(0)==="#")e=e.substring(1),r=this.getByName(e,t);else if(e.indexOf("[")===-1)this.childrenMap&&(r=this.childrenMap[e]);else{var i=e.match(bP);if(i!=null&&this.childrenMap){var s=this.childrenMap[i[1]];s&&(r=s[i[2]])}}return o.length===0?r:r&&r.childrenMap?r.getElement(o):null}};const bP=/(\S+)\[(\d+)\]/i;var DP={getInnerPadding(o){return Zr(this.space,o)},setInnerPadding(o,t){return Jr(this.space,o,t),this},getOuterPadding(o){return Zr(this.getSizerConfig(this).padding,o)},setOuterPadding(o,t){return Jr(this.getSizerConfig(this).padding,o,t),this},getChildOuterPadding(o,t){return typeof o=="string"&&(o=this.getElement(o)),Zr(this.getSizerConfig(o).padding,t)},setChildOuterPadding(o,t,e){return typeof o=="string"&&(o=this.getElement(o)),Jr(this.getSizerConfig(o).padding,t,e),this}},Vl=function(o){return o===void 0&&(o=Math.max(this.childrenWidth,this.minWidth)),o},wP=function(o){var t,e;for(var r in this.sizerChildren)t=this.sizerChildren[r],t&&t.isRexSizer&&!t.ignoreLayout&&(e=this.getExpandedChildWidth(t,o),e=t.resolveWidth(e),t.resolveChildrenWidth(e))},Yl=function(o){var t=Math.max(this.childrenHeight,this.minHeight);return o===void 0&&(o=t),o},IP=function(o){var t;return o.isRexSizer?t=Math.max(o.minWidth,o.childrenWidth):o.minWidth!==void 0?t=o.minWidth:t=Dt(o),t},BP=function(o){var t;return o.isRexSizer?t=Math.max(o.minHeight,o.childrenHeight):o.minHeight!==void 0?t=o.minHeight:t=Pt(o),t},GP=function(o,t){return t},NP=function(o,t){return t},zP=function(){return 0},VP=function(){return 0},YP=function(o){o===void 0&&(o=[]);for(var t=o.length,e=this.getChildrenSizers(o),r=o.length,i=t;i<r;i++)e[i].getAllChildrenSizers(o);return o},WP=function(o){return o===void 0&&(o=[]),o},UP={getShownChildren(o){o===void 0&&(o=[]);for(var t=this.children,e,r=0,i=t.length;r<i;r++)e=t[r],!(e.rexSizer&&e.rexSizer.hidden)&&o.push(e);return o},getAllShownChildren(o){o===void 0&&(o=[]);for(var t=this.children,e,r=0,i=t.length;r<i;r++)e=t[r],!(e.rexSizer&&e.rexSizer.hidden)&&(o.push(e),e.hasOwnProperty("isRexContainerLite")&&o.push(...e.getAllShownChildren()));return o}},Xn=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var o=this.getChildrenSizers(),t,e=0,r=o.length;e<r;e++)t=o[e],!t.ignoreLayout&&t.preLayout()},XP=function(){return this.runLayout(),this},HP=function(o,t,e){if(this.ignoreLayout)return this;var r=!o;return r&&this.preLayout(),t=this.resolveWidth(t),r&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),e=this.resolveHeight(e),this.resize(t,e),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},$P=function(){},kP=function(o,t,e){return this._anchor&&this._anchor.updatePosition(),this},Rg=function(o){var t,e;for(var r in this.sizerChildren)t=this.sizerChildren[r],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(e=this.getExpandedChildWidth(t,o),t.isRexSizer&&(e=t.resolveWidth(e)),t.runWidthWrap(e));return this};const Og=Phaser.Geom.Rectangle;Phaser.Scale.Center;var Lg=function(o,t){t===void 0?t=new Og:t===!0&&(t=KP);var e=o.scale,r=e.baseSize,i=e.parentSize,s=e.canvasBounds,a=e.displayScale,n=s.x>=0?0:-(s.x*a.x),h=s.y>=0?0:-(s.y*a.y),u;i.width>=s.width?u=r.width:u=r.width-(s.width-i.width)*a.x;var l;return i.height>=s.height?l=r.height:l=r.height-(s.height-i.height)*a.y,t.setTo(n,h,u,l),t},KP=new Og;class Wl extends ee{constructor(t,e){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){t===void 0&&(t={});var e,r;t.x!==void 0?(e=null,r=t.x):t.left!==void 0?(e=0,r=t.left):t.right!==void 0?(e=1,r=t.right):t.centerX!==void 0&&(e=.5,r=t.centerX);var i,s;t.y!==void 0?(i=null,s=t.y):t.top!==void 0?(i=0,s=t.top):t.bottom!==void 0?(i=1,s=t.bottom):t.centerY!==void 0&&(i=.5,s=t.centerY);var a,n;r!==void 0&&(r=r.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),a=parseFloat(r[0])/100,n=r[1]===""?0:parseFloat(r[1]));var h,u;s!==void 0&&(s=s.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),h=parseFloat(s[0])/100,u=s[1]===""?0:parseFloat(s[1]));var l=t.width,f,c;l!==void 0&&(l=l.split("%"),f=parseFloat(l[0])/100,c=l[1]===""?0:parseFloat(l[1]));var d=t.height,v,p;d!==void 0&&(d=d.split("%"),v=parseFloat(d[0])/100,p=d[1]===""?0:parseFloat(d[1])),this.setAlign(e,i),this.setPercentage(a,h),this.setOffset(n,u),this.setSizePercentage(f,v),this.setSizePadding(c,p);var g=t.onResizeCallback,m=t.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,m);var x=t.onUpdateViewportCallback,y=t.onUpdateViewportCallbackScope;return x!==void 0&&this.setUpdateViewportCallback(x,y),this}boot(){this.scene.scale.on("resize",this.anchor,this),this.anchor()}shutdown(t){this.isShutdown||(this.scene.scale.off("resize",this.anchor,this),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}setAlign(t,e){return this.alignX=t,this.alignY=e,this}setPercentage(t,e){return this.percentageX=t,this.percentageY=e,this}setOffset(t,e){return this.offsetX=t,this.offsetY=e,this}setSizePercentage(t,e){return this.percentageWidth=t,this.percentageHeight=e,this}setSizePadding(t,e){return this.paddingWidth=t,this.paddingHeight=e,this}setResizeCallback(t,e){return this.onResizeCallback=t,this.onResizeCallbackScope=e,this}setUpdateViewportCallback(t,e){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=e,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,e=this.onResizeCallbackScope,r=this.anchorWidth,i=this.anchorHeight;if(!(r===void 0&&i===void 0||!t)){var s=this.parent;r===void 0&&(r=s.width),i===void 0&&(i=s.height),e?t.call(e,r,i,s,this):t(r,i,s,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){this.viewport=Lg(this.scene,this.viewport?this.viewport:!0);var t=this.onUpdateViewportCallback,e=this.onUpdateViewportCallbackScope;t&&(e?t.call(e,this.viewport,this.parent,this):t(this.viewport,this.parent,this))}}var ZP=function(o){o===void 0&&(o={});var t=o.hasOwnProperty("width"),e=o.hasOwnProperty("height"),r=o.hasOwnProperty("onResizeCallback");return(t||e)&&!r&&(o.onResizeCallback=function(i,s,a){t&&a.setMinWidth(i),e&&a.setMinHeight(s),a.layout()}),this._anchor===void 0?this._anchor=new Wl(this,o):this._anchor.resetFromJSON(o),this};const JP=Phaser.Utils.Objects.GetValue,ms=Phaser.Utils.Objects.GetAdvancedValue,od=Phaser.Math.Linear;class Gh extends Ws{constructor(t,e){super(t,e),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(JP(t,"mode",0)),this.setScaleRange(ms(t,"start",void 0),ms(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=QP[t]),this.mode=t,this}setScaleRange(t,e){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=ms(t,"x",this.parent.scaleX),this.startY=ms(t,"y",this.parent.scaleY)),typeof e=="number"?(this.endX=e,this.endY=e):(this.endX=ms(e,"x",void 0),this.endY=ms(e,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,e){var r=e.t;e.isOddIteration&&(r=1-r),r=this.easeFn(r),this.hasScaleX&&(t.scaleX=od(this.startX,this.endX,r)),this.hasScaleY&&(t.scaleY=od(this.startY,this.endY,r))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const QP={stop:0,destroy:1,yoyo:2};var Fg=function(o,t,e,r,i){var s,a;switch(e){case 0:case"x":s={x:0},a={x:o.scaleX};break;case 1:case"y":s={y:0},a={y:o.scaleY};break;default:s=0,a=o.scale;break}var n={mode:0,start:s,end:a,duration:t,ease:r===void 0?"Cubic":r};return i===void 0?i=new Gh(o,n):i.resetFromJSON(n),i.restart(),i},bg=function(o,t,e,r,i,s){i instanceof Gh&&(s=i,i=void 0),i===void 0&&(i=!0);var a={};switch(a.mode=i?1:0,e){case 0:case"x":a.end={x:0};break;case 1:case"y":a.end={y:0};break;default:a.end=0;break}return a.duration=t,a.ease=r===void 0?"Linear":r,s===void 0?s=new Gh(o,a):s.resetFromJSON(a),s.restart(),s};const hd=Phaser.Utils.Objects.IsPlainObject;var ld=function(o,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(o.emit(t.completeEventName,o),t.completeEventName=void 0)}),t.on("update",function(){var e=o.getParentSizer();e&&e.resetChildPositionState(o)})},jP={popUp(o,t,e){if(hd(o)){var r=o;o=r.duration,t=r.orientation,e=r.ease}var i=this._scale===void 0;return this._scale=Fg(this,o,t,e,this._scale),i&&ld(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(o,t,e){return this.popUp(o,t,e),Zt(this._scale)},scaleDownDestroy(o,t,e,r){if(hd(o)){var i=o;o=i.duration,t=i.orientation,e=i.ease,r=i.destroy}var s=this._scale===void 0;return this._scale=bg(this,o,t,e,r,this._scale),s&&ld(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(o,t,e,r){return this.scaleDownDestroy(o,t,e,r),Zt(this._scale)},scaleDown(o,t,e){return this.scaleDownDestroy(o,t,e,!1),this},scaleDownPromise(o,t,e){return this.scaleDown(o,t,e),Zt(this._scale)}};const qP=Phaser.Utils.Objects.GetValue,ud=Phaser.Utils.Objects.GetAdvancedValue,_P=Phaser.Math.Linear;class Nh extends Ws{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(qP(t,"mode",0)),this.setAlphaRange(ud(t,"start",this.parent.alpha),ud(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=tM[t]),this.mode=t,this}setAlphaRange(t,e){return this.alphaStart=t,this.alphaEnd=e,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,e){var r=e.t;e.isOddIteration&&(r=1-r),t.alpha=_P(this.alphaStart,this.alphaEnd,r)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const tM={stop:0,destroy:1,yoyo:2},eM=Phaser.Utils.Objects.IsPlainObject;var wa=function(o,t,e,r){var i,s;eM(e)?(i=e.start,s=e.end):s=e,i===void 0&&(i=0),s===void 0&&(s=1);var a={mode:0,start:i,end:s,duration:t};return r===void 0?r=new Nh(o,a):r.resetFromJSON(a),r.restart(),r},Ia=function(o,t,e,r){e instanceof Nh&&(r=e,e=void 0),e===void 0&&(e=!0);var i={mode:e?1:0,end:0,duration:t};return r===void 0?r=new Nh(o,i):r.resetFromJSON(i),r.restart(),r};const fd=Phaser.Utils.Objects.IsPlainObject;var dd=function(o,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(o.emit(t.completeEventName,o),t.completeEventName=void 0)}),t.on("update",function(){var e=o.getParentSizer();e&&e.resetChildAlphaState(o)})},iM={fadeIn(o,t){if(fd(o)){var e=o;o=e.duration,t=e.alpha}var r=this._fade===void 0;return this._fade=wa(this,o,t,this._fade),r&&dd(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(o,t){return this.fadeIn(o,t),Zt(this._fade)},fadeOutDestroy(o,t){if(fd(o)){var e=o;o=e.duration,t=e.destroy}var r=this._fade===void 0;return this._fade=Ia(this,o,t,this._fade),r&&dd(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(o,t){return this.fadeOutDestroy(o,t),Zt(this._fade)},fadeOut(o){return this.fadeOutDestroy(o,!1),this},fadeOutPromise(o){return this.fadeOut(o),Zt(this._fade)}};const sM=Phaser.Utils.Objects.GetValue,xs=Phaser.Utils.Objects.GetAdvancedValue,cd=Phaser.Math.Linear;class na extends Ws{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(sM(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var e=xs(t,"x",void 0),r=xs(t,"y",void 0);this.setTargetPosition(e,r)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=nM[t]),this.mode=t,this}setTargetPosition(t,e){if(typeof t=="number"||typeof e=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=e;else{var r=t;this.startX=xs(r,"startX",void 0),this.startY=xs(r,"startY",void 0),this.endX=xs(r,"endX",void 0),this.endY=xs(r,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,e){var r=e.t;e.isOddIteration&&(r=1-r),r=this.easeFn(r),this.hasMoveX&&(t.x=cd(this.startX,this.endX,r)),this.hasMoveY&&(t.y=cd(this.startY,this.endY,r))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const nM={stop:0,destroy:1,yoyo:2};var ra=function(o,t){if(typeof o=="number")return o;var e=o[0],r=parseFloat(o.substr(2));switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r}},Dg=function(o,t,e,r,i,s,a){s instanceof na&&(a=s,s=void 0),s===void 0&&(s=!1);var n={};return n.mode=s?1:0,e!==void 0&&(n.startX=o.x,n.endX=ra(e,o.x)),r!==void 0&&(n.startY=o.y,n.endY=ra(r,o.y)),n.duration=t,n.ease=i===void 0?"Linear":i,a===void 0?a=new na(o,n):a.resetFromJSON(n),a.restart(),a},wg=function(o,t,e,r,i,s,a){s instanceof na&&(a=s,s=void 0),s===void 0&&(s=!1);var n={};return n.mode=s?1:0,e!==void 0&&(n.startX=ra(e,o.x),n.endX=o.x),r!==void 0&&(n.startY=ra(r,o.y),n.endY=o.y),n.duration=t,n.ease=i===void 0?"Linear":i,a===void 0?a=new na(o,n):a.resetFromJSON(n),a.restart(),a};const vd=Phaser.Utils.Objects.IsPlainObject,pd=Phaser.Math.Distance.Between;var gd=function(o,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(o.emit(t.completeEventName,o),t.completeEventName=void 0)}),t.on("update",function(){var e=o.getParentSizer();e&&e.resetChildPositionState(o)})},rM={moveFrom(o,t,e,r,i){if(vd(o)){var s=o;t=s.x,e=s.y,s.hasOwnProperty("speed")?o=pd(t,e,this.x,this.y)*1e3/s.speed:o=s.duration,r=s.ease}var a=this._easeMove===void 0;return this._easeMove=wg(this,o,t,e,r,i,this._easeMove),a&&gd(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(o,t,e,r,i){return this.moveFrom(o,t,e,r,i),Zt(this._easeMove)},moveFromDestroy(o,t,e,r){return this.moveFrom(o,t,e,r,!0),this},moveFromDestroyPromise(o,t,e,r){return this.moveFromDestroy(o,t,e,r),Zt(this._easeMove)},moveTo(o,t,e,r,i){if(vd(o)){var s=o;t=s.x,e=s.y,s.hasOwnProperty("speed")?o=pd(t,e,this.x,this.y)*1e3/s.speed:o=s.duration,r=s.ease}var a=this._easeMove===void 0;return this._easeMove=Dg(this,o,t,e,r,i,this._easeMove),a&&gd(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(o,t,e,r,i){return this.moveTo(o,t,e,r,i),Zt(this._easeMove)},moveToDestroy(o,t,e,r){return this.moveTo(o,t,e,r,!0),this},moveToDestroyPromise(o,t,e,r){return this.moveToDestroy(o,t,e,r,!0),Zt(this._easeMove)}};const we=Phaser.Utils.Objects.GetValue;class Ul extends Ma{constructor(t,e){super(t,e),this.timer=new Sg,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(we(t,"timer")),this.setEnable(we(t,"enable",!0)),this.setMode(we(t,"mode",1)),this.isRunning=we(t,"isRunning",!1),this.setMagnitudeMode(we(t,"magnitudeMode",1)),this.setDuration(we(t,"duration",500)),this.setMagnitude(we(t,"magnitude",10)),this.ox=we(t,"ox",void 0),this.oy=we(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=aM[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=oM[t]),this.magnitudeMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,e){if(typeof t!="number"){var r=t;e=we(r,"magnitude",void 0),t=we(r,"duration",void 0)}return e!==void 0&&this.setMagnitude(e),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,e){return this.start(t,e),this}update(t,e){if(!this.isRunning||!this.enable)return this;var r=this.parent;if(!r.active)return this;if(this.timer.update(t,e),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=r.x,this.oy=r.y);var i=this.magnitude;this.magnitudeMode===1&&(i*=1-this.timer.t);var s=Math.random()*Math.PI*2,a=Math.cos(s)*i,n=Math.sin(s)*i;r.setPosition(this.ox+a,this.oy+n)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;return this.ox===t.x&&this.oy===t.y?this:(t.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0,this)}}const aM={effect:0,behavior:1},oM={constant:0,decay:1},hM=Phaser.Utils.Objects.IsPlainObject;var lM=function(o,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(o.emit(t.completeEventName,o),t.completeEventName=void 0)})},uM={shake(o,t,e){if(hM(o)){var r=o;o=r.duration,t=r.magnitude,e=r.magnitudeMode}return this._shake===void 0&&(this._shake=new Ul(this,{mode:0,magnitudeMode:1}),lM(this,this._shake)),this._shake.completeEventName="shake.complete",o!==void 0&&this._shake.setDuration(o),t!==void 0&&this._shake.setMagnitude(t),e!==void 0&&this._shake.setMagnitudeMode(e),this._shake.shake(),this},shakePromise(o,t){return this.shake(o,t),Zt(this._shake)}},Fi=function(o){Ig(o,!1)},bi=function(o){Ig(o,!0)},Xl=function(o){if(!o)return!1;var t=Fa(o);return!t.hidden},Ig=function(o,t){if(!!o){var e=Fa(o);e.hidden=t,o.rexContainer.parent.setChildVisible(o,!t)}},fM={show(o){return o===void 0&&(o=this),Fi(o),this},hide(o){return o===void 0&&(o=this),bi(o),this},isShow(o){return o===void 0&&(o=this),Xl(o)}},zh=function(o,t,e,r,i){return!(!o||!o.getBounds||r&&!r(o,t,e)||(bo=o.getBounds(bo),!bo.contains(t,e))||i&&!i(o,t,e))},bo=void 0,Bg=function(o,t,e,r){if(t)return zh(o,t.x,t.y,e,r);for(var i=o.scene.input.manager,s=i.pointersTotal,a=i.pointers,n=0;n<s;n++)if(t=a[n],zh(o,t.x,t.y,e,r))return!0;return!1},dM=function(o,t){return t===void 0&&(t=this),Bg(t,o)},Ba=function(o){return o&&typeof o=="function"},Vh=function(o,t,e,r,i){return zh(o,t,e,cM(r),vM(i))},md=function(o){var t=o.rexSizer&&o.rexSizer.hidden;return!t},cM=function(o){return o?function(t,e,r){return md(t)?(o(t,e,r),!0):!1}:md},vM=function(o){return o},pM=function(o,t,e,r,i){if(Ba(e)||(i=e,e=void 0,r=void 0),i===void 0&&(this.sizerChildren?i=this.sizerChildren:i=this.children),Fe(i)){for(var s,a=0,n=i.length;a<n;a++)if(s=i[a],Vh(s,o,t,e,r))return s}else{var s;for(var h in i)if(s=i[h],Vh(s,o,t,e,r))return s}return null},gM={getParentSizer(o){return this.getParent(o)},getTopmostSizer(o){return this.getTopmostParent(o)}},wi=function(o,t,e){!o||t===void 0&&e===void 0||(o.resize?(t===void 0&&(t=o.width),e===void 0&&(e=o.height),o.resize(t,e)):(t!==void 0&&(o.displayWidth=t),e!==void 0&&(o.displayHeight=e)))},mM=function(o,t){return t===void 0?t={}:t===!0&&(t=xM),t.x=o.x,t.y=o.y,t.scaleX=o.scaleX,t.scaleY=o.scaleY,t.width=o.width,t.height=o.height,t.displayWidth=o.displayWidth,t.displayHeight=o.displayHeight,t},xM={},Hn=function(o){this.sizerEventsEnable&&(mM(o,this.getChildPrevState(o)),this.layoutedChildren.push(o))},$n=function(o,t,e,r,i,s,a,n){Da(o,t,e,r,i,s),a!==void 0&&(o.x+=a),n!==void 0&&(o.y+=n),this.resetChildPositionState(o),this.sizerEventsEnable&&o.emit("sizer.postlayout",o,this)};const yM=Phaser.Display.Align.CENTER;var TM=function(){if(this.backgroundChildren!==void 0)for(var o=this.backgroundChildren,t=this.left,e=this.top,r=this.width,i=this.height,s,a,n,h,u,l,f,c=0,d=o.length;c<d;c++)s=o[c],a=s.rexSizer,!a.hidden&&(n=a.padding,Hn.call(this,s),h=t+n.left,u=e+n.top,l=r-n.left-n.right,f=i-n.top-n.bottom,wi(s,l,f),$n.call(this,s,h,u,l,f,yM))},SM=function(o,t){var e=typeof o;return e==="string"?o=this.getElement(o):(o===void 0||e!="object")&&(t=o,o=this),t===void 0&&(t=!0),o.input&&o.input.hasOwnProperty("draggable")?o.input.draggable=t:t&&(o.setInteractive(),o.scene.input.setDraggable(o),o.on("drag",function(r,i,s){var a=this.getTopmostSizer();a.x+=i-o.x,a.y+=s-o.y},this)),this};const qs=Phaser.Utils.Objects.GetValue;class Xs extends ee{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(qs(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(qs(t,"enable",!0)),this.setMode(qs(t,"mode",1)),this.setClickInterval(qs(t,"clickInterval",100)),this.setDragThreshold(qs(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointeroutr",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var e=t?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=CM[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,e,r,i){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,i))}onRelease(t,e,r,i){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,i),this.pointer=void 0)}onPointOut(t,e){this.pointer===t&&this.cancel()}onMove(t,e,r,i){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,e,r){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,e,r),this;this.pointer=void 0;var i=this.lastClickTime;return i!==void 0&&t-i<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,e,r),this)}cancel(){return this.pointer=void 0,this}onOver(t,e,r,i){return this.enable?(this.emit("over",this,this.parent,t,i),this):this}onOut(t,e){return this.enable?(this.emit("out",this,this.parent,t,e),this):this}}const CM={press:0,pointerdown:0,release:1,pointerup:1};var EM={onClick(o,t,e){return o?(this._click===void 0&&(this._click=new Xs(this,e)),this._click.on("click",o,t),this):this},offClick(o,t){return this._click===void 0?this:(this._click.off("click",o,t),this)},enableClick(o){return this._click===void 0?this:(this._click.setEnable(o),this)},disableClick(){return this._click===void 0?this:(this._click.setEnable(!1),this)}};class ti{constructor(t){var e=Kt(t,"states",void 0);e&&this.addStates(e);var r=Kt(t,"extend",void 0);if(r)for(var i in r)(!this.hasOwnProperty(i)||this[i]===void 0)&&(this[i]=r[i]);var s=Kt(t,"eventEmitter",void 0),a=Kt(t,"EventEmitterClass",void 0);this.setEventEmitter(s,a),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(Kt(t,"enable",!0)),this.start(Kt(t,"start",void 0));var e=Kt(t,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}runMethod(t,e,r,i,s,a){var n=this[t+"_"+this.state];if(!!n){var h=arguments.length;switch(h){case 1:return n.call(this);case 2:return n.call(this,e);case 3:return n.call(this,e,r);case 4:return n.call(this,e,r,i);case 5:return n.call(this,e,r,i,s);case 6:return n.call(this,e,r,i,s,a)}for(var u=new Array(h-1),l=1;l<h;l++)u[l-1]=arguments[l];return n.apply(this,u)}}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var e="exit_"+this._prevState,r=this[e];r&&r.call(this),this.emit(e,this)}if(this._stateLock=!1,this._state!=null){var i="enter_"+this._state,s=this[i];s&&s.call(this),this.emit(i,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,e=this["next_"+this.state];return e&&(typeof e=="string"?t=e:t=e.call(this)),this.goto(t),this}addState(t,e){var r=Kt(e,"next",void 0);r&&(this["next_"+t]=r);var i=Kt(e,"exit",void 0);i&&(this["exit_"+t]=i);var s=Kt(e,"enter",void 0);return s&&(this["enter_"+t]=s),this}addStates(t){for(var e in t)this.addState(e,t[e]);return this}update(t,e){this.runMethod("update",t,e)}preupdate(t,e){this.runMethod("preupdate",t,e)}postupdate(t,e){this.runMethod("postupdate",t,e)}}Object.assign(ti.prototype,Ys);class PM extends ti{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,e){this.remainderTime-=e,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>e?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const Do=Phaser.Utils.Objects.GetValue;class Yh extends ee{constructor(t,e){super(t,e),this._enable=void 0,this.cooldown=new PM,this.parent.setInteractive(Do(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.setEnable(Do(t,"enable",!0)),this.setCooldown(Do(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,e,r){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouched=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouched=!1)}preupdate(t,e){this.cooldown.update(t,e),this.isInTouched&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}}var MM={onTouching(o,t,e){return o?(this._inTouching===void 0&&(this._inTouching=new Yh(this,e)),this._inTouching.on("intouch",o,t),this):this},offTouching(o,t){return this._click===void 0?this:(this._inTouching.off("intouch",o,t),this)}},Gg=function(o,t,e){for(var r,i=0,s=o.length;i<s;i++)if(r=o[i],!!Vh(r,t,e))return r.pointToChild(t,e);return null},Ii=function(o,t,e,r,i,s,a){var n;i===void 0?n=r:n=Gg(e,r,i),n&&o.emit(t,n,s,a)};const AM=Phaser.Utils.Objects.GetValue;var RM=function(o){var t=AM(o,"click",void 0);if(t!==!1){t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var e=this._childrenInteractive;this._click=new Xs(this,t),this._click.on("click",function(r,i,s,a){Ii(e.eventEmitter,`${e.eventNamePrefix}click`,e.targetSizers,s.worldX,s.worldY,s,a)},this)}};const OM=Phaser.Utils.Objects.GetValue;var LM=function(o){var t=OM(o,"over",void 0);t!==!1&&this.on("pointermove",xd,this).on("pointerover",xd,this).on("pointerout",FM,this)},xd=function(o,t,e,r){var i=this._childrenInteractive,s=Gg(i.targetSizers,o.worldX,o.worldY),a=i.lastOverChild;s&&a&&s===a||(i.lastOverChild=s,Ii(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,a,void 0,o,r),Ii(i.eventEmitter,`${i.eventNamePrefix}over`,i.targetSizers,s,void 0,o,r))},FM=function(o,t){var e=this._childrenInteractive,r=e.lastOverChild;e.lastOverChild=null,Ii(e.eventEmitter,`${e.eventNamePrefix}out`,e.targetSizers,r,void 0,o,t)};const wo=Phaser.Utils.Objects.GetValue;class Ga extends Ma{constructor(t,e){var r=xg(t);r===t&&(t=void 0),super(r,e),this.gameObject=t,t&&t.setInteractive(wo(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(wo(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(wo(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Io,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.events.once("shutdown",this.destroy,this)}shutdown(t){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,e){if(!!this.enable&&this.pointer===void 0){var r=this.bounds?this.bounds.contains(t.x,t.y):!0;!r||this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=yd,this.gameObject===void 0&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}}onPointerUp(t){if(!!this.enable){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;!e||this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=Io,this.onDragEnd())}}onPointerMove(t){if(!!this.enable&&t.isDown){var e=this.bounds?this.bounds.contains(t.x,t.y):!0,r=this.pointer===t;!r&&e||(r&&!e?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===yd&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Io,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,e){}postUpdate(t,e){}startTicking(){super.startTicking(),this.scene.events.on("preupdate",this.preUpdate,this),this.scene.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.events.off("preupdate",this.preUpdate,this),this.scene.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=bM,this}}const Io=0,yd=1,bM="IDLE",Ki=Phaser.Utils.Objects.GetValue,DM=Phaser.Math.Distance.Between;class Na extends Ga{constructor(t,e){super(t,e);var r=this,i={states:{IDLE:{enter:function(){r.stop(),r.tapsCount=0,r.x=0,r.y=0,r.worldX=0,r.worldY=0},exit:function(){var s=r.lastPointer;r.x=s.x,r.y=s.y,r.worldX=s.worldX,r.worldY=s.worldY}},BEGIN:{enter:function(){r.start(),r.tapsCount=0,r.emit("tappingstart",r,r.gameObject,r.lastPointer)}},RECOGNIZED:{enter:function(){r.start(),r.emit("tap",r,r.gameObject,r.lastPointer),r.emit(`${r.tapsCount}tap`,r,r.gameObject,r.lastPointer)}}},init:function(){this.state=Zi},eventEmitter:!1};this.setRecongizedStateObject(new ti(i))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(Ki(t,"time",250)),this.setTapInterval(Ki(t,"tapInterval",200)),this.setDragThreshold(Ki(t,"threshold",9)),this.setTapOffset(Ki(t,"tapOffset",10));var e=Ki(t,"taps",void 0);return e!==void 0?this.setTaps(e):(this.setMaxTaps(Ki(t,"maxTaps",void 0)),this.setMinTaps(Ki(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Zi:this.state=ys;break;case ys:var t=this.lastPointer,e=DM(t.upX,t.upY,t.x,t.y);e>this.tapOffset&&(this.state=Ts,this.state=ys);break;case Ts:this.state=ys;break}}onDragEnd(){this.state===ys&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Ts))}onDrag(){this.state!==Zi&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Zi)}preUpdate(t,e){if(!(!this.isRunning||!this.enable)&&this.state===ys){var r=this.lastPointer;if(r.isDown){var i=t-r.downTime;i>this.holdTime&&(this.state=Zi)}else{var s=t-r.upTime;s>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Ts:this.state=Zi)}}}postUpdate(t,e){!this.isRunning||!this.enable||this.state===Ts&&(this.state=Zi)}get isTapped(){return this.state===Ts}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,e){return e===void 0&&(e=t),this.setMinTaps(t).setMaxTaps(e),this}}const Zi="IDLE",ys="BEGIN",Ts="RECOGNIZED",Td=Phaser.Utils.Objects.GetValue;class za extends Ga{constructor(t,e){super(t,e);var r=this,i={states:{IDLE:{enter:function(){r.x=0,r.y=0,r.worldX=0,r.worldY=0},exit:function(){var s=r.lastPointer;r.x=s.x,r.y=s.y,r.worldX=s.worldX,r.worldY=s.worldY}},BEGIN:{enter:function(){r.start()},exit:function(){r.stop()}},RECOGNIZED:{enter:function(){r.emit("pressstart",r,r.gameObject,r.lastPointer)},exit:function(){r.emit("pressend",r,r.gameObject,r.lastPointer)}}},init:function(){this.state=mr},eventEmitter:!1};this.setRecongizedStateObject(new ti(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Td(t,"threshold",9)),this.setHoldTime(Td(t,"time",251)),this}onDragStart(){this.state=Sd,this.holdTime===0&&(this.state=Bo)}onDragEnd(){this.state=mr}onDrag(){this.state!==mr&&this.pointer.getDistance()>this.dragThreshold&&(this.state=mr)}preUpdate(t,e){if(!(!this.isRunning||!this.enable)&&this.state===Sd){var r=t-this.pointer.downTime;r>=this.holdTime&&(this.state=Bo)}}get isPressed(){return this.state===Bo}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const mr="IDLE",Sd="BEGIN",Bo="RECOGNIZED",wM=Phaser.Utils.Objects.GetValue;class Ng extends Ga{constructor(t,e){super(t,e);var r=this,i={states:{IDLE:{},BEGIN:{enter:function(){var s=r.pointer;r.startX=s.x,r.startY=s.y,r.startWorldX=s.worldX,r.startWorldY=s.worldY}},RECOGNIZED:{enter:function(){r.emit("panstart",r,r.gameObject,r.lastPointer)},exit:function(){var s=r.lastPointer;r.endX=s.x,r.endY=s.y,r.endWorldX=s.worldX,r.endWorldY=s.worldY,r.emit("panend",r,r.gameObject,r.lastPointer)}}},init:function(){this.state=Cd},eventEmitter:!1};this.setRecongizedStateObject(new ti(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(wM(t,"threshold",10)),this}onDragStart(){this.state=Ed,this.dragThreshold===0&&(this.state=xr)}onDragEnd(){this.state=Cd}onDrag(){switch(this.state){case Ed:this.pointer.getDistance()>=this.dragThreshold&&(this.state=xr);break;case xr:var t=this.pointer.position,e=this.pointer.prevPosition;this.dx=t.x-e.x,this.dy=t.y-e.y;var r=this.pointer;this.x=r.x,this.y=r.y,this.worldX=r.worldX,this.worldY=r.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===xr}setDragThreshold(t){return this.dragThreshold=t,this}}const Cd="IDLE",Ed="BEGIN",xr="RECOGNIZED",IM=Phaser.Math.Distance.Between,BM=Phaser.Math.Angle.Between;var GM={getDt:function(){var o=this.scene.sys.game,t=o.loop.delta;return t},getVelocity:function(){var o=this.pointer.position,t=this.pointer.prevPosition,e=IM(t.x,t.y,o.x,o.y),r=e/(this.getDt()*.001);return r},getVelocityX:function(){var o=this.pointer.position,t=this.pointer.prevPosition,e=Math.abs(o.x-t.x),r=e/(this.getDt()*.001);return r},getVelocityY:function(){var o=this.pointer.position,t=this.pointer.prevPosition,e=Math.abs(o.y-t.y),r=e/(this.getDt()*.001);return r},getVelocityAngle:function(){var o=this.pointer.position,t=this.pointer.prevPosition,e=BM(t.x,t.y,o.x,o.y);return e}},NM={"up&down":0,"left&right":1,"4dir":2,"8dir":3},zM=function(o,t,e){switch(e===void 0?e={}:e===!0&&(e=VM),e.left=!1,e.right=!1,e.up=!1,e.down=!1,o=(o+360)%360,t){case 0:o<180?e.down=!0:e.up=!0;break;case 1:o>90&&o<=270?e.left=!0:e.right=!0;break;case 2:o>45&&o<=135?e.down=!0:o>135&&o<=225?e.left=!0:o>225&&o<=315?e.up=!0:e.right=!0;break;case 3:o>22.5&&o<=67.5?(e.down=!0,e.right=!0):o>67.5&&o<=112.5?e.down=!0:o>112.5&&o<=157.5?(e.down=!0,e.left=!0):o>157.5&&o<=202.5?e.left=!0:o>202.5&&o<=247.5?(e.left=!0,e.up=!0):o>247.5&&o<=292.5?e.up=!0:(o>292.5&&o<=337.5&&(e.up=!0),e.right=!0);break}return e},VM={};const Go=Phaser.Utils.Objects.GetValue,YM=Phaser.Math.RadToDeg;class kn extends Ga{constructor(t,e){super(t,e);var r=this,i={states:{IDLE:{enter:function(){r.x=0,r.y=0,r.worldX=0,r.worldY=0},exit:function(){var s=r.lastPointer;r.x=s.x,r.y=s.y,r.worldX=s.worldX,r.worldY=s.worldY}},BEGIN:{enter:function(){r.validDrag=!1}},RECOGNIZED:{enter:function(){r.start(),r.updateDirectionStates(),r.emit("swipe",r,r.gameObject,r.lastPointer)},exit:function(){r.stop(),r.clearDirectionStates()}}},init:function(){this.state=No},eventEmitter:!1};this.setRecongizedStateObject(new ti(i)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Go(t,"threshold",10)),this.setVelocityThreshold(Go(t,"velocityThreshold",1e3)),this.setDirectionMode(Go(t,"dir","8dir")),this}onDragStart(){this.state=Pd}onDragEnd(){this.state=No}onDrag(){this.state===Pd&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=zo))}postUpdate(t,e){!this.isRunning||!this.enable||this.state===zo&&(this.state=No)}get isSwiped(){return this.state===zo}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=NM[t]),this.dirMode=t,this}updateDirectionStates(){var t=YM(this.getVelocityAngle());return zM(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(kn.prototype,GM);const No="IDLE",Pd="BEGIN",zo="RECOGNIZED",Vo=Phaser.Utils.Objects.GetValue,WM=Phaser.Utils.Array.SpliceOne,UM=Phaser.Math.Distance.Between,XM=Phaser.Math.Angle.Between;class Hl{constructor(t,e){var r=t.input.manager.pointersTotal-1;r<2&&t.input.addPointer(2-r),this.scene=t,this.setEventEmitter(Vo(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(Vo(t,"enable",!0)),this.bounds=Vo(t,"bounds",void 0),this.tracerState=yr,this.pointers.length=0,ws(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,ws(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(!!this.enable&&this.pointers.length!==2){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!e){var r=this.pointers.indexOf(t);if(r===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case yr:this.tracerState=tn,this.onDrag1Start();break;case tn:this.tracerState=We,this.onDrag2Start();break}}}}onPointerUp(t){if(!!this.enable){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!e){var r=this.pointers.indexOf(t);if(r!==-1)switch(delete this.movedState[t.id],WM(this.pointers,r),this.tracerState){case tn:this.tracerState=yr,this.onDrag1End();break;case We:this.tracerState=tn,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(!!this.enable&&t.isDown){var e=this.bounds?this.bounds.contains(t.x,t.y):!0,r=this.pointers.indexOf(t)!==-1;if(!(!r&&e)){if(r&&!e)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case tn:this.onDrag1();break;case We:this.onDrag2();break}}}}dragCancel(){return this.tracerState===We&&this.onDrag2End(),this.pointers.length=0,ws(this.movedState),this.tracerState=yr,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==We)return 0;var t=this.pointers[0],e=this.pointers[1];return UM(t.x,t.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==We)return 0;var t=this.pointers[0],e=this.pointers[1];return XM(t.x,t.y,e.x,e.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var e=t.position,r=t.prevPosition;_s.x=e.x-r.x,_s.y=e.y-r.y}else _s.x=0,_s.y=0;return _s}get centerX(){if(this.tracerState!==We)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.x+e.x)/2}get centerY(){if(this.tracerState!==We)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.y+e.y)/2}get prevCenterX(){if(this.tracerState!==We)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+e.x)/2}get prevCenterY(){if(this.tracerState!==We)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=HM,this}}Object.assign(Hl.prototype,Ys);var _s={};const yr=0,tn=1,We=2,HM="IDLE",$M=Phaser.Utils.Objects.GetValue;class zg extends Hl{constructor(t,e){super(t,e);var r=this,i={states:{IDLE:{enter:function(){r.prevDistance=void 0,r.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){r.emit("pinchstart",r)},exit:function(){r.emit("pinchend",r)}}},init:function(){this.state=Md},eventEmitter:!1};this.setRecongizedStateObject(new ti(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold($M(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=Ad,this.dragThreshold===0&&(this.state=Tr)}onDrag2End(){this.state=Md}onDrag2(){switch(this.state){case Ad:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Tr}break;case Tr:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinched(){return this.state===Tr}setDragThreshold(t){return this.dragThreshold=t,this}}const Md="IDLE",Ad="BEGIN",Tr="RECOGNIZED",kM=Phaser.Math.RotateAround;var Rd=function(o,t,e,r){return kM(o,t,e,r),o.rotation+=r,o},KM=function(o,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var e=this.movementCenterX,r=this.movementCenterY;t.getWorldPoint(this.centerX,this.centerY,Yo);var i=Yo.x,s=Yo.y,a=this.rotation;if(Array.isArray(o))for(var n=o,h=0,u=n.length;h<u;h++)o=n[h],o.x+=e,o.y+=r,Rd(o,i,s,a);else o.x+=e,o.y+=r,Rd(o,i,s,a);return this},Yo={};const ZM=Phaser.Utils.Objects.GetValue,Wo=Phaser.Math.Angle.WrapDegrees,Od=Phaser.Math.Angle.ShortestBetween,Uo=Phaser.Math.RadToDeg,JM=Phaser.Math.DegToRad;class $l extends Hl{constructor(t,e){super(t,e);var r=this,i={states:{IDLE:{enter:function(){r.prevAngle=void 0,r.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){r.emit("rotatestart",r)},exit:function(){r.emit("rotateend",r)}}},init:function(){this.state=Ld},eventEmitter:!1};this.setRecongizedStateObject(new ti(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(ZM(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=Wo(Uo(this.angleBetween)),this.state=Fd,this.dragThreshold===0&&(this.state=Sr)}onDrag2End(){this.state=Ld}onDrag2(){switch(this.state){case Fd:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Wo(Uo(this.angleBetween));this.angle=Od(this.prevAngle,t),this.prevAngle=t,this.state=Sr}break;case Sr:var t=Wo(Uo(this.angleBetween));this.angle=Od(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===Sr}get rotation(){return JM(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var QM={spinObject:KM};Object.assign($l.prototype,QM);const Ld="IDLE",Fd="BEGIN",Sr="RECOGNIZED",jM=Phaser.Utils.Objects.GetValue;var qM=function(o){var t=jM(o,"tap",void 0);if(t!==!1){var e=this._childrenInteractive;this._tap=new Na(this,t),this._tap.on("tap",function(r,i,s){Ii(e.eventEmitter,`${e.eventNamePrefix}${r.tapsCount}tap`,e.targetSizers,r.worldX,r.worldY,s)},this)}};const _M=Phaser.Utils.Objects.GetValue;var tA=function(o){var t=_M(o,"press",void 0);if(t!==!1){var e=this._childrenInteractive;this._press=new za(this,t),this._press.on("pressstart",function(r,i,s){Ii(e.eventEmitter,`${e.eventNamePrefix}pressstart`,e.targetSizers,r.worldX,r.worldY,s)},this).on("pressend",function(r,i,s){Ii(e.eventEmitter,`${e.eventNamePrefix}pressend`,e.targetSizers,r.worldX,r.worldY,s)},this)}};const eA=Phaser.Utils.Objects.GetValue;var iA=function(o){var t=eA(o,"swipe",void 0);if(t!==!1){t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var e=this._childrenInteractive;this._swipe=new kn(this,t),this._swipe.on("swipe",function(r,i,s){var a=r.left?"left":r.right?"right":r.up?"up":"down";Ii(e.eventEmitter,`${e.eventNamePrefix}swipe${a}`,e.targetSizers,r.worldX,r.worldY,s)},this)}};const Xo=Phaser.Utils.Objects.GetValue;var kl=function(o,t){return o.setInteractive(),o._childrenInteractive={targetSizers:Xo(t,"targets",[o]),eventEmitter:Xo(t,"eventEmitter",o),eventNamePrefix:Xo(t,"inputEventPrefix","child.")},RM.call(o,t),LM.call(o,t),qM.call(o,t),tA.call(o,t),iA.call(o,t),o},sA=function(o){return kl(this,o),this},nA=function(){for(var o=this.getAllChildren([this]),t=0,e=o.length;t<e;t++){var r=o[t];r.emit.apply(r,arguments)}return this},Vg={getSizerConfig:Fa,getChildPrevState:dP,pushIntoBounds:cP,drawBounds:MP,resolveWidth:Vl,resolveChildrenWidth:wP,resolveHeight:Yl,getChildWidth:IP,getChildHeight:BP,getExpandedChildWidth:GP,getExpandedChildHeight:NP,getChildrenWidth:zP,getChildrenHeight:VP,addChildrenMap:ad,addElement:ad,getElement:FP,getAllChildrenSizers:YP,getChildrenSizers:WP,preLayout:Xn,layout:XP,runLayout:HP,layoutChildren:$P,runWidthWrap:Rg,layoutBackgrounds:TM,postLayout:kP,setAnchor:ZP,isInTouching:dM,pointToChild:pM,setDraggable:SM,setChildrenInteractive:sA,broadcastEvent:nA};Object.assign(Vg,DP,OP,LP,gM,jP,iM,rM,uM,EM,MM,fM,UP);const en=Phaser.Utils.Objects.GetValue;class us extends De{constructor(t,e,r,i,s,a){super(t,e,r,2,2),this.isRexSizer=!0,this.setMinSize(i,s),this.setName(en(a,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.layoutedChildren=void 0;var n=en(a,"anchor",void 0);n&&this.setAnchor(n),this.setInnerPadding(en(a,"space",0)),this.setDraggable(en(a,"draggable",!1)),this.setSizerEventsEnable(en(a,"sizerEvents",!1)),this.setDirty(!0)}destroy(t){if(!!this.scene){if(t)for(var e=this.getAllChildrenSizers([this]),r=0,i=e.length;r<i;r++)e[r].sizerEventsEnable=!1;super.destroy(t),this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,e){return this.setMinWidth(t).setMinHeight(e),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-Dt(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+Dt(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+Dt(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-Pt(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+Pt(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+Pt(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}}Object.assign(us.prototype,Vg);var rA=function(){if(this.rexSizer.hidden)return 0;var o=0,t=this.sizerChildren,e,r,i;for(var s in t)e=t[s],r=e.rexSizer.padding,i=this.getChildWidth(e)+r.left+r.right,o=Math.max(i,o);return o+this.space.left+this.space.right},aA=function(){if(this.rexSizer.hidden)return 0;var o=0,t=this.sizerChildren,e,r,i;for(var s in t)e=t[s],i=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.minHeight!==void 0?e.minHeight:Pt(e),r=e.rexSizer.padding,i+=r.top+r.bottom,o=Math.max(i,o);return o+this.space.top+this.space.bottom},oA=function(o,t){t===void 0&&(t=this.width);var e,r=o.rexSizer;if(r.expandWidth){var i=t-this.space.left-this.space.right,s=r.padding;e=i-s.left-s.right}return e},hA=function(o,t){t===void 0&&(t=this.height);var e,r=o.rexSizer;if(r.expandHeight){var i=t-this.space.top-this.space.bottom,s=r.padding;e=i-s.top-s.bottom}return e},lA=function(o){o===void 0&&(o=[]);var t=this.sizerChildren,e;for(var r in t)e=t[r],e.isRexSizer&&o.push(e);return o},Kl=function(o,t){o.width<o.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${o.constructor.name}`),o.height<o.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${o.constructor.name}`)},uA=function(){var o,t,e,r=this.innerLeft,i=this.innerTop,s=this.innerWidth,a=this.innerHeight,n,h,u,l,f,c,d=this.sizerChildren;for(var v in d)o=d[v],!o.rexSizer.hidden&&(t=o.rexSizer,e=t.padding,Hn.call(this,o),o.isRexSizer?(o.runLayout(this,this.getExpandedChildWidth(o),this.getExpandedChildHeight(o)),Kl(o,this)):(f=void 0,c=void 0,t.expandWidth&&(f=s-e.left-e.right),t.expandHeight&&(c=a-e.top-e.bottom),wi(o,f,c)),n=r+e.left,u=s-e.left-e.right,h=i+e.top,l=a-e.top-e.bottom,$n.call(this,o,n,h,u,l,t.align,t.alignOffsetX,t.alignOffsetY))};const bd=Phaser.Utils.Objects.IsPlainObject,Ue=Phaser.Utils.Objects.GetValue,Dd=Phaser.Display.Align.CENTER,fA=Phaser.Utils.String.UUID;var dA=function(o,t,e,r,i,s,a,n,h){if(Un.call(this,o),bd(t)){var l=t;t=Ue(l,"key",void 0),e=Ue(l,"align",Dd),n=Ue(l,"offsetX",0),h=Ue(l,"offsetY",0),r=Ue(l,"padding",0),i=Ue(l,"expand",!0),o.isRexSizer||(s=Ue(l,"minWidth",o._minWidth),a=Ue(l,"minHeight",o._minHeighted))}var u=t!==void 0;u||(t=fA()),typeof e=="string"&&(e=ba[e]),e===void 0&&(e=Dd),n===void 0&&(n=0),h===void 0&&(h=0),r===void 0&&(r=0),i===void 0&&(i=!0),o.isRexSizer||(s===void 0&&(s=o._minWidth),a===void 0&&(a=o._minHeight));var l=this.getSizerConfig(o);return l.align=e,l.alignOffsetX=n,l.alignOffsetY=h,l.padding=Us(r),bd(i)?(l.expandWidth=Ue(i,"width",!1),l.expandHeight=Ue(i,"height",!1)):(l.expandWidth=i,l.expandHeight=i),o.isRexSizer||(l.expandWidth?o.minWidth=s===void 0?Dt(o):s:o.minWidth=void 0,l.expandHeight?o.minHeight=a===void 0?Pt(o):a:o.minHeight=void 0),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=o,u&&this.addChildrenMap(t,o),this},cA={add:dA};const vA=Phaser.Utils.Array.Remove,pA=De.prototype.remove;var Va=function(o,t){return this.isBackground(o)&&vA(this.backgroundChildren,o),pA.call(this,o,t),!t&&this.sizerEventsEnable&&(o.emit("sizer.remove",o,this),this.emit("remove",o,this)),this};const gA=De.prototype.clear;var Ya=function(o){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!o&&this.sizerEventsEnable,e;if(t&&(e=this.getChildren([])),gA.call(this,o),t)for(var r,i=0,s=e.length;i<s;i++)r=e[i],r.emit("sizer.remove",r,this),this.emit("remove",r,this);return this},mA={remove(o,t){var e;if(typeof o=="string"){if(e=o,o=this.sizerChildren[e],!o)return this}else{if(this.getParentSizer(o)!==this)return this;e=this.childToKey(o)}return e&&(delete this.sizerChildren[e],this.childrenMap.hasOwnProperty(e)&&delete this.childrenMap[e]),Va.call(this,o,t),this},removeAll(o){for(var t in this.sizerChildren)this.remove(t,o);return this},clear(o){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Ya.call(this,o),this}},Yg={getChildrenWidth:rA,getChildrenHeight:aA,getExpandedChildWidth:oA,getExpandedChildHeight:hA,getChildrenSizers:lA,layoutChildren:uA};Object.assign(Yg,cA,mA);var Wa=function(o,t){if(Array.isArray(o))return o.indexOf(t);for(var e in o)if(o[e]===t)return e;return null};const wd=Phaser.Utils.Objects.IsPlainObject,Ss=Phaser.Utils.Objects.GetValue;class Vi extends us{constructor(t,e,r,i,s,a){wd(e)?(a=e,e=Ss(a,"x",0),r=Ss(a,"y",0),i=Ss(a,"width",void 0),s=Ss(a,"height",void 0)):wd(i)&&(a=i,i=Ss(a,"width",void 0),s=Ss(a,"height",void 0)),super(t,e,r,i,s,a),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var e=t;if(this.sizerChildren.hasOwnPropery(e))return e}else return Wa(this.sizerChildren,t);return null}}Object.assign(Vi.prototype,Yg);var xA=Phaser.Math.Distance.Between,aa=function(o,t,e){var r=o.width/2;return xA(r,r,t,e)<=r};const yA=Phaser.Math.Angle.Between,TA=Phaser.Math.Angle.Normalize;var Id=function(o,t,e){if(!!this.enable&&!!o.isDown){var r=this.sizerChildren.knob;if(!!aa(r,t,e)){var i=r.width/2,s=r.startAngle,a=yA(i,i,t,e),n=r.anticlockwise?s-a:a-s,h=TA(n)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-h)<.1?this.value=h:this.easeValueTo(h)}}},SA=function(){var o=this.sizerChildren.knob;o.setInteractive().on("pointerdown",Id,this).on("pointermove",Id,this)};const Bd=Phaser.Math.Angle.Between,CA=Phaser.Math.Angle.Wrap;var EA=function(o,t,e){if(!(!this.enable||this.panPointer)){var r=this.sizerChildren.knob;!aa(r,t,e)||Wg.call(this,o)}},PA=function(o,t,e){if(!!this.enable&&!!o.isDown){var r=this.sizerChildren.knob;switch(this.panState){case Zl:aa(r,t,e)&&Wg.call(this,o);break;case Xg:aa(r,t,e)?AA.call(this):Ug.call(this);break}}},MA=function(o,t,e){!this.enable||this.panPointer!==o||Ug.call(this)},Wg=function(o){this.panPointer=o,this.panState=Xg},Ug=function(){this.panPointer=void 0,this.panState=Zl},AA=function(){var o=this.panPointer.prevPosition,t=this.panPointer.position,e=this.sizerChildren.knob,r=Bd(e.x,e.y,o.x,o.y),i=Bd(e.x,e.y,t.x,t.y),s=e.anticlockwise?r-i:i-r,a=CA(s)/(Math.PI*2);this.stopEaseValue(),this.value+=a};const Zl=0,Xg=1;var RA=function(){var o=this.sizerChildren.knob;o.setInteractive().on("pointerdown",EA,this).on("pointermove",PA,this).on("pointerup",MA,this),this.panPointer=void 0,this.panState=Zl},OA=function(o,t){return this.textFormatCallback=o,this.textFormatCallbackScope=t,this},Hg=function(o){o===void 0&&(o=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(o):t=this.textFormatCallback.call(this.textFormatCallbackScope,o),t},LA=function(){var o=this.sizerChildren.text;return o&&(o.setText(Hg.call(this)),o.layout&&o.layout()),this},FA={setTextFormatCallback:OA,getFormatText:Hg,updateText:LA};const Ht=Phaser.Utils.Objects.GetValue,bA=Phaser.Math.Linear,Gd=Phaser.Math.Percent,DA=Phaser.Math.Snap.To;class Jl extends Vi{constructor(t,e){e===void 0&&(e={}),super(t,e),this.type="rexKnob",this.eventEmitter=Ht(e,"eventEmitter",this);var r=Ht(e,"background",void 0),i=Ht(e,"text",void 0);r&&this.addBackground(r),i&&(e.textColor=void 0,e.textStrokeColor=void 0,this.setTextFormatCallback(Ht(e,"textFormatCallback",void 0),Ht(e,"textFormatCallbackScope",void 0)));var s=new La(t,e);s.setDepth(Ht(e,"knobDepth",0)),s._value=-1,t.add.existing(s),this.add(s,"knob"),i&&(this.add(i,"text","center",0,!1),t.children.moveBelow(s,i)),this.addChildrenMap("background",r),this.addChildrenMap("knob",s),this.addChildrenMap("text",i);var a=Ht(e,"valuechangeCallback",null);if(a!==null){var n=Ht(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",a,n)}this.setEnable(Ht(e,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Ht(e,"easeValue.duration",0)).setEaseValueFunction(Ht(e,"easeValue.ease","Linear")),this.setGap(Ht(e,"gap",void 0)),this.setValue(Ht(e,"value",0),Ht(e,"min",void 0),Ht(e,"max",void 0));var h=Ht(e,"input",0);switch(typeof h=="string"&&(h=wA[h]),h){case 0:RA.call(this);break;case 1:SA.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=DA(t,this.gap));var e=this.value;this.sizerChildren.knob.value=t;var r=this.value;e!==r&&(this.updateText(),this.eventEmitter.emit("valuechange",r,e,this.eventEmitter))}setValue(t,e,r){return t==null?this:(e!==void 0&&(t=Gd(t,e,r)),this.value=t,this)}addValue(t,e,r){return e!==void 0&&(t=Gd(t,e,r)),this.value+=t,this}getValue(t,e){var r=this.value;return t!==void 0&&(r=bA(t,e,r)),r}}const wA={pan:0,drag:0,click:1,none:-1};Object.assign(Jl.prototype,FA,Wn);it.register("knob",function(o){var t=new Jl(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Knob",Jl);const IA={arc:Oa,circle:Ih,curve:$E,ellipse:kE,line:KE,lines:sP,rectangle:rP,triangle:oP},Nd=Phaser.Utils.Objects.GetValue,BA=Phaser.Utils.Objects.IsPlainObject,GA=function(){for(var o=this.getShapes(),t=0,e=o.length;t<e;t++)o[t].lineStyle().fillStyle()};var NA={createShape(o,t){var e=IA[o],r=new e;return t&&r.setName(t),r},buildShapes(o){var t=Nd(o,"create",void 0);if(BA(t)){var e=t;for(var r in e){var i=e[r];switch(typeof i){case"number":for(var s=0;s<i;s++)this.addShape(this.createShape(r));break;case"string":this.addShape(this.createShape(r,i));break;default:for(var a=i,s=0,n=a.length;s<n;s++)this.addShape(this.createShape(r,a[s]));break}}}else if(Array.isArray(t))for(var e=t,s=0,n=e.length;s<n;s++){var h=e[s];this.addShape(this.createShape(h.type,h.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(Nd(o,"update"))},setUpdateShapesCallback(o){return o===void 0&&(o=GA),this.dirty=this.dirty||this.updateCallback!==o,this.updateCallback=o,this},updateShapes(){this.updateCallback.call(this)}};const sn=Phaser.Utils.Objects.GetValue,zA=Phaser.Utils.Objects.IsPlainObject;class Ua extends Al{constructor(t,e,r,i,s,a){zA(e)&&(a=e,e=sn(a,"x",0),r=sn(a,"y",0),i=sn(a,"width",2),s=sn(a,"height",2)),super(t,e,r,i,s),this.type=sn(a,"type","rexCustomShapes"),this.buildShapes(a)}}Object.assign(Ua.prototype,NA);it.register("customShapes",function(o,t,e,r,i){var s=new Ua(this.scene,o,t,e,r,i);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.CustomShapes",Ua);const Xe=Phaser.Utils.Objects.GetValue,VA=Phaser.Utils.Objects.IsPlainObject,YA=Phaser.Math.Clamp,WA=Phaser.Math.Linear,zd=Phaser.Math.Percent;class Ql extends Ua{constructor(t,e,r,i,s,a){VA(e)&&(a=e,e=Xe(a,"x",0),r=Xe(a,"y",0),i=Xe(a,"width",2),s=Xe(a,"height",2)),a===void 0&&(a={}),a.type||(a.type="rexCustomProgress"),super(t,e,r,i,s,a),this.eventEmitter=Xe(a,"eventEmitter",this);var n=Xe(a,"valuechangeCallback",null);if(n!==null){var h=Xe(a,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",n,h)}this.setEaseValuePropName("value").setEaseValueDuration(Xe(a,"easeValue.duration",0)).setEaseValueFunction(Xe(a,"easeValue.ease","Linear")),this.setValue(Xe(a,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(t){t=YA(t,0,1);var e=this._value,r=e!=t;this.dirty=this.dirty||r,this._value=t,r&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,r){return t==null?this:(e!==void 0&&(t=zd(t,e,r)),this.value=t,this)}addValue(t,e,r){return e!==void 0&&(t=zd(t,e,r)),this.value+=t,this}getValue(t,e){var r=this.value;return t!==void 0&&(r=WA(t,e,r)),r}}Object.assign(Ql.prototype,Wn);it.register("customProgress",function(o,t,e,r,i){var s=new Ql(this.scene,o,t,e,r,i);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.CustomProgress",Ql);var UA={setTransitionStartCallback(o,t){return this.onStartCallback=o,this.onStartCallbackScope=t,this},setTransitionProgressCallback(o,t){return this.onProgressCallback=o,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(o,t){return this.onCompleteCallback=o,this.onCompleteCallbackScope=t,this}};const XA=Phaser.Utils.Objects.IsPlainObject,xe=Phaser.Utils.Objects.GetValue;var HA={out:0,in:1},$A={setTransitionDirection(o){return typeof o=="string"&&(o=HA[o]),this.dir=o,this},setDuration(o){return this.duration=o,this},setEaseFunction(o){return this.easeFunction=o,this},setNextTexture(o,t){return this.nextImage.setTexture(o,t),this},transit(o,t){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),XA(o)){var e=o;o=xe(e,"key",void 0),t=xe(e,"frame",void 0),this.setDuration(xe(e,"duration",this.duration)).setEaseFunction(xe(e,"ease",this.easeFunction)).setTransitionDirection(xe(e,"dir",this.dir));var r=xe(e,"mask",void 0);r&&this.setMaskGameObject(r),this.setMaskEnable(r===!0);var i=xe(e,"onStart",void 0),s=xe(e,"onProgress",void 0),a=xe(e,"onComplete",void 0);(i!==void 0||s!==void 0||a!==void 0)&&this.setTransitionStartCallback(i,xe(e,"onStartScope",void 0)).setTransitionProgressCallback(s,xe(e,"onProgressScope",void 0)).setTransitionCompleteCallback(a,xe(e,"onCompleteScope",void 0))}return this.setNextTexture(o,t),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Pg(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},Vd=function(o,t,e,r,i){switch(this.clear().fillStyle(16777215),this.shape){case 1:var s=Math.min(o,t)/2;this.fillCircle(-o*(r-.5),-t*(i-.5),s+e);break;default:this.fillRect(-(o*r)-e,-(t*i)-e,o+2*e,t+2*e);break}};const kA=Phaser.GameObjects.Graphics;class Wh extends kA{constructor(t,e,r){e===void 0&&(e=0),typeof e=="string"&&(e=KA[e]),r===void 0&&(r=0),super(t.scene),this.parent=t,this.shape=e,this.padding=r,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,e){var r=this.parent;return t===void 0&&(t=r.x),e===void 0&&(e=r.y),super.setPosition(t,e),this}resize(t,e,r){var i=this.parent;return t===void 0&&(t=i.width),e===void 0&&(e=i.height),r===void 0&&(r=this.padding),this.widthSave===t&&this.heightSave===e&&this.paddingSave===r?this:(this.widthSave=t,this.heightSave=e,this.paddingSave=r,this.originXSave=i.originX,this.originYSave=i.originY,Vd.call(this,t,e,r,i.originX,i.originY),this)}setOrigin(t,e){e===void 0&&(e=t);var r=this.parent;return t===void 0&&(t=r.originX),e===void 0&&(e=r.originY),this.originXSave===t&&this.originYSave===e?this:(this.originXSave=t,this.originYSave=e,Vd.call(this,this.widthSave,this.heightSave,this.paddingSave,t,e),this)}}const KA={rectangle:0,circle:1};var ZA={setMaskGameObject(o){if(!o)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(o===!0&&this.maskGameObject instanceof Wh)return this;if(this.maskGameObject===o)return this;this.removeMaskGameObject()}return o===!0&&(o=new Wh(this)),this.maskGameObject=o,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(o,t,e){return t===void 0&&(t=!0),this.childrenMask||this.setMaskGameObject(!0),t?(o.setMask(this.childrenMask),e&&this.childrenMask.setInvertAlpha()):o.clearMask(),this},setCurrentImageMaskEnable(o,t){return this.setImageMaskEnable(this.currentImage,o,t),this},setNextImageMaskEnable(o,t){return this.setImageMaskEnable(this.nextImage,o,t),this},setCellImagesMaskEnable(o,t){for(var e=this.getCellImages(),r=0,i=e.length;r<i;r++)this.setImageMaskEnable(e[r],o,t);return this},setMaskEnable(o,t){return this.setImageMaskEnable(this.backImage,o,t),this.setImageMaskEnable(this.frontImage,o,t),this.setCellImagesMaskEnable(o,t),this}},JA=function(o,t){t===void 0&&(t=",");var e;return o==="__BASE"?e=function(r,i){return`${r}${t}${i}`}:e=function(r,i){return`${o}_${r}${t}${i}`},e},QA=function(o,t,e,r,i,s){e==null&&(e="__BASE"),Ba(s)||(s=JA(e,s));for(var a=o.textures.get(t),n=a.frames[e],h=n.width/r,u=n.height/i,l=0,f=0,c,d=0;d<i;d++){l=0;for(var v=0;v<r;v++)c=s(v,d),a.add(c,0,l+n.cutX,f+n.cutY,h,u),l+=h;f+=u}return{getFrameNameCallback:s,cellWidth:h,cellHeight:u,columns:r,rows:i}};const Si=Phaser.Utils.Objects.GetValue,jA=Phaser.GameObjects.Image,qA=Phaser.Utils.Objects.IsPlainObject,_A=Phaser.Math.RotateAround;var t2=function(o,t,e,r){qA(t)&&(r=t,t=Si(r,"columns",1),e=Si(r,"rows",1));for(var i=Si(r,"ImageClass",jA),s=Si(r,"originX",.5),a=Si(r,"originY",.5),n=Si(r,"add",!0),h=Si(r,"align",n),u=Si(r,"objectPool",void 0),l=o.scene,f=o.texture.key,c=o.frame.name,d=QA(l,f,c,t,e),v=d.getFrameNameCallback,p=o.scaleX,g=o.scaleY,m=o.rotation,x=o.getTopLeft(),y=x.x,T=x.y,S=[],C=d.cellWidth*p,E=d.cellHeight*g,P=0;P<e;P++)for(var M=0;M<t;M++){var R,A=v(M,P);u&&u.length>0?R=u.pop().setTexture(f,A):R=new i(l,0,0,f,A),n&&l.add.existing(R);var O=y+C*M,F=T+E*P,b=O+s*C,w=F+a*E;h&&(R.setOrigin(s,a).setPosition(b,w).setScale(p,g).setRotation(m),_A(R,y,T,m)),S.push(R)}return S},e2={gridCutImage(o,t,e,r){r===void 0&&(r={}),r.objectPool=this.imagesPool;for(var i=t2(o,t,e,r),s,a=0,n=i.length;a<n;a++)s=i[a],s.setVisible(!0),this.add(s);return this.cellImages=i,this.setChildLocalVisible(o,!1),i},gridCutCurrentImage(o,t,e){return this.gridCutImage(this.currentImage,o,t,e)},gridCutNextImage(o,t,e){return this.gridCutImage(this.nextImage,o,t,e)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var o=this.cellImages[0].texture,t=this.cellImages,e,r,i=0,s=t.length;i<s;i++)e=t[i],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),r=e.frame.name,e.setTexture(),o.remove(r);return this.imagesPool.push(...t),t.length=0,this}},$g={};Object.assign($g,UA,$A,ZA,e2);var i2=function(o,t,e,r){},s2=function(o,t,e,r){o.setChildLocalAlpha(t,1-r).setChildLocalAlpha(e,r)},n2=function(o,t,e,r){o.setChildLocalAlpha(t,1)};const Yd=Phaser.Utils.Objects.IsPlainObject,Nt=Phaser.Utils.Objects.GetValue,r2=Phaser.Math.Clamp;class jl extends De{constructor(t,e,r,i,s,a){Yd(e)?(a=e,e=Nt(a,"x",0),r=Nt(a,"y",0),i=Nt(a,"key",void 0),s=Nt(a,"frame",void 0)):Yd(s)&&(a=s,s=void 0);var n=Nt(a,"back",void 0),h=Nt(a,"front",void 0);n||(n=t.add.image(e,r,i,s)),h||(h=t.add.image(e,r,i,s));var u=Nt(a,"width",h.width),l=Nt(a,"height",h.height);super(t,e,r,u,l),n.setVisible(!1),this.addMultiple([n,h]),this.type="rexTransitionImage",this.backImage=n,this.frontImage=h,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var f=Nt(a,"onStart",void 0),c=Nt(a,"onProgress",void 0),d=Nt(a,"onComplete",void 0),v=Nt(a,"dir",0);f===void 0&&c===void 0&&d===void 0&&(f=i2,c=s2,d=n2,v=0),this.setTransitionStartCallback(f,Nt(a,"onStartScope",void 0)).setTransitionProgressCallback(c,Nt(a,"onProgressScope",void 0)).setTransitionCompleteCallback(d,Nt(a,"onCompleteScope",void 0)).setTransitionDirection(v).setDuration(Nt(a,"duration",1e3)).setEaseFunction(Nt(a,"ease","Linear"));var p=Nt(a,"mask",void 0);p&&this.setMaskGameObject(p),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get t(){return this._t}set t(t){if(t=r2(t,0,1),this._t!==t){this._t=t;var e=this.currentImage,r=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Ho(this.onStartCallback,this.onStartCallbackScope,this,e,r,t)),Ho(this.onProgressCallback,this.onProgressCallbackScope,this,e,r,t),t===1){Ho(this.onCompleteCallback,this.onCompleteCallbackScope,this,e,r,t);var i=r.texture.key,s=r.frame.name;this.frontImage.setTexture(i,s),this.backImage.setTexture(i,s),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,e){return super.setOrigin(t,e),this.backImage.setOrigin(t,e),this.frontImage.setOrigin(t,e),this.maskGameObject&&this.maskGameObject.setOrigin(t,e),this}setTexture(t,e){return this.frontImage.setTexture(t,e),this.backImage.setTexture(t,e).setVisible(!1),this}}var Ho=function(o,t,e,r,i,s){!o||(t?o.call(t,e,r,i,s):o(e,r,i,s))};Object.assign(jl.prototype,$g);it.register("transitionImage",function(o,t,e,r,i){var s=new jl(this.scene,o,t,e,r,i);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.TransitionImage",jl);const a2=Phaser.GameObjects.Rectangle;class ql extends a2{constructor(t,e,r){super(t,0,0,2,2,e,1),this.setAlpha(r),this.setScrollFactor(0),this.boot()}boot(){var t=this.scene;t.events.on("prerender",this.resize,this)}destroy(t){!this.scene||(this.scene.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,e=t.scale.gameSize,r=t.cameras.main,i=e.width,s=e.height,a=1/r.zoom,n=i/2,h=s/2,u=i*a,l=s*a;(this.x!==n||this.y!==h)&&this.setPosition(n,h),(this.width!==u||this.height!==l)&&this.setSize(u,l).setOrigin(.5)}}it.register("fullWindowRectangle",function(o,t){var e=new ql(this.scene,o,t);return this.scene.add.existing(e),e});st(window,"RexPlugins.UI.FullWindowRectangle",ql);const Wd=Phaser.Utils.Objects.GetValue;class _l extends ee{constructor(t,e){super(t,{eventEmitter:!1}),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setHitAreaMode(Wd(t,"hitAreaMode",0)),this.setEnable(Wd(t,"enable",!0)),this}boot(){this.parent.on("pointerdown",function(t,e,r,i){i.stopPropagation()}).on("pointerup",function(t,e,r,i){i.stopPropagation()}).on("pointermove",function(t,e,r,i){i.stopPropagation()}).on("pointerover",function(t,e,r,i){i.stopPropagation()}).on("pointerout",function(t,e){e.stopPropagation()})}setHitAreaMode(t){typeof t=="string"&&(t=o2[t]);var e=this.parent;return e.input&&e.removeInteractive(),t===0?e.setInteractive():e.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var o2={default:0,fullWindow:1};const Ud=Phaser.Utils.Objects.GetValue;class tu extends ql{constructor(t,e){var r=Ud(e,"color",0),i=Ud(e,"alpha",.8);super(t,r,i),this.touchEventStop=new _l(this,{hitAreaMode:1})}}it.register("cover",function(o){var t=new tu(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Cover",tu);var h2=function(o){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,l2(this,o)),this},l2=function(o,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var e=t.options;e.responsive=!1,e.maintainAspectRatio=!1,e.hasOwnProperty("devicePixelRatio")||(e.devicePixelRatio=1);var r=!1;e.animation===void 0?e.animation={}:e.animation===!1&&(r=!0,e.animation={});var i=e.animation;r&&(i.duration=0);var s=i.onProgress;i.onProgress=function(n){s&&s(n),o.needRedraw()};var a=i.onComplete;return i.onComplete=function(n){a&&a(n),o.needRedraw()},t},u2=function(o){if(this.chart!==void 0)if(typeof o=="string"){for(var t=this.chart.data.datasets,e,r=0,i=t.length;r<i;r++)if(e=t[r],e.label===o)return e}else return this.chart.data.datasets[o]},f2=function(o,t){var e=this.getChartDataset(o);if(e!==void 0){if(typeof t=="string"){var r=this.chart.data.labels;if(t=r.indexOf(t),t===-1)return}return e.data[t]}},d2=function(o,t,e){if(this.chart===void 0)return this;var r=this.getChartDataset(o);if(typeof t=="string"){var i=this.chart.data.labels;if(t=i.indexOf(t),t===-1)return this}return r.data[t]=e,this},c2=function(){if(this.chart===void 0)return this;this.chart.update()};class eu extends Gi{constructor(t,e,r,i,s,a){super(t,e,r,i,s),this.type="rexChart",this.chart=void 0,a!==void 0&&this.setChart(a)}destroy(t){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,e){if(t===this.width&&e===this.height)return this;if(super.resize(t,e),this.chart){var r=this.chart;r.height=this.canvas.height,r.width=this.canvas.width,r.aspectRatio=r.height?r.width/r.height:null,r.update()}return this}}var v2={setChart:h2,getChartDataset:u2,getChartData:f2,setChartData:d2,updateChart:c2};Object.assign(eu.prototype,v2);it.register("chart",function(o,t,e,r,i){var s=new eu(this.scene,o,t,e,r,i);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.Chart",eu);var p2=function(o){if(this.rexSizer.hidden)return 0;o===void 0&&(o=!0);var t=0,e=this.sizerChildren,r,i,s;if(this.orientation===0)for(var a=0,n=e.length;a<n;a++)r=e[a],!r.rexSizer.hidden&&(r.rexSizer.proportion===0||o&&r.rexSizer.proportion>0?s=this.getChildWidth(r):s=0,i=r.rexSizer.padding,s+=i.left+i.right,a>0&&(s+=this.space.item),t+=s);else for(var a=0,n=e.length;a<n;a++)r=e[a],r.hasOwnProperty("rexSizer")&&(r.rexSizer.hidden||(i=r.rexSizer.padding,s=this.getChildWidth(r)+i.left+i.right,t=Math.max(s,t)));return t+this.space.left+this.space.right},g2=function(o){if(this.rexSizer.hidden)return 0;o===void 0&&(o=!0);var t=0,e=this.sizerChildren,r,i,s;if(this.orientation===0)for(var a=0,n=e.length;a<n;a++)r=e[a],!r.rexSizer.hidden&&(i=r.rexSizer.padding,s=this.getChildHeight(r)+i.top+i.bottom,t=Math.max(s,t));else for(var a=0,n=e.length;a<n;a++)r=e[a],r.hasOwnProperty("rexSizer")&&(r.rexSizer.hidden||(i=r.rexSizer.padding,r.rexSizer.proportion===0||o&&r.rexSizer.proportion>0?s=this.getChildHeight(r):s=0,s+=i.top+i.bottom,a>0&&(s+=this.space.item),t+=s));return t+this.space.top+this.space.bottom},m2=function(o,t){t===void 0&&(t=this.width);var e,r=o.rexSizer,i=r.padding;if(this.orientation===0)r.proportion>0&&this.proportionLength>0&&(e=r.proportion*this.proportionLength);else if(r.expand){var s=t-this.space.left-this.space.right;e=s-i.left-i.right}return e},x2=function(o,t){t===void 0&&(t=this.height);var e,r=o.rexSizer,i=r.padding;if(this.orientation===0){if(r.expand){var s=t-this.space.top-this.space.bottom;e=s-i.top-i.bottom}}else r.proportion>0&&this.proportionLength>0&&(e=r.proportion*this.proportionLength);return e},y2=function(o){o===void 0&&(o=[]);for(var t=this.sizerChildren,e,r=0,i=t.length;r<i;r++)e=t[r],e.isRexSizer&&o.push(e);return o},T2=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,Xn.call(this),this},S2=function(){for(var o=this.sizerChildren,t,e,r,i=this.innerLeft,s=this.innerTop,a=this.innerWidth,n=this.innerHeight,h=i,u=s,l,f,c,d,v,p,g=0,m=o.length;g<m;g++)t=this.rtl?o[m-g-1]:o[g],!t.rexSizer.hidden&&(e=t.rexSizer,r=e.padding,Hn.call(this,t),t.isRexSpace?(v=0,p=0):(v=this.getExpandedChildWidth(t),p=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,v,p),Kl(t,this)):wi(t,v,p),v===void 0&&(v=Dt(t)),p===void 0&&(p=Pt(t)),this.orientation===0?(l=h+r.left,e.proportion===0||this.proportionLength===0?c=v:c=e.proportion*this.proportionLength,f=u+r.top,d=n-r.top-r.bottom):(l=h+r.left,c=a-r.left-r.right,f=u+r.top,e.proportion===0||this.proportionLength===0?d=p:d=e.proportion*this.proportionLength),$n.call(this,t,l,f,c,d,e.align),this.orientation===0?h+=c+r.left+r.right+this.space.item:u+=d+r.top+r.bottom+this.space.item)},C2=function(t){var t=Vl.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var e=t-this.childrenWidth;e>0?(e=t-this.getChildrenWidth(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return t},E2=function(o,e){var e=Yl.call(this,o,e);if(this.proportionLength===void 0&&this.orientation===1){var r=e-this.childrenHeight;r>0?(r=e-this.getChildrenHeight(!1),this.proportionLength=r/this.childrenProportion):this.proportionLength=0}return e};const P2=Phaser.GameObjects.Zone;class iu extends P2{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var M2=function(o,t){var e=this.sizerChildren;if(e.length===0)return-1;for(var r=-1,i=1/0,s=0,a=e.length;s<a;s++){var n=e[s],h;this.orientation===0?h=Math.abs(n.left-o):h=Math.abs(n.top-t),i>h&&(i=h,r=s)}var n=e[e.length-1],h;return this.orientation===0?h=Math.abs(n.right-o):h=Math.abs(n.bottom-t),i>h&&(i=h,r=s+1),r};const kg=Phaser.Utils.Objects.IsPlainObject,Ci=Phaser.Utils.Objects.GetValue,Xd=Phaser.Display.Align.CENTER,A2={min:0,full:-1};var $o=function(o,t,e,r,i,s,a,n){Un.call(this,o);var h=typeof t;if(t===null)return this;if(h!=="number"){if(h==="string")t=A2[t];else if(kg(t)){var u=t;t=Ci(u,"proportion",0),e=Ci(u,"align",Xd),r=Ci(u,"padding",0),i=Ci(u,"expand",!1),s=Ci(u,"key",void 0),a=Ci(u,"index",void 0),o.isRexSizer||(this.orientation===0?n=Ci(u,"minWidth",void 0):n=Ci(u,"minHeight",void 0))}}typeof e=="string"&&(e=ba[e]),t===void 0&&(t=0),e===void 0&&(e=Xd),r===void 0&&(r=0),i===void 0&&(i=!1),!o.isRexSizer&&n===void 0&&(this.orientation===0?n=o._minWidth:n=o._minHeight);var u=this.getSizerConfig(o);return u.proportion=t,u.align=e,u.padding=Us(r),u.expand=i,a===void 0||a>=this.sizerChildren.length?this.sizerChildren.push(o):this.sizerChildren.splice(a,0,o),!o.isRexSizer&&t>0&&(this.orientation===0?(o.minWidth=n===void 0?Dt(o):n,o.minHeight=void 0):(o.minWidth=void 0,o.minHeight=n===void 0?Pt(o):n)),s!==void 0&&this.addChildrenMap(s,o),this},R2={add:$o,addSpace(o){return this.insertSpace(void 0,o),this},insertSpace(o,t){return t===void 0&&(t=1),$o.call(this,new iu(this.scene),{proportion:t,minWidth:0,minHeight:0,index:o}),this},insert(o,t,e,r,i,s,a,n){return kg(e)&&(e.index=o),$o.call(this,t,e,r,i,s,a,o,n),this},insertAtPosition(o,t,e,r,i,s,a,n,h){var u=M2.call(this,o,t);return u===-1&&(u=void 0),this.insert(u,e,r,i,s,a,n,h),this}};const O2=Phaser.Utils.Array.Remove;var L2={remove(o,t){return this.getParentSizer(o)!==this?this:(O2(this.sizerChildren,o),Va.call(this,o,t),this)},removeAll(o){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],o);return this},clear(o){return this.sizerChildren.length=0,Ya.call(this,o),this}},Kg={getChildrenWidth:p2,getChildrenHeight:g2,getExpandedChildWidth:m2,getExpandedChildHeight:x2,getChildrenSizers:y2,preLayout:T2,layoutChildren:S2,resolveWidth:C2,resolveHeight:E2};Object.assign(Kg,R2,L2);var F2=function(){for(var o=0,t=this.sizerChildren,e,r,i=0,s=t.length;i<s;i++)e=t[i],!e.rexSizer.hidden&&(r=e.rexSizer.proportion,r>0&&(o+=r));return o},b2={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},su=function(o){return typeof o=="string"&&(o=b2[o]),o};const ko=Phaser.Utils.Objects.IsPlainObject,Ie=Phaser.Utils.Objects.GetValue;class Wt extends us{constructor(t,e,r,i,s,a,n){ko(e)?(n=e,e=Ie(n,"x",0),r=Ie(n,"y",0),i=Ie(n,"width",void 0),s=Ie(n,"height",void 0),a=Ie(n,"orientation",0)):ko(i)?(n=i,i=Ie(n,"width",void 0),s=Ie(n,"height",void 0),a=Ie(n,"orientation",0)):ko(a)&&(n=a,a=Ie(n,"orientation",0)),a===void 0&&(a=0),super(t,e,r,i,s,n),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(a),this.setItemSpacing(Ie(n,"space.item",0)),this.setRTL(Ie(n,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=su(t),this}setItemSpacing(t){return this.space.item=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=F2.call(this)),this._childrenProportion}}Object.assign(Wt.prototype,Kg);it.register("sizer",function(o,t,e,r,i,s){var a=new Wt(this.scene,o,t,e,r,i,s);return this.scene.add.existing(a),a});st(window,"RexPlugins.UI.Sizer",Wt);var Zg=function(){return Array.prototype.reduce.call(arguments,D2,0)},D2=function(o,t){return o+t},w2=function(){if(this.rexSizer.hidden)return 0;for(var o=0,t,e=this.sizerChildren,r,i,s,a,n=0;n<this.columnCount;n++){if(a=this.columnProportions[n],t=0,a===0){for(var h=0;h<this.rowCount;h++)r=e[h*this.columnCount+n],r&&(r.rexSizer.hidden||(i=r.rexSizer.padding,s=this.getChildWidth(r)+i.left+i.right,t=Math.max(t,s)));o+=t}this.columnWidth[n]=t}return o+Zg(this.space.left,...this.space.column,this.space.right)},I2=function(){if(this.rexSizer.hidden)return 0;for(var o=0,t,e=this.sizerChildren,r,i,s,a,n=0;n<this.rowCount;n++){if(a=this.rowProportions[n],t=0,a===0){for(var h=0;h<this.columnCount;h++)r=e[n*this.columnCount+h],r&&(r.rexSizer.hidden||(s=r.isRexSizer?Math.max(r.minHeight,r.childrenHeight):r.hasOwnProperty("minHeight")?r.minHeight:Pt(r),i=r.rexSizer.padding,s+=i.top+i.bottom,t=Math.max(t,s)));o+=t}this.rowHeight[n]=t}return o+Zg(this.space.top,...this.space.row,this.space.bottom)},B2=function(o,t){var e,r=o.rexSizer;if(r.expand){var i=r.padding;e=t-i.left-i.right}return e},G2=function(o,t){var e,r=o.rexSizer;if(r.expand){var i=r.padding;e=t-i.top-i.bottom}return e},N2=function(o){o===void 0&&(o=[]);for(var t=this.sizerChildren,e,r=0,i=t.length;r<i;r++)e=t[r],e&&e.isRexSizer&&o.push(e);return o},z2=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Xn.call(this),this},V2=function(){for(var o,t,e,r=this.innerLeft,i=this.innerTop,s=r,a=i,n,h,u,l,f,c,d=this.space.column,v=this.space.row,p,g,m=0;m<this.rowCount;m++){g=this.getRowHeight(m),s=r;for(var x=0;x<this.columnCount;x++){if(p=this.getColumnWidth(x),o=this.getChildAt(x,m),!o||o.rexSizer.hidden){s+=p+d[x];continue}Hn.call(this,o),f=this.getExpandedChildWidth(o,p),c=this.getExpandedChildHeight(o,g),o.isRexSizer?(o.runLayout(this,f,c),Kl(o,this)):wi(o,f,c),t=o.rexSizer,e=t.padding,n=s+e.left,u=p-e.left-e.right,h=a+e.top,l=g-e.top-e.bottom,$n.call(this,o,n,h,u,l,t.align),s+=p+d[x]}a+=g+v[m]}},Y2=function(t){var t=Vl.call(this,t);if(this.proportionWidthLength===void 0){var e=this.totalColumnProportions;if(e>0){var r=t-this.childrenWidth;r>=0&&(this.proportionWidthLength=r/e)}else this.proportionWidthLength=0}return t},W2=function(o,e){var e=Yl.call(this,o,e);if(this.proportionHeightLength===void 0){var r=this.totalRowProportions;if(r>0){var i=e-this.childrenHeight;i>=0&&(this.proportionHeightLength=i/r)}else this.proportionHeightLength=0}return e},U2=function(o){var t,e,r;for(var i in this.sizerChildren)t=this.sizerChildren[i],t&&t.isRexSizer&&!t.ignoreLayout&&(r=this.getColumnWidth(parseInt(i)%this.columnCount),e=this.getExpandedChildWidth(t,r),e=t.resolveWidth(e),t.resolveChildrenWidth(e))},X2=function(o){var t,e,r;for(var i in this.sizerChildren)t=this.sizerChildren[i],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(r=this.getColumnWidth(parseInt(i)%this.columnCount),e=this.getExpandedChildWidth(t,r),t.isRexSizer&&(e=t.resolveWidth(e)),t.runWidthWrap(e));return this};const H2=Phaser.Utils.Objects.IsPlainObject,Cs=Phaser.Utils.Objects.GetValue,Hd=Phaser.Display.Align.CENTER;var $2=function(o,t,e,r,i){if(typeof o=="number"||typeof t=="number")if(o===void 0){for(var s,a=0;a<r;a++)if(s=t*r+a,!e[s])return s}else if(t===void 0){for(var s,a=0;a<i;a++)if(s=a*r+o,!e[s])return s}else{var s=t*r+o;if(!e[s])return s}else if(t===!0){for(var s,a=0;a<r;a++)for(var n=0;n<i;n++)if(s=n*r+a,!e[s])return s}else for(var a=0,h=e.length;a<h;a++)if(!e[a])return a;return null},k2=function(o,t,e,r,i,s,a){if(Un.call(this,o),H2(t)){var h=t;t=Cs(h,"column",void 0),e=Cs(h,"row",void 0),r=Cs(h,"align",Hd),i=Cs(h,"padding",0),s=Cs(h,"expand",!1),a=Cs(h,"key",void 0)}var n=$2(t,e,this.sizerChildren,this.columnCount,this.rowCount);if(n===null)return this;typeof r=="string"&&(r=ba[r]),r===void 0&&(r=Hd),i===void 0&&(i=0),s===void 0&&(s=!0);var h=this.getSizerConfig(o);return h.align=r,h.padding=Us(i),h.expand=s,this.sizerChildren[n]=o,a!==void 0&&this.addChildrenMap(a,o),this},K2={add:k2},Ls=function(o,t,e,r){e===void 0&&(e=0),r===void 0&&(r=o.length-1);for(var i=e;i<=r;i++)o[i]=t;return o},Z2={remove(o,t){if(this.getParentSizer(o)!==this)return this;var e=this.sizerChildren.indexOf(o);return e!==-1&&(this.sizerChildren[e]=null),Va.call(this,o,t),this},removeAt(o,t,e){var r=this.getChildAt(o,t);return r&&this.remove(r,e),this},removeAll(o){for(var t=this.sizerChildren.length-1;t>=0;t--){var e=this.sizerChildren[t];!e||this.remove(e,o)}return this},clear(o){return Ls(this.sizerChildren,null),Ya.call(this,o),this}};const $d=Phaser.Utils.Objects.GetValue;var J2=function(o,t,e,r,i){if(e===void 0&&(e=0),r===void 0&&(r=0),this.columnCount=o,this.rowCount=t,this.gridCount=o*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=o*t,Ls(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=o,typeof e=="number")Ls(this.columnProportions,e);else for(var s=0;s<o;s++)this.columnProportions[s]=e[s]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof r=="number")Ls(this.rowProportions,r);else for(var s=0;s<t;s++)this.rowProportions[s]=r[s]||0;this.columnWidth=[],this.columnWidth.length=o,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=o-1;var a=$d(i,"column",0);if(typeof a=="number")Ls(this.space.column,a);else for(var s=0,n=this.space.column.length;s<n;s++)this.space.column[s]=a[s]||0;this.space.row=[],this.space.row.length=t-1;var h=$d(i,"row",0);if(typeof h=="number")Ls(this.space.row,h);else for(var s=0,n=this.space.row.length;s<n;s++)this.space.row[s]=h[s]||0;return this},Jg={getChildrenWidth:w2,getChildrenHeight:I2,getExpandedChildWidth:B2,getExpandedChildHeight:G2,getChildrenSizers:N2,preLayout:z2,layoutChildren:V2,resolveWidth:Y2,resolveHeight:W2,resolveChildrenWidth:U2,runWidthWrap:X2,resetGrid:J2};Object.assign(Jg,K2,Z2);var Q2=function(){for(var o=0,t,e=0;e<this.columnCount;e++)t=this.columnProportions[e],t>0&&(o+=t);return o},j2=function(){for(var o=0,t,e=0;e<this.rowCount;e++)t=this.rowProportions[e],t>0&&(o+=t);return o};const Cr=Phaser.Utils.Objects.IsPlainObject,Lt=Phaser.Utils.Objects.GetValue;class Yi extends us{constructor(t,e,r,i,s,a,n,h,u,l){Cr(e)?(l=e,e=Lt(l,"x",0),r=Lt(l,"y",0),i=Lt(l,"width",void 0),s=Lt(l,"height",void 0),a=Lt(l,"column",0),n=Lt(l,"row",0),h=Lt(l,"columnProportions",0),u=Lt(l,"rowProportions",0)):Cr(i)?(l=i,i=Lt(l,"width",void 0),s=Lt(l,"height",void 0),a=Lt(l,"column",0),n=Lt(l,"row",0),h=Lt(l,"columnProportions",0),u=Lt(l,"rowProportions",0)):Cr(a)?(l=a,a=Lt(l,"column",0),n=Lt(l,"row",0),h=Lt(l,"columnProportions",0),u=Lt(l,"rowProportions",0)):Cr(h)&&(l=h,h=Lt(l,"columnProportions",0),u=Lt(l,"rowProportions",0)),super(t,e,r,i,s,l),this.type="rexGridSizer",this.resetGrid(a,n,h,u,Lt(l,"space",void 0)),this.addChildrenMap("items",this.sizerChildren);var f=Lt(l,"createCellContainerCallback");if(f)for(var r=0,c=this.rowCount;r<c;r++)for(var e=0,d=this.columnCount;e<d;e++){var v={column:e,row:r},p=f(t,e,r,v);p&&this.add(p,v)}}destroy(t){!this.scene||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setColumnProportion(t,e){return t>=this.columnProportions.length?this:(this.columnProportions[t]=e,this)}setRowProportion(t,e){return t>=this.rowProportions.length?this:(this.rowProportions[t]=e,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=Q2.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=j2.call(this)),this._totalRowProportions}getChildAt(t,e){return this.sizerChildren[e*this.columnCount+t]}childToGridIndex(t,e){if(!t)return null;var r=this.sizerChildren.indexOf(t);return r===-1?null:(e===void 0&&(e={}),e.x=r%this.columnCount,e.y=Math.floor(r/this.columnCount),e)}getColumnWidth(t){var e=this.columnProportions[t],r=e===0?this.columnWidth[t]:e*this.proportionWidthLength;return r}getRowHeight(t){var e=this.rowProportions[t],r=e===0?this.rowHeight[t]:e*this.proportionHeightLength;return r}}Object.assign(Yi.prototype,Jg);it.register("gridSizer",function(o,t,e,r,i,s,a,n,h){var u=new Yi(this.scene,o,t,e,r,i,s,a,n,h);return this.scene.add.existing(u),u});st(window,"RexPlugins.UI.GridSizer",Yi);var q2=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},_2=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},tR=function(o){o===void 0&&(o=[]);for(var t=this.sizerChildren,e,r=0,i=t.length;r<i;r++)e=t[r],e!==`
`&&e.isRexSizer&&o.push(e);return o},eR=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,Xn.call(this),this},iR=function(){for(var o=this.innerWidth,t=this.justifyPercentage,e,r,i,s=0,a=this.innerLeft,n=this.innerTop,h=a,u=n,l,f,c,d,v=this.widthWrapResult.lines,p,g,m,x=0,y=v.length;x<y;x++){switch(p=v[x],g=p.children,this.rtl&&g.reverse(),m=o-p.width,this.align){case 0:break;case 1:h+=m;break;case 2:h+=m/2;break;case 3:s=Ko(o,m,t,g.length);break;case 4:s=Ko(o,m,t,g.length),s===0&&(h+=m);break;case 5:s=Ko(o,m,t,g.length),s===0&&(h+=m/2);break}for(var T=0,S=g.length;T<S;T++)e=g[T],!e.rexSizer.hidden&&(r=e.rexSizer,i=r.padding,Hn.call(this,e),l=h+i.left,T>0&&(l+=this.space.item),f=u+i.top,c=Dt(e),d=Pt(e),h=l+c+i.right+s,$n.call(this,e,l,f,c,d,r.align));h=a,u+=p.height+this.space.line}},Ko=function(o,t,e,r){return t/o<=e?t/(r-1):0},sR=function(o,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var e=this.sizerChildren,r,i,s,a=0,n=t.lines,h=void 0,u,l=0,f=e.length;l<f;l++){if(r=e[l],r===`
`)r=void 0,i=0,u=!0;else{if(r.rexSizer.hidden)continue;r.isRexSizer&&r.layout(),i=nR(r),u=a<i||h===void 0}u&&(h&&(h.width=o-(a+this.space.item),t.width=Math.max(t.width,h.width),t.height+=h.height+this.space.line),h={children:[],height:0},n.push(h),a=o),a-=i+this.space.item,r&&(h.children.push(r),s=rR(r),h.height=Math.max(h.height,s))}return h&&(h.width=o-(a+this.space.item),t.width=Math.max(t.width,h.width),t.height+=h.height),t},nR=function(o){var t=o.rexSizer.padding;return Dt(o)+t.left+t.right},rR=function(o){var t=o.rexSizer.padding;return Pt(o)+t.top+t.bottom},aR=function(o){var t=o-this.space.left-this.space.right;this.widthWrapResult=sR.call(this,t,this.widthWrapResult),Rg.call(this,o)};const kd=Phaser.Math.Distance.Between;var oR=function(o,t){var e=this.sizerChildren;if(e.length===0)return-1;for(var r=-1,i=1/0,s=0,a=e.length;s<a;s++){var n=e[s];if(!(Math.abs(n.centerY-t)>n.height/2)){var u=kd(n.left,n.centerY,o,t);i>u&&(i=u,r=s);var h=e[s+1];if(!(h&&h.y===n.y)){var u=kd(n.right,n.centerY,o,t);i>u&&(i=u,r=s+1)}}}return r};const hR=Phaser.Utils.Objects.IsPlainObject,Zo=Phaser.Utils.Objects.GetValue,lR=Phaser.Display.Align.CENTER;var Jo=function(o,t,e,r){if(o===`
`)return this.addNewLine(),this;if(Un.call(this,o),hR(t)){var i=t;t=Zo(i,"padding",0),e=Zo(i,"key",void 0),r=Zo(i,"index",void 0)}t===void 0&&(t=0);var i=this.getSizerConfig(o);return i.align=lR,i.padding=Us(t),r===void 0||r>=this.sizerChildren.length?this.sizerChildren.push(o):this.sizerChildren.splice(r,0,o),e!==void 0&&this.addChildrenMap(e,o),this},uR={add(o,t,e){if(Fe(o))for(var r=o,i=0,s=r.length;i<s;i++)Jo.call(this,r[i],t);else Jo.call(this,o,t,e);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(o,t,e,r){return Jo.call(this,t,e,r,o),this},insertAtPosition(o,t,e,r,i){var s=oR.call(this,o,t);return s===-1&&(s=void 0),this.insert(s,e,r,i),this}};const fR=Phaser.Utils.Array.Remove;var dR={remove(o,t){return this.getParentSizer(o)!==this?this:(fR(this.sizerChildren,o),Va.call(this,o,t),this)},removeAll(o){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],o);return this},clear(o){return this.sizerChildren.length=0,Ya.call(this,o),this}},Qg={getChildrenWidth:q2,getChildrenHeight:_2,getChildrenSizers:tR,preLayout:eR,layoutChildren:iR,runWidthWrap:aR};Object.assign(Qg,uR,dR);var cR=function(o){o===void 0&&(o=this.sizerChildren);for(var t=0,e,r,i=0,s=o.length;i<s;i++)e=o[i],e!==`
`&&(r=this.getChildWidth(e),t=Math.max(r,t));return t},vR=function(o){o===void 0&&(o=this.sizerChildren);for(var t=0,e,r,i=0,s=o.length;i<s;i++)e=o[i],e!==`
`&&(r=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:Pt(e),t=Math.max(r,t));return t};const Kd=Phaser.Utils.Objects.IsPlainObject,ye=Phaser.Utils.Objects.GetValue;class fs extends us{constructor(t,e,r,i,s,a){Kd(e)?(a=e,e=ye(a,"x",0),r=ye(a,"y",0),i=ye(a,"width",void 0),s=ye(a,"height",void 0)):Kd(i)&&(a=i,i=ye(a,"width",void 0),s=ye(a,"height",void 0)),super(t,e,r,i,s,a),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(ye(a,"orientation",0)),this.setItemSpacing(ye(a,"space.item",0)),this.setLineSpacing(ye(a,"space.line",0)),this.setAlign(ye(a,"align",0)),this.setJustifyPercentage(ye(a,"justifyPercentage",.25)),this.setRTL(ye(a,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=su(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setAlign(t){return typeof t=="string"&&(t=pR[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=cR.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=vR.call(this)),this._maxChildHeight}}const pR={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(fs.prototype,Qg);it.register("fixWidthSizer",function(o,t,e,r,i){var s=new fs(this.scene,o,t,e,r,i);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.FixWidthSizer",fs);it.register("overlapSizer",function(o,t,e,r,i){var s=new Vi(this.scene,o,t,e,r,i);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.OverlapSizer",Vi);it.register("space",function(){var o=new iu(this.scene);return o});st(window,"RexPlugins.UI.Space",iu);var On=function(o,t,e,r){var i=new Wh(t,e,r);if(o&&!o.isRexSizer){var s=i.createGeometryMask();o.setMask(s),this.once("destroy",function(){o.setMask(),s.destroy()})}return this.pin(i),i};const Be=Phaser.Utils.Objects.GetValue;class Xa extends Wt{constructor(t,e){super(t,e),this.type="rexLabel";var r=Be(e,"background",void 0),i=Be(e,"icon",void 0),s=Be(e,"iconMask",void 0),a=Be(e,"text",void 0),n=Be(e,"action",void 0),h=Be(e,"actionMask",void 0),u=Be(e,"align",void 0),l=Be(e,"space.icon",0),f=Be(e,"space.text",0);if(r&&this.addBackground(r),(u==="right"||u==="bottom"||u==="center")&&this.addSpace(),i){var c;this.orientation===0?(a||n)&&(c={right:l}):(a||n)&&(c={bottom:l}),this.add(i,0,"center",c),s&&(s=On.call(this,i,i,1))}if(a){var d=Be(e,"expandTextWidth",!1),v=Be(e,"expandTextHeight",!1),p,c,g;this.orientation===0?(p=d?1:0,n&&(c={right:f}),g=v):(p=v?1:0,n&&(c={bottom:f}),g=d),this.add(a,p,"center",c,g)}n&&(this.add(n),h&&(h=On.call(this,n,n,1))),u==="center"&&this.addSpace(),this.addChildrenMap("background",r),this.addChildrenMap("icon",i),this.addChildrenMap("iconMask",s),this.addChildrenMap("text",a),this.addChildrenMap("action",n),this.addChildrenMap("actionMask",h)}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var e=this.childrenMap.text;e!==void 0&&e.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setTexture(t,e){var r=this.childrenMap.icon;if(r!==void 0)return r.setTexture(t,e),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,e,r){if(this.ignoreLayout)return this;super.runLayout(t,e,r);var i=this.childrenMap.iconMask;i&&(i.setPosition(),this.resetChildPositionState(i));var s=this.childrenMap.actionMask;return s&&(s.setPosition(),this.resetChildPositionState(s)),this}resize(t,e){super.resize(t,e);var r=this.childrenMap.iconMask;r&&r.resize();var i=this.childrenMap.actionMask;return i&&i.resize(),this}}it.register("label",function(o){var t=new Xa(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Label",Xa);const Er=Wt.prototype.add,Zd=Wt.prototype.addSpace;var Qo=function(o){var t=!o.isRexSpace,e=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var r=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");r&&Zd.call(this),Er.call(this,o,{proportion:e,expand:!0});var i=!this.buttonsExpand&&this.buttonsAlign==="center";i&&Zd.call(this),this.hasTailSpace=i}else Er.call(this,o,{proportion:e,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var s=this.sizerChildren.length-1;Er.call(this,o,{index:s,proportion:e,expand:!0})}else Er.call(this,o,{proportion:e,expand:!0});return t&&this.buttonGroup.add(o),this},gR={addButton(o){if(Fe(o))for(var t=o,e=0,r=t.length;e<r;e++)Qo.call(this,t[e]);else Qo.call(this,o);return this},addButtons(o){for(var t=0,e=o.length;t<e;t++)Qo.call(this,o[t]);return this}};const mR=Phaser.Utils.Array.Remove,xR=Wt.prototype.remove,yR=Wt.prototype.clear;var jo=function(o,t){if(this.getParentSizer(o)!==this)return this;var e=this.buttonGroup.buttons;return mR(e,o),xR.call(this,o,t),this},TR={remove(o,t){if(Fe(o))for(var e=o,r=0,i=e.length;r<i;r++)jo.call(this,e[r],t);else jo.call(this,o,t);return this},clear(o){var t=this.buttonGroup.buttons;return t.length=0,yR.call(this,o),this},removeButton(e,t){var e=this.getButton(e);return e?(this.remove(e,t),this):this},clearButtons(o){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)jo.call(this,t[e],o);return this}},SR={add(o){return this.buttons.push(o),o._buttonBehavior=new Xs(o,this.clickConfig),o._buttonBehavior.on("click",function(t,e,r,i){this.fireEvent("button.click",e,r,i)},this).on("enable",function(t,e){this.fireEvent("button.enable",e)},this).on("disable",function(t,e){this.fireEvent("button.disable",e)},this),o.on("pointerover",function(t,e,r,i){this.fireEvent("button.over",o,t,i)},this).on("pointerout",function(t,e){this.fireEvent("button.out",o,t,e)},this),this},addMultiple(o){for(var t=0,e=o.length;t<e;t++)this.add(gameObject[t]);return this}},CR=function(o,t,e,r){var i;if(typeof t=="number"){if(i=t,t=this.buttons[i],!t)return}else if(i=this.buttons.indexOf(t),i===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(o,t,i,e,r),this.groupName!==void 0?this.eventEmitter.emit(o,t,this.groupName,i,e,r):this.eventEmitter.emit(o,t,i,e,r)};const Fs=Phaser.Utils.Objects.GetValue;var Jd=function(o,t){t===void 0&&(t=!1);var e=Fs(o,"dataManager",void 0),r,i;if(r=Fs(o,"setValueCallback",void 0),i=Fs(o,"setValueCallbackScope",void 0),r===void 0&&(r=Fs(o,"setButtonStateCallback",void 0),i=Fs(o,"setButtonStateCallbackScope",void 0)),e===void 0){var s=this.parent;s.setDataEnabled(),e=s.data}this.buttons.forEach(function(a){var n=a.name;r&&e.events.on(`changedata-${n}`,function(h,u,l){i?r.call(i,a,u,l):r(a,u,l)}),e.set(n,void 0),e.set(n,t)}),this.dataManager=e},ER={setType(o){var t=Fs(o,"type",void 0);switch(this.buttonsType=t,t){case"radio":this.setRadioType(o);break;case"checkboxes":this.setCheckboxesType(o);break}return this},setRadioType(o){Jd.call(this,o);var t=void 0,e=this.parent,r=this.buttons,i=this.dataManager;return Object.defineProperty(e,"value",{get:function(){return t},set:function(s){s!==t&&(t=s,r.forEach(function(a){var n=a.name,h=i.get(n);n===s?h||i.set(n,!0):h&&i.set(n,!1)}))},enumerable:!0,configurable:!0}),e.on("button.click",function(s){e.value=s.name}),this},setCheckboxesType(o){Jd.call(this,o);var t=this.parent,e=this.dataManager;return t.on("button.click",function(r){e.toggle(r.name)}),this},setSelectedButtonName(o){return this.parent.value=o,this},getSelectedButtonName(){return this.parent.value},setButtonState(o,t){return t===void 0&&(t=!0),this.dataManager.set(o,t),this},getButtonState(o){return this.dataManager.get(o)}},PR=function(o,t){if(o)if(Fe(o)){for(var e,r=0,i=o.length;r<i;r++)if(e=Qd(o[r],t),e)return e}else{var e;for(var s in o)if(e=Qd(o[s],t),e)return e}else return null},Qd=function(o,t){return o?o.hasOwnProperty("name")?o.name===t?o:null:GetElementByName(o,t):null},Ha={getButton(o){var t=this.buttons,e,r=typeof o;switch(r){case"number":e=t[o];break;case"string":e=PR(t,o);break;default:e=o,t.indexOf(e)===-1&&(e=void 0);break}return e},setButtonEnable(o,t){var e=this.buttons;if(o===void 0||typeof o=="boolean"){t=o;for(var r=0,i=e.length;r<i;r++)e[r]._buttonBehavior.setEnable(t)}else this.getButton(o)._buttonBehavior.setEnable(t);return this},toggleButtonEnable(o){var t=this.buttons;if(o===void 0||typeof o=="boolean")for(var e=0,r=t.length;e<r;e++)t[e]._buttonBehavior.toggleEnable();else this.getButton(o)._buttonBehavior.toggleEnable();return this},getButtonEnable(o){return o===void 0&&(o=0),this.getButton(o)._buttonBehavior.enable},emitButtonClick(o){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",o),this},showButton(o){return Fi(this.getButton(o)),this},hideButton(o){return bi(this.getButton(o)),this},isButtonShown(o){return Xl(this.getButton(o)),this},forEachButtton(o,t){for(var e=this.buttons,r=0,i=e.length;r<i;r++)t?o.call(t,e[r],r,e):o(e[r],r,e);return this}};class $a{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var MR={fireEvent:CR};Object.assign($a.prototype,SR,ER,Ha,MR);var nu={setSelectedButtonName(o){return this.buttonGroup.setSelectedButtonName(o),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(o,t){return this.buttonGroup.setButtonState(o,t),this},getButtonState(o){return this.buttonGroup.getButtonState(o)}};const Ji=Phaser.Utils.Objects.GetValue;class Re extends Wt{constructor(t,e){e===void 0&&(e={});var r=e.space;typeof r=="number"&&(e.space={item:r}),super(t,e),this.type="rexButtons",this.buttonGroup=new $a({parent:this,eventEmitter:Ji(e,"eventEmitter",this),groupName:Ji(e,"groupName",void 0),clickConfig:Ji(e,"click",void 0)});var i=Ji(e,"background",void 0),s=Ji(e,"buttons",void 0);this.buttonsExpand=Ji(e,"expand",!1),this.buttonsAlign=Ji(e,"align",void 0),i&&this.addBackground(i),s&&this.addButtons(s),this.buttonGroup.setType(e),this.addChildrenMap("background",i),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Re.prototype,gR,TR,Ha,nu);it.register("buttons",function(o){var t=new Re(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Buttons",Re);const AR=Yi.prototype.add;var RR={addButton(o,t,e){return AR.call(this,o,t,e,void 0,0,this.buttonsExpand),this.buttonGroup.add(o),this},addButtons(o,t){for(var e=0,r=o;e<r;e++)this.addButton(o[e],void 0,t);return this}};const OR=Phaser.Utils.Array.Remove,LR=Yi.prototype.remove,FR=Yi.prototype.clear;var qo=function(e,t){var e=this.getButton(e);if(!e)return this;var r=this.buttonGroup.buttons;return OR(r,e),LR.call(this,e,t),this},bR={remove(o,t){if(Fe(o))for(var e=o,r=0,i=e.length;r<i;r++)qo.call(this,e[r],t);else qo.call(this,o,t);return this},clear(o){var t=this.buttonGroup.buttons;return t.length=0,FR.call(this,o),this},removeButton(o,t){return this.remove(o,t),this},clearButtons(o){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)qo.call(this,t[e],o);return this}};const He=Phaser.Utils.Objects.GetValue;class ru extends Yi{constructor(t,e){e===void 0&&(e={});var r=He(e,"row",0),i=He(e,"col",0),s=He(e,"createCellContainerCallback"),a=He(e,"buttons",void 0),n=He(e,"expand",!0),h=n?1:0;if(s&&(e.createCellContainerCallback=void 0),a!==void 0){r=Math.max(r,a.length);for(var u=0,l=a.length;u<l;u++)i=Math.max(i,a[u].length)}e.row=r,e.column=i,e.columnProportions=h,e.rowProportions=h,super(t,e),this.type="rexGridButtons",this.buttonGroup=new $a({parent:this,eventEmitter:He(e,"eventEmitter",this),groupName:He(e,"groupName",void 0),clickConfig:He(e,"click",void 0)});var f=He(e,"background",void 0);if(this.buttonsExpand=n,He(e,"space",void 0),f&&this.addBackground(f),a)for(var c,d,v=0,p=a.length;v<p;v++){c=a[v];for(var g=0,m=c.length;g<m;g++)d=c[g],d&&this.addButton(d,g,v)}else if(s)for(var x=0;x<r;x++)for(var y=0;y<i;y++){var d=s(t,y,x);d&&this.addButton(d,y,x)}this.buttonGroup.setType(e),this.addChildrenMap("background",f),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(ru.prototype,RR,bR,Ha,nu);it.register("gridButtons",function(o){var t=new ru(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.GridButtons",ru);const jg=fs.prototype.add;var Pr=function(o){return jg.call(this,o),this.buttonGroup.add(o),this},DR={addButton(o){if(Fe(o))for(var t=o,e=0,r=t.length;e<r;e++)Pr.call(this,t[e]);else Pr.call(this,o);return this},addButtons(o){if(Fe(o[0]))for(var t=o,e,r=0,i=t.length-1;r<=i;r++){e=t[r];for(var s=0,a=e.length;s<a;s++)Pr.call(this,e[s]);r>i&&jg.addNewLine(this)}else for(var s=0,a=o.length;s<a;s++)Pr.call(this,o[s]);return this}};const wR=Phaser.Utils.Array.Remove,IR=fs.prototype.remove,BR=fs.prototype.clear;var _o=function(e,t){var e=this.getButton(e);if(!e)return this;var r=this.buttonGroup.buttons;return wR(r,e),IR.call(this,e,t),this},GR={remove(o,t){if(Fe(o))for(var e=o,r=0,i=e.length;r<i;r++)_o.call(this,e[r],t);else _o.call(this,o,t);return this},clear(o){var t=this.buttonGroup.buttons;return t.length=0,BR.call(this,o),this},removeButton(o,t){return this.remove(o,t),this},clearButtons(o){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)_o.call(this,t[e],o);return this}};const Es=Phaser.Utils.Objects.GetValue;class au extends fs{constructor(t,e){e===void 0&&(e={});var r=e.space;typeof r=="number"&&(e.space={item:r,line:r}),super(t,e),this.type="rexFixWidthButtons",this.buttonGroup=new $a({parent:this,eventEmitter:Es(e,"eventEmitter",this),groupName:Es(e,"groupName",void 0),clickConfig:Es(e,"click",void 0)});var i=Es(e,"background",void 0),s=Es(e,"buttons",void 0);this.buttonsAlign=Es(e,"align",void 0),i&&this.addBackground(i),s&&this.addButtons(s),this.buttonGroup.setType(e),this.addChildrenMap("background",i),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(au.prototype,DR,GR,Ha,nu);it.register("fixWidthButtons",function(o){var t=new au(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.FixWidthButtons",au);var NR={getChoice(o){return this.childrenMap.choicesSizer.getButton(o)},getAction(o){return this.childrenMap.actionsSizer.getButton(o)},getToolbar(o){return this.childrenMap.toolbarSizer.getButton(o)},getLeftToolbar(o){return this.childrenMap.leftToolbarSizer.getButton(o)},setChoiceEnable(o,t){return this.childrenMap.choicesSizer.setButtonEnable(o,t),this},setActionEnable(o,t){return this.childrenMap.actionsSizer.setButtonEnable(o,t),this},setToolbarEnable(o,t){return this.childrenMap.toolbarSizer.setButtonEnable(o,t),this},setLeftToolbarEnable(o,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(o,t),this},toggleChoiceEnable(o){return this.childrenMap.choicesSizer.toggleButtonEnable(o),this},toggleActionEnable(o){return this.childrenMap.actionsSizer.toggleButtonEnable(o),this},toggleToolbarEnable(o){return this.childrenMap.toolbarSizer.toggleButtonEnable(o),this},toggleLeftToolbarEnable(o){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(o),this},getChoiceEnable(o){return this.childrenMap.choicesSizer.getButtonEnable(o)},getActionEnable(o){return this.childrenMap.actionsSizer.getButtonEnable(o)},getToolbarEnable(o){return this.childrenMap.toolbarSizer.getButtonEnable(o)},getLeftToolbarEnable(o){return this.childrenMap.leftToolbarSizer.getButtonEnable(o)},emitChoiceClick(o){return this.childrenMap.choicesSizer.emitButtonClick(o),this},emitActionClick(o){return this.childrenMap.actionsSizer.emitButtonClick(o),this},emitToolbarClick(o){return this.childrenMap.toolbarSizer.emitButtonClick(o),this},emitLeftToolbarClick(o){return this.childrenMap.leftToolbarSizer.emitButtonClick(o),this},showChoice(o){return this.childrenMap.choicesSizer.showButton(o),this},showAction(o){return this.childrenMap.actionsSizer.showButton(o),this},showToolbar(o){return this.childrenMap.toolbarSizer.showButton(o),this},showLeftToolbar(o){return this.childrenMap.leftToolbarSizer.showButton(o),this},hideChoice(o){return this.childrenMap.choicesSizer.hideButton(o),this},hideAction(o){return this.childrenMap.actionsSizer.hideButton(o),this},hideToolbar(o){return this.childrenMap.toolbarSizer.hideButton(o),this},hideLeftToolbar(o){return this.childrenMap.leftToolbarSizer.hideButton(o),this},addChoice(o){return this.childrenMap.choicesSizer.addButton(o),this},addAction(o){return this.childrenMap.actionsSizer.addButton(o),this},addToolbar(o){return this.childrenMap.toolbarSizer.addButton(o),this},addLeftToolbar(o){return this.childrenMap.leftToolbarSizer.addButton(o),this},removeChoice(o,t){return this.childrenMap.choicesSizer.removeButton(o,t),this},removeAction(o,t){return this.childrenMap.actionsSizer.removeButton(o,t),this},removeToolbar(o,t){return this.childrenMap.toolbarSizer.removeButton(o,t),this},removeLeftToolbar(o,t){return this.childrenMap.leftToolbarSizer.removeButton(o,t),this},clearChoices(o){return this.childrenMap.choicesSizer.clearButtons(o),this},clearActions(o){return this.childrenMap.actionsSizer.clearButtons(o),this},clearToolbar(o){return this.childrenMap.toolbarSizer.clearButtons(o),this},clearLeftToolbar(o){return this.childrenMap.leftToolbarSizer.clearButtons(o),this},forEachChoice(o,t){return this.childrenMap.choicesSizer.forEachButtton(o,t),this},forEachAction(o,t){return this.childrenMap.actionsSizer.forEachButtton(o,t),this},forEachToolbar(o,t){return this.childrenMap.toolbarSizer.forEachButtton(o,t),this},forEachLeftToolbar(o,t){return this.childrenMap.leftToolbarSizer.forEachButtton(o,t),this}};const rt=Phaser.Utils.Objects.GetValue;class ou extends Wt{constructor(t,e){e===void 0&&(e={}),e.orientation=1,super(t,e),this.type="rexDialog",this.eventEmitter=rt(e,"eventEmitter",this);var r=rt(e,"background",void 0),i=rt(e,"title",void 0),s=rt(e,"toolbar",void 0),a=rt(e,"toolbarBackground",void 0),n=rt(e,"leftToolbar",void 0),h=rt(e,"leftToolbarBackground",void 0),u=rt(e,"content",void 0),l=rt(e,"description",void 0),f,c=rt(e,"choices",void 0),d=rt(e,"choicesBackground",void 0),v,p=rt(e,"actions",void 0),g=rt(e,"actionsBackground",void 0),m=rt(e,"click",void 0);r&&this.addBackground(r);var x;s&&(x=new Re(t,{groupName:"toolbar",background:a,buttons:s,orientation:0,space:{item:rt(e,"space.toolbarItem",0)},click:m,eventEmitter:this.eventEmitter}));var y;if(n&&(y=new Re(t,{groupName:"leftToolbar",background:h,buttons:n,orientation:0,space:{item:rt(e,"space.leftToolbarItem",0)},click:m,eventEmitter:this.eventEmitter})),i&&!s&&!n){var T=rt(e,"align.title","center"),S=rt(e,"space.title",0),C;(u||l||c||p)&&(C={bottom:S});var E=rt(e,"expand.title",!0);this.add(i,{align:T,padding:C,expand:E})}if(s&&!i&&!n){var S=rt(e,"space.title",0),C;(u||l||c||p)&&(C={bottom:S});var E=rt(e,"expand.toolbar",!0);this.add(x,{align:"right",padding:C,expand:E})}if(n&&!i&&!s){var S=rt(e,"space.title",0),C;(u||l||c||p)&&(C={bottom:S});var E=rt(e,"expand.leftToolbar",!0);this.add(y,{align:"left",padding:C,expand:E})}if(i&&(s||n)){var P=new Wt(t,{orientation:0});y&&P.add(y,{align:"right",expand:!1});var T=rt(e,"align.title","left"),E=rt(e,"expand.title",!0);!E&&(T==="right"||T==="center")&&P.addSpace();var C={left:rt(e,"space.titleLeft",0),right:rt(e,"space.titleRight",0)},M=E?1:0;P.add(i,{proportion:M,align:"center",padding:C,expand:E}),!E&&(T==="left"||T==="center")&&P.addSpace(),x&&P.add(x,{align:"right",expand:!1});var S=rt(e,"space.title",0),C;(u||l||c||p)&&(C={bottom:S}),this.add(P,{align:"center",padding:C,expand:!0})}if(u){var T=rt(e,"align.content","center"),R=rt(e,"space.content",0),C={left:rt(e,"space.contentLeft",0),right:rt(e,"space.contentRight",0),bottom:l||c||p?R:0},E=rt(e,"expand.content",!0);this.add(u,{align:T,padding:C,expand:E})}if(l){var T=rt(e,"align.description","center"),A=rt(e,"space.description",0),C={left:rt(e,"space.descriptionLeft",0),right:rt(e,"space.descriptionRight",0),bottom:c||p?A:0},E=rt(e,"expand.description",!0);this.add(l,{align:T,padding:C,expand:E})}if(c){var T=rt(e,"align.choices","center");f=new Re(t,{groupName:"choices",background:d,buttons:c,orientation:1,space:{item:rt(e,"space.choice",0)},click:m,eventEmitter:this.eventEmitter,type:rt(e,"choicesType",void 0),setValueCallback:rt(e,"choicesSetValueCallback",void 0),setValueCallbackScope:rt(e,"choicesSetValueCallbackScope",void 0)});var O=rt(e,"space.choices",0),C={left:rt(e,"space.choicesLeft",0),right:rt(e,"space.choicesRight",0),bottom:p?O:0},E=rt(e,"expand.choices",!0);this.add(f,{align:T,padding:C,expand:E})}if(p){v=new Re(t,{groupName:"actions",background:g,buttons:p,orientation:0,space:{item:rt(e,"space.action",0)},expand:rt(e,"expand.actions",!1),align:rt(e,"align.actions","center"),click:m,eventEmitter:this.eventEmitter});var C={left:rt(e,"space.actionsLeft",0),right:rt(e,"space.actionsRight",0)};this.add(v,{align:"center",padding:C,expand:!0})}this.addChildrenMap("background",r),this.addChildrenMap("title",i),this.addChildrenMap("toolbar",s),this.addChildrenMap("leftToolbar",n),this.addChildrenMap("content",u),this.addChildrenMap("description",l),this.addChildrenMap("choices",c),this.addChildrenMap("actions",p),this.addChildrenMap("choicesSizer",f),this.addChildrenMap("actionsSizer",v),this.addChildrenMap("toolbarSizer",x),this.addChildrenMap("leftToolbarSizer",y)}}Object.assign(ou.prototype,NR);it.register("dialog",function(o){var t=new ou(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Dialog",ou);var zR={getButtonsSizer(o){return this.childrenMap[`${o}ButtonsSizer`]},getButton(o,t){var e=this.getButtonsSizer(o);return e?e.getButton(t):void 0},setButtonEnable(o,t,e){return this.getButtonsSizer(o).setButtonEnable(t,e),this},setLeftButtonEnable(o,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(o,t),this},setRightButtonEnable(o,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(o,t),this},setTopButtonEnable(o,t){return this.childrenMap.topButtonsSizer.setButtonEnable(o,t),this},setBottomButtonEnable(o,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(o,t),this},toggleButtonEnable(o,t){return this.getButtonsSizer(o).toggleButtonEnable(t),this},toggleLeftButtonEnable(o){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(o),this},toggleRightButtonEnable(o){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(o),this},toggleTopButtonEnable(o){return this.childrenMap.topButtonsSizer.toggleButtonEnable(o),this},toggleBottomButtonEnable(o){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(o),this},getButtonEnable(o,t){return this.getButtonsSizer(o).getButtonEnable(t)},getLeftButtonEnable(o){return this.childrenMap.leftButtonsSizer.getButtonEnable(o)},getRightButtonEnable(o){return this.childrenMap.rightButtonsSizer.getButtonEnable(o)},getTopButtonEnable(o){return this.childrenMap.topButtonsSizer.getButtonEnable(o)},getBottomButtonEnable(o){return this.childrenMap.bottomButtonsSizer.getButtonEnable(o)},emitButtonClick(o,t){var e=this.getButtonsSizer(o);return e?(e.emitButtonClick(t),this):this},emitLeftButtonClick(o){return this.childrenMap.leftButtonsSizer.emitButtonClick(o),this},emitRightButtonClick(o){return this.childrenMap.rightButtonsSizer.emitButtonClick(o),this},emitTopButtonClick(o){return this.childrenMap.topButtonsSizer.emitButtonClick(o),this},emitBottomButtonClick(o){return this.childrenMap.bottomButtonsSizer.emitButtonClick(o),this},getLeftButton(o){return this.childrenMap.leftButtonsSizer.getButton(o)},getRightButton(o){return this.childrenMap.rightButtonsSizer.getButton(o)},getTopButton(o){return this.childrenMap.topButtonsSizer.getButton(o)},getBottomButton(o){return this.childrenMap.bottomButtonsSizer.getButton(o)},showButton(o,t){return Fi(this.getButton(o,t)),this},showLeftButton(o){return Fi(this.getLeftButton(o)),this},showRightButton(o){return Fi(this.getRightButton(o)),this},showTopButton(o){return Fi(this.getTopButton(o)),this},showBottomButton(o){return Fi(this.getBottomButton(o)),this},hideButton(o,t){return bi(this.getButton(o,t)),this},hideLeftButton(o){return bi(this.getLeftButton(o)),this},hideRightButton(o){return bi(this.getRightButton(o)),this},hideTopButton(o){return bi(this.getTopButton(o)),this},hideBottomButton(o){return bi(this.getBottomButton(o)),this},addButton(o,t){return this.getButtonsSizer(o).addButton(t),this},addLeftButton(o){return this.addButton("left",o),this},addRightButton(o){return this.addButton("right",o),this},addTopButton(o){return this.addButton("top",o),this},removeButton(o,t,e){return this.getButtonsSizer(o).removeButton(t,e),this},removeLeftButton(o,t){return this.removeButton("left",o,t),this},removeRightButton(o,t){return this.removeButton("right",o,t),this},removeTopButton(o,t){return this.removeButton("top",o,t),this},removeBottomButton(o,t){return this.removeButton("bottom",o,t),this},clearButtons(o,t){return this.getButtonsSizer(o).clearButtons(t),this},clearLeftButtons(o){return this.clearButtons("left",o),this},clearRightButtons(o){return this.clearButtons("right",o),this},clearTopButtons(o){return this.clearButtons("top",o),this},clearBottomButtonss(o){return this.clearButtons("bottom",o),this},forEachButton(o,t,e){return this.getButtonsSizer(o).forEachButtton(t,e),this},forEachLeftButton(o,t){return this.childrenMap.leftButtonsSizer.forEachButtton(o,t),this},forEachRightButton(o,t){return this.childrenMap.rightButtonsSizer.forEachButtton(o,t),this},forEachTopButton(o,t){return this.childrenMap.topButtonsSizer.forEachButtton(o,t),this},forEachBottomButton(o,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(o,t),this}};const At=Phaser.Utils.Objects.GetValue;class hu extends Yi{constructor(t,e){e===void 0&&(e={}),e.column=3,e.row=3,super(t,e),this.type="rexTabs",this.eventEmitter=At(e,"eventEmitter",this);var r=At(e,"background",void 0),i=At(e,"panel",void 0),s=At(e,"leftButtons",void 0),a=At(e,"leftButtonsBackground",void 0),n,h=At(e,"rightButtons",void 0),u=At(e,"rightButtonsBackground",void 0),l,f=At(e,"topButtons",void 0),c=At(e,"topButtonsBackground",void 0),d,v=At(e,"bottomButtons",void 0),p=At(e,"bottomButtonsBackground",void 0),g,m=At(e,"click",void 0);if(r&&this.addBackground(r),i&&this.add(i,1,1,"center",0,!0),s){var x=At(e,"space.leftButtonsOffset",0),y=At(e,"space.leftButton",0);n=new Re(t,{groupName:"left",background:a,buttons:s,orientation:1,space:{item:y},align:At(e,"align.leftButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:x};this.add(n,0,1,"top",T,!1)}if(h){var S=At(e,"space.rightButtonsOffset",0),C=At(e,"space.rightButton",0);l=new Re(t,{groupName:"right",background:u,buttons:h,orientation:1,space:{item:C},align:At(e,"align.rightButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:S};this.add(l,2,1,"top",T,!1)}if(f){var E=At(e,"space.topButtonsOffset",0),P=At(e,"space.topButton",0);d=new Re(t,{groupName:"top",background:c,buttons:f,orientation:0,space:{item:P},align:At(e,"align.topButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:E};this.add(d,1,0,"left",T,!1)}if(v){var M=At(e,"space.bottomButtonsOffset",0),R=At(e,"space.bottomButton",0);g=new Re(t,{groupName:"bottom",background:p,buttons:v,orientation:0,space:{item:R},align:At(e,"align.bottomButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:M};this.add(g,1,2,"left",T,!1)}this.addChildrenMap("background",r),this.addChildrenMap("panel",i),this.addChildrenMap("leftButtons",s),this.addChildrenMap("rightButtons",h),this.addChildrenMap("topButtons",f),this.addChildrenMap("bottomButtons",v),this.addChildrenMap("leftButtonsSizer",n),this.addChildrenMap("rightButtonsSizer",l),this.addChildrenMap("topButtonsSizer",d),this.addChildrenMap("bottomButtonsSizer",g)}}Object.assign(hu.prototype,zR);it.register("tabs",function(o){var t=new hu(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Tabs",hu);const jd=Phaser.Math.Percent;var qg=function(o,t,e){var r,i,s;return o.y===t.y?(r=Math.min(o.x,t.x),i=Math.max(o.x,t.x),s=jd(e.x,r,i)):o.x===t.x&&(r=Math.min(o.y,t.y),i=Math.max(o.y,t.y),s=jd(e.y,r,i)),s},VR=function(o,t,e){!this.enable||(th.x=t,th.y=e,this.value=qg(this.getStartPoint(),this.getEndPoint(),th))},th={},qd=function(o,t,e){if(!!this.enable&&!!o.isDown){eh.x=o.worldX,eh.y=o.worldY;var r=qg(this.getStartPoint(),this.getEndPoint(),eh);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-r)<.1?this.value=r:this.easeValueTo(r)}},eh={},_g=function(o,t){t===void 0&&(t=YR);var e=this.childrenMap.thumb,r=e.x,i=e.y;return Da(e,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,o),t.x=e.x,t.y=e.y,e.x=r,e.y=i,t},YR={};const WR=Phaser.Display.Align.LEFT_CENTER,UR=Phaser.Display.Align.TOP_CENTER;var XR=function(o){if(o===void 0&&(o=HR),this.childrenMap.thumb){var t=this.orientation===0?WR:UR;_g.call(this,t,o)}else this.orientation===0?(o.x=this.innerLeft+1,o.y=this.centerY):(o.x=this.centerX,o.y=this.innerTop+1);return o},HR={};const $R=Phaser.Display.Align.RIGHT_CENTER,kR=Phaser.Display.Align.BOTTOM_CENTER;var KR=function(o){if(o===void 0&&(o=ZR),this.childrenMap.thumb){var t=this.orientation===0?$R:kR;_g.call(this,t,o)}else this.orientation===0?(o.x=this.innerRight-1,o.y=this.centerY):(o.x=this.centerX,o.y=this.innerBottom-1);return o},ZR={};const _d=Phaser.Math.Linear;var JR=function(o,t,e,r){return r===void 0&&(r=QR),r.x=_d(t.x,e.x,o),r.y=_d(t.y,e.y,o),r},QR={},jR=function(o){var t=this.childrenMap.thumb;return t===void 0?this:(o===void 0&&(o=this.value),JR(o,this.getStartPoint(),this.getEndPoint(),t),this.resetChildPositionState(t),this)};const qR=Phaser.Display.Align.LEFT_CENTER,_R=Phaser.Display.Align.TOP_CENTER;var tO=function(o){var t=this.childrenMap.indicator;if(t===void 0)return this;o===void 0&&(o=this.value);var e,r,i=this.childrenMap.thumb;if(i)if(this.orientation===0){var s=Dt(i),a=i.x-s*i.originX+s;e=a-this.left}else{var n=Pt(i),h=i.y-n*i.originY+n;r=h-this.top}else this.orientation===0?e=this.width*o:r=this.height*o;wi(t,e,r);var u=this.orientation===0?qR:_R;Ag(t,this,u),this.resetChildPositionState(t)};const qt=Phaser.Utils.Objects.GetValue,eO=Phaser.Math.Clamp,iO=Phaser.Math.Linear,tc=Phaser.Math.Percent,sO=Phaser.Math.Snap.To;class Kn extends Wt{constructor(t,e){super(t,e),this.type="rexSlider",this.eventEmitter=qt(e,"eventEmitter",this);var r=qt(e,"background",void 0),i=qt(e,"track",void 0),s=qt(e,"indicator",void 0),a=qt(e,"thumb",void 0);r&&this.addBackground(r),i&&this.add(i,{proportion:1,expand:!0,minWidth:0,minHeight:0}),s&&this.pin(s),a&&this.pin(a);var n=qt(e,"input",0);switch(typeof n=="string"&&(n=nO[n]),n){case 0:a&&(a.setInteractive(),this.scene.input.setDraggable(a),a.on("drag",VR,this));break;case 1:this.setInteractive().on("pointerdown",qd,this).on("pointermove",qd,this);break}this.addChildrenMap("background",r),this.addChildrenMap("track",i),this.addChildrenMap("indicator",s),this.addChildrenMap("thumb",a);var h=qt(e,"valuechangeCallback",null);if(h!==null){var u=qt(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",h,u)}this.setEnable(qt(e,"enable",void 0)),this.setGap(qt(e,"gap",void 0)),this.setValue(qt(e,"value",0),qt(e,"min",void 0),qt(e,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(qt(e,"easeValue.duration",0)).setEaseValueFunction(qt(e,"easeValue.ease","Linear"))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=sO(t,this.gap));var e=this._value;this._value=eO(t,0,1),e!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter))}setValue(t,e,r){return t==null?this:(e!==void 0&&(t=tc(t,e,r)),this.value=t,this)}addValue(t,e,r){return e!==void 0&&(t=tc(t,e,r)),this.value+=t,this}getValue(t,e){var r=this.value;return t!==void 0&&(r=iO(t,e,r)),r}runLayout(t,e,r){return this.ignoreLayout?this:(super.runLayout(t,e,r),this.updateThumb(),this.updateIndicator(),this)}}const nO={pan:0,drag:0,click:1,none:-1};var rO={getStartPoint:XR,getEndPoint:KR,updateThumb:jR,updateIndicator:tO};Object.assign(Kn.prototype,rO,Wn);it.register("slider",function(o){var t=new Kn(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Slider",Kn);var tm={v:0,vertical:0,h:1,horizontal:1};const aO=Phaser.Utils.Objects.GetValue;var ka=function(o,t){var e=aO(o,"scrollMode",0);return typeof e=="string"&&(e=tm[e]),e};const oe=Phaser.Utils.Objects.GetValue;class lu extends Wt{constructor(t,e){super(t,e),this.type="rexScrollBar";var r=oe(e,"background",void 0),i=oe(e,"buttons",void 0),s=oe(i,"top",oe(i,"left",void 0)),a=oe(i,"bottom",oe(i,"right",void 0)),n,h=oe(e,"slider",void 0);if(r&&this.addBackground(r),s){this.add(s);var u=new Yh(s);u.on("intouch",function(){!this.enable||(this.value-=this.scrollStep)},this)}if(h){h.orientation=this.orientation,h.eventEmitter=this,h.value=null;var l;if(this.orientation===0){var f=oe(h,"width",void 0);l=f===void 0?1:0}else{var c=oe(h,"height",void 0);l=c===void 0?1:0}n=new Kn(t,h),t.add.existing(n),this.add(n,{proportion:l})}if(a){this.add(a);var u=new Yh(a);u.on("intouch",function(){!this.enable||(this.value+=this.scrollStep)},this)}var d=[s,a];this.addChildrenMap("background",r),this.addChildrenMap("slider",n),this.addChildrenMap("buttons",d);var v=oe(e,"valuechangeCallback",null);if(v!==null){var p=oe(e,"valuechangeCallbackScope",void 0);this.on("valuechange",v,p)}this.setEnable(oe(e,"enable",void 0)),this.setValue(oe(e,"value",0)),this.setScrollStep(oe(i,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,e,r){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,r),this}addValue(t,e,r){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,r),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,r){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,r),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}class oO extends lu{constructor(t,e){e===void 0&&(e={});var r=ns(e);e={slider:r},e.orientation=r.orientation,delete r.orientation,e.background=r.background,delete r.background,e.buttons=r.buttons,delete r.buttons,super(t,e);var i=this.childrenMap.slider;this.addChildrenMap("track",i.childrenMap.track),this.addChildrenMap("indicator",i.childrenMap.indicator),this.addChildrenMap("thumb",i.childrenMap.thumb)}}class hO extends ti{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,e=this.parent,r=e.dragState;return r.isDown&&(t=e.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,e){this.next()}next_DRAGBEGIN(){var t,e=this.parent,r=e.dragState;return r.isDown?t=r.pointer.getDistance()>=e.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,e){this.next()}next_DRAG(){var t,e=this.parent,r=e.dragState;return r.isUp&&(e.outOfBounds?t="BACK":e.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,e){var r=this.parent,i=r.dragState;i.justMoved&&r.dragging(),this.next()}next_SLIDE(){var t,e=this.parent,r=e.dragState;return r.isDown?t="DRAG":e.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,e){this.parent.sliding(t,e),this.next()}next_BACK(){var t,e=this.parent,r=e.dragState;return r.isDown?t="DRAG":e.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,e){this.parent.pullBack(t,e),this.next()}}const Mr=Phaser.Utils.Objects.GetValue,lO=Phaser.Math.Distance.Between;class uO extends ee{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(Mr(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(Mr(t,"enable",!0)),this.holdThreshold=Mr(t,"holdThreshold",50),this.pointerOutReleaseEnable=Mr(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=this.scene.sys.game,e=t.loop.delta;return e}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=lO(this.preX,this.preY,this.x,this.y),e=t/(this.dt*.001);return e}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,e,r){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=e,this.localY=r)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,e,r){!this.enable||!t.isDown||this.pointer!==t||(this.localX=e,this.localY=r)}preupdate(t,e){if(!!this.enable){var r=this.pointer;this.justMoved=!1,r&&!this.isInTouched?(this.x=r.worldX,this.y=r.worldY,this.preX=r.worldX,this.preY=r.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",r,this.localX,this.localY)):r&&this.isInTouched?this.x===r.x&&this.y===r.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=r.worldX,this.y=r.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",r,this.localX,this.localY)):!r&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",r))}}}const ih=Phaser.Utils.Objects.GetValue;class fO{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(ih(t,"value",0)),this.setSpeed(ih(t,"speed",0)),this.setAcceleration(ih(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class dO{constructor(){this.value,this.dir,this.movement=new fO}init(t,e,r,i,s){return this.value=t,this.end=s,s!==void 0?this.dir=t<s:this.dir=e,this.movement.setSpeed(r).setAcceleration(-i),this}stop(){this.movement.reset()}update(t){var e=this.movement.getDeltaValue(t);return this.dir||(e=-e),this.end===void 0?this.value+=e:e===0?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const zt=Phaser.Utils.Objects.GetValue,cO=Phaser.Math.Clamp;class vO extends ee{constructor(t,e){super(t,e);var r=zt(e,"enable",!0);this._state=new hO(this,{enable:r,eventEmitter:!1});var i={inputConfig:zt(e,"inputConfig",void 0),enable:r,pointerOutRelease:zt(e,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new uO(t,i),this._enable=void 0,this._value=void 0,this._slowDown=new dO;var s=zt(e,"valuechangeCallback",null);if(s!==null){var a=zt(e,"valuechangeCallbackScope",void 0);this.on("valuechange",s,a)}if(s=zt(e,"overmaxCallback",null),s!==null){var a=zt(e,"overmaxCallbackScope",void 0);this.on("overmax",s,a)}if(s=zt(e,"overminCallback",null),s!==null){var a=zt(e,"overminCallbackScope",void 0);this.on("overmin",s,a)}this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setOrientationMode(zt(t,"orientation",0)),this.setDragThreshold(zt(t,"threshold",10)),this.setSlidingDeceleration(zt(t,"slidingDeceleration",5e3)),this.setBackDeceleration(zt(t,"backDeceleration",2e3));var e=zt(t,"bounds",void 0);return e?this.setBounds(e):this.setBounds(zt(t,"max",0),zt(t,"min",0)),this.setValue(zt(t,"value",this.maxValue||0)),this.setEnable(zt(t,"enable",!0)),this}boot(){this.scene.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=pO[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setBounds(t,e){if(Array.isArray(t)){var r=t;t=r[0],e=r[1]}return t<e?(this.minValue=t,this.maxValue=e):(this.minValue=e,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var e=this._value,r=this.overMax(t),i=this.overMin(t);r&&this.emit("overmax",t,e),i&&this.emit("overmin",t,e),this.backEnable||(r&&(t=this.maxValue),i&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,e)}}setValue(t,e){return e===void 0&&(e=!1),e&&(t=cO(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,e){return this.setValue(this.value+t,e),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return this.orientationMode===0?this.dragState.dy:this.orientationMode===1?this.dragState.dx:0}get dragSpeed(){return this.orientationMode===0?this.dragState.speedY:this.orientationMode===1?this.dragState.speedX:0}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,e=this.dragSpeed;if(e===0){this._slowDown.stop(),this._state.next();return}var r=this.slidingDeceleration;this._slowDown.init(t,e>0,Math.abs(e),r)}sliding(t,e){e*=.001;var r=this._slowDown.update(e).value;this.overMax(r)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(r)?(this.value=this.minValue,this._slowDown.stop()):this.value=r}onPullBack(){var t=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,r=Math.abs(e-t),i=this.backDeceleration,s=Math.sqrt(2*i*r);this._slowDown.init(t,void 0,s,i,e)}pullBack(t,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const pO={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},Ar=Phaser.Utils.Objects.GetValue;class gO extends ee{constructor(t,e){if(super(t,e),this.parent!==this.scene?this.focusMode=Ar(e,"focus",!1):this.focusMode=!1,this.setSpeed(Ar(e,"speed",.1)),this.setEnable(Ar(e,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(Ar(e,"inputConfig",void 0)).on("wheel",function(i,s,a,n,h){!this.enable||this.scroll(a)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,e,r,i,s,a){!this.enable||this.scroll(i)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const Vt=Phaser.Utils.Objects.GetValue;var mO=function(o,t){var e=o.scene,r=ka(t),i=new Wt(e,{orientation:r}),s=Vt(t,"child.gameObject",void 0),a=Vt(t,"slider",void 0),n,h=Vt(a,"position",0);typeof h=="string"&&(h=xO[h]);var u=h===0,l=Vt(t,"scroller",!0),f,c=Vt(t,"mouseWheelScroller",!1),d;if(s){var v=Vt(t,"space.child",0),p={};if(o.childMargin={},typeof v!="number"){var g=v;r===0?(p.left=Vt(g,"left",0),p.right=Vt(g,"right",0),o.childMargin.top=Vt(g,"top",0),o.childMargin.bottom=Vt(g,"bottom",0)):(p.top=Vt(g,"top",0),p.bottom=Vt(g,"bottom",0),o.childMargin.top=Vt(g,"left",0),o.childMargin.bottom=Vt(g,"right",0))}else a&&(r===0?p=u?{right:v}:{left:v}:p=u?{bottom:v}:{top:v}),o.childMargin.top=0,o.childMargin.bottom=0;a?(a===!0&&(a={}),a.orientation=i.orientation===0?1:0,n=new oO(e,a),o.adaptThumbSizeMode=Vt(a,"adaptThumbSize",!1),o.minThumbSize=Vt(a,"minThumbSize",void 0)):(o.adaptThumbSizeMode=!1,o.minThumbSize=void 0),l&&(l===!0&&(l={}),l.orientation=r,f=new vO(s,l)),c&&(d=new gO(s,c)),n&&!u&&i.add(n,{proportion:0,align:"center",expand:!0});var m=Vt(t,"child.proportion",1),x=Vt(t,"child.expand",!0);i.add(s,{proportion:m,align:"center",padding:p,expand:x}),n&&u&&i.add(n,{proportion:0,align:"center",expand:!0})}return n&&n.on("valuechange",function(y){o.t=y,o.emit("scroll",o)}),f&&f.on("valuechange",function(y){o.childOY=y,o.emit("scroll",o)}),d&&d.on("scroll",function(y){o.addChildOY(-y,!0)}),o.addChildrenMap("child",s),o.addChildrenMap("slider",n),o.addChildrenMap("scroller",f),o.addChildrenMap("mouseWheelScroller",d),i},xO={right:0,left:1,bottom:0,top:1};Wt.prototype.runLayout;var yO=function(){var o=this.topChildOY,t=this.bottomChildOY,e=this.childrenMap.scroller,r=this.childrenMap.slider;return e&&e.setBounds(t,o),r&&r.setEnable(t!==o),this.updateController(),this.adaptThumbSizeMode&&TO.call(this),this},TO=function(){var o=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,e=t.childrenMap.track,r=t.childrenMap.thumb,i=this.minThumbSize;if(this.scrollMode===0){var s=e.displayHeight*o;i!==void 0&&s<i&&(s=i),wi(r,void 0,s)}else{var a=e.displayWidth*o;i!==void 0&&a<i&&(a=i),wi(r,a,void 0)}SO.call(this)},SO=function(){var o=this.childrenMap.slider,t=o.minWidth,e=o.minHeight;o.minWidth=o.width,o.minHeight=o.height,o.layout(),o.minWidth=t,o.minHeight=e},CO=function(){var o=this.childrenMap.scroller,t=this.childrenMap.slider;o&&o.setValue(this.childOY),t&&t.setValue(this.t)};const $e=Phaser.Utils.Objects.GetValue,ec=Phaser.Math.Clamp;class Ka extends Wt{constructor(t,e){e===void 0&&(e={});var r=ka(e);e.orientation=r===0?1:0,super(t,e),this.type=$e(e,"type","rexScrollable");var i=$e(e,"background",void 0),s=mO(this,e),a=$e(e,"header",void 0),n=$e(e,"footer",void 0);if(i&&this.addBackground(i),a){var h=$e(e,"align.header","center"),u=$e(e,"space.header",0),l;r===0?l={bottom:u}:l={right:u};var f=$e(e,"expand.header",!0);this.add(a,{proportion:0,align:h,padding:l,expand:f})}if(s&&this.add(s,{proportion:1,align:"center",padding:0,expand:!0}),n){var h=$e(e,"align.footer","center"),c=$e(e,"space.footer",0),l;r===0?l={top:c}:l={left:c};var f=$e(e,"expand.footer",!0);this.add(n,{proportion:0,align:h,padding:l,expand:f})}this.addChildrenMap("background",i),this.addChildrenMap("header",a),this.addChildrenMap("footer",n),this.runLayoutFlag=!1}runLayout(t,e,r){return this.ignoreLayout?this:(super.runLayout(t,e,r),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var e=this.childMargin;if(e.top!==0||e.bottom!==0){var r=this.childrenMap.child,i=r.topChildOY-r.bottomChildOY,s=i+e.top+e.bottom,a=s*t-e.top;t=a/i}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,e=this.childMargin;if(e.top!==0||e.bottom!==0){var r=this.childrenMap.child,i=r.topChildOY-r.bottomChildOY,s=i+e.top+e.bottom,a=i*t+e.top;t=a/s}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,e){return e===void 0&&(e=!1),e&&(t=ec(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,e){return this.setChildOY(this.childOY+t,e),this}setT(t,e){return e===void 0&&(e=!1),e&&(t=ec(t,0,1)),this.t=t,this}addT(t,e){return this.setT(this.t+t,e),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var e=this.childrenMap.slider;!e||e.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var e=this.childrenMap.scroller;!e||e.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var e=this.childrenMap.mouseWheelScrollerEnable;!e||e.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var e=this.childrenMap.child;return e.setInteractive(),e.input.dropZone=t,this}}var EO={resizeController:yO,updateController:CO};Object.assign(Ka.prototype,EO);class em{constructor(t,e){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,e),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var e=this.parent;this._deltaHeight===0&&t!==0?e.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&e.nonZeroDeltaHeightCount--;var r=this._deltaHeight!==t;if(this._deltaHeight=t,r){e.resetTotalRowsHeight();var i=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(i,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(em.prototype,rg);const Rr=Phaser.Utils.Objects.GetValue,PO=Phaser.Utils.Array.SpliceOne;class MO{constructor(t,e){this.parent=t,this.cells=[],this.cellPool=new Ni,this.resetFromJSON(e)}resetFromJSON(t){return this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(Rr(t,"cellHeight",30)),this.setDefaultCellWidth(Rr(t,"cellWidth",30)),this.initCells(Rr(t,"cellsCount",0)),this.setColumnCount(Rr(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var e=this.cells;e.length=t;for(var r=0;r<t;r++)e[r]=null;return this}insertNewCells(t,e){var r=this.cells;if(t===r.length){var i=t+e;r.legth=i;for(var s=t;s<i;s++)r[s]=null}else{var a=[];a.length=e;for(var s=0;s<e;s++)a[s]=null;this.cells.splice(t,0,...a)}return this.resetTotalRowsHeight(),this}removeCells(t,e){for(var r=t+e,i=t;i<r;i++)this.freeCell(i);return r===this.cells.length?this.cells.length=t:(e===1?PO(this.cells,t):this.cells.splice(t,e),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,e){if(this.defaultCellHeightMode){var n=t/this.defaultCellHeight;return e?n=Math.ceil(n):n=Math.floor(n),n}for(var r=this.rowCount,i=t,s,a,n=0;;)if(a=this.getRowHeight(n),i-=a,s=n>=0&&n<r,i>0&&s)n+=1;else{if(i===0)return n;if(e){var h=n;n+=1,s=n>=0&&n<r,s||(n=h)}return n}}widthToColIndex(t,e){var r=t/this.defaultCellWidth;return e?r=Math.ceil(r):r=Math.floor(r),r}colRowToCellIndex(t,e){return t>=this.colCount?null:e*this.colCount+t}rowIndexToHeight(t,e){if(this.defaultCellHeightMode)return(e-t+1)*this.defaultCellHeight;for(var r,i=0,s=t;s<=e;s++)r=this.getRowHeight(s),i+=r;return i}colIndexToWidth(t,e){return(e-t+1)*this.defaultCellWidth}getRowHeight(t){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var r=0,i,s=0;s<e;s++)i=this.getCellHeight(this.colRowToCellIndex(s,t)),r<i&&(r=i);return r}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var r=this.getCell(t,!1),i=r?r.deltaHeight:0;e=this.defaultCellHeight+i}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,e){if(!this.isValidCellIdx(t))return null;if(e===void 0&&(e=!0),this.cells[t]===null&&e){var r=this.newCell(t);this.cells[t]=r}return this.cells[t]}newCell(t){var e=this.cellPool.pop();return e===null?e=new em(this):e.setParent(this),e.index=t,e}buildCellIndex(t){t===void 0&&(t=0);for(var e=this.cells,r,i=t,s=e.length;i<s;i++)r=e[i],r&&(r.index=i);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var AO=function(o){var t=this.table,e=this.topTableOY,r=this.bottomTableOY,i=o>this.topTableOY,s=o<this.bottomTableOY;if(this.clampTableOXY){var a=t.rowCount,n=t.heightToRowIndex(this.instHeight,!0);a<n?o=0:i?o=e:s&&(o=r)}return this._tableOY!==o&&(this._tableOY=o),i&&(this.execeedTopState||this.emit("execeedtop",this,o,e)),this.execeedTopState=i,s&&(this.execeedBottomState||this.emit("execeedbottom",this,o,r)),this.execeedBottomState=s,this},RO=function(o){var t=this.table,e=this.leftTableOX,r=this.rightTableOX,i=o>this.leftTableOX,s=o<this.rightTableOX;if(this.clampTableOXY){var a=t.colCount,n=t.widthToColIndex(this.instWidth,!0);a<n?o=0:i?o=e:s&&(o=r)}return this._tableOX!==o&&(this._tableOX=o),i&&(this.execeedLeftState||this.emit("execeedleft",this,o,e)),this.execeedLeftState=i,s&&(this.execeedRightState||this.emit("execeedright",this,o,r)),this.execeedRightState=s,this},im=function(o){return o.hasOwnProperty("geometryMask")?o.geometryMask:o.bitmapMask};const OO=Phaser.Geom.Intersects.RectangleToRectangle,LO=Phaser.Geom.Rectangle.Overlaps;var FO=function(o,t,e){if(!!t){e===void 0&&(e=o.getAllChildren());for(var r=o.getBounds(),i=im(t),s,a,n,h=0,u=e.length;h<u;h++)if(s=e[h],!s.hasOwnProperty("isRexContainerLite")&&s!==i&&!!bO(s))if(s.getBounds)switch(a=s.getBounds(a),n=DO(r,a),n){case 4:wO(o,s);break;case 0:OO(r,a)||LO(r,a)?sh(o,s,t):IO(o,s);break;default:sh(o,s,t);break}else sh(o,s,t)}},bO=function(o){for(;;){var t=o.rexContainer;if(t)if(t.visible){var e=t.parent;if(e){o=e;continue}else return!0}else return!1;else return o.visible}},DO=function(o,t){var e=0,r=t.top,i=t.bottom,s=t.left,a=t.right;return e+=o.contains(s,r)?1:0,e+=o.contains(s,i)?1:0,e+=o.contains(a,r)?1:0,e+=o.contains(a,i)?1:0,e},wO=function(o,t,e){o.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},sh=function(o,t,e){o.setChildMaskVisible(t,!0),t.setMask&&t.setMask(e)},IO=function(o,t,e){o.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()};const nh=Phaser.Utils.Objects.GetValue,BO={update:0,everyTick:1};var sm={setupChildrenMask(o){return o===!1?this:(this.setMaskUpdateMode(nh(o,"updateMode",0)),this.enableChildrenMask(nh(o,"padding",0)),this.setMaskLayer(nh(o,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(o){return typeof o=="string"&&(o=BO[o]),this.maskUpdateMode=o,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(o){var t=On.call(this,null,this,0,o);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(o){return o===void 0&&(o=!0),this.maskChildrenFlag=o,this},setMaskLayer(o){return this.maskLayer=o,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):FO(this,this.childrenMask,this.getAllChildren(),this.maskLayer),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var o=im(this.childrenMask);return o.setPosition().resize(),this.resetChildPositionState(o),this}},nm=function(o){if(this.emit("cellinvisible",o),this.cellContainersPool){var t=o.popContainer();t&&this.cellContainersPool.killAndHide(t)}o.destroyContainer()},ic=function(){var o=this.preVisibleCells,t=this.visibleCells;o.iterate(function(e){t.contains(e)||nm.call(this,e)},this)},rm=function(o){var t=null,e=o.getContainer();if(e?(t=e,o.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",o,t,this),this.cellContainersPool){var e=o.getContainer();e?t===null?this.cellContainersPool.add(e):t!==e&&(this.cellContainersPool.add(e),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},GO=function(){if(this.cellsCount!==0){var o=this.table,t=o.heightToRowIndex(-this.tableOY);t<=0&&(t=0);var e=t,r=o.widthToColIndex(-this.tableOX);r<=0&&(r=0);for(var i=r,s=o.colRowToCellIndex(i,e),a=this.bottomBound,n=this.rightBound,h=o.cellsCount-1,u=o.colCount-1,l=NO.call(this,i),f=l,c=zO.call(this,e);c<a&&s<=h;){if(this.table.isValidCellIdx(s)){var d=o.getCell(s,!0);this.visibleCells.set(d),this.preVisibleCells.contains(d)||rm.call(this,d),this.scrollMode===0?d.setXY(f,c):d.setXY(c,f)}f<n&&i<u?(f+=o.getColWidth(i),i+=1):(f=l,c+=o.getRowHeight(e),i=r,e+=1),s=o.colRowToCellIndex(i,e)}}},NO=function(o){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,e=this.tableOX+this.table.colIndexToWidth(0,o-1)+t;return e},zO=function(o){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,e=this.tableOY+this.table.rowIndexToHeight(0,o-1)+t;return e},VO=function(o){return o===void 0&&(o=!1),o&&(sc.call(this),ic.call(this)),sc.call(this),GO.call(this),ic.call(this),this.setMaskChildrenFlag(),this},sc=function(){var o=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=o,this.visibleCells.clear()},YO=function(o){var t=this.table.getCell(o,!1);return t&&this.visibleCells.contains(t)},am=function(o,t){t-=this.y+this.topLeftY,o-=this.x+this.topLeftX;var e=this.tableOY-(this.scrollMode===0?t:o),r=this.tableOX-(this.scrollMode===0?o:t),i=this.table,s=i.heightToRowIndex(-e),a=i.widthToColIndex(-r),n=i.colRowToCellIndex(a,s);return n===null||!this.isCellVisible(n)?null:n},WO=function(o,t){var e=am.call(this,o,t);if(e!==null)return this.getCellContainer(e)},UO=function(o,t){return this.visibleCells.each(o,t),this},XO=function(o,t){return this.visibleCells.iterate(o,t),this},HO=function(o,t){return this.table.cells.slice().forEach(o,t),this},$O=function(o,t){return this.table.cells.forEach(o,t),this},kO=function(o){var t=this.cellsCount;return t===o?this:(t>o?this.removeCells(o,t-o):this.insertNewCells(t,o-t),this)};const KO=Phaser.Math.Clamp;var ZO=function(o,t){return typeof o=="object"&&(o=o.index),t===void 0&&(t=1),t<=0?this:(o=KO(o,0,this.cellsCount),this.table.insertNewCells(o,t),this)},JO=function(o,t){if(typeof o=="object"&&(o=o.index),t===void 0&&(t=1),o<0&&(t+=o,o=0),t<=0)return this;if(o>this.cellsCount)return this;for(var e,r=o,i=o+t;r<i;r++)e=this.getCell(r,!1),e&&(this.visibleCells.contains(e)&&(nm.call(this,e),this.visibleCells.delete(e)),this.preVisibleCells.delete(e));return this.table.removeCells(o,t),this},QO=function(o){return this.table.colCount===o?this:(this.table.setColumnCount(o),this)},jO=function(o,t){return this.setCellsCount(o*t),this.table.setColumnCount(o),this},qO=function(o){var t=this.table.getCell(o,!1);return!t||!t.container?this:(rm.call(this,t),this)},om={setTableOY:AO,setTableOX:RO,updateTable:VO,isCellVisible:YO,pointToCellIndex:am,pointToCellContainer:WO,eachVisibleCell:UO,iterateVisibleCell:XO,eachCell:HO,iterateCell:$O,setCellsCount:kO,insertNewCells:ZO,removeCells:JO,setColumnCount:QO,setGridSize:jO,updateVisibleCell:qO};Object.assign(om,sm);const _O=Phaser.GameObjects.Group,nc=Phaser.Structs.Set,Te=Phaser.Utils.Objects.GetValue;class hm extends De{constructor(t,e,r,i,s,a){a===void 0&&(a={}),super(t,e,r,i,s),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new nc,this.preVisibleCells=new nc,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var n=Te(a,"reuseCellContainer",!1);n&&(this.cellContainersPool=new _O(t));var h=Te(a,"cellVisibleCallback",null);if(h!==null){var u=Te(a,"cellVisibleCallbackScope",void 0);this.on("cellvisible",h,u)}if(h=Te(a,"cellInvisibleCallback",null),h!==null){var u=Te(a,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",h,u)}if(this.setupChildrenMask(Te(a,"mask",void 0)),this.setScrollMode(Te(a,"scrollMode",0)),this.setClampMode(Te(a,"clamplTableOXY",!0)),this.scrollMode===0){var l=Te(a,"cellWidth",void 0);if(this.expandCellSize=l===void 0,l===void 0){var f=Te(a,"columns",1);a.cellWidth=this.width/f}}else{var l=Te(a,"cellHeight",void 0),c=Te(a,"cellWidth",void 0);this.expandCellSize=l===void 0,a.cellWidth=l,a.cellHeight=c}this.table=new MO(this,a),this.updateTable()}destroy(t){!this.scene||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=tL[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,e){return this.setTableOY(e).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,e){return this.addTableOY(e).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var e=this.table.getCell(t,!1),r;return e&&(r=e.getContainer()),r}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,e){var r;return typeof t=="number"?r=this.table.getCell(t,!0):r=t,r.height=e,this}setCellWidth(t,e){var r;return typeof t=="number"?r=this.table.getCell(t,!0):r=t,r.width=e,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,e=this.tableWidth,r=this.instWidth;return e>r?t=e-r:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,e){return this.width===t&&this.height===e?this:(super.resize(t,e),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}}Object.assign(hm.prototype,om);const tL={v:0,vertical:0,h:1,horizontal:1};var eL=function(o){Object.defineProperty(o,"childOY",{configurable:!0,get:function(){return o.tableOY},set:function(t){o.tableOY=t}}),Object.defineProperty(o,"topChildOY",{get:function(){return o.topTableOY}}),Object.defineProperty(o,"bottomChildOY",{get:function(){return o.bottomTableOY}}),Object.defineProperty(o,"childVisibleHeight",{get:function(){return o.instHeight}}),Object.defineProperty(o,"childHeight",{get:function(){return o.tableHeight}})},iL=function(o){o.on("cellvisible",function(t,a,r){var i=this.createCellContainerCallback,s=this.createCellContainerCallbackScope;t.item=this.items[t.index];var a;s?a=i.call(s,t,a,r):a=i(t,a,r),a&&(a.setOrigin&&a.setOrigin(0),a.isRexSizer&&a.layout()),t.item=void 0,t.setContainer(a)},this)},qe=function(o,t,e,r,i,s,a){var n;if(i===void 0?n=r:n=e.pointToCellIndex(r,i),n!=null){var h=e.getCellContainer(n);h&&o.emit(t,h,n,s,a)}},sL=function(o,t){o.on("pointerdown",function(e,r,i,s){qe(this.eventEmitter,"cell.down",o,e.x,e.y,e,s)},this).on("pointerup",function(e,r,i,s){qe(this.eventEmitter,"cell.up",o,e.x,e.y,e,s)},this)},nL=function(o,t){o.on("pointermove",rc,this).on("pointerover",rc,this).on("pointerout",rL,this)},rc=function(o,t,e,r){var i=this.childrenMap.child,s=i.pointToCellIndex(o.x,o.y);if(s!==i.input.lastOverCellIndex){var a=i.input.lastOverCellIndex;i.input.lastOverCellIndex=s,qe(this.eventEmitter,"cell.out",i,a,void 0,o,r),qe(this.eventEmitter,"cell.over",i,s,void 0,o,r)}},rL=function(o,t){var e=this.childrenMap.child,r=e.input.lastOverCellIndex;e.input.lastOverCellIndex=void 0,qe(this.eventEmitter,"cell.out",e,r,void 0,o,t)};const aL=Phaser.Utils.Objects.GetValue;var oL=function(o,t){var e=aL(t,"click",void 0);e!==!1&&(e===void 0&&(e={}),e.threshold=10,o._click=new Xs(o,e),o._click.on("click",function(r,i,s,a){qe(this.eventEmitter,"cell.click",i,s.x,s.y,s,a)},this))};const hL=Phaser.Utils.Objects.GetValue;var lL=function(o,t){var e=hL(t,"tap",void 0);e!==!1&&(o._tap=new Na(o,e),o._tap.on("tap",function(r,i,s){var a=`cell.${r.tapsCount}tap`;qe(this.eventEmitter,a,r.gameObject,r.x,r.y,s)},this))};const uL=Phaser.Utils.Objects.GetValue;var fL=function(o,t){var e=uL(t,"press",void 0);e!==!1&&(o._press=new za(o,e),o._press.on("pressstart",function(r,i,s){qe(this.eventEmitter,"cell.pressstart",o,r.x,r.y,s)},this).on("pressend",function(r,i,s){qe(this.eventEmitter,"cell.pressend",o,r.x,r.y,s)},this))};const dL=Phaser.Utils.Objects.GetValue;var cL=function(o,t){var e=dL(t,"swipe",void 0);e!==!1&&(e===void 0&&(e={}),e.dir="4dir",o._swipe=new kn(o,e),o._swipe.on("swipe",function(r,i,s){var a=r.left?"left":r.right?"right":r.up?"up":"down";qe(this.eventEmitter,`cell.swipe${a}`,o,r.x,r.y,s)},this))},vL=function(o,t){o.setInteractive(),sL.call(this,o,t),nL.call(this,o,t),oL.call(this,o,t),lL.call(this,o,t),fL.call(this,o,t),cL.call(this,o,t)},pL=function(o){o===void 0?this.items.length=0:this.items=o;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this};const ke=Phaser.Utils.Objects.GetValue;class uu extends Ka{constructor(t,e){e===void 0&&(e={});var r=ka(e),i=ke(e,"table",void 0);i===void 0&&(i={}),i.scrollMode=r,i.clamplTableOXY=ke(e,"clamplChildOY",!1);var s=ke(i,"width",void 0),a=ke(i,"height",void 0),n=new hm(t,0,0,s,a,i);t.add.existing(n);var h,u;r===0?(h=s===void 0?1:0,u=a===void 0):(h=a===void 0?1:0,u=s===void 0),eL(n),e.type="rexGridTable",e.child={gameObject:n,proportion:h,expand:u};var l=ke(e,"space",void 0);l&&(l.child=l.table),super(t,e),this.addChildrenMap("table",n),this.addChildrenMap("tableLayer",n.maskLayer),this.eventEmitter=ke(e,"eventEmitter",this);var f=ke(e,"createCellContainerCallback",Ae),c=ke(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(f,c),iL.call(this,n),this.resizeControllerFlag=!1;var d=r===0?"cellheightchange":"cellwidthchange";n.on(d,function(){this.resizeControllerFlag=!0},this),ke(i,"interactive",!0)&&vL.call(this,n,i),this.setItems(ke(e,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,e){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=e,this}refresh(){return this.setItems(this.items),this}getCell(t){var e=this.childrenMap.child;return e.getCell(t)}getCellContainer(t){var e=this.childrenMap.child;return e.getCellContainer(t)}updateVisibleCell(t){var e=this.childrenMap.child;return e.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var gL={setItems:pL};Object.assign(uu.prototype,gL);it.register("gridTable",function(o){var t=new uu(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.GridTable",uu);var mL=function(o,t){this.collapseSubMenu();var e;this.root.toggleOrientation?e=this.orientation===0?1:0:e=this.orientation;var r=new this.constructor(this.scene,{items:t,orientation:e,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:o});return this.pin(r),this.childrenMap.subMenu=r,this.root.emit("expand",r,o,this),this},Uh=function(o,t){return o.sameOrientation?o.orientation=t.orientation:o.orientation=t.orientation===0?1:0,o},xL=function(){return this.root.emit("collapse",this,this.parentButton,this.root),this.scaleDownDestroy(Uh(this.root.easeOut,this)),this.collapseSubMenu(),this},yL=function(){if(this.childrenMap.subMenu===void 0)return this;var o=this.childrenMap.subMenu;return this.childrenMap.subMenu=void 0,this.remove(o),o.collapse(),this},TL={expandSubMenu:mL,collapse:xL,collapseSubMenu:yL},SL=function(o,t,e,r){var i;return e&&(t.scene=o,r?i=e.call(r,t):i=e(t),t.scene=void 0),i},CL=function(o,t,e,r){var i,s=[],a;if(t&&e)for(var n=0,h=t.length;n<h;n++)i=t[n],i.scene=o,r?a=e.call(r,i,n,t):a=e(i,n,t),i.scene=void 0,s.push(a);return s},EL=function(o){o.on(o.root.expandEventName,function(t,e){if(!this._isPassedEvent){var r=this.items[e].children;r&&this.expandSubMenu(t,r)}},o).on("button.click",function(t,e,r,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,e,r,i),this.root._isPassedEvent=!1)},o).on("button.over",function(t,e,r,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,e,r,i),this.root._isPassedEvent=!1)},o).on("button.out",function(t,e,r,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,e,r,i),this.root._isPassedEvent=!1)},o)};const Ke=Phaser.Utils.Objects.GetValue;class fu extends Re{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1);var r=e._rootMenu,i=e._parentMenu,s=e._parentButton,a=Ke(e,"items",void 0),n=Ke(e,"createBackgroundCallback",void 0),h=Ke(e,"createBackgroundCallbackScope",void 0);e.background=SL(t,a,n,h);var u=Ke(e,"createButtonCallback",void 0),l=Ke(e,"createButtonCallbackScope",void 0);e.buttons=CL(t,a,u,l),super(t,e),this.type="rexMenu",this.items=a,this.root=r===void 0?this:r,this.parentMenu=i,this.parentButton=s;var f=this.root===this;if(f){var c=e.bounds;c===void 0&&(c=Mg(t)),this.bounds=c,this.subMenuSide=[this.y<c.centerY?Hh:qr,this.x<c.centerX?Xh:jr];var d=Ke(e,"subMenuSide",void 0);d!==void 0&&(typeof d=="string"&&(d=PL[d]),this.subMenuSide[this.orientation]=d),this.toggleOrientation=Ke(e,"toggleOrientation",!1),this.expandEventName=Ke(e,"expandEvent","button.click"),this.easeIn=ac(this,Ke(e,"easeIn",0)),this.easeOut=ac(this,Ke(e,"easeOut",0)),this.createBackgroundCallback=n,this.createBackgroundCallbackScope=h,this.createButtonCallback=u,this.createButtonCallbackScope=l,this._isPassedEvent=!1}var v=0,p=0;if(!this.root.easeIn.sameOrientation){var g=Uh(this.root.easeIn,this).orientation,m=i?i.orientation:this.orientation,d=this.root.subMenuSide[m];g===0&&d===jr&&(v=1),g===1&&d===qr&&(p=1)}if(this.setOrigin(v,p).layout(),!f){this.setScale(this.root.scaleX,this.root.scaleY);var d=this.root.subMenuSide[i.orientation];switch(d){case jr:this.alignTop(s.top).alignRight(s.left);break;case Xh:this.alignTop(s.top).alignLeft(s.right);break;case qr:this.alignLeft(s.left).alignBottom(s.top);break;case Hh:this.alignLeft(s.left).alignTop(s.bottom);break}}this.pushIntoBounds(this.root.bounds),EL(this),this.popUp(Uh(this.root.easeIn,this)),this.once("popup.complete",function(){this!==this.root&&this.root.emit("popup.complete",this)},this)}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}}var ac=function(o,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=su(t.orientation)===o.orientation:t.sameOrientation=!0,t};const jr=2,Xh=0,qr=3,Hh=1,PL={up:qr,down:Hh,left:jr,right:Xh};Object.assign(fu.prototype,TL);it.register("menu",function(o){var t=new fu(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Menu",fu);const ML=Phaser.GameObjects.Text;var du=function(o){return o instanceof ML};const AL=Phaser.GameObjects.BitmapText;var lm=function(o){return o instanceof AL};const ve=0,Oe=1,Le=2;var Zn=function(o){var t;return lm(o)?t=Le:du(o)?t=ve:t=Oe,t},cu=function(o,t,e){var r=Zn(o);switch(r){case ve:e=o.getWrappedText(t);break;case Oe:e=o.getPenManager(t,e);break;case Le:o.maxWidth>0?e=o.setText(t).getTextBounds().wrappedText.split(`
`):e=t.split(`
`);break}return e},RL=function(o,t){o===void 0&&(o=this.startLineIndex),t===void 0&&(t=o+this.pageLinesCount);var e;switch(this.textObjectType){case ve:case Le:e=this.lines.slice(o,t).join(`
`);break;case Oe:var r=this.lines.getLineStartIndex(o),i=this.lines.getLineEndIndex(t-1);e=this.lines.getSliceTagText(r,i,!0);break}return e},rh=function(o){return Array.isArray(o)?o=o.join(`
`):typeof o=="number"&&(o=o.toString()),o},OL={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(e){var t=this.totalLinesCount;this.sections.push(rh(e));var e=this.sections.join(`
`);this.lines=cu(this.parent,e,this.lines);for(var r=this.totalLinesCount-t,i=Math.ceil(r/this.pageLinesCount),s=0;s<i;s++)this.pageStartIndexes.push(t+s*this.pageLinesCount);return this},setText(o,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var e=rh(o).split(this.pageBreak),r=0,i=e.length;r<i;r++)this.appendPage(e[r]);return this},appendText(o){var t=this.content+rh(o);return this.setText(t,!1),this}};const LL=Phaser.Math.Clamp;var FL={getPage(o){return o===void 0&&(o=this.pageIndex),this.setPageIndex(o).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(o){return o=LL(o,0,this.pageCount-1),this.pageIndex=o,this.startLineIndex=this.pageStartIndexes[o],this.endLineIndex=this.pageStartIndexes[o+1],this}},vu=function(o,t){var e=Zn(o);switch(e){case ve:var s=o.style,r=s.wordWrapWidth,i=s.wordWrapCallback;s.wordWrapWidth=0,s.wordWrapCallback=void 0,o.setText(t),s.wordWrapWidth=r,s.wordWrapCallback=i;break;case Oe:var s=o.style,a=s.wrapMode;s.wrapMode=0,o.setText(t),s.wrapMode=a;break;case Le:var n=o._maxWidth;o._maxWidth=0,o.setText(t),o._maxWidth=n;break}},bL={showPage(o){return this.displayText(this.getPage(o)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(o){vu(this.parent,o)}},um={getLines:RL};Object.assign(um,OL,FL,bL);const nn=Phaser.Utils.Objects.GetValue,DL=Phaser.Math.Clamp;class fm extends ee{constructor(t,e){super(t,{eventEmitter:!1}),this.textObjectType=Zn(this.parent),this.pageStartIndexes=[],this.lines=cu(this.parent,""),this.sections=[],this.resetFromJSON(e)}resetFromJSON(t){return this.setMaxLines(nn(t,"maxLines",void 0)),this.setPageBreak(nn(t,"pageBreak",`\f
`)),this.setText(nn(t,"text","")),this.setStartLineIndex(nn(t,"start",0)),this.setPageIndex(nn(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case ve:this.lines.length=0;break;case Oe:this.lines.destroy();break;case Le:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=DL(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case ve:case Oe:var e=this.parent.style.maxLines;e>0?t=e:t=this.totalLinesCount;break;case Le:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(fm.prototype,um);var wL=function(o,t){var e=Zn(o);switch(e){case ve:o.style.syncFont(o.canvas,o.context),t=o.runWordWrap(t);break;case Oe:t=o.getText(t,void 0,void 0,!0);break;case Le:t=o.setText(t).getTextBounds().wrappedText;break}return t};const Ps=Phaser.Utils.Objects.GetFastValue,ah=Phaser.Utils.Objects.GetValue;class IL extends ee{constructor(t,e){super(t,e),this.timer=null,this.resetFromJSON(e)}resetFromJSON(t){this.setTextWrapEnable(ah(t,"wrap",!1)),this.setTypeMode(ah(t,"typeMode",0)),this.setTypeSpeed(ah(t,"speed",333)),this.setTextCallback=Ps(t,"setTextCallback",null),this.setTextCallbackScope=Ps(t,"setTextCallbackScope",null),this.setTypingContent(Ps(t,"text","")),this.typingIdx=Ps(t,"typingIdx",0),this.insertIdx=Ps(t,"insertIdx",null);var e=Ps(t,"elapsed",null);return e!==null&&this.start(void 0,void 0,this.typingIdx,e),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=BL[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var e=oc(t);this.textWrapEnable&&(e=wL(this.parent,e)),this._text=e}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,e,r,i){return t!==void 0&&this.setTypingContent(t),e!==void 0&&(this.speed=e),r===void 0&&(r=0),this.typingIdx=r+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(i)),this}appendText(t){var e=this.text.concat(oc(t));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(t){var e=this.getTimer();return e&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,e,r,i){var s;if(i===0){var a=0,n=e;this.insertIdx=n,s=this.getSubString(t,a,n)}else if(i===1){var n=r,a=n-e;this.insertIdx=0,s=this.getSubString(t,a,n)}else if(i===2){var h=r/2,a=Math.floor(h-e/2),n=a+e;this.insertIdx=e%2?e:0,s=this.getSubString(t,a,n)}else if(i===3){var u=Math.floor(e/2),l;if(u>0){var n=r,a=n-u;l=this.getSubString(t,a,n)}else l="";var f=e-u,c;if(f>0){var a=0,n=a+f;this.insertIdx=n,c=this.getSubString(t,a,n)}else c="",this.insertIdx=0;s=c+l}return s}startTimer(t){this.timer&&this.freeTimer();var e;return t===void 0?e=0:e=t,this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?vu(this.parent,t):this.parent.setText(t)}getTextLength(t){var e=this.parent,r;return e.getPlainText?r=e.getPlainText(t).length:r=t.length,r}getSubString(t,e,r){var i=this.parent,s;return i.getSubString?s=i.getSubString(t,e,r):s=t.slice(e,r),s}}var oc=function(o){return Array.isArray(o)?o=o.join(`
`):typeof o=="number"&&(o=o.toString()),o};const BL={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},hc=Phaser.Utils.Objects.GetValue;class dm extends Xa{constructor(t,e){e===void 0&&(e={text:GL(t)}),super(t,e),this.type="rexTextBox";var r=this.childrenMap.text;this.page=new fm(r,hc(e,"page",void 0)),this.typing=new IL(r,hc(e,"type",void 0)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=r.width,this.textHeight=r.height}start(t,e){return this.page.setText(t),e!==void 0&&this.setTypeSpeed(e),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var t=this.page.getNextPage();this.typing.start(t)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(t){return this.typing.stop(t),this}setTypeSpeed(t){return this.typing.setTypeSpeed(t),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var t=this.childrenMap.text;(this.textWidth!==t.width||this.textHeight!==t.height)&&(this.textWidth=t.width,this.textHeight=t.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}}var GL=function(o){return o.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})};it.register("textBox",function(o){var t=new dm(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.TextBox",dm);const de=Phaser.Utils.Objects.GetValue;class cm extends Wt{constructor(t,e){super(t,e),this.type="rexNumberBar";var r=de(e,"background",void 0),i=de(e,"icon",void 0),s=de(e,"iconMask",void 0),a=de(e,"slider",void 0),n=de(e,"text",void 0),h=de(e,"space.icon",0),u=de(e,"space.slider",0);if(r&&this.addBackground(r),i){var l;this.orientation===0?(a||n)&&(l={right:h}):(a||n)&&(l={bottom:h}),this.add(i,{proportion:0,align:"center",padding:l}),s&&(s=On.call(this,i,i,1))}var f;if(a){a.orientation=this.orientation,a.eventEmitter=this,a.value=null,a.hasOwnProperty("input")||(a.input=-1),f=new Kn(t,a),t.add.existing(f);var l;this.orientation===0?n&&(l={right:u}):n&&(l={bottom:u});var c;if(this.orientation===0){var d=de(a,"width",void 0);c=d===void 0?1:0}else{var v=de(a,"height",void 0);c=v===void 0?1:0}this.add(f,{proportion:c,align:"center",padding:l})}n&&this.add(n),this.addChildrenMap("background",r),this.addChildrenMap("icon",i),this.addChildrenMap("iconMask",s),this.addChildrenMap("slider",f),this.addChildrenMap("text",n);var p=de(e,"valuechangeCallback",null);if(p!==null){var g=de(e,"valuechangeCallbackScope",void 0);this.on("valuechange",p,g)}this.setEnable(de(e,"enable",void 0)),this.setValue(de(e,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,e,r){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,r),this}addValue(t,e,r){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,r),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,r){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,r),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var e;return t.text?e=t.text:e=t.getData("text"),e}set text(t){var e=this.childrenMap.text;e!==void 0&&(e.setText?e.setText(t):e.setData("text",t))}setText(t){return this.text=t,this}}it.register("numberBar",function(o){var t=new cm(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.NumberBar",cm);it.register("scrollBar",function(o){var t=new lu(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.ScrollBar",lu);const oh=Phaser.Utils.Objects.GetValue,lc={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class vm extends Vi{constructor(t,e){super(t,e),this.type="rexBadge";var r=oh(e,"background",void 0);r&&this.addBackground(r),this.addChildrenMap("background",r);var i=oh(e,"main",void 0);i&&this.add(i,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",i);for(var s in lc){var a=oh(e,s,void 0);a&&(this.add(a,{key:s,align:lc[s],expand:!1}),this.addChildrenMap(s,a))}}}it.register("badgeLabel",function(o){var t=new vm(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.BadgeLabel",vm);const NL=Vi.prototype.add;var uc=function(o,t,e,r,i,s,a,n,h){return o.setVisible(!1),NL.call(this,o,t,e,r,i,s,a,n,h),this},zL={add:uc,addPage:uc},VL=function(o){return o===void 0?null:this.sizerChildren.hasOwnProperty(o)?this.sizerChildren[o]:null};const fc=De.prototype.setChildVisible;var YL=function(o){this._previousKey=this._currentKey;var t=this.previousPage;t&&(this.swapMode===0?(fc.call(this,t,!1),this.emit("pageinvisible",t,this._previousKey,this)):t.destroy()),o&&!this.sizerChildren.hasOwnProperty(o)&&this.emit("createpage",o,this),this._currentKey=o;var e=this.currentPage;return e&&(fc.call(this,e,!0),this.emit("pagevisible",e,this._currentKey,this)),this},pm={getPage:VL,swapPage:YL};Object.assign(pm,zL);const WL=Phaser.Utils.Objects.GetValue;class pu extends Vi{constructor(t,e){super(t,e),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(WL(e,"swapMode",0))}setSwapMode(t){return typeof t=="string"&&(t=UL[t]),this.swapMode=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(pu.prototype,pm);const UL={invisible:0,destroy:1};it.register("pages",function(o){var t=new pu(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Pages",pu);var XL=function(o){return o!==void 0&&(this.text=o),this.lines=cu(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},gm=function(o){return(o-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},mm=function(o){return o*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},HL=function(o){var t=o+this.visibleLinesCount,e;switch(this.textObjectType){case ve:e=this.lines.slice(o,t).join(`
`);break;case Oe:var r=this.lines.getLineStartIndex(o),i=this.lines.getLineEndIndex(t-1);e=this.lines.getSliceTagText(r,i,!0);break;case Le:e=this.lines.slice(o,t).join(`
`);break}return e},xm=function(){var o=this.textObject.rexSizer;this.textObject.y+=o.offsetY-o.preOffsetY,o.preOffsetY=o.offsetY,this.resetChildPositionState(this.textObject)},$L=function(){var o=Math.max(Math.floor(gm.call(this,-this.textOY)),0),t=mm.call(this,o)+this.textOY,e=HL.call(this,o);return vu(this.textObject,e),this.textObject.rexSizer.offsetY=t,xm.call(this),this},kL=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Xn.call(this),this},KL=function(o,t,e){if(e+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===e)){switch(this.textObjectWidth=t,this._textObjectRealHeight=e,this.textObjectType){case ve:case Oe:o.setFixedSize(t,e);var r=o.style,i=Math.max(t,0);this.textObjectType===ve?r.wordWrapWidth=i:(r.wrapMode===0&&(r.wrapMode=1),r.wrapWidth=i);break;case Le:o.setMaxWidth(t);break}this.setText()}},ZL=function(){var o,t,e,r=this.left,i=this.top,s,a,n,h;o=this.textObject,o.rexSizer.hidden||(t=o.rexSizer,e=t.padding,s=r+e.left,a=i+e.top,n=this.width-e.left-e.right,h=this.height-e.top-e.bottom,KL.call(this,o,n,h),Da(o,s,a,n,h,t.align),t.preOffsetY=0,xm.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},JL={setText:XL,updateTextObject:$L,preLayout:kL,layoutChildren:ZL};const dc=Phaser.Utils.Objects.IsPlainObject,Se=Phaser.Utils.Objects.GetValue,QL=Phaser.Display.Align.TOP_LEFT;class ym extends us{constructor(t,e,r,i,s,a){dc(e)?(a=e,e=Se(a,"x",0),r=Se(a,"y",0),i=Se(a,"width",void 0),s=Se(a,"height",void 0)):dc(i)&&(a=i,i=Se(a,"width",void 0),s=Se(a,"height",void 0)),super(t,e,r,i,s,a),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=Se(a,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Se(a,"clamplTextOY",!0)),this.alwaysScrollable=Se(a,"alwaysScrollable",!1);var n=Se(a,"background",void 0),h=Se(a,"text",void 0);h===void 0&&(h=jL(t));var u=Se(a,"textMask",!0);n&&this.addBackground(n),this.add(h),this.sizerChildren=[h];var l=this.getSizerConfig(h);l.align=QL,l.padding=Us(0),l.expand=!0,this.textObject=h,this.textObjectType=Zn(h),l.preOffsetY=0,l.offsetY=0,u&&(this.textMask=On.call(this,this.textObject,this)),this.addChildrenMap("background",n),this.addChildrenMap("text",h)}destroy(t){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case ve:this.lines.length=0;break;case Oe:this.lines.destroy();break;case Le:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case ve:case Oe:var e=this.textObject.style;t=e.metrics.fontSize+e.strokeThickness;break;case Le:var r=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*r;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case ve:case Oe:t=this.textObject.lineSpacing;break;case Le:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(gm.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=mm.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var e=this.topTextOY,r=this.bottomTextOY,i=this.textOYExceedTop(t),s=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:i?t=e:s&&(t=r)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),i&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=i,s&&(this.execeedBottomState||this.emit("execeedbottom",this,t,r)),this.execeedBottomState=s}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var jL=function(o){return o.add.text(0,0,"")};Object.assign(ym.prototype,JL);var qL=function(o){Object.defineProperty(o,"childOY",{configurable:!0,get:function(){return o.textOY},set:function(t){o.textOY=t}}),Object.defineProperty(o,"topChildOY",{get:function(){return o.topTextOY}}),Object.defineProperty(o,"bottomChildOY",{get:function(){return o.bottomTextOY}}),Object.defineProperty(o,"childVisibleHeight",{get:function(){return o.textObjectHeight}}),Object.defineProperty(o,"childHeight",{get:function(){return o.textHeight}})},_L=function(o){var t=this.childrenMap.child;return t.setText(o),this.resizeController(),this},tF=function(o){return this.setText(this.text+o),this};const Ei=Phaser.Utils.Objects.GetValue;class gu extends Ka{constructor(t,e){e===void 0&&(e={});var r=Ei(e,"text",void 0),i=Ei(e,"textWidth",void 0),s=Ei(e,"textHeight",void 0),a=Ei(e,"textMask",!0),n=Ei(e,"content",""),h=new ym(t,{width:i,height:s,text:r,textMask:a,content:n,clamplTextOY:Ei(e,"clamplChildOY",!1),alwaysScrollable:Ei(e,"alwaysScrollable",!1)});t.add.existing(h);var u=i===void 0?1:0,l=s===void 0;qL(h),e.scrollMode=0,e.type="rexTextArea",e.child={gameObject:h,proportion:u,expand:l};var f=Ei(e,"space",void 0);f&&(f.child=f.text),super(t,e),this.addChildrenMap("text",r)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var eF={setText:_L,appendText:tF};Object.assign(gu.prototype,eF);it.register("textArea",function(o){var t=new gu(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.TextArea",gu);var iF=function(){if(this.rexSizer.hidden)return 0;var o,t=this.child,e=t.rexSizer;return e.hidden?o=0:this.scrollMode===0?o=this.getChildWidth(t):o=0,o},sF=function(){if(this.rexSizer.hidden)return 0;var o,t=this.child,e=t.rexSizer;return e.hidden||this.scrollMode===0?o=0:o=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:Pt(t),o},nF=function(o){return o===void 0&&(o=[]),this.child&&this.child.isRexSizer&&o.push(this.child),o},rF=function(){var o=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:o+=this.childOY,this.child.setPosition(o,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},aF=function(){var o=this.child,t,e;o.rexSizer.hidden||(this.scrollMode===0?t=this.width:e=this.height,o.isRexSizer?o.runLayout(this,t,e):wi(o,t,e),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},Tm={getChildrenWidth:iF,getChildrenHeight:sF,getChildrenSizers:nF,resetChildPosition:rF,layoutChildren:aF};Object.assign(Tm,sm);const cc=Phaser.Utils.Objects.IsPlainObject,Ge=Phaser.Utils.Objects.GetValue,oF=Phaser.Display.Align.TOP_LEFT;class Sm extends us{constructor(t,e,r,i,s,a){cc(e)?(a=e,e=Ge(a,"x",0),r=Ge(a,"y",0),i=Ge(a,"width",void 0),s=Ge(a,"height",void 0)):cc(i)&&(a=i,i=Ge(a,"width",void 0),s=Ge(a,"height",void 0)),super(t,e,r,i,s,a),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(Ge(a,"scrollMode",!0)),this.setClampMode(Ge(a,"clamplChildOY",!0));var n=Ge(a,"child",void 0),h=Ge(a,"expand",!0);n.setOrigin&&n.setOrigin(0),this.add(n),this.sizerChildren=[n];var u=this.getSizerConfig(n);u.align=oF,u.expand=h,this.child=n,this.setupChildrenMask(Ge(a,"mask",void 0))}destroy(t){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=tm[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?Pt(this.child):Dt(this.child)}get childWidth(){return this.scrollMode===0?Dt(this.child):Pt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var e=this.topChildOY,r=this.bottomChildOY,i=this.childOYExceedTop(t),s=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:i?t=e:s&&(t=r)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),i&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=i,s&&(this.execeedBottomState||this.emit("execeedbottom",this,t,r)),this.execeedBottomState=s}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(Sm.prototype,Tm);const rn=Phaser.Utils.Objects.GetValue;class Cm extends Ka{constructor(t,e){e===void 0&&(e={});var r=ka(e),i=rn(e,"panel",void 0);i===void 0&&(i={}),i.scrollMode=r,i.clamplChildOY=rn(e,"clamplChildOY",!1);var s=new Sm(t,i);t.add.existing(s);var a=rn(i,"width",void 0),n=rn(i,"height",void 0),h,u;r===0?(h=a===void 0?1:0,u=n===void 0):(h=n===void 0?1:0,u=a===void 0),e.type="rexScrollablePanel",e.child={gameObject:s,proportion:h,expand:u};var l=rn(e,"space",void 0);l&&(l.child=l.panel),super(t,e),this.addChildrenMap("panel",s.child),this.addChildrenMap("panelLayer",s.maskLayer)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),kl(this.childrenMap.child,t),this}}it.register("scrollablePanel",function(o){var t=new Cm(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.ScrollablePanel",Cm);var Or={popUp:function(o,t){o.popUp(t)},scaleDown:function(o,t){o.scaleDown(t)},fadeIn:function(o,t){o.fadeIn(t)},fadeOut:function(o,t){o.fadeOut(t)}},Em=function(o,t,e,r){e===void 0&&(e=0),r===void 0&&(r=t.length),o.length=r-e;for(var i=0,s=o.length;i<s;i++)o[i]=t[i+e];return o};const _r=Phaser.Utils.Objects.GetValue;var $h=function(o,t,e){var r=_r(e,"reverse",!1),i;if(Fe(o[0]))if(r)for(var a=o.length,s=a-1;s>=0;s--)i=$h(o[s],t,e);else for(var s=0,a=o.length;s<a;s++)i=$h(o[s],t,e);else i=hF(o,t,e);return i},hF=function(o,t,e){var r=_r(e,"argsConvert",void 0),i=_r(e,"argsConvertScope",void 0),s=o[0];if(Pi=Em(Pi,o,1),r){r===!0&&(r=dg,i=void 0);for(var a=0,n=Pi.length;a<n;a++)i?Pi[a]=r.call(i,Pi[a],o):Pi[a]=r(Pi[a],o)}var h;typeof s=="string"?(h=t[s],h==null&&(h=_r(t,s,null))):h=s;var u=h.apply(t,Pi);return u},Pi=[];const Ne=Phaser.Utils.Objects.GetValue;class lF extends ee{constructor(t,e){super(t,e);var r=Ne(e,"clock",void 0);r||(r=new yg(t)),this.clock=r,this.clock.on("update",this.update,this),this.resetFromJSON(e)}resetFromJSON(t){return this.clock.resetFromJSON(Ne(t,"clock",void 0)),this.state=Ne(t,"state",0),this.commands=Ne(t,"commands",[]),this.scope=Ne(t,"scope",void 0),this.setTimeUnit(Ne(t,"timeUnit",0)),this.setDtMode(Ne(t,"dtMode",0)),this.index=Ne(t,"index",0),this.nextTime=Ne(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,e,r){this.stop();var i=Ne(r,"timeUnit",void 0);i!==void 0&&this.setTimeUnit(i);var s=Ne(r,"dtMode",void 0);return s!==void 0&&this.setDtMode(s),t=t.filter(function(a){var n=a[0];return!isNaN(n)}).map(function(a){var n=a[0];return typeof n=="string"&&(a[0]=parseFloat(a[0])),a}),this.dtMode===0&&t.sort(function(a,n){var h=a[0],u=n[0];return h>u?1:h<u?-1:0}),this.commands=t,this.scope=e,this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var e=this.commands.length-1;;){var r=this.commands[this.index],i=r[1];if(Fe(i)||(i=Em(uF,r,1)),$h(i,this.scope),this.emit("runcommand",i,this.scope),this.index===e)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var e=this.commands[this.index][0];return this.timeUnit===1&&(e=e*1e3),this.dtMode===1&&(e+=t),e}setDtMode(t){return typeof t=="string"&&(t=dF[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=fF[t]),this.timeUnit=t,this}}var uF=[];const fF={ms:0,s:1,sec:1},dF={abs:0,absolute:0,inc:1,increment:1},an=Phaser.Utils.Objects.GetValue;class Pm extends Xa{constructor(t,e){e===void 0&&(e={text:createDefaultTextObject(t)}),super(t,e),this.type="rexToast",this.setTransitInTime(an(e,"duration.in",200)),this.setDisplayTime(an(e,"duration.hold",1200)),this.setTransitOutTime(an(e,"duration.out",200)),this.setTransitInCallback(an(e,"transitIn",Mi.popUp)),this.setTransitOutCallback(an(e,"transitOut",Mi.scaleDown)),this.player=new lF(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Mi[t]),t){case Mi.popUp:t=Or.popUp;break;case Mi.fadeIn:t=Or.fadeIn;break}return t||(t=Ae),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Mi[t]),t){case Mi.scaleDown:t=Or.scaleDown;break;case Mi.fadeOut:t=Or.fadeOut;break}return t||(t=Ae),this.transitOutCallback=t,this}setScale(t,e){return e===void 0&&(e=t),this.scaleX0=t,this.scaleY0=e,super.setScale(t,e),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var e=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[Ae]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[Ae]]];return this.player.load(e,this).once("complete",function(){this.showMessage()},this).start(),this}}const Mi={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};it.register("toast",function(o){var t=new Pm(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Toast",Pm);var cF=function(){return function(o,t,e,r){t!=="panel"&&e.setChildVisible(o,!0)}},vF=function(){return function(o,t,e,r){t!=="panel"&&e.setChildVisible(o,!1)}},pF={show:cF,hide:vF},gF=function(o,t){return t===void 0&&(t=1),function(e,r,i,s){r!=="panel"&&i.fadeChild(e,s?0:o,t)}},mF=function(o,t){return t===void 0&&(t=0),function(e,r,i,s){r!=="panel"&&i.fadeChild(e,s?0:o,t)}},xF={show:gF,hide:mF},vc=function(o,t){return function(e,r,i,s){r!=="panel"&&i.moveChild(e,s?0:o,t)}},yF={show:vc,hide:vc},pc=function(o,t){return function(e,r,i,s){r==="panel"&&i.moveChild(e,s?0:o,t)}},TF={show:pc,hide:pc};const hh={visible:pF,fade:xF,move:yF,"move-panel":TF};var SF=function(o){var t,e;[t,...e]=typeof o=="string"?[o]:o;var r,i;return hh.hasOwnProperty(t)?(r=hh[t].show.apply(null,e),i=hh[t].hide.apply(null,e)):(r=Ae,i=Ae),{show:r,hide:i}},CF={showChild(o,t){var e=this.sizerChildren[o];return e&&(this.emit("showchild",e,o,this,t),this.resetChildState(e)),this},hideChild(o,t){var e=this.sizerChildren[o];return e&&(this.emit("hidechild",e,o,this,t),this.resetChildState(e)),this},swapChild(o,t){return this.currentChildKey===o||(this.currentChildKey==="panel"||o==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=o,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(o,t))),this},showPanel(o){return this.swapChild("panel",o),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var o=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(o),this},toggleRightSide(){var o=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(o),this},toggleTopSide(){var o=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(o),this},toggleBottomSide(){var o=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(o),this}};const EF=De.prototype.setChildVisible;var PF={setChildVisible(o,t){var e;if(typeof o=="string"){var e=o;o=this.sizerChildren[e]}else e=Wa(this.sizerChildren,o);return t===void 0&&(t=this.currentChildKey===e),EF.call(this,o,t),this}},MF={fadeChild(o,t,e){var r;return typeof o=="string"?(r=o,o=this.sizerChildren[r]):r=Wa(this.sizerChildren,o),t===void 0&&(t=500),e===void 0&&(e=this.currentChildKey===r?1:0),o.fadeIn(t,{start:o.alpha,end:e}),this},fadeChildPromise(o,t,e){return typeof o=="string"&&(o=this.sizerChildren[key]),this.fadeChild(o,t,e),o._fade?Zt(o._fade):Promise.resolve()}},AF={moveChild(o,t,e,r){var i;typeof o=="string"?(i=o,o=this.sizerChildren[i]):i=Wa(this.sizerChildren,o),t===void 0&&(t=500);var s=this.currentChildKey===i;if(r===void 0)switch(i){case"leftSide":case"rightSide":r=Dt(o);break;case"topSide":case"bottomSide":r=Pt(o);break;default:if(s)switch(this.previousChildKey){case"leftSide":case"rightSide":r=Dt(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":r=Pt(this.sizerChildren[this.previousChildKey]);break;default:r=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":r=Dt(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":r=Pt(this.sizerChildren[this.currentChildKey]);break;default:r=0;break}break}var a,n,h,u;if(s)switch(i){case"panel":switch(this.previousChildKey){case"leftSide":a=!0;break;case"rightSide":n=!0;break;case"topSide":h=!0;break;case"bottomSide":u=!0;break}break;case"leftSide":n=!0;break;case"rightSide":a=!0;break;case"topSide":u=!0;break;case"bottomSide":h=!0;break}else switch(i){case"panel":switch(this.currentChildKey){case"leftSide":n=!0;break;case"rightSide":a=!0;break;case"topSide":u=!0;break;case"bottomSide":h=!0;break}break;case"leftSide":a=!0;break;case"rightSide":n=!0;break;case"topSide":h=!0;break;case"bottomSide":u=!0;break}return a?o.moveTo(t,`-=${r}`,void 0,e):n?o.moveTo(t,`+=${r}`,void 0,e):h?o.moveTo(t,void 0,`-=${r}`,e):u?o.moveTo(t,void 0,`+=${r}`,e):o.moveTo(0),this},moveChildPromise(o,t,e,r){return typeof o=="string"&&(o=this.sizerChildren[key]),this.moveChild(o,t,e,r),o._easeMove?Zt(o._easeMove):Promise.resolve()}},Mm={};Object.assign(Mm,PF,MF,AF);const he=Phaser.Utils.Objects.GetValue;class mu extends Vi{constructor(t,e){super(t,e),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var r=he(e,"showChildCallback",void 0);if(r)if(Ba(r)){var i=he(e,"showChildCallbackScope",void 0);this.on("showchild",r,i);var s=he(e,"hideChildCallback",void 0),a=he(e,"hideChildCallbackScope",void 0);this.on("hidechild",s,a)}else{var n=SF(r);this.on("showchild",n.show),this.on("hidechild",n.hide)}var h=he(e,"background",void 0),u=he(e,"panel",void 0),l=he(e,"leftSide",void 0),f=he(e,"rightSide",void 0),c=he(e,"topSide",void 0),d=he(e,"bottomSide",void 0);if(h&&this.addBackground(h),u&&this.add(u,"panel","center",0,!0),l){var v=he(e,"expand.left",!0);this.add(l,"leftSide","left-top",0,{height:v})}if(f){var v=he(e,"expand.right",!0);this.add(f,"rightSide","right-top",0,{height:v})}if(c){var v=he(e,"expand.top",!0);this.add(c,"topSide","left-top",0,{width:v})}if(d){var v=he(e,"expand.bottom",!0);this.add(d,"bottomSide","left-bottom",0,{width:v})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(mu.prototype,CF,Mm);it.register("sides",function(o){var t=new mu(this.scene,o);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Sides",mu);const RF=Phaser.GameObjects.GameObject;var Jn=function(o){return o instanceof RF};it.register("click",function(o,t){return Jn(o)||(t=o,o=this.scene),new Xs(o,t)});st(window,"RexPlugins.UI.Click",Xs);it.register("tap",function(o,t){return Jn(o)||(t=o,o=this.scene),new Na(o,t)});st(window,"RexPlugins.UI.Tap",Na);it.register("press",function(o,t){return Jn(o)||(t=o,o=this.scene),new za(o,t)});st(window,"RexPlugins.UI.Press",za);it.register("swipe",function(o,t){return Jn(o)||(t=o,o=this.scene),new kn(o,t)});st(window,"RexPlugins.UI.Swipe",kn);it.register("pan",function(o,t){return Jn(o)||(t=o,o=this.scene),new Ng(o,t)});st(window,"RexPlugins.UI.Pan",Ng);var Am=function(o){for(var t=o.scene.input,e=t.manager,r=e.pointersTotal,i=e.pointers,s,a=0;a<r;a++)if(s=i[a],!(!s.primaryDown||t.getDragState(s)!==0||!qp(o,s)))return t.setDragState(s,1),t._drag[s.id]=[o],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(s,3),t.processDragStartList(s)):t.setDragState(s,2),!0;return!1};const Lr=Phaser.Utils.Objects.GetValue,gc=Phaser.Math.Distance.Between,mc=Phaser.Math.RotateAroundDistance;class Rm extends ee{constructor(t,e){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(Lr(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(Lr(t,"enable",!0)),this.setAxisMode(Lr(t,"axis",0)),this.setAxisRotation(Lr(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=OF[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return Am(this.parent),this}dragend(){if(!!this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,e,r){this.isDragging||(this.pointer=t)}onDrag(t,e,r){if(this.pointer===t){var i=this.parent;if(this.axisMode===0)i.x=e,i.y=r;else if(this.axisRotation===0)this.axisMode===1?i.x=e:this.axisMode===2&&(i.y=r);else{var s,a={x:e,y:r};s=gc(a.x,a.y,i.x,i.y),a=mc(a,i.x,i.y,-this.axisRotation,s),this.axisMode===1?a.y=i.y:this.axisMode===2&&(a.x=i.x),s=gc(a.x,a.y,i.x,i.y),a=mc(a,i.x,i.y,this.axisRotation,s),i.x=a.x,i.y=a.y}}}onDragEnd(t,e,r,i){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const OF={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};it.register("drag",function(o,t){return new Rm(o,t)});st(window,"RexPlugins.UI.Drag",Rm);it.register("pinch",function(o){return new zg(this.scene,o)});st(window,"RexPlugins.UI.Pinch",zg);it.register("rotate",function(o){return new $l(this.scene,o)});st(window,"RexPlugins.UI.Rotate",$l);const LF=Phaser.Utils.Objects.IsPlainObject,xc=Phaser.Utils.Objects.GetValue;var yc=function(o,t,e){var r;if(o===void 0)o=e.texture.key,t=e.frame.name;else if(LF(o)){var i=o;o=xc(i,"key",e.texture.key),t=xc(i,"frame",e.frame.name)}else typeof o=="string"||(r=o);return r===void 0&&(r=function(s){s.setTexture(o,t)}),r};const on=Phaser.Utils.Objects.GetValue,FF=Phaser.Utils.Objects.GetAdvancedValue,bF=Phaser.Math.Linear;class Om extends Ws{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(FF(t,"duration",500)),this.setEase(on(t,"ease","Sine")),this.setOrientation(on(t,"orientation",0)),this.setFrontFace(on(t,"front",void 0)),this.setBackFace(on(t,"back",void 0)),this.setFace(on(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=DF[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=wF[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,e){return this.frontFaceCallback=yc(t,e,this.parent),this}setBackFace(t,e){return this.backFaceCallback=yc(t,e,this.parent),this}start(){return this.timer.isRunning?this:(this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this)}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateGameObject(t,e){e.justRestart&&this.toggleFace();var r=e.t;e.isOddIteration&&(r=1-r),r=this.easeFn(r);var i=bF(1,0,r);this.orientation===0?t.scaleX=i:t.scaleY=i}}const DF={x:0,horizontal:0,y:1,vertical:1},wF={front:0,back:1};it.register("flip",function(o,t){return new Om(o,t)});st(window,"RexPlugins.UI.Flip",Om);it.register("shake",function(o,t){return new Ul(o,t)});st(window,"RexPlugins.UI.Shake",Ul);it.register("touchEventStop",function(o,t){return new _l(o,t)});st(window,"RexPlugins.UI.TouchEventStop",_l);const Lm=Phaser.Math.Vector3,IF=Phaser.Math.Matrix4;var Tc=new Lm,Sc=new Lm,Cc=new IF,BF=function(o,t,e,r,i,s,a){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),a===void 0&&(a=0),Tc.set(t,e,r),Sc.set(i,s,a),Cc.fromRotationXYTranslation(Sc,Tc,!0);for(var n=0,h=o.vertices.length;n<h;n++)o.vertices[n].transformMat4(Cc)};const GF=Phaser.GameObjects.Mesh,NF=Phaser.Utils.Objects.IsPlainObject,Qi=Phaser.Utils.Objects.GetValue,zF=Phaser.Geom.Mesh.GenerateGridVerts,lh=Phaser.Math.RadToDeg,ta=Phaser.Math.DegToRad,Fm=45,VF=1+1/Math.sin(ta(Fm));class YF extends GF{constructor(t,e,r,i,s,a){NF(e)&&(a=e,e=Qi(a,"x",0),r=Qi(a,"y",0),i=Qi(a,"key",null),s=Qi(a,"frame",null)),super(t,e,r,i,s),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(VF),this.hideCCW=Qi(a,"hideCCW",!0);var n=Qi(a,"gridWidth",32),h=Qi(a,"gridHeight",n);this.resetVerts(n,h)}resetPerspective(){return this.setPerspective(this.width,this.height,Fm),this}resetVerts(t,e){if(t!==void 0&&(this.gridWidth=t),e!==void 0&&(this.gridHeight=e),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var r=this.frame.cutWidth,i=this.frame.cutHeight;return zF({mesh:this,texture:this.texture.key,frame:this.frame.name,width:r/this.height,height:i/this.height,widthSegments:Math.ceil(r/this.gridWidth),heightSegments:Math.ceil(i/this.gridHeight),flipY:this.frame.source.isRenderTexture}),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return lh(this.rotationX)}set angleX(t){this.rotationX=ta(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return lh(this.rotationY)}set angleY(t){this.rotationY=ta(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return lh(this.rotationZ)}set angleZ(t){this.rotationZ=ta(t)}transformVerts(t,e,r,i,s,a){return BF(this,t,e,r,i,s,a),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var e=this.vertices,r=0,i=e.length;r<i;r++)e[r].color=t}setTint(t){return this.tint=t,this}}const WF=Phaser.GameObjects.RenderTexture,UF=Phaser.Utils.Objects.IsPlainObject,Fr=Phaser.Utils.Objects.GetValue;class XF extends YF{constructor(t,e,r,i,s,a){UF(e)&&(a=e,e=Fr(a,"x",0),r=Fr(a,"y",0),i=Fr(a,"width",32),s=Fr(a,"height",32));var n=new WF(t,e,r,i,s).setOrigin(.5);super(t,e,r,n.texture.key,null,a),this.type="rexPerspectiveRenderTexture",this.rt=n}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Utils.Objects.IsPlainObject;const HF=Phaser.Math.DegToRad;HF(180);Phaser.Utils.Objects.GetValue;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const Ec=Phaser.Geom.Rectangle,$F=Phaser.Geom.Rectangle.Union;var kF=function(o,t){t===void 0?t=new Ec:t===!0&&(uh===void 0&&(uh=new Ec),t=uh);for(var e,r=!0,i=0,s=o.length;i<s;i++)e=o[i],e.getBounds&&(ji=e.getBounds(ji),r?(t.setTo(ji.x,ji.y,ji.width,ji.height),r=!1):$F(ji,t,t));return t},ji,uh,Ms=Phaser.Utils.Objects.GetValue,KF=function(o){var t=o.gameObjects,e=o.renderTexture;if(t.length===0)return e&&e.setSize(1,1).clear(),e;var r=Ms(o,"x",void 0),i=Ms(o,"y",void 0),s=Ms(o,"width",void 0),a=Ms(o,"height",void 0),n=Ms(o,"originX",0),h=Ms(o,"originY",0),u,l;if(s===void 0||a===void 0||r===void 0||i===void 0){var f=kF(t,!0),c=r!==void 0&&i!==void 0;c?(s=Math.max(r-f.left,f.right-r)*2,a=Math.max(i-f.top,f.bottom-i)*2,n=.5,h=.5):(r=f.x,i=f.y,s=f.width,a=f.height,n=0,h=0),u=f.x,l=f.y}else u=r+(0-n)*s,l=i+(0-h)*a;if(e)e.setPosition(r,i),(e.width!==s||e.height!==a)&&e.setSize(s,a);else{var d=t[0].scene;e=d.add.renderTexture(r,i,s,a)}return e.setOrigin(n,h),e.camera.setScroll(u,l),t=sa(ns(t)),e.draw(t),e};const ZF=De.prototype.add,JF=Phaser.Utils.Objects.GetValue;class bm extends XF{constructor(t,e){var r=t.scene;super(r,t.x,t.y,1,1,e),r.add.existing(this),this.setVisible(!1),ZF.call(t,this),this.visibleSibling=[],this.perspectiveState=!1,this.useParentBounds=JF(e,"useParentBounds",!1),this.boot()}boot(){this.rexContainer.parent.once("destroy",this.onParentDestroy,this)}destroy(t){!this.scene||(this.exit(),this.rexContainer.parent.off("destroy",this.onParentDestroy,this),super.destroy(t))}onParentDestroy(t,e){this.destroy(e)}enter(){this.exit();var t=this.rexContainer.parent;return KF({gameObjects:t.getAllVisibleChildren(),renderTexture:this.rt,x:this.x,y:this.y,width:this.useParentBounds?t.displayWidth:void 0,height:this.useParentBounds?t.displayHeighth:void 0,originX:this.useParentBounds?t.originX:void 0,originY:this.useParentBounds?t.originY:void 0}),this.syncSize(),t.setChildVisible(this,!0),t.children.forEach(function(e){e!==this&&(t.setChildVisible(e,!1),this.visibleSibling.push(e))},this),this.perspectiveState=!0,this}exit(){var t=this.rexContainer.parent;return this.visibleSibling.forEach(function(e){t.setChildVisible(e,!0)},this),this.visibleSibling.length=0,t.setChildVisible(this,!1),this.perspectiveState=!1,this}}it.register("perspective",function(o,t){return new bm(o,t)});st(window,"RexPlugins.UI.Perspective",bm);it.register("anchor",function(o,t){return new Wl(o,t)});st(window,"RexPlugins.UI.Anchor",Wl);const ui=Phaser.Utils.Objects.GetValue;var QF=function(o,t){t===void 0&&(t={});var e=o.scene,r=o.style,i=ui(t,"backgroundColor",r.backgroundColor);i===null&&(i="transparent"),t.text=ui(t,"text",o.text),t.fontFamily=ui(t,"fontFamily",r.fontFamily),t.fontSize=ui(t,"fontSize",r.fontSize),t.color=ui(t,"color",r.color),t.backgroundColor=i,t.direction=ui(t,"rtl",r.rtl)?"rtl":"ltr",t.align=ui(t,"align",jF(r)),t.direction==="rtl"&&du(o)&&(t.align="right");var s=new Tl(e,o.x,o.y,ui(t,"width",o.width),ui(t,"height",o.height),t);return s.setOrigin(o.originX,o.originY),e.add.existing(s),s},jF=function(o){return o.hasOwnProperty("align")?o.align:o.hasOwnProperty("halign")?o.halign:"left"};const br=Phaser.Utils.Objects.GetValue;var As=void 0;class qF extends ee{constructor(t){super(t,{eventEmitter:!1}),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0}shutdown(t){this.isShutdown||(this.close(),As===this&&(As=void 0),super.shutdown(t))}open(t,e){As!==void 0&&As.close(),As=this,Ba(t)&&(e=t,t=void 0),e===void 0&&(e=br(t,"onClose",void 0));var r=br(t,"onOpen",void 0),i=br(t,"onTextChanged",void 0);return this.inputText=QF(this.parent,t).on("textchange",function(s){var a=s.text;i?i(this.parent,a):this.parent.text=a},this).setFocus(),this.parent.setVisible(!1),this.onClose=e,br(t,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),r&&r(this.parent)},[],this),this}close(){return As=void 0,this.inputText?(this.parent.setVisible(!0),this.inputText.destroy(),this.inputText=void 0,this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this):this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}var _F=function(o,t,e){return o._edit||(o._edit=new qF(o)),o._edit.open(t,e),o._edit},tb=function(o){var t=function(e){var r=o.padding,i=e-r.left-r.right,s=o.style;return du(o)?(s.wordWrapWidth=i,s.maxLines=0):(s.wrapMode===0&&(s.wrapMode=1),s.wrapWidth=i,s.maxLines=0),o.setFixedSize(e,0),o};return t},eb=function(o){var t=function(e){return o.setFixedSize(e,0).runWordWrap(),o};return t},ib=function(o){var t=function(e){return o.setMaxWidth(e),o};return t},sb=function(o){return o instanceof Yn},nb=function(o,t){return t===void 0&&(t=0),o._minWidth=t,o.runWidthWrap=sb(o)?eb(o):lm(o)?ib(o):tb(o),o},rb=function(o,t){return o===void 0&&(o=0),new Promise(function(e,r){setTimeout(function(){e(t)},o)})},ab=function(o,t){var e=o.scene,r=new tu(e,t);return e.add.existing(r),o.isRexContainerLite?o.moveDepthBelow(r):e.children.moveBelow(r,o),r},Dr={popUp:function(o,t){Fg(o,t)},scaleDown:function(o,t){bg(o,t,void 0,void 0,!1)},fadeIn:function(o,t){wa(o,t)},fadeOut:function(o,t){Ia(o,t,!1)}};class ob extends ti{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;t.transitionIn(),t.delayCall(t.transitInTime,this.next,this)}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent,e=t.displayTime;e>=0&&t.delayCall(e,t.requestClose,t),t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;t.transitionOut(),t.delayCall(t.transitOutTime,this.next,this)}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}}const fi=Phaser.Utils.Objects.GetValue,hb=Phaser.Time.TimerEvent;class lb extends ee{constructor(t,e){super(t,e);var r=fi(e,"cover");this.cover=r!==!1?ab(t,r):void 0;var i=fi(e,"manualClose",!0);if(i)this.setDisplayTime(-1);else{this.setDisplayTime(fi(e,"duration.hold",2e3));var s=fi(e,"anyTouchClose",!0);s&&this.anyTouchClose()}this.setTransitInTime(fi(e,"duration.in",200)),this.setTransitOutTime(fi(e,"duration.out",200)),this.setTransitInCallback(fi(e,"transitIn",Ai.popUp)),this.setTransitOutCallback(fi(e,"transitOut",Ai.scaleDown)),this.destroyParent=fi(e,"destroy",!0),this.timer=new hb,this._state=new ob(this,{eventEmitter:!1}),this.closeEventData=void 0,this._state.next()}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.requestClose,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),this.transitInCallback=void 0,this.transitOutCallback=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.requestClose,this):this.scene.input.once("pointerup",this.requestClose,this),this}transitionIn(){var t=this.transitInTime;this.transitInCallback(this.parent,t);var e=this.cover;return e&&wa(e,t,e.alpha),this}transitionOut(){var t=this.transitOutTime;this.transitOutCallback(this.parent,t);var e=this.cover;return e&&Ia(e,t,!1),this}onOpen(){this.emit("open",this.parent,this)}onClose(){this.emit("close",this.closeEventData),this.destroyParent?this.parent.destroy():this.destroy()}delayCall(t,e,r){var i=this.scene.events;return this.timer=this.scene.time.delayedCall(t,i.once,["postupdate",e,r],i),this}removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}setTransitInTime(t){return this.transitInTime=t,this}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Ai[t]),t){case Ai.popUp:t=Dr.popUp;break;case Ai.fadeIn:t=Dr.fadeIn;break}return t||(t=Ae),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Ai[t]),t){case Ai.scaleDown:t=Dr.scaleDown;break;case Ai.fadeOut:t=Dr.fadeOut;break}return t==null&&(t=Ae),this.transitOutCallback=t,this}requestClose(t){return this._state.state==="OPEN"&&(this.closeEventData=arguments.length>0?t:this.parent,this._state.next()),this}}const Ai={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var Dm=function(o,t){var e=new lb(o,t);return e.on("open",function(){o.emit("modal.open",e)}),e.on("close",function(r){o.emit("modal.close",r,e)}),o.on("modal.requestClose",e.requestClose,e),e.on("close",function(){o.off("modal.requestClose",e.requestClose,e)}),e},ub=function(o,t){var e=Dm(o,t);return new Promise(function(r,i){e.once("close",function(s){r(s)})})},fb=function(o,t){o.emit("modal.requestClose",t)};class wm extends Phaser.Plugins.ScenePlugin{constructor(t,e){super(t,e),this.add=new it(t)}start(){var t=this.scene.events;t.on("destroy",this.destroy,this)}isInTouching(t,e,r,i){return t.visible?Bg(t,e,r,i):!1}get viewport(){return Lg(this.scene,!0)}}var db={getParentSizer:rs,getTopmostSizer:tg,hide:bi,show:Fi,isShown:Xl,edit:_F,wrapExpandText:nb,waitEvent:vg,waitComplete:Zt,delayPromise:rb,setChildrenInteractive:kl,fadeIn:wa,fadeOutDestroy:Ia,easeMoveTo:Dg,easeMoveFrom:wg,modal:Dm,modalPromise:ub,modalClose:fb,requestDrag:Am};Object.assign(wm.prototype,db);var cb={type:yn.AUTO,parent:"game",backgroundColor:"#33A5E7",scale:{width:1792,height:896,mode:yn.Scale.FIT,autoCenter:yn.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{y:500},debug:!1}},dom:{createContainer:!0},plugins:{scene:[{key:"rexUI",plugin:wm,mapping:"rexUI"}]}};const vb="modulepreload",Pc={},pb="/",Pe=function(t,e){return!e||e.length===0?t():Promise.all(e.map(r=>{if(r=`${pb}${r}`,r in Pc)return;Pc[r]=!0;const i=r.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":vb,i||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),i)return new Promise((n,h)=>{a.addEventListener("load",n),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},gb=1e3,Sn=5*60,Is=50,xu=1e3,mb=200,xb=2e3,Mc=3,Ac=100,yb=20,Tb=45e3,Sb=1e4,Cb=5,Ln=3,Eb=6,Pb=["a","an","the","to","sth","sb","a/the"],Rc=/(\(.*?\))/,Mb=["person","noun","verb","adverb","adjective","negative","N\xE1zov prvku","Zna\u010Dka"],Im={score:0,itemSuccessRatio:1,noOfMatchesOnFirstAttempt:0,noOfQuestionsAsked:0,successRatePercentage:0},Ab={status:"",score:Im,scoreHistory:[],successRateHistory:[]},fh={maxPoints:xu+Is,maxMultiplication:1,comboPoints:0},Rb={maxPoints:mb+Is,maxMultiplication:1,comboPoints:0},Ob={maxPoints:xu/2+Is,maxMultiplication:1,comboPoints:0},dh=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];function Lb(o){switch(o){case"../common/language-specific/en/texts.ts":return Pe(()=>import("./texts.b60be6c9.js"),[]);case"../common/language-specific/sk/texts.ts":return Pe(()=>import("./texts.eaf6357e.js"),[]);default:return new Promise(function(t,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function Fb(o){switch(o){case"../data/config/gjhtar/matrix.json":return Pe(()=>import("./matrix.805b2054.js"),[]);case"../data/config/gjhtar/mock-matrix.json":return Pe(()=>import("./mock-matrix.9018cff8.js"),[]);case"../data/config/gjhtar/mock-vocabulary.json":return Pe(()=>import("./mock-vocabulary.1729f664.js"),[]);case"../data/config/gjhtar/vocabulary.json":return Pe(()=>import("./vocabulary.738bf536.js"),[]);case"../data/config/periodtab/matrix.json":return Pe(()=>import("./matrix.ce35449a.js"),[]);case"../data/config/test/matrix.json":return Pe(()=>import("./matrix.c693d221.js"),[]);case"../data/config/test/vocabulary.json":return Pe(()=>import("./vocabulary.139a370a.js"),[]);default:return new Promise(function(t,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function bb(o){switch(o){case"../data/config/gjhtar/config.ts":return Pe(()=>import("./config.b8e1a5b6.js"),[]);case"../data/config/periodtab/config.ts":return Pe(()=>import("./config.30a530ab.js"),[]);case"../data/config/test/config.ts":return Pe(()=>import("./config.3002d28c.js"),[]);default:return new Promise(function(t,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}class Db{constructor(){_(this,"gameConfig");_(this,"data",{});_(this,"texts")}async init(t){var e,r,i,s,a;try{this.gameConfig=await bb(`../data/config/${t}/config.ts`);const n=(e=this.gameConfig.languageCode)!=null?e:"en";await this.initTexts(n);for(let h of this.gameConfig.data){h.src.startsWith("./")?this.data[`${h.id}`]=(await Fb(`../data/config/${t}/${h.id}.json`)).default:this.data[`${h.id}`]=await((r=await fetch(`${h.src}`))==null?void 0:r.json());let u=this.data[`${h.id}`];switch(h.dataFilter&&(u=u.filter(l=>h.dataFilter(l))),h.id){case"matrix":this.data.matrix=this.cleanupMatrix(u);break;case"vocabulary":this.data.vocabulary=this.cleanupVocabulary(u);break;default:console.error("init: Unhandled data source id",h.id)}}(s=(i=this.gameConfig.style)==null?void 0:i.backgroundImage)!=null&&s.startsWith("./")&&(this.gameConfig.style.backgroundImage=`./assets/games/${t}/${(a=this.gameConfig.style)==null?void 0:a.backgroundImage}`)}catch(n){console.error("init",n)}return this}async initTexts(t){this.texts=await Lb(`../common/language-specific/${t}/texts.ts`)}cleanupVocabulary(t){return t=t.map(e=>ir(hi({},e),{meaning:String(e.meaning).trim()})),t}cleanupMatrix(t){let e=[];return t.forEach(r=>{let i={lesson:r.LESSON?String(r.LESSON).trim():"",letter:r.LETTER?String(r.LETTER).trim():"",person:r.PERSON?String(r.PERSON).trim():"",noun:r.NOUN?String(r.NOUN).trim():"",verb:r.VERB?String(r.VERB).trim():"",adjective:r.ADJECTIVE?String(r.ADJECTIVE).trim():"",adverb:r["ADVERB/PREP"]?String(r["ADVERB/PREP"]).trim():"",negative:r.NEGATIVE?String(r.NEGATIVE).trim():"","N\xE1zov prvku":r["N\xE1zov prvku"]?String(r["N\xE1zov prvku"]).trim():"",Zna\u010Dka:r.Zna\u010Dka?String(r.Zna\u010Dka).trim():""};e.push(i)}),e}saveScoreHistory(t,e){try{let r=this.getScoreHistory(t);return r[t].push(e),r[t]=r[t].slice(-yb),localStorage.setItem("scoreHistory",JSON.stringify(r)),r[t]}catch(r){console.error("saveScoreHistory",r)}}getScoreHistory(t){var e,r;try{const i=(e=localStorage.getItem("scoreHistory"))!=null?e:"{}",s=(r=JSON.parse(i))!=null?r:{};return t&&!s[t]&&(s[t]=[]),s}catch(i){console.error("getScoreHistory",i)}}}var kh=function(o,t){return kh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},kh(o,t)};function Hs(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");kh(o,t);function e(){this.constructor=o}o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Kh(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function oa(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(n){a={error:n}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return s}function ha(o,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return o.concat(s||Array.prototype.slice.call(t))}function Qe(o){return typeof o=="function"}function Bm(o){var t=function(r){Error.call(r),r.stack=new Error().stack},e=o(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ch=Bm(function(o){return function(e){o(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Zh(o,t){if(o){var e=o.indexOf(t);0<=e&&o.splice(e,1)}}var Za=function(){function o(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return o.prototype.unsubscribe=function(){var t,e,r,i,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var n=Kh(a),h=n.next();!h.done;h=n.next()){var u=h.value;u.remove(this)}}catch(p){t={error:p}}finally{try{h&&!h.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}else a.remove(this);var l=this.initialTeardown;if(Qe(l))try{l()}catch(p){s=p instanceof ch?p.errors:[p]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var c=Kh(f),d=c.next();!d.done;d=c.next()){var v=d.value;try{Oc(v)}catch(p){s=s!=null?s:[],p instanceof ch?s=ha(ha([],oa(s)),oa(p.errors)):s.push(p)}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}if(s)throw new ch(s)}},o.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)Oc(t);else{if(t instanceof o){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},o.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},o.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},o.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Zh(e,t)},o.prototype.remove=function(t){var e=this._finalizers;e&&Zh(e,t),t instanceof o&&t._removeParent(this)},o.EMPTY=function(){var t=new o;return t.closed=!0,t}(),o}(),Gm=Za.EMPTY;function Nm(o){return o instanceof Za||o&&"closed"in o&&Qe(o.remove)&&Qe(o.add)&&Qe(o.unsubscribe)}function Oc(o){Qe(o)?o():o.unsubscribe()}var Ja={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},la={setTimeout:function(o,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=la.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,ha([o,t],oa(e))):setTimeout.apply(void 0,ha([o,t],oa(e)))},clearTimeout:function(o){var t=la.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(o)},delegate:void 0};function wb(o){la.setTimeout(function(){throw o})}function Lc(){}var Ib=function(){return yu("C",void 0,void 0)}();function Bb(o){return yu("E",void 0,o)}function Gb(o){return yu("N",o,void 0)}function yu(o,t,e){return{kind:o,value:t,error:e}}var wr=null;function ea(o){if(Ja.useDeprecatedSynchronousErrorHandling){var t=!wr;if(t&&(wr={errorThrown:!1,error:null}),o(),t){var e=wr,r=e.errorThrown,i=e.error;if(wr=null,r)throw i}}else o()}var Tu=function(o){Hs(t,o);function t(e){var r=o.call(this)||this;return r.isStopped=!1,e?(r.destination=e,Nm(e)&&e.add(r)):r.destination=Yb,r}return t.create=function(e,r,i){return new Jh(e,r,i)},t.prototype.next=function(e){this.isStopped?ph(Gb(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?ph(Bb(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?ph(Ib,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Za),Nb=Function.prototype.bind;function vh(o,t){return Nb.call(o,t)}var zb=function(){function o(t){this.partialObserver=t}return o.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(r){Ir(r)}},o.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(r){Ir(r)}else Ir(t)},o.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){Ir(e)}},o}(),Jh=function(o){Hs(t,o);function t(e,r,i){var s=o.call(this)||this,a;if(Qe(e)||!e)a={next:e!=null?e:void 0,error:r!=null?r:void 0,complete:i!=null?i:void 0};else{var n;s&&Ja.useDeprecatedNextContext?(n=Object.create(e),n.unsubscribe=function(){return s.unsubscribe()},a={next:e.next&&vh(e.next,n),error:e.error&&vh(e.error,n),complete:e.complete&&vh(e.complete,n)}):a=e}return s.destination=new zb(a),s}return t}(Tu);function Ir(o){wb(o)}function Vb(o){throw o}function ph(o,t){var e=Ja.onStoppedNotification;e&&la.setTimeout(function(){return e(o,t)})}var Yb={closed:!0,next:Lc,error:Vb,complete:Lc},Wb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ub(o){return o}function Xb(o){return o.length===0?Ub:o.length===1?o[0]:function(e){return o.reduce(function(r,i){return i(r)},e)}}var Fc=function(){function o(t){t&&(this._subscribe=t)}return o.prototype.lift=function(t){var e=new o;return e.source=this,e.operator=t,e},o.prototype.subscribe=function(t,e,r){var i=this,s=$b(t)?t:new Jh(t,e,r);return ea(function(){var a=i,n=a.operator,h=a.source;s.add(n?n.call(s,h):h?i._subscribe(s):i._trySubscribe(s))}),s},o.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},o.prototype.forEach=function(t,e){var r=this;return e=bc(e),new e(function(i,s){var a=new Jh({next:function(n){try{t(n)}catch(h){s(h),a.unsubscribe()}},error:s,complete:i});r.subscribe(a)})},o.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},o.prototype[Wb]=function(){return this},o.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xb(t)(this)},o.prototype.toPromise=function(t){var e=this;return t=bc(t),new t(function(r,i){var s;e.subscribe(function(a){return s=a},function(a){return i(a)},function(){return r(s)})})},o.create=function(t){return new o(t)},o}();function bc(o){var t;return(t=o!=null?o:Ja.Promise)!==null&&t!==void 0?t:Promise}function Hb(o){return o&&Qe(o.next)&&Qe(o.error)&&Qe(o.complete)}function $b(o){return o&&o instanceof Tu||Hb(o)&&Nm(o)}function kb(o){return Qe(o==null?void 0:o.lift)}function Kb(o){return function(t){if(kb(t))return t.lift(function(e){try{return o(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Zb(o,t,e,r,i){return new Jb(o,t,e,r,i)}var Jb=function(o){Hs(t,o);function t(e,r,i,s,a,n){var h=o.call(this,e)||this;return h.onFinalize=a,h.shouldUnsubscribe=n,h._next=r?function(u){try{r(u)}catch(l){e.error(l)}}:o.prototype._next,h._error=s?function(u){try{s(u)}catch(l){e.error(l)}finally{this.unsubscribe()}}:o.prototype._error,h._complete=i?function(){try{i()}catch(u){e.error(u)}finally{this.unsubscribe()}}:o.prototype._complete,h}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;o.prototype.unsubscribe.call(this),!r&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(Tu),Qb=Bm(function(o){return function(){o(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Su=function(o){Hs(t,o);function t(){var e=o.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype.lift=function(e){var r=new Dc(this,this);return r.operator=e,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new Qb},t.prototype.next=function(e){var r=this;ea(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=Kh(r.currentObservers),n=a.next();!n.done;n=a.next()){var h=n.value;h.next(e)}}catch(u){i={error:u}}finally{try{n&&!n.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}}})},t.prototype.error=function(e){var r=this;ea(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=e;for(var i=r.observers;i.length;)i.shift().error(e)}})},t.prototype.complete=function(){var e=this;ea(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var r=e.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(e){return this._throwIfClosed(),o.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var r=this,i=this,s=i.hasError,a=i.isStopped,n=i.observers;return s||a?Gm:(this.currentObservers=null,n.push(e),new Za(function(){r.currentObservers=null,Zh(n,e)}))},t.prototype._checkFinalizedStatuses=function(e){var r=this,i=r.hasError,s=r.thrownError,a=r.isStopped;i?e.error(s):a&&e.complete()},t.prototype.asObservable=function(){var e=new Fc;return e.source=this,e},t.create=function(e,r){return new Dc(e,r)},t}(Fc),Dc=function(o){Hs(t,o);function t(e,r){var i=o.call(this)||this;return i.destination=e,i.source=r,i}return t.prototype.next=function(e){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,e)},t.prototype.error=function(e){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,e)},t.prototype.complete=function(){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||r===void 0||r.call(e)},t.prototype._subscribe=function(e){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(e))!==null&&i!==void 0?i:Gm},t}(Su),hn=function(o){Hs(t,o);function t(e){var r=o.call(this)||this;return r._value=e,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(e){var r=o.prototype._subscribe.call(this,e);return!r.closed&&e.next(this._value),r},t.prototype.getValue=function(){var e=this,r=e.hasError,i=e.thrownError,s=e._value;if(r)throw i;return this._throwIfClosed(),s},t.prototype.next=function(e){o.prototype.next.call(this,this._value=e)},t}(Su);function jb(o,t){return Kb(function(e,r){var i=0;e.subscribe(Zb(r,function(s){return o.call(t,s,i++)&&r.next(s)}))})}class zm{constructor(t,e){_(this,"currentQuestion");_(this,"questionQueue",[]);_(this,"vocabulary");_(this,"matrix");_(this,"currentQuestionQueueIndex",-1);this.vocabulary=t,this.matrix=e,this.currentQuestionQueueIndex=-1}getNextQuestion(){if(this.currentQuestionQueueIndex<this.questionQueue.length-1)return this.currentQuestionQueueIndex++,this.currentQuestion=this.questionQueue[this.currentQuestionQueueIndex],this.currentQuestion.askedTimes++,this.currentQuestion.lastTimeAsked=new Date,this.currentQuestion}shuffleArray(t){for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}generateRandomNumber(t=0,e=100){const r=e-t;let i=Math.random();return i=Math.round(i*r),i=i+t,i}isValidWord(t){return t&&t!==""&&t.toLowerCase()!=="x"&&!t.toLowerCase().startsWith("x ")}removeStopWords(t){let e=[],r=t.split(" ");for(let i=0;i<r.length;i++){const s=r[i].split(".").join("");Pb.includes(s.toLowerCase())||e.push(s)}return e.join(" ")}compareAnswerToExpected(t,e){e=this.removeDiacritics(e.trim().toLowerCase()),t=this.removeDiacritics(t.trim().toLowerCase()),t=t.replace(new RegExp(Rc,"g"),""),e=e.replace(new RegExp(Rc,"g"),"");let r;const i=t===e;let s=this.getExpectedAnswerItems(t);return s=s.map(a=>a.trim()),r=s.find(a=>a.trim()===e.trim()?a:this.removeStopWords(a).trim()===e),!!(i||r)}getExpectedAnswerItems(t){let e=[];return t.includes("/")?e=t.split("/"):e=[t],e}repeatTheSameQuestionSoon(){const t=this.currentQuestion.repeatAfter,e=this.questionQueue.splice(this.currentQuestionQueueIndex,1)[0];this.questionQueue.splice(this.currentQuestionQueueIndex+t,0,e),this.currentQuestionQueueIndex=this.currentQuestionQueueIndex-1,this.currentQuestion.repeatAfter=t-1,this.currentQuestion.repeatAfter<0&&(this.currentQuestion.repeatAfter=0)}repeatTheSameQuestionLater(){const t=this.questionQueue.splice(this.currentQuestionQueueIndex,1)[0];this.questionQueue.splice(this.currentQuestionQueueIndex+Eb,0,t),this.currentQuestionQueueIndex=this.currentQuestionQueueIndex-1,this.currentQuestion.repeatAfter=Ln,this.currentQuestion.repeatAfter<0&&(this.currentQuestion.repeatAfter=0)}repeatTheSameQuestionIfNeeded(t){!t.isValid||t.noOfMatches!==t.noOfExpectedMatches?this.repeatTheSameQuestionSoon():this.currentQuestion.repeatAfter!==Ln&&this.repeatTheSameQuestionLater()}removeDiacritics(t){for(let e=0;e<dh.length;e++)t=t.replace(dh[e].letters,dh[e].base);return t.slice()}}class qb extends zm{constructor(t,e){super(t,e),this.initQuestionQueue()}initQuestionQueue(){this.shuffleArray(this.vocabulary).forEach(e=>{const r={item:e,expectedAnswer:e.word,noOfExpectedAnswerItems:1,points:0,askedTimes:0,lastTimeAsked:null,repeatAfter:Ln,isMatchOnFirstAttempt:!1};this.questionQueue.push(r)})}evaluateAnswer(t,e){const r=e.maxPoints+e.comboPoints,i=this.currentQuestion.expectedAnswer,s=this.currentQuestion.noOfExpectedAnswerItems,a=this.compareAnswerToExpected(i,t);let n={text:t,expectedText:i,isValid:!!a,points:a?r:0,noOfMatches:a?1:0,noOfExpectedMatches:s};return this.repeatTheSameQuestionIfNeeded(n),n}}class Vm extends zm{constructor(t,e){super(t,e),this.initQuestionQueue()}initQuestionQueue(){this.shuffleArray(this.matrix).forEach(e=>{const r=this.getType(e);if(r){const i=e[r.answerType],s=this.getExpectedAnswerItems(i).length,n={item:{matrix:e,wordType:r.wordType,answerType:r.answerType,word:e[r.wordType]},expectedAnswer:i,noOfExpectedAnswerItems:s,points:0,askedTimes:0,lastTimeAsked:null,repeatAfter:Ln,isMatchOnFirstAttempt:!1};this.questionQueue.push(n)}})}getNumberOfExpectedAnswerItems(t){}evaluateAnswer(t,e){const r=e.maxPoints+e.comboPoints,i=this.currentQuestion.expectedAnswer,s=this.currentQuestion.noOfExpectedAnswerItems;let a=0;if(t.includes(",")){let u=t.split(",");u=[...new Set(u)];for(let l of u)this.compareAnswerToExpected(i,l)&&a++}else this.compareAnswerToExpected(i,t)&&(a=1);let h={text:t,expectedText:i,isValid:!!a,points:a?r*a:0,noOfMatches:a,noOfExpectedMatches:s};return this.repeatTheSameQuestionIfNeeded(h),h}getType(t){return this.getRandomType(t)}getRandomType(t){let e=[];if(Mb.forEach(r=>{this.isValidWord(t[r])&&e.push(r)}),e.length>=2){let r=this.generateRandomNumber(0,e.length-1);const i=e.splice(r,1);r=this.generateRandomNumber(0,e.length-1);const s=e.splice(r,1);return{wordType:i[0],answerType:s[0]}}}}class _b extends Vm{constructor(t,e){super(t,e)}getType(t){if(this.isValidWord(t.adjective)&&this.isValidWord(t.negative))return{wordType:"adjective",answerType:"negative"}}}class tD{constructor(t){_(this,"dataStore");_(this,"trainer");_(this,"questionQueueItem",new hn(null));_(this,"questionQueueItem$",this.questionQueueItem.asObservable());_(this,"answer",new Su);_(this,"answer$",this.answer.asObservable());_(this,"score",new hn(Im));_(this,"score$",this.score.asObservable());_(this,"pointsSettings",new hn(fh));_(this,"pointsSettings$",this.pointsSettings.asObservable());_(this,"gameStatus",new hn(Ab));_(this,"gameStatus$",this.gameStatus.asObservable());_(this,"gameTime",new hn(Sn));_(this,"gameTime$",this.gameTime.asObservable());_(this,"maxPointsTickInterval");_(this,"gameTickInterval");_(this,"answerTimeout");_(this,"nextQuestionTimeout");_(this,"noOfLastMatchesOnFirstAttempt",0);_(this,"trainerType");this.dataStore=t}setTrainerType(t){this.trainerType=t;const e=this.dataStore.data.vocabulary,r=this.dataStore.data.matrix;switch(t){case"vocabulary":this.trainer=new qb(e,r);break;case"matrix":this.trainer=new Vm(e,r);break;case"matrix-negative":this.trainer=new _b(e,r);break;default:console.error(`gameController: unknown trainerType '${t}'`)}}setAnswer(t){var u;this.stopPointsTicker(),this.stopAnswerTimeout(),this.stopNextQuestionTimeout();const e=this.trainer.evaluateAnswer(t,this.pointsSettings.getValue()),r=this.questionQueueItem.getValue(),i=(u=r==null?void 0:r.noOfExpectedAnswerItems)!=null?u:1,s=e.isValid&&e.noOfMatches===e.noOfExpectedMatches&&(r==null?void 0:r.askedTimes)===1;s?this.noOfLastMatchesOnFirstAttempt++:this.noOfLastMatchesOnFirstAttempt=0,r.isMatchOnFirstAttempt=s;let a=this.score.getValue();const n=s?a.noOfMatchesOnFirstAttempt+1:a.noOfMatchesOnFirstAttempt,h=(r==null?void 0:r.askedTimes)===1?a.noOfQuestionsAsked+1:a.noOfQuestionsAsked;a={score:a.score+e.points,itemSuccessRatio:e.noOfMatches/i,noOfMatchesOnFirstAttempt:n,noOfQuestionsAsked:h,successRatePercentage:Math.round(n/h*100)},this.score.next(a),e.noOfExpectedMatches=i,e.congrats=this.getCongrats(e),this.answer.next(e),this.startNextQuestionTimeout()}getCongrats(t){var i,s;const e=this.score.getValue().itemSuccessRatio;if(((s=(i=this.questionQueueItem.getValue())==null?void 0:i.askedTimes)!=null?s:1)>=Cb&&e===1)return this.dataStore.texts.congratsLastAtttempt;if(e<1)return this.dataStore.texts.congratsAlmostCorrect;{const a=Math.floor(this.pointsSettings.getValue().maxPoints/xu*100),n=this.dataStore.texts.maxPointsCongrats.find(h=>h.percent<a);return n==null?void 0:n.congrats}}nextQuestionQueueItem(){const t=this.trainer.getNextQuestion();t!==void 0?(this.questionQueueItem.next(t),this.startPointsTicker(),this.startAnswerTimeout(),this.stopNextQuestionTimeout()):this.stopGame()}startAnswerTimeout(){this.stopAnswerTimeout(),this.answerTimeout=setTimeout(()=>{this.setAnswer("")},Tb)}stopAnswerTimeout(){clearTimeout(this.answerTimeout)}startNextQuestionTimeout(){this.stopNextQuestionTimeout(),this.nextQuestionTimeout=setTimeout(()=>{this.nextQuestionQueueItem()},Sb)}stopNextQuestionTimeout(){clearTimeout(this.nextQuestionTimeout)}startGameTimeTicker(){this.gameTickInterval=setInterval(()=>{this.gameTimeTick()},gb)}stopGameTimeTicker(){clearInterval(this.gameTickInterval)}startPointsTicker(){var e;this.stopPointsTicker();const t=(e=this.questionQueueItem.getValue())==null?void 0:e.repeatAfter;t===0?this.pointsSettings.next(Rb):t&&t<Ln?this.pointsSettings.next(Ob):this.pointsSettings.next(fh),this.maxPointsTickInterval=setInterval(()=>{this.nextPointsSettings()},xb),this.nextPointsSettings()}nextPointsSettings(){var e;const t=this.questionQueueItem.getValue();if(this.pointsSettings.getValue().maxPoints>=Is+Is){const r=this.pointsSettings.getValue().maxPoints-Is,i={maxPoints:r,maxMultiplication:(e=t==null?void 0:t.noOfExpectedAnswerItems)!=null?e:fh.maxMultiplication,comboPoints:this.getComboPoints(r)};this.pointsSettings.next(i)}}getComboPoints(t){let e=0;return t>=Ac&&this.noOfLastMatchesOnFirstAttempt>=Mc&&(e=Ac*(this.noOfLastMatchesOnFirstAttempt-Mc+1)),e}gameTimeTick(){const t=this.gameTime.getValue();this.gameTime.next(t-1)}newGame(){console.log("Here we need to trigger restarting of the game engine"),location.reload()}startGame(){this.nextQuestionQueueItem(),this.gameTime.next(Sn),this.startGameTimeTicker()}stopGame(t=!0){this.stopGameTimeTicker(),this.stopPointsTicker(),this.stopAnswerTimeout(),this.stopNextQuestionTimeout();const e=this.score.getValue(),r=t?this.dataStore.saveScoreHistory(this.trainerType,e):this.dataStore.getScoreHistory()[this.trainerType],i={status:"gameOver",score:e,scoreHistory:r.map(s=>s.score),successRateHistory:r.map(s=>s.successRatePercentage)};this.gameStatus.next(i)}stopPointsTicker(){clearInterval(this.maxPointsTickInterval)}}class Qn extends Phaser.Scene{constructor(e){super(e);_(this,"rexUI");_(this,"dataStore");_(this,"gameController");_(this,"initData");_(this,"answerElement");_(this,"enableWaitForKey",!0);_(this,"correctAnswer");_(this,"inputAnswer");_(this,"congrats");_(this,"answerInput");_(this,"meaning")}setInitData(e){this.initData=e,this.dataStore=e.dataStore,this.gameController=e.gameController}init(e){this.setInitData(e)}preload(){this.load.html("answer-form","assets/text/single-answer-form.html"),this.load.html("meaning","assets/text/meaning.html"),this.load.audio("woosh","assets/sounds/woosh.mp3"),this.load.audio("collect","assets/sounds/collect.mp3"),this.load.audio("ding","assets/sounds/ding2.mp3"),this.load.audio("rise","assets/sounds/rise02.mp3")}create(){this.initData.gameController.gameStatus$.subscribe(e=>{e.status==="gameOver"&&this.scene.start("GameOverScene",hi({},this.initData))}),this.scale.on("resize",this.resize,this),this.game.scale.on("orientationchange",e=>{console.log(e)})}gameStarted(){this.gameController.startGame()}resize(e,r,i,s){console.log("resize");var a=e.width,n=e.height;this.cameras.resize(a,n)}createMeaning(e,r,i,s){const n=this.add.dom(e,r).createFromCache("meaning").setScale(i).getChildByID("meaning");n.innerText=s,this.meaning=n}createAnswerInput(e,r,i,s){let a=this.add.dom(e-20,r).createFromCache("answer-form").setScale(i).setPerspective(800).addListener("keyup");const n=a.getChildByName("answer");return n.focus(),n.placeholder=s,a.on("keyup",h=>{h.keyCode===13&&this.enableWaitForKey===!0&&(this.enableWaitForKey=!1,h.preventDefault(),a.removeListener("keyup"),this.gameController.setAnswer(n.value),this.tweens.add({targets:a.rotate3d,x:1,w:90,duration:500,ease:"Power3"}),this.tweens.add({targets:a,scaleX:2,scaleY:2,y:700,alpha:0,duration:500,ease:"Power3",onComplete:()=>{a.destroy(),this.enableWaitForKey=!0}}))}),a}async asyncLoader(e){return new Promise(r=>{e.on("filecomplete",()=>r(!0)).on("loaderror",()=>r(!0)),e.start()})}destroyAnswerSpecific(){var e,r,i,s;(e=this.answerInput)==null||e.destroy(),(r=this.correctAnswer)==null||r.destroy(),(i=this.inputAnswer)==null||i.destroy(),(s=this.congrats)==null||s.destroy()}async preloadSound(e,r){}playSound(e){}playSoundNo(){this.sound.play("woosh")}playSoundYes(){this.sound.play("collect")}playSoundNext(){this.sound.play("rise")}}const eD={matrix:"GameMatrixScene",vocabulary:"GameVocabularyScene","matrix-negative":"GameMatrixScene"};class iD extends Qn{constructor(){super("IntroScene");_(this,"gameConfigId");_(this,"gameLinks",[])}preload(){this.load.html("nameform","assets/text/login-form.html")}startGame(e){this.gameController.setTrainerType(e),this.setInitData({dataStore:this.dataStore,gameController:this.gameController}),this.scene.start(eD[e],hi({},this.initData))}getDataStore(){return new Promise((e,r)=>{var i;this.gameConfigId=(i=document.location.hash.split("#")[1])!=null?i:"",new Db().init(this.gameConfigId).then(s=>{e(s)})})}async create(){var e,r,i,s;if(this.dataStore=await this.getDataStore(),this.gameController=new tD(this.dataStore),addEventListener("hashchange",a=>{this.gameController.newGame()}),this.dataStore.gameConfig){(e=this.dataStore.gameConfig.style)!=null&&e.backgroundImage&&(this.load.image("background",(r=this.dataStore.gameConfig.style)==null?void 0:r.backgroundImage),this.load.once(yn.Loader.Events.COMPLETE,()=>{this.add.image(this.cameras.main.centerX,this.cameras.main.centerY,"background")}),this.load.start());for(let a of this.dataStore.gameConfig.game){const n=(i=a.titleX)!=null?i:this.cameras.main.centerX,h=(s=a.titleY)!=null?s:this.cameras.main.centerY-70+(this.gameLinks.length-1)*70;let u=this.add.text(n,h,String(a.title),{font:"36px Arial Black"}).setOrigin(.5).setPadding(10).setStroke("#00f",16).setShadow(2,2,"#333333",2,!0,!0).setInteractive({useHandCursor:!0}).on("pointerdown",()=>this.startGame(a.trainerType),this).on("pointerover",()=>u.setStyle({fill:"#63D5F7"})).on("pointerout",()=>u.setStyle({fill:"#FFF"}));this.gameLinks.push(u)}}else console.log("enter your game id"),this.add.text(this.cameras.main.centerX,this.cameras.main.centerY,"Incorrect game ID",{font:"36px Arial Black"}).setOrigin(.5).setPadding(10).setStroke("#f00",16)}loginForm(){var e=this.add.dom(850,600).createFromCache("nameform").setScale(1.5).setPerspective(800).addListener("click").on("click",r=>{if(r.target.name==="loginButton"){const i=e.getChildByName("username"),s=e.getChildByName("password");i.value!==""&&s.value!==""?(e.removeListener("click"),this.tweens.add({targets:e.rotate3d,x:1,w:90,duration:3e3,ease:"Power3"}),this.tweens.add({targets:e,scaleX:2,scaleY:2,y:700,duration:3e3,ease:"Power3",onComplete:function(){e.setVisible(!1)}})):this.tweens.add({targets:e,alpha:.1,duration:200,ease:"Power3",yoyo:!0})}});this.tweens.add({targets:e,y:400,duration:2500,ease:"Power3"})}}const sD=360,Rs=600;class nD extends Qn{constructor(){super("GameVocabularyScene");_(this,"questionQueueItem$");_(this,"answer$")}init(e){super.init(e)}preload(){super.preload()}create(){super.create(),this.scene.run("ScoreScene",hi({},this.initData)),this.createMeaning(this.cameras.main.centerX,sD,1,"What is ... ?"),this.questionQueueItem$=this.gameController.questionQueueItem$.subscribe(e=>{if(e){this.playSoundNext(),this.meaning.innerText=e.item.meaning;const r=-`${e.item.type}`||"";this.destroyAnswerSpecific(),this.answerInput=this.createAnswerInput(this.cameras.main.centerX,Rs,2.5,`Your answer${r}`),this.preloadSound(e.item.word,"expectedAnswer")}}),this.answer$=this.gameController.answer$.subscribe(e=>{this.destroyAnswerSpecific(),e.isValid?(console.log("yes!"),this.playSoundYes(),this.showCongratulationAndGetQuestion(e)):(console.log("no!"),this.playSoundNo(),this.playSound("expectedAnswer"),this.showCorrectAnswerAndGetQuestion(e))}),this.gameStarted()}showCongratulationAndGetQuestion(e){var r;this.congrats=this.add.text(this.cameras.main.centerX,Rs-30,(r=e.congrats)!=null?r:"...").setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0),this.tweens.add({targets:this.congrats,scaleX:2,scaleY:2,duration:1e3,ease:"Power3",onComplete:()=>{this.waitForEnterAndContinueAfterCongrats(this.congrats)}})}waitForEnterAndContinueAfterCongrats(e){this.input.keyboard.on("keyup",r=>{r.keyCode===13&&(r.preventDefault(),this.input.keyboard.removeListener("keyup"),e.destroy(),this.gameController.nextQuestionQueueItem())})}showCorrectAnswerAndGetQuestion(e){this.inputAnswer=this.add.text(this.cameras.main.centerX,Rs-30,e.text).setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),this.tweens.add({targets:this.inputAnswer,y:Rs+60,alpha:.4,duration:1e3,ease:"Power3"}),this.tweens.add({targets:this.inputAnswer,scaleX:2,scaleY:2,duration:1e3,ease:"Power3"}),this.correctAnswer=this.add.text(this.cameras.main.centerX,Rs+30,e.expectedText).setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0),this.tweens.add({targets:this.correctAnswer,y:Rs-60,duration:1e3,ease:"Power3"}),this.tweens.add({targets:this.correctAnswer,scaleX:2,scaleY:2,duration:1e3,ease:"Power3",onComplete:()=>{this.waitForEnterAndContinueAfterCorrectAnswer(this.correctAnswer,this.inputAnswer)}})}waitForEnterAndContinueAfterCorrectAnswer(e,r){this.input.keyboard.on("keyup",i=>{i.keyCode===13&&(i.preventDefault(),this.input.keyboard.removeListener("keyup"),e.destroy(),r.destroy(),this.gameController.nextQuestionQueueItem())})}}const Br=310,gh=40,Ri=600;class rD extends Qn{constructor(){super("GameMatrixScene");_(this,"questionPart2");_(this,"questionPart3");_(this,"questionPart4");_(this,"questionPart5");_(this,"questionQueueItem$");_(this,"answer$")}init(e){super.init(e)}preload(){super.preload()}create(){var e;super.create(),this.scene.run("ScoreScene",hi({},this.initData)),this.questionPart2=this.add.text(this.cameras.main.centerX,Br,"").setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0),this.questionPart3=this.add.text(this.cameras.main.centerX,Br+gh,(e=this.dataStore.gameConfig.matrixMiddleWord)!=null?e:"from").setStyle({font:"18px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#00f",2).setShadow(2,2,"#333333",2,!0,!0),this.questionPart4=this.add.text(this.cameras.main.centerX,Br+gh*2,"").setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#00f",4).setShadow(2,2,"#333333",2,!0,!0),this.questionPart5=this.add.text(this.cameras.main.centerX,Br+gh*3+15,"").setStyle({font:"36px Arial Black",wordWrap:{width:900,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#00f",4).setShadow(2,2,"#333333",2,!0,!0),this.questionQueueItem$=this.gameController.questionQueueItem$.subscribe(r=>{r&&(this.playSoundNext(),this.questionPart2.setText(r.item.answerType),this.questionPart4.setText(r.item.wordType),this.questionPart5.setText(r.item.word),this.destroyAnswerSpecific(),this.answerInput=this.createAnswerInput(this.cameras.main.centerX,Ri,2.5,`${r.item.answerType}`))}),this.answer$=this.gameController.answer$.subscribe(r=>{this.destroyAnswerSpecific(),r.isValid?(console.log("yes!"),this.playSoundYes(),this.showCongratulationAndGetQuestion(r)):(console.log("no!"),this.playSoundNo(),this.showCorrectAnswerAndGetQuestion(r))}),this.gameStarted()}showCongratulationAndGetQuestion(e){var r;e.noOfExpectedMatches!==e.noOfMatches&&(this.correctAnswer=this.add.text(this.cameras.main.centerX,Ri-30,e.expectedText).setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0),this.tweens.add({targets:this.correctAnswer,y:Ri+60,duration:1e3,ease:"Power3"})),this.congrats=this.add.text(this.cameras.main.centerX,Ri-30,(r=e.congrats)!=null?r:"...").setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0),this.tweens.add({targets:this.congrats,scaleX:2,scaleY:2,duration:1e3,ease:"Power3",onComplete:()=>{this.waitForEnterAndContinueAfterShowCongrats(this.congrats,this.correctAnswer)}})}showCorrectAnswerAndGetQuestion(e){this.inputAnswer=this.add.text(this.cameras.main.centerX,Ri-30,e.text).setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),this.tweens.add({targets:this.inputAnswer,y:Ri+60,alpha:.4,duration:1e3,ease:"Power3"}),this.tweens.add({targets:this.inputAnswer,scaleX:2,scaleY:2,duration:1e3,ease:"Power3"}),this.correctAnswer=this.add.text(this.cameras.main.centerX,Ri+30,e.expectedText).setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0),this.tweens.add({targets:this.correctAnswer,y:Ri-60,duration:1e3,ease:"Power3"}),this.tweens.add({targets:this.correctAnswer,scaleX:2,scaleY:2,duration:1e3,ease:"Power3",onComplete:()=>{this.waitForEnterAndContinueAfterShowCorrectAnswer(this.correctAnswer,this.inputAnswer)}})}waitForEnterAndContinueAfterShowCorrectAnswer(e,r){this.input.keyboard.on("keyup",i=>{i.keyCode===13&&(i.preventDefault(),this.input.keyboard.removeListener("keyup"),this.gameController.nextQuestionQueueItem(),e.destroy(),r.destroy())})}waitForEnterAndContinueAfterShowCongrats(e,r){this.input.keyboard.on("keyup",i=>{i.keyCode===13&&(i.preventDefault(),this.input.keyboard.removeListener("keyup"),e.destroy(),r==null||r.destroy(),this.gameController.nextQuestionQueueItem())})}}const qi=100;class aD extends Qn{constructor(){super("ScoreScene");_(this,"score");_(this,"maxPoints");_(this,"maxMultiplication");_(this,"itemSuccessRatio");_(this,"timeLeft");_(this,"successPercentage");_(this,"comboPoints");_(this,"score$");_(this,"maxPoints$")}init(e){super.init(e)}create(){this.score=this.add.text(this.cameras.main.centerX,qi+80,"0000000").setStyle({font:"74px Arial Black"}).setOrigin(.5).setStroke("#00f",16).setShadow(2,2,"#333333",2,!0,!0),this.maxPoints=this.add.text(this.cameras.main.centerX,qi+145,"+0000").setStyle({font:"24px Arial Black"}).setOrigin(.5).setStroke("#00f",4).setShadow(2,2,"#333333",2,!0,!0),this.maxMultiplication=this.add.text(this.cameras.main.centerX+90,qi+140,"x 1").setStyle({font:"36px Arial Black"}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),this.itemSuccessRatio=this.add.text(this.cameras.main.centerX+200,qi+140,"").setStyle({font:"36px Arial Black"}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),this.timeLeft=this.add.text(this.cameras.main.centerX,qi-10,"").setStyle({font:"24px Arial Black"}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),this.comboPoints=this.add.text(this.cameras.main.centerX-83,qi+145,"").setStyle({font:"24px Arial Black"}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),this.score$=this.gameController.score$.subscribe(e=>{this.setScore(e)}),this.maxPoints$=this.gameController.pointsSettings$.subscribe(e=>{this.setMaxPoints(e.maxPoints),this.setMaxMultiplication(e.maxMultiplication),this.setComboPoints(e.comboPoints)}),this.initData.gameController.gameStatus$.subscribe(e=>{e.status==="gameOver"&&(this.maxPoints.setText(""),this.maxMultiplication.setText(""),this.comboPoints.setText(""),this.itemSuccessRatio.setText(""),this.setSuccessPercentage(e.score))}),this.initData.gameController.gameTime$.subscribe(e=>{this.setTimeLeft(e)})}setScore(e){this.score.text=String(e.score).padStart(6,"0"),this.maxMultiplication.text!==""&&this.itemSuccessRatio.setText(String(Math.round(e.itemSuccessRatio*100))+"%")}setSuccessPercentage(e){this.successPercentage=this.add.text(this.cameras.main.centerX,qi+145,"").setStyle({font:"36px Arial Black"}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),e.noOfQuestionsAsked?this.successPercentage.text=String(e.successRatePercentage)+"%":this.successPercentage.text=""}setMaxPoints(e){this.maxPoints.text="+"+String(e).padStart(4,"0")}setComboPoints(e){e!==0?this.comboPoints.text="+"+String(e).padStart(4,"0"):this.comboPoints.text=""}setMaxMultiplication(e){this.itemSuccessRatio.setText(""),e!==1?this.maxMultiplication.text="x "+e:this.maxMultiplication.text=""}setTimeLeft(e){e<=Sn&&e>Sn-5?this.timeLeft.setText(this.dataStore.texts.getGameStartingText(Sn)):e<120&&e>120-5?(this.timeLeft.setText(this.dataStore.texts.getMinutesLeftText(2)),e===120&&this.sound.play("ding")):e<60&&e>60-5?(this.timeLeft.setText(this.dataStore.texts.getMinutesLeftText(1)),e===60&&this.sound.play("ding")):e<50&&e>0?this.timeLeft.setText(this.dataStore.texts.getSecondsLeftText(e)):this.timeLeft.setText(""),e<=0&&(this.gameController.stopGame(),this.timeLeft.setText(""))}update(){}}/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */const Ym=function(){return typeof window=="undefined"?function(o){return o()}:window.requestAnimationFrame}();function Wm(o,t,e){const r=e||(a=>Array.prototype.slice.call(a));let i=!1,s=[];return function(...a){s=r(a),i||(i=!0,Ym.call(window,()=>{i=!1,o.apply(t,s)}))}}function oD(o,t){let e;return function(...r){return t?(clearTimeout(e),e=setTimeout(o,t,r)):o.apply(this,r),t}}const Cu=o=>o==="start"?"left":o==="end"?"right":"center",kt=(o,t,e)=>o==="start"?t:o==="end"?e:(t+e)/2,hD=(o,t,e,r)=>o===(r?"left":"right")?e:o==="center"?(t+e)/2:t;function di(){}const lD=function(){let o=0;return function(){return o++}}();function pt(o){return o===null||typeof o=="undefined"}function Ct(o){if(Array.isArray&&Array.isArray(o))return!0;const t=Object.prototype.toString.call(o);return t.substr(0,7)==="[object"&&t.substr(-6)==="Array]"}function dt(o){return o!==null&&Object.prototype.toString.call(o)==="[object Object]"}const wt=o=>(typeof o=="number"||o instanceof Number)&&isFinite(+o);function Ee(o,t){return wt(o)?o:t}function ht(o,t){return typeof o=="undefined"?t:o}const uD=(o,t)=>typeof o=="string"&&o.endsWith("%")?parseFloat(o)/100:o/t,Um=(o,t)=>typeof o=="string"&&o.endsWith("%")?parseFloat(o)/100*t:+o;function St(o,t,e){if(o&&typeof o.call=="function")return o.apply(e,t)}function xt(o,t,e,r){let i,s,a;if(Ct(o))if(s=o.length,r)for(i=s-1;i>=0;i--)t.call(e,o[i],i);else for(i=0;i<s;i++)t.call(e,o[i],i);else if(dt(o))for(a=Object.keys(o),s=a.length,i=0;i<s;i++)t.call(e,o[a[i]],a[i])}function ua(o,t){let e,r,i,s;if(!o||!t||o.length!==t.length)return!1;for(e=0,r=o.length;e<r;++e)if(i=o[e],s=t[e],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function fa(o){if(Ct(o))return o.map(fa);if(dt(o)){const t=Object.create(null),e=Object.keys(o),r=e.length;let i=0;for(;i<r;++i)t[e[i]]=fa(o[e[i]]);return t}return o}function Xm(o){return["__proto__","prototype","constructor"].indexOf(o)===-1}function fD(o,t,e,r){if(!Xm(o))return;const i=t[o],s=e[o];dt(i)&&dt(s)?Fn(i,s,r):t[o]=fa(s)}function Fn(o,t,e){const r=Ct(t)?t:[t],i=r.length;if(!dt(o))return o;e=e||{};const s=e.merger||fD;for(let a=0;a<i;++a){if(t=r[a],!dt(t))continue;const n=Object.keys(t);for(let h=0,u=n.length;h<u;++h)s(n[h],o,t,e)}return o}function Cn(o,t){return Fn(o,t,{merger:dD})}function dD(o,t,e){if(!Xm(o))return;const r=t[o],i=e[o];dt(r)&&dt(i)?Cn(r,i):Object.prototype.hasOwnProperty.call(t,o)||(t[o]=fa(i))}const cD="",vD=".";function wc(o,t){const e=o.indexOf(vD,t);return e===-1?o.length:e}function as(o,t){if(t===cD)return o;let e=0,r=wc(t,e);for(;o&&r>e;)o=o[t.substr(e,r-e)],e=r+1,r=wc(t,e);return o}function Eu(o){return o.charAt(0).toUpperCase()+o.slice(1)}const be=o=>typeof o!="undefined",Bi=o=>typeof o=="function",Ic=(o,t)=>{if(o.size!==t.size)return!1;for(const e of o)if(!t.has(e))return!1;return!0};function pD(o){return o.type==="mouseup"||o.type==="click"||o.type==="contextmenu"}const Rt=Math.PI,Tt=2*Rt,gD=Tt+Rt,da=Number.POSITIVE_INFINITY,mD=Rt/180,Ft=Rt/2,ln=Rt/4,Bc=Rt*2/3,Me=Math.log10,je=Math.sign;function Gc(o){const t=Math.round(o);o=En(o,t,o/1e3)?t:o;const e=Math.pow(10,Math.floor(Me(o))),r=o/e;return(r<=1?1:r<=2?2:r<=5?5:10)*e}function xD(o){const t=[],e=Math.sqrt(o);let r;for(r=1;r<e;r++)o%r===0&&(t.push(r),t.push(o/r));return e===(e|0)&&t.push(e),t.sort((i,s)=>i-s).pop(),t}function bn(o){return!isNaN(parseFloat(o))&&isFinite(o)}function En(o,t,e){return Math.abs(o-t)<e}function yD(o,t){const e=Math.round(o);return e-t<=o&&e+t>=o}function Hm(o,t,e){let r,i,s;for(r=0,i=o.length;r<i;r++)s=o[r][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function ze(o){return o*(Rt/180)}function Pu(o){return o*(180/Rt)}function Nc(o){if(!wt(o))return;let t=1,e=0;for(;Math.round(o*t)/t!==o;)t*=10,e++;return e}function $m(o,t){const e=t.x-o.x,r=t.y-o.y,i=Math.sqrt(e*e+r*r);let s=Math.atan2(r,e);return s<-.5*Rt&&(s+=Tt),{angle:s,distance:i}}function Qh(o,t){return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))}function TD(o,t){return(o-t+gD)%Tt-Rt}function ce(o){return(o%Tt+Tt)%Tt}function Dn(o,t,e,r){const i=ce(o),s=ce(t),a=ce(e),n=ce(s-i),h=ce(a-i),u=ce(i-s),l=ce(i-a);return i===s||i===a||r&&s===a||n>h&&u<l}function Yt(o,t,e){return Math.max(t,Math.min(e,o))}function SD(o){return Yt(o,-32768,32767)}function pi(o,t,e,r=1e-6){return o>=Math.min(t,e)-r&&o<=Math.max(t,e)+r}const Gr=o=>o===0||o===1,zc=(o,t,e)=>-(Math.pow(2,10*(o-=1))*Math.sin((o-t)*Tt/e)),Vc=(o,t,e)=>Math.pow(2,-10*o)*Math.sin((o-t)*Tt/e)+1,Pn={linear:o=>o,easeInQuad:o=>o*o,easeOutQuad:o=>-o*(o-2),easeInOutQuad:o=>(o/=.5)<1?.5*o*o:-.5*(--o*(o-2)-1),easeInCubic:o=>o*o*o,easeOutCubic:o=>(o-=1)*o*o+1,easeInOutCubic:o=>(o/=.5)<1?.5*o*o*o:.5*((o-=2)*o*o+2),easeInQuart:o=>o*o*o*o,easeOutQuart:o=>-((o-=1)*o*o*o-1),easeInOutQuart:o=>(o/=.5)<1?.5*o*o*o*o:-.5*((o-=2)*o*o*o-2),easeInQuint:o=>o*o*o*o*o,easeOutQuint:o=>(o-=1)*o*o*o*o+1,easeInOutQuint:o=>(o/=.5)<1?.5*o*o*o*o*o:.5*((o-=2)*o*o*o*o+2),easeInSine:o=>-Math.cos(o*Ft)+1,easeOutSine:o=>Math.sin(o*Ft),easeInOutSine:o=>-.5*(Math.cos(Rt*o)-1),easeInExpo:o=>o===0?0:Math.pow(2,10*(o-1)),easeOutExpo:o=>o===1?1:-Math.pow(2,-10*o)+1,easeInOutExpo:o=>Gr(o)?o:o<.5?.5*Math.pow(2,10*(o*2-1)):.5*(-Math.pow(2,-10*(o*2-1))+2),easeInCirc:o=>o>=1?o:-(Math.sqrt(1-o*o)-1),easeOutCirc:o=>Math.sqrt(1-(o-=1)*o),easeInOutCirc:o=>(o/=.5)<1?-.5*(Math.sqrt(1-o*o)-1):.5*(Math.sqrt(1-(o-=2)*o)+1),easeInElastic:o=>Gr(o)?o:zc(o,.075,.3),easeOutElastic:o=>Gr(o)?o:Vc(o,.075,.3),easeInOutElastic(o){return Gr(o)?o:o<.5?.5*zc(o*2,.1125,.45):.5+.5*Vc(o*2-1,.1125,.45)},easeInBack(o){return o*o*((1.70158+1)*o-1.70158)},easeOutBack(o){return(o-=1)*o*((1.70158+1)*o+1.70158)+1},easeInOutBack(o){let t=1.70158;return(o/=.5)<1?.5*(o*o*(((t*=1.525)+1)*o-t)):.5*((o-=2)*o*(((t*=1.525)+1)*o+t)+2)},easeInBounce:o=>1-Pn.easeOutBounce(1-o),easeOutBounce(o){return o<1/2.75?7.5625*o*o:o<2/2.75?7.5625*(o-=1.5/2.75)*o+.75:o<2.5/2.75?7.5625*(o-=2.25/2.75)*o+.9375:7.5625*(o-=2.625/2.75)*o+.984375},easeInOutBounce:o=>o<.5?Pn.easeInBounce(o*2)*.5:Pn.easeOutBounce(o*2-1)*.5+.5};/*!
 * @kurkle/color v0.1.9
 * https://github.com/kurkle/color#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT License
 */const Ce={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},jh="0123456789ABCDEF",CD=o=>jh[o&15],ED=o=>jh[(o&240)>>4]+jh[o&15],Nr=o=>(o&240)>>4===(o&15);function PD(o){return Nr(o.r)&&Nr(o.g)&&Nr(o.b)&&Nr(o.a)}function MD(o){var t=o.length,e;return o[0]==="#"&&(t===4||t===5?e={r:255&Ce[o[1]]*17,g:255&Ce[o[2]]*17,b:255&Ce[o[3]]*17,a:t===5?Ce[o[4]]*17:255}:(t===7||t===9)&&(e={r:Ce[o[1]]<<4|Ce[o[2]],g:Ce[o[3]]<<4|Ce[o[4]],b:Ce[o[5]]<<4|Ce[o[6]],a:t===9?Ce[o[7]]<<4|Ce[o[8]]:255})),e}function AD(o){var t=PD(o)?CD:ED;return o&&"#"+t(o.r)+t(o.g)+t(o.b)+(o.a<255?t(o.a):"")}function jn(o){return o+.5|0}const Qa=(o,t,e)=>Math.max(Math.min(o,e),t);function pn(o){return Qa(jn(o*2.55),0,255)}function wn(o){return Qa(jn(o*255),0,255)}function Mu(o){return Qa(jn(o/2.55)/100,0,1)}function Yc(o){return Qa(jn(o*100),0,100)}const RD=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function OD(o){const t=RD.exec(o);let e=255,r,i,s;if(!!t){if(t[7]!==r){const a=+t[7];e=255&(t[8]?pn(a):a*255)}return r=+t[1],i=+t[3],s=+t[5],r=255&(t[2]?pn(r):r),i=255&(t[4]?pn(i):i),s=255&(t[6]?pn(s):s),{r,g:i,b:s,a:e}}}function LD(o){return o&&(o.a<255?`rgba(${o.r}, ${o.g}, ${o.b}, ${Mu(o.a)})`:`rgb(${o.r}, ${o.g}, ${o.b})`)}const FD=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function km(o,t,e){const r=t*Math.min(e,1-e),i=(s,a=(s+o/30)%12)=>e-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function bD(o,t,e){const r=(i,s=(i+o/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function DD(o,t,e){const r=km(o,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)r[i]*=1-t-e,r[i]+=t;return r}function Au(o){const e=o.r/255,r=o.g/255,i=o.b/255,s=Math.max(e,r,i),a=Math.min(e,r,i),n=(s+a)/2;let h,u,l;return s!==a&&(l=s-a,u=n>.5?l/(2-s-a):l/(s+a),h=s===e?(r-i)/l+(r<i?6:0):s===r?(i-e)/l+2:(e-r)/l+4,h=h*60+.5),[h|0,u||0,n]}function Ru(o,t,e,r){return(Array.isArray(t)?o(t[0],t[1],t[2]):o(t,e,r)).map(wn)}function Ou(o,t,e){return Ru(km,o,t,e)}function wD(o,t,e){return Ru(DD,o,t,e)}function ID(o,t,e){return Ru(bD,o,t,e)}function Km(o){return(o%360+360)%360}function BD(o){const t=FD.exec(o);let e=255,r;if(!t)return;t[5]!==r&&(e=t[6]?pn(+t[5]):wn(+t[5]));const i=Km(+t[2]),s=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?r=wD(i,s,a):t[1]==="hsv"?r=ID(i,s,a):r=Ou(i,s,a),{r:r[0],g:r[1],b:r[2],a:e}}function GD(o,t){var e=Au(o);e[0]=Km(e[0]+t),e=Ou(e),o.r=e[0],o.g=e[1],o.b=e[2]}function ND(o){if(!o)return;const t=Au(o),e=t[0],r=Yc(t[1]),i=Yc(t[2]);return o.a<255?`hsla(${e}, ${r}%, ${i}%, ${Mu(o.a)})`:`hsl(${e}, ${r}%, ${i}%)`}const Wc={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Uc={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function zD(){const o={},t=Object.keys(Uc),e=Object.keys(Wc);let r,i,s,a,n;for(r=0;r<t.length;r++){for(a=n=t[r],i=0;i<e.length;i++)s=e[i],n=n.replace(s,Wc[s]);s=parseInt(Uc[a],16),o[n]=[s>>16&255,s>>8&255,s&255]}return o}let zr;function VD(o){zr||(zr=zD(),zr.transparent=[0,0,0,0]);const t=zr[o.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}function Vr(o,t,e){if(o){let r=Au(o);r[t]=Math.max(0,Math.min(r[t]+r[t]*e,t===0?360:1)),r=Ou(r),o.r=r[0],o.g=r[1],o.b=r[2]}}function Zm(o,t){return o&&Object.assign(t||{},o)}function Xc(o){var t={r:0,g:0,b:0,a:255};return Array.isArray(o)?o.length>=3&&(t={r:o[0],g:o[1],b:o[2],a:255},o.length>3&&(t.a=wn(o[3]))):(t=Zm(o,{r:0,g:0,b:0,a:1}),t.a=wn(t.a)),t}function YD(o){return o.charAt(0)==="r"?OD(o):BD(o)}class ca{constructor(t){if(t instanceof ca)return t;const e=typeof t;let r;e==="object"?r=Xc(t):e==="string"&&(r=MD(t)||VD(t)||YD(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=Zm(this._rgb);return t&&(t.a=Mu(t.a)),t}set rgb(t){this._rgb=Xc(t)}rgbString(){return this._valid?LD(this._rgb):this._rgb}hexString(){return this._valid?AD(this._rgb):this._rgb}hslString(){return this._valid?ND(this._rgb):this._rgb}mix(t,e){const r=this;if(t){const i=r.rgb,s=t.rgb;let a;const n=e===a?.5:e,h=2*n-1,u=i.a-s.a,l=((h*u===-1?h:(h+u)/(1+h*u))+1)/2;a=1-l,i.r=255&l*i.r+a*s.r+.5,i.g=255&l*i.g+a*s.g+.5,i.b=255&l*i.b+a*s.b+.5,i.a=n*i.a+(1-n)*s.a,r.rgb=i}return r}clone(){return new ca(this.rgb)}alpha(t){return this._rgb.a=wn(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=jn(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Vr(this._rgb,2,t),this}darken(t){return Vr(this._rgb,2,-t),this}saturate(t){return Vr(this._rgb,1,t),this}desaturate(t){return Vr(this._rgb,1,-t),this}rotate(t){return GD(this._rgb,t),this}}function Jm(o){return new ca(o)}const Qm=o=>o instanceof CanvasGradient||o instanceof CanvasPattern;function Hc(o){return Qm(o)?o:Jm(o)}function mh(o){return Qm(o)?o:Jm(o).saturate(.5).darken(.1).hexString()}const os=Object.create(null),qh=Object.create(null);function Mn(o,t){if(!t)return o;const e=t.split(".");for(let r=0,i=e.length;r<i;++r){const s=e[r];o=o[s]||(o[s]=Object.create(null))}return o}function xh(o,t,e){return typeof t=="string"?Fn(Mn(o,t),e):Fn(Mn(o,""),t)}class WD{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,r)=>mh(r.backgroundColor),this.hoverBorderColor=(e,r)=>mh(r.borderColor),this.hoverColor=(e,r)=>mh(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return xh(this,t,e)}get(t){return Mn(this,t)}describe(t,e){return xh(qh,t,e)}override(t,e){return xh(os,t,e)}route(t,e,r,i){const s=Mn(this,t),a=Mn(this,r),n="_"+e;Object.defineProperties(s,{[n]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const h=this[n],u=a[i];return dt(h)?Object.assign({},u,h):ht(h,u)},set(h){this[n]=h}}})}}var ct=new WD({_scriptable:o=>!o.startsWith("on"),_indexable:o=>o!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function UD(o){return!o||pt(o.size)||pt(o.family)?null:(o.style?o.style+" ":"")+(o.weight?o.weight+" ":"")+o.size+"px "+o.family}function va(o,t,e,r,i){let s=t[i];return s||(s=t[i]=o.measureText(i).width,e.push(i)),s>r&&(r=s),r}function XD(o,t,e,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),o.save(),o.font=t;let a=0;const n=e.length;let h,u,l,f,c;for(h=0;h<n;h++)if(f=e[h],f!=null&&Ct(f)!==!0)a=va(o,i,s,a,f);else if(Ct(f))for(u=0,l=f.length;u<l;u++)c=f[u],c!=null&&!Ct(c)&&(a=va(o,i,s,a,c));o.restore();const d=s.length/2;if(d>e.length){for(h=0;h<d;h++)delete i[s[h]];s.splice(0,d)}return a}function _i(o,t,e){const r=o.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*r)/r+i}function $c(o,t){t=t||o.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,o.width,o.height),t.restore()}function pa(o,t,e,r){let i,s,a,n,h;const u=t.pointStyle,l=t.rotation,f=t.radius;let c=(l||0)*mD;if(u&&typeof u=="object"&&(i=u.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){o.save(),o.translate(e,r),o.rotate(c),o.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),o.restore();return}if(!(isNaN(f)||f<=0)){switch(o.beginPath(),u){default:o.arc(e,r,f,0,Tt),o.closePath();break;case"triangle":o.moveTo(e+Math.sin(c)*f,r-Math.cos(c)*f),c+=Bc,o.lineTo(e+Math.sin(c)*f,r-Math.cos(c)*f),c+=Bc,o.lineTo(e+Math.sin(c)*f,r-Math.cos(c)*f),o.closePath();break;case"rectRounded":h=f*.516,n=f-h,s=Math.cos(c+ln)*n,a=Math.sin(c+ln)*n,o.arc(e-s,r-a,h,c-Rt,c-Ft),o.arc(e+a,r-s,h,c-Ft,c),o.arc(e+s,r+a,h,c,c+Ft),o.arc(e-a,r+s,h,c+Ft,c+Rt),o.closePath();break;case"rect":if(!l){n=Math.SQRT1_2*f,o.rect(e-n,r-n,2*n,2*n);break}c+=ln;case"rectRot":s=Math.cos(c)*f,a=Math.sin(c)*f,o.moveTo(e-s,r-a),o.lineTo(e+a,r-s),o.lineTo(e+s,r+a),o.lineTo(e-a,r+s),o.closePath();break;case"crossRot":c+=ln;case"cross":s=Math.cos(c)*f,a=Math.sin(c)*f,o.moveTo(e-s,r-a),o.lineTo(e+s,r+a),o.moveTo(e+a,r-s),o.lineTo(e-a,r+s);break;case"star":s=Math.cos(c)*f,a=Math.sin(c)*f,o.moveTo(e-s,r-a),o.lineTo(e+s,r+a),o.moveTo(e+a,r-s),o.lineTo(e-a,r+s),c+=ln,s=Math.cos(c)*f,a=Math.sin(c)*f,o.moveTo(e-s,r-a),o.lineTo(e+s,r+a),o.moveTo(e+a,r-s),o.lineTo(e-a,r+s);break;case"line":s=Math.cos(c)*f,a=Math.sin(c)*f,o.moveTo(e-s,r-a),o.lineTo(e+s,r+a);break;case"dash":o.moveTo(e,r),o.lineTo(e+Math.cos(c)*f,r+Math.sin(c)*f);break}o.fill(),t.borderWidth>0&&o.stroke()}}function hs(o,t,e){return e=e||.5,!t||o&&o.x>t.left-e&&o.x<t.right+e&&o.y>t.top-e&&o.y<t.bottom+e}function ja(o,t){o.save(),o.beginPath(),o.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),o.clip()}function qa(o){o.restore()}function HD(o,t,e,r,i){if(!t)return o.lineTo(e.x,e.y);if(i==="middle"){const s=(t.x+e.x)/2;o.lineTo(s,t.y),o.lineTo(s,e.y)}else i==="after"!=!!r?o.lineTo(t.x,e.y):o.lineTo(e.x,t.y);o.lineTo(e.x,e.y)}function $D(o,t,e,r){if(!t)return o.lineTo(e.x,e.y);o.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?e.cp2x:e.cp1x,r?e.cp2y:e.cp1y,e.x,e.y)}function ls(o,t,e,r,i,s={}){const a=Ct(t)?t:[t],n=s.strokeWidth>0&&s.strokeColor!=="";let h,u;for(o.save(),o.font=i.string,kD(o,s),h=0;h<a.length;++h)u=a[h],n&&(s.strokeColor&&(o.strokeStyle=s.strokeColor),pt(s.strokeWidth)||(o.lineWidth=s.strokeWidth),o.strokeText(u,e,r,s.maxWidth)),o.fillText(u,e,r,s.maxWidth),KD(o,e,r,u,s),r+=i.lineHeight;o.restore()}function kD(o,t){t.translation&&o.translate(t.translation[0],t.translation[1]),pt(t.rotation)||o.rotate(t.rotation),t.color&&(o.fillStyle=t.color),t.textAlign&&(o.textAlign=t.textAlign),t.textBaseline&&(o.textBaseline=t.textBaseline)}function KD(o,t,e,r,i){if(i.strikethrough||i.underline){const s=o.measureText(r),a=t-s.actualBoundingBoxLeft,n=t+s.actualBoundingBoxRight,h=e-s.actualBoundingBoxAscent,u=e+s.actualBoundingBoxDescent,l=i.strikethrough?(h+u)/2:u;o.strokeStyle=o.fillStyle,o.beginPath(),o.lineWidth=i.decorationWidth||2,o.moveTo(a,l),o.lineTo(n,l),o.stroke()}}function ga(o,t){const{x:e,y:r,w:i,h:s,radius:a}=t;o.arc(e+a.topLeft,r+a.topLeft,a.topLeft,-Ft,Rt,!0),o.lineTo(e,r+s-a.bottomLeft),o.arc(e+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,Rt,Ft,!0),o.lineTo(e+i-a.bottomRight,r+s),o.arc(e+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,Ft,0,!0),o.lineTo(e+i,r+a.topRight),o.arc(e+i-a.topRight,r+a.topRight,a.topRight,0,-Ft,!0),o.lineTo(e+a.topLeft,r)}const ZD=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),JD=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function QD(o,t){const e=(""+o).match(ZD);if(!e||e[1]==="normal")return t*1.2;switch(o=+e[2],e[3]){case"px":return o;case"%":o/=100;break}return t*o}const jD=o=>+o||0;function Lu(o,t){const e={},r=dt(t),i=r?Object.keys(t):t,s=dt(o)?r?a=>ht(o[a],o[t[a]]):a=>o[a]:()=>o;for(const a of i)e[a]=jD(s(a));return e}function jm(o){return Lu(o,{top:"y",right:"x",bottom:"y",left:"x"})}function Bs(o){return Lu(o,["topLeft","topRight","bottomLeft","bottomRight"])}function Qt(o){const t=jm(o);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Gt(o,t){o=o||{},t=t||ct.font;let e=ht(o.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let r=ht(o.style,t.style);r&&!(""+r).match(JD)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");const i={family:ht(o.family,t.family),lineHeight:QD(ht(o.lineHeight,t.lineHeight),e),size:e,style:r,weight:ht(o.weight,t.weight),string:""};return i.string=UD(i),i}function gn(o,t,e,r){let i=!0,s,a,n;for(s=0,a=o.length;s<a;++s)if(n=o[s],n!==void 0&&(t!==void 0&&typeof n=="function"&&(n=n(t),i=!1),e!==void 0&&Ct(n)&&(n=n[e%n.length],i=!1),n!==void 0))return r&&!i&&(r.cacheable=!1),n}function qD(o,t,e){const{min:r,max:i}=o,s=Um(t,(i-r)/2),a=(n,h)=>e&&n===0?0:n+h;return{min:a(r,-Math.abs(s)),max:a(i,s)}}function Wi(o,t){return Object.assign(Object.create(o),t)}function Fu(o,t,e){e=e||(a=>o[a]<t);let r=o.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,e(s)?i=s:r=s;return{lo:i,hi:r}}const gi=(o,t,e)=>Fu(o,e,r=>o[r][t]<e),_D=(o,t,e)=>Fu(o,e,r=>o[r][t]>=e);function tw(o,t,e){let r=0,i=o.length;for(;r<i&&o[r]<t;)r++;for(;i>r&&o[i-1]>e;)i--;return r>0||i<o.length?o.slice(r,i):o}const qm=["push","pop","shift","splice","unshift"];function ew(o,t){if(o._chartjs){o._chartjs.listeners.push(t);return}Object.defineProperty(o,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),qm.forEach(e=>{const r="_onData"+Eu(e),i=o[e];Object.defineProperty(o,e,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return o._chartjs.listeners.forEach(n=>{typeof n[r]=="function"&&n[r](...s)}),a}})})}function kc(o,t){const e=o._chartjs;if(!e)return;const r=e.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(qm.forEach(s=>{delete o[s]}),delete o._chartjs)}function _m(o){const t=new Set;let e,r;for(e=0,r=o.length;e<r;++e)t.add(o[e]);return t.size===r?o:Array.from(t)}function bu(o,t=[""],e=o,r,i=()=>o[0]){be(r)||(r=s0("_fallback",o));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:o,_rootScopes:e,_fallback:r,_getTarget:i,override:a=>bu([a,...o],t,e,r)};return new Proxy(s,{deleteProperty(a,n){return delete a[n],delete a._keys,delete o[0][n],!0},get(a,n){return e0(a,n,()=>lw(n,t,o,a))},getOwnPropertyDescriptor(a,n){return Reflect.getOwnPropertyDescriptor(a._scopes[0],n)},getPrototypeOf(){return Reflect.getPrototypeOf(o[0])},has(a,n){return Zc(a).includes(n)},ownKeys(a){return Zc(a)},set(a,n,h){const u=a._storage||(a._storage=i());return a[n]=u[n]=h,delete a._keys,!0}})}function Ns(o,t,e,r){const i={_cacheable:!1,_proxy:o,_context:t,_subProxy:e,_stack:new Set,_descriptors:t0(o,r),setContext:s=>Ns(o,s,e,r),override:s=>Ns(o.override(s),t,e,r)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete o[a],!0},get(s,a,n){return e0(s,a,()=>sw(s,a,n))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(o,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(o,a)},getPrototypeOf(){return Reflect.getPrototypeOf(o)},has(s,a){return Reflect.has(o,a)},ownKeys(){return Reflect.ownKeys(o)},set(s,a,n){return o[a]=n,delete s[a],!0}})}function t0(o,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=o;return{allKeys:i,scriptable:e,indexable:r,isScriptable:Bi(e)?e:()=>e,isIndexable:Bi(r)?r:()=>r}}const iw=(o,t)=>o?o+Eu(t):t,Du=(o,t)=>dt(t)&&o!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function e0(o,t,e){if(Object.prototype.hasOwnProperty.call(o,t))return o[t];const r=e();return o[t]=r,r}function sw(o,t,e){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=o;let n=r[t];return Bi(n)&&a.isScriptable(t)&&(n=nw(t,n,o,e)),Ct(n)&&n.length&&(n=rw(t,n,o,a.isIndexable)),Du(t,n)&&(n=Ns(n,i,s&&s[t],a)),n}function nw(o,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_stack:n}=e;if(n.has(o))throw new Error("Recursion detected: "+Array.from(n).join("->")+"->"+o);return n.add(o),t=t(s,a||r),n.delete(o),Du(o,t)&&(t=wu(i._scopes,i,o,t)),t}function rw(o,t,e,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:n}=e;if(be(s.index)&&r(o))t=t[s.index%t.length];else if(dt(t[0])){const h=t,u=i._scopes.filter(l=>l!==h);t=[];for(const l of h){const f=wu(u,i,o,l);t.push(Ns(f,s,a&&a[o],n))}}return t}function i0(o,t,e){return Bi(o)?o(t,e):o}const aw=(o,t)=>o===!0?t:typeof o=="string"?as(t,o):void 0;function ow(o,t,e,r,i){for(const s of t){const a=aw(e,s);if(a){o.add(a);const n=i0(a._fallback,e,i);if(be(n)&&n!==e&&n!==r)return n}else if(a===!1&&be(r)&&e!==r)return null}return!1}function wu(o,t,e,r){const i=t._rootScopes,s=i0(t._fallback,e,r),a=[...o,...i],n=new Set;n.add(r);let h=Kc(n,a,e,s||e,r);return h===null||be(s)&&s!==e&&(h=Kc(n,a,s,h,r),h===null)?!1:bu(Array.from(n),[""],i,s,()=>hw(t,e,r))}function Kc(o,t,e,r,i){for(;e;)e=ow(o,t,e,r,i);return e}function hw(o,t,e){const r=o._getTarget();t in r||(r[t]={});const i=r[t];return Ct(i)&&dt(e)?e:i}function lw(o,t,e,r){let i;for(const s of t)if(i=s0(iw(s,o),e),be(i))return Du(o,i)?wu(e,r,o,i):i}function s0(o,t){for(const e of t){if(!e)continue;const r=e[o];if(be(r))return r}}function Zc(o){let t=o._keys;return t||(t=o._keys=uw(o._scopes)),t}function uw(o){const t=new Set;for(const e of o)for(const r of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}const fw=Number.EPSILON||1e-14,zs=(o,t)=>t<o.length&&!o[t].skip&&o[t],n0=o=>o==="x"?"y":"x";function dw(o,t,e,r){const i=o.skip?t:o,s=t,a=e.skip?t:e,n=Qh(s,i),h=Qh(a,s);let u=n/(n+h),l=h/(n+h);u=isNaN(u)?0:u,l=isNaN(l)?0:l;const f=r*u,c=r*l;return{previous:{x:s.x-f*(a.x-i.x),y:s.y-f*(a.y-i.y)},next:{x:s.x+c*(a.x-i.x),y:s.y+c*(a.y-i.y)}}}function cw(o,t,e){const r=o.length;let i,s,a,n,h,u=zs(o,0);for(let l=0;l<r-1;++l)if(h=u,u=zs(o,l+1),!(!h||!u)){if(En(t[l],0,fw)){e[l]=e[l+1]=0;continue}i=e[l]/t[l],s=e[l+1]/t[l],n=Math.pow(i,2)+Math.pow(s,2),!(n<=9)&&(a=3/Math.sqrt(n),e[l]=i*a*t[l],e[l+1]=s*a*t[l])}}function vw(o,t,e="x"){const r=n0(e),i=o.length;let s,a,n,h=zs(o,0);for(let u=0;u<i;++u){if(a=n,n=h,h=zs(o,u+1),!n)continue;const l=n[e],f=n[r];a&&(s=(l-a[e])/3,n[`cp1${e}`]=l-s,n[`cp1${r}`]=f-s*t[u]),h&&(s=(h[e]-l)/3,n[`cp2${e}`]=l+s,n[`cp2${r}`]=f+s*t[u])}}function pw(o,t="x"){const e=n0(t),r=o.length,i=Array(r).fill(0),s=Array(r);let a,n,h,u=zs(o,0);for(a=0;a<r;++a)if(n=h,h=u,u=zs(o,a+1),!!h){if(u){const l=u[t]-h[t];i[a]=l!==0?(u[e]-h[e])/l:0}s[a]=n?u?je(i[a-1])!==je(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}cw(o,i,s),vw(o,s,t)}function Yr(o,t,e){return Math.max(Math.min(o,e),t)}function gw(o,t){let e,r,i,s,a,n=hs(o[0],t);for(e=0,r=o.length;e<r;++e)a=s,s=n,n=e<r-1&&hs(o[e+1],t),s&&(i=o[e],a&&(i.cp1x=Yr(i.cp1x,t.left,t.right),i.cp1y=Yr(i.cp1y,t.top,t.bottom)),n&&(i.cp2x=Yr(i.cp2x,t.left,t.right),i.cp2y=Yr(i.cp2y,t.top,t.bottom)))}function mw(o,t,e,r,i){let s,a,n,h;if(t.spanGaps&&(o=o.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")pw(o,i);else{let u=r?o[o.length-1]:o[0];for(s=0,a=o.length;s<a;++s)n=o[s],h=dw(u,n,o[Math.min(s+1,a-(r?0:1))%a],t.tension),n.cp1x=h.previous.x,n.cp1y=h.previous.y,n.cp2x=h.next.x,n.cp2y=h.next.y,u=n}t.capBezierPoints&&gw(o,e)}function r0(){return typeof window!="undefined"&&typeof document!="undefined"}function Iu(o){let t=o.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ma(o,t,e){let r;return typeof o=="string"?(r=parseInt(o,10),o.indexOf("%")!==-1&&(r=r/100*t.parentNode[e])):r=o,r}const _a=o=>window.getComputedStyle(o,null);function xw(o,t){return _a(o).getPropertyValue(t)}const yw=["top","right","bottom","left"];function ss(o,t,e){const r={};e=e?"-"+e:"";for(let i=0;i<4;i++){const s=yw[i];r[s]=parseFloat(o[t+"-"+s+e])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Tw=(o,t,e)=>(o>0||t>0)&&(!e||!e.shadowRoot);function Sw(o,t){const e=o.native||o,r=e.touches,i=r&&r.length?r[0]:e,{offsetX:s,offsetY:a}=i;let n=!1,h,u;if(Tw(s,a,e.target))h=s,u=a;else{const l=t.getBoundingClientRect();h=i.clientX-l.left,u=i.clientY-l.top,n=!0}return{x:h,y:u,box:n}}function a0(o,t){const{canvas:e,currentDevicePixelRatio:r}=t,i=_a(e),s=i.boxSizing==="border-box",a=ss(i,"padding"),n=ss(i,"border","width"),{x:h,y:u,box:l}=Sw(o,e),f=a.left+(l&&n.left),c=a.top+(l&&n.top);let{width:d,height:v}=t;return s&&(d-=a.width+n.width,v-=a.height+n.height),{x:Math.round((h-f)/d*e.width/r),y:Math.round((u-c)/v*e.height/r)}}function Cw(o,t,e){let r,i;if(t===void 0||e===void 0){const s=Iu(o);if(!s)t=o.clientWidth,e=o.clientHeight;else{const a=s.getBoundingClientRect(),n=_a(s),h=ss(n,"border","width"),u=ss(n,"padding");t=a.width-u.width-h.width,e=a.height-u.height-h.height,r=ma(n.maxWidth,s,"clientWidth"),i=ma(n.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:r||da,maxHeight:i||da}}const yh=o=>Math.round(o*10)/10;function Ew(o,t,e,r){const i=_a(o),s=ss(i,"margin"),a=ma(i.maxWidth,o,"clientWidth")||da,n=ma(i.maxHeight,o,"clientHeight")||da,h=Cw(o,t,e);let{width:u,height:l}=h;if(i.boxSizing==="content-box"){const f=ss(i,"border","width"),c=ss(i,"padding");u-=c.width+f.width,l-=c.height+f.height}return u=Math.max(0,u-s.width),l=Math.max(0,r?Math.floor(u/r):l-s.height),u=yh(Math.min(u,a,h.maxWidth)),l=yh(Math.min(l,n,h.maxHeight)),u&&!l&&(l=yh(u/2)),{width:u,height:l}}function Jc(o,t,e){const r=t||1,i=Math.floor(o.height*r),s=Math.floor(o.width*r);o.height=i/r,o.width=s/r;const a=o.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${o.height}px`,a.style.width=`${o.width}px`),o.currentDevicePixelRatio!==r||a.height!==i||a.width!==s?(o.currentDevicePixelRatio=r,a.height=i,a.width=s,o.ctx.setTransform(r,0,0,r,0,0),!0):!1}const Pw=function(){let o=!1;try{const t={get passive(){return o=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return o}();function Qc(o,t){const e=xw(o,t),r=e&&e.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function is(o,t,e,r){return{x:o.x+e*(t.x-o.x),y:o.y+e*(t.y-o.y)}}function Mw(o,t,e,r){return{x:o.x+e*(t.x-o.x),y:r==="middle"?e<.5?o.y:t.y:r==="after"?e<1?o.y:t.y:e>0?t.y:o.y}}function Aw(o,t,e,r){const i={x:o.cp2x,y:o.cp2y},s={x:t.cp1x,y:t.cp1y},a=is(o,i,e),n=is(i,s,e),h=is(s,t,e),u=is(a,n,e),l=is(n,h,e);return is(u,l,e)}const jc=new Map;function Rw(o,t){t=t||{};const e=o+JSON.stringify(t);let r=jc.get(e);return r||(r=new Intl.NumberFormat(o,t),jc.set(e,r)),r}function qn(o,t,e){return Rw(t,e).format(o)}const Ow=function(o,t){return{x(e){return o+o+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,r){return e-r},leftForLtr(e,r){return e-r}}},Lw=function(){return{x(o){return o},setWidth(o){},textAlign(o){return o},xPlus(o,t){return o+t},leftForLtr(o,t){return o}}};function Gs(o,t,e){return o?Ow(t,e):Lw()}function o0(o,t){let e,r;(t==="ltr"||t==="rtl")&&(e=o.canvas.style,r=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),o.prevTextDirection=r)}function h0(o,t){t!==void 0&&(delete o.prevTextDirection,o.canvas.style.setProperty("direction",t[0],t[1]))}function l0(o){return o==="angle"?{between:Dn,compare:TD,normalize:ce}:{between:pi,compare:(t,e)=>t-e,normalize:t=>t}}function qc({start:o,end:t,count:e,loop:r,style:i}){return{start:o%e,end:t%e,loop:r&&(t-o+1)%e===0,style:i}}function Fw(o,t,e){const{property:r,start:i,end:s}=e,{between:a,normalize:n}=l0(r),h=t.length;let{start:u,end:l,loop:f}=o,c,d;if(f){for(u+=h,l+=h,c=0,d=h;c<d&&a(n(t[u%h][r]),i,s);++c)u--,l--;u%=h,l%=h}return l<u&&(l+=h),{start:u,end:l,loop:f,style:o.style}}function u0(o,t,e){if(!e)return[o];const{property:r,start:i,end:s}=e,a=t.length,{compare:n,between:h,normalize:u}=l0(r),{start:l,end:f,loop:c,style:d}=Fw(o,t,e),v=[];let p=!1,g=null,m,x,y;const T=()=>h(i,y,m)&&n(i,y)!==0,S=()=>n(s,m)===0||h(s,y,m),C=()=>p||T(),E=()=>!p||S();for(let P=l,M=l;P<=f;++P)x=t[P%a],!x.skip&&(m=u(x[r]),m!==y&&(p=h(m,i,s),g===null&&C()&&(g=n(m,i)===0?P:M),g!==null&&E()&&(v.push(qc({start:g,end:P,loop:c,count:a,style:d})),g=null),M=P,y=m));return g!==null&&v.push(qc({start:g,end:f,loop:c,count:a,style:d})),v}function f0(o,t){const e=[],r=o.segments;for(let i=0;i<r.length;i++){const s=u0(r[i],o.points,t);s.length&&e.push(...s)}return e}function bw(o,t,e,r){let i=0,s=t-1;if(e&&!r)for(;i<t&&!o[i].skip;)i++;for(;i<t&&o[i].skip;)i++;for(i%=t,e&&(s+=i);s>i&&o[s%t].skip;)s--;return s%=t,{start:i,end:s}}function Dw(o,t,e,r){const i=o.length,s=[];let a=t,n=o[t],h;for(h=t+1;h<=e;++h){const u=o[h%i];u.skip||u.stop?n.skip||(r=!1,s.push({start:t%i,end:(h-1)%i,loop:r}),t=a=u.stop?h:null):(a=h,n.skip&&(t=h)),n=u}return a!==null&&s.push({start:t%i,end:a%i,loop:r}),s}function ww(o,t){const e=o.points,r=o.options.spanGaps,i=e.length;if(!i)return[];const s=!!o._loop,{start:a,end:n}=bw(e,i,s,r);if(r===!0)return _c(o,[{start:a,end:n,loop:s}],e,t);const h=n<a?n+i:n,u=!!o._fullLoop&&a===0&&n===i-1;return _c(o,Dw(e,a,h,u),e,t)}function _c(o,t,e,r){return!r||!r.setContext||!e?t:Iw(o,t,e,r)}function Iw(o,t,e,r){const i=o._chart.getContext(),s=tv(o.options),{_datasetIndex:a,options:{spanGaps:n}}=o,h=e.length,u=[];let l=s,f=t[0].start,c=f;function d(v,p,g,m){const x=n?-1:1;if(v!==p){for(v+=h;e[v%h].skip;)v-=x;for(;e[p%h].skip;)p+=x;v%h!==p%h&&(u.push({start:v%h,end:p%h,loop:g,style:m}),l=m,f=p%h)}}for(const v of t){f=n?f:v.start;let p=e[f%h],g;for(c=f+1;c<=v.end;c++){const m=e[c%h];g=tv(r.setContext(Wi(i,{type:"segment",p0:p,p1:m,p0DataIndex:(c-1)%h,p1DataIndex:c%h,datasetIndex:a}))),Bw(g,l)&&d(f,c-1,v.loop,l),p=m,l=g}f<c-1&&d(f,c-1,v.loop,l)}return u}function tv(o){return{backgroundColor:o.backgroundColor,borderCapStyle:o.borderCapStyle,borderDash:o.borderDash,borderDashOffset:o.borderDashOffset,borderJoinStyle:o.borderJoinStyle,borderWidth:o.borderWidth,borderColor:o.borderColor}}function Bw(o,t){return t&&JSON.stringify(o)!==JSON.stringify(t)}/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class Gw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,r,i){const s=e.listeners[i],a=e.duration;s.forEach(n=>n({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(r-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Ym.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let a=s.length-1,n=!1,h;for(;a>=0;--a)h=s[a],h._active?(h._total>r.duration&&(r.duration=h._total),h.tick(t),n=!0):(s[a]=s[s.length-1],s.pop());n&&(i.draw(),this._notify(i,r,t,"progress")),s.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let r=e.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,r)),r}listen(t,e,r){this._getAnims(t).listeners[e].push(r)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);!e||(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const r=e.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ci=new Gw;const ev="transparent",Nw={boolean(o,t,e){return e>.5?t:o},color(o,t,e){const r=Hc(o||ev),i=r.valid&&Hc(t||ev);return i&&i.valid?i.mix(r,e).hexString():t},number(o,t,e){return o+(t-o)*e}};class zw{constructor(t,e,r,i){const s=e[r];i=gn([t.to,i,s,t.from]);const a=gn([t.from,s,i]);this._active=!0,this._fn=t.fn||Nw[t.type||typeof a],this._easing=Pn[t.easing]||Pn.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=gn([t.to,e,i,t.from]),this._from=gn([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,n=this._to;let h;if(this._active=s!==n&&(a||e<r),!this._active){this._target[i]=n,this._notify(!0);return}if(e<0){this._target[i]=s;return}h=e/r%2,h=a&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(s,n,h)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,r)=>{t.push({res:e,rej:r})})}_notify(t){const e=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][e]()}}const Vw=["x","y","borderWidth","radius","tension"],Yw=["color","borderColor","backgroundColor"];ct.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Ww=Object.keys(ct.animation);ct.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:o=>o!=="onProgress"&&o!=="onComplete"&&o!=="fn"});ct.set("animations",{colors:{type:"color",properties:Yw},numbers:{type:"number",properties:Vw}});ct.describe("animations",{_fallback:"animation"});ct.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:o=>o|0}}}});class d0{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!dt(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!dt(i))return;const s={};for(const a of Ww)s[a]=i[a];(Ct(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!e.has(a))&&e.set(a,s)})})}_animateOptions(t,e){const r=e.options,i=Xw(t,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&Uw(t.options.$animations,r).then(()=>{t.options=r},()=>{}),s}_createAnimations(t,e){const r=this._properties,i=[],s=t.$animations||(t.$animations={}),a=Object.keys(e),n=Date.now();let h;for(h=a.length-1;h>=0;--h){const u=a[h];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(t,e));continue}const l=e[u];let f=s[u];const c=r.get(u);if(f)if(c&&f.active()){f.update(c,l,n);continue}else f.cancel();if(!c||!c.duration){t[u]=l;continue}s[u]=f=new zw(c,t,u,l),i.push(f)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const r=this._createAnimations(t,e);if(r.length)return ci.add(this._chart,r),!0}}function Uw(o,t){const e=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const s=o[r[i]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function Xw(o,t){if(!t)return;let e=o.options;if(!e){o.options=t;return}return e.$shared&&(o.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function iv(o,t){const e=o&&o.options||{},r=e.reverse,i=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:r?s:i,end:r?i:s}}function Hw(o,t,e){if(e===!1)return!1;const r=iv(o,e),i=iv(t,e);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function $w(o){let t,e,r,i;return dt(o)?(t=o.top,e=o.right,r=o.bottom,i=o.left):t=e=r=i=o,{top:t,right:e,bottom:r,left:i,disabled:o===!1}}function c0(o,t){const e=[],r=o._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)e.push(r[i].index);return e}function sv(o,t,e,r={}){const i=o.keys,s=r.mode==="single";let a,n,h,u;if(t!==null){for(a=0,n=i.length;a<n;++a){if(h=+i[a],h===e){if(r.all)continue;break}u=o.values[h],wt(u)&&(s||t===0||je(t)===je(u))&&(t+=u)}return t}}function kw(o){const t=Object.keys(o),e=new Array(t.length);let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r],e[r]={x:s,y:o[s]};return e}function nv(o,t){const e=o&&o.options.stacked;return e||e===void 0&&t.stack!==void 0}function Kw(o,t,e){return`${o.id}.${t.id}.${e.stack||e.type}`}function Zw(o){const{min:t,max:e,minDefined:r,maxDefined:i}=o.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function Jw(o,t,e){const r=o[t]||(o[t]={});return r[e]||(r[e]={})}function rv(o,t,e,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const s=o[i.index];if(e&&s>0||!e&&s<0)return i.index}return null}function av(o,t){const{chart:e,_cachedMeta:r}=o,i=e._stacks||(e._stacks={}),{iScale:s,vScale:a,index:n}=r,h=s.axis,u=a.axis,l=Kw(s,a,r),f=t.length;let c;for(let d=0;d<f;++d){const v=t[d],{[h]:p,[u]:g}=v,m=v._stacks||(v._stacks={});c=m[u]=Jw(i,l,p),c[n]=g,c._top=rv(c,a,!0,r.type),c._bottom=rv(c,a,!1,r.type)}}function Th(o,t){const e=o.scales;return Object.keys(e).filter(r=>e[r].axis===t).shift()}function Qw(o,t){return Wi(o,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function jw(o,t,e){return Wi(o,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function un(o,t){const e=o.controller.index,r=o.vScale&&o.vScale.axis;if(!!r){t=t||o._parsed;for(const i of t){const s=i._stacks;if(!s||s[r]===void 0||s[r][e]===void 0)return;delete s[r][e]}}}const Sh=o=>o==="reset"||o==="none",ov=(o,t)=>t?o:Object.assign({},o),qw=(o,t,e)=>o&&!t.hidden&&t._stacked&&{keys:c0(e,!0),values:null};class ei{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=nv(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&un(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,r=this.getDataset(),i=(f,c,d,v)=>f==="x"?c:f==="r"?v:d,s=e.xAxisID=ht(r.xAxisID,Th(t,"x")),a=e.yAxisID=ht(r.yAxisID,Th(t,"y")),n=e.rAxisID=ht(r.rAxisID,Th(t,"r")),h=e.indexAxis,u=e.iAxisID=i(h,s,a,n),l=e.vAxisID=i(h,a,s,n);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(n),e.iScale=this.getScaleForId(u),e.vScale=this.getScaleForId(l)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&kc(this._data,this),t._stacked&&un(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),r=this._data;if(dt(e))this._data=kw(e);else if(r!==e){if(r){kc(r,this);const i=this._cachedMeta;un(i),i._parsed=[]}e&&Object.isExtensible(e)&&ew(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=e._stacked;e._stacked=nv(e.vScale,e),e.stack!==r.stack&&(i=!0,un(e),e.stack=r.stack),this._resyncElements(t),(i||s!==e._stacked)&&av(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:a}=r,n=s.axis;let h=t===0&&e===i.length?!0:r._sorted,u=t>0&&r._parsed[t-1],l,f,c;if(this._parsing===!1)r._parsed=i,r._sorted=!0,c=i;else{Ct(i[t])?c=this.parseArrayData(r,i,t,e):dt(i[t])?c=this.parseObjectData(r,i,t,e):c=this.parsePrimitiveData(r,i,t,e);const d=()=>f[n]===null||u&&f[n]<u[n];for(l=0;l<e;++l)r._parsed[l+t]=f=c[l],h&&(d()&&(h=!1),u=f);r._sorted=h}a&&av(this,c)}parsePrimitiveData(t,e,r,i){const{iScale:s,vScale:a}=t,n=s.axis,h=a.axis,u=s.getLabels(),l=s===a,f=new Array(i);let c,d,v;for(c=0,d=i;c<d;++c)v=c+r,f[c]={[n]:l||s.parse(u[v],v),[h]:a.parse(e[v],v)};return f}parseArrayData(t,e,r,i){const{xScale:s,yScale:a}=t,n=new Array(i);let h,u,l,f;for(h=0,u=i;h<u;++h)l=h+r,f=e[l],n[h]={x:s.parse(f[0],l),y:a.parse(f[1],l)};return n}parseObjectData(t,e,r,i){const{xScale:s,yScale:a}=t,{xAxisKey:n="x",yAxisKey:h="y"}=this._parsing,u=new Array(i);let l,f,c,d;for(l=0,f=i;l<f;++l)c=l+r,d=e[c],u[l]={x:s.parse(as(d,n),c),y:a.parse(as(d,h),c)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,r){const i=this.chart,s=this._cachedMeta,a=e[t.axis],n={keys:c0(i,!0),values:e._stacks[t.axis]};return sv(n,a,s.index,{mode:r})}updateRangeFromParsed(t,e,r,i){const s=r[e.axis];let a=s===null?NaN:s;const n=i&&r._stacks[e.axis];i&&n&&(i.values=n,a=sv(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&t===r.iScale,a=i.length,n=this._getOtherScale(t),h=qw(e,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:l,max:f}=Zw(n);let c,d;function v(){d=i[c];const p=d[n.axis];return!wt(d[t.axis])||l>p||f<p}for(c=0;c<a&&!(!v()&&(this.updateRangeFromParsed(u,t,d,h),s));++c);if(s){for(c=a-1;c>=0;--c)if(!v()){this.updateRangeFromParsed(u,t,d,h);break}}return u}getAllParsedValues(t){const e=this._cachedMeta._parsed,r=[];let i,s,a;for(i=0,s=e.length;i<s;++i)a=e[i][t.axis],wt(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,r=e.iScale,i=e.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=$w(ht(this.options.clip,Hw(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,r=this._cachedMeta,i=r.data||[],s=e.chartArea,a=[],n=this._drawStart||0,h=this._drawCount||i.length-n,u=this.options.drawActiveElementsOnTop;let l;for(r.dataset&&r.dataset.draw(t,s,n,h),l=n;l<n+h;++l){const f=i[l];f.hidden||(f.active&&u?a.push(f):f.draw(t,s))}for(l=0;l<a.length;++l)a[l].draw(t,s)}getStyle(t,e){const r=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,e,r){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];s=a.$context||(a.$context=jw(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=Qw(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",r){const i=e==="active",s=this._cachedDataOpts,a=t+"-"+e,n=s[a],h=this.enableOptionSharing&&be(r);if(n)return ov(n,h);const u=this.chart.config,l=u.datasetElementScopeKeys(this._type,t),f=i?[`${t}Hover`,"hover",t,""]:[t,""],c=u.getOptionScopes(this.getDataset(),l),d=Object.keys(ct.elements[t]),v=()=>this.getContext(r,i),p=u.resolveNamedOptions(c,d,v,f);return p.$shared&&(p.$shared=h,s[a]=Object.freeze(ov(p,h))),p}_resolveAnimations(t,e,r){const i=this.chart,s=this._cachedDataOpts,a=`animation-${e}`,n=s[a];if(n)return n;let h;if(i.options.animation!==!1){const l=this.chart.config,f=l.datasetAnimationScopeKeys(this._type,e),c=l.getOptionScopes(this.getDataset(),f);h=l.createResolver(c,this.getContext(t,r,e))}const u=new d0(i,h&&h.animations);return h&&h._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(t){if(!!t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Sh(t)||this.chart._animationsDisabled}updateElement(t,e,r,i){Sh(i)?Object.assign(t,r):this._resolveAnimations(e,i).update(t,r)}updateSharedOptions(t,e,r){t&&!Sh(e)&&this._resolveAnimations(void 0,e).update(t,r)}_setStyle(t,e,r,i){t.active=i;const s=this.getStyle(e,i);this._resolveAnimations(e,r,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,e,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,r=this._cachedMeta.data;for(const[n,h,u]of this._syncList)this[n](h,u);this._syncList=[];const i=r.length,s=e.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,e,r=!0){const i=this._cachedMeta,s=i.data,a=t+e;let n;const h=u=>{for(u.length+=e,n=u.length-1;n>=a;n--)u[n]=u[n-e]};for(h(s),n=t;n<a;++n)s[n]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(t,e),r&&this.updateElements(s,t,e,"reset")}updateElements(t,e,r,i){}_removeElements(t,e){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(t,e);r._stacked&&un(r,i)}r.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,r,i]=t;this[e](r,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ei.defaults={};ei.prototype.datasetElementType=null;ei.prototype.dataElementType=null;function _w(o,t){if(!o._cache.$bar){const e=o.getMatchingVisibleMetas(t);let r=[];for(let i=0,s=e.length;i<s;i++)r=r.concat(e[i].controller.getAllParsedValues(o));o._cache.$bar=_m(r.sort((i,s)=>i-s))}return o._cache.$bar}function tI(o){const t=o.iScale,e=_w(t,o.type);let r=t._length,i,s,a,n;const h=()=>{a===32767||a===-32768||(be(n)&&(r=Math.min(r,Math.abs(a-n)||r)),n=a)};for(i=0,s=e.length;i<s;++i)a=t.getPixelForValue(e[i]),h();for(n=void 0,i=0,s=t.ticks.length;i<s;++i)a=t.getPixelForTick(i),h();return r}function eI(o,t,e,r){const i=e.barThickness;let s,a;return pt(i)?(s=t.min*e.categoryPercentage,a=e.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[o]-s/2}}function iI(o,t,e,r){const i=t.pixels,s=i[o];let a=o>0?i[o-1]:null,n=o<i.length-1?i[o+1]:null;const h=e.categoryPercentage;a===null&&(a=s-(n===null?t.end-t.start:n-s)),n===null&&(n=s+s-a);const u=s-(s-Math.min(a,n))/2*h;return{chunk:Math.abs(n-a)/2*h/r,ratio:e.barPercentage,start:u}}function sI(o,t,e,r){const i=e.parse(o[0],r),s=e.parse(o[1],r),a=Math.min(i,s),n=Math.max(i,s);let h=a,u=n;Math.abs(a)>Math.abs(n)&&(h=n,u=a),t[e.axis]=u,t._custom={barStart:h,barEnd:u,start:i,end:s,min:a,max:n}}function v0(o,t,e,r){return Ct(o)?sI(o,t,e,r):t[e.axis]=e.parse(o,r),t}function hv(o,t,e,r){const i=o.iScale,s=o.vScale,a=i.getLabels(),n=i===s,h=[];let u,l,f,c;for(u=e,l=e+r;u<l;++u)c=t[u],f={},f[i.axis]=n||i.parse(a[u],u),h.push(v0(c,f,s,u));return h}function Ch(o){return o&&o.barStart!==void 0&&o.barEnd!==void 0}function nI(o,t,e){return o!==0?je(o):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function rI(o){let t,e,r,i,s;return o.horizontal?(t=o.base>o.x,e="left",r="right"):(t=o.base<o.y,e="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:e,end:r,reverse:t,top:i,bottom:s}}function aI(o,t,e,r){let i=t.borderSkipped;const s={};if(!i){o.borderSkipped=s;return}const{start:a,end:n,reverse:h,top:u,bottom:l}=rI(o);i==="middle"&&e&&(o.enableBorderRadius=!0,(e._top||0)===r?i=u:(e._bottom||0)===r?i=l:(s[lv(l,a,n,h)]=!0,i=u)),s[lv(i,a,n,h)]=!0,o.borderSkipped=s}function lv(o,t,e,r){return r?(o=oI(o,t,e),o=uv(o,e,t)):o=uv(o,t,e),o}function oI(o,t,e){return o===t?e:o===e?t:o}function uv(o,t,e){return o==="start"?t:o==="end"?e:o}function hI(o,{inflateAmount:t},e){o.inflateAmount=t==="auto"?e===1?.33:0:t}class to extends ei{parsePrimitiveData(t,e,r,i){return hv(t,e,r,i)}parseArrayData(t,e,r,i){return hv(t,e,r,i)}parseObjectData(t,e,r,i){const{iScale:s,vScale:a}=t,{xAxisKey:n="x",yAxisKey:h="y"}=this._parsing,u=s.axis==="x"?n:h,l=a.axis==="x"?n:h,f=[];let c,d,v,p;for(c=r,d=r+i;c<d;++c)p=e[c],v={},v[s.axis]=s.parse(as(p,u),c),f.push(v0(as(p,l),v,a,c));return f}updateRangeFromParsed(t,e,r,i){super.updateRangeFromParsed(t,e,r,i);const s=r._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:r,vScale:i}=e,s=this.getParsed(t),a=s._custom,n=Ch(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:n}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,r,i){const s=i==="reset",{index:a,_cachedMeta:{vScale:n}}=this,h=n.getBasePixel(),u=n.isHorizontal(),l=this._getRuler(),f=this.resolveDataElementOptions(e,i),c=this.getSharedOptions(f),d=this.includeOptions(i,c);this.updateSharedOptions(c,i,f);for(let v=e;v<e+r;v++){const p=this.getParsed(v),g=s||pt(p[n.axis])?{base:h,head:h}:this._calculateBarValuePixels(v),m=this._calculateBarIndexPixels(v,l),x=(p._stacks||{})[n.axis],y={horizontal:u,base:g.base,enableBorderRadius:!x||Ch(p._custom)||a===x._top||a===x._bottom,x:u?g.head:m.center,y:u?m.center:g.head,height:u?m.size:Math.abs(g.size),width:u?Math.abs(g.size):m.size};d&&(y.options=c||this.resolveDataElementOptions(v,t[v].active?"active":i));const T=y.options||t[v].options;aI(y,T,x,a),hI(y,T,l.ratio),this.updateElement(t[v],v,y,i)}}_getStacks(t,e){const i=this._cachedMeta.iScale,s=i.getMatchingVisibleMetas(this._type),a=i.options.stacked,n=s.length,h=[];let u,l;for(u=0;u<n;++u)if(l=s[u],!!l.controller.options.grouped){if(typeof e!="undefined"){const f=l.controller.getParsed(e)[l.controller._cachedMeta.vScale.axis];if(pt(f)||isNaN(f))continue}if((a===!1||h.indexOf(l.stack)===-1||a===void 0&&l.stack===void 0)&&h.push(l.stack),l.index===t)break}return h.length||h.push(void 0),h}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,r){const i=this._getStacks(t,r),s=e!==void 0?i.indexOf(e):-1;return s===-1?i.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,r=e.iScale,i=[];let s,a;for(s=0,a=e.data.length;s<a;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const n=t.barThickness;return{min:n||tI(e),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:n?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:r},options:{base:i,minBarLength:s}}=this,a=i||0,n=this.getParsed(t),h=n._custom,u=Ch(h);let l=n[e.axis],f=0,c=r?this.applyStack(e,n,r):l,d,v;c!==l&&(f=c-l,c=l),u&&(l=h.barStart,c=h.barEnd-h.barStart,l!==0&&je(l)!==je(h.barEnd)&&(f=0),f+=l);const p=!pt(i)&&!u?i:f;let g=e.getPixelForValue(p);if(this.chart.getDataVisibility(t)?d=e.getPixelForValue(f+c):d=g,v=d-g,Math.abs(v)<s&&(v=nI(v,e,a)*s,l===a&&(g-=v/2),d=g+v),g===e.getPixelForValue(a)){const m=je(v)*e.getLineWidthForValue(a)/2;g+=m,v-=m}return{size:v,base:g,head:d,center:d+v/2}}_calculateBarIndexPixels(t,e){const r=e.scale,i=this.options,s=i.skipNull,a=ht(i.maxBarThickness,1/0);let n,h;if(e.grouped){const u=s?this._getStackCount(t):e.stackCount,l=i.barThickness==="flex"?iI(t,e,i,u):eI(t,e,i,u),f=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);n=l.start+l.chunk*f+l.chunk/2,h=Math.min(a,l.chunk*l.ratio)}else n=r.getPixelForValue(this.getParsed(t)[r.axis],t),h=Math.min(a,e.min*e.ratio);return{base:n-h/2,head:n+h/2,center:n,size:h}}draw(){const t=this._cachedMeta,e=t.vScale,r=t.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[e.axis]!==null&&r[s].draw(this._ctx)}}to.id="bar";to.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};to.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class eo extends ei{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,r,i){const s=super.parsePrimitiveData(t,e,r,i);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+r).radius;return s}parseArrayData(t,e,r,i){const s=super.parseArrayData(t,e,r,i);for(let a=0;a<s.length;a++){const n=e[r+a];s[a]._custom=ht(n[2],this.resolveDataElementOptions(a+r).radius)}return s}parseObjectData(t,e,r,i){const s=super.parseObjectData(t,e,r,i);for(let a=0;a<s.length;a++){const n=e[r+a];s[a]._custom=ht(n&&n.r&&+n.r,this.resolveDataElementOptions(a+r).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let r=t.length-1;r>=0;--r)e=Math.max(e,t[r].size(this.resolveDataElementOptions(r))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:r,yScale:i}=e,s=this.getParsed(t),a=r.getLabelForValue(s.x),n=i.getLabelForValue(s.y),h=s._custom;return{label:e.label,value:"("+a+", "+n+(h?", "+h:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,r,i){const s=i==="reset",{iScale:a,vScale:n}=this._cachedMeta,h=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(h),l=this.includeOptions(i,u),f=a.axis,c=n.axis;for(let d=e;d<e+r;d++){const v=t[d],p=!s&&this.getParsed(d),g={},m=g[f]=s?a.getPixelForDecimal(.5):a.getPixelForValue(p[f]),x=g[c]=s?n.getBasePixel():n.getPixelForValue(p[c]);g.skip=isNaN(m)||isNaN(x),l&&(g.options=this.resolveDataElementOptions(d,v.active?"active":i),s&&(g.options.radius=0)),this.updateElement(v,d,g,i)}this.updateSharedOptions(u,i,h)}resolveDataElementOptions(t,e){const r=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return e!=="active"&&(i.radius=0),i.radius+=ht(r&&r._custom,s),i}}eo.id="bubble";eo.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};eo.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function lI(o,t,e){let r=1,i=1,s=0,a=0;if(t<Tt){const n=o,h=n+t,u=Math.cos(n),l=Math.sin(n),f=Math.cos(h),c=Math.sin(h),d=(y,T,S)=>Dn(y,n,h,!0)?1:Math.max(T,T*e,S,S*e),v=(y,T,S)=>Dn(y,n,h,!0)?-1:Math.min(T,T*e,S,S*e),p=d(0,u,f),g=d(Ft,l,c),m=v(Rt,u,f),x=v(Rt+Ft,l,c);r=(p-m)/2,i=(g-x)/2,s=-(p+m)/2,a=-(g+x)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}class $s extends ei{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=h=>+r[h];if(dt(r[t])){const{key:h="value"}=this._parsing;s=u=>+as(r[u],h)}let a,n;for(a=t,n=t+e;a<n;++a)i._parsed[a]=s(a)}}_getRotation(){return ze(this.options.rotation-90)}_getCircumference(){return ze(this.options.circumference)}_getRotationExtents(){let t=Tt,e=-Tt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),a=i._getCircumference();t=Math.min(t,s),e=Math.max(e,s+a)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:r}=e,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,n=Math.max((Math.min(r.width,r.height)-a)/2,0),h=Math.min(uD(this.options.cutout,n),1),u=this._getRingWeight(this.index),{circumference:l,rotation:f}=this._getRotationExtents(),{ratioX:c,ratioY:d,offsetX:v,offsetY:p}=lI(f,l,h),g=(r.width-a)/c,m=(r.height-a)/d,x=Math.max(Math.min(g,m)/2,0),y=Um(this.options.radius,x),T=Math.max(y*h,0),S=(y-T)/this._getVisibleDatasetWeightTotal();this.offsetX=v*y,this.offsetY=p*y,i.total=this.calculateTotal(),this.outerRadius=y-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*u,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return e&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/Tt)}updateElements(t,e,r,i){const s=i==="reset",a=this.chart,n=a.chartArea,u=a.options.animation,l=(n.left+n.right)/2,f=(n.top+n.bottom)/2,c=s&&u.animateScale,d=c?0:this.innerRadius,v=c?0:this.outerRadius,p=this.resolveDataElementOptions(e,i),g=this.getSharedOptions(p),m=this.includeOptions(i,g);let x=this._getRotation(),y;for(y=0;y<e;++y)x+=this._circumference(y,s);for(y=e;y<e+r;++y){const T=this._circumference(y,s),S=t[y],C={x:l+this.offsetX,y:f+this.offsetY,startAngle:x,endAngle:x+T,circumference:T,outerRadius:v,innerRadius:d};m&&(C.options=g||this.resolveDataElementOptions(y,S.active?"active":i)),x+=T,this.updateElement(S,y,C,i)}this.updateSharedOptions(g,i,p)}calculateTotal(){const t=this._cachedMeta,e=t.data;let r=0,i;for(i=0;i<e.length;i++){const s=t._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Tt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=qn(e._parsed[t],r.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const r=this.chart;let i,s,a,n,h;if(!t){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){a=r.getDatasetMeta(i),t=a.data,n=a.controller;break}}if(!t)return 0;for(i=0,s=t.length;i<s;++i)h=n.resolveDataElementOptions(i),h.borderAlign!=="inner"&&(e=Math.max(e,h.borderWidth||0,h.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let r=0,i=t.length;r<i;++r){const s=this.resolveDataElementOptions(r);e=Math.max(e,s.offset||0,s.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(e+=this._getRingWeight(r));return e}_getRingWeight(t){return Math.max(ht(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}$s.id="doughnut";$s.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};$s.descriptors={_scriptable:o=>o!=="spacing",_indexable:o=>o!=="spacing"};$s.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(o){const t=o.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:e}}=o.legend.options;return t.labels.map((r,i)=>{const a=o.getDatasetMeta(0).controller.getStyle(i);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:e,hidden:!o.getDataVisibility(i),index:i}})}return[]}},onClick(o,t,e){e.chart.toggleDataVisibility(t.index),e.chart.update()}},tooltip:{callbacks:{title(){return""},label(o){let t=o.label;const e=": "+o.formattedValue;return Ct(t)?(t=t.slice(),t[0]+=e):t+=e,t}}}}};class _n extends ei{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=e,a=this.chart._animationsDisabled;let{start:n,count:h}=uI(e,i,a);this._drawStart=n,this._drawCount=h,fI(e)&&(n=0,h=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},t),this.updateElements(i,n,h,t)}updateElements(t,e,r,i){const s=i==="reset",{iScale:a,vScale:n,_stacked:h,_dataset:u}=this._cachedMeta,l=this.resolveDataElementOptions(e,i),f=this.getSharedOptions(l),c=this.includeOptions(i,f),d=a.axis,v=n.axis,{spanGaps:p,segment:g}=this.options,m=bn(p)?p:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none";let y=e>0&&this.getParsed(e-1);for(let T=e;T<e+r;++T){const S=t[T],C=this.getParsed(T),E=x?S:{},P=pt(C[v]),M=E[d]=a.getPixelForValue(C[d],T),R=E[v]=s||P?n.getBasePixel():n.getPixelForValue(h?this.applyStack(n,C,h):C[v],T);E.skip=isNaN(M)||isNaN(R)||P,E.stop=T>0&&C[d]-y[d]>m,g&&(E.parsed=C,E.raw=u.data[T]),c&&(E.options=f||this.resolveDataElementOptions(T,S.active?"active":i)),x||this.updateElement(S,T,E,i),y=C}this.updateSharedOptions(f,i,l)}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,r=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}_n.id="line";_n.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};_n.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};function uI(o,t,e){const r=t.length;let i=0,s=r;if(o._sorted){const{iScale:a,_parsed:n}=o,h=a.axis,{min:u,max:l,minDefined:f,maxDefined:c}=a.getUserBounds();f&&(i=Yt(Math.min(gi(n,a.axis,u).lo,e?r:gi(t,h,a.getPixelForValue(u)).lo),0,r-1)),c?s=Yt(Math.max(gi(n,a.axis,l).hi+1,e?0:gi(t,h,a.getPixelForValue(l)).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function fI(o){const{xScale:t,yScale:e,_scaleRanges:r}=o,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!r)return o._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==e.min||r.ymax!==e.max;return Object.assign(r,i),s}class io extends ei{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=qn(e._parsed[t].r,r.options.locale);return{label:i[t]||"",value:s}}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}_updateRadius(){const t=this.chart,e=t.chartArea,r=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),s=Math.max(i/2,0),a=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),n=(s-a)/t.getVisibleDatasetCount();this.outerRadius=s-n*this.index,this.innerRadius=this.outerRadius-n}updateElements(t,e,r,i){const s=i==="reset",a=this.chart,n=this.getDataset(),u=a.options.animation,l=this._cachedMeta.rScale,f=l.xCenter,c=l.yCenter,d=l.getIndexAngle(0)-.5*Rt;let v=d,p;const g=360/this.countVisibleElements();for(p=0;p<e;++p)v+=this._computeAngle(p,i,g);for(p=e;p<e+r;p++){const m=t[p];let x=v,y=v+this._computeAngle(p,i,g),T=a.getDataVisibility(p)?l.getDistanceFromCenterForValue(n.data[p]):0;v=y,s&&(u.animateScale&&(T=0),u.animateRotate&&(x=y=d));const S={x:f,y:c,innerRadius:0,outerRadius:T,startAngle:x,endAngle:y,options:this.resolveDataElementOptions(p,m.active?"active":i)};this.updateElement(m,p,S,i)}}countVisibleElements(){const t=this.getDataset(),e=this._cachedMeta;let r=0;return e.data.forEach((i,s)=>{!isNaN(t.data[s])&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(t,e,r){return this.chart.getDataVisibility(t)?ze(this.resolveDataElementOptions(t,e).angle||r):0}}io.id="polarArea";io.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};io.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(o){const t=o.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:e}}=o.legend.options;return t.labels.map((r,i)=>{const a=o.getDatasetMeta(0).controller.getStyle(i);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:e,hidden:!o.getDataVisibility(i),index:i}})}return[]}},onClick(o,t,e){e.chart.toggleDataVisibility(t.index),e.chart.update()}},tooltip:{callbacks:{title(){return""},label(o){return o.chart.data.labels[o.dataIndex]+": "+o.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class Bu extends $s{}Bu.id="pie";Bu.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class so extends ei{getLabelAndValue(t){const e=this._cachedMeta.vScale,r=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(r[e.axis])}}update(t){const e=this._cachedMeta,r=e.dataset,i=e.data||[],s=e.iScale.getLabels();if(r.points=i,t!=="resize"){const a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);const n={_loop:!0,_fullLoop:s.length===i.length,options:a};this.updateElement(r,void 0,n,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,r,i){const s=this.getDataset(),a=this._cachedMeta.rScale,n=i==="reset";for(let h=e;h<e+r;h++){const u=t[h],l=this.resolveDataElementOptions(h,u.active?"active":i),f=a.getPointPositionForValue(h,s.data[h]),c=n?a.xCenter:f.x,d=n?a.yCenter:f.y,v={x:c,y:d,angle:f.angle,skip:isNaN(c)||isNaN(d),options:l};this.updateElement(u,h,v,i)}}}so.id="radar";so.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};so.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class no extends _n{}no.id="scatter";no.defaults={showLine:!1,fill:!1};no.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(o){return"("+o.label+", "+o.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var dI=Object.freeze({__proto__:null,BarController:to,BubbleController:eo,DoughnutController:$s,LineController:_n,PolarAreaController:io,PieController:Bu,RadarController:so,ScatterController:no});function ts(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _h{constructor(t){this.options=t||{}}formats(){return ts()}parse(t,e){return ts()}format(t,e){return ts()}add(t,e,r){return ts()}diff(t,e,r){return ts()}startOf(t,e,r){return ts()}endOf(t,e){return ts()}}_h.override=function(o){Object.assign(_h.prototype,o)};var cI={_date:_h};function mn(o,t){return"native"in o?{x:o.x,y:o.y}:a0(o,t)}function vI(o,t){const e=o.getSortedVisibleDatasetMetas();let r,i,s;for(let a=0,n=e.length;a<n;++a){({index:r,data:i}=e[a]);for(let h=0,u=i.length;h<u;++h)s=i[h],s.skip||t(s,r,h)}}function pI(o,t,e,r){const{controller:i,data:s,_sorted:a}=o,n=i._cachedMeta.iScale;if(n&&t===n.axis&&t!=="r"&&a&&s.length){const h=n._reversePixels?_D:gi;if(r){if(i._sharedOptions){const u=s[0],l=typeof u.getRange=="function"&&u.getRange(t);if(l){const f=h(s,t,e-l),c=h(s,t,e+l);return{lo:f.lo,hi:c.hi}}}}else return h(s,t,e)}return{lo:0,hi:s.length-1}}function Gu(o,t,e,r,i){const s=o.getSortedVisibleDatasetMetas(),a=e[t];for(let n=0,h=s.length;n<h;++n){const{index:u,data:l}=s[n],{lo:f,hi:c}=pI(s[n],t,a,i);for(let d=f;d<=c;++d){const v=l[d];v.skip||r(v,u,d)}}}function gI(o){const t=o.indexOf("x")!==-1,e=o.indexOf("y")!==-1;return function(r,i){const s=t?Math.abs(r.x-i.x):0,a=e?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function Eh(o,t,e,r){const i=[];return hs(t,o.chartArea,o._minPadding)&&Gu(o,e,t,function(a,n,h){a.inRange(t.x,t.y,r)&&i.push({element:a,datasetIndex:n,index:h})},!0),i}function mI(o,t,e,r){let i=[];function s(a,n,h){const{startAngle:u,endAngle:l}=a.getProps(["startAngle","endAngle"],r),{angle:f}=$m(a,{x:t.x,y:t.y});Dn(f,u,l)&&i.push({element:a,datasetIndex:n,index:h})}return Gu(o,e,t,s),i}function xI(o,t,e,r,i){let s=[];const a=gI(e);let n=Number.POSITIVE_INFINITY;function h(u,l,f){const c=u.inRange(t.x,t.y,i);if(r&&!c)return;const d=u.getCenterPoint(i);if(!hs(d,o.chartArea,o._minPadding)&&!c)return;const p=a(t,d);p<n?(s=[{element:u,datasetIndex:l,index:f}],n=p):p===n&&s.push({element:u,datasetIndex:l,index:f})}return Gu(o,e,t,h),s}function Ph(o,t,e,r,i){return hs(t,o.chartArea,o._minPadding)?e==="r"&&!r?mI(o,t,e,i):xI(o,t,e,r,i):[]}function fv(o,t,e,r){const i=mn(t,o),s=[],a=e.axis,n=a==="x"?"inXRange":"inYRange";let h=!1;return vI(o,(u,l,f)=>{u[n](i[a],r)&&s.push({element:u,datasetIndex:l,index:f}),u.inRange(i.x,i.y,r)&&(h=!0)}),e.intersect&&!h?[]:s}var yI={modes:{index(o,t,e,r){const i=mn(t,o),s=e.axis||"x",a=e.intersect?Eh(o,i,s,r):Ph(o,i,s,!1,r),n=[];return a.length?(o.getSortedVisibleDatasetMetas().forEach(h=>{const u=a[0].index,l=h.data[u];l&&!l.skip&&n.push({element:l,datasetIndex:h.index,index:u})}),n):[]},dataset(o,t,e,r){const i=mn(t,o),s=e.axis||"xy";let a=e.intersect?Eh(o,i,s,r):Ph(o,i,s,!1,r);if(a.length>0){const n=a[0].datasetIndex,h=o.getDatasetMeta(n).data;a=[];for(let u=0;u<h.length;++u)a.push({element:h[u],datasetIndex:n,index:u})}return a},point(o,t,e,r){const i=mn(t,o),s=e.axis||"xy";return Eh(o,i,s,r)},nearest(o,t,e,r){const i=mn(t,o),s=e.axis||"xy";return Ph(o,i,s,e.intersect,r)},x(o,t,e,r){return fv(o,t,{axis:"x",intersect:e.intersect},r)},y(o,t,e,r){return fv(o,t,{axis:"y",intersect:e.intersect},r)}}};const p0=["left","top","right","bottom"];function fn(o,t){return o.filter(e=>e.pos===t)}function dv(o,t){return o.filter(e=>p0.indexOf(e.pos)===-1&&e.box.axis===t)}function dn(o,t){return o.sort((e,r)=>{const i=t?r:e,s=t?e:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function TI(o){const t=[];let e,r,i,s,a,n;for(e=0,r=(o||[]).length;e<r;++e)i=o[e],{position:s,options:{stack:a,stackWeight:n=1}}=i,t.push({index:e,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:n});return t}function SI(o){const t={};for(const e of o){const{stack:r,pos:i,stackWeight:s}=e;if(!r||!p0.includes(i))continue;const a=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}function CI(o,t){const e=SI(o),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,n;for(s=0,a=o.length;s<a;++s){n=o[s];const{fullSize:h}=n.box,u=e[n.stack],l=u&&n.stackWeight/u.weight;n.horizontal?(n.width=l?l*r:h&&t.availableWidth,n.height=i):(n.width=r,n.height=l?l*i:h&&t.availableHeight)}return e}function EI(o){const t=TI(o),e=dn(t.filter(u=>u.box.fullSize),!0),r=dn(fn(t,"left"),!0),i=dn(fn(t,"right")),s=dn(fn(t,"top"),!0),a=dn(fn(t,"bottom")),n=dv(t,"x"),h=dv(t,"y");return{fullSize:e,leftAndTop:r.concat(s),rightAndBottom:i.concat(h).concat(a).concat(n),chartArea:fn(t,"chartArea"),vertical:r.concat(i).concat(h),horizontal:s.concat(a).concat(n)}}function cv(o,t,e,r){return Math.max(o[e],t[e])+Math.max(o[r],t[r])}function g0(o,t){o.top=Math.max(o.top,t.top),o.left=Math.max(o.left,t.left),o.bottom=Math.max(o.bottom,t.bottom),o.right=Math.max(o.right,t.right)}function PI(o,t,e,r){const{pos:i,box:s}=e,a=o.maxPadding;if(!dt(i)){e.size&&(o[i]-=e.size);const f=r[e.stack]||{size:0,count:1};f.size=Math.max(f.size,e.horizontal?s.height:s.width),e.size=f.size/f.count,o[i]+=e.size}s.getPadding&&g0(a,s.getPadding());const n=Math.max(0,t.outerWidth-cv(a,o,"left","right")),h=Math.max(0,t.outerHeight-cv(a,o,"top","bottom")),u=n!==o.w,l=h!==o.h;return o.w=n,o.h=h,e.horizontal?{same:u,other:l}:{same:l,other:u}}function MI(o){const t=o.maxPadding;function e(r){const i=Math.max(t[r]-o[r],0);return o[r]+=i,i}o.y+=e("top"),o.x+=e("left"),e("right"),e("bottom")}function AI(o,t){const e=t.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(t[a],e[a])}),s}return r(o?["left","right"]:["top","bottom"])}function xn(o,t,e,r){const i=[];let s,a,n,h,u,l;for(s=0,a=o.length,u=0;s<a;++s){n=o[s],h=n.box,h.update(n.width||t.w,n.height||t.h,AI(n.horizontal,t));const{same:f,other:c}=PI(t,e,n,r);u|=f&&i.length,l=l||c,h.fullSize||i.push(n)}return u&&xn(i,t,e,r)||l}function Wr(o,t,e,r,i){o.top=e,o.left=t,o.right=t+r,o.bottom=e+i,o.width=r,o.height=i}function vv(o,t,e,r){const i=e.padding;let{x:s,y:a}=t;for(const n of o){const h=n.box,u=r[n.stack]||{count:1,placed:0,weight:1},l=n.stackWeight/u.weight||1;if(n.horizontal){const f=t.w*l,c=u.size||h.height;be(u.start)&&(a=u.start),h.fullSize?Wr(h,i.left,a,e.outerWidth-i.right-i.left,c):Wr(h,t.left+u.placed,a,f,c),u.start=a,u.placed+=f,a=h.bottom}else{const f=t.h*l,c=u.size||h.width;be(u.start)&&(s=u.start),h.fullSize?Wr(h,s,i.top,c,e.outerHeight-i.bottom-i.top):Wr(h,s,t.top+u.placed,c,f),u.start=s,u.placed+=f,s=h.right}}t.x=s,t.y=a}ct.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Jt={addBox(o,t){o.boxes||(o.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},o.boxes.push(t)},removeBox(o,t){const e=o.boxes?o.boxes.indexOf(t):-1;e!==-1&&o.boxes.splice(e,1)},configure(o,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(o,t,e,r){if(!o)return;const i=Qt(o.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(e-i.height,0),n=EI(o.boxes),h=n.vertical,u=n.horizontal;xt(o.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const l=h.reduce((p,g)=>g.box.options&&g.box.options.display===!1?p:p+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/l,hBoxMaxHeight:a/2}),c=Object.assign({},i);g0(c,Qt(r));const d=Object.assign({maxPadding:c,w:s,h:a,x:i.left,y:i.top},i),v=CI(h.concat(u),f);xn(n.fullSize,d,f,v),xn(h,d,f,v),xn(u,d,f,v)&&xn(h,d,f,v),MI(d),vv(n.leftAndTop,d,f,v),d.x+=d.w,d.y+=d.h,vv(n.rightAndBottom,d,f,v),o.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},xt(n.chartArea,p=>{const g=p.box;Object.assign(g,o.chartArea),g.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class m0{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,r){}removeEventListener(t,e,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,r,i){return e=Math.max(0,e||t.width),r=r||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):r)}}isAttached(t){return!0}updateConfig(t){}}class RI extends m0{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ia="$chartjs",OI={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pv=o=>o===null||o==="";function LI(o,t){const e=o.style,r=o.getAttribute("height"),i=o.getAttribute("width");if(o[ia]={initial:{height:r,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",pv(i)){const s=Qc(o,"width");s!==void 0&&(o.width=s)}if(pv(r))if(o.style.height==="")o.height=o.width/(t||2);else{const s=Qc(o,"height");s!==void 0&&(o.height=s)}return o}const x0=Pw?{passive:!0}:!1;function FI(o,t,e){o.addEventListener(t,e,x0)}function bI(o,t,e){o.canvas.removeEventListener(t,e,x0)}function DI(o,t){const e=OI[o.type]||o.type,{x:r,y:i}=a0(o,t);return{type:e,chart:t,native:o,x:r!==void 0?r:null,y:i!==void 0?i:null}}function xa(o,t){for(const e of o)if(e===t||e.contains(t))return!0}function wI(o,t,e){const r=o.canvas,i=new MutationObserver(s=>{let a=!1;for(const n of s)a=a||xa(n.addedNodes,r),a=a&&!xa(n.removedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function II(o,t,e){const r=o.canvas,i=new MutationObserver(s=>{let a=!1;for(const n of s)a=a||xa(n.removedNodes,r),a=a&&!xa(n.addedNodes,r);a&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const In=new Map;let gv=0;function y0(){const o=window.devicePixelRatio;o!==gv&&(gv=o,In.forEach((t,e)=>{e.currentDevicePixelRatio!==o&&t()}))}function BI(o,t){In.size||window.addEventListener("resize",y0),In.set(o,t)}function GI(o){In.delete(o),In.size||window.removeEventListener("resize",y0)}function NI(o,t,e){const r=o.canvas,i=r&&Iu(r);if(!i)return;const s=Wm((n,h)=>{const u=i.clientWidth;e(n,h),u<i.clientWidth&&e()},window),a=new ResizeObserver(n=>{const h=n[0],u=h.contentRect.width,l=h.contentRect.height;u===0&&l===0||s(u,l)});return a.observe(i),BI(o,s),a}function Mh(o,t,e){e&&e.disconnect(),t==="resize"&&GI(o)}function zI(o,t,e){const r=o.canvas,i=Wm(s=>{o.ctx!==null&&e(DI(s,o))},o,s=>{const a=s[0];return[a,a.offsetX,a.offsetY]});return FI(r,t,i),i}class VI extends m0{acquireContext(t,e){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(LI(t,e),r):null}releaseContext(t){const e=t.canvas;if(!e[ia])return!1;const r=e[ia].initial;["height","width"].forEach(s=>{const a=r[s];pt(a)?e.removeAttribute(s):e.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{e.style[s]=i[s]}),e.width=e.width,delete e[ia],!0}addEventListener(t,e,r){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),a={attach:wI,detach:II,resize:NI}[e]||zI;i[e]=a(t,e,r)}removeEventListener(t,e){const r=t.$proxies||(t.$proxies={}),i=r[e];if(!i)return;({attach:Mh,detach:Mh,resize:Mh}[e]||bI)(t,e,i),r[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,r,i){return Ew(t,e,r,i)}isAttached(t){const e=Iu(t);return!!(e&&e.isConnected)}}function YI(o){return!r0()||typeof OffscreenCanvas!="undefined"&&o instanceof OffscreenCanvas?RI:VI}class Ve{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}hasValue(){return bn(this.x)&&bn(this.y)}getProps(t,e){const r=this.$animations;if(!e||!r)return this;const i={};return t.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}Ve.defaults={};Ve.defaultRoutes=void 0;const T0={values(o){return Ct(o)?o:""+o},numeric(o,t,e){if(o===0)return"0";const r=this.chart.options.locale;let i,s=o;if(e.length>1){const u=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=WI(o,e)}const a=Me(Math.abs(s)),n=Math.max(Math.min(-1*Math.floor(a),20),0),h={notation:i,minimumFractionDigits:n,maximumFractionDigits:n};return Object.assign(h,this.options.ticks.format),qn(o,r,h)},logarithmic(o,t,e){if(o===0)return"0";const r=o/Math.pow(10,Math.floor(Me(o)));return r===1||r===2||r===5?T0.numeric.call(this,o,t,e):""}};function WI(o,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&o!==Math.floor(o)&&(e=o-Math.floor(o)),e}var ro={formatters:T0};ct.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(o,t)=>t.lineWidth,tickColor:(o,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ro.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});ct.route("scale.ticks","color","","color");ct.route("scale.grid","color","","borderColor");ct.route("scale.grid","borderColor","","borderColor");ct.route("scale.title","color","","color");ct.describe("scale",{_fallback:!1,_scriptable:o=>!o.startsWith("before")&&!o.startsWith("after")&&o!=="callback"&&o!=="parser",_indexable:o=>o!=="borderDash"&&o!=="tickBorderDash"});ct.describe("scales",{_fallback:"scale"});ct.describe("scale.ticks",{_scriptable:o=>o!=="backdropPadding"&&o!=="callback",_indexable:o=>o!=="backdropPadding"});function UI(o,t){const e=o.options.ticks,r=e.maxTicksLimit||XI(o),i=e.major.enabled?$I(t):[],s=i.length,a=i[0],n=i[s-1],h=[];if(s>r)return kI(t,h,i,s/r),h;const u=HI(i,t,r);if(s>0){let l,f;const c=s>1?Math.round((n-a)/(s-1)):null;for(Ur(t,h,u,pt(c)?0:a-c,a),l=0,f=s-1;l<f;l++)Ur(t,h,u,i[l],i[l+1]);return Ur(t,h,u,n,pt(c)?t.length:n+c),h}return Ur(t,h,u),h}function XI(o){const t=o.options.offset,e=o._tickSize(),r=o._length/e+(t?0:1),i=o._maxLength/e;return Math.floor(Math.min(r,i))}function HI(o,t,e){const r=KI(o),i=t.length/e;if(!r)return Math.max(i,1);const s=xD(r);for(let a=0,n=s.length-1;a<n;a++){const h=s[a];if(h>i)return h}return Math.max(i,1)}function $I(o){const t=[];let e,r;for(e=0,r=o.length;e<r;e++)o[e].major&&t.push(e);return t}function kI(o,t,e,r){let i=0,s=e[0],a;for(r=Math.ceil(r),a=0;a<o.length;a++)a===s&&(t.push(o[a]),i++,s=e[i*r])}function Ur(o,t,e,r,i){const s=ht(r,0),a=Math.min(ht(i,o.length),o.length);let n=0,h,u,l;for(e=Math.ceil(e),i&&(h=i-r,e=h/Math.floor(h/e)),l=s;l<0;)n++,l=Math.round(s+n*e);for(u=Math.max(s,0);u<a;u++)u===l&&(t.push(o[u]),n++,l=Math.round(s+n*e))}function KI(o){const t=o.length;let e,r;if(t<2)return!1;for(r=o[0],e=1;e<t;++e)if(o[e]-o[e-1]!==r)return!1;return r}const ZI=o=>o==="left"?"right":o==="right"?"left":o,mv=(o,t,e)=>t==="top"||t==="left"?o[t]+e:o[t]-e;function xv(o,t){const e=[],r=o.length/t,i=o.length;let s=0;for(;s<i;s+=r)e.push(o[Math.floor(s)]);return e}function JI(o,t,e){const r=o.ticks.length,i=Math.min(t,r-1),s=o._startPixel,a=o._endPixel,n=1e-6;let h=o.getPixelForTick(i),u;if(!(e&&(r===1?u=Math.max(h-s,a-h):t===0?u=(o.getPixelForTick(1)-h)/2:u=(h-o.getPixelForTick(i-1))/2,h+=i<t?u:-u,h<s-n||h>a+n)))return h}function QI(o,t){xt(o,e=>{const r=e.gc,i=r.length/2;let s;if(i>t){for(s=0;s<i;++s)delete e.data[r[s]];r.splice(0,i)}})}function cn(o){return o.drawTicks?o.tickLength:0}function yv(o,t){if(!o.display)return 0;const e=Gt(o.font,t),r=Qt(o.padding);return(Ct(o.text)?o.text.length:1)*e.lineHeight+r.height}function jI(o,t){return Wi(o,{scale:t,type:"scale"})}function qI(o,t,e){return Wi(o,{tick:e,index:t,type:"tick"})}function _I(o,t,e){let r=Cu(o);return(e&&t!=="right"||!e&&t==="right")&&(r=ZI(r)),r}function tB(o,t,e,r){const{top:i,left:s,bottom:a,right:n,chart:h}=o,{chartArea:u,scales:l}=h;let f=0,c,d,v;const p=a-i,g=n-s;if(o.isHorizontal()){if(d=kt(r,s,n),dt(e)){const m=Object.keys(e)[0],x=e[m];v=l[m].getPixelForValue(x)+p-t}else e==="center"?v=(u.bottom+u.top)/2+p-t:v=mv(o,e,t);c=n-s}else{if(dt(e)){const m=Object.keys(e)[0],x=e[m];d=l[m].getPixelForValue(x)-g+t}else e==="center"?d=(u.left+u.right)/2-g+t:d=mv(o,e,t);v=kt(r,a,i),f=e==="left"?-Ft:Ft}return{titleX:d,titleY:v,maxWidth:c,rotation:f}}class ds extends Ve{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:r,_suggestedMax:i}=this;return t=Ee(t,Number.POSITIVE_INFINITY),e=Ee(e,Number.NEGATIVE_INFINITY),r=Ee(r,Number.POSITIVE_INFINITY),i=Ee(i,Number.NEGATIVE_INFINITY),{min:Ee(t,r),max:Ee(e,i),minDefined:wt(t),maxDefined:wt(e)}}getMinMax(t){let{min:e,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:e,max:r};const n=this.getMatchingVisibleMetas();for(let h=0,u=n.length;h<u;++h)a=n[h].controller.getMinMax(this,t),i||(e=Math.min(e,a.min)),s||(r=Math.max(r,a.max));return e=s&&e>r?r:e,r=i&&e>r?e:r,{min:Ee(e,Ee(r,e)),max:Ee(r,Ee(e,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){St(this.options.beforeUpdate,[this])}update(t,e,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,n=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=qD(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=n<this.ticks.length;this._convertTicksToLabels(h?xv(this.ticks,n):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=UI(this,this.ticks),this._labelSizes=null),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,r;this.isHorizontal()?(e=this.left,r=this.right):(e=this.top,r=this.bottom,t=!t),this._startPixel=e,this._endPixel=r,this._reversePixels=t,this._length=r-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){St(this.options.afterUpdate,[this])}beforeSetDimensions(){St(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){St(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),St(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){St(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r],s.label=St(e.callback,[s.value,r,t],this)}afterTickToLabelConversion(){St(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){St(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,r=this.ticks.length,i=e.minRotation||0,s=e.maxRotation;let a=i,n,h,u;if(!this._isVisible()||!e.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const l=this._getLabelSizes(),f=l.widest.width,c=l.highest.height,d=Yt(this.chart.width-f,0,this.maxWidth);n=t.offset?this.maxWidth/r:d/(r-1),f+6>n&&(n=d/(r-(t.offset?.5:1)),h=this.maxHeight-cn(t.grid)-e.padding-yv(t.title,this.chart.options.font),u=Math.sqrt(f*f+c*c),a=Pu(Math.min(Math.asin(Yt((l.highest.height+6)/n,-1,1)),Math.asin(Yt(h/u,-1,1))-Math.asin(Yt(c/u,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){St(this.options.afterCalculateLabelRotation,[this])}beforeFit(){St(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),n=this.isHorizontal();if(a){const h=yv(i,e.options.font);if(n?(t.width=this.maxWidth,t.height=cn(s)+h):(t.height=this.maxHeight,t.width=cn(s)+h),r.display&&this.ticks.length){const{first:u,last:l,widest:f,highest:c}=this._getLabelSizes(),d=r.padding*2,v=ze(this.labelRotation),p=Math.cos(v),g=Math.sin(v);if(n){const m=r.mirror?0:g*f.width+p*c.height;t.height=Math.min(this.maxHeight,t.height+m+d)}else{const m=r.mirror?0:p*f.width+g*c.height;t.width=Math.min(this.maxWidth,t.width+m+d)}this._calculatePadding(u,l,g,p)}}this._handleMargins(),n?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,r,i){const{ticks:{align:s,padding:a},position:n}=this.options,h=this.labelRotation!==0,u=n!=="top"&&this.axis==="x";if(this.isHorizontal()){const l=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,d=0;h?u?(c=i*t.width,d=r*e.height):(c=r*t.height,d=i*e.width):s==="start"?d=e.width:s==="end"?c=t.width:(c=t.width/2,d=e.width/2),this.paddingLeft=Math.max((c-l+a)*this.width/(this.width-l),0),this.paddingRight=Math.max((d-f+a)*this.width/(this.width-f),0)}else{let l=e.height/2,f=t.height/2;s==="start"?(l=0,f=t.height):s==="end"&&(l=e.height,f=0),this.paddingTop=l+a,this.paddingBottom=f+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){St(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,r;for(e=0,r=t.length;e<r;e++)pt(t[e].label)&&(t.splice(e,1),r--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let r=this.ticks;e<r.length&&(r=xv(r,e)),this._labelSizes=t=this._computeLabelSizes(r,r.length)}return t}_computeLabelSizes(t,e){const{ctx:r,_longestTextCache:i}=this,s=[],a=[];let n=0,h=0,u,l,f,c,d,v,p,g,m,x,y;for(u=0;u<e;++u){if(c=t[u].label,d=this._resolveTickFontOptions(u),r.font=v=d.string,p=i[v]=i[v]||{data:{},gc:[]},g=d.lineHeight,m=x=0,!pt(c)&&!Ct(c))m=va(r,p.data,p.gc,m,c),x=g;else if(Ct(c))for(l=0,f=c.length;l<f;++l)y=c[l],!pt(y)&&!Ct(y)&&(m=va(r,p.data,p.gc,m,y),x+=g);s.push(m),a.push(x),n=Math.max(m,n),h=Math.max(x,h)}QI(i,e);const T=s.indexOf(n),S=a.indexOf(h),C=E=>({width:s[E]||0,height:a[E]||0});return{first:C(0),last:C(e-1),widest:C(T),highest:C(S),widths:s,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return SD(this._alignToPixels?_i(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const r=e[t];return r.$context||(r.$context=qI(this.getContext(),t,r))}return this.$context||(this.$context=jI(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ze(this.labelRotation),r=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,n=s?s.widest.width+a:0,h=s?s.highest.height+a:0;return this.isHorizontal()?h*r>n*i?n/r:h/i:h*i<n*r?h/r:n/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,r=this.chart,i=this.options,{grid:s,position:a}=i,n=s.offset,h=this.isHorizontal(),l=this.ticks.length+(n?1:0),f=cn(s),c=[],d=s.setContext(this.getContext()),v=d.drawBorder?d.borderWidth:0,p=v/2,g=function(w){return _i(r,w,v)};let m,x,y,T,S,C,E,P,M,R,A,O;if(a==="top")m=g(this.bottom),C=this.bottom-f,P=m-p,R=g(t.top)+p,O=t.bottom;else if(a==="bottom")m=g(this.top),R=t.top,O=g(t.bottom)-p,C=m+p,P=this.top+f;else if(a==="left")m=g(this.right),S=this.right-f,E=m-p,M=g(t.left)+p,A=t.right;else if(a==="right")m=g(this.left),M=t.left,A=g(t.right)-p,S=m+p,E=this.left+f;else if(e==="x"){if(a==="center")m=g((t.top+t.bottom)/2+.5);else if(dt(a)){const w=Object.keys(a)[0],N=a[w];m=g(this.chart.scales[w].getPixelForValue(N))}R=t.top,O=t.bottom,C=m+p,P=C+f}else if(e==="y"){if(a==="center")m=g((t.left+t.right)/2);else if(dt(a)){const w=Object.keys(a)[0],N=a[w];m=g(this.chart.scales[w].getPixelForValue(N))}S=m-p,E=S-f,M=t.left,A=t.right}const F=ht(i.ticks.maxTicksLimit,l),b=Math.max(1,Math.ceil(l/F));for(x=0;x<l;x+=b){const w=s.setContext(this.getContext(x)),N=w.lineWidth,V=w.color,W=s.borderDash||[],U=w.borderDashOffset,D=w.tickWidth,L=w.tickColor,I=w.tickBorderDash||[],B=w.tickBorderDashOffset;y=JI(this,x,n),y!==void 0&&(T=_i(r,y,N),h?S=E=M=A=T:C=P=R=O=T,c.push({tx1:S,ty1:C,tx2:E,ty2:P,x1:M,y1:R,x2:A,y2:O,width:N,color:V,borderDash:W,borderDashOffset:U,tickWidth:D,tickColor:L,tickBorderDash:I,tickBorderDashOffset:B}))}return this._ticksLength=l,this._borderValue=m,c}_computeLabelItems(t){const e=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),n=this.ticks,{align:h,crossAlign:u,padding:l,mirror:f}=s,c=cn(r.grid),d=c+l,v=f?-l:d,p=-ze(this.labelRotation),g=[];let m,x,y,T,S,C,E,P,M,R,A,O,F="middle";if(i==="top")C=this.bottom-v,E=this._getXAxisLabelAlignment();else if(i==="bottom")C=this.top+v,E=this._getXAxisLabelAlignment();else if(i==="left"){const w=this._getYAxisLabelAlignment(c);E=w.textAlign,S=w.x}else if(i==="right"){const w=this._getYAxisLabelAlignment(c);E=w.textAlign,S=w.x}else if(e==="x"){if(i==="center")C=(t.top+t.bottom)/2+d;else if(dt(i)){const w=Object.keys(i)[0],N=i[w];C=this.chart.scales[w].getPixelForValue(N)+d}E=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")S=(t.left+t.right)/2-d;else if(dt(i)){const w=Object.keys(i)[0],N=i[w];S=this.chart.scales[w].getPixelForValue(N)}E=this._getYAxisLabelAlignment(c).textAlign}e==="y"&&(h==="start"?F="top":h==="end"&&(F="bottom"));const b=this._getLabelSizes();for(m=0,x=n.length;m<x;++m){y=n[m],T=y.label;const w=s.setContext(this.getContext(m));P=this.getPixelForTick(m)+s.labelOffset,M=this._resolveTickFontOptions(m),R=M.lineHeight,A=Ct(T)?T.length:1;const N=A/2,V=w.color,W=w.textStrokeColor,U=w.textStrokeWidth;a?(S=P,i==="top"?u==="near"||p!==0?O=-A*R+R/2:u==="center"?O=-b.highest.height/2-N*R+R:O=-b.highest.height+R/2:u==="near"||p!==0?O=R/2:u==="center"?O=b.highest.height/2-N*R:O=b.highest.height-A*R,f&&(O*=-1)):(C=P,O=(1-A)*R/2);let D;if(w.showLabelBackdrop){const L=Qt(w.backdropPadding),I=b.heights[m],B=b.widths[m];let G=C+O-L.top,z=S-L.left;switch(F){case"middle":G-=I/2;break;case"bottom":G-=I;break}switch(E){case"center":z-=B/2;break;case"right":z-=B;break}D={left:z,top:G,width:B+L.width,height:I+L.height,color:w.backdropColor}}g.push({rotation:p,label:T,font:M,color:V,strokeColor:W,strokeWidth:U,textOffset:O,textAlign:E,textBaseline:F,translation:[S,C],backdrop:D})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ze(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"&&(i="right"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),n=t+s,h=a.widest.width;let u,l;return e==="left"?i?(l=this.right+s,r==="near"?u="left":r==="center"?(u="center",l+=h/2):(u="right",l+=h)):(l=this.right-n,r==="near"?u="right":r==="center"?(u="center",l-=h/2):(u="left",l=this.left)):e==="right"?i?(l=this.left+s,r==="near"?u="right":r==="center"?(u="center",l-=h/2):(u="left",l-=h)):(l=this.left+n,r==="near"?u="left":r==="center"?(u="center",l+=h/2):(u="right",l=this.right)):u="right",{textAlign:u,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:r,top:i,width:s,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(r,i,s,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(s=>s.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const n=(h,u,l)=>{!l.width||!l.color||(r.save(),r.lineWidth=l.width,r.strokeStyle=l.color,r.setLineDash(l.borderDash||[]),r.lineDashOffset=l.borderDashOffset,r.beginPath(),r.moveTo(h.x,h.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(e.display)for(s=0,a=i.length;s<a;++s){const h=i[s];e.drawOnChartArea&&n({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),e.drawTicks&&n({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:r}}=this,i=r.setContext(this.getContext()),s=r.drawBorder?i.borderWidth:0;if(!s)return;const a=r.setContext(this.getContext(0)).lineWidth,n=this._borderValue;let h,u,l,f;this.isHorizontal()?(h=_i(t,this.left,s)-s/2,u=_i(t,this.right,a)+a/2,l=f=n):(l=_i(t,this.top,s)-s/2,f=_i(t,this.bottom,a)+a/2,h=u=n),e.save(),e.lineWidth=i.borderWidth,e.strokeStyle=i.borderColor,e.beginPath(),e.moveTo(h,l),e.lineTo(u,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&ja(r,i);const s=this._labelItems||(this._labelItems=this._computeLabelItems(t));let a,n;for(a=0,n=s.length;a<n;++a){const h=s[a],u=h.font,l=h.label;h.backdrop&&(r.fillStyle=h.backdrop.color,r.fillRect(h.backdrop.left,h.backdrop.top,h.backdrop.width,h.backdrop.height));let f=h.textOffset;ls(r,l,0,f,u,h)}i&&qa(r)}drawTitle(){const{ctx:t,options:{position:e,title:r,reverse:i}}=this;if(!r.display)return;const s=Gt(r.font),a=Qt(r.padding),n=r.align;let h=s.lineHeight/2;e==="bottom"||e==="center"||dt(e)?(h+=a.bottom,Ct(r.text)&&(h+=s.lineHeight*(r.text.length-1))):h+=a.top;const{titleX:u,titleY:l,maxWidth:f,rotation:c}=tB(this,h,e,n);ls(t,r.text,0,0,s,{color:r.color,maxWidth:f,rotation:c,textAlign:_I(n,e,i),textBaseline:"middle",translation:[u,l]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,r=ht(t.grid&&t.grid.z,-1);return!this._isVisible()||this.draw!==ds.prototype.draw?[{z:e,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r+1,draw:()=>{this.drawBorder()}},{z:e,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=e.length;s<a;++s){const n=e[s];n[r]===this.id&&(!t||n.type===t)&&i.push(n)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Gt(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Xr{constructor(t,e,r){this.type=t,this.scope=e,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let r;sB(e)&&(r=this.register(e));const i=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,eB(t,a,r),this.override&&ct.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,r=t.id,i=this.scope;r in e&&delete e[r],i&&r in ct[i]&&(delete ct[i][r],this.override&&delete os[r])}}function eB(o,t,e){const r=Fn(Object.create(null),[e?ct.get(e):{},ct.get(t),o.defaults]);ct.set(t,r),o.defaultRoutes&&iB(t,o.defaultRoutes),o.descriptors&&ct.describe(t,o.descriptors)}function iB(o,t){Object.keys(t).forEach(e=>{const r=e.split("."),i=r.pop(),s=[o].concat(r).join("."),a=t[e].split("."),n=a.pop(),h=a.join(".");ct.route(s,i,h,n)})}function sB(o){return"id"in o&&"defaults"in o}class nB{constructor(){this.controllers=new Xr(ei,"datasets",!0),this.elements=new Xr(Ve,"elements"),this.plugins=new Xr(Object,"plugins"),this.scales=new Xr(ds,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,r){[...e].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):xt(i,a=>{const n=r||this._getRegistryForType(a);this._exec(t,n,a)})})}_exec(t,e,r){const i=Eu(t);St(r["before"+i],[],r),e[t](r),St(r["after"+i],[],r)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const r=this._typedRegistries[e];if(r.isForType(t))return r}return this.plugins}_get(t,e,r){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}}var mi=new nB;class rB{constructor(){this._init=[]}notify(t,e,r,i){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),a=this._notify(s,t,e,r);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,r,i){i=i||{};for(const s of t){const a=s.plugin,n=a[r],h=[e,i,s.options];if(St(n,h,a)===!1&&i.cancelable)return!1}return!0}invalidate(){pt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const r=t&&t.config,i=ht(r.options&&r.options.plugins,{}),s=aB(r);return i===!1&&!e?[]:hB(t,s,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(n=>!a.some(h=>n.plugin.id===h.plugin.id));this._notify(i(e,r),t,"stop"),this._notify(i(r,e),t,"start")}}function aB(o){const t=[],e=Object.keys(mi.plugins.items);for(let i=0;i<e.length;i++)t.push(mi.getPlugin(e[i]));const r=o.plugins||[];for(let i=0;i<r.length;i++){const s=r[i];t.indexOf(s)===-1&&t.push(s)}return t}function oB(o,t){return!t&&o===!1?null:o===!0?{}:o}function hB(o,t,e,r){const i=[],s=o.getContext();for(let a=0;a<t.length;a++){const n=t[a],h=n.id,u=oB(e[h],r);u!==null&&i.push({plugin:n,options:lB(o.config,n,u,s)})}return i}function lB(o,t,e,r){const i=o.pluginScopeKeys(t),s=o.getOptionScopes(e,i);return o.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function tl(o,t){const e=ct.datasets[o]||{};return((t.datasets||{})[o]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function uB(o,t){let e=o;return o==="_index_"?e=t:o==="_value_"&&(e=t==="x"?"y":"x"),e}function fB(o,t){return o===t?"_index_":"_value_"}function dB(o){if(o==="top"||o==="bottom")return"x";if(o==="left"||o==="right")return"y"}function el(o,t){return o==="x"||o==="y"?o:t.axis||dB(t.position)||o.charAt(0).toLowerCase()}function cB(o,t){const e=os[o.type]||{scales:{}},r=t.scales||{},i=tl(o.type,t),s=Object.create(null),a=Object.create(null);return Object.keys(r).forEach(n=>{const h=r[n];if(!dt(h))return console.error(`Invalid scale configuration for scale: ${n}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${n}`);const u=el(n,h),l=fB(u,i),f=e.scales||{};s[u]=s[u]||n,a[n]=Cn(Object.create(null),[{axis:u},h,f[u],f[l]])}),o.data.datasets.forEach(n=>{const h=n.type||o.type,u=n.indexAxis||tl(h,t),f=(os[h]||{}).scales||{};Object.keys(f).forEach(c=>{const d=uB(c,u),v=n[d+"AxisID"]||s[d]||d;a[v]=a[v]||Object.create(null),Cn(a[v],[{axis:d},r[v],f[c]])})}),Object.keys(a).forEach(n=>{const h=a[n];Cn(h,[ct.scales[h.type],ct.scale])}),a}function S0(o){const t=o.options||(o.options={});t.plugins=ht(t.plugins,{}),t.scales=cB(o,t)}function C0(o){return o=o||{},o.datasets=o.datasets||[],o.labels=o.labels||[],o}function vB(o){return o=o||{},o.data=C0(o.data),S0(o),o}const Tv=new Map,E0=new Set;function Hr(o,t){let e=Tv.get(o);return e||(e=t(),Tv.set(o,e),E0.add(e)),e}const vn=(o,t,e)=>{const r=as(t,e);r!==void 0&&o.add(r)};class pB{constructor(t){this._config=vB(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=C0(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),S0(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Hr(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Hr(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Hr(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,r=this.type;return Hr(`${r}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const r=this._scopeCache;let i=r.get(t);return(!i||e)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,e,r){const{options:i,type:s}=this,a=this._cachedScopes(t,r),n=a.get(e);if(n)return n;const h=new Set;e.forEach(l=>{t&&(h.add(t),l.forEach(f=>vn(h,t,f))),l.forEach(f=>vn(h,i,f)),l.forEach(f=>vn(h,os[s]||{},f)),l.forEach(f=>vn(h,ct,f)),l.forEach(f=>vn(h,qh,f))});const u=Array.from(h);return u.length===0&&u.push(Object.create(null)),E0.has(e)&&a.set(e,u),u}chartOptionScopes(){const{options:t,type:e}=this;return[t,os[e]||{},ct.datasets[e]||{},{type:e},ct,qh]}resolveNamedOptions(t,e,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:n}=Sv(this._resolverCache,t,i);let h=a;if(mB(a,e)){s.$shared=!1,r=Bi(r)?r():r;const u=this.createResolver(t,r,n);h=Ns(a,r,u)}for(const u of e)s[u]=h[u];return s}createResolver(t,e,r=[""],i){const{resolver:s}=Sv(this._resolverCache,t,r);return dt(e)?Ns(s,e,void 0,i):s}}function Sv(o,t,e){let r=o.get(t);r||(r=new Map,o.set(t,r));const i=e.join();let s=r.get(i);return s||(s={resolver:bu(t,e),subPrefixes:e.filter(n=>!n.toLowerCase().includes("hover"))},r.set(i,s)),s}const gB=o=>dt(o)&&Object.getOwnPropertyNames(o).reduce((t,e)=>t||Bi(o[e]),!1);function mB(o,t){const{isScriptable:e,isIndexable:r}=t0(o);for(const i of t){const s=e(i),a=r(i),n=(a||s)&&o[i];if(s&&(Bi(n)||gB(n))||a&&Ct(n))return!0}return!1}var xB="3.7.1";const yB=["top","bottom","left","right","chartArea"];function Cv(o,t){return o==="top"||o==="bottom"||yB.indexOf(o)===-1&&t==="x"}function Ev(o,t){return function(e,r){return e[o]===r[o]?e[t]-r[t]:e[o]-r[o]}}function Pv(o){const t=o.chart,e=t.options.animation;t.notifyPlugins("afterRender"),St(e&&e.onComplete,[o],t)}function TB(o){const t=o.chart,e=t.options.animation;St(e&&e.onProgress,[o],t)}function P0(o){return r0()&&typeof o=="string"?o=document.getElementById(o):o&&o.length&&(o=o[0]),o&&o.canvas&&(o=o.canvas),o}const ya={},M0=o=>{const t=P0(o);return Object.values(ya).filter(e=>e.canvas===t).pop()};function SB(o,t,e){const r=Object.keys(o);for(const i of r){const s=+i;if(s>=t){const a=o[i];delete o[i],(e>0||s>t)&&(o[s+e]=a)}}}function CB(o,t,e,r){return!e||o.type==="mouseout"?null:r?t:o}class Bn{constructor(t,e){const r=this.config=new pB(e),i=P0(t),s=M0(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||YI(i)),this.platform.updateConfig(r);const n=this.platform.acquireContext(i,a.aspectRatio),h=n&&n.canvas,u=h&&h.height,l=h&&h.width;if(this.id=lD(),this.ctx=n,this.canvas=h,this.width=l,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new rB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=oD(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],ya[this.id]=this,!n||!h){console.error("Failed to create chart: can't acquire context from the given item");return}ci.listen(this,"complete",Pv),ci.listen(this,"progress",TB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:r,height:i,_aspectRatio:s}=this;return pt(t)?e&&s?s:i?r/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Jc(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return $c(this.canvas,this.ctx),this}stop(){return ci.stop(this),this}resize(t,e){ci.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,t,e,s),n=r.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Jc(this,n,!0)&&(this.notifyPlugins("resize",{size:a}),St(r.onResize,[this,a],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};xt(e,(r,i)=>{r.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,r=this.scales,i=Object.keys(r).reduce((a,n)=>(a[n]=!1,a),{});let s=[];e&&(s=s.concat(Object.keys(e).map(a=>{const n=e[a],h=el(a,n),u=h==="r",l=h==="x";return{options:n,dposition:u?"chartArea":l?"bottom":"left",dtype:u?"radialLinear":l?"category":"linear"}}))),xt(s,a=>{const n=a.options,h=n.id,u=el(h,n),l=ht(n.type,a.dtype);(n.position===void 0||Cv(n.position,u)!==Cv(a.dposition))&&(n.position=a.dposition),i[h]=!0;let f=null;if(h in r&&r[h].type===l)f=r[h];else{const c=mi.getScale(l);f=new c({id:h,type:l,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(n,t)}),xt(i,(a,n)=>{a||delete r[n]}),xt(r,a=>{Jt.configure(this,a,a.options),Jt.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,r=t.length;if(t.sort((i,s)=>i.index-s.index),r>e){for(let i=e;i<r;++i)this._destroyDatasetMeta(i);t.splice(e,r-e)}this._sortedMetasets=t.slice(0).sort(Ev("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((r,i)=>{e.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=e.length;r<i;r++){const s=e[r];let a=this.getDatasetMeta(r);const n=s.type||this.config.type;if(a.type&&a.type!==n&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=n,a.indexAxis=s.indexAxis||tl(n,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const h=mi.getController(n),{datasetElementType:u,dataElementType:l}=ct.datasets[n];Object.assign(h.prototype,{dataElementType:mi.getElement(l),datasetElementType:u&&mi.getElement(u)}),a.controller=new h(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){xt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const r=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,l=this.data.datasets.length;u<l;u++){const{controller:f}=this.getDatasetMeta(u),c=!i&&s.indexOf(f)===-1;f.buildOrUpdateElements(c),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),i||xt(s,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ev("z","_idx"));const{_active:n,_lastEvent:h}=this;h?this._eventHandler(h,!0):n.length&&this._updateHoverStyles(n,n,!0),this.render()}_updateScales(){xt(this.scales,t=>{Jt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!Ic(e,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of e){const a=r==="_removeElements"?-s:s;SB(t,i,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,r=s=>new Set(t.filter(a=>a[0]===s).map((a,n)=>n+","+a.splice(1).join(","))),i=r(0);for(let s=1;s<e;s++)if(!Ic(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Jt.update(this,this.width,this.height,t);const e=this.chartArea,r=e.width<=0||e.height<=0;this._layers=[],xt(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,r=this.data.datasets.length;e<r;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,r=this.data.datasets.length;e<r;++e)this._updateDataset(e,Bi(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const r=this.getDatasetMeta(t),i={meta:r,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ci.has(this)?this.attached&&!ci.running(this)&&ci.start(this):(this.draw(),Pv({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,r=[];let i,s;for(i=0,s=e.length;i<s;++i){const a=e[i];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,r=t._clip,i=!r.disabled,s=this.chartArea,a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(i&&ja(e,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),t.controller.draw(),i&&qa(e),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}getElementsAtEventForMode(t,e,r,i){const s=yI.modes[e];return typeof s=="function"?s(this,t,r,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],r=this._metasets;let i=r.filter(s=>s&&s._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Wi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!e.hidden}setDatasetVisibility(t,e){const r=this.getDatasetMeta(t);r.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,r){const i=r?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,i);be(e)?(s.data[e].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(s,{visible:r}),this.update(n=>n.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),ci.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),$c(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete ya[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,r=(s,a)=>{e.addEventListener(this,s,a),t[s]=a},i=(s,a,n)=>{s.offsetX=a,s.offsetY=n,this._eventHandler(s)};xt(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,r=(h,u)=>{e.addEventListener(this,h,u),t[h]=u},i=(h,u)=>{t[h]&&(e.removeEventListener(this,h,u),delete t[h])},s=(h,u)=>{this.canvas&&this.resize(h,u)};let a;const n=()=>{i("attach",n),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",n)},e.isAttached(this.canvas)?n():a()}unbindEvents(){xt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},xt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,r){const i=r?"set":"remove";let s,a,n,h;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),n=0,h=t.length;n<h;++n){a=t[n];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],r=t.map(({datasetIndex:s,index:a})=>{const n=this.getDatasetMeta(s);if(!n)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:n.data[a],index:a}});!ua(r,e)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,e))}notifyPlugins(t,e,r){return this._plugins.notify(this,t,e,r)}_updateHoverStyles(t,e,r){const i=this.options.hover,s=(h,u)=>h.filter(l=>!u.some(f=>l.datasetIndex===f.datasetIndex&&l.index===f.index)),a=s(e,t),n=r?t:s(t,e);a.length&&this.updateHoverStyle(a,i.mode,!1),n.length&&i.mode&&this.updateHoverStyle(n,i.mode,!0)}_eventHandler(t,e){const r={event:t,replay:e,cancelable:!0,inChartArea:hs(t,this.chartArea,this._minPadding)},i=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(t,e,r){const{_active:i=[],options:s}=this,a=e,n=this._getActiveElements(t,i,r,a),h=pD(t),u=CB(t,this._lastEvent,r,h);r&&(this._lastEvent=null,St(s.onHover,[t,n,this],this),h&&St(s.onClick,[t,n,this],this));const l=!ua(n,i);return(l||e)&&(this._active=n,this._updateHoverStyles(n,i,e)),this._lastEvent=u,l}_getActiveElements(t,e,r,i){if(t.type==="mouseout")return[];if(!r)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}}const Mv=()=>xt(Bn.instances,o=>o._plugins.invalidate()),Oi=!0;Object.defineProperties(Bn,{defaults:{enumerable:Oi,value:ct},instances:{enumerable:Oi,value:ya},overrides:{enumerable:Oi,value:os},registry:{enumerable:Oi,value:mi},version:{enumerable:Oi,value:xB},getChart:{enumerable:Oi,value:M0},register:{enumerable:Oi,value:(...o)=>{mi.add(...o),Mv()}},unregister:{enumerable:Oi,value:(...o)=>{mi.remove(...o),Mv()}}});function A0(o,t,e){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:n,innerRadius:h}=t;let u=i/n;o.beginPath(),o.arc(s,a,n,r-u,e+u),h>i?(u=i/h,o.arc(s,a,h,e+u,r-u,!0)):o.arc(s,a,i,e+Ft,r-Ft),o.closePath(),o.clip()}function EB(o){return Lu(o,["outerStart","outerEnd","innerStart","innerEnd"])}function PB(o,t,e,r){const i=EB(o.options.borderRadius),s=(e-t)/2,a=Math.min(s,r*t/2),n=h=>{const u=(e-Math.min(s,h))*r/2;return Yt(h,0,Math.min(s,u))};return{outerStart:n(i.outerStart),outerEnd:n(i.outerEnd),innerStart:Yt(i.innerStart,0,a),innerEnd:Yt(i.innerEnd,0,a)}}function Os(o,t,e,r){return{x:e+o*Math.cos(t),y:r+o*Math.sin(t)}}function il(o,t,e,r,i){const{x:s,y:a,startAngle:n,pixelMargin:h,innerRadius:u}=t,l=Math.max(t.outerRadius+r+e-h,0),f=u>0?u+r+e+h:0;let c=0;const d=i-n;if(r){const N=u>0?u-r:0,V=l>0?l-r:0,W=(N+V)/2,U=W!==0?d*W/(W+r):d;c=(d-U)/2}const v=Math.max(.001,d*l-e/Rt)/l,p=(d-v)/2,g=n+p+c,m=i-p-c,{outerStart:x,outerEnd:y,innerStart:T,innerEnd:S}=PB(t,f,l,m-g),C=l-x,E=l-y,P=g+x/C,M=m-y/E,R=f+T,A=f+S,O=g+T/R,F=m-S/A;if(o.beginPath(),o.arc(s,a,l,P,M),y>0){const N=Os(E,M,s,a);o.arc(N.x,N.y,y,M,m+Ft)}const b=Os(A,m,s,a);if(o.lineTo(b.x,b.y),S>0){const N=Os(A,F,s,a);o.arc(N.x,N.y,S,m+Ft,F+Math.PI)}if(o.arc(s,a,f,m-S/f,g+T/f,!0),T>0){const N=Os(R,O,s,a);o.arc(N.x,N.y,T,O+Math.PI,g-Ft)}const w=Os(C,g,s,a);if(o.lineTo(w.x,w.y),x>0){const N=Os(C,P,s,a);o.arc(N.x,N.y,x,g-Ft,P)}o.closePath()}function MB(o,t,e,r){const{fullCircles:i,startAngle:s,circumference:a}=t;let n=t.endAngle;if(i){il(o,t,e,r,s+Tt);for(let h=0;h<i;++h)o.fill();isNaN(a)||(n=s+a%Tt,a%Tt===0&&(n+=Tt))}return il(o,t,e,r,n),o.fill(),n}function AB(o,t,e){const{x:r,y:i,startAngle:s,pixelMargin:a,fullCircles:n}=t,h=Math.max(t.outerRadius-a,0),u=t.innerRadius+a;let l;for(e&&A0(o,t,s+Tt),o.beginPath(),o.arc(r,i,u,s+Tt,s,!0),l=0;l<n;++l)o.stroke();for(o.beginPath(),o.arc(r,i,h,s,s+Tt),l=0;l<n;++l)o.stroke()}function RB(o,t,e,r,i){const{options:s}=t,{borderWidth:a,borderJoinStyle:n}=s,h=s.borderAlign==="inner";!a||(h?(o.lineWidth=a*2,o.lineJoin=n||"round"):(o.lineWidth=a,o.lineJoin=n||"bevel"),t.fullCircles&&AB(o,t,h),h&&A0(o,t,i),il(o,t,e,r,i),o.stroke())}class ao extends Ve{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,r){const i=this.getProps(["x","y"],r),{angle:s,distance:a}=$m(i,{x:t,y:e}),{startAngle:n,endAngle:h,innerRadius:u,outerRadius:l,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),c=this.options.spacing/2,v=ht(f,h-n)>=Tt||Dn(s,n,h),p=pi(a,u+c,l+c);return v&&p}getCenterPoint(t){const{x:e,y:r,startAngle:i,endAngle:s,innerRadius:a,outerRadius:n}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:h,spacing:u}=this.options,l=(i+s)/2,f=(a+n+u+h)/2;return{x:e+Math.cos(l)*f,y:r+Math.sin(l)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:r}=this,i=(e.offset||0)/2,s=(e.spacing||0)/2;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=r>Tt?Math.floor(r/Tt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=0;if(i){a=i/2;const h=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(h)*a,Math.sin(h)*a),this.circumference>=Rt&&(a=i)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const n=MB(t,this,a,s);RB(t,this,a,s,n),t.restore()}}ao.id="arc";ao.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0};ao.defaultRoutes={backgroundColor:"backgroundColor"};function R0(o,t,e=t){o.lineCap=ht(e.borderCapStyle,t.borderCapStyle),o.setLineDash(ht(e.borderDash,t.borderDash)),o.lineDashOffset=ht(e.borderDashOffset,t.borderDashOffset),o.lineJoin=ht(e.borderJoinStyle,t.borderJoinStyle),o.lineWidth=ht(e.borderWidth,t.borderWidth),o.strokeStyle=ht(e.borderColor,t.borderColor)}function OB(o,t,e){o.lineTo(e.x,e.y)}function LB(o){return o.stepped?HD:o.tension||o.cubicInterpolationMode==="monotone"?$D:OB}function O0(o,t,e={}){const r=o.length,{start:i=0,end:s=r-1}=e,{start:a,end:n}=t,h=Math.max(i,a),u=Math.min(s,n),l=i<a&&s<a||i>n&&s>n;return{count:r,start:h,loop:t.loop,ilen:u<h&&!l?r+u-h:u-h}}function FB(o,t,e,r){const{points:i,options:s}=t,{count:a,start:n,loop:h,ilen:u}=O0(i,e,r),l=LB(s);let{move:f=!0,reverse:c}=r||{},d,v,p;for(d=0;d<=u;++d)v=i[(n+(c?u-d:d))%a],!v.skip&&(f?(o.moveTo(v.x,v.y),f=!1):l(o,p,v,c,s.stepped),p=v);return h&&(v=i[(n+(c?u:0))%a],l(o,p,v,c,s.stepped)),!!h}function bB(o,t,e,r){const i=t.points,{count:s,start:a,ilen:n}=O0(i,e,r),{move:h=!0,reverse:u}=r||{};let l=0,f=0,c,d,v,p,g,m;const x=T=>(a+(u?n-T:T))%s,y=()=>{p!==g&&(o.lineTo(l,g),o.lineTo(l,p),o.lineTo(l,m))};for(h&&(d=i[x(0)],o.moveTo(d.x,d.y)),c=0;c<=n;++c){if(d=i[x(c)],d.skip)continue;const T=d.x,S=d.y,C=T|0;C===v?(S<p?p=S:S>g&&(g=S),l=(f*l+T)/++f):(y(),o.lineTo(T,S),v=C,f=0,p=g=S),m=S}y()}function sl(o){const t=o.options,e=t.borderDash&&t.borderDash.length;return!o._decimated&&!o._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?bB:FB}function DB(o){return o.stepped?Mw:o.tension||o.cubicInterpolationMode==="monotone"?Aw:is}function wB(o,t,e,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,r)&&i.closePath()),R0(o,t.options),o.stroke(i)}function IB(o,t,e,r){const{segments:i,options:s}=t,a=sl(t);for(const n of i)R0(o,s,n.style),o.beginPath(),a(o,t,n,{start:e,end:e+r-1})&&o.closePath(),o.stroke()}const BB=typeof Path2D=="function";function GB(o,t,e,r){BB&&!t.options.segment?wB(o,t,e,r):IB(o,t,e,r)}class Ui extends Ve{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;mw(this._points,r,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ww(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,r=t.length;return r&&e[t[r-1].end]}interpolate(t,e){const r=this.options,i=t[e],s=this.points,a=f0(this,{property:e,start:i,end:i});if(!a.length)return;const n=[],h=DB(r);let u,l;for(u=0,l=a.length;u<l;++u){const{start:f,end:c}=a[u],d=s[f],v=s[c];if(d===v){n.push(d);continue}const p=Math.abs((i-d[e])/(v[e]-d[e])),g=h(d,v,p,r.stepped);g[e]=t[e],n.push(g)}return n.length===1?n[0]:n}pathSegment(t,e,r){return sl(this)(t,this,e,r)}path(t,e,r){const i=this.segments,s=sl(this);let a=this._loop;e=e||0,r=r||this.points.length-e;for(const n of i)a&=s(t,this,n,{start:e,end:e+r-1});return!!a}draw(t,e,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),GB(t,this,r,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ui.id="line";Ui.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};Ui.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};Ui.descriptors={_scriptable:!0,_indexable:o=>o!=="borderDash"&&o!=="fill"};function Av(o,t,e,r){const i=o.options,{[e]:s}=o.getProps([e],r);return Math.abs(t-s)<i.radius+i.hitRadius}class oo extends Ve{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,r){const i=this.options,{x:s,y:a}=this.getProps(["x","y"],r);return Math.pow(t-s,2)+Math.pow(e-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return Av(this,t,"x",e)}inYRange(t,e){return Av(this,t,"y",e)}getCenterPoint(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const r=e&&t.borderWidth||0;return(e+r)*2}draw(t,e){const r=this.options;this.skip||r.radius<.1||!hs(this,e,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,pa(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}oo.id="point";oo.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};oo.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function L0(o,t){const{x:e,y:r,base:i,width:s,height:a}=o.getProps(["x","y","base","width","height"],t);let n,h,u,l,f;return o.horizontal?(f=a/2,n=Math.min(e,i),h=Math.max(e,i),u=r-f,l=r+f):(f=s/2,n=e-f,h=e+f,u=Math.min(r,i),l=Math.max(r,i)),{left:n,top:u,right:h,bottom:l}}function Di(o,t,e,r){return o?0:Yt(t,e,r)}function NB(o,t,e){const r=o.options.borderWidth,i=o.borderSkipped,s=jm(r);return{t:Di(i.top,s.top,0,e),r:Di(i.right,s.right,0,t),b:Di(i.bottom,s.bottom,0,e),l:Di(i.left,s.left,0,t)}}function zB(o,t,e){const{enableBorderRadius:r}=o.getProps(["enableBorderRadius"]),i=o.options.borderRadius,s=Bs(i),a=Math.min(t,e),n=o.borderSkipped,h=r||dt(i);return{topLeft:Di(!h||n.top||n.left,s.topLeft,0,a),topRight:Di(!h||n.top||n.right,s.topRight,0,a),bottomLeft:Di(!h||n.bottom||n.left,s.bottomLeft,0,a),bottomRight:Di(!h||n.bottom||n.right,s.bottomRight,0,a)}}function VB(o){const t=L0(o),e=t.right-t.left,r=t.bottom-t.top,i=NB(o,e/2,r/2),s=zB(o,e/2,r/2);return{outer:{x:t.left,y:t.top,w:e,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Ah(o,t,e,r){const i=t===null,s=e===null,n=o&&!(i&&s)&&L0(o,r);return n&&(i||pi(t,n.left,n.right))&&(s||pi(e,n.top,n.bottom))}function YB(o){return o.topLeft||o.topRight||o.bottomLeft||o.bottomRight}function WB(o,t){o.rect(t.x,t.y,t.w,t.h)}function Rh(o,t,e={}){const r=o.x!==e.x?-t:0,i=o.y!==e.y?-t:0,s=(o.x+o.w!==e.x+e.w?t:0)-r,a=(o.y+o.h!==e.y+e.h?t:0)-i;return{x:o.x+r,y:o.y+i,w:o.w+s,h:o.h+a,radius:o.radius}}class ho extends Ve{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:a}=VB(this),n=YB(a.radius)?ga:WB;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),n(t,Rh(a,e,s)),t.clip(),n(t,Rh(s,-e,a)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),n(t,Rh(s,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,r){return Ah(this,t,e,r)}inXRange(t,e){return Ah(this,t,null,e)}inYRange(t,e){return Ah(this,null,t,e)}getCenterPoint(t){const{x:e,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+i)/2:e,y:s?r:(r+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ho.id="bar";ho.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};ho.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var UB=Object.freeze({__proto__:null,ArcElement:ao,LineElement:Ui,PointElement:oo,BarElement:ho});function XB(o,t,e,r,i){const s=i.samples||r;if(s>=e)return o.slice(t,t+e);const a=[],n=(e-2)/(s-2);let h=0;const u=t+e-1;let l=t,f,c,d,v,p;for(a[h++]=o[l],f=0;f<s-2;f++){let g=0,m=0,x;const y=Math.floor((f+1)*n)+1+t,T=Math.min(Math.floor((f+2)*n)+1,e)+t,S=T-y;for(x=y;x<T;x++)g+=o[x].x,m+=o[x].y;g/=S,m/=S;const C=Math.floor(f*n)+1+t,E=Math.min(Math.floor((f+1)*n)+1,e)+t,{x:P,y:M}=o[l];for(d=v=-1,x=C;x<E;x++)v=.5*Math.abs((P-g)*(o[x].y-M)-(P-o[x].x)*(m-M)),v>d&&(d=v,c=o[x],p=x);a[h++]=c,l=p}return a[h++]=o[u],a}function HB(o,t,e,r){let i=0,s=0,a,n,h,u,l,f,c,d,v,p;const g=[],m=t+e-1,x=o[t].x,T=o[m].x-x;for(a=t;a<t+e;++a){n=o[a],h=(n.x-x)/T*r,u=n.y;const S=h|0;if(S===l)u<v?(v=u,f=a):u>p&&(p=u,c=a),i=(s*i+n.x)/++s;else{const C=a-1;if(!pt(f)&&!pt(c)){const E=Math.min(f,c),P=Math.max(f,c);E!==d&&E!==C&&g.push(ir(hi({},o[E]),{x:i})),P!==d&&P!==C&&g.push(ir(hi({},o[P]),{x:i}))}a>0&&C!==d&&g.push(o[C]),g.push(n),l=S,s=0,v=p=u,f=c=d=a}}return g}function F0(o){if(o._decimated){const t=o._data;delete o._decimated,delete o._data,Object.defineProperty(o,"data",{value:t})}}function Rv(o){o.data.datasets.forEach(t=>{F0(t)})}function $B(o,t){const e=t.length;let r=0,i;const{iScale:s}=o,{min:a,max:n,minDefined:h,maxDefined:u}=s.getUserBounds();return h&&(r=Yt(gi(t,s.axis,a).lo,0,e-1)),u?i=Yt(gi(t,s.axis,n).hi+1,r,e)-r:i=e-r,{start:r,count:i}}var kB={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(o,t,e)=>{if(!e.enabled){Rv(o);return}const r=o.width;o.data.datasets.forEach((i,s)=>{const{_data:a,indexAxis:n}=i,h=o.getDatasetMeta(s),u=a||i.data;if(gn([n,o.options.indexAxis])==="y"||h.type!=="line")return;const l=o.scales[h.xAxisID];if(l.type!=="linear"&&l.type!=="time"||o.options.parsing)return;let{start:f,count:c}=$B(h,u);const d=e.threshold||4*r;if(c<=d){F0(i);return}pt(a)&&(i._data=u,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let v;switch(e.algorithm){case"lttb":v=XB(u,f,c,r,e);break;case"min-max":v=HB(u,f,c,r);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}i._decimated=v})},destroy(o){Rv(o)}};function KB(o,t){const e=o.getDatasetMeta(t);return e&&o.isDatasetVisible(t)?e.dataset:null}function ZB(o){const t=o.options,e=t.fill;let r=ht(e&&e.target,e);return r===void 0&&(r=!!t.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function JB(o,t,e){const r=ZB(o);if(dt(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return wt(i)&&Math.floor(i)===i?((r[0]==="-"||r[0]==="+")&&(i=t+i),i===t||i<0||i>=e?!1:i):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function QB(o){const{scale:t={},fill:e}=o;let r=null,i;return e==="start"?r=t.bottom:e==="end"?r=t.top:dt(e)?r=t.getPixelForValue(e.value):t.getBasePixel&&(r=t.getBasePixel()),wt(r)?(i=t.isHorizontal(),{x:i?r:null,y:i?null:r}):null}class b0{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,r){const{x:i,y:s,radius:a}=this;return e=e||{start:0,end:Tt},t.arc(i,s,a,e.end,e.start,!0),!r.bounds}interpolate(t){const{x:e,y:r,radius:i}=this,s=t.angle;return{x:e+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function jB(o){const{scale:t,fill:e}=o,r=t.options,i=t.getLabels().length,s=[],a=r.reverse?t.max:t.min,n=r.reverse?t.min:t.max;let h,u,l;if(e==="start"?l=a:e==="end"?l=n:dt(e)?l=e.value:l=t.getBaseValue(),r.grid.circular)return u=t.getPointPositionForValue(0,a),new b0({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(l)});for(h=0;h<i;++h)s.push(t.getPointPositionForValue(h,l));return s}function qB(o){return(o.scale||{}).getPointPositionForValue?jB(o):QB(o)}function Nu(o,t,e){for(;t>o;t--){const r=e[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function _B(o,t){const{x:e=null,y:r=null}=o||{},i=t.points,s=[];return t.segments.forEach(({start:a,end:n})=>{n=Nu(a,n,i);const h=i[a],u=i[n];r!==null?(s.push({x:h.x,y:r}),s.push({x:u.x,y:r})):e!==null&&(s.push({x:e,y:h.y}),s.push({x:e,y:u.y}))}),s}function tG(o){const{scale:t,index:e,line:r}=o,i=[],s=r.segments,a=r.points,n=eG(t,e);n.push(D0({x:null,y:t.bottom},r));for(let h=0;h<s.length;h++){const u=s[h];for(let l=u.start;l<=u.end;l++)iG(i,a[l],n)}return new Ui({points:i,options:{}})}function eG(o,t){const e=[],r=o.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function iG(o,t,e){const r=[];for(let i=0;i<e.length;i++){const s=e[i],{first:a,last:n,point:h}=sG(s,t,"x");if(!(!h||a&&n)){if(a)r.unshift(h);else if(o.push(h),!n)break}}o.push(...r)}function sG(o,t,e){const r=o.interpolate(t,e);if(!r)return{};const i=r[e],s=o.segments,a=o.points;let n=!1,h=!1;for(let u=0;u<s.length;u++){const l=s[u],f=a[l.start][e],c=a[l.end][e];if(pi(i,f,c)){n=i===f,h=i===c;break}}return{first:n,last:h,point:r}}function nG(o){const{chart:t,fill:e,line:r}=o;if(wt(e))return KB(t,e);if(e==="stack")return tG(o);if(e==="shape")return!0;const i=qB(o);return i instanceof b0?i:D0(i,r)}function D0(o,t){let e=[],r=!1;return Ct(o)?(r=!0,e=o):e=_B(o,t),e.length?new Ui({points:e,options:{tension:0},_loop:r,_fullLoop:r}):null}function rG(o,t,e){let i=o[t].fill;const s=[t];let a;if(!e)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!wt(i))return i;if(a=o[i],!a)return!1;if(a.visible)return i;s.push(i),i=a.fill}return!1}function Ov(o,t,e){const{segments:r,points:i}=t;let s=!0,a=!1;o.beginPath();for(const n of r){const{start:h,end:u}=n,l=i[h],f=i[Nu(h,u,i)];s?(o.moveTo(l.x,l.y),s=!1):(o.lineTo(l.x,e),o.lineTo(l.x,l.y)),a=!!t.pathSegment(o,n,{move:a}),a?o.closePath():o.lineTo(f.x,e)}o.lineTo(t.first().x,e),o.closePath(),o.clip()}function nl(o,t,e,r){if(r)return;let i=t[o],s=e[o];return o==="angle"&&(i=ce(i),s=ce(s)),{property:o,start:i,end:s}}function Lv(o,t,e,r){return o&&t?r(o[e],t[e]):o?o[e]:t?t[e]:0}function aG(o,t,e){const r=o.segments,i=o.points,s=t.points,a=[];for(const n of r){let{start:h,end:u}=n;u=Nu(h,u,i);const l=nl(e,i[h],i[u],n.loop);if(!t.segments){a.push({source:n,target:l,start:i[h],end:i[u]});continue}const f=f0(t,l);for(const c of f){const d=nl(e,s[c.start],s[c.end],c.loop),v=u0(n,i,d);for(const p of v)a.push({source:p,target:c,start:{[e]:Lv(l,d,"start",Math.max)},end:{[e]:Lv(l,d,"end",Math.min)}})}}return a}function oG(o,t,e){const{top:r,bottom:i}=t.chart.chartArea,{property:s,start:a,end:n}=e||{};s==="x"&&(o.beginPath(),o.rect(a,r,n-a,i-r),o.clip())}function Fv(o,t,e,r){const i=t.interpolate(e,r);i&&o.lineTo(i.x,i.y)}function bv(o,t){const{line:e,target:r,property:i,color:s,scale:a}=t,n=aG(e,r,i);for(const{source:h,target:u,start:l,end:f}of n){const{style:{backgroundColor:c=s}={}}=h,d=r!==!0;o.save(),o.fillStyle=c,oG(o,a,d&&nl(i,l,f)),o.beginPath();const v=!!e.pathSegment(o,h);let p;if(d){v?o.closePath():Fv(o,r,f,i);const g=!!r.pathSegment(o,u,{move:v,reverse:!0});p=v&&g,p||Fv(o,r,l,i)}o.closePath(),o.fill(p?"evenodd":"nonzero"),o.restore()}}function hG(o,t){const{line:e,target:r,above:i,below:s,area:a,scale:n}=t,h=e._loop?"angle":t.axis;o.save(),h==="x"&&s!==i&&(Ov(o,r,a.top),bv(o,{line:e,target:r,color:i,scale:n,property:h}),o.restore(),o.save(),Ov(o,r,a.bottom)),bv(o,{line:e,target:r,color:s,scale:n,property:h}),o.restore()}function Oh(o,t,e){const r=nG(t),{line:i,scale:s,axis:a}=t,n=i.options,h=n.fill,u=n.backgroundColor,{above:l=u,below:f=u}=h||{};r&&i.points.length&&(ja(o,e),hG(o,{line:i,target:r,above:l,below:f,area:e,scale:s,axis:a}),qa(o))}var lG={id:"filler",afterDatasetsUpdate(o,t,e){const r=(o.data.datasets||[]).length,i=[];let s,a,n,h;for(a=0;a<r;++a)s=o.getDatasetMeta(a),n=s.dataset,h=null,n&&n.options&&n instanceof Ui&&(h={visible:o.isDatasetVisible(a),index:a,fill:JB(n,a,r),chart:o,axis:s.controller.options.indexAxis,scale:s.vScale,line:n}),s.$filler=h,i.push(h);for(a=0;a<r;++a)h=i[a],!(!h||h.fill===!1)&&(h.fill=rG(i,a,e.propagate))},beforeDraw(o,t,e){const r=e.drawTime==="beforeDraw",i=o.getSortedVisibleDatasetMetas(),s=o.chartArea;for(let a=i.length-1;a>=0;--a){const n=i[a].$filler;!n||(n.line.updateControlPoints(s,n.axis),r&&Oh(o.ctx,n,s))}},beforeDatasetsDraw(o,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const r=o.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;s&&Oh(o.ctx,s,o.chartArea)}},beforeDatasetDraw(o,t,e){const r=t.meta.$filler;!r||r.fill===!1||e.drawTime!=="beforeDatasetDraw"||Oh(o.ctx,r,o.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Dv=(o,t)=>{let{boxHeight:e=t,boxWidth:r=t}=o;return o.usePointStyle&&(e=Math.min(e,t),r=Math.min(r,t)),{boxWidth:r,boxHeight:e,itemHeight:Math.max(t,e)}},uG=(o,t)=>o!==null&&t!==null&&o.datasetIndex===t.datasetIndex&&o.index===t.index;class wv extends Ve{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,r){this.maxWidth=t,this.maxHeight=e,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=St(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(r=>t.filter(r,this.chart.data))),t.sort&&(e=e.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,i=Gt(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:n,itemHeight:h}=Dv(r,s);let u,l;e.font=i.string,this.isHorizontal()?(u=this.maxWidth,l=this._fitRows(a,s,n,h)+10):(l=this.maxHeight,u=this._fitCols(a,s,n,h)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(l,t.maxHeight||this.maxHeight)}_fitRows(t,e,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:n}}}=this,h=this.legendHitBoxes=[],u=this.lineWidths=[0],l=i+n;let f=t;s.textAlign="left",s.textBaseline="middle";let c=-1,d=-l;return this.legendItems.forEach((v,p)=>{const g=r+e/2+s.measureText(v.text).width;(p===0||u[u.length-1]+g+2*n>a)&&(f+=l,u[u.length-(p>0?0:1)]=0,d+=l,c++),h[p]={left:0,top:d,row:c,width:g,height:i},u[u.length-1]+=g+n}),f}_fitCols(t,e,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:n}}}=this,h=this.legendHitBoxes=[],u=this.columnSizes=[],l=a-t;let f=n,c=0,d=0,v=0,p=0;return this.legendItems.forEach((g,m)=>{const x=r+e/2+s.measureText(g.text).width;m>0&&d+i+2*n>l&&(f+=c+n,u.push({width:c,height:d}),v+=c+n,p++,c=d=0),h[m]={left:v,top:d,col:p,width:x,height:i},c=Math.max(c,x),d+=i+n}),f+=c,u.push({width:c,height:d}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:r,labels:{padding:i},rtl:s}}=this,a=Gs(s,this.left,this.width);if(this.isHorizontal()){let n=0,h=kt(r,this.left+i,this.right-this.lineWidths[n]);for(const u of e)n!==u.row&&(n=u.row,h=kt(r,this.left+i,this.right-this.lineWidths[n])),u.top+=this.top+t+i,u.left=a.leftForLtr(a.x(h),u.width),h+=u.width+i}else{let n=0,h=kt(r,this.top+t+i,this.bottom-this.columnSizes[n].height);for(const u of e)u.col!==n&&(n=u.col,h=kt(r,this.top+t+i,this.bottom-this.columnSizes[n].height)),u.top=h,u.left+=this.left+i,u.left=a.leftForLtr(a.x(u.left),u.width),h+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ja(t,this),this._draw(),qa(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:r,ctx:i}=this,{align:s,labels:a}=t,n=ct.color,h=Gs(t.rtl,this.left,this.width),u=Gt(a.font),{color:l,padding:f}=a,c=u.size,d=c/2;let v;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=Dv(a,c),x=function(E,P,M){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();const R=ht(M.lineWidth,1);if(i.fillStyle=ht(M.fillStyle,n),i.lineCap=ht(M.lineCap,"butt"),i.lineDashOffset=ht(M.lineDashOffset,0),i.lineJoin=ht(M.lineJoin,"miter"),i.lineWidth=R,i.strokeStyle=ht(M.strokeStyle,n),i.setLineDash(ht(M.lineDash,[])),a.usePointStyle){const A={radius:p*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:R},O=h.xPlus(E,p/2),F=P+d;pa(i,A,O,F)}else{const A=P+Math.max((c-g)/2,0),O=h.leftForLtr(E,p),F=Bs(M.borderRadius);i.beginPath(),Object.values(F).some(b=>b!==0)?ga(i,{x:O,y:A,w:p,h:g,radius:F}):i.rect(O,A,p,g),i.fill(),R!==0&&i.stroke()}i.restore()},y=function(E,P,M){ls(i,M.text,E,P+m/2,u,{strikethrough:M.hidden,textAlign:h.textAlign(M.textAlign)})},T=this.isHorizontal(),S=this._computeTitleHeight();T?v={x:kt(s,this.left+f,this.right-r[0]),y:this.top+f+S,line:0}:v={x:this.left+f,y:kt(s,this.top+S+f,this.bottom-e[0].height),line:0},o0(this.ctx,t.textDirection);const C=m+f;this.legendItems.forEach((E,P)=>{i.strokeStyle=E.fontColor||l,i.fillStyle=E.fontColor||l;const M=i.measureText(E.text).width,R=h.textAlign(E.textAlign||(E.textAlign=a.textAlign)),A=p+d+M;let O=v.x,F=v.y;h.setWidth(this.width),T?P>0&&O+A+f>this.right&&(F=v.y+=C,v.line++,O=v.x=kt(s,this.left+f,this.right-r[v.line])):P>0&&F+C>this.bottom&&(O=v.x=O+e[v.line].width+f,v.line++,F=v.y=kt(s,this.top+S+f,this.bottom-e[v.line].height));const b=h.x(O);x(b,F,E),O=hD(R,O+p+d,T?O+A:this.right,t.rtl),y(h.x(O),F,E),T?v.x+=A+f:v.y+=C}),h0(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,r=Gt(e.font),i=Qt(e.padding);if(!e.display)return;const s=Gs(t.rtl,this.left,this.width),a=this.ctx,n=e.position,h=r.size/2,u=i.top+h;let l,f=this.left,c=this.width;if(this.isHorizontal())c=Math.max(...this.lineWidths),l=this.top+u,f=kt(t.align,f,this.right-c);else{const v=this.columnSizes.reduce((p,g)=>Math.max(p,g.height),0);l=u+kt(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const d=kt(n,f,f+c);a.textAlign=s.textAlign(Cu(n)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=r.string,ls(a,e.text,d,l,r)}_computeTitleHeight(){const t=this.options.title,e=Gt(t.font),r=Qt(t.padding);return t.display?e.lineHeight+r.height:0}_getLegendItemAt(t,e){let r,i,s;if(pi(t,this.left,this.right)&&pi(e,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],pi(t,i.left,i.left+i.width)&&pi(e,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){const e=this.options;if(!fG(t.type,e))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"){const i=this._hoveredItem,s=uG(i,r);i&&!s&&St(e.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!s&&St(e.onHover,[t,r,this],this)}else r&&St(e.onClick,[t,r,this],this)}}function fG(o,t){return!!(o==="mousemove"&&(t.onHover||t.onLeave)||t.onClick&&(o==="click"||o==="mouseup"))}var dG={id:"legend",_element:wv,start(o,t,e){const r=o.legend=new wv({ctx:o.ctx,options:e,chart:o});Jt.configure(o,r,e),Jt.addBox(o,r)},stop(o){Jt.removeBox(o,o.legend),delete o.legend},beforeUpdate(o,t,e){const r=o.legend;Jt.configure(o,r,e),r.options=e},afterUpdate(o){const t=o.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(o,t){t.replay||o.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(o,t,e){const r=t.datasetIndex,i=e.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:o=>o.chart.options.color,boxWidth:40,padding:10,generateLabels(o){const t=o.data.datasets,{labels:{usePointStyle:e,pointStyle:r,textAlign:i,color:s}}=o.legend.options;return o._getSortedDatasetMetas().map(a=>{const n=a.controller.getStyle(e?0:void 0),h=Qt(n.borderWidth);return{text:t[a.index].label,fillStyle:n.backgroundColor,fontColor:s,hidden:!a.visible,lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:n.borderColor,pointStyle:r||n.pointStyle,rotation:n.rotation,textAlign:i||n.textAlign,borderRadius:0,datasetIndex:a.index}},this)}},title:{color:o=>o.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:o=>!o.startsWith("on"),labels:{_scriptable:o=>!["generateLabels","filter","sort"].includes(o)}}};class zu extends Ve{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const i=Ct(r.text)?r.text.length:1;this._padding=Qt(r.padding);const s=i*Gt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:r,bottom:i,right:s,options:a}=this,n=a.align;let h=0,u,l,f;return this.isHorizontal()?(l=kt(n,r,s),f=e+t,u=s-r):(a.position==="left"?(l=r+t,f=kt(n,i,e),h=Rt*-.5):(l=s-t,f=kt(n,e,i),h=Rt*.5),u=i-e),{titleX:l,titleY:f,maxWidth:u,rotation:h}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const r=Gt(e.font),s=r.lineHeight/2+this._padding.top,{titleX:a,titleY:n,maxWidth:h,rotation:u}=this._drawArgs(s);ls(t,e.text,0,0,r,{color:e.color,maxWidth:h,rotation:u,textAlign:Cu(e.align),textBaseline:"middle",translation:[a,n]})}}function cG(o,t){const e=new zu({ctx:o.ctx,options:t,chart:o});Jt.configure(o,e,t),Jt.addBox(o,e),o.titleBlock=e}var vG={id:"title",_element:zu,start(o,t,e){cG(o,e)},stop(o){const t=o.titleBlock;Jt.removeBox(o,t),delete o.titleBlock},beforeUpdate(o,t,e){const r=o.titleBlock;Jt.configure(o,r,e),r.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const $r=new WeakMap;var pG={id:"subtitle",start(o,t,e){const r=new zu({ctx:o.ctx,options:e,chart:o});Jt.configure(o,r,e),Jt.addBox(o,r),$r.set(o,r)},stop(o){Jt.removeBox(o,$r.get(o)),$r.delete(o)},beforeUpdate(o,t,e){const r=$r.get(o);Jt.configure(o,r,e),r.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const An={average(o){if(!o.length)return!1;let t,e,r=0,i=0,s=0;for(t=0,e=o.length;t<e;++t){const a=o[t].element;if(a&&a.hasValue()){const n=a.tooltipPosition();r+=n.x,i+=n.y,++s}}return{x:r/s,y:i/s}},nearest(o,t){if(!o.length)return!1;let e=t.x,r=t.y,i=Number.POSITIVE_INFINITY,s,a,n;for(s=0,a=o.length;s<a;++s){const h=o[s].element;if(h&&h.hasValue()){const u=h.getCenterPoint(),l=Qh(t,u);l<i&&(i=l,n=h)}}if(n){const h=n.tooltipPosition();e=h.x,r=h.y}return{x:e,y:r}}};function Ze(o,t){return t&&(Ct(t)?Array.prototype.push.apply(o,t):o.push(t)),o}function vi(o){return(typeof o=="string"||o instanceof String)&&o.indexOf(`
`)>-1?o.split(`
`):o}function gG(o,t){const{element:e,datasetIndex:r,index:i}=t,s=o.getDatasetMeta(r).controller,{label:a,value:n}=s.getLabelAndValue(i);return{chart:o,label:a,parsed:s.getParsed(i),raw:o.data.datasets[r].data[i],formattedValue:n,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:e}}function Iv(o,t){const e=o.chart.ctx,{body:r,footer:i,title:s}=o,{boxWidth:a,boxHeight:n}=t,h=Gt(t.bodyFont),u=Gt(t.titleFont),l=Gt(t.footerFont),f=s.length,c=i.length,d=r.length,v=Qt(t.padding);let p=v.height,g=0,m=r.reduce((T,S)=>T+S.before.length+S.lines.length+S.after.length,0);if(m+=o.beforeBody.length+o.afterBody.length,f&&(p+=f*u.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),m){const T=t.displayColors?Math.max(n,h.lineHeight):h.lineHeight;p+=d*T+(m-d)*h.lineHeight+(m-1)*t.bodySpacing}c&&(p+=t.footerMarginTop+c*l.lineHeight+(c-1)*t.footerSpacing);let x=0;const y=function(T){g=Math.max(g,e.measureText(T).width+x)};return e.save(),e.font=u.string,xt(o.title,y),e.font=h.string,xt(o.beforeBody.concat(o.afterBody),y),x=t.displayColors?a+2+t.boxPadding:0,xt(r,T=>{xt(T.before,y),xt(T.lines,y),xt(T.after,y)}),x=0,e.font=l.string,xt(o.footer,y),e.restore(),g+=v.width,{width:g,height:p}}function mG(o,t){const{y:e,height:r}=t;return e<r/2?"top":e>o.height-r/2?"bottom":"center"}function xG(o,t,e,r){const{x:i,width:s}=r,a=e.caretSize+e.caretPadding;if(o==="left"&&i+s+a>t.width||o==="right"&&i-s-a<0)return!0}function yG(o,t,e,r){const{x:i,width:s}=e,{width:a,chartArea:{left:n,right:h}}=o;let u="center";return r==="center"?u=i<=(n+h)/2?"left":"right":i<=s/2?u="left":i>=a-s/2&&(u="right"),xG(u,o,t,e)&&(u="center"),u}function Bv(o,t,e){const r=e.yAlign||t.yAlign||mG(o,e);return{xAlign:e.xAlign||t.xAlign||yG(o,t,e,r),yAlign:r}}function TG(o,t){let{x:e,width:r}=o;return t==="right"?e-=r:t==="center"&&(e-=r/2),e}function SG(o,t,e){let{y:r,height:i}=o;return t==="top"?r+=e:t==="bottom"?r-=i+e:r-=i/2,r}function Gv(o,t,e,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=o,{xAlign:n,yAlign:h}=e,u=i+s,{topLeft:l,topRight:f,bottomLeft:c,bottomRight:d}=Bs(a);let v=TG(t,n);const p=SG(t,h,u);return h==="center"?n==="left"?v+=u:n==="right"&&(v-=u):n==="left"?v-=Math.max(l,c)+i:n==="right"&&(v+=Math.max(f,d)+i),{x:Yt(v,0,r.width-t.width),y:Yt(p,0,r.height-t.height)}}function kr(o,t,e){const r=Qt(e.padding);return t==="center"?o.x+o.width/2:t==="right"?o.x+o.width-r.right:o.x+r.left}function Nv(o){return Ze([],vi(o))}function CG(o,t,e){return Wi(o,{tooltip:t,tooltipItems:e,type:"tooltip"})}function zv(o,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?o.override(e):o}class rl extends Ve{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&e.options.animation&&r.animations,s=new d0(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=CG(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:r}=e,i=r.beforeTitle.apply(this,[t]),s=r.title.apply(this,[t]),a=r.afterTitle.apply(this,[t]);let n=[];return n=Ze(n,vi(i)),n=Ze(n,vi(s)),n=Ze(n,vi(a)),n}getBeforeBody(t,e){return Nv(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:r}=e,i=[];return xt(t,s=>{const a={before:[],lines:[],after:[]},n=zv(r,s);Ze(a.before,vi(n.beforeLabel.call(this,s))),Ze(a.lines,n.label.call(this,s)),Ze(a.after,vi(n.afterLabel.call(this,s))),i.push(a)}),i}getAfterBody(t,e){return Nv(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:r}=e,i=r.beforeFooter.apply(this,[t]),s=r.footer.apply(this,[t]),a=r.afterFooter.apply(this,[t]);let n=[];return n=Ze(n,vi(i)),n=Ze(n,vi(s)),n=Ze(n,vi(a)),n}_createItems(t){const e=this._active,r=this.chart.data,i=[],s=[],a=[];let n=[],h,u;for(h=0,u=e.length;h<u;++h)n.push(gG(this.chart,e[h]));return t.filter&&(n=n.filter((l,f,c)=>t.filter(l,f,c,r))),t.itemSort&&(n=n.sort((l,f)=>t.itemSort(l,f,r))),xt(n,l=>{const f=zv(t.callbacks,l);i.push(f.labelColor.call(this,l)),s.push(f.labelPointStyle.call(this,l)),a.push(f.labelTextColor.call(this,l))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=n,n}update(t,e){const r=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const n=An[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const h=this._size=Iv(this,r),u=Object.assign({},n,h),l=Bv(this.chart,r,u),f=Gv(r,u,l,this.chart);this.xAlign=l.xAlign,this.yAlign=l.yAlign,s={opacity:1,x:f.x,y:f.y,width:h.width,height:h.height,caretX:n.x,caretY:n.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,r,i){const s=this.getCaretPosition(t,r,i);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,r){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:n}=r,{topLeft:h,topRight:u,bottomLeft:l,bottomRight:f}=Bs(n),{x:c,y:d}=t,{width:v,height:p}=e;let g,m,x,y,T,S;return s==="center"?(T=d+p/2,i==="left"?(g=c,m=g-a,y=T+a,S=T-a):(g=c+v,m=g+a,y=T-a,S=T+a),x=g):(i==="left"?m=c+Math.max(h,l)+a:i==="right"?m=c+v-Math.max(u,f)-a:m=this.caretX,s==="top"?(y=d,T=y-a,g=m-a,x=m+a):(y=d+p,T=y+a,g=m+a,x=m-a),S=y),{x1:g,x2:m,x3:x,y1:y,y2:T,y3:S}}drawTitle(t,e,r){const i=this.title,s=i.length;let a,n,h;if(s){const u=Gs(r.rtl,this.x,this.width);for(t.x=kr(this,r.titleAlign,r),e.textAlign=u.textAlign(r.titleAlign),e.textBaseline="middle",a=Gt(r.titleFont),n=r.titleSpacing,e.fillStyle=r.titleColor,e.font=a.string,h=0;h<s;++h)e.fillText(i[h],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+n,h+1===s&&(t.y+=r.titleMarginBottom-n)}}_drawColorBox(t,e,r,i,s){const a=this.labelColors[r],n=this.labelPointStyles[r],{boxHeight:h,boxWidth:u,boxPadding:l}=s,f=Gt(s.bodyFont),c=kr(this,"left",s),d=i.x(c),v=h<f.lineHeight?(f.lineHeight-h)/2:0,p=e.y+v;if(s.usePointStyle){const g={radius:Math.min(u,h)/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:1},m=i.leftForLtr(d,u)+u/2,x=p+h/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,pa(t,g,m,x),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,pa(t,g,m,x)}else{t.lineWidth=a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const g=i.leftForLtr(d,u-l),m=i.leftForLtr(i.xPlus(d,1),u-l-2),x=Bs(a.borderRadius);Object.values(x).some(y=>y!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,ga(t,{x:g,y:p,w:u,h,radius:x}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),ga(t,{x:m,y:p+1,w:u-2,h:h-2,radius:x}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(g,p,u,h),t.strokeRect(g,p,u,h),t.fillStyle=a.backgroundColor,t.fillRect(m,p+1,u-2,h-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,e,r){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:n,boxHeight:h,boxWidth:u,boxPadding:l}=r,f=Gt(r.bodyFont);let c=f.lineHeight,d=0;const v=Gs(r.rtl,this.x,this.width),p=function(P){e.fillText(P,v.x(t.x+d),t.y+c/2),t.y+=c+s},g=v.textAlign(a);let m,x,y,T,S,C,E;for(e.textAlign=a,e.textBaseline="middle",e.font=f.string,t.x=kr(this,g,r),e.fillStyle=r.bodyColor,xt(this.beforeBody,p),d=n&&g!=="right"?a==="center"?u/2+l:u+2+l:0,T=0,C=i.length;T<C;++T){for(m=i[T],x=this.labelTextColors[T],e.fillStyle=x,xt(m.before,p),y=m.lines,n&&y.length&&(this._drawColorBox(e,t,T,v,r),c=Math.max(f.lineHeight,h)),S=0,E=y.length;S<E;++S)p(y[S]),c=f.lineHeight;xt(m.after,p)}d=0,c=f.lineHeight,xt(this.afterBody,p),t.y-=s}drawFooter(t,e,r){const i=this.footer,s=i.length;let a,n;if(s){const h=Gs(r.rtl,this.x,this.width);for(t.x=kr(this,r.footerAlign,r),t.y+=r.footerMarginTop,e.textAlign=h.textAlign(r.footerAlign),e.textBaseline="middle",a=Gt(r.footerFont),e.fillStyle=r.footerColor,e.font=a.string,n=0;n<s;++n)e.fillText(i[n],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,e,r,i){const{xAlign:s,yAlign:a}=this,{x:n,y:h}=t,{width:u,height:l}=r,{topLeft:f,topRight:c,bottomLeft:d,bottomRight:v}=Bs(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(n+f,h),a==="top"&&this.drawCaret(t,e,r,i),e.lineTo(n+u-c,h),e.quadraticCurveTo(n+u,h,n+u,h+c),a==="center"&&s==="right"&&this.drawCaret(t,e,r,i),e.lineTo(n+u,h+l-v),e.quadraticCurveTo(n+u,h+l,n+u-v,h+l),a==="bottom"&&this.drawCaret(t,e,r,i),e.lineTo(n+d,h+l),e.quadraticCurveTo(n,h+l,n,h+l-d),a==="center"&&s==="left"&&this.drawCaret(t,e,r,i),e.lineTo(n,h+f),e.quadraticCurveTo(n,h,n+f,h),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const a=An[t.position].call(this,this._active,this._eventPosition);if(!a)return;const n=this._size=Iv(this,t),h=Object.assign({},a,this._size),u=Bv(e,t,h),l=Gv(t,h,u,e);(i._to!==l.x||s._to!==l.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=n.width,this.height=n.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,l))}}draw(t){const e=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=Qt(e.padding),n=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&n&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,i,e),o0(t,e.textDirection),s.y+=a.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),h0(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const r=this._active,i=t.map(({datasetIndex:n,index:h})=>{const u=this.chart.getDatasetMeta(n);if(!u)throw new Error("Cannot find a dataset at index "+n);return{datasetIndex:n,element:u.data[h],index:h}}),s=!ua(r,i),a=this._positionChanged(i,e);(s||a)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,r=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(t,s,e,r),n=this._positionChanged(a,t),h=e||!ua(a,s)||n;return h&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),h}_getActiveElements(t,e,r,i){const s=this.options;if(t.type==="mouseout")return[];if(!i)return e;const a=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:r,caretY:i,options:s}=this,a=An[s.position].call(this,t,e);return a!==!1&&(r!==a.x||i!==a.y)}}rl.positioners=An;var EG={id:"tooltip",_element:rl,positioners:An,afterInit(o,t,e){e&&(o.tooltip=new rl({chart:o,options:e}))},beforeUpdate(o,t,e){o.tooltip&&o.tooltip.initialize(e)},reset(o,t,e){o.tooltip&&o.tooltip.initialize(e)},afterDraw(o){const t=o.tooltip,e={tooltip:t};o.notifyPlugins("beforeTooltipDraw",e)!==!1&&(t&&t.draw(o.ctx),o.notifyPlugins("afterTooltipDraw",e))},afterEvent(o,t){if(o.tooltip){const e=t.replay;o.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(o,t)=>t.bodyFont.size,boxWidth:(o,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:di,title(o){if(o.length>0){const t=o[0],e=t.chart.data.labels,r=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return e[t.dataIndex]}return""},afterTitle:di,beforeBody:di,beforeLabel:di,label(o){if(this&&this.options&&this.options.mode==="dataset")return o.label+": "+o.formattedValue||o.formattedValue;let t=o.dataset.label||"";t&&(t+=": ");const e=o.formattedValue;return pt(e)||(t+=e),t},labelColor(o){const e=o.chart.getDatasetMeta(o.datasetIndex).controller.getStyle(o.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(o){const e=o.chart.getDatasetMeta(o.datasetIndex).controller.getStyle(o.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:di,afterBody:di,beforeFooter:di,footer:di,afterFooter:di}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:o=>o!=="filter"&&o!=="itemSort"&&o!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},PG=Object.freeze({__proto__:null,Decimation:kB,Filler:lG,Legend:dG,SubTitle:pG,Title:vG,Tooltip:EG});const MG=(o,t,e,r)=>(typeof t=="string"?(e=o.push(t)-1,r.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function AG(o,t,e,r){const i=o.indexOf(t);if(i===-1)return MG(o,t,e,r);const s=o.lastIndexOf(t);return i!==s?e:i}const RG=(o,t)=>o===null?null:Yt(Math.round(o),0,t);class Ta extends ds{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const r=this.getLabels();for(const{index:i,label:s}of e)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(pt(t))return null;const r=this.getLabels();return e=isFinite(e)&&r[e]===t?e:AG(r,t,ht(e,t),this._addedLabels),RG(e,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),e||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const t=this.min,e=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=e;a++)i.push({value:a});return i}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Ta.id="category";Ta.defaults={ticks:{callback:Ta.prototype.getLabelForValue}};function OG(o,t){const e=[],{bounds:i,step:s,min:a,max:n,precision:h,count:u,maxTicks:l,maxDigits:f,includeBounds:c}=o,d=s||1,v=l-1,{min:p,max:g}=t,m=!pt(a),x=!pt(n),y=!pt(u),T=(g-p)/(f+1);let S=Gc((g-p)/v/d)*d,C,E,P,M;if(S<1e-14&&!m&&!x)return[{value:p},{value:g}];M=Math.ceil(g/S)-Math.floor(p/S),M>v&&(S=Gc(M*S/v/d)*d),pt(h)||(C=Math.pow(10,h),S=Math.ceil(S*C)/C),i==="ticks"?(E=Math.floor(p/S)*S,P=Math.ceil(g/S)*S):(E=p,P=g),m&&x&&s&&yD((n-a)/s,S/1e3)?(M=Math.round(Math.min((n-a)/S,l)),S=(n-a)/M,E=a,P=n):y?(E=m?a:E,P=x?n:P,M=u-1,S=(P-E)/M):(M=(P-E)/S,En(M,Math.round(M),S/1e3)?M=Math.round(M):M=Math.ceil(M));const R=Math.max(Nc(S),Nc(E));C=Math.pow(10,pt(h)?R:h),E=Math.round(E*C)/C,P=Math.round(P*C)/C;let A=0;for(m&&(c&&E!==a?(e.push({value:a}),E<a&&A++,En(Math.round((E+A*S)*C)/C,a,Vv(a,T,o))&&A++):E<a&&A++);A<M;++A)e.push({value:Math.round((E+A*S)*C)/C});return x&&c&&P!==n?e.length&&En(e[e.length-1].value,n,Vv(n,T,o))?e[e.length-1].value=n:e.push({value:n}):(!x||P===n)&&e.push({value:P}),e}function Vv(o,t,{horizontal:e,minRotation:r}){const i=ze(r),s=(e?Math.sin(i):Math.cos(i))||.001,a=.75*t*(""+o).length;return Math.min(t/s,a)}class Sa extends ds{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return pt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=h=>i=e?i:h,n=h=>s=r?s:h;if(t){const h=je(i),u=je(s);h<0&&u<0?n(0):h>0&&u>0&&a(0)}if(i===s){let h=1;(s>=Number.MAX_SAFE_INTEGER||i<=Number.MIN_SAFE_INTEGER)&&(h=Math.abs(s*.05)),n(s+h),t||a(i-h)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,a=OG(i,s);return t.bounds==="ticks"&&Hm(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const i=(r-e)/Math.max(t.length-1,1)/2;e-=i,r+=i}this._startValue=e,this._endValue=r,this._valueRange=r-e}getLabelForValue(t){return qn(t,this.chart.options.locale,this.options.ticks.format)}}class Vu extends Sa{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=wt(t)?t:0,this.max=wt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,r=ze(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Vu.id="linear";Vu.defaults={ticks:{callback:ro.formatters.numeric}};function Yv(o){return o/Math.pow(10,Math.floor(Me(o)))===1}function LG(o,t){const e=Math.floor(Me(t.max)),r=Math.ceil(t.max/Math.pow(10,e)),i=[];let s=Ee(o.min,Math.pow(10,Math.floor(Me(t.min)))),a=Math.floor(Me(s)),n=Math.floor(s/Math.pow(10,a)),h=a<0?Math.pow(10,Math.abs(a)):1;do i.push({value:s,major:Yv(s)}),++n,n===10&&(n=1,++a,h=a>=0?1:h),s=Math.round(n*Math.pow(10,a)*h)/h;while(a<e||a===e&&n<r);const u=Ee(o.max,s);return i.push({value:u,major:Yv(s)}),i}class Yu extends ds{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const r=Sa.prototype.parse.apply(this,[t,e]);if(r===0){this._zero=!0;return}return wt(r)&&r>0?r:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=wt(t)?Math.max(0,t):null,this.max=wt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let r=this.min,i=this.max;const s=h=>r=t?r:h,a=h=>i=e?i:h,n=(h,u)=>Math.pow(10,Math.floor(Me(h))+u);r===i&&(r<=0?(s(1),a(10)):(s(n(r,-1)),a(n(i,1)))),r<=0&&s(n(i,-1)),i<=0&&a(n(r,1)),this._zero&&this.min!==this._suggestedMin&&r===n(this.min,0)&&s(n(r,-1)),this.min=r,this.max=i}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},r=LG(e,this);return t.bounds==="ticks"&&Hm(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(t){return t===void 0?"0":qn(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Me(t),this._valueRange=Me(this.max)-Me(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Me(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}Yu.id="logarithmic";Yu.defaults={ticks:{callback:ro.formatters.logarithmic,major:{enabled:!0}}};function al(o){const t=o.ticks;if(t.display&&o.display){const e=Qt(t.backdropPadding);return ht(t.font&&t.font.size,ct.font.size)+e.height}return 0}function FG(o,t,e){return e=Ct(e)?e:[e],{w:XD(o,t.string,e),h:e.length*t.lineHeight}}function Wv(o,t,e,r,i){return o===r||o===i?{start:t-e/2,end:t+e/2}:o<r||o>i?{start:t-e,end:t}:{start:t,end:t+e}}function bG(o){const t={l:o.left+o._padding.left,r:o.right-o._padding.right,t:o.top+o._padding.top,b:o.bottom-o._padding.bottom},e=Object.assign({},t),r=[],i=[],s=o._pointLabels.length,a=o.options.pointLabels,n=a.centerPointLabels?Rt/s:0;for(let h=0;h<s;h++){const u=a.setContext(o.getPointLabelContext(h));i[h]=u.padding;const l=o.getPointPosition(h,o.drawingArea+i[h],n),f=Gt(u.font),c=FG(o.ctx,f,o._pointLabels[h]);r[h]=c;const d=ce(o.getIndexAngle(h)+n),v=Math.round(Pu(d)),p=Wv(v,l.x,c.w,0,180),g=Wv(v,l.y,c.h,90,270);DG(e,t,d,p,g)}o.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),o._pointLabelItems=wG(o,r,i)}function DG(o,t,e,r,i){const s=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e));let n=0,h=0;r.start<t.l?(n=(t.l-r.start)/s,o.l=Math.min(o.l,t.l-n)):r.end>t.r&&(n=(r.end-t.r)/s,o.r=Math.max(o.r,t.r+n)),i.start<t.t?(h=(t.t-i.start)/a,o.t=Math.min(o.t,t.t-h)):i.end>t.b&&(h=(i.end-t.b)/a,o.b=Math.max(o.b,t.b+h))}function wG(o,t,e){const r=[],i=o._pointLabels.length,s=o.options,a=al(s)/2,n=o.drawingArea,h=s.pointLabels.centerPointLabels?Rt/i:0;for(let u=0;u<i;u++){const l=o.getPointPosition(u,n+a+e[u],h),f=Math.round(Pu(ce(l.angle+Ft))),c=t[u],d=GG(l.y,c.h,f),v=IG(f),p=BG(l.x,c.w,v);r.push({x:l.x,y:d,textAlign:v,left:p,top:d,right:p+c.w,bottom:d+c.h})}return r}function IG(o){return o===0||o===180?"center":o<180?"left":"right"}function BG(o,t,e){return e==="right"?o-=t:e==="center"&&(o-=t/2),o}function GG(o,t,e){return e===90||e===270?o-=t/2:(e>270||e<90)&&(o-=t),o}function NG(o,t){const{ctx:e,options:{pointLabels:r}}=o;for(let i=t-1;i>=0;i--){const s=r.setContext(o.getPointLabelContext(i)),a=Gt(s.font),{x:n,y:h,textAlign:u,left:l,top:f,right:c,bottom:d}=o._pointLabelItems[i],{backdropColor:v}=s;if(!pt(v)){const p=Qt(s.backdropPadding);e.fillStyle=v,e.fillRect(l-p.left,f-p.top,c-l+p.width,d-f+p.height)}ls(e,o._pointLabels[i],n,h+a.lineHeight/2,a,{color:s.color,textAlign:u,textBaseline:"middle"})}}function w0(o,t,e,r){const{ctx:i}=o;if(e)i.arc(o.xCenter,o.yCenter,t,0,Tt);else{let s=o.getPointPosition(0,t);i.moveTo(s.x,s.y);for(let a=1;a<r;a++)s=o.getPointPosition(a,t),i.lineTo(s.x,s.y)}}function zG(o,t,e,r){const i=o.ctx,s=t.circular,{color:a,lineWidth:n}=t;!s&&!r||!a||!n||e<0||(i.save(),i.strokeStyle=a,i.lineWidth=n,i.setLineDash(t.borderDash),i.lineDashOffset=t.borderDashOffset,i.beginPath(),w0(o,e,s,r),i.closePath(),i.stroke(),i.restore())}function VG(o,t,e){return Wi(o,{label:e,index:t,type:"pointLabel"})}class tr extends Sa{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Qt(al(this.options)/2),e=this.width=this.maxWidth-t.width,r=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+r/2+t.top),this.drawingArea=Math.floor(Math.min(e,r)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=wt(t)&&!isNaN(t)?t:0,this.max=wt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/al(this.options))}generateTickLabels(t){Sa.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,r)=>{const i=St(this.options.pointLabels.callback,[e,r],this);return i||i===0?i:""}).filter((e,r)=>this.chart.getDataVisibility(r))}fit(){const t=this.options;t.display&&t.pointLabels.display?bG(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,r,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,r,i))}getIndexAngle(t){const e=Tt/(this._pointLabels.length||1),r=this.options.startAngle||0;return ce(t*e+ze(r))}getDistanceFromCenterForValue(t){if(pt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(pt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const r=e[t];return VG(this.getContext(),t,r)}}getPointPosition(t,e,r=0){const i=this.getIndexAngle(t)-Ft+r;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:r,right:i,bottom:s}=this._pointLabelItems[t];return{left:e,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const r=this.ctx;r.save(),r.beginPath(),w0(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:r,grid:i}=e,s=this._pointLabels.length;let a,n,h;if(e.pointLabels.display&&NG(this,s),i.display&&this.ticks.forEach((u,l)=>{if(l!==0){n=this.getDistanceFromCenterForValue(u.value);const f=i.setContext(this.getContext(l-1));zG(this,f,n,s)}}),r.display){for(t.save(),a=s-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:l,lineWidth:f}=u;!f||!l||(t.lineWidth=f,t.strokeStyle=l,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,n=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),h=this.getPointPosition(a,n),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,r=e.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,a;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((n,h)=>{if(h===0&&!e.reverse)return;const u=r.setContext(this.getContext(h)),l=Gt(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[h].value),u.showLabelBackdrop){t.font=l.string,a=t.measureText(n.label).width,t.fillStyle=u.backdropColor;const f=Qt(u.backdropPadding);t.fillRect(-a/2-f.left,-s-l.size/2-f.top,a+f.width,l.size+f.height)}ls(t,n.label,0,-s,l,{color:u.color})}),t.restore()}drawTitle(){}}tr.id="radialLinear";tr.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ro.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(o){return o},padding:5,centerPointLabels:!1}};tr.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};tr.descriptors={angleLines:{_fallback:"grid"}};const lo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},le=Object.keys(lo);function YG(o,t){return o-t}function Uv(o,t){if(pt(t))return null;const e=o._adapter,{parser:r,round:i,isoWeekday:s}=o._parseOpts;let a=t;return typeof r=="function"&&(a=r(a)),wt(a)||(a=typeof r=="string"?e.parse(a,r):e.parse(a)),a===null?null:(i&&(a=i==="week"&&(bn(s)||s===!0)?e.startOf(a,"isoWeek",s):e.startOf(a,i)),+a)}function Xv(o,t,e,r){const i=le.length;for(let s=le.indexOf(o);s<i-1;++s){const a=lo[le[s]],n=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(n*a.size))<=r)return le[s]}return le[i-1]}function WG(o,t,e,r,i){for(let s=le.length-1;s>=le.indexOf(e);s--){const a=le[s];if(lo[a].common&&o._adapter.diff(i,r,a)>=t-1)return a}return le[e?le.indexOf(e):0]}function UG(o){for(let t=le.indexOf(o)+1,e=le.length;t<e;++t)if(lo[le[t]].common)return le[t]}function Hv(o,t,e){if(!e)o[t]=!0;else if(e.length){const{lo:r,hi:i}=Fu(e,t),s=e[r]>=t?e[r]:e[i];o[s]=!0}}function XG(o,t,e,r){const i=o._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let n,h;for(n=s;n<=a;n=+i.add(n,1,r))h=e[n],h>=0&&(t[h].major=!0);return t}function $v(o,t,e){const r=[],i={},s=t.length;let a,n;for(a=0;a<s;++a)n=t[a],i[n]=a,r.push({value:n,major:!1});return s===0||!e?r:XG(o,r,i,e)}class er extends ds{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const r=t.time||(t.time={}),i=this._adapter=new cI._date(t.adapters.date);Cn(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Uv(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,r=t.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:n}=this.getUserBounds();function h(u){!a&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!n&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!n)&&(h(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&h(this.getMinMax(!1))),i=wt(i)&&!isNaN(i)?i:+e.startOf(Date.now(),r),s=wt(s)&&!isNaN(s)?s:+e.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],r=t[t.length-1]),{min:e,max:r}}buildTicks(){const t=this.options,e=t.time,r=t.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,n=tw(i,s,a);return this._unit=e.unit||(r.autoSkip?Xv(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):WG(this,n.length,e.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:UG(this._unit),this.initOffsets(i),t.reverse&&n.reverse(),$v(this,n,this._majorUnit)}initOffsets(t){let e=0,r=0,i,s;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=Yt(e,0,a),r=Yt(r,0,a),this._offsets={start:e,end:r,factor:1/(e+1+r)}}_generate(){const t=this._adapter,e=this.min,r=this.max,i=this.options,s=i.time,a=s.unit||Xv(s.minUnit,e,r,this._getLabelCapacity(e)),n=ht(s.stepSize,1),h=a==="week"?s.isoWeekday:!1,u=bn(h)||h===!0,l={};let f=e,c,d;if(u&&(f=+t.startOf(f,"isoWeek",h)),f=+t.startOf(f,u?"day":a),t.diff(r,e,a)>1e5*n)throw new Error(e+" and "+r+" are too far apart with stepSize of "+n+" "+a);const v=i.ticks.source==="data"&&this.getDataTimestamps();for(c=f,d=0;c<r;c=+t.add(c,n,a),d++)Hv(l,c,v);return(c===r||i.bounds==="ticks"||d===1)&&Hv(l,c,v),Object.keys(l).sort((p,g)=>p-g).map(p=>+p)}getLabelForValue(t){const e=this._adapter,r=this.options.time;return r.tooltipFormat?e.format(t,r.tooltipFormat):e.format(t,r.displayFormats.datetime)}_tickFormatFunction(t,e,r,i){const s=this.options,a=s.time.displayFormats,n=this._unit,h=this._majorUnit,u=n&&a[n],l=h&&a[h],f=r[e],c=h&&l&&f&&f.major,d=this._adapter.format(t,i||(c?l:u)),v=s.ticks.callback;return v?St(v,[d,e,r],this):d}generateTickLabels(t){let e,r,i;for(e=0,r=t.length;e<r;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+r)*e.factor)}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,r=this.ctx.measureText(t).width,i=ze(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(i),a=Math.sin(i),n=this._resolveTickFontOptions(0).size;return{w:r*s+n*a,h:r*a+n*s}}_getLabelCapacity(t){const e=this.options.time,r=e.displayFormats,i=r[e.unit]||r.millisecond,s=this._tickFormatFunction(t,0,$v(this,[t],this._majorUnit),i),a=this._getLabelSize(s),n=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return n>0?n:1}getDataTimestamps(){let t=this._cache.data||[],e,r;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,r=i.length;e<r;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,r;if(t.length)return t;const i=this.getLabels();for(e=0,r=i.length;e<r;++e)t.push(Uv(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return _m(t.sort(YG))}}er.id="time";er.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function Kr(o,t,e){let r=0,i=o.length-1,s,a,n,h;e?(t>=o[r].pos&&t<=o[i].pos&&({lo:r,hi:i}=gi(o,"pos",t)),{pos:s,time:n}=o[r],{pos:a,time:h}=o[i]):(t>=o[r].time&&t<=o[i].time&&({lo:r,hi:i}=gi(o,"time",t)),{time:s,pos:n}=o[r],{time:a,pos:h}=o[i]);const u=a-s;return u?n+(h-n)*(t-s)/u:n}class Wu extends er{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Kr(e,this.min),this._tableRange=Kr(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:r}=this,i=[],s=[];let a,n,h,u,l;for(a=0,n=t.length;a<n;++a)u=t[a],u>=e&&u<=r&&i.push(u);if(i.length<2)return[{time:e,pos:0},{time:r,pos:1}];for(a=0,n=i.length;a<n;++a)l=i[a+1],h=i[a-1],u=i[a],Math.round((l+h)/2)!==u&&s.push({time:u,pos:a/(n-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),r=this.getLabelTimestamps();return e.length&&r.length?t=this.normalize(e.concat(r)):t=e.length?e:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Kr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return Kr(this._table,r*this._tableRange+this._minPos,!0)}}Wu.id="timeseries";Wu.defaults=er.defaults;var HG=Object.freeze({__proto__:null,CategoryScale:Ta,LinearScale:Vu,LogarithmicScale:Yu,RadialLinearScale:tr,TimeScale:er,TimeSeriesScale:Wu});const $G=[dI,UB,PG,HG];Bn.register(...$G);const kv=220,kG=20,Kv=[];class KG extends Qn{constructor(){super("GameOverScene");_(this,"dataSuccessRateHistory",{labels:Kv,datasets:[{label:"Your success rate history",backgroundColor:"rgb(255, 255, 255)",borderColor:"rgb(255, 0, 0)",data:[]}]});_(this,"dataScoreHistory",{labels:Kv,datasets:[{label:"Your score history",backgroundColor:"rgb(255, 255, 255)",borderColor:"rgb(0, 0, 255)",data:[]}]});_(this,"defaultChartOptions",{plugins:{legend:{labels:{color:"white",font:{size:18}}}},responsive:!0,scales:{y:{ticks:{color:"white"}},x:{ticks:{callback:(e,r)=>"",color:"white"}}}});_(this,"configSuccessRateHistory",{type:"line",data:this.dataSuccessRateHistory,options:this.defaultChartOptions});_(this,"configScoreHistory",{type:"line",data:this.dataScoreHistory,options:this.defaultChartOptions})}init(e){super.init(e)}preload(){this.load.html("chart-score-history","assets/text/chart-score-history.html"),this.load.html("chart-success-rate-history","assets/text/chart-success-rate-history.html")}create(){this.dataScoreHistory.datasets[0].label=this.dataStore.texts.yourScoreHistory,this.dataSuccessRateHistory.datasets[0].label=this.dataStore.texts.yourSuccessRateHistory;const e=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY+kG,"Game Over",{font:"74px Arial Black"}).setOrigin(.5).setStroke("#00f",16).setShadow(2,2,"#333333",2,!0,!0);this.tweens.add({targets:e,scale:2,duration:500,ease:"Sine.inOut",yoyo:!0,repeat:0}),this.input.once("pointerdown",r=>{},this),this.gameController.gameStatus$.pipe(jb(r=>r.scoreHistory.length>=2)).subscribe(r=>{this.createChartScoreHistory(this.cameras.main.centerX-300,this.cameras.main.centerY+kv,1.5,r.scoreHistory),this.createChartSuccessRateHistory(this.cameras.main.centerX+300,this.cameras.main.centerY+kv,1.5,r.successRateHistory)})}createChartScoreHistory(e,r,i,s){const n=this.add.dom(e,r).createFromCache("chart-score-history").setScale(i).getChildByID("scoreHistory");new Bn(n,this.getChartConfig(this.configScoreHistory,s))}createChartSuccessRateHistory(e,r,i,s){const n=this.add.dom(e,r).createFromCache("chart-success-rate-history").setScale(i).getChildByID("successRateHistory");new Bn(n,this.getChartConfig(this.configSuccessRateHistory,s))}getChartConfig(e,r){let i=hi({},e);return i.data.datasets[0].data=r,i.data.labels=new Array(r.length).fill(""),i}update(){}}new yn.Game(Object.assign(cb,{scene:[iD,nD,rD,aD,KG]}));
