var Tv=Object.defineProperty;var Vo=Object.getOwnPropertySymbols;var Ev=Object.prototype.hasOwnProperty,Sv=Object.prototype.propertyIsEnumerable;var kn=(m,i,e)=>i in m?Tv(m,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):m[i]=e,Hi=(m,i)=>{for(var e in i||(i={}))Ev.call(i,e)&&kn(m,e,i[e]);if(Vo)for(var e of Vo(i))Sv.call(i,e)&&kn(m,e,i[e]);return m};var nt=(m,i,e)=>(kn(m,typeof i!="symbol"?i+"":i,e),e);const Cv=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))v(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&v(u)}).observe(document,{childList:!0,subtree:!0});function e(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function v(t){if(t.ep)return;t.ep=!0;const s=e(t);fetch(t.href,s)}};Cv();var Pv=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Rv(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var Mu={exports:{}};(function(m,i){(function(v,t){m.exports=t()})(Pv,function(){return function(e){var v={};function t(s){if(v[s])return v[s].exports;var u=v[s]={i:s,l:!1,exports:{}};return e[s].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=e,t.c=v,t.d=function(s,u,n){t.o(s,u)||Object.defineProperty(s,u,{enumerable:!0,get:n})},t.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},t.t=function(s,u){if(u&1&&(s=t(s)),u&8||u&4&&typeof s=="object"&&s&&s.__esModule)return s;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:s}),u&2&&typeof s!="string")for(var a in s)t.d(n,a,function(o){return s[o]}.bind(null,a));return n},t.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(u,"a",u),u},t.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},t.p="",t(t.s=1528)}([function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}function s(r,h,d){var l=d?r[h]:Object.getOwnPropertyDescriptor(r,h);return!d&&l.value&&typeof l.value=="object"&&(l=l.value),l&&t(l)?(typeof l.enumerable=="undefined"&&(l.enumerable=!0),typeof l.configurable=="undefined"&&(l.configurable=!0),l):!1}function u(r,h){var d=Object.getOwnPropertyDescriptor(r,h);return d?(d.value&&typeof d.value=="object"&&(d=d.value),d.configurable===!1):!1}function n(r,h,d,l){for(var f in h)if(!!h.hasOwnProperty(f)){var c=s(h,f,d);if(c!==!1){var g=l||r;if(u(g.prototype,f)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+f+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(r.prototype,f,c)}else r.prototype[f]=h[f]}}function a(r,h){if(!!h){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++)n(r,h[d].prototype||h[d])}}function o(r){r||(r={});var h,d;if(r.initialize){if(typeof r.initialize!="function")throw new Error("initialize must be a function");h=r.initialize,delete r.initialize}else if(r.Extends){var l=r.Extends;h=function(){l.apply(this,arguments)}}else h=function(){};r.Extends?(h.prototype=Object.create(r.Extends.prototype),h.prototype.constructor=h,d=r.Extends,delete r.Extends):h.prototype.constructor=h;var f=null;return r.Mixins&&(f=r.Mixins,delete r.Mixins),a(h,f),n(h,r,!0,d),h}o.extend=n,o.mixin=a,o.ignoreFinals=!1,e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=typeof s;return!s||a==="number"||a==="string"?n:s.hasOwnProperty(u)&&s[u]!==void 0?s[u]:n};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(124),n=new s({initialize:function(o,r){this.x=0,this.y=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0):(r===void 0&&(r=o),this.x=o||0,this.y=r||0)},clone:function(){return new n(this.x,this.y)},copy:function(a){return this.x=a.x||0,this.y=a.y||0,this},setFromObject:function(a){return this.x=a.x||0,this.y=a.y||0,this},set:function(a,o){return o===void 0&&(o=a),this.x=a,this.y=o,this},setTo:function(a,o){return this.set(a,o)},setToPolar:function(a,o){return o==null&&(o=1),this.x=Math.cos(a)*o,this.y=Math.sin(a)*o,this},equals:function(a){return this.x===a.x&&this.y===a.y},fuzzyEquals:function(a,o){return u(this.x,a.x,o)&&u(this.y,a.y,o)},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},setAngle:function(a){return this.setToPolar(a,this.length())},add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(a){var o=a.x-this.x,r=a.y-this.y;return Math.sqrt(o*o+r*r)},distanceSq:function(a){var o=a.x-this.x,r=a.y-this.y;return o*o+r*r},length:function(){var a=this.x,o=this.y;return Math.sqrt(a*a+o*o)},setLength:function(a){return this.normalize().scale(a)},lengthSq:function(){var a=this.x,o=this.y;return a*a+o*o},normalize:function(){var a=this.x,o=this.y,r=a*a+o*o;return r>0&&(r=1/Math.sqrt(r),this.x=a*r,this.y=o*r),this},normalizeRightHand:function(){var a=this.x;return this.x=this.y*-1,this.y=a,this},normalizeLeftHand:function(){var a=this.x;return this.x=this.y,this.y=a*-1,this},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lerp:function(a,o){o===void 0&&(o=0);var r=this.x,h=this.y;return this.x=r+o*(a.x-r),this.y=h+o*(a.y-h),this},transformMat3:function(a){var o=this.x,r=this.y,h=a.val;return this.x=h[0]*o+h[3]*r+h[6],this.y=h[1]*o+h[4]*r+h[7],this},transformMat4:function(a){var o=this.x,r=this.y,h=a.val;return this.x=h[0]*o+h[4]*r+h[12],this.y=h[1]*o+h[5]*r+h[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(a){var o=this.length();return o&&o>a&&this.scale(a/o),this},reflect:function(a){return a=a.clone().normalize(),this.subtract(a.scale(2*this.dot(a)))},mirror:function(a){return this.reflect(a).negate()},rotate:function(a){var o=Math.cos(a),r=Math.sin(a);return this.set(o*this.x-r*this.y,r*this.x+o*this.y)}});n.ZERO=new n,n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.UP=new n(0,-1),n.DOWN=new n(0,1),n.ONE=new n(1,1),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(56),n=new s({initialize:function(o,r){o===void 0&&(o=0),r===void 0&&(r=o),this.type=u.POINT,this.x=o,this.y=r},setTo:function(a,o){return a===void 0&&(a=0),o===void 0&&(o=a),this.x=a,this.y=o,this}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(24),n=t(20),a=new s({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},existing:function(o){return(o.renderCanvas||o.renderWebGL)&&this.displayList.add(o),o.preUpdate&&this.updateList.add(o),o},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(o,r){a.prototype.hasOwnProperty(o)||(a.prototype[o]=r)},a.remove=function(o){a.prototype.hasOwnProperty(o)&&delete a.prototype[o]},u.register("GameObjectFactory",a,"add"),e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(!s||typeof s=="number")return n;if(s.hasOwnProperty(u))return s[u];if(u.indexOf(".")!==-1){for(var a=u.split("."),o=s,r=n,h=0;h<a.length;h++)if(o.hasOwnProperty(a[h]))r=o[a[h]],o=o[a[h]];else{r=n;break}return r}else return n};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(typeof s!="object"||s.nodeType||s===s.window)return!1;try{if(s.constructor&&!{}.hasOwnProperty.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},s={install:function(u){for(var n in t)u[n]=t[n]},register:function(u,n){t[u]=n},destroy:function(){t={}}};e.exports=s},function(e,v,t){var s=Object.prototype.hasOwnProperty,u="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(u=!1));function a(d,l,f){this.fn=d,this.context=l,this.once=f||!1}function o(d,l,f,c,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new a(f,c||d,g),x=u?u+l:l;return d._events[x]?d._events[x].fn?d._events[x]=[d._events[x],p]:d._events[x].push(p):(d._events[x]=p,d._eventsCount++),d}function r(d,l){--d._eventsCount===0?d._events=new n:delete d._events[l]}function h(){this._events=new n,this._eventsCount=0}h.prototype.eventNames=function(){var l=[],f,c;if(this._eventsCount===0)return l;for(c in f=this._events)s.call(f,c)&&l.push(u?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(f)):l},h.prototype.listeners=function(l){var f=u?u+l:l,c=this._events[f];if(!c)return[];if(c.fn)return[c.fn];for(var g=0,p=c.length,x=new Array(p);g<p;g++)x[g]=c[g].fn;return x},h.prototype.listenerCount=function(l){var f=u?u+l:l,c=this._events[f];return c?c.fn?1:c.length:0},h.prototype.emit=function(l,f,c,g,p,x){var y=u?u+l:l;if(!this._events[y])return!1;var T=this._events[y],E=arguments.length,S,C;if(T.fn){switch(T.once&&this.removeListener(l,T.fn,void 0,!0),E){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,f),!0;case 3:return T.fn.call(T.context,f,c),!0;case 4:return T.fn.call(T.context,f,c,g),!0;case 5:return T.fn.call(T.context,f,c,g,p),!0;case 6:return T.fn.call(T.context,f,c,g,p,x),!0}for(C=1,S=new Array(E-1);C<E;C++)S[C-1]=arguments[C];T.fn.apply(T.context,S)}else{var P=T.length,R;for(C=0;C<P;C++)switch(T[C].once&&this.removeListener(l,T[C].fn,void 0,!0),E){case 1:T[C].fn.call(T[C].context);break;case 2:T[C].fn.call(T[C].context,f);break;case 3:T[C].fn.call(T[C].context,f,c);break;case 4:T[C].fn.call(T[C].context,f,c,g);break;default:if(!S)for(R=1,S=new Array(E-1);R<E;R++)S[R-1]=arguments[R];T[C].fn.apply(T[C].context,S)}}return!0},h.prototype.on=function(l,f,c){return o(this,l,f,c,!1)},h.prototype.once=function(l,f,c){return o(this,l,f,c,!0)},h.prototype.removeListener=function(l,f,c,g){var p=u?u+l:l;if(!this._events[p])return this;if(!f)return r(this,p),this;var x=this._events[p];if(x.fn)x.fn===f&&(!g||x.once)&&(!c||x.context===c)&&r(this,p);else{for(var y=0,T=[],E=x.length;y<E;y++)(x[y].fn!==f||g&&!x[y].once||c&&x[y].context!==c)&&T.push(x[y]);T.length?this._events[p]=T.length===1?T[0]:T:r(this,p)}return this},h.prototype.removeAllListeners=function(l){var f;return l?(f=u?u+l:l,this._events[f]&&r(this,f)):(this._events=new n,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=u,h.EventEmitter=h,e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(57),n=t(171),a=t(306),o=t(56),r=t(47),h=t(174),d=new s({initialize:function(f,c,g,p){f===void 0&&(f=0),c===void 0&&(c=0),g===void 0&&(g=0),p===void 0&&(p=0),this.type=o.RECTANGLE,this.x=f,this.y=c,this.width=g,this.height=p},contains:function(l,f){return u(this,l,f)},getPoint:function(l,f){return n(this,l,f)},getPoints:function(l,f,c){return a(this,l,f,c)},getRandomPoint:function(l){return h(this,l)},setTo:function(l,f,c,g){return this.x=l,this.y=f,this.width=c,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(l,f){return f===void 0&&(f=l),this.x=l,this.y=f,this},setSize:function(l,f){return f===void 0&&(f=l),this.width=l,this.height=f,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(l){return l===void 0&&(l=new r),l.setTo(this.x,this.y,this.right,this.y),l},getLineB:function(l){return l===void 0&&(l=new r),l.setTo(this.right,this.y,this.right,this.bottom),l},getLineC:function(l){return l===void 0&&(l=new r),l.setTo(this.right,this.bottom,this.x,this.bottom),l},getLineD:function(l){return l===void 0&&(l=new r),l.setTo(this.x,this.bottom,this.x,this.y),l},left:{get:function(){return this.x},set:function(l){l>=this.right?this.width=0:this.width=this.right-l,this.x=l}},right:{get:function(){return this.x+this.width},set:function(l){l<=this.x?this.width=0:this.width=l-this.x}},top:{get:function(){return this.y},set:function(l){l>=this.bottom?this.height=0:this.height=this.bottom-l,this.y=l}},bottom:{get:function(){return this.y+this.height},set:function(l){l<=this.y?this.height=0:this.height=l-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(l){this.x=l-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(l){this.y=l-this.height/2}}});e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Alpha:t(607),AlphaSingle:t(303),BlendMode:t(304),ComputedSize:t(608),Crop:t(609),Depth:t(305),Flip:t(610),GetBounds:t(611),Mask:t(309),Origin:t(632),PathFollower:t(633),Pipeline:t(167),ScrollFactor:t(312),Size:t(634),Texture:t(635),TextureCrop:t(636),Tint:t(637),ToJSON:t(176),Transform:t(313),TransformMatrix:t(25),Visible:t(314)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(s){for(var u="",n=0;n<s;++n)n>0&&(u+=`
else `),n<s-1&&(u+="if(test == "+n+".0){}");return u}e.exports={getTintFromFloats:function(s,u,n,a){var o=(s*255|0)&255,r=(u*255|0)&255,h=(n*255|0)&255,d=(a*255|0)&255;return(d<<24|o<<16|r<<8|h)>>>0},getTintAppendFloatAlpha:function(s,u){var n=(u*255|0)&255;return(n<<24|s)>>>0},getTintAppendFloatAlphaAndSwap:function(s,u){var n=(s>>16|0)&255,a=(s>>8|0)&255,o=(s|0)&255,r=(u*255|0)&255;return(r<<24|o<<16|a<<8|n)>>>0},getFloatsFromUintRGB:function(s){var u=(s>>16|0)&255,n=(s>>8|0)&255,a=(s|0)&255;return[u/255,n/255,a/255]},checkShaderMax:function(s,u){(!u||u===-1)&&(u=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS));for(var n=s.createShader(s.FRAGMENT_SHADER),a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var o=a.replace(/%forloop%/gi,t(u));if(s.shaderSource(n,o),s.compileShader(n),!s.getShaderParameter(n,s.COMPILE_STATUS))u=u/2|0;else break}return u},parseFragmentShaderMaxTextures:function(s,u){if(!s)return"";for(var n="",a=0;a<u;a++)a>0&&(n+=`
	else `),a<u-1&&(n+="if (outTexId < "+a+".5)"),n+=`
	{`,n+=`
		texture = texture2D(uMainSampler[`+a+"], outTexCoord);",n+=`
	}`;return s=s.replace(/%count%/gi,u.toString()),s.replace(/%forloop%/gi,n)}}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(193),u=t(6),n=function(a,o,r){var h=u(a,o,null);if(h===null)return r;if(Array.isArray(h))return s.RND.pick(h);if(typeof h=="object"){if(h.hasOwnProperty("randInt"))return s.RND.integerInRange(h.randInt[0],h.randInt[1]);if(h.hasOwnProperty("randFloat"))return s.RND.realInRange(h.randFloat[0],h.randFloat[1])}else if(typeof h=="function")return h(o);return h};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(176),n=t(101),a=t(9),o=t(75),r=t(20),h=new s({Extends:a,initialize:function(l,f){a.call(this),this.scene=l,this.displayList=null,this.type=f,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this),l.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(d,l){return this.data||(this.data=new n(this)),this.data.set(d,l),this},incData:function(d,l){return this.data||(this.data=new n(this)),this.data.inc(d,l),this},toggleData:function(d){return this.data||(this.data=new n(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new n(this)),this.data.get(d)},setInteractive:function(d,l,f){return this.scene.sys.input.enable(this,d,l,f),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(d){return!(h.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,l=this.parentContainer,f=[];l&&(f.unshift(l.getIndex(d)),d=l,l.parentContainer);)l=l.parentContainer;return this.displayList?f.unshift(this.displayList.getIndex(d)):f.unshift(this.scene.sys.displayList.getIndex(d)),f},addToDisplayList:function(d){return d===void 0&&(d=this.scene.sys.displayList),this.displayList&&this.displayList!==d&&this.removeFromDisplayList(),d.exists(this)||(this.displayList=d,d.add(this,!0),d.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),d.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var d=this.displayList||this.scene.sys.displayList;return d.exists(this)&&(d.remove(this,!0),d.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),d.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(d){!this.scene||this.ignoreDestroy||(d===void 0&&(d=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(o.DESTROY,this,d),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});h.RENDER_MASK=15,e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(24),n=t(20),a=new s({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(o,r){a.prototype.hasOwnProperty(o)||(a.prototype[o]=r)},a.remove=function(o){a.prototype.hasOwnProperty(o)&&delete a.prototype[o]},u.register("GameObjectCreator",a,"make"),e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(7),u=function(){var n,a,o,r,h,d,l=arguments[0]||{},f=1,c=arguments.length,g=!1;for(typeof l=="boolean"&&(g=l,l=arguments[1]||{},f=2),c===f&&(l=this,--f);f<c;f++)if((n=arguments[f])!=null)for(a in n)o=l[a],r=n[a],l!==r&&(g&&r&&(s(r)||(h=Array.isArray(r)))?(h?(h=!1,d=o&&Array.isArray(o)?o:[]):d=o&&s(o)?o:{},l[a]=u(g,d,r)):r!==void 0&&(l[a]=r));return l};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.max(u,Math.min(n,s))};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=new s,n=new s,a=new s,o={camera:u,sprite:n,calc:a},r=function(h,d,l){var f=u,c=n,g=a;return c.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),f.copyFrom(d.matrix),l?(f.multiplyWithOffset(l,-d.scrollX*h.scrollFactorX,-d.scrollY*h.scrollFactorY),c.e=h.x,c.f=h.y):(c.e-=d.scrollX*h.scrollFactorX,c.f-=d.scrollY*h.scrollFactorY),f.multiply(c,g),o};e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:t(656),BOOT:t(657),CREATE:t(658),DESTROY:t(659),PAUSE:t(660),POST_UPDATE:t(661),PRE_RENDER:t(662),PRE_UPDATE:t(663),READY:t(664),REMOVED_FROM_SCENE:t(665),RENDER:t(666),RESUME:t(667),SHUTDOWN:t(668),SLEEP:t(669),START:t(670),TRANSITION_COMPLETE:t(671),TRANSITION_INIT:t(672),TRANSITION_OUT:t(673),TRANSITION_START:t(674),TRANSITION_WAKE:t(675),UPDATE:t(676),WAKE:t(677)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BLUR:t(612),BOOT:t(613),CONTEXT_LOST:t(614),CONTEXT_RESTORED:t(615),DESTROY:t(616),FOCUS:t(617),HIDDEN:t(618),PAUSE:t(619),POST_RENDER:t(620),POST_STEP:t(621),PRE_RENDER:t(622),PRE_STEP:t(623),READY:t(624),RESUME:t(625),STEP:t(626),VISIBLE:t(627)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(95),a=t(2),o=t(155),r=t(240),h=t(517),d=t(156),l=new s({initialize:function(c,g){this.loader=c,this.cache=a(g,"cache",!1),this.type=a(g,"type",!1),this.key=a(g,"key",!1);var p=this.key;if(c.prefix&&c.prefix!==""&&(this.key=c.prefix+p),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var x=a(g,"url");x===void 0?x=c.path+p+"."+a(g,"extension",""):typeof x=="string"&&!x.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(x=c.path+x),this.url=x,this.src="",this.xhrSettings=d(a(g,"responseType",void 0)),a(g,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,a(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?u.FILE_POPULATED:u.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=a(g,"config",{}),this.multiFile,this.linkFile},setLink:function(f){this.linkFile=f,f.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===u.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=u.FILE_LOADING,this.src=o(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=h(this,this.loader.xhr))},onLoad:function(f,c){var g=f.responseURL&&(f.responseURL.indexOf("file://")===0||f.responseURL.indexOf("capacitor://")===0),p=g&&c.target.status===0,x=!(c.target&&c.target.status!==200)||p;f.readyState===4&&f.status>=400&&f.status<=599&&(x=!1),this.state=u.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,x)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(f){f.lengthComputable&&(this.bytesLoaded=f.loaded,this.bytesTotal=f.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=u.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=u.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=u.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(f){f===void 0&&(f=this.data);var c=this.key,g=this.type;this.loader.emit(n.FILE_COMPLETE,c,g,f),this.loader.emit(n.FILE_KEY_COMPLETE+g+"-"+c,c,g,f),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(f,c,g){if(typeof URL=="function")f.src=URL.createObjectURL(c);else{var p=new FileReader;p.onload=function(){f.removeAttribute("crossOrigin"),f.src="data:"+(c.type||g)+";base64,"+p.result.split(",")[1]},p.onerror=f.onerror,p.readAsDataURL(c)}},l.revokeObjectURL=function(f){typeof URL=="function"&&URL.revokeObjectURL(f.src)},e.exports=l},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},s={},u={};u.register=function(n,a,o,r){r===void 0&&(r=!1),t[n]={plugin:a,mapping:o,custom:r}},u.registerCustom=function(n,a,o,r){s[n]={plugin:a,mapping:o,data:r}},u.hasCore=function(n){return t.hasOwnProperty(n)},u.hasCustom=function(n){return s.hasOwnProperty(n)},u.getCore=function(n){return t[n]},u.getCustom=function(n){return s[n]},u.getCustomClass=function(n){return s.hasOwnProperty(n)?s[n].plugin:null},u.remove=function(n){t.hasOwnProperty(n)&&delete t[n]},u.removeCustom=function(n){s.hasOwnProperty(n)&&delete s[n]},u.destroyCorePlugins=function(){for(var n in t)t.hasOwnProperty(n)&&delete t[n]},u.destroyCustomPlugins=function(){for(var n in s)s.hasOwnProperty(n)&&delete s[n]},e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(14),n=t(3),a=new s({initialize:function(r,h,d,l,f,c){r===void 0&&(r=1),h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=1),f===void 0&&(f=0),c===void 0&&(c=0),this.matrix=new Float32Array([r,h,d,l,f,c,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(o){this.matrix[0]=o}},b:{get:function(){return this.matrix[1]},set:function(o){this.matrix[1]=o}},c:{get:function(){return this.matrix[2]},set:function(o){this.matrix[2]=o}},d:{get:function(){return this.matrix[3]},set:function(o){this.matrix[3]=o}},e:{get:function(){return this.matrix[4]},set:function(o){this.matrix[4]=o}},f:{get:function(){return this.matrix[5]},set:function(o){this.matrix[5]=o}},tx:{get:function(){return this.matrix[4]},set:function(o){this.matrix[4]=o}},ty:{get:function(){return this.matrix[5]},set:function(o){this.matrix[5]=o}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var o=this.matrix,r=o[0],h=o[1],d=o[2],l=o[3];return r||h?h>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):d||l?u.TAU-(l>0?Math.acos(-d/this.scaleY):-Math.acos(d/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var o=this.matrix;return o[0]=1,o[1]=0,o[2]=0,o[3]=1,o[4]=0,o[5]=0,this},translate:function(o,r){var h=this.matrix;return h[4]=h[0]*o+h[2]*r+h[4],h[5]=h[1]*o+h[3]*r+h[5],this},scale:function(o,r){var h=this.matrix;return h[0]*=o,h[1]*=o,h[2]*=r,h[3]*=r,this},rotate:function(o){var r=Math.sin(o),h=Math.cos(o),d=this.matrix,l=d[0],f=d[1],c=d[2],g=d[3];return d[0]=l*h+c*r,d[1]=f*h+g*r,d[2]=l*-r+c*h,d[3]=f*-r+g*h,this},multiply:function(o,r){var h=this.matrix,d=o.matrix,l=h[0],f=h[1],c=h[2],g=h[3],p=h[4],x=h[5],y=d[0],T=d[1],E=d[2],S=d[3],C=d[4],P=d[5],R=r===void 0?this:r;return R.a=y*l+T*c,R.b=y*f+T*g,R.c=E*l+S*c,R.d=E*f+S*g,R.e=C*l+P*c+p,R.f=C*f+P*g+x,R},multiplyWithOffset:function(o,r,h){var d=this.matrix,l=o.matrix,f=d[0],c=d[1],g=d[2],p=d[3],x=d[4],y=d[5],T=r*f+h*g+x,E=r*c+h*p+y,S=l[0],C=l[1],P=l[2],R=l[3],A=l[4],M=l[5];return d[0]=S*f+C*g,d[1]=S*c+C*p,d[2]=P*f+R*g,d[3]=P*c+R*p,d[4]=A*f+M*g+T,d[5]=A*c+M*p+E,this},transform:function(o,r,h,d,l,f){var c=this.matrix,g=c[0],p=c[1],x=c[2],y=c[3],T=c[4],E=c[5];return c[0]=o*g+r*x,c[1]=o*p+r*y,c[2]=h*g+d*x,c[3]=h*p+d*y,c[4]=l*g+f*x+T,c[5]=l*p+f*y+E,this},transformPoint:function(o,r,h){h===void 0&&(h={x:0,y:0});var d=this.matrix,l=d[0],f=d[1],c=d[2],g=d[3],p=d[4],x=d[5];return h.x=o*l+r*c+p,h.y=o*f+r*g+x,h},invert:function(){var o=this.matrix,r=o[0],h=o[1],d=o[2],l=o[3],f=o[4],c=o[5],g=r*l-h*d;return o[0]=l/g,o[1]=-h/g,o[2]=-d/g,o[3]=r/g,o[4]=(d*c-l*f)/g,o[5]=-(r*c-h*f)/g,this},copyFrom:function(o){var r=this.matrix;return r[0]=o.a,r[1]=o.b,r[2]=o.c,r[3]=o.d,r[4]=o.e,r[5]=o.f,this},copyFromArray:function(o){var r=this.matrix;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],this},copyToContext:function(o){var r=this.matrix;return o.transform(r[0],r[1],r[2],r[3],r[4],r[5]),o},setToContext:function(o){var r=this.matrix;return o.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),o},copyToArray:function(o){var r=this.matrix;return o===void 0?o=[r[0],r[1],r[2],r[3],r[4],r[5]]:(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5]),o},setTransform:function(o,r,h,d,l,f){var c=this.matrix;return c[0]=o,c[1]=r,c[2]=h,c[3]=d,c[4]=l,c[5]=f,this},decomposeMatrix:function(){var o=this.decomposedMatrix,r=this.matrix,h=r[0],d=r[1],l=r[2],f=r[3],c=h*f-d*l;if(o.translateX=r[4],o.translateY=r[5],h||d){var g=Math.sqrt(h*h+d*d);o.rotation=d>0?Math.acos(h/g):-Math.acos(h/g),o.scaleX=g,o.scaleY=c/g}else if(l||f){var p=Math.sqrt(l*l+f*f);o.rotation=Math.PI*.5-(f>0?Math.acos(-l/p):-Math.acos(l/p)),o.scaleX=c/p,o.scaleY=p}else o.rotation=0,o.scaleX=0,o.scaleY=0;return o},applyITRS:function(o,r,h,d,l){var f=this.matrix,c=Math.sin(h),g=Math.cos(h);return f[4]=o,f[5]=r,f[0]=g*d,f[1]=c*d,f[2]=-c*l,f[3]=g*l,this},applyInverse:function(o,r,h){h===void 0&&(h=new n);var d=this.matrix,l=d[0],f=d[1],c=d[2],g=d[3],p=d[4],x=d[5],y=1/(l*g+c*-f);return h.x=g*y*o+-c*y*r+(x*c-p*g)*y,h.y=l*y*r+-f*y*o+(-x*l+p*f)*y,h},getX:function(o,r){return o*this.a+r*this.c+this.e},getY:function(o,r){return o*this.b+r*this.d+this.f},getXRound:function(o,r,h){var d=this.getX(o,r);return h&&(d=Math.round(d)),d},getYRound:function(o,r,h){var d=this.getY(o,r);return h&&(d=Math.round(d)),d},getCSSMatrix:function(){var o=this.matrix;return"matrix("+o[0]+","+o[1]+","+o[2]+","+o[3]+","+o[4]+","+o[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,a,o,r,h,d){n===void 0&&(n=0),a===void 0&&(a=0),o===void 0&&(o=d.width),r===void 0&&(r=d.height),h||(h={});var l=s(h,"isNotEmpty",!1),f=s(h,"isColliding",!1),c=s(h,"hasInterestingFace",!1);n<0&&(o+=n,n=0),a<0&&(r+=a,a=0),n+o>d.width&&(o=Math.max(d.width-n,0)),a+r>d.height&&(r=Math.max(d.height-a,0));for(var g=[],p=a;p<a+r;p++)for(var x=n;x<n+o;x++){var y=d.data[p][x];if(y!==null){if(l&&y.index===-1||f&&!y.collides||c&&!y.hasInterestingFace)continue;g.push(y)}}return g};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o,r){a===void 0&&(a=0),o===void 0&&(o=0),r===void 0&&(r=1);var h,d=0,l=s.length;if(r===1)for(h=o;h<l;h++)s[h][u]=n+d*a,d++;else for(h=o;h>=0;h--)s[h][u]=n+d*a,d++;return s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(13),n=function(a,o,r){o.x=u(r,"x",0),o.y=u(r,"y",0),o.depth=u(r,"depth",0),o.flipX=u(r,"flipX",!1),o.flipY=u(r,"flipY",!1);var h=u(r,"scale",null);typeof h=="number"?o.setScale(h):h!==null&&(o.scaleX=u(h,"x",1),o.scaleY=u(h,"y",1));var d=u(r,"scrollFactor",null);typeof d=="number"?o.setScrollFactor(d):d!==null&&(o.scrollFactorX=u(d,"x",1),o.scrollFactorY=u(d,"y",1)),o.rotation=u(r,"rotation",0);var l=u(r,"angle",null);l!==null&&(o.angle=l),o.alpha=u(r,"alpha",1);var f=u(r,"origin",null);if(typeof f=="number")o.setOrigin(f);else if(f!==null){var c=u(f,"x",.5),g=u(f,"y",.5);o.setOrigin(c,g)}o.blendMode=u(r,"blendMode",s.NORMAL),o.visible=u(r,"visible",!0);var p=u(r,"add",!0);return p&&a.sys.displayList.add(o),o.preUpdate&&a.sys.updateList.add(o),o};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,a,o,r,h){var d=r.alpha*o.alpha;if(d<=0)return!1;var l=s(o,r,h).calc;return a.globalCompositeOperation=n.blendModes[o.blendMode],a.globalAlpha=d,a.save(),l.setToContext(a),a.imageSmoothingEnabled=!(!n.antialias||o.frame&&o.frame.source.scaleMode),!0};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33),u=t(192),n=[],a=!1,o=function(){var r=function(y,T,E,S,C){T===void 0&&(T=1),E===void 0&&(E=1),S===void 0&&(S=s.CANVAS),C===void 0&&(C=!1);var P,R=l(S);return R===null?(R={parent:y,canvas:document.createElement("canvas"),type:S},S===s.CANVAS&&n.push(R),P=R.canvas):(R.parent=y,P=R.canvas),C&&(R.parent=P),P.width=T,P.height=E,a&&S===s.CANVAS&&u.disable(P.getContext("2d")),P},h=function(y,T,E){return r(y,T,E,s.CANVAS)},d=function(y,T,E){return r(y,T,E,s.WEBGL)},l=function(y){if(y===void 0&&(y=s.CANVAS),y===s.WEBGL)return null;for(var T=0;T<n.length;T++){var E=n[T];if(!E.parent&&E.type===y)return E}return null},f=function(y){var T=y instanceof HTMLCanvasElement;n.forEach(function(E){(T&&E.canvas===y||!T&&E.parent===y)&&(E.parent=null,E.canvas.width=1,E.canvas.height=1)})},c=function(){var y=0;return n.forEach(function(T){T.parent&&y++}),y},g=function(){return n.length-c()},p=function(){a=!0},x=function(){a=!1};return{create2D:h,create:r,createWebGL:d,disableSmoothing:p,enableSmoothing:x,first:l,free:g,pool:n,remove:f,total:c}};e.exports=o()},function(e,v){var t={};e.exports=t,function(){t._nextId=0,t._seed=0,t._nowStartTime=+new Date,t.extend=function(u,n){var a,o;typeof n=="boolean"?(a=2,o=n):(a=1,o=!0);for(var r=a;r<arguments.length;r++){var h=arguments[r];if(h)for(var d in h)o&&h[d]&&h[d].constructor===Object&&(!u[d]||u[d].constructor===Object)?(u[d]=u[d]||{},t.extend(u[d],o,h[d])):u[d]=h[d]}return u},t.clone=function(u,n){return t.extend({},n,u)},t.keys=function(u){if(Object.keys)return Object.keys(u);var n=[];for(var a in u)n.push(a);return n},t.values=function(u){var n=[];if(Object.keys){for(var a=Object.keys(u),o=0;o<a.length;o++)n.push(u[a[o]]);return n}for(var r in u)n.push(u[r]);return n},t.get=function(u,n,a,o){n=n.split(".").slice(a,o);for(var r=0;r<n.length;r+=1)u=u[n[r]];return u},t.set=function(u,n,a,o,r){var h=n.split(".").slice(o,r);return t.get(u,n,0,-1)[h[h.length-1]]=a,a},t.shuffle=function(u){for(var n=u.length-1;n>0;n--){var a=Math.floor(t.random()*(n+1)),o=u[n];u[n]=u[a],u[a]=o}return u},t.choose=function(u){return u[Math.floor(t.random()*u.length)]},t.isElement=function(u){return typeof HTMLElement!="undefined"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},t.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},t.isFunction=function(u){return typeof u=="function"},t.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},t.isString=function(u){return Object.prototype.toString.call(u)==="[object String]"},t.clamp=function(u,n,a){return u<n?n:u>a?a:u},t.sign=function(u){return u<0?-1:1},t.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-t._nowStartTime},t.random=function(u,n){return u=typeof u!="undefined"?u:0,n=typeof n!="undefined"?n:1,u+s()*(n-u)};var s=function(){return t._seed=(t._seed*9301+49297)%233280,t._seed/233280};t.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},t.logLevel=1,t.log=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.info=function(){console&&t.logLevel>0&&t.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.warn=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.nextId=function(){return t._nextId++},t.indexOf=function(u,n){if(u.indexOf)return u.indexOf(n);for(var a=0;a<u.length;a++)if(u[a]===n)return a;return-1},t.map=function(u,n){if(u.map)return u.map(n);for(var a=[],o=0;o<u.length;o+=1)a.push(n(u[o]));return a},t.topologicalSort=function(u){var n=[],a=[],o=[];for(var r in u)!a[r]&&!o[r]&&t._topologicalSort(r,a,o,u,n);return n},t._topologicalSort=function(u,n,a,o,r){var h=o[u]||[];a[u]=!0;for(var d=0;d<h.length;d+=1){var l=h[d];a[l]||n[l]||t._topologicalSort(l,n,a,o,r)}a[u]=!1,n[u]=!0,r.push(u)},t.chain=function(){for(var u=[],n=0;n<arguments.length;n+=1){var a=arguments[n];a._chained?u.push.apply(u,a._chained):u.push(a)}var o=function(){for(var r,h=new Array(arguments.length),d=0,l=arguments.length;d<l;d++)h[d]=arguments[d];for(d=0;d<u.length;d+=1){var f=u[d].apply(r,h);typeof f!="undefined"&&(r=f)}return r};return o._chained=u,o},t.chainPathBefore=function(u,n,a){return t.set(u,n,t.chain(a,t.get(u,n)))},t.chainPathAfter=function(u,n,a){return t.set(u,n,t.chain(t.get(u,n),a))}}()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={VERSION:"3.55.2",BlendModes:t(35),ScaleModes:t(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(47),o=new s({Extends:n,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Transform,u.Visible],initialize:function(h,d,l){d===void 0&&(d="Shape"),n.call(this,h,d),this.geom=l,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(r,h){return h===void 0&&(h=1),r===void 0?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=h,this.isFilled=!0),this},setStrokeStyle:function(r,h,d){return d===void 0&&(d=1),r===void 0?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=h,this.strokeAlpha=d,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,h){return this.width=r,this.height=h,this},setDisplaySize:function(r,h){return this.displayWidth=r,this.displayHeight=h,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n){return n*s.DEG_TO_RAD};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DESTROY:t(743),FADE_IN_COMPLETE:t(744),FADE_IN_START:t(745),FADE_OUT_COMPLETE:t(746),FADE_OUT_START:t(747),FLASH_COMPLETE:t(748),FLASH_START:t(749),FOLLOW_UPDATE:t(750),PAN_COMPLETE:t(751),PAN_START:t(752),POST_RENDER:t(753),PRE_RENDER:t(754),ROTATE_COMPLETE:t(755),ROTATE_START:t(756),SHAKE_COMPLETE:t(757),SHAKE_START:t(758),ZOOM_COMPLETE:t(759),ZOOM_START:t(760)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(103),n=t(328),a=t(188),o=t(329),r=new s({initialize:function(d,l,f,c){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(d,l,f,c)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(h,d,l,f,c){return f===void 0&&(f=255),c===void 0&&(c=!0),this._locked=!0,this.red=h,this.green=d,this.blue=l,this.alpha=f,this._locked=!1,this.update(c)},setGLTo:function(h,d,l,f){return f===void 0&&(f=1),this._locked=!0,this.redGL=h,this.greenGL=d,this.blueGL=l,this.alphaGL=f,this._locked=!1,this.update(!0)},setFromRGB:function(h){return this._locked=!0,this.red=h.r,this.green=h.g,this.blue=h.b,h.hasOwnProperty("a")&&(this.alpha=h.a),this._locked=!1,this.update(!0)},setFromHSV:function(h,d,l){return a(h,d,l,this)},update:function(h){if(h===void 0&&(h=!1),this._locked)return this;var d=this.r,l=this.g,f=this.b,c=this.a;return this._color=u(d,l,f),this._color32=n(d,l,f,c),this._rgba="rgba("+d+","+l+","+f+","+c/255+")",h&&o(d,l,f,this),this},updateHSV:function(){var h=this.r,d=this.g,l=this.b;return o(h,d,l,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(h){return this.setTo(h,h,h)},random:function(h,d){h===void 0&&(h=0),d===void 0&&(d=255);var l=Math.floor(h+Math.random()*(d-h)),f=Math.floor(h+Math.random()*(d-h)),c=Math.floor(h+Math.random()*(d-h));return this.setTo(l,f,c)},randomGray:function(h,d){h===void 0&&(h=0),d===void 0&&(d=255);var l=Math.floor(h+Math.random()*(d-h));return this.setTo(l,l,l)},saturate:function(h){return this.s+=h/100,this},desaturate:function(h){return this.s-=h/100,this},lighten:function(h){return this.v+=h/100,this},darken:function(h){return this.v-=h/100,this},brighten:function(h){var d=this.r,l=this.g,f=this.b;return d=Math.max(0,Math.min(255,d-Math.round(255*-(h/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(h/100)))),f=Math.max(0,Math.min(255,f-Math.round(255*-(h/100)))),this.setTo(d,l,f)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(h){this.gl[0]=Math.min(Math.abs(h),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(h){this.gl[1]=Math.min(Math.abs(h),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(h){this.gl[2]=Math.min(Math.abs(h),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(h){this.gl[3]=Math.min(Math.abs(h),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(h){h=Math.floor(Math.abs(h)),this.r=Math.min(h,255),this.gl[0]=h/255,this.update(!0)}},green:{get:function(){return this.g},set:function(h){h=Math.floor(Math.abs(h)),this.g=Math.min(h,255),this.gl[1]=h/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(h){h=Math.floor(Math.abs(h)),this.b=Math.min(h,255),this.gl[2]=h/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(h){h=Math.floor(Math.abs(h)),this.a=Math.min(h,255),this.gl[3]=h/255,this.update()}},h:{get:function(){return this._h},set:function(h){this._h=h,a(h,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(h){this._s=h,a(this._h,h,this._v,this)}},v:{get:function(){return this._v},set:function(h){this._v=h,a(this._h,this._s,h,this)}}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o,r){this.x=0,this.y=0,this.z=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=o||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this},max:function(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this},clone:function(){return new u(this.x,this.y,this.z)},addVectors:function(n,a){return this.x=n.x+a.x,this.y=n.y+a.y,this.z=n.z+a.z,this},crossVectors:function(n,a){var o=n.x,r=n.y,h=n.z,d=a.x,l=a.y,f=a.z;return this.x=r*f-h*l,this.y=h*d-o*f,this.z=o*l-r*d,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this},set:function(n,a,o){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=a||0,this.z=o||0),this},setFromMatrixPosition:function(n){return this.fromArray(n.val,12)},setFromMatrixColumn:function(n,a){return this.fromArray(n.val,a*4)},fromArray:function(n,a){return a===void 0&&(a=0),this.x=n[a],this.y=n[a+1],this.z=n[a+2],this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this},addScalar:function(n){return this.x+=n,this.y+=n,this.z+=n,this},addScale:function(n,a){return this.x+=n.x*a,this.y+=n.y*a,this.z+=n.z*a||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this},scale:function(n){return isFinite(n)?(this.x*=n,this.y*=n,this.z*=n):(this.x=0,this.y=0,this.z=0),this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(n){var a=n.x-this.x,o=n.y-this.y,r=n.z-this.z||0;return Math.sqrt(a*a+o*o+r*r)},distanceSq:function(n){var a=n.x-this.x,o=n.y-this.y,r=n.z-this.z||0;return a*a+o*o+r*r},length:function(){var n=this.x,a=this.y,o=this.z;return Math.sqrt(n*n+a*a+o*o)},lengthSq:function(){var n=this.x,a=this.y,o=this.z;return n*n+a*a+o*o},normalize:function(){var n=this.x,a=this.y,o=this.z,r=n*n+a*a+o*o;return r>0&&(r=1/Math.sqrt(r),this.x=n*r,this.y=a*r,this.z=o*r),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z},cross:function(n){var a=this.x,o=this.y,r=this.z,h=n.x,d=n.y,l=n.z;return this.x=o*l-r*d,this.y=r*h-a*l,this.z=a*d-o*h,this},lerp:function(n,a){a===void 0&&(a=0);var o=this.x,r=this.y,h=this.z;return this.x=o+a*(n.x-o),this.y=r+a*(n.y-r),this.z=h+a*(n.z-h),this},applyMatrix3:function(n){var a=this.x,o=this.y,r=this.z,h=n.val;return this.x=h[0]*a+h[3]*o+h[6]*r,this.y=h[1]*a+h[4]*o+h[7]*r,this.z=h[2]*a+h[5]*o+h[8]*r,this},applyMatrix4:function(n){var a=this.x,o=this.y,r=this.z,h=n.val,d=1/(h[3]*a+h[7]*o+h[11]*r+h[15]);return this.x=(h[0]*a+h[4]*o+h[8]*r+h[12])*d,this.y=(h[1]*a+h[5]*o+h[9]*r+h[13])*d,this.z=(h[2]*a+h[6]*o+h[10]*r+h[14])*d,this},transformMat3:function(n){var a=this.x,o=this.y,r=this.z,h=n.val;return this.x=a*h[0]+o*h[3]+r*h[6],this.y=a*h[1]+o*h[4]+r*h[7],this.z=a*h[2]+o*h[5]+r*h[8],this},transformMat4:function(n){var a=this.x,o=this.y,r=this.z,h=n.val;return this.x=h[0]*a+h[4]*o+h[8]*r+h[12],this.y=h[1]*a+h[5]*o+h[9]*r+h[13],this.z=h[2]*a+h[6]*o+h[10]*r+h[14],this},transformCoordinates:function(n){var a=this.x,o=this.y,r=this.z,h=n.val,d=a*h[0]+o*h[4]+r*h[8]+h[12],l=a*h[1]+o*h[5]+r*h[9]+h[13],f=a*h[2]+o*h[6]+r*h[10]+h[14],c=a*h[3]+o*h[7]+r*h[11]+h[15];return this.x=d/c,this.y=l/c,this.z=f/c,this},transformQuat:function(n){var a=this.x,o=this.y,r=this.z,h=n.x,d=n.y,l=n.z,f=n.w,c=f*a+d*r-l*o,g=f*o+l*a-h*r,p=f*r+h*o-d*a,x=-h*a-d*o-l*r;return this.x=c*f+x*-h+g*-l-p*-d,this.y=g*f+x*-d+p*-h-c*-l,this.z=p*f+x*-l+c*-d-g*-h,this},project:function(n){var a=this.x,o=this.y,r=this.z,h=n.val,d=h[0],l=h[1],f=h[2],c=h[3],g=h[4],p=h[5],x=h[6],y=h[7],T=h[8],E=h[9],S=h[10],C=h[11],P=h[12],R=h[13],A=h[14],M=h[15],O=1/(a*c+o*y+r*C+M);return this.x=(a*d+o*g+r*T+P)*O,this.y=(a*l+o*p+r*E+R)*O,this.z=(a*f+o*x+r*S+A)*O,this},projectViewMatrix:function(n,a){return this.applyMatrix4(n).applyMatrix4(a)},unprojectViewMatrix:function(n,a){return this.applyMatrix4(n).applyMatrix4(a)},unproject:function(n,a){var o=n.x,r=n.y,h=n.z,d=n.w,l=this.x-o,f=d-this.y-1-r,c=this.z;return this.x=2*l/h-1,this.y=2*f/d-1,this.z=2*c-1,this.project(a)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});u.ZERO=new u,u.RIGHT=new u(1,0,0),u.LEFT=new u(-1,0,0),u.UP=new u(0,-1,0),u.DOWN=new u(0,1,0),u.FORWARD=new u(0,0,1),u.BACK=new u(0,0,-1),u.ONE=new u(1,1,1),e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(e,v,t){var s={};e.exports=s;var u=t(64),n=t(83),a=t(165),o=t(32),r=t(84),h=t(271);(function(){s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s.create=function(l){var f={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!l.hasOwnProperty("position")&&l.hasOwnProperty("vertices")?l.position=u.centre(l.vertices):l.hasOwnProperty("vertices")||(f.vertices=u.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var c=o.extend(f,l);return d(c,l),c.setOnCollideWith=function(g,p){return p?this.onCollideWith[g.id]=p:delete this.onCollideWith[g.id],this},c},s.nextGroup=function(l){return l?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var d=function(l,f){f=f||{},s.set(l,{bounds:l.bounds||r.create(l.vertices),positionPrev:l.positionPrev||n.clone(l.position),anglePrev:l.anglePrev||l.angle,vertices:l.vertices,parts:l.parts||[l],isStatic:l.isStatic,isSleeping:l.isSleeping,parent:l.parent||l});var c=l.bounds;if(u.rotate(l.vertices,l.angle,l.position),h.rotate(l.axes,l.angle),r.update(c,l.vertices,l.velocity),s.set(l,{axes:f.axes||l.axes,area:f.area||l.area,mass:f.mass||l.mass,inertia:f.inertia||l.inertia}),l.parts.length===1){var g=l.centerOfMass,p=l.centerOffset,x=c.max.x-c.min.x,y=c.max.y-c.min.y;g.x=-(c.min.x-l.position.x)/x,g.y=-(c.min.y-l.position.y)/y,p.x=x*g.x,p.y=y*g.y}};s.set=function(l,f,c){var g;typeof f=="string"&&(g=f,f={},f[g]=c);for(g in f)if(!!Object.prototype.hasOwnProperty.call(f,g))switch(c=f[g],g){case"isStatic":s.setStatic(l,c);break;case"isSleeping":a.set(l,c);break;case"mass":s.setMass(l,c);break;case"density":s.setDensity(l,c);break;case"inertia":s.setInertia(l,c);break;case"vertices":s.setVertices(l,c);break;case"position":s.setPosition(l,c);break;case"angle":s.setAngle(l,c);break;case"velocity":s.setVelocity(l,c);break;case"angularVelocity":s.setAngularVelocity(l,c);break;case"parts":s.setParts(l,c);break;case"centre":s.setCentre(l,c);break;default:l[g]=c}},s.setStatic=function(l,f){for(var c=0;c<l.parts.length;c++){var g=l.parts[c];g.isStatic=f,f?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},s.setMass=function(l,f){var c=l.inertia/(l.mass/6);l.inertia=c*(f/6),l.inverseInertia=1/l.inertia,l.mass=f,l.inverseMass=1/l.mass,l.density=l.mass/l.area},s.setDensity=function(l,f){s.setMass(l,f*l.area),l.density=f},s.setInertia=function(l,f){l.inertia=f,l.inverseInertia=1/l.inertia},s.setVertices=function(l,f){f[0].body===l?l.vertices=f:l.vertices=u.create(f,l),l.axes=h.fromVertices(l.vertices),l.area=u.area(l.vertices),s.setMass(l,l.density*l.area);var c=u.centre(l.vertices);u.translate(l.vertices,c,-1),s.setInertia(l,s._inertiaScale*u.inertia(l.vertices,l.mass)),u.translate(l.vertices,l.position),r.update(l.bounds,l.vertices,l.velocity)},s.setParts=function(l,f,c){var g;for(f=f.slice(0),l.parts.length=0,l.parts.push(l),l.parent=l,g=0;g<f.length;g++){var p=f[g];p!==l&&(p.parent=l,l.parts.push(p))}if(l.parts.length!==1){if(c=typeof c!="undefined"?c:!0,c){var x=[];for(g=0;g<f.length;g++)x=x.concat(f[g].vertices);u.clockwiseSort(x);var y=u.hull(x),T=u.centre(y);s.setVertices(l,y),u.translate(l.vertices,T)}var E=s._totalProperties(l),S=E.centre.x,C=E.centre.y,P=l.bounds,R=l.centerOfMass,A=l.centerOffset;r.update(P,l.vertices,l.velocity),R.x=-(P.min.x-S)/(P.max.x-P.min.x),R.y=-(P.min.y-C)/(P.max.y-P.min.y),A.x=S,A.y=C,l.area=E.area,l.parent=l,l.position.x=S,l.position.y=C,l.positionPrev.x=S,l.positionPrev.y=C,s.setMass(l,E.mass),s.setInertia(l,E.inertia),s.setPosition(l,E.centre)}},s.setCentre=function(l,f,c){c?(l.positionPrev.x+=f.x,l.positionPrev.y+=f.y,l.position.x+=f.x,l.position.y+=f.y):(l.positionPrev.x=f.x-(l.position.x-l.positionPrev.x),l.positionPrev.y=f.y-(l.position.y-l.positionPrev.y),l.position.x=f.x,l.position.y=f.y)},s.setPosition=function(l,f){var c=n.sub(f,l.position);l.positionPrev.x+=c.x,l.positionPrev.y+=c.y;for(var g=0;g<l.parts.length;g++){var p=l.parts[g];p.position.x+=c.x,p.position.y+=c.y,u.translate(p.vertices,c),r.update(p.bounds,p.vertices,l.velocity)}},s.setAngle=function(l,f){var c=f-l.angle;l.anglePrev+=c;for(var g=0;g<l.parts.length;g++){var p=l.parts[g];p.angle+=c,u.rotate(p.vertices,c,l.position),h.rotate(p.axes,c),r.update(p.bounds,p.vertices,l.velocity),g>0&&n.rotateAbout(p.position,c,l.position,p.position)}},s.setVelocity=function(l,f){l.positionPrev.x=l.position.x-f.x,l.positionPrev.y=l.position.y-f.y,l.velocity.x=f.x,l.velocity.y=f.y,l.speed=n.magnitude(l.velocity)},s.setAngularVelocity=function(l,f){l.anglePrev=l.angle-f,l.angularVelocity=f,l.angularSpeed=Math.abs(l.angularVelocity)},s.translate=function(l,f){s.setPosition(l,n.add(l.position,f))},s.rotate=function(l,f,c){if(!c)s.setAngle(l,l.angle+f);else{var g=Math.cos(f),p=Math.sin(f),x=l.position.x-c.x,y=l.position.y-c.y;s.setPosition(l,{x:c.x+(x*g-y*p),y:c.y+(x*p+y*g)}),s.setAngle(l,l.angle+f)}},s.scale=function(l,f,c,g){var p=0,x=0;g=g||l.position;for(var y=0;y<l.parts.length;y++){var T=l.parts[y];T.scale.x=f,T.scale.y=c,u.scale(T.vertices,f,c,g),T.axes=h.fromVertices(T.vertices),T.area=u.area(T.vertices),s.setMass(T,l.density*T.area),u.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),s.setInertia(T,s._inertiaScale*u.inertia(T.vertices,T.mass)),u.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(p+=T.area,x+=T.inertia),T.position.x=g.x+(T.position.x-g.x)*f,T.position.y=g.y+(T.position.y-g.y)*c,r.update(T.bounds,T.vertices,l.velocity)}l.parts.length>1&&(l.area=p,l.isStatic||(s.setMass(l,l.density*p),s.setInertia(l,x))),l.circleRadius&&(f===c?l.circleRadius*=f:l.circleRadius=null)},s.update=function(l,f,c,g){var p=Math.pow(f*c*l.timeScale,2),x=1-l.frictionAir*c*l.timeScale,y=l.position.x-l.positionPrev.x,T=l.position.y-l.positionPrev.y;l.velocity.x=y*x*g+l.force.x/l.mass*p,l.velocity.y=T*x*g+l.force.y/l.mass*p,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.position.x+=l.velocity.x,l.position.y+=l.velocity.y,l.angularVelocity=(l.angle-l.anglePrev)*x*g+l.torque/l.inertia*p,l.anglePrev=l.angle,l.angle+=l.angularVelocity,l.speed=n.magnitude(l.velocity),l.angularSpeed=Math.abs(l.angularVelocity);for(var E=0;E<l.parts.length;E++){var S=l.parts[E];u.translate(S.vertices,l.velocity),E>0&&(S.position.x+=l.velocity.x,S.position.y+=l.velocity.y),l.angularVelocity!==0&&(u.rotate(S.vertices,l.angularVelocity,l.position),h.rotate(S.axes,l.angularVelocity),E>0&&n.rotateAbout(S.position,l.angularVelocity,l.position,S.position)),r.update(S.bounds,S.vertices,l.velocity)}},s.applyForce=function(l,f,c){l.force.x+=c.x,l.force.y+=c.y;var g={x:f.x-l.position.x,y:f.y-l.position.y};l.torque+=g.x*c.y-g.y*c.x},s._totalProperties=function(l){for(var f={mass:0,area:0,inertia:0,centre:{x:0,y:0}},c=l.parts.length===1?0:1;c<l.parts.length;c++){var g=l.parts[c],p=g.mass!==1/0?g.mass:1;f.mass+=p,f.area+=g.area,f.inertia+=g.inertia,f.centre=n.add(f.centre,n.mult(g.position,p))}return f.centre=n.div(f.centre,f.mass),f}})()},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.y+s.height-s.height*s.originY};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x-s.width*s.originX};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x+s.width-s.width*s.originX};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.y-s.height*s.originY};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o,r){a===void 0&&(a=0),o===void 0&&(o=0),r===void 0&&(r=1);var h,d=0,l=s.length;if(r===1)for(h=o;h<l;h++)s[h][u]+=n+d*a,d++;else for(h=o;h>=0;h--)s[h][u]+=n+d*a,d++;return s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(307),n=t(172),a=t(56),o=t(173),r=t(3),h=new s({initialize:function(l,f,c,g){l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=0),g===void 0&&(g=0),this.type=a.LINE,this.x1=l,this.y1=f,this.x2=c,this.y2=g},getPoint:function(d,l){return u(this,d,l)},getPoints:function(d,l,f){return n(this,d,l,f)},getRandomPoint:function(d){return o(this,d)},setTo:function(d,l,f,c){return d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=0),this.x1=d,this.y1=l,this.x2=f,this.y2=c,this},getPointA:function(d){return d===void 0&&(d=new r),d.set(this.x1,this.y1),d},getPointB:function(d){return d===void 0&&(d=new r),d.set(this.x2,this.y2),d},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(d){this.x1<=this.x2?this.x1=d:this.x2=d}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(d){this.x1>this.x2?this.x1=d:this.x2=d}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(d){this.y1<=this.y2?this.y1=d:this.y2=d}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(d){this.y1>this.y2?this.y1=d:this.y2=d}}});e.exports=h},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=n||u.fillColor,r=a||u.fillAlpha,h=(o&16711680)>>>16,d=(o&65280)>>>8,l=o&255;s.fillStyle="rgba("+h+","+d+","+l+","+r+")"};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o,r,h){var d=[];h.forEach(function(f){f&&d.push(f)}),this.loader=a,this.type=o,this.key=r,this.multiKeyIndex=a.multiKeyIndex++,this.files=d,this.complete=!1,this.pending=d.length,this.failed=0,this.config={},this.baseURL=a.baseURL,this.path=a.path,this.prefix=a.prefix;for(var l=0;l<d.length;l++)d[l].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(n){return this.files.push(n),n.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(n){var a=this.files.indexOf(n);a!==-1&&this.pending--},onFileFailed:function(n){var a=this.files.indexOf(n);a!==-1&&this.failed++}});e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=s-n,r=u-a;return Math.sqrt(o*o+r*r)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BOOT:t(922),DESTROY:t(923),DRAG_END:t(924),DRAG_ENTER:t(925),DRAG:t(926),DRAG_LEAVE:t(927),DRAG_OVER:t(928),DRAG_START:t(929),DROP:t(930),GAME_OUT:t(931),GAME_OVER:t(932),GAMEOBJECT_DOWN:t(933),GAMEOBJECT_DRAG_END:t(934),GAMEOBJECT_DRAG_ENTER:t(935),GAMEOBJECT_DRAG:t(936),GAMEOBJECT_DRAG_LEAVE:t(937),GAMEOBJECT_DRAG_OVER:t(938),GAMEOBJECT_DRAG_START:t(939),GAMEOBJECT_DROP:t(940),GAMEOBJECT_MOVE:t(941),GAMEOBJECT_OUT:t(942),GAMEOBJECT_OVER:t(943),GAMEOBJECT_POINTER_DOWN:t(944),GAMEOBJECT_POINTER_MOVE:t(945),GAMEOBJECT_POINTER_OUT:t(946),GAMEOBJECT_POINTER_OVER:t(947),GAMEOBJECT_POINTER_UP:t(948),GAMEOBJECT_POINTER_WHEEL:t(949),GAMEOBJECT_UP:t(950),GAMEOBJECT_WHEEL:t(951),MANAGER_BOOT:t(952),MANAGER_PROCESS:t(953),MANAGER_UPDATE:t(954),POINTER_DOWN:t(955),POINTER_DOWN_OUTSIDE:t(956),POINTER_MOVE:t(957),POINTER_OUT:t(958),POINTER_OVER:t(959),POINTER_UP:t(960),POINTER_UP_OUTSIDE:t(961),POINTER_WHEEL:t(962),POINTERLOCK_CHANGE:t(963),PRE_UPDATE:t(964),SHUTDOWN:t(965),START:t(966),UPDATE:t(967)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.y=u+s.height*s.originY,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x=u+s.width*s.originX,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x=u-s.width+s.width*s.originX,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.y=u-s.height+s.height*s.originY,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.width<=0||s.height<=0?!1:s.x<=u&&s.x+s.width>=u&&s.y<=n&&s.y+s.height>=n};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(175),n=t(9),a=t(374),o=t(2),r=t(69),h=t(91),d=t(141),l=t(12),f=t(375),c=new s({Extends:n,initialize:function(p){n.call(this);var x=p.game,y=x.renderer,T=y.gl;this.name=o(p,"name","WebGLPipeline"),this.game=x,this.renderer=y,this.manager,this.gl=T,this.view=x.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=o(p,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=o(p,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=p,this.glReset=!1},boot:function(){var g,p=this.gl,x=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new r().identity());var T=this.renderTargets,E=o(x,"renderTarget",!1);typeof E=="boolean"&&E&&(E=1);var S=y.width,C=y.height;if(typeof E=="number")for(g=0;g<E;g++)T.push(new d(y,S,C,1,0,!0));else if(Array.isArray(E))for(g=0;g<E.length;g++){var P=o(E[g],"scale",1),R=o(E[g],"minFilter",0),A=o(E[g],"autoClear",1);T.push(new d(y,S,C,P,R,A))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(x);var M=this.shaders,O=0;for(g=0;g<M.length;g++)M[g].vertexSize>O&&(O=M[g].vertexSize);var F=o(x,"batchSize",y.config.batchSize);this.vertexCapacity=F*6;var I=new ArrayBuffer(this.vertexCapacity*O);this.vertexData=I,this.bytes=new Uint8Array(I),this.vertexViewF32=new Float32Array(I),this.vertexViewU32=new Uint32Array(I);var B=o(x,"vertices",null);for(B?(this.vertexViewF32.set(B),this.vertexBuffer=y.createVertexBuffer(I,p.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(I.byteLength,p.DYNAMIC_DRAW),this.setVertexBuffer(),g=M.length-1;g>=0;g--)M[g].rebind();this.hasBooted=!0,y.on(h.RESIZE,this.resize,this),y.on(h.PRE_RENDER,this.onPreRender,this),y.on(h.RENDER,this.onRender,this),y.on(h.POST_RENDER,this.onPostRender,this),this.emit(a.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,p){var x=this.renderer;if(g!==this.currentShader||x.currentProgram!==this.currentShader.program){this.flush(),x.resetTextures();var y=this.setVertexBuffer();y&&!p&&(p=!0),g.bind(p,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var p=this.shaders,x=0;x<p.length;x++)if(p[x].name===g)return p[x]},setShadersFromConfig:function(g){var p,x=this.shaders,y=this.renderer;for(p=0;p<x.length;p++)x[p].destroy();var T="vertShader",E="fragShader",S="attributes",C=o(g,T,null),P=l.parseFragmentShaderMaxTextures(o(g,E,null),y.maxTextures),R=o(g,S,null),A=o(g,"shaders",[]),M=A.length;if(M===0)C&&P&&(this.shaders=[new f(this,"default",C,P,u(R))]);else{var O=[];for(p=0;p<M;p++){var F=A[p],I=o(F,"name","default"),B=o(F,T,C),V=l.parseFragmentShaderMaxTextures(o(F,E,P),y.maxTextures),U=o(F,S,R);B&&V&&O.push(new f(this,I,B,V,u(U)))}this.shaders=O}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(g,p){return p===void 0&&(p=g.frame),this.currentUnit=this.renderer.setTextureSource(p.source),this.currentUnit},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},resize:function(g,p){(g!==this.width||p!==this.height)&&this.flush(),this.width=g,this.height=p;for(var x=this.renderTargets,y=0;y<x.length;y++)x[y].resize(g,p);return this.setProjectionMatrix(g,p),this.emit(a.RESIZE,g,p,this),this.onResize(g,p),this},setProjectionMatrix:function(g,p){var x=this.projectionMatrix;if(!x)return this;this.projectionWidth=g,this.projectionHeight=p,x.ortho(0,g,p,0,-1e3,1e3);for(var y=this.shaders,T="uProjectionMatrix",E=0;E<y.length;E++){var S=y[E];S.hasUniform(T)&&(S.resetUniform(T),S.setMatrix4fv(T,!1,x.val,S))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,p=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==p)&&this.setProjectionMatrix(g,p)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var p=this.setVertexBuffer();return g.bind(p),this.currentShader=g,this.emit(a.BIND,this,g),this.onActive(g),this},rebind:function(g){this.setVertexBuffer();for(var p=this.shaders,x=p.length-1;x>=0;x--){var y=p[x].rebind();(!g||y===g)&&(this.currentShader=y)}return this.emit(a.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var g=this.gl,p=this.vertexBuffer;return g.getParameter(g.ARRAY_BUFFER_BINDING)!==p?(g.bindBuffer(g.ARRAY_BUFFER,p),!0):!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(a.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var p=this.gl,x=this.vertexCount,y=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),x===this.vertexCapacity?p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.DYNAMIC_DRAW):p.bufferSubData(p.ARRAY_BUFFER,0,this.bytes.subarray(0,x*y)),p.drawArrays(this.topology,0,x)),this.vertexCount=0,this.emit(a.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,p,x,y,T,E,S){var C=this.vertexViewF32,P=this.vertexViewU32,R=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++R]=g,C[++R]=p,C[++R]=x,C[++R]=y,C[++R]=T,C[++R]=E,P[++R]=S,this.vertexCount++},batchQuad:function(g,p,x,y,T,E,S,C,P,R,A,M,O,F,I,B,V,U,Y,W){W===void 0&&(W=this.currentUnit);var w=!1;return this.shouldFlush(6)&&(this.flush(),w=!0,W=this.setTexture2D(Y)),this.batchVert(p,x,R,A,W,U,F),this.batchVert(y,T,R,O,W,U,B),this.batchVert(E,S,M,O,W,U,V),this.batchVert(p,x,R,A,W,U,F),this.batchVert(E,S,M,O,W,U,V),this.batchVert(C,P,M,A,W,U,I),this.onBatch(g),w},batchTri:function(g,p,x,y,T,E,S,C,P,R,A,M,O,F,I,B,V){V===void 0&&(V=this.currentUnit);var U=!1;return this.shouldFlush(3)&&(this.flush(),U=!0,V=this.setTexture2D(B)),this.batchVert(p,x,C,P,V,I,M),this.batchVert(y,T,C,A,V,I,O),this.batchVert(E,S,R,A,V,I,F),this.onBatch(g),U},drawFillRect:function(g,p,x,y,T,E,S,C){S===void 0&&(S=this.renderer.whiteTexture.glTexture),C===void 0&&(C=!0),g=Math.floor(g),p=Math.floor(p);var P=Math.floor(g+x),R=Math.floor(p+y),A=this.setTexture2D(S),M=l.getTintAppendFloatAlphaAndSwap(T,E),O=0,F=0,I=1,B=1;C&&(F=1,B=0),this.batchQuad(null,g,p,g,R,P,R,P,p,O,F,I,B,M,M,M,M,0,S,A)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(g),this.currentUnit},bindTexture:function(g,p){p===void 0&&(p=0);var x=this.gl;return x.activeTexture(x.TEXTURE0+p),x.bindTexture(x.TEXTURE_2D,g),this},bindRenderTarget:function(g,p){return this.bindTexture(g.texture,p)},setTime:function(g){return this.set1f(g,this.game.loop.getDuration()),this},set1f:function(g,p,x){return x===void 0&&(x=this.currentShader),x.set1f(g,p),this},set2f:function(g,p,x,y){return y===void 0&&(y=this.currentShader),y.set2f(g,p,x),this},set3f:function(g,p,x,y,T){return T===void 0&&(T=this.currentShader),T.set3f(g,p,x,y),this},set4f:function(g,p,x,y,T,E){return E===void 0&&(E=this.currentShader),E.set4f(g,p,x,y,T),this},set1fv:function(g,p,x){return x===void 0&&(x=this.currentShader),x.set1fv(g,p),this},set2fv:function(g,p,x){return x===void 0&&(x=this.currentShader),x.set2fv(g,p),this},set3fv:function(g,p,x){return x===void 0&&(x=this.currentShader),x.set3fv(g,p),this},set4fv:function(g,p,x){return x===void 0&&(x=this.currentShader),x.set4fv(g,p),this},set1iv:function(g,p,x){return x===void 0&&(x=this.currentShader),x.set1iv(g,p),this},set2iv:function(g,p,x){return x===void 0&&(x=this.currentShader),x.set2iv(g,p),this},set3iv:function(g,p,x){return x===void 0&&(x=this.currentShader),x.set3iv(g,p),this},set4iv:function(g,p,x){return x===void 0&&(x=this.currentShader),x.set4iv(g,p),this},set1i:function(g,p,x){return x===void 0&&(x=this.currentShader),x.set1i(g,p),this},set2i:function(g,p,x,y){return y===void 0&&(y=this.currentShader),y.set2i(g,p,x),this},set3i:function(g,p,x,y,T){return T===void 0&&(T=this.currentShader),T.set3i(g,p,x,y),this},set4i:function(g,p,x,y,T,E){return E===void 0&&(E=this.currentShader),E.set4i(g,p,x,y,T),this},setMatrix2fv:function(g,p,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(g,p,x),this},setMatrix3fv:function(g,p,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(g,p,x),this},setMatrix4fv:function(g,p,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(g,p,x),this},destroy:function(){this.emit(a.DESTROY,this);var g,p=this.shaders;for(g=0;g<p.length;g++)p[g].destroy();var x=this.renderTargets;for(g=0;g<x.length;g++)x[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var y=this.renderer;return y.off(h.RESIZE,this.resize,this),y.off(h.PRE_RENDER,this.onPreRender,this),y.off(h.RENDER,this.onRender,this),y.off(h.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});e.exports=c},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function s(L,D,N){N=N||2;var G=D&&D.length,b=G?D[0]*N:L.length,z=u(L,0,b,N,!0),X=[];if(!z||z.next===z.prev)return X;var H,$,J,K,Z,k,Q;if(G&&(z=l(L,D,z,N)),L.length>80*N){H=J=L[0],$=K=L[1];for(var q=N;q<b;q+=N)Z=L[q],k=L[q+1],Z<H&&(H=Z),k<$&&($=k),Z>J&&(J=Z),k>K&&(K=k);Q=Math.max(J-H,K-$),Q=Q!==0?1/Q:0}return a(z,X,N,H,$,Q),X}function u(L,D,N,G,b){var z,X;if(b===w(L,D,N,G)>0)for(z=D;z<N;z+=G)X=U(z,L[z],L[z+1],X);else for(z=N-G;z>=D;z-=G)X=U(z,L[z],L[z+1],X);return X&&R(X,X.next)&&(Y(X),X=X.next),X}function n(L,D){if(!L)return L;D||(D=L);var N=L,G;do if(G=!1,!N.steiner&&(R(N,N.next)||P(N.prev,N,N.next)===0)){if(Y(N),N=D=N.prev,N===N.next)break;G=!0}else N=N.next;while(G||N!==D);return D}function a(L,D,N,G,b,z,X){if(!!L){!X&&z&&x(L,G,b,z);for(var H=L,$,J;L.prev!==L.next;){if($=L.prev,J=L.next,z?r(L,G,b,z):o(L)){D.push($.i/N),D.push(L.i/N),D.push(J.i/N),Y(L),L=J.next,H=J.next;continue}if(L=J,L===H){X?X===1?(L=h(n(L),D,N),a(L,D,N,G,b,z,2)):X===2&&d(L,D,N,G,b,z):a(n(L),D,N,G,b,z,1);break}}}}function o(L){var D=L.prev,N=L,G=L.next;if(P(D,N,G)>=0)return!1;for(var b=L.next.next;b!==L.prev;){if(S(D.x,D.y,N.x,N.y,G.x,G.y,b.x,b.y)&&P(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function r(L,D,N,G){var b=L.prev,z=L,X=L.next;if(P(b,z,X)>=0)return!1;for(var H=b.x<z.x?b.x<X.x?b.x:X.x:z.x<X.x?z.x:X.x,$=b.y<z.y?b.y<X.y?b.y:X.y:z.y<X.y?z.y:X.y,J=b.x>z.x?b.x>X.x?b.x:X.x:z.x>X.x?z.x:X.x,K=b.y>z.y?b.y>X.y?b.y:X.y:z.y>X.y?z.y:X.y,Z=T(H,$,D,N,G),k=T(J,K,D,N,G),Q=L.prevZ,q=L.nextZ;Q&&Q.z>=Z&&q&&q.z<=k;){if(Q!==L.prev&&Q!==L.next&&S(b.x,b.y,z.x,z.y,X.x,X.y,Q.x,Q.y)&&P(Q.prev,Q,Q.next)>=0||(Q=Q.prevZ,q!==L.prev&&q!==L.next&&S(b.x,b.y,z.x,z.y,X.x,X.y,q.x,q.y)&&P(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;Q&&Q.z>=Z;){if(Q!==L.prev&&Q!==L.next&&S(b.x,b.y,z.x,z.y,X.x,X.y,Q.x,Q.y)&&P(Q.prev,Q,Q.next)>=0)return!1;Q=Q.prevZ}for(;q&&q.z<=k;){if(q!==L.prev&&q!==L.next&&S(b.x,b.y,z.x,z.y,X.x,X.y,q.x,q.y)&&P(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function h(L,D,N){var G=L;do{var b=G.prev,z=G.next.next;!R(b,z)&&A(b,G,G.next,z)&&I(b,z)&&I(z,b)&&(D.push(b.i/N),D.push(G.i/N),D.push(z.i/N),Y(G),Y(G.next),G=L=z),G=G.next}while(G!==L);return n(G)}function d(L,D,N,G,b,z){var X=L;do{for(var H=X.next.next;H!==X.prev;){if(X.i!==H.i&&C(X,H)){var $=V(X,H);X=n(X,X.next),$=n($,$.next),a(X,D,N,G,b,z),a($,D,N,G,b,z);return}H=H.next}X=X.next}while(X!==L)}function l(L,D,N,G){var b=[],z,X,H,$,J;for(z=0,X=D.length;z<X;z++)H=D[z]*G,$=z<X-1?D[z+1]*G:L.length,J=u(L,H,$,G,!1),J===J.next&&(J.steiner=!0),b.push(E(J));for(b.sort(f),z=0;z<b.length;z++)c(b[z],N),N=n(N,N.next);return N}function f(L,D){return L.x-D.x}function c(L,D){if(D=g(L,D),D){var N=V(D,L);n(D,D.next),n(N,N.next)}}function g(L,D){var N=D,G=L.x,b=L.y,z=-1/0,X;do{if(b<=N.y&&b>=N.next.y&&N.next.y!==N.y){var H=N.x+(b-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(H<=G&&H>z){if(z=H,H===G){if(b===N.y)return N;if(b===N.next.y)return N.next}X=N.x<N.next.x?N:N.next}}N=N.next}while(N!==D);if(!X)return null;if(G===z)return X;var $=X,J=X.x,K=X.y,Z=1/0,k;N=X;do G>=N.x&&N.x>=J&&G!==N.x&&S(b<K?G:z,b,J,K,b<K?z:G,b,N.x,N.y)&&(k=Math.abs(b-N.y)/(G-N.x),I(N,L)&&(k<Z||k===Z&&(N.x>X.x||N.x===X.x&&p(X,N)))&&(X=N,Z=k)),N=N.next;while(N!==$);return X}function p(L,D){return P(L.prev,L,D.prev)<0&&P(D.next,L,L.next)<0}function x(L,D,N,G){var b=L;do b.z===null&&(b.z=T(b.x,b.y,D,N,G)),b.prevZ=b.prev,b.nextZ=b.next,b=b.next;while(b!==L);b.prevZ.nextZ=null,b.prevZ=null,y(b)}function y(L){var D,N,G,b,z,X,H,$,J=1;do{for(N=L,L=null,z=null,X=0;N;){for(X++,G=N,H=0,D=0;D<J&&(H++,G=G.nextZ,!!G);D++);for($=J;H>0||$>0&&G;)H!==0&&($===0||!G||N.z<=G.z)?(b=N,N=N.nextZ,H--):(b=G,G=G.nextZ,$--),z?z.nextZ=b:L=b,b.prevZ=z,z=b;N=G}z.nextZ=null,J*=2}while(X>1);return L}function T(L,D,N,G,b){return L=32767*(L-N)*b,D=32767*(D-G)*b,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,L|D<<1}function E(L){var D=L,N=L;do(D.x<N.x||D.x===N.x&&D.y<N.y)&&(N=D),D=D.next;while(D!==L);return N}function S(L,D,N,G,b,z,X,H){return(b-X)*(D-H)-(L-X)*(z-H)>=0&&(L-X)*(G-H)-(N-X)*(D-H)>=0&&(N-X)*(z-H)-(b-X)*(G-H)>=0}function C(L,D){return L.next.i!==D.i&&L.prev.i!==D.i&&!F(L,D)&&(I(L,D)&&I(D,L)&&B(L,D)&&(P(L.prev,L,D.prev)||P(L,D.prev,D))||R(L,D)&&P(L.prev,L,L.next)>0&&P(D.prev,D,D.next)>0)}function P(L,D,N){return(D.y-L.y)*(N.x-D.x)-(D.x-L.x)*(N.y-D.y)}function R(L,D){return L.x===D.x&&L.y===D.y}function A(L,D,N,G){var b=O(P(L,D,N)),z=O(P(L,D,G)),X=O(P(N,G,L)),H=O(P(N,G,D));return!!(b!==z&&X!==H||b===0&&M(L,N,D)||z===0&&M(L,G,D)||X===0&&M(N,L,G)||H===0&&M(N,D,G))}function M(L,D,N){return D.x<=Math.max(L.x,N.x)&&D.x>=Math.min(L.x,N.x)&&D.y<=Math.max(L.y,N.y)&&D.y>=Math.min(L.y,N.y)}function O(L){return L>0?1:L<0?-1:0}function F(L,D){var N=L;do{if(N.i!==L.i&&N.next.i!==L.i&&N.i!==D.i&&N.next.i!==D.i&&A(N,N.next,L,D))return!0;N=N.next}while(N!==L);return!1}function I(L,D){return P(L.prev,L,L.next)<0?P(L,D,L.next)>=0&&P(L,L.prev,D)>=0:P(L,D,L.prev)<0||P(L,L.next,D)<0}function B(L,D){var N=L,G=!1,b=(L.x+D.x)/2,z=(L.y+D.y)/2;do N.y>z!=N.next.y>z&&N.next.y!==N.y&&b<(N.next.x-N.x)*(z-N.y)/(N.next.y-N.y)+N.x&&(G=!G),N=N.next;while(N!==L);return G}function V(L,D){var N=new W(L.i,L.x,L.y),G=new W(D.i,D.x,D.y),b=L.next,z=D.prev;return L.next=D,D.prev=L,N.next=b,b.prev=N,G.next=N,N.prev=G,z.next=G,G.prev=z,G}function U(L,D,N,G){var b=new W(L,D,N);return G?(b.next=G.next,b.prev=G,G.next.prev=b,G.next=b):(b.prev=b,b.next=b),b}function Y(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function W(L,D,N){this.i=L,this.x=D,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(L,D,N,G){var b=D&&D.length,z=b?D[0]*N:L.length,X=Math.abs(w(L,0,z,N));if(b)for(var H=0,$=D.length;H<$;H++){var J=D[H]*N,K=H<$-1?D[H+1]*N:L.length;X-=Math.abs(w(L,J,K,N))}var Z=0;for(H=0;H<G.length;H+=3){var k=G[H]*N,Q=G[H+1]*N,q=G[H+2]*N;Z+=Math.abs((L[k]-L[q])*(L[Q+1]-L[k+1])-(L[k]-L[Q])*(L[q+1]-L[k+1]))}return X===0&&Z===0?0:Math.abs((Z-X)/X)};function w(L,D,N,G){for(var b=0,z=D,X=N-G;z<N;z+=G)b+=(L[X]-L[z])*(L[z+1]+L[X+1]),X=z;return b}s.flatten=function(L){for(var D=L[0][0].length,N={vertices:[],holes:[],dimensions:D},G=0,b=0;b<L.length;b++){for(var z=0;z<L[b].length;z++)for(var X=0;X<D;X++)N.vertices.push(L[b][z][X]);b>0&&(G+=L[b-1].length,N.holes.push(G))}return N},e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=n||u.strokeColor,r=a||u.strokeAlpha,h=(o&16711680)>>>16,d=(o&65280)>>>8,l=o&255;s.strokeStyle="rgba("+h+","+d+","+l+","+r+")",s.lineWidth=u.lineWidth};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(6),h=t(7),d=new s({Extends:n,initialize:function(f,c,g,p,x){var y="json";if(h(c)){var T=c;c=o(T,"key"),g=o(T,"url"),p=o(T,"xhrSettings"),y=o(T,"extension",y),x=o(T,"dataKey",x)}var E={type:"json",cache:f.cacheManager.json,extension:y,responseType:"text",key:c,url:g,xhrSettings:p,config:x};n.call(this,f,E),h(g)&&(x?this.data=r(g,x):this.data=g,this.state=u.FILE_POPULATED)},onProcess:function(){if(this.state!==u.FILE_POPULATED){this.state=u.FILE_PROCESSING;try{var l=JSON.parse(this.xhrLoader.responseText)}catch(c){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),c}var f=this.config;typeof f=="string"?this.data=r(l,f,l):this.data=l}this.onProcessComplete()}});a.register("json",function(l,f,c,g){if(Array.isArray(l))for(var p=0;p<l.length;p++)this.addFile(new d(this,l[p]));else this.addFile(new d(this,l,f,g,c));return this}),e.exports=d},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(158),u=t(26),n=function(a,o,r,h,d){for(var l=null,f=null,c=null,g=null,p=u(a,o,r,h,null,d),x=0;x<p.length;x++){var y=p[x];y&&(y.collides?(l=s(y.x,y.y-1,!0,d),f=s(y.x,y.y+1,!0,d),c=s(y.x-1,y.y,!0,d),g=s(y.x+1,y.y,!0,d),y.faceTop=!(l&&l.collides),y.faceBottom=!(f&&f.collides),y.faceLeft=!(c&&c.collides),y.faceRight=!(g&&g.collides)):y.resetFaces())}};e.exports=n},function(e,v,t){var s={};e.exports=s;var u=t(83),n=t(32);(function(){s.create=function(a,o){for(var r=[],h=0;h<a.length;h++){var d=a[h],l={x:d.x,y:d.y,index:h,body:o,isInternal:!1,contact:null,offset:null};l.contact={vertex:l,normalImpulse:0,tangentImpulse:0},r.push(l)}return r},s.fromPath=function(a,o){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,h=[];return a.replace(r,function(d,l,f){h.push({x:parseFloat(l),y:parseFloat(f)})}),s.create(h,o)},s.centre=function(a){for(var o=s.area(a,!0),r={x:0,y:0},h,d,l,f=0;f<a.length;f++)l=(f+1)%a.length,h=u.cross(a[f],a[l]),d=u.mult(u.add(a[f],a[l]),h),r=u.add(r,d);return u.div(r,6*o)},s.mean=function(a){for(var o={x:0,y:0},r=0;r<a.length;r++)o.x+=a[r].x,o.y+=a[r].y;return u.div(o,a.length)},s.area=function(a,o){for(var r=0,h=a.length-1,d=0;d<a.length;d++)r+=(a[h].x-a[d].x)*(a[h].y+a[d].y),h=d;return o?r/2:Math.abs(r)/2},s.inertia=function(a,o){for(var r=0,h=0,d=a,l,f,c=0;c<d.length;c++)f=(c+1)%d.length,l=Math.abs(u.cross(d[f],d[c])),r+=l*(u.dot(d[f],d[f])+u.dot(d[f],d[c])+u.dot(d[c],d[c])),h+=l;return o/6*(r/h)},s.translate=function(a,o,r){var h;if(r)for(h=0;h<a.length;h++)a[h].x+=o.x*r,a[h].y+=o.y*r;else for(h=0;h<a.length;h++)a[h].x+=o.x,a[h].y+=o.y;return a},s.rotate=function(a,o,r){if(o!==0){for(var h=Math.cos(o),d=Math.sin(o),l=0;l<a.length;l++){var f=a[l],c=f.x-r.x,g=f.y-r.y;f.x=r.x+(c*h-g*d),f.y=r.y+(c*d+g*h)}return a}},s.contains=function(a,o){for(var r=0;r<a.length;r++){var h=a[r],d=a[(r+1)%a.length];if((o.x-h.x)*(d.y-h.y)+(o.y-h.y)*(h.x-d.x)>0)return!1}return!0},s.scale=function(a,o,r,h){if(o===1&&r===1)return a;h=h||s.centre(a);for(var d,l,f=0;f<a.length;f++)d=a[f],l=u.sub(d,h),a[f].x=h.x+l.x*o,a[f].y=h.y+l.y*r;return a},s.chamfer=function(a,o,r,h,d){typeof o=="number"?o=[o]:o=o||[8],r=typeof r!="undefined"?r:-1,h=h||2,d=d||14;for(var l=[],f=0;f<a.length;f++){var c=a[f-1>=0?f-1:a.length-1],g=a[f],p=a[(f+1)%a.length],x=o[f<o.length?f:o.length-1];if(x===0){l.push(g);continue}var y=u.normalise({x:g.y-c.y,y:c.x-g.x}),T=u.normalise({x:p.y-g.y,y:g.x-p.x}),E=Math.sqrt(2*Math.pow(x,2)),S=u.mult(n.clone(y),x),C=u.normalise(u.mult(u.add(y,T),.5)),P=u.sub(g,u.mult(C,E)),R=r;r===-1&&(R=Math.pow(x,.32)*1.75),R=n.clamp(R,h,d),R%2===1&&(R+=1);for(var A=Math.acos(u.dot(y,T)),M=A/R,O=0;O<R;O++)l.push(u.add(u.rotate(S,M*O),P))}return l},s.clockwiseSort=function(a){var o=s.mean(a);return a.sort(function(r,h){return u.angle(o,r)-u.angle(o,h)}),a},s.isConvex=function(a){var o=0,r=a.length,h,d,l,f;if(r<3)return null;for(h=0;h<r;h++)if(d=(h+1)%r,l=(h+2)%r,f=(a[d].x-a[h].x)*(a[l].y-a[d].y),f-=(a[d].y-a[h].y)*(a[l].x-a[d].x),f<0?o|=1:f>0&&(o|=2),o===3)return!1;return o!==0?!0:null},s.hull=function(a){var o=[],r=[],h,d;for(a=a.slice(0),a.sort(function(l,f){var c=l.x-f.x;return c!==0?c:l.y-f.y}),d=0;d<a.length;d+=1){for(h=a[d];r.length>=2&&u.cross3(r[r.length-2],r[r.length-1],h)<=0;)r.pop();r.push(h)}for(d=a.length-1;d>=0;d-=1){for(h=a[d];o.length>=2&&u.cross3(o[o.length-2],o[o.length-1],h)<=0;)o.pop();o.push(h)}return o.pop(),r.pop(),o.concat(r)}})()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(66),n=t(300),a=t(301),o=t(56),r=t(170),h=new s({initialize:function(l,f,c){l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=0),this.type=o.CIRCLE,this.x=l,this.y=f,this._radius=c,this._diameter=c*2},contains:function(d,l){return u(this,d,l)},getPoint:function(d,l){return n(this,d,l)},getPoints:function(d,l,f){return a(this,d,l,f)},getRandomPoint:function(d){return r(this,d)},setTo:function(d,l,f){return this.x=d,this.y=l,this._radius=f,this._diameter=f*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(d,l){return l===void 0&&(l=d),this.x=d,this.y=l,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this._diameter=d*2}},diameter:{get:function(){return this._diameter},set:function(d){this._diameter=d,this._radius=d*.5}},left:{get:function(){return this.x-this._radius},set:function(d){this.x=d+this._radius}},right:{get:function(){return this.x+this._radius},set:function(d){this.x=d-this._radius}},top:{get:function(){return this.y-this._radius},set:function(d){this.y=d+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(d){this.y=d-this._radius}}});e.exports=h},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(s.radius>0&&u>=s.left&&u<=s.right&&n>=s.top&&n<=s.bottom){var a=(s.x-u)*(s.x-u),o=(s.y-n)*(s.y-n);return a+o<=s.radius*s.radius}else return!1};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.sqrt((s.x2-s.x1)*(s.x2-s.x1)+(s.y2-s.y1)*(s.y2-s.y1))};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n-u;return u+((s-u)%a+a)%a};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(39),n=1e-6,a=new s({initialize:function(c){this.val=new Float32Array(16),c?this.copy(c):this.identity()},clone:function(){return new a(this)},set:function(f){return this.copy(f)},setValues:function(f,c,g,p,x,y,T,E,S,C,P,R,A,M,O,F){var I=this.val;return I[0]=f,I[1]=c,I[2]=g,I[3]=p,I[4]=x,I[5]=y,I[6]=T,I[7]=E,I[8]=S,I[9]=C,I[10]=P,I[11]=R,I[12]=A,I[13]=M,I[14]=O,I[15]=F,this},copy:function(f){var c=f.val;return this.setValues(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])},fromArray:function(f){return this.setValues(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(f,c,g){var p=o.fromQuat(g),x=p.val,y=c.x,T=c.y,E=c.z;return this.setValues(x[0]*y,x[1]*y,x[2]*y,0,x[4]*T,x[5]*T,x[6]*T,0,x[8]*E,x[9]*E,x[10]*E,0,f.x,f.y,f.z,1)},xyz:function(f,c,g){this.identity();var p=this.val;return p[12]=f,p[13]=c,p[14]=g,this},scaling:function(f,c,g){this.zero();var p=this.val;return p[0]=f,p[5]=c,p[10]=g,p[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var f=this.val,c=f[1],g=f[2],p=f[3],x=f[6],y=f[7],T=f[11];return f[1]=f[4],f[2]=f[8],f[3]=f[12],f[4]=c,f[6]=f[9],f[7]=f[13],f[8]=g,f[9]=x,f[11]=f[14],f[12]=p,f[13]=y,f[14]=T,this},getInverse:function(f){return this.copy(f),this.invert()},invert:function(){var f=this.val,c=f[0],g=f[1],p=f[2],x=f[3],y=f[4],T=f[5],E=f[6],S=f[7],C=f[8],P=f[9],R=f[10],A=f[11],M=f[12],O=f[13],F=f[14],I=f[15],B=c*T-g*y,V=c*E-p*y,U=c*S-x*y,Y=g*E-p*T,W=g*S-x*T,w=p*S-x*E,L=C*O-P*M,D=C*F-R*M,N=C*I-A*M,G=P*F-R*O,b=P*I-A*O,z=R*I-A*F,X=B*z-V*b+U*G+Y*N-W*D+w*L;return X?(X=1/X,this.setValues((T*z-E*b+S*G)*X,(p*b-g*z-x*G)*X,(O*w-F*W+I*Y)*X,(R*W-P*w-A*Y)*X,(E*N-y*z-S*D)*X,(c*z-p*N+x*D)*X,(F*U-M*w-I*V)*X,(C*w-R*U+A*V)*X,(y*b-T*N+S*L)*X,(g*N-c*b-x*L)*X,(M*W-O*U+I*B)*X,(P*U-C*W-A*B)*X,(T*D-y*G-E*L)*X,(c*G-g*D+p*L)*X,(O*V-M*Y-F*B)*X,(C*Y-P*V+R*B)*X)):this},adjoint:function(){var f=this.val,c=f[0],g=f[1],p=f[2],x=f[3],y=f[4],T=f[5],E=f[6],S=f[7],C=f[8],P=f[9],R=f[10],A=f[11],M=f[12],O=f[13],F=f[14],I=f[15];return this.setValues(T*(R*I-A*F)-P*(E*I-S*F)+O*(E*A-S*R),-(g*(R*I-A*F)-P*(p*I-x*F)+O*(p*A-x*R)),g*(E*I-S*F)-T*(p*I-x*F)+O*(p*S-x*E),-(g*(E*A-S*R)-T*(p*A-x*R)+P*(p*S-x*E)),-(y*(R*I-A*F)-C*(E*I-S*F)+M*(E*A-S*R)),c*(R*I-A*F)-C*(p*I-x*F)+M*(p*A-x*R),-(c*(E*I-S*F)-y*(p*I-x*F)+M*(p*S-x*E)),c*(E*A-S*R)-y*(p*A-x*R)+C*(p*S-x*E),y*(P*I-A*O)-C*(T*I-S*O)+M*(T*A-S*P),-(c*(P*I-A*O)-C*(g*I-x*O)+M*(g*A-x*P)),c*(T*I-S*O)-y*(g*I-x*O)+M*(g*S-x*T),-(c*(T*A-S*P)-y*(g*A-x*P)+C*(g*S-x*T)),-(y*(P*F-R*O)-C*(T*F-E*O)+M*(T*R-E*P)),c*(P*F-R*O)-C*(g*F-p*O)+M*(g*R-p*P),-(c*(T*F-E*O)-y*(g*F-p*O)+M*(g*E-p*T)),c*(T*R-E*P)-y*(g*R-p*P)+C*(g*E-p*T))},determinant:function(){var f=this.val,c=f[0],g=f[1],p=f[2],x=f[3],y=f[4],T=f[5],E=f[6],S=f[7],C=f[8],P=f[9],R=f[10],A=f[11],M=f[12],O=f[13],F=f[14],I=f[15],B=c*T-g*y,V=c*E-p*y,U=c*S-x*y,Y=g*E-p*T,W=g*S-x*T,w=p*S-x*E,L=C*O-P*M,D=C*F-R*M,N=C*I-A*M,G=P*F-R*O,b=P*I-A*O,z=R*I-A*F;return B*z-V*b+U*G+Y*N-W*D+w*L},multiply:function(f){var c=this.val,g=c[0],p=c[1],x=c[2],y=c[3],T=c[4],E=c[5],S=c[6],C=c[7],P=c[8],R=c[9],A=c[10],M=c[11],O=c[12],F=c[13],I=c[14],B=c[15],V=f.val,U=V[0],Y=V[1],W=V[2],w=V[3];return c[0]=U*g+Y*T+W*P+w*O,c[1]=U*p+Y*E+W*R+w*F,c[2]=U*x+Y*S+W*A+w*I,c[3]=U*y+Y*C+W*M+w*B,U=V[4],Y=V[5],W=V[6],w=V[7],c[4]=U*g+Y*T+W*P+w*O,c[5]=U*p+Y*E+W*R+w*F,c[6]=U*x+Y*S+W*A+w*I,c[7]=U*y+Y*C+W*M+w*B,U=V[8],Y=V[9],W=V[10],w=V[11],c[8]=U*g+Y*T+W*P+w*O,c[9]=U*p+Y*E+W*R+w*F,c[10]=U*x+Y*S+W*A+w*I,c[11]=U*y+Y*C+W*M+w*B,U=V[12],Y=V[13],W=V[14],w=V[15],c[12]=U*g+Y*T+W*P+w*O,c[13]=U*p+Y*E+W*R+w*F,c[14]=U*x+Y*S+W*A+w*I,c[15]=U*y+Y*C+W*M+w*B,this},multiplyLocal:function(f){var c=this.val,g=f.val;return this.setValues(c[0]*g[0]+c[1]*g[4]+c[2]*g[8]+c[3]*g[12],c[0]*g[1]+c[1]*g[5]+c[2]*g[9]+c[3]*g[13],c[0]*g[2]+c[1]*g[6]+c[2]*g[10]+c[3]*g[14],c[0]*g[3]+c[1]*g[7]+c[2]*g[11]+c[3]*g[15],c[4]*g[0]+c[5]*g[4]+c[6]*g[8]+c[7]*g[12],c[4]*g[1]+c[5]*g[5]+c[6]*g[9]+c[7]*g[13],c[4]*g[2]+c[5]*g[6]+c[6]*g[10]+c[7]*g[14],c[4]*g[3]+c[5]*g[7]+c[6]*g[11]+c[7]*g[15],c[8]*g[0]+c[9]*g[4]+c[10]*g[8]+c[11]*g[12],c[8]*g[1]+c[9]*g[5]+c[10]*g[9]+c[11]*g[13],c[8]*g[2]+c[9]*g[6]+c[10]*g[10]+c[11]*g[14],c[8]*g[3]+c[9]*g[7]+c[10]*g[11]+c[11]*g[15],c[12]*g[0]+c[13]*g[4]+c[14]*g[8]+c[15]*g[12],c[12]*g[1]+c[13]*g[5]+c[14]*g[9]+c[15]*g[13],c[12]*g[2]+c[13]*g[6]+c[14]*g[10]+c[15]*g[14],c[12]*g[3]+c[13]*g[7]+c[14]*g[11]+c[15]*g[15])},premultiply:function(f){return this.multiplyMatrices(f,this)},multiplyMatrices:function(f,c){var g=f.val,p=c.val,x=g[0],y=g[4],T=g[8],E=g[12],S=g[1],C=g[5],P=g[9],R=g[13],A=g[2],M=g[6],O=g[10],F=g[14],I=g[3],B=g[7],V=g[11],U=g[15],Y=p[0],W=p[4],w=p[8],L=p[12],D=p[1],N=p[5],G=p[9],b=p[13],z=p[2],X=p[6],H=p[10],$=p[14],J=p[3],K=p[7],Z=p[11],k=p[15];return this.setValues(x*Y+y*D+T*z+E*J,S*Y+C*D+P*z+R*J,A*Y+M*D+O*z+F*J,I*Y+B*D+V*z+U*J,x*W+y*N+T*X+E*K,S*W+C*N+P*X+R*K,A*W+M*N+O*X+F*K,I*W+B*N+V*X+U*K,x*w+y*G+T*H+E*Z,S*w+C*G+P*H+R*Z,A*w+M*G+O*H+F*Z,I*w+B*G+V*H+U*Z,x*L+y*b+T*$+E*k,S*L+C*b+P*$+R*k,A*L+M*b+O*$+F*k,I*L+B*b+V*$+U*k)},translate:function(f){return this.translateXYZ(f.x,f.y,f.z)},translateXYZ:function(f,c,g){var p=this.val;return p[12]=p[0]*f+p[4]*c+p[8]*g+p[12],p[13]=p[1]*f+p[5]*c+p[9]*g+p[13],p[14]=p[2]*f+p[6]*c+p[10]*g+p[14],p[15]=p[3]*f+p[7]*c+p[11]*g+p[15],this},scale:function(f){return this.scaleXYZ(f.x,f.y,f.z)},scaleXYZ:function(f,c,g){var p=this.val;return p[0]=p[0]*f,p[1]=p[1]*f,p[2]=p[2]*f,p[3]=p[3]*f,p[4]=p[4]*c,p[5]=p[5]*c,p[6]=p[6]*c,p[7]=p[7]*c,p[8]=p[8]*g,p[9]=p[9]*g,p[10]=p[10]*g,p[11]=p[11]*g,this},makeRotationAxis:function(f,c){var g=Math.cos(c),p=Math.sin(c),x=1-g,y=f.x,T=f.y,E=f.z,S=x*y,C=x*T;return this.setValues(S*y+g,S*T-p*E,S*E+p*T,0,S*T+p*E,C*T+g,C*E-p*y,0,S*E-p*T,C*E+p*y,x*E*E+g,0,0,0,0,1)},rotate:function(f,c){var g=this.val,p=c.x,x=c.y,y=c.z,T=Math.sqrt(p*p+x*x+y*y);if(Math.abs(T)<n)return this;T=1/T,p*=T,x*=T,y*=T;var E=Math.sin(f),S=Math.cos(f),C=1-S,P=g[0],R=g[1],A=g[2],M=g[3],O=g[4],F=g[5],I=g[6],B=g[7],V=g[8],U=g[9],Y=g[10],W=g[11],w=g[12],L=g[13],D=g[14],N=g[15],G=p*p*C+S,b=x*p*C+y*E,z=y*p*C-x*E,X=p*x*C-y*E,H=x*x*C+S,$=y*x*C+p*E,J=p*y*C+x*E,K=x*y*C-p*E,Z=y*y*C+S;return this.setValues(P*G+O*b+V*z,R*G+F*b+U*z,A*G+I*b+Y*z,M*G+B*b+W*z,P*X+O*H+V*$,R*X+F*H+U*$,A*X+I*H+Y*$,M*X+B*H+W*$,P*J+O*K+V*Z,R*J+F*K+U*Z,A*J+I*K+Y*Z,M*J+B*K+W*Z,w,L,D,N)},rotateX:function(f){var c=this.val,g=Math.sin(f),p=Math.cos(f),x=c[4],y=c[5],T=c[6],E=c[7],S=c[8],C=c[9],P=c[10],R=c[11];return c[4]=x*p+S*g,c[5]=y*p+C*g,c[6]=T*p+P*g,c[7]=E*p+R*g,c[8]=S*p-x*g,c[9]=C*p-y*g,c[10]=P*p-T*g,c[11]=R*p-E*g,this},rotateY:function(f){var c=this.val,g=Math.sin(f),p=Math.cos(f),x=c[0],y=c[1],T=c[2],E=c[3],S=c[8],C=c[9],P=c[10],R=c[11];return c[0]=x*p-S*g,c[1]=y*p-C*g,c[2]=T*p-P*g,c[3]=E*p-R*g,c[8]=x*g+S*p,c[9]=y*g+C*p,c[10]=T*g+P*p,c[11]=E*g+R*p,this},rotateZ:function(f){var c=this.val,g=Math.sin(f),p=Math.cos(f),x=c[0],y=c[1],T=c[2],E=c[3],S=c[4],C=c[5],P=c[6],R=c[7];return c[0]=x*p+S*g,c[1]=y*p+C*g,c[2]=T*p+P*g,c[3]=E*p+R*g,c[4]=S*p-x*g,c[5]=C*p-y*g,c[6]=P*p-T*g,c[7]=R*p-E*g,this},fromRotationTranslation:function(f,c){var g=f.x,p=f.y,x=f.z,y=f.w,T=g+g,E=p+p,S=x+x,C=g*T,P=g*E,R=g*S,A=p*E,M=p*S,O=x*S,F=y*T,I=y*E,B=y*S;return this.setValues(1-(A+O),P+B,R-I,0,P-B,1-(C+O),M+F,0,R+I,M-F,1-(C+A),0,c.x,c.y,c.z,1)},fromQuat:function(f){var c=f.x,g=f.y,p=f.z,x=f.w,y=c+c,T=g+g,E=p+p,S=c*y,C=c*T,P=c*E,R=g*T,A=g*E,M=p*E,O=x*y,F=x*T,I=x*E;return this.setValues(1-(R+M),C+I,P-F,0,C-I,1-(S+M),A+O,0,P+F,A-O,1-(S+R),0,0,0,0,1)},frustum:function(f,c,g,p,x,y){var T=1/(c-f),E=1/(p-g),S=1/(x-y);return this.setValues(x*2*T,0,0,0,0,x*2*E,0,0,(c+f)*T,(p+g)*E,(y+x)*S,-1,0,0,y*x*2*S,0)},perspective:function(f,c,g,p){var x=1/Math.tan(f/2),y=1/(g-p);return this.setValues(x/c,0,0,0,0,x,0,0,0,0,(p+g)*y,-1,0,0,2*p*g*y,0)},perspectiveLH:function(f,c,g,p){return this.setValues(2*g/f,0,0,0,0,2*g/c,0,0,0,0,-p/(g-p),1,0,0,g*p/(g-p),0)},ortho:function(f,c,g,p,x,y){var T=f-c,E=g-p,S=x-y;return T=T===0?T:1/T,E=E===0?E:1/E,S=S===0?S:1/S,this.setValues(-2*T,0,0,0,0,-2*E,0,0,0,0,2*S,0,(f+c)*T,(p+g)*E,(y+x)*S,1)},lookAtRH:function(f,c,g){var p=this.val;return l.subVectors(f,c),l.getLengthSquared()===0&&(l.z=1),l.normalize(),h.crossVectors(g,l),h.getLengthSquared()===0&&(Math.abs(g.z)===1?l.x+=1e-4:l.z+=1e-4,l.normalize(),h.crossVectors(g,l)),h.normalize(),d.crossVectors(l,h),p[0]=h.x,p[1]=h.y,p[2]=h.z,p[4]=d.x,p[5]=d.y,p[6]=d.z,p[8]=l.x,p[9]=l.y,p[10]=l.z,this},lookAt:function(f,c,g){var p=f.x,x=f.y,y=f.z,T=g.x,E=g.y,S=g.z,C=c.x,P=c.y,R=c.z;if(Math.abs(p-C)<n&&Math.abs(x-P)<n&&Math.abs(y-R)<n)return this.identity();var A=p-C,M=x-P,O=y-R,F=1/Math.sqrt(A*A+M*M+O*O);A*=F,M*=F,O*=F;var I=E*O-S*M,B=S*A-T*O,V=T*M-E*A;F=Math.sqrt(I*I+B*B+V*V),F?(F=1/F,I*=F,B*=F,V*=F):(I=0,B=0,V=0);var U=M*V-O*B,Y=O*I-A*V,W=A*B-M*I;return F=Math.sqrt(U*U+Y*Y+W*W),F?(F=1/F,U*=F,Y*=F,W*=F):(U=0,Y=0,W=0),this.setValues(I,U,A,0,B,Y,M,0,V,W,O,0,-(I*p+B*x+V*y),-(U*p+Y*x+W*y),-(A*p+M*x+O*y),1)},yawPitchRoll:function(f,c,g){this.zero(),o.zero(),r.zero();var p=this.val,x=o.val,y=r.val,T=Math.sin(g),E=Math.cos(g);return p[10]=1,p[15]=1,p[0]=E,p[1]=T,p[4]=-T,p[5]=E,T=Math.sin(c),E=Math.cos(c),x[0]=1,x[15]=1,x[5]=E,x[10]=E,x[9]=-T,x[6]=T,T=Math.sin(f),E=Math.cos(f),y[5]=1,y[15]=1,y[0]=E,y[2]=-T,y[8]=T,y[10]=E,this.multiplyLocal(o),this.multiplyLocal(r),this},setWorldMatrix:function(f,c,g,p,x){return this.yawPitchRoll(f.y,f.x,f.z),o.scaling(g.x,g.y,g.z),r.xyz(c.x,c.y,c.z),this.multiplyLocal(o),this.multiplyLocal(r),p&&this.multiplyLocal(p),x&&this.multiplyLocal(x),this},multiplyToMat4:function(f,c){var g=this.val,p=f.val,x=g[0],y=g[1],T=g[2],E=g[3],S=g[4],C=g[5],P=g[6],R=g[7],A=g[8],M=g[9],O=g[10],F=g[11],I=g[12],B=g[13],V=g[14],U=g[15],Y=p[0],W=p[1],w=p[2],L=p[3],D=p[4],N=p[5],G=p[6],b=p[7],z=p[8],X=p[9],H=p[10],$=p[11],J=p[12],K=p[13],Z=p[14],k=p[15];return c.setValues(Y*x+W*S+w*A+L*I,W*y+W*C+w*M+L*B,w*T+W*P+w*O+L*V,L*E+W*R+w*F+L*U,D*x+N*S+G*A+b*I,D*y+N*C+G*M+b*B,D*T+N*P+G*O+b*V,D*E+N*R+G*F+b*U,z*x+X*S+H*A+$*I,z*y+X*C+H*M+$*B,z*T+X*P+H*O+$*V,z*E+X*R+H*F+$*U,J*x+K*S+Z*A+k*I,J*y+K*C+Z*M+k*B,J*T+K*P+Z*O+k*V,J*E+K*R+Z*F+k*U)},fromRotationXYTranslation:function(f,c,g){var p=c.x,x=c.y,y=c.z,T=Math.sin(f.x),E=Math.cos(f.x),S=Math.sin(f.y),C=Math.cos(f.y),P=p,R=x,A=y,M=-T,O=0-M*S,F=0-E*S,I=M*C,B=E*C;return g||(P=C*p+S*y,R=O*p+E*x+I*y,A=F*p+T*x+B*y),this.setValues(C,O,F,0,0,E,T,0,S,I,B,0,P,R,A,1)},getMaxScaleOnAxis:function(){var f=this.val,c=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],g=f[4]*f[4]+f[5]*f[5]+f[6]*f[6],p=f[8]*f[8]+f[9]*f[9]+f[10]*f[10];return Math.sqrt(Math.max(c,g,p))}}),o=new a,r=new a,h=new u,d=new u,l=new u;e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COMPLETE:t(987),DECODED:t(988),DECODED_ALL:t(989),DESTROY:t(990),DETUNE:t(991),GLOBAL_DETUNE:t(992),GLOBAL_MUTE:t(993),GLOBAL_RATE:t(994),GLOBAL_VOLUME:t(995),LOOP:t(996),LOOPED:t(997),MUTE:t(998),PAN:t(999),PAUSE_ALL:t(1e3),PAUSE:t(1001),PLAY:t(1002),RATE:t(1003),RESUME_ALL:t(1004),RESUME:t(1005),SEEK:t(1006),STOP_ALL:t(1007),STOP:t(1008),UNLOCKED:t(1009),VOLUME:t(1010)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=new s({Extends:n,initialize:function d(l,f,c,g,p){var x="png",y;if(r(f)){var T=f;f=o(T,"key"),c=o(T,"url"),y=o(T,"normalMap"),g=o(T,"xhrSettings"),x=o(T,"extension",x),p=o(T,"frameConfig")}Array.isArray(c)&&(y=c[1],c=c[0]);var E={type:"image",cache:l.textureManager,extension:x,responseType:"blob",key:f,url:c,xhrSettings:g,config:p};if(n.call(this,l,E),y){var S=new d(l,this.key,y,g,p);S.type="normalMap",this.setLink(S),l.addFile(S)}},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var d=this;this.data.onload=function(){n.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(d.data),d.onProcessError()},n.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var d,l=this.linkFile;l&&l.state===u.FILE_COMPLETE?(this.type==="image"?d=this.cache.addImage(this.key,this.data,l.data):d=this.cache.addImage(l.key,l.data,this.data),this.pendingDestroy(d),l.pendingDestroy(d)):l||(d=this.cache.addImage(this.key,this.data),this.pendingDestroy(d))}});a.register("image",function(d,l,f){if(Array.isArray(d))for(var c=0;c<d.length;c++)this.addFile(new h(this,d[c]));else this.addFile(new h(this,d,l,f));return this}),e.exports=h},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u?s.setCollision(!0,!0,!0,!0,!1):s.resetCollision(!1)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(164),u=t(0),n=t(11),a=t(15),o=t(1065),r=new u({Extends:a,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,o],initialize:function(d,l,f,c,g){a.call(this,d,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(c,g),this.setPosition(l,f),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(h,d){this.anims.update(h,d)},play:function(h,d){return this.anims.play(h,d)},playReverse:function(h,d){return this.anims.playReverse(h,d)},playAfterDelay:function(h,d){return this.anims.playAfterDelay(h,d)},playAfterRepeat:function(h,d){return this.anims.playAfterRepeat(h,d)},chain:function(h){return this.anims.chain(h)},stop:function(){return this.anims.stop()},stopAfterDelay:function(h){return this.anims.stopAfterDelay(h)},stopAfterRepeat:function(h){return this.anims.stopAfterRepeat(h)},stopOnFrame:function(h){return this.anims.stopOnFrame(h)},toJSON:function(){return n.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});e.exports=r},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){if(!(u>=s.length)){for(var n=s.length-1,a=s[u],o=u;o<n;o++)s[o]=s[o+1];return s.length=n,a}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:t(643),DESTROY:t(644),REMOVED_FROM_SCENE:t(645),VIDEO_COMPLETE:t(646),VIDEO_CREATED:t(647),VIDEO_ERROR:t(648),VIDEO_LOOP:t(649),VIDEO_PLAY:t(650),VIDEO_SEEKED:t(651),VIDEO_SEEKING:t(652),VIDEO_STOP:t(653),VIDEO_TIMEOUT:t(654),VIDEO_UNLOCKED:t(655)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return n===void 0&&(n=0),u===0?s:(s-=n,s=u*Math.floor(s/u),a?(n+s)/u:n+s)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u={};for(var n in s)Array.isArray(s[n])?u[n]=s[n].slice(0):u[n]=s[n];return u};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=s.length;if(u<0||u>o||u>=n||n>o||u+n>o){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(a,o){return String(a).localeCompare(o)}function s(a,o){var r=a.length;if(r<=1)return a;for(var h=new Array(r),d=1;d<r;d*=2){u(a,o,d,h);var l=a;a=h,h=l}return a}function u(a,o,r,h){var d=a.length,l=0,f=r*2,c,g,p,x,y;for(c=0;c<d;c+=f)for(g=c+r,p=g+r,g>d&&(g=d),p>d&&(p=d),x=c,y=g;;)if(x<g&&y<p)o(a[x],a[y])<=0?h[l++]=a[x++]:h[l++]=a[y++];else if(x<g)h[l++]=a[x++];else if(y<p)h[l++]=a[y++];else break}var n=function(a,o){o===void 0&&(o=t);var r=s(a,o);return r!==a&&u(r,null,a.length,a),a};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(134),u=t(205),n=function(a,o){var r=s.Power0;if(typeof a=="string")if(s.hasOwnProperty(a))r=s[a];else{var h="";a.indexOf(".")&&(h=a.substr(a.indexOf(".")+1),h.toLowerCase()==="in"?h="easeIn":h.toLowerCase()==="out"?h="easeOut":h.toLowerCase()==="inout"&&(h="easeInOut")),a=u(a.substr(0,a.indexOf(".")+1)+h),s.hasOwnProperty(a)&&(r=s[a])}else typeof a=="function"?r=a:Array.isArray(a)&&a.length;if(!o)return r;var d=o.slice(0);return d.unshift(0),function(l){return d[0]=l,r.apply(this,d)}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,o,r,h){var d=n.strokeTint,l=s.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*o);d.TL=l,d.TR=l,d.BL=l,d.BR=l;var f=a.pathData,c=f.length-1,g=a.lineWidth,p=g/2,x=f[0]-r,y=f[1]-h;a.closePath||(c-=2);for(var T=2;T<c;T+=2){var E=f[T]-r,S=f[T+1]-h;n.batchLine(x,y,E,S,p,p,g,T-2,a.closePath?T===c-1:!1),x=E,y=S}};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(115),n=t(476),a=t(477),o=t(56),r=t(47),h=t(181),d=new s({initialize:function(f,c,g,p,x,y){f===void 0&&(f=0),c===void 0&&(c=0),g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=0),y===void 0&&(y=0),this.type=o.TRIANGLE,this.x1=f,this.y1=c,this.x2=g,this.y2=p,this.x3=x,this.y3=y},contains:function(l,f){return u(this,l,f)},getPoint:function(l,f){return n(this,l,f)},getPoints:function(l,f,c){return a(this,l,f,c)},getRandomPoint:function(l){return h(this,l)},setTo:function(l,f,c,g,p,x){return l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=0),g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=0),this.x1=l,this.y1=f,this.x2=c,this.y2=g,this.x3=p,this.y3=x,this},getLineA:function(l){return l===void 0&&(l=new r),l.setTo(this.x1,this.y1,this.x2,this.y2),l},getLineB:function(l){return l===void 0&&(l=new r),l.setTo(this.x2,this.y2,this.x3,this.y3),l},getLineC:function(l){return l===void 0&&(l=new r),l.setTo(this.x3,this.y3,this.x1,this.y1),l},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(l){var f=0;this.x1<=this.x2&&this.x1<=this.x3?f=this.x1-l:this.x2<=this.x1&&this.x2<=this.x3?f=this.x2-l:f=this.x3-l,this.x1-=f,this.x2-=f,this.x3-=f}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(l){var f=0;this.x1>=this.x2&&this.x1>=this.x3?f=this.x1-l:this.x2>=this.x1&&this.x2>=this.x3?f=this.x2-l:f=this.x3-l,this.x1-=f,this.x2-=f,this.x3-=f}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(l){var f=0;this.y1<=this.y2&&this.y1<=this.y3?f=this.y1-l:this.y2<=this.y1&&this.y2<=this.y3?f=this.y2-l:f=this.y3-l,this.y1-=f,this.y2-=f,this.y3-=f}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(l){var f=0;this.y1>=this.y2&&this.y1>=this.y3?f=this.y1-l:this.y2>=this.y1&&this.y2>=this.y3?f=this.y2-l:f=this.y3-l,this.y1-=f,this.y2-=f,this.y3-=f}}});e.exports=d},function(e,v){var t={};e.exports=t,function(){t.create=function(s,u){return{x:s||0,y:u||0}},t.clone=function(s){return{x:s.x,y:s.y}},t.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},t.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},t.rotate=function(s,u,n){var a=Math.cos(u),o=Math.sin(u);n||(n={});var r=s.x*a-s.y*o;return n.y=s.x*o+s.y*a,n.x=r,n},t.rotateAbout=function(s,u,n,a){var o=Math.cos(u),r=Math.sin(u);a||(a={});var h=n.x+((s.x-n.x)*o-(s.y-n.y)*r);return a.y=n.y+((s.x-n.x)*r+(s.y-n.y)*o),a.x=h,a},t.normalise=function(s){var u=t.magnitude(s);return u===0?{x:0,y:0}:{x:s.x/u,y:s.y/u}},t.dot=function(s,u){return s.x*u.x+s.y*u.y},t.cross=function(s,u){return s.x*u.y-s.y*u.x},t.cross3=function(s,u,n){return(u.x-s.x)*(n.y-s.y)-(u.y-s.y)*(n.x-s.x)},t.add=function(s,u,n){return n||(n={}),n.x=s.x+u.x,n.y=s.y+u.y,n},t.sub=function(s,u,n){return n||(n={}),n.x=s.x-u.x,n.y=s.y-u.y,n},t.mult=function(s,u){return{x:s.x*u,y:s.y*u}},t.div=function(s,u){return{x:s.x/u,y:s.y/u}},t.perp=function(s,u){return u=u===!0?-1:1,{x:u*-s.y,y:u*s.x}},t.neg=function(s){return{x:-s.x,y:-s.y}},t.angle=function(s,u){return Math.atan2(u.y-s.y,u.x-s.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]}()},function(e,v){var t={};e.exports=t,function(){t.create=function(s){var u={min:{x:0,y:0},max:{x:0,y:0}};return s&&t.update(u,s),u},t.update=function(s,u,n){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var a=0;a<u.length;a++){var o=u[a];o.x>s.max.x&&(s.max.x=o.x),o.x<s.min.x&&(s.min.x=o.x),o.y>s.max.y&&(s.max.y=o.y),o.y<s.min.y&&(s.min.y=o.y)}n&&(n.x>0?s.max.x+=n.x:s.min.x+=n.x,n.y>0?s.max.y+=n.y:s.min.y+=n.y)},t.contains=function(s,u){return u.x>=s.min.x&&u.x<=s.max.x&&u.y>=s.min.y&&u.y<=s.max.y},t.overlaps=function(s,u){return s.min.x<=u.max.x&&s.max.x>=u.min.x&&s.max.y>=u.min.y&&s.min.y<=u.max.y},t.translate=function(s,u){s.min.x+=u.x,s.max.x+=u.x,s.min.y+=u.y,s.max.y+=u.y},t.shift=function(s,u){var n=s.max.x-s.min.x,a=s.max.y-s.min.y;s.min.x=u.x,s.max.x=u.x+n,s.min.y=u.y,s.max.y=u.y+a}}()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(0),n=t(11),a=t(502),o=new u({Mixins:[n.Alpha,n.Flip,n.Visible],initialize:function(h,d,l,f,c,g,p,x){this.layer=h,this.index=d,this.x=l,this.y=f,this.width=c,this.height=g,this.right,this.bottom,this.baseWidth=p!==void 0?p:c,this.baseHeight=x!==void 0?x:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(r,h){return!(r<this.pixelX||h<this.pixelY||r>this.right||h>this.bottom)},copy:function(r){return this.index=r.index,this.alpha=r.alpha,this.properties=r.properties,this.visible=r.visible,this.setFlip(r.flipX,r.flipY),this.tint=r.tint,this.rotation=r.rotation,this.collideUp=r.collideUp,this.collideDown=r.collideDown,this.collideLeft=r.collideLeft,this.collideRight=r.collideRight,this.collisionCallback=r.collisionCallback,this.collisionCallbackContext=r.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(r){var h=this.tilemapLayer;return h?h.tileToWorldX(this.x,r):this.x*this.baseWidth},getRight:function(r){var h=this.tilemapLayer;return h?this.getLeft(r)+this.width*h.scaleX:this.getLeft(r)+this.width},getTop:function(r){var h=this.tilemapLayer;return h?h.tileToWorldY(this.y,r)-(this.height-this.baseHeight)*h.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(r){var h=this.tilemapLayer;return h?this.getTop(r)+this.height*h.scaleY:this.getTop(r)+this.height},getBounds:function(r,h){return h===void 0&&(h=new a),h.x=this.getLeft(),h.y=this.getTop(),h.width=this.getRight()-h.x,h.height=this.getBottom()-h.y,h},getCenterX:function(r){return(this.getLeft(r)+this.getRight(r))/2},getCenterY:function(r){return(this.getTop(r)+this.getBottom(r))/2},intersects:function(r,h,d,l){return!(d<=this.pixelX||l<=this.pixelY||r>=this.right||h>=this.bottom)},isInteresting:function(r,h){return r&&h?this.canCollide||this.hasInterestingFace:r?this.collides:h?this.hasInterestingFace:!1},resetCollision:function(r){if(r===void 0&&(r=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,r){var h=this.tilemapLayer;h&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(r,h,d,l,f){if(h===void 0&&(h=r),d===void 0&&(d=r),l===void 0&&(l=r),f===void 0&&(f=!0),this.collideLeft=r,this.collideRight=h,this.collideUp=d,this.collideDown=l,this.faceLeft=r,this.faceRight=h,this.faceTop=d,this.faceBottom=l,f){var c=this.tilemapLayer;c&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(r,h){return r===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=r,this.collisionCallbackContext=h),this},setSize:function(r,h,d,l){return r!==void 0&&(this.width=r),h!==void 0&&(this.height=h),d!==void 0&&(this.baseWidth=d),l!==void 0&&(this.baseHeight=l),this.updatePixelXY(),this},updatePixelXY:function(){var r=this.layer.orientation;if(r===s.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(r===s.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(r===s.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(r===s.HEXAGONAL){var h=this.layer.hexSideLength,d=(this.baseHeight-h)/2+h;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*d}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var r=this.layer.tilemapLayer;if(r){var h=r.gidMap[this.index];if(h)return h}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var r=this.tilemapLayer;return r?r.tilemap:null}}});e.exports=o},function(e,v,t){var s={};e.exports=s;var u=t(64),n=t(32),a=t(41),o=t(84),r=t(83),h=t(1393);(function(){s.rectangle=function(d,l,f,c,g){g=g||{};var p={label:"Rectangle Body",position:{x:d,y:l},vertices:u.fromPath("L 0 0 L "+f+" 0 L "+f+" "+c+" L 0 "+c)};if(g.chamfer){var x=g.chamfer;p.vertices=u.chamfer(p.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return a.create(n.extend({},p,g))},s.trapezoid=function(d,l,f,c,g,p){p=p||{},g*=.5;var x=(1-g*2)*f,y=f*g,T=y+x,E=T+y,S;g<.5?S="L 0 0 L "+y+" "+-c+" L "+T+" "+-c+" L "+E+" 0":S="L 0 0 L "+T+" "+-c+" L "+E+" 0";var C={label:"Trapezoid Body",position:{x:d,y:l},vertices:u.fromPath(S)};if(p.chamfer){var P=p.chamfer;C.vertices=u.chamfer(C.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete p.chamfer}return a.create(n.extend({},C,p))},s.circle=function(d,l,f,c,g){c=c||{};var p={label:"Circle Body",circleRadius:f};g=g||25;var x=Math.ceil(Math.max(10,Math.min(g,f)));return x%2===1&&(x+=1),s.polygon(d,l,x,f,n.extend({},p,c))},s.polygon=function(d,l,f,c,g){if(g=g||{},f<3)return s.circle(d,l,c,g);for(var p=2*Math.PI/f,x="",y=p*.5,T=0;T<f;T+=1){var E=y+T*p,S=Math.cos(E)*c,C=Math.sin(E)*c;x+="L "+S.toFixed(3)+" "+C.toFixed(3)+" "}var P={label:"Polygon Body",position:{x:d,y:l},vertices:u.fromPath(x)};if(g.chamfer){var R=g.chamfer;P.vertices=u.chamfer(P.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete g.chamfer}return a.create(n.extend({},P,g))},s.fromVertices=function(d,l,f,c,g,p,x){var y,T,E,S,C,P;for(c=c||{},T=[],g=typeof g!="undefined"?g:!1,p=typeof p!="undefined"?p:.01,x=typeof x!="undefined"?x:10,h||n.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),n.isArray(f[0])||(f=[f]),P=0;P<f.length;P+=1)if(S=f[P],E=u.isConvex(S),E||!h)E?S=u.clockwiseSort(S):S=u.hull(S),T.push({position:{x:d,y:l},vertices:S});else{var R=S.map(function(F){return[F.x,F.y]});h.makeCCW(R),p!==!1&&h.removeCollinearPoints(R,p);var A=h.quickDecomp(R);for(C=0;C<A.length;C++){var M=A[C],O=M.map(function(F){return{x:F[0],y:F[1]}});x>0&&u.area(O)<x||T.push({position:u.centre(O),vertices:O})}}for(C=0;C<T.length;C++)T[C]=a.create(n.extend(T[C],c));return g&&s.flagCoincidentParts(T,5),T.length>1?(y=a.create(n.extend({parts:T.slice(0)},c)),a.setPosition(y,{x:d,y:l}),y):T[0]},s.flagCoincidentParts=function(d,l){l===void 0&&(l=5);for(var f=0;f<d.length;f++)for(var c=d[f],g=f+1;g<d.length;g++){var p=d[g];if(o.overlaps(c.bounds,p.bounds))for(var x=c.vertices,y=p.vertices,T=0;T<c.vertices.length;T++)for(var E=0;E<p.vertices.length;E++){var S=r.magnitudeSquared(r.sub(x[(T+1)%x.length],y[E])),C=r.magnitudeSquared(r.sub(x[T],y[(E+1)%y.length]));S<l&&C<l&&(x[T].isInternal=!0,y[E].isInternal=!0)}}return d}})()},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x-s.width*s.originX+s.width*.5};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.width*s.originX;return s.x=u+n-s.width*.5,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.y-s.height*s.originY+s.height*.5};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.height*s.originY;return s.y=u+n-s.height*.5,s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={POST_RENDER:t(628),PRE_RENDER:t(629),RENDER:t(630),RESIZE:t(631)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74),u=function(n,a,o,r){r===void 0&&(r=n);var h;if(!Array.isArray(a))return h=n.indexOf(a),h!==-1?(s(n,h),o&&o.call(r,a),a):null;for(var d=a.length-1,l=[];d>=0;){var f=a[d];h=n.indexOf(f),h!==-1&&(s(n,h),l.push(f),o&&o.call(r,f)),d--}return l};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(199),n=t(10),a=t(3),o=new s({initialize:function(h){this.type=h,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new a,this._tmpVec2B=new a},draw:function(r,h){return h===void 0&&(h=32),r.strokePoints(this.getPoints(h))},getBounds:function(r,h){r||(r=new n),h===void 0&&(h=16);var d=this.getLength();h>d&&(h=d/2);var l=Math.max(1,Math.round(d/h));return u(this.getSpacedPoints(l),r)},getDistancePoints:function(r){var h=this.getLength(),d=Math.max(1,h/r);return this.getSpacedPoints(d)},getEndPoint:function(r){return r===void 0&&(r=new a),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var h=[],d,l=this.getPoint(0,this._tmpVec2A),f=0;h.push(0);for(var c=1;c<=r;c++)d=this.getPoint(c/r,this._tmpVec2B),f+=d.distance(l),h.push(f),l.copy(d);return this.cacheArcLengths=h,h},getPointAt:function(r,h){var d=this.getUtoTmapping(r);return this.getPoint(d,h)},getPoints:function(r,h,d){d===void 0&&(d=[]),r||(h?r=this.getLength()/h:r=this.defaultDivisions);for(var l=0;l<=r;l++)d.push(this.getPoint(l/r));return d},getRandomPoint:function(r){return r===void 0&&(r=new a),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,h,d){d===void 0&&(d=[]),r||(h?r=this.getLength()/h:r=this.defaultDivisions);for(var l=0;l<=r;l++){var f=this.getUtoTmapping(l/r,null,r);d.push(this.getPoint(f))}return d},getStartPoint:function(r){return r===void 0&&(r=new a),this.getPointAt(0,r)},getTangent:function(r,h){h===void 0&&(h=new a);var d=1e-4,l=r-d,f=r+d;return l<0&&(l=0),f>1&&(f=1),this.getPoint(l,this._tmpVec2A),this.getPoint(f,h),h.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,h){var d=this.getUtoTmapping(r);return this.getTangent(d,h)},getTFromDistance:function(r,h){return r<=0?0:this.getUtoTmapping(0,r,h)},getUtoTmapping:function(r,h,d){var l=this.getLengths(d),f=0,c=l.length,g;h?g=Math.min(h,l[c-1]):g=r*l[c-1];for(var p=0,x=c-1,y;p<=x;)if(f=Math.floor(p+(x-p)/2),y=l[f]-g,y<0)p=f+1;else if(y>0)x=f-1;else{x=f;break}if(f=x,l[f]===g)return f/(c-1);var T=l[f],E=l[f+1],S=E-T,C=(g-T)/S;return(f+C)/(c-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:t(968),COMPLETE:t(969),FILE_COMPLETE:t(970),FILE_KEY_COMPLETE:t(971),FILE_LOAD_ERROR:t(972),FILE_LOAD:t(973),FILE_PROGRESS:t(974),POST_PROCESS:t(975),PROGRESS:t(976),START:t(977)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,o){o===void 0&&(o=new s);var r=n.x1,h=n.y1,d=n.x2,l=n.y2,f=a.x1,c=a.y1,g=a.x2,p=a.y2,x=(g-f)*(h-c)-(p-c)*(r-f),y=(d-r)*(h-c)-(l-h)*(r-f),T=(p-c)*(d-r)-(g-f)*(l-h);if(T===0)return!1;var E=x/T,S=y/T;return E>=0&&E<=1&&S>=0&&S<=1?(o.x=r+E*(d-r),o.y=h+E*(l-h),!0):!1};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.atan2(s.y2-s.y1,s.x2-s.x1)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=function(n,a,o){return n=s(n,0,1),(o-a)*n+a};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s&&s.hasOwnProperty(u)?s[u]:n};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(315),n=new s({initialize:function(o,r){this.parent=o,this.events=r,r||(this.events=o.events?o.events:o),this.list={},this.values={},this._frozen=!1,!o.hasOwnProperty("sys")&&this.events&&this.events.once(u.DESTROY,this.destroy,this)},get:function(a){var o=this.list;if(Array.isArray(a)){for(var r=[],h=0;h<a.length;h++)r.push(o[a[h]]);return r}else return o[a]},getAll:function(){var a={};for(var o in this.list)this.list.hasOwnProperty(o)&&(a[o]=this.list[o]);return a},query:function(a){var o={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(a)&&(o[r]=this.list[r]);return o},set:function(a,o){if(this._frozen)return this;if(typeof a=="string")return this.setValue(a,o);for(var r in a)this.setValue(r,a[r]);return this},inc:function(a,o){if(this._frozen)return this;o===void 0&&(o=1);var r=this.get(a);return r===void 0&&(r=0),this.set(a,r+o),this},toggle:function(a){return this._frozen?this:(this.set(a,!this.get(a)),this)},setValue:function(a,o){if(this._frozen)return this;if(this.has(a))this.values[a]=o;else{var r=this,h=this.list,d=this.events,l=this.parent;Object.defineProperty(this.values,a,{enumerable:!0,configurable:!0,get:function(){return h[a]},set:function(f){if(!r._frozen){var c=h[a];h[a]=f,d.emit(u.CHANGE_DATA,l,a,f,c),d.emit(u.CHANGE_DATA_KEY+a,l,f,c)}}}),h[a]=o,d.emit(u.SET_DATA,l,a,o)}return this},each:function(a,o){for(var r=[this.parent,null,void 0],h=1;h<arguments.length;h++)r.push(arguments[h]);for(var d in this.list)r[1]=d,r[2]=this.list[d],a.apply(o,r);return this},merge:function(a,o){o===void 0&&(o=!0);for(var r in a)a.hasOwnProperty(r)&&(o||!o&&!this.has(r))&&this.setValue(r,a[r]);return this},remove:function(a){if(this._frozen)return this;if(Array.isArray(a))for(var o=0;o<a.length;o++)this.removeValue(a[o]);else return this.removeValue(a);return this},removeValue:function(a){if(this.has(a)){var o=this.list[a];delete this.list[a],delete this.values[a],this.events.emit(u.REMOVE_DATA,this.parent,a,o)}return this},pop:function(a){var o=void 0;return!this._frozen&&this.has(a)&&(o=this.list[a],delete this.list[a],delete this.values[a],this.events.emit(u.REMOVE_DATA,this.parent,a,o)),o},has:function(a){return this.list.hasOwnProperty(a)},setFreeze:function(a){return this._frozen=a,this},reset:function(){for(var a in this.list)delete this.list[a],delete this.values[a];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(u.CHANGE_DATA),this.events.off(u.SET_DATA),this.events.off(u.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(a){this._frozen=!!a}},count:{get:function(){var a=0;for(var o in this.list)this.list[o]!==void 0&&a++;return a}}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a){if(this.entries={},this.size=0,Array.isArray(a))for(var o=0;o<a.length;o++)this.set(a[o][0],a[o][1])},set:function(n,a){return this.has(n)||this.size++,this.entries[n]=a,this},get:function(n){if(this.has(n))return this.entries[n]},getArray:function(){var n=[],a=this.entries;for(var o in a)n.push(a[o]);return n},has:function(n){return this.entries.hasOwnProperty(n)},delete:function(n){return this.has(n)&&(delete this.entries[n],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(n){delete this.entries[n]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var n=[],a=this.entries;for(var o in a)n.push(a[o]);return n},dump:function(){var n=this.entries;console.group("Map");for(var a in n)console.log(a,n[a]);console.groupEnd()},each:function(n){var a=this.entries;for(var o in a)if(n(o,a[o])===!1)break;return this},contains:function(n){var a=this.entries;for(var o in a)if(a[o]===n)return!0;return!1},merge:function(n,a){a===void 0&&(a=!1);var o=this.entries,r=n.entries;for(var h in r)o.hasOwnProperty(h)&&a?o[h]=r[h]:this.set(h,r[h]);return this}});e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s<<16|u<<8|n};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ENTER_FULLSCREEN:t(800),FULLSCREEN_FAILED:t(801),FULLSCREEN_UNSUPPORTED:t(802),LEAVE_FULLSCREEN:t(803),ORIENTATION_CHANGE:t(804),RESIZE:t(805)}},function(e,v,t){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function n(){if(typeof importScripts=="function")return u;var a=navigator.userAgent;/Windows/.test(a)?u.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(u.iOS=!0,u.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),u.iOSVersion=parseInt(RegExp.$1,10)):u.macOS=!0:/Android/.test(a)?u.android=!0:/Linux/.test(a)?u.linux=!0:/iP[ao]d|iPhone/i.test(a)?(u.iOS=!0,navigator.appVersion.match(/OS (\d+)/),u.iOSVersion=parseInt(RegExp.$1,10),u.iPhone=a.toLowerCase().indexOf("iphone")!==-1,u.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?u.kindle=!0:/CrOS/.test(a)&&(u.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(u.android=!1,u.iOS=!1,u.macOS=!1,u.windows=!0,u.windowsPhone=!0);var o=/Silk/.test(a);return(u.windows||u.macOS||u.linux&&!o||u.chromeOS)&&(u.desktop=!0),(u.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(u.desktop=!1),navigator.standalone&&(u.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(u.cordova=!0),window.ejecta!==void 0&&(u.ejecta=!0)),typeof s!="undefined"&&s.versions&&s.versions.node&&(u.node=!0),u.node&&typeof s.versions=="object"&&(u.nodeWebkit=!!s.versions["node-webkit"],u.electron=!!s.versions.electron),/Crosswalk/.test(a)&&(u.crosswalk=!0),u.pixelRatio=window.devicePixelRatio||1,u}e.exports=n()}).call(this,t(807))},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:t(861),ERROR:t(862),LOAD:t(863),READY:t(864),REMOVE:t(865)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(59),n=t(2),a=t(878),o=t(879),r=t(25),h=t(12),d=t(107),l=t(58),f=new s({Extends:l,initialize:function(g){var p=g.game.renderer,x=n(g,"fragShader",a);g.fragShader=h.parseFragmentShaderMaxTextures(x,p.maxTextures),g.vertShader=n(g,"vertShader",o),g.attributes=n(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:d.UNSIGNED_BYTE,normalized:!0}]),l.call(this,g),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){l.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(c,g,p){this.manager.set(this,c);var x=this._tempMatrix1,y=this._tempMatrix2,T=this._tempMatrix3,E=c.frame,S=E.glTexture,C=E.u0,P=E.v0,R=E.u1,A=E.v1,M=E.x,O=E.y,F=E.cutWidth,I=E.cutHeight,B=E.customPivot,V=c.displayOriginX,U=c.displayOriginY,Y=-V+M,W=-U+O;if(c.isCropped){var w=c._crop;(w.flipX!==c.flipX||w.flipY!==c.flipY)&&E.updateCropUVs(w,c.flipX,c.flipY),C=w.u0,P=w.v0,R=w.u1,A=w.v1,F=w.width,I=w.height,M=w.x,O=w.y,Y=-V+M,W=-U+O}var L=1,D=1;c.flipX&&(B||(Y+=-E.realWidth+V*2),L=-1),(c.flipY||E.source.isGLTexture&&!S.flipY)&&(B||(W+=-E.realHeight+U*2),D=-1),y.applyITRS(c.x,c.y,c.rotation,c.scaleX*L,c.scaleY*D),x.copyFrom(g.matrix),p?(x.multiplyWithOffset(p,-g.scrollX*c.scrollFactorX,-g.scrollY*c.scrollFactorY),y.e=c.x,y.f=c.y):(y.e-=g.scrollX*c.scrollFactorX,y.f-=g.scrollY*c.scrollFactorY),x.multiply(y,T);var N=Y+F,G=W+I,b=g.roundPixels,z=T.getXRound(Y,W,b),X=T.getYRound(Y,W,b),H=T.getXRound(Y,G,b),$=T.getYRound(Y,G,b),J=T.getXRound(N,G,b),K=T.getYRound(N,G,b),Z=T.getXRound(N,W,b),k=T.getYRound(N,W,b),Q=h.getTintAppendFloatAlpha,q=g.alpha,ot=Q(c.tintTopLeft,q*c._alphaTL),st=Q(c.tintTopRight,q*c._alphaTR),_=Q(c.tintBottomLeft,q*c._alphaBL),j=Q(c.tintBottomRight,q*c._alphaBR);this.shouldFlush(6)&&this.flush();var ht=this.setGameObject(c,E);this.manager.preBatch(c),this.batchQuad(c,z,X,H,$,J,K,Z,k,C,P,R,A,ot,st,_,j,c.tintFill,S,ht),this.manager.postBatch(c)},batchTexture:function(c,g,p,x,y,T,E,S,C,P,R,A,M,O,F,I,B,V,U,Y,W,w,L,D,N,G,b,z,X,H,$,J){this.manager.set(this,c);var K=this._tempMatrix1,Z=this._tempMatrix2,k=this._tempMatrix3,Q=V/p+b,q=U/x+z,ot=(V+Y)/p+b,st=(U+W)/x+z,_=E,j=S,ht=-I,tt=-B;if(c.isCropped){var at=c._crop,Ut=at.width,Yt=at.height;_=Ut,j=Yt,E=Ut,S=Yt,V=at.x,U=at.y;var pt=V,ft=U;A&&(pt=Y-at.x-Ut),M&&(ft=W-at.y-Yt),Q=pt/p+b,q=ft/x+z,ot=(pt+Ut)/p+b,st=(ft+Yt)/x+z,ht=-I+V,tt=-B+U}M=M^(!$&&g.isRenderTexture?1:0),A&&(_*=-1,ht+=E),M&&(j*=-1,tt+=S);var Ct=ht+_,Et=tt+j;Z.applyITRS(y,T,R,C,P),K.copyFrom(X.matrix),H?(K.multiplyWithOffset(H,-X.scrollX*O,-X.scrollY*F),Z.e=y,Z.f=T):(Z.e-=X.scrollX*O,Z.f-=X.scrollY*F),K.multiply(Z,k);var yt=X.roundPixels,Xt=k.getXRound(ht,tt,yt),Ae=k.getYRound(ht,tt,yt),Oe=k.getXRound(ht,Et,yt),Le=k.getYRound(ht,Et,yt),Fe=k.getXRound(Ct,Et,yt),Ie=k.getYRound(Ct,Et,yt),we=k.getXRound(Ct,tt,yt),yv=k.getYRound(Ct,tt,yt);J===void 0&&(J=this.renderer.setTexture2D(g)),c&&this.manager.preBatch(c),this.batchQuad(c,Xt,Ae,Oe,Le,Fe,Ie,we,yv,Q,q,ot,st,w,L,D,N,G,g,J),c&&this.manager.postBatch(c)},batchTextureFrame:function(c,g,p,x,y,T,E){this.manager.set(this);var S=this._tempMatrix1.copyFrom(T),C=this._tempMatrix2,P=g+c.width,R=p+c.height;E?S.multiply(E,C):C=S;var A=C.getX(g,p),M=C.getY(g,p),O=C.getX(g,R),F=C.getY(g,R),I=C.getX(P,R),B=C.getY(P,R),V=C.getX(P,p),U=C.getY(P,p),Y=this.renderer.setTextureSource(c.source);x=h.getTintAppendFloatAlpha(x,y),this.batchQuad(null,A,M,O,F,I,B,V,U,c.u0,c.v0,c.u1,c.v1,x,x,x,x,0,c.glTexture,Y)},batchFillRect:function(c,g,p,x,y,T){this.renderer.pipelines.set(this);var E=this.calcMatrix;T&&T.multiply(y,E);var S=c+p,C=g+x,P=E.getX(c,g),R=E.getY(c,g),A=E.getX(c,C),M=E.getY(c,C),O=E.getX(S,C),F=E.getY(S,C),I=E.getX(S,g),B=E.getY(S,g),V=this.fillTint;this.batchQuad(null,P,R,A,M,O,F,I,B,0,0,1,1,V.TL,V.TR,V.BL,V.BR,2)},batchFillTriangle:function(c,g,p,x,y,T,E,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(E,C);var P=C.getX(c,g),R=C.getY(c,g),A=C.getX(p,x),M=C.getY(p,x),O=C.getX(y,T),F=C.getY(y,T),I=this.fillTint;this.batchTri(null,P,R,A,M,O,F,0,0,1,1,I.TL,I.TR,I.BL,2)},batchStrokeTriangle:function(c,g,p,x,y,T,E,S,C){var P=this.tempTriangle;P[0].x=c,P[0].y=g,P[0].width=E,P[1].x=p,P[1].y=x,P[1].width=E,P[2].x=y,P[2].y=T,P[2].width=E,P[3].x=c,P[3].y=g,P[3].width=E,this.batchStrokePath(P,E,!1,S,C)},batchFillPath:function(c,g,p){this.renderer.pipelines.set(this);var x=this.calcMatrix;p&&p.multiply(g,x);for(var y=c.length,T=this.polygonCache,E,S,C=this.fillTint.TL,P=this.fillTint.TR,R=this.fillTint.BL,A=0;A<y;++A)S=c[A],T.push(S.x,S.y);E=u(T),y=E.length;for(var M=0;M<y;M+=3){var O=E[M+0]*2,F=E[M+1]*2,I=E[M+2]*2,B=T[O+0],V=T[O+1],U=T[F+0],Y=T[F+1],W=T[I+0],w=T[I+1],L=x.getX(B,V),D=x.getY(B,V),N=x.getX(U,Y),G=x.getY(U,Y),b=x.getX(W,w),z=x.getY(W,w);this.batchTri(null,L,D,N,G,b,z,0,0,1,1,C,P,R,2)}T.length=0},batchStrokePath:function(c,g,p,x,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=c.length-1,E=0;E<T;E++){var S=c[E],C=c[E+1];this.batchLine(S.x,S.y,C.x,C.y,S.width/2,C.width/2,g,E,!p&&E===T-1,x,y)}},batchLine:function(c,g,p,x,y,T,E,S,C,P,R){this.renderer.pipelines.set(this);var A=this.calcMatrix;R&&R.multiply(P,A);var M=p-c,O=x-g,F=Math.sqrt(M*M+O*O),I=y*(x-g)/F,B=y*(c-p)/F,V=T*(x-g)/F,U=T*(c-p)/F,Y=p-V,W=x-U,w=c-I,L=g-B,D=p+V,N=x+U,G=c+I,b=g+B,z=A.getX(Y,W),X=A.getY(Y,W),H=A.getX(w,L),$=A.getY(w,L),J=A.getX(D,N),K=A.getY(D,N),Z=A.getX(G,b),k=A.getY(G,b),Q=this.strokeTint,q=Q.TL,ot=Q.TR,st=Q.BL,_=Q.BR;if(this.batchQuad(null,Z,k,H,$,z,X,J,K,0,0,1,1,q,ot,st,_,2),!(E<=2)){var j=this.prevQuad,ht=this.firstQuad;S>0&&j[4]?this.batchQuad(null,Z,k,H,$,j[0],j[1],j[2],j[3],0,0,1,1,q,ot,st,_,2):(ht[0]=Z,ht[1]=k,ht[2]=H,ht[3]=$,ht[4]=1),C&&ht[4]?this.batchQuad(null,z,X,J,K,ht[0],ht[1],ht[2],ht[3],0,0,1,1,q,ot,st,_,2):(j[0]=z,j[1]=X,j[2]=J,j[3]=K,j[4]=1)}}});e.exports=f},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(17),a=new s({initialize:function(r,h,d,l,f,c,g){this.texture=r,this.name=h,this.source=r.source[d],this.sourceIndex=d,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(c,g,l,f)},setSize:function(o,r,h,d){h===void 0&&(h=0),d===void 0&&(d=0),this.cutX=h,this.cutY=d,this.cutWidth=o,this.cutHeight=r,this.width=o,this.height=r,this.halfWidth=Math.floor(o*.5),this.halfHeight=Math.floor(r*.5),this.centerX=Math.floor(o/2),this.centerY=Math.floor(r/2);var l=this.data,f=l.cut;f.x=h,f.y=d,f.w=o,f.h=r,f.r=h+o,f.b=d+r,l.sourceSize.w=o,l.sourceSize.h=r,l.spriteSourceSize.w=o,l.spriteSourceSize.h=r,l.radius=.5*Math.sqrt(o*o+r*r);var c=l.drawImage;return c.x=h,c.y=d,c.width=o,c.height=r,this.updateUVs()},setTrim:function(o,r,h,d,l,f){var c=this.data,g=c.spriteSourceSize;return c.trim=!0,c.sourceSize.w=o,c.sourceSize.h=r,g.x=h,g.y=d,g.w=l,g.h=f,g.r=h+l,g.b=d+f,this.x=h,this.y=d,this.width=l,this.height=f,this.halfWidth=l*.5,this.halfHeight=f*.5,this.centerX=Math.floor(l/2),this.centerY=Math.floor(f/2),this.updateUVs()},setCropUVs:function(o,r,h,d,l,f,c){var g=this.cutX,p=this.cutY,x=this.cutWidth,y=this.cutHeight,T=this.realWidth,E=this.realHeight;r=u(r,0,T),h=u(h,0,E),d=u(d,0,T-r),l=u(l,0,E-h);var S=g+r,C=p+h,P=d,R=l,A=this.data;if(A.trim){var M=A.spriteSourceSize;d=u(d,0,x-r),l=u(l,0,y-h);var O=r+d,F=h+l,I=!(M.r<r||M.b<h||M.x>O||M.y>F);if(I){var B=Math.max(M.x,r),V=Math.max(M.y,h),U=Math.min(M.r,O)-B,Y=Math.min(M.b,F)-V;P=U,R=Y,f?S=g+(x-(B-M.x)-U):S=g+(B-M.x),c?C=p+(y-(V-M.y)-Y):C=p+(V-M.y),r=B,h=V,d=U,l=Y}else S=0,C=0,P=0,R=0}else f&&(S=g+(x-r-d)),c&&(C=p+(y-h-l));var W=this.source.width,w=this.source.height;return o.u0=Math.max(0,S/W),o.v0=Math.max(0,C/w),o.u1=Math.min(1,(S+P)/W),o.v1=Math.min(1,(C+R)/w),o.x=r,o.y=h,o.cx=S,o.cy=C,o.cw=P,o.ch=R,o.width=d,o.height=l,o.flipX=f,o.flipY=c,o},updateCropUVs:function(o,r,h){return this.setCropUVs(o,o.x,o.y,o.width,o.height,r,h)},setUVs:function(o,r,h,d,l,f){var c=this.data.drawImage;return c.width=o,c.height=r,this.u0=h,this.v0=d,this.u1=l,this.v1=f,this},updateUVs:function(){var o=this.cutX,r=this.cutY,h=this.cutWidth,d=this.cutHeight,l=this.data.drawImage;l.width=h,l.height=d;var f=this.source.width,c=this.source.height;return this.u0=o/f,this.v0=r/c,this.u1=(o+h)/f,this.v1=(r+d)/c,this},updateUVsInverted:function(){var o=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/o,this.v0=this.cutY/r,this.u1=this.cutX/o,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var o=new a(this.texture,this.name,this.sourceIndex);return o.cutX=this.cutX,o.cutY=this.cutY,o.cutWidth=this.cutWidth,o.cutHeight=this.cutHeight,o.x=this.x,o.y=this.y,o.width=this.width,o.height=this.height,o.halfWidth=this.halfWidth,o.halfHeight=this.halfHeight,o.centerX=this.centerX,o.centerY=this.centerY,o.rotated=this.rotated,o.data=n(!0,o.data,this.data),o.updateUVs(),o},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(208),u=t(0),n=t(1),a=t(79),o=new u({initialize:function(h){this.parent=h,this.list=[],this.position=0,this.addCallback=n,this.removeCallback=n,this._sortKey=""},add:function(r,h){return h?s.Add(this.list,r):s.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,h,d){return d?s.AddAt(this.list,r,h):s.AddAt(this.list,r,h,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,h){return r?(h===void 0&&(h=function(d,l){return d[r]-l[r]}),a(this.list,h),this):this},getByName:function(r){return s.GetFirst(this.list,"name",r)},getRandom:function(r,h){return s.GetRandom(this.list,r,h)},getFirst:function(r,h,d,l){return s.GetFirst(this.list,r,h,d,l)},getAll:function(r,h,d,l){return s.GetAll(this.list,r,h,d,l)},count:function(r,h){return s.CountAllMatching(this.list,r,h)},swap:function(r,h){s.Swap(this.list,r,h)},moveTo:function(r,h){return s.MoveTo(this.list,r,h)},moveAbove:function(r,h){return s.MoveAbove(this.list,r,h)},moveBelow:function(r,h){return s.MoveBelow(this.list,r,h)},remove:function(r,h){return h?s.Remove(this.list,r):s.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,h){return h?s.RemoveAt(this.list,r):s.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,h,d){return d?s.RemoveBetween(this.list,r,h):s.RemoveBetween(this.list,r,h,this.removeCallback,this)},removeAll:function(r){for(var h=this.list.length;h--;)this.remove(this.list[h],r);return this},bringToTop:function(r){return s.BringToTop(this.list,r)},sendToBack:function(r){return s.SendToBack(this.list,r)},moveUp:function(r){return s.MoveUp(this.list,r),r},moveDown:function(r){return s.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(r,h){return s.Replace(this.list,r,h)},exists:function(r){return this.list.indexOf(r)>-1},setAll:function(r,h,d,l){return s.SetAll(this.list,r,h,d,l),this},each:function(r,h){for(var d=[null],l=2;l<arguments.length;l++)d.push(arguments[l]);for(l=0;l<this.list.length;l++)d[0]=this.list[l],r.apply(h,d)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(112),n=t(445),a=t(446),o=t(56),r=t(180),h=new s({initialize:function(l,f,c,g){l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=0),g===void 0&&(g=0),this.type=o.ELLIPSE,this.x=l,this.y=f,this.width=c,this.height=g},contains:function(d,l){return u(this,d,l)},getPoint:function(d,l){return n(this,d,l)},getPoints:function(d,l,f){return a(this,d,l,f)},getRandomPoint:function(d){return r(this,d)},setTo:function(d,l,f,c){return this.x=d,this.y=l,this.width=f,this.height=c,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(d,l){return l===void 0&&(l=d),this.x=d,this.y=l,this},setSize:function(d,l){return l===void 0&&(l=d),this.width=d,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(d){this.x=d+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(d){this.y=d+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});e.exports=h},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(s.width<=0||s.height<=0)return!1;var a=(u-s.x)/s.width,o=(n-s.y)/s.height;return a*=a,o*=o,a+o<.25};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(275),u=t(0),n=t(75),a=t(9),o=t(207),r=t(2),h=t(6),d=t(7),l=t(437),f=t(149),c=t(73),g=new u({Extends:a,initialize:function(x,y,T){a.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?d(y[0])&&(T=y,y=null):d(y)&&(T=y,y=null),this.scene=x,this.children=new f,this.isParent=!0,this.type="Group",this.classType=r(T,"classType",c),this.name=r(T,"name",""),this.active=r(T,"active",!0),this.maxSize=r(T,"maxSize",-1),this.defaultKey=r(T,"defaultKey",null),this.defaultFrame=r(T,"defaultFrame",null),this.runChildUpdate=r(T,"runChildUpdate",!1),this.createCallback=r(T,"createCallback",null),this.removeCallback=r(T,"removeCallback",null),this.createMultipleCallback=r(T,"createMultipleCallback",null),this.internalCreateCallback=r(T,"internalCreateCallback",null),this.internalRemoveCallback=r(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(n.ADDED_TO_SCENE,this.addedToScene,this),this.on(n.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(p,x,y,T,E,S){if(p===void 0&&(p=0),x===void 0&&(x=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),E===void 0&&(E=!0),S===void 0&&(S=!0),this.isFull())return null;var C=new this.classType(this.scene,p,x,y,T);return C.addToDisplayList(this.scene.sys.displayList),C.addToUpdateList(),C.visible=E,C.setActive(S),this.add(C),C},createMultiple:function(p){if(this.isFull())return[];Array.isArray(p)||(p=[p]);var x=[];if(p[0].key)for(var y=0;y<p.length;y++){var T=this.createFromConfig(p[y]);x=x.concat(T)}return x},createFromConfig:function(p){if(this.isFull())return[];this.classType=r(p,"classType",this.classType);var x=r(p,"key",void 0),y=r(p,"frame",null),T=r(p,"visible",!0),E=r(p,"active",!0),S=[];if(x===void 0)return S;Array.isArray(x)||(x=[x]),Array.isArray(y)||(y=[y]);var C=r(p,"repeat",0),P=r(p,"randomKey",!1),R=r(p,"randomFrame",!1),A=r(p,"yoyo",!1),M=r(p,"quantity",!1),O=r(p,"frameQuantity",1),F=r(p,"max",0),I=l(x,y,{max:F,qty:M||O,random:P,randomB:R,repeat:C,yoyo:A});p.createCallback&&(this.createCallback=p.createCallback),p.removeCallback&&(this.removeCallback=p.removeCallback);for(var B=0;B<I.length;B++){var V=this.create(0,0,I[B].a,I[B].b,T,E);if(!V)break;S.push(V)}var U=h(p,"setXY.x",0),Y=h(p,"setXY.y",0),W=h(p,"setXY.stepX",0),w=h(p,"setXY.stepY",0);s.SetXY(S,U,Y,W,w);var L=h(p,"setRotation.value",0),D=h(p,"setRotation.step",0);s.SetRotation(S,L,D);var N=h(p,"setScale.x",1),G=h(p,"setScale.y",N),b=h(p,"setScale.stepX",0),z=h(p,"setScale.stepY",0);s.SetScale(S,N,G,b,z);var X=h(p,"setOrigin.x",.5),H=h(p,"setOrigin.y",X),$=h(p,"setOrigin.stepX",0),J=h(p,"setOrigin.stepY",0);s.SetOrigin(S,X,H,$,J);var K=h(p,"setAlpha.value",1),Z=h(p,"setAlpha.step",0);s.SetAlpha(S,K,Z);var k=h(p,"setDepth.value",0),Q=h(p,"setDepth.step",0);s.SetDepth(S,k,Q);var q=h(p,"setScrollFactor.x",1),ot=h(p,"setScrollFactor.y",q),st=h(p,"setScrollFactor.stepX",0),_=h(p,"setScrollFactor.stepY",0);s.SetScrollFactor(S,q,ot,st,_);var j=r(p,"hitArea",null),ht=r(p,"hitAreaCallback",null);j&&s.SetHitArea(S,j,ht);var tt=r(p,"gridAlign",!1);return tt&&s.GridAlign(S,tt),this.createMultipleCallback&&this.createMultipleCallback.call(this,S),S},preUpdate:function(p,x){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var E=y[T];E.active&&E.update(p,x)}},add:function(p,x){return x===void 0&&(x=!1),this.isFull()?this:(this.children.set(p),this.internalCreateCallback&&this.internalCreateCallback.call(this,p),this.createCallback&&this.createCallback.call(this,p),x&&(p.addToDisplayList(this.scene.sys.displayList),p.addToUpdateList()),p.on(n.DESTROY,this.remove,this),this)},addMultiple:function(p,x){if(x===void 0&&(x=!1),Array.isArray(p))for(var y=0;y<p.length;y++)this.add(p[y],x);return this},remove:function(p,x,y){return x===void 0&&(x=!1),y===void 0&&(y=!1),this.children.contains(p)?(this.children.delete(p),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,p),this.removeCallback&&this.removeCallback.call(this,p),p.off(n.DESTROY,this.remove,this),y?p.destroy():x&&(p.removeFromDisplayList(),p.removeFromUpdateList()),this):this},clear:function(p,x){p===void 0&&(p=!1),x===void 0&&(x=!1);for(var y=this.children,T=0;T<y.size;T++){var E=y.entries[T];E.off(n.DESTROY,this.remove,this),x?E.destroy():p&&(E.removeFromDisplayList(),E.removeFromUpdateList())}return this.children.clear(),this},contains:function(p){return this.children.contains(p)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(p,x,y,T){return o(this.children.entries,p,x,y,T)},getFirst:function(p,x,y,T,E,S,C){return this.getHandler(!0,1,p,x,y,T,E,S,C)},getFirstNth:function(p,x,y,T,E,S,C,P){return this.getHandler(!0,p,x,y,T,E,S,C,P)},getLast:function(p,x,y,T,E,S,C){return this.getHandler(!1,1,p,x,y,T,E,S,C)},getLastNth:function(p,x,y,T,E,S,C,P){return this.getHandler(!1,p,x,y,T,E,S,C,P)},getHandler:function(p,x,y,T,E,S,C,P,R){y===void 0&&(y=!1),T===void 0&&(T=!1);var A,M,O=0,F=this.children.entries;if(p)for(M=0;M<F.length;M++)if(A=F[M],A.active===y){if(O++,O===x)break}else A=null;else for(M=F.length-1;M>=0;M--)if(A=F[M],A.active===y){if(O++,O===x)break}else A=null;return A?(typeof E=="number"&&(A.x=E),typeof S=="number"&&(A.y=S),A):T?this.create(E,S,C,P,R):null},get:function(p,x,y,T,E){return this.getFirst(!1,!0,p,x,y,T,E)},getFirstAlive:function(p,x,y,T,E,S){return this.getFirst(!0,p,x,y,T,E,S)},getFirstDead:function(p,x,y,T,E,S){return this.getFirst(!1,p,x,y,T,E,S)},playAnimation:function(p,x){return s.PlayAnimation(this.children.entries,p,x),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(p){p===void 0&&(p=!0);for(var x=0,y=0;y<this.children.size;y++)this.children.entries[y].active===p&&x++;return x},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var p=this.getTotalUsed(),x=this.maxSize===-1?999999999999:this.maxSize;return x-p},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},propertyValueSet:function(p,x,y,T,E){return s.PropertyValueSet(this.children.entries,p,x,y,T,E),this},propertyValueInc:function(p,x,y,T,E){return s.PropertyValueInc(this.children.entries,p,x,y,T,E),this},setX:function(p,x){return s.SetX(this.children.entries,p,x),this},setY:function(p,x){return s.SetY(this.children.entries,p,x),this},setXY:function(p,x,y,T){return s.SetXY(this.children.entries,p,x,y,T),this},incX:function(p,x){return s.IncX(this.children.entries,p,x),this},incY:function(p,x){return s.IncY(this.children.entries,p,x),this},incXY:function(p,x,y,T){return s.IncXY(this.children.entries,p,x,y,T),this},shiftPosition:function(p,x,y){return s.ShiftPosition(this.children.entries,p,x,y),this},angle:function(p,x){return s.Angle(this.children.entries,p,x),this},rotate:function(p,x){return s.Rotate(this.children.entries,p,x),this},rotateAround:function(p,x){return s.RotateAround(this.children.entries,p,x),this},rotateAroundDistance:function(p,x,y){return s.RotateAroundDistance(this.children.entries,p,x,y),this},setAlpha:function(p,x){return s.SetAlpha(this.children.entries,p,x),this},setTint:function(p,x,y,T){return s.SetTint(this.children.entries,p,x,y,T),this},setOrigin:function(p,x,y,T){return s.SetOrigin(this.children.entries,p,x,y,T),this},scaleX:function(p,x){return s.ScaleX(this.children.entries,p,x),this},scaleY:function(p,x){return s.ScaleY(this.children.entries,p,x),this},scaleXY:function(p,x,y,T){return s.ScaleXY(this.children.entries,p,x,y,T),this},setDepth:function(p,x){return s.SetDepth(this.children.entries,p,x),this},setBlendMode:function(p){return s.SetBlendMode(this.children.entries,p),this},setHitArea:function(p,x){return s.SetHitArea(this.children.entries,p,x),this},shuffle:function(){return s.Shuffle(this.children.entries),this},kill:function(p){this.children.contains(p)&&p.setActive(!1)},killAndHide:function(p){this.children.contains(p)&&(p.setActive(!1),p.setVisible(!1))},setVisible:function(p,x,y){return s.SetVisible(this.children.entries,p,x,y),this},toggleVisible:function(){return s.ToggleVisible(this.children.entries),this},destroy:function(p,x){p===void 0&&(p=!1),x===void 0&&(x=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(n.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(x,p),this.scene=void 0,this.children=void 0)}});e.exports=g},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,o,r,h,d){for(var l=s.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*r),f=o.pathData,c=o.pathIndexes,g=0;g<c.length;g+=3){var p=c[g]*2,x=c[g+1]*2,y=c[g+2]*2,T=f[p+0]-h,E=f[p+1]-d,S=f[x+0]-h,C=f[x+1]-d,P=f[y+0]-h,R=f[y+1]-d,A=a.getX(T,E),M=a.getY(T,E),O=a.getX(S,C),F=a.getY(S,C),I=a.getX(P,R),B=a.getY(P,R);n.batchTri(o,A,M,O,F,I,B,0,0,1,1,l,l,l,2)}};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=s.x3-s.x1,o=s.y3-s.y1,r=s.x2-s.x1,h=s.y2-s.y1,d=u-s.x1,l=n-s.y1,f=a*a+o*o,c=a*r+o*h,g=a*d+o*l,p=r*r+h*h,x=r*d+h*l,y=f*p-c*c,T=y===0?0:1/y,E=(p*g-c*x)*T,S=(f*x-c*g)*T;return E>=0&&S>=0&&E+S<1};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(10),n=t(3);function a(r,h,d,l){var f=r-d,c=h-l,g=f*f+c*c;return Math.sqrt(g)}var o=new s({initialize:function(h,d,l){this.vertex1=h,this.vertex2=d,this.vertex3=l,this.bounds=new u,this._inCenter=new n},getInCenter:function(r){r===void 0&&(r=!0);var h=this.vertex1,d=this.vertex2,l=this.vertex3,f,c,g,p,x,y;r?(f=h.x,c=h.y,g=d.x,p=d.y,x=l.x,y=l.y):(f=h.vx,c=h.vy,g=d.vx,p=d.vy,x=l.vx,y=l.vy);var T=a(x,y,g,p),E=a(f,c,x,y),S=a(g,p,f,c),C=T+E+S;return this._inCenter.set((f*T+g*E+x*S)/C,(c*T+p*E+y*S)/C)},contains:function(r,h,d){var l=this.vertex1,f=this.vertex2,c=this.vertex3,g=l.vx,p=l.vy,x=f.vx,y=f.vy,T=c.vx,E=c.vy;if(d){var S=d.a,C=d.b,P=d.c,R=d.d,A=d.e,M=d.f;g=l.vx*S+l.vy*P+A,p=l.vx*C+l.vy*R+M,x=f.vx*S+f.vy*P+A,y=f.vx*C+f.vy*R+M,T=c.vx*S+c.vy*P+A,E=c.vx*C+c.vy*R+M}var O=T-g,F=E-p,I=x-g,B=y-p,V=r-g,U=h-p,Y=O*O+F*F,W=O*I+F*B,w=O*V+F*U,L=I*I+B*B,D=I*V+B*U,N=Y*L-W*W,G=N===0?0:1/N,b=(L*w-W*D)*G,z=(Y*D-W*w)*G;return b>=0&&z>=0&&b+z<1},isCounterClockwise:function(r){var h=this.vertex1,d=this.vertex2,l=this.vertex3,f=(d.vx-h.vx)*(l.vy-h.vy)-(d.vy-h.vy)*(l.vx-h.vx);return r<=0?f>=0:f<0},load:function(r,h,d,l,f){return d=this.vertex1.load(r,h,d,l,f),d=this.vertex2.load(r,h,d,l,f),d=this.vertex3.load(r,h,d,l,f),d},transformCoordinatesLocal:function(r,h,d,l){return this.vertex1.transformCoordinatesLocal(r,h,d,l),this.vertex2.transformCoordinatesLocal(r,h,d,l),this.vertex3.transformCoordinatesLocal(r,h,d,l),this},updateBounds:function(){var r=this.vertex1,h=this.vertex2,d=this.vertex3,l=this.bounds;return l.x=Math.min(r.vx,h.vx,d.vx),l.y=Math.min(r.vy,h.vy,d.vy),l.width=Math.max(r.vx,h.vx,d.vx)-l.x,l.height=Math.max(r.vy,h.vy,d.vy)-l.y,this},isInView:function(r,h,d,l,f,c,g,p,x,y,T){var E=this.vertex1.update(f,c,g,p,x,y,T,l),S=this.vertex2.update(f,c,g,p,x,y,T,l),C=this.vertex3.update(f,c,g,p,x,y,T,l);if(E.ta<=0&&S.ta<=0&&C.ta<=0||h&&!this.isCounterClockwise(d))return!1;var P=this.bounds;P.x=Math.min(E.tx,S.tx,C.tx),P.y=Math.min(E.ty,S.ty,C.ty),P.width=Math.max(E.tx,S.tx,C.tx)-P.x,P.height=Math.max(E.ty,S.ty,C.ty)-P.y;var R=r.x+r.width,A=r.y+r.height;return P.width<=0||P.height<=0||r.width<=0||r.height<=0?!1:!(P.right<r.x||P.bottom<r.y||P.x>R||P.y>A)},translate:function(r,h){h===void 0&&(h=0);var d=this.vertex1,l=this.vertex2,f=this.vertex3;return d.x+=r,d.y+=h,l.x+=r,l.y+=h,f.x+=r,f.y+=h,this},x:{get:function(){return this.getInCenter().x},set:function(r){var h=this.getInCenter();this.translate(r-h.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var h=this.getInCenter();this.translate(0,r-h.y)}},alpha:{get:function(){var r=this.vertex1,h=this.vertex2,d=this.vertex3;return(r.alpha+h.alpha+d.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){var r=this.vertex1,h=this.vertex2,d=this.vertex3;return(r.vz+h.vz+d.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(12),n=t(39),a=new s({Extends:n,initialize:function(r,h,d,l,f,c,g,p,x,y){c===void 0&&(c=16777215),g===void 0&&(g=1),p===void 0&&(p=0),x===void 0&&(x=0),y===void 0&&(y=0),n.call(this,r,h,d),this.vx=0,this.vy=0,this.vz=0,this.nx=p,this.ny=x,this.nz=y,this.u=l,this.v=f,this.color=c,this.alpha=g,this.tx=0,this.ty=0,this.ta=0},setUVs:function(o,r){return this.u=o,this.v=r,this},transformCoordinatesLocal:function(o,r,h,d){var l=this.x,f=this.y,c=this.z,g=o.val,p=l*g[0]+f*g[4]+c*g[8]+g[12],x=l*g[1]+f*g[5]+c*g[9]+g[13],y=l*g[2]+f*g[6]+c*g[10]+g[14],T=l*g[3]+f*g[7]+c*g[11]+g[15];this.vx=p/T*r,this.vy=-(x/T)*h,d<=0?this.vz=y/T:this.vz=-(y/T)},update:function(o,r,h,d,l,f,c,g){var p=this.vx*o+this.vy*h+l,x=this.vx*r+this.vy*d+f;return c&&(p=Math.round(p),x=Math.round(x)),this.tx=p,this.ty=x,this.ta=this.alpha*g,this},load:function(o,r,h,d,l){return o[++h]=this.tx,o[++h]=this.ty,o[++h]=this.u,o[++h]=this.v,o[++h]=d,o[++h]=l,r[++h]=u.getTintAppendFloatAlpha(this.color,this.ta),h}});e.exports=a},function(e,v,t){var s={};e.exports=s;var u=t(166),n=t(32),a=t(84),o=t(41);(function(){s.create=function(r){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},r)},s.setModified=function(r,h,d,l){if(u.trigger(r,"compositeModified",r),r.isModified=h,d&&r.parent&&s.setModified(r.parent,h,d,l),l)for(var f=0;f<r.composites.length;f++){var c=r.composites[f];s.setModified(c,h,d,l)}},s.add=function(r,h){var d=[].concat(h);u.trigger(r,"beforeAdd",{object:h});for(var l=0;l<d.length;l++){var f=d[l];switch(f.type){case"body":if(f.parent!==f){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(r,f);break;case"constraint":s.addConstraint(r,f);break;case"composite":s.addComposite(r,f);break;case"mouseConstraint":s.addConstraint(r,f.constraint);break}}return u.trigger(r,"afterAdd",{object:h}),r},s.remove=function(r,h,d){var l=[].concat(h);u.trigger(r,"beforeRemove",{object:h});for(var f=0;f<l.length;f++){var c=l[f];switch(c.type){case"body":s.removeBody(r,c,d);break;case"constraint":s.removeConstraint(r,c,d);break;case"composite":s.removeComposite(r,c,d);break;case"mouseConstraint":s.removeConstraint(r,c.constraint);break}}return u.trigger(r,"afterRemove",{object:h}),r},s.addComposite=function(r,h){return r.composites.push(h),h.parent=r,s.setModified(r,!0,!0,!1),r},s.removeComposite=function(r,h,d){var l=r.composites.indexOf(h);if(l!==-1&&(s.removeCompositeAt(r,l),s.setModified(r,!0,!0,!1)),d)for(var f=0;f<r.composites.length;f++)s.removeComposite(r.composites[f],h,!0);return r},s.removeCompositeAt=function(r,h){return r.composites.splice(h,1),s.setModified(r,!0,!0,!1),r},s.addBody=function(r,h){return r.bodies.push(h),s.setModified(r,!0,!0,!1),r},s.removeBody=function(r,h,d){var l=r.bodies.indexOf(h);if(l!==-1&&(s.removeBodyAt(r,l),s.setModified(r,!0,!0,!1)),d)for(var f=0;f<r.composites.length;f++)s.removeBody(r.composites[f],h,!0);return r},s.removeBodyAt=function(r,h){return r.bodies.splice(h,1),s.setModified(r,!0,!0,!1),r},s.addConstraint=function(r,h){return r.constraints.push(h),s.setModified(r,!0,!0,!1),r},s.removeConstraint=function(r,h,d){var l=r.constraints.indexOf(h);if(l!==-1&&s.removeConstraintAt(r,l),d)for(var f=0;f<r.composites.length;f++)s.removeConstraint(r.composites[f],h,!0);return r},s.removeConstraintAt=function(r,h){return r.constraints.splice(h,1),s.setModified(r,!0,!0,!1),r},s.clear=function(r,h,d){if(d)for(var l=0;l<r.composites.length;l++)s.clear(r.composites[l],h,!0);return h?r.bodies=r.bodies.filter(function(f){return f.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,s.setModified(r,!0,!0,!1),r},s.allBodies=function(r){for(var h=[].concat(r.bodies),d=0;d<r.composites.length;d++)h=h.concat(s.allBodies(r.composites[d]));return h},s.allConstraints=function(r){for(var h=[].concat(r.constraints),d=0;d<r.composites.length;d++)h=h.concat(s.allConstraints(r.composites[d]));return h},s.allComposites=function(r){for(var h=[].concat(r.composites),d=0;d<r.composites.length;d++)h=h.concat(s.allComposites(r.composites[d]));return h},s.get=function(r,h,d){var l,f;switch(d){case"body":l=s.allBodies(r);break;case"constraint":l=s.allConstraints(r);break;case"composite":l=s.allComposites(r).concat(r);break}return l?(f=l.filter(function(c){return c.id.toString()===h.toString()}),f.length===0?null:f[0]):null},s.move=function(r,h,d){return s.remove(r,h),s.add(d,h),r},s.rebase=function(r){for(var h=s.allBodies(r).concat(s.allConstraints(r)).concat(s.allComposites(r)),d=0;d<h.length;d++)h[d].id=n.nextId();return s.setModified(r,!0,!0,!1),r},s.translate=function(r,h,d){for(var l=d?s.allBodies(r):r.bodies,f=0;f<l.length;f++)o.translate(l[f],h);return s.setModified(r,!0,!0,!1),r},s.rotate=function(r,h,d,l){for(var f=Math.cos(h),c=Math.sin(h),g=l?s.allBodies(r):r.bodies,p=0;p<g.length;p++){var x=g[p],y=x.position.x-d.x,T=x.position.y-d.y;o.setPosition(x,{x:d.x+(y*f-T*c),y:d.y+(y*c+T*f)}),o.rotate(x,h)}return s.setModified(r,!0,!0,!1),r},s.scale=function(r,h,d,l,f){for(var c=f?s.allBodies(r):r.bodies,g=0;g<c.length;g++){var p=c[g],x=p.position.x-l.x,y=p.position.y-l.y;o.setPosition(p,{x:l.x+x*h,y:l.y+y*d}),o.scale(p,h,d)}return s.setModified(r,!0,!0,!1),r},s.bounds=function(r){for(var h=s.allBodies(r),d=[],l=0;l<h.length;l+=1){var f=h[l];d.push(f.bounds.min,f.bounds.max)}return a.create(d)}})()},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s>=0&&s<n.width&&u>=0&&u<n.height};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(29),n=t(2),a=new s({initialize:function(r){r===void 0&&(r={}),this.name=n(r,"name","layer"),this.x=n(r,"x",0),this.y=n(r,"y",0),this.width=n(r,"width",0),this.height=n(r,"height",0),this.tileWidth=n(r,"tileWidth",0),this.tileHeight=n(r,"tileHeight",0),this.baseTileWidth=n(r,"baseTileWidth",this.tileWidth),this.baseTileHeight=n(r,"baseTileHeight",this.tileHeight),this.orientation=n(r,"orientation",u.ORTHOGONAL),this.widthInPixels=n(r,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=n(r,"heightInPixels",this.height*this.baseTileHeight),this.alpha=n(r,"alpha",1),this.visible=n(r,"visible",!0),this.properties=n(r,"properties",[]),this.indexes=n(r,"indexes",[]),this.collideIndexes=n(r,"collideIndexes",[]),this.callbacks=n(r,"callbacks",[]),this.bodies=n(r,"bodies",[]),this.data=n(r,"data",[]),this.tilemapLayer=n(r,"tilemapLayer",null),this.hexSideLength=n(r,"hexSideLength",0)}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(29),n=t(2),a=new s({initialize:function(r){r===void 0&&(r={}),this.name=n(r,"name","map"),this.width=n(r,"width",0),this.height=n(r,"height",0),this.infinite=n(r,"infinite",!1),this.tileWidth=n(r,"tileWidth",0),this.tileHeight=n(r,"tileHeight",0),this.widthInPixels=n(r,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=n(r,"heightInPixels",this.height*this.tileHeight),this.format=n(r,"format",null),this.orientation=n(r,"orientation",u.ORTHOGONAL),this.renderOrder=n(r,"renderOrder","right-down"),this.version=n(r,"version","1"),this.properties=n(r,"properties",{}),this.layers=n(r,"layers",[]),this.images=n(r,"images",[]),this.objects=n(r,"objects",{}),this.collision=n(r,"collision",{}),this.tilesets=n(r,"tilesets",[]),this.imageCollections=n(r,"imageCollections",[]),this.tiles=n(r,"tiles",[]),this.hexSideLength=n(r,"hexSideLength",0)}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o,r,h,d,l,f,c){(r===void 0||r<=0)&&(r=32),(h===void 0||h<=0)&&(h=32),d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f={}),c===void 0&&(c={}),this.name=a,this.firstgid=o,this.tileWidth=r,this.tileHeight=h,this.tileMargin=d,this.tileSpacing=l,this.tileProperties=f,this.tileData=c,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(n){return this.containsTileIndex(n)?this.tileProperties[n-this.firstgid]:null},getTileData:function(n){return this.containsTileIndex(n)?this.tileData[n-this.firstgid]:null},getTileCollisionGroup:function(n){var a=this.getTileData(n);return a&&a.objectgroup?a.objectgroup:null},containsTileIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},getTileTextureCoordinates:function(n){return this.containsTileIndex(n)?this.texCoordinates[n-this.firstgid]:null},setImage:function(n){return this.image=n,this.glTexture=n.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(n,a){return n!==void 0&&(this.tileWidth=n),a!==void 0&&(this.tileHeight=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(n,a){return n!==void 0&&(this.tileMargin=n),a!==void 0&&(this.tileSpacing=a),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(n,a){var o=(a-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(n-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(o%1!==0||r%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),o=Math.floor(o),r=Math.floor(r),this.rows=o,this.columns=r,this.total=o*r,this.texCoordinates.length=0;for(var h=this.tileMargin,d=this.tileMargin,l=0;l<this.rows;l++){for(var f=0;f<this.columns;f++)this.texCoordinates.push({x:h,y:d}),h+=this.tileWidth+this.tileSpacing;h=this.tileMargin,d+=this.tileHeight+this.tileSpacing}return this}});e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=1e-4),Math.abs(s-u)<n};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(1068),o=new s({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,a],initialize:function(h,d,l,f,c){n.call(this,h,"Image"),this._crop=this.resetCropObject(),this.setTexture(f,c),this.setPosition(d,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.hasOwnProperty(u)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,a){var o=s(n);for(var r in a)o.hasOwnProperty(r)||(o[r]=a[r]);return o};e.exports=u},function(e,v,t){var s={};e.exports=s;var u=t(64),n=t(83),a=t(165),o=t(84),r=t(271),h=t(32);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(d){var l=d;l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0}),l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var f=l.bodyA?n.add(l.bodyA.position,l.pointA):l.pointA,c=l.bodyB?n.add(l.bodyB.position,l.pointB):l.pointB,g=n.magnitude(n.sub(f,c));l.length=typeof l.length!="undefined"?l.length:g,l.id=l.id||h.nextId(),l.label=l.label||"Constraint",l.type="constraint",l.stiffness=l.stiffness||(l.length>0?1:.7),l.damping=l.damping||0,l.angularStiffness=l.angularStiffness||0,l.angleA=l.bodyA?l.bodyA.angle:l.angleA,l.angleB=l.bodyB?l.bodyB.angle:l.angleB,l.plugin={};var p={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return l.length===0&&l.stiffness>.1?(p.type="pin",p.anchors=!1):l.stiffness<.9&&(p.type="spring"),l.render=h.extend(p,l.render),l},s.preSolveAll=function(d){for(var l=0;l<d.length;l+=1){var f=d[l],c=f.constraintImpulse;f.isStatic||c.x===0&&c.y===0&&c.angle===0||(f.position.x+=c.x,f.position.y+=c.y,f.angle+=c.angle)}},s.solveAll=function(d,l){for(var f=0;f<d.length;f+=1){var c=d[f],g=!c.bodyA||c.bodyA&&c.bodyA.isStatic,p=!c.bodyB||c.bodyB&&c.bodyB.isStatic;(g||p)&&s.solve(d[f],l)}for(f=0;f<d.length;f+=1)c=d[f],g=!c.bodyA||c.bodyA&&c.bodyA.isStatic,p=!c.bodyB||c.bodyB&&c.bodyB.isStatic,!g&&!p&&s.solve(d[f],l)},s.solve=function(d,l){var f=d.bodyA,c=d.bodyB,g=d.pointA,p=d.pointB;if(!(!f&&!c)){f&&!f.isStatic&&(n.rotate(g,f.angle-d.angleA,g),d.angleA=f.angle),c&&!c.isStatic&&(n.rotate(p,c.angle-d.angleB,p),d.angleB=c.angle);var x=g,y=p;if(f&&(x=n.add(f.position,g)),c&&(y=n.add(c.position,p)),!(!x||!y)){var T=n.sub(x,y),E=n.magnitude(T);E<s._minLength&&(E=s._minLength);var S=(E-d.length)/E,C=d.stiffness<1?d.stiffness*l:d.stiffness,P=n.mult(T,S*C),R=(f?f.inverseMass:0)+(c?c.inverseMass:0),A=(f?f.inverseInertia:0)+(c?c.inverseInertia:0),M=R+A,O,F,I,B,V;if(d.damping){var U=n.create();I=n.div(T,E),V=n.sub(c&&n.sub(c.position,c.positionPrev)||U,f&&n.sub(f.position,f.positionPrev)||U),B=n.dot(I,V)}f&&!f.isStatic&&(F=f.inverseMass/R,f.constraintImpulse.x-=P.x*F,f.constraintImpulse.y-=P.y*F,f.position.x-=P.x*F,f.position.y-=P.y*F,d.damping&&(f.positionPrev.x-=d.damping*I.x*B*F,f.positionPrev.y-=d.damping*I.y*B*F),O=n.cross(g,P)/M*s._torqueDampen*f.inverseInertia*(1-d.angularStiffness),f.constraintImpulse.angle-=O,f.angle-=O),c&&!c.isStatic&&(F=c.inverseMass/R,c.constraintImpulse.x+=P.x*F,c.constraintImpulse.y+=P.y*F,c.position.x+=P.x*F,c.position.y+=P.y*F,d.damping&&(c.positionPrev.x+=d.damping*I.x*B*F,c.positionPrev.y+=d.damping*I.y*B*F),O=n.cross(p,P)/M*s._torqueDampen*c.inverseInertia*(1-d.angularStiffness),c.constraintImpulse.angle+=O,c.angle+=O)}}},s.postSolveAll=function(d){for(var l=0;l<d.length;l++){var f=d[l],c=f.constraintImpulse;if(!(f.isStatic||c.x===0&&c.y===0&&c.angle===0)){a.set(f,!1);for(var g=0;g<f.parts.length;g++){var p=f.parts[g];u.translate(p.vertices,c),g>0&&(p.position.x+=c.x,p.position.y+=c.y),c.angle!==0&&(u.rotate(p.vertices,c.angle,f.position),r.rotate(p.axes,c.angle),g>0&&n.rotateAbout(p.position,c.angle,f.position,p.position)),o.update(p.bounds,p.vertices,f.velocity)}c.angle*=s._warming,c.x*=s._warming,c.y*=s._warming}}},s.pointAWorld=function(d){return{x:(d.bodyA?d.bodyA.position.x:0)+d.pointA.x,y:(d.bodyA?d.bodyA.position.y:0)+d.pointA.y}},s.pointBWorld=function(d){return{x:(d.bodyB?d.bodyB.position.x:0)+d.pointB.x,y:(d.bodyB?d.bodyB.position.y:0)+d.pointB.y}}})()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(65),n=t(66),a=t(0),o=t(11),r=t(15),h=t(10),d=t(57),l=new a({Extends:r,Mixins:[o.Depth,o.GetBounds,o.Origin,o.Transform,o.ScrollFactor,o.Visible],initialize:function(c,g,p,x,y){x===void 0&&(x=1),y===void 0&&(y=x),r.call(this,c,"Zone"),this.setPosition(g,p),this.width=x,this.height=y,this.blendMode=s.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(f){this.scaleX=f/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(f){this.scaleY=f/this.height}},setSize:function(f,c,g){g===void 0&&(g=!0),this.width=f,this.height=c,this.updateDisplayOrigin();var p=this.input;return g&&p&&!p.customHitArea&&(p.hitArea.width=f,p.hitArea.height=c),this},setDisplaySize:function(f,c){return this.displayWidth=f,this.displayHeight=c,this},setCircleDropZone:function(f){return this.setDropZone(new u(0,0,f),n)},setRectangleDropZone:function(f,c){return this.setDropZone(new h(0,0,f,c),d)},setDropZone:function(f,c){return f===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(f,c,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(f,c,g){g.addToRenderList(c)},renderWebGL:function(f,c,g){g.addToRenderList(c)}});e.exports=l},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 2*(s.width+s.height)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=s.length-1;u>0;u--){var n=Math.floor(Math.random()*(u+1)),a=s[u];s[u]=s[n],s[n]=a}return s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD_ANIMATION:t(724),ANIMATION_COMPLETE:t(725),ANIMATION_COMPLETE_KEY:t(726),ANIMATION_REPEAT:t(727),ANIMATION_RESTART:t(728),ANIMATION_START:t(729),ANIMATION_STOP:t(730),ANIMATION_UPDATE:t(731),PAUSE_ALL:t(732),REMOVE_ANIMATION:t(733),RESUME_ALL:t(734)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(36),a=t(9),o=t(37),r=t(10),h=t(25),d=t(187),l=t(3),f=new s({Extends:a,Mixins:[u.Alpha,u.Visible],initialize:function(g,p,x,y){g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=0),y===void 0&&(y=0),a.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=g,this._y=p,this._width=x,this._height=y,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new h,this.transparent=!0,this.backgroundColor=d("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new l(x/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(c){this.renderList.push(c)},setOrigin:function(c,g){return c===void 0&&(c=.5),g===void 0&&(g=c),this.originX=c,this.originY=g,this},getScroll:function(c,g,p){p===void 0&&(p=new l);var x=this.width*.5,y=this.height*.5;return p.x=c-x,p.y=g-y,this.useBounds&&(p.x=this.clampX(p.x),p.y=this.clampY(p.y)),p},centerOnX:function(c){var g=this.width*.5;return this.midPoint.x=c,this.scrollX=c-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(c){var g=this.height*.5;return this.midPoint.y=c,this.scrollY=c-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(c,g){return this.centerOnX(c),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var c=this._bounds,g=this.width*.5,p=this.height*.5;this.midPoint.set(c.centerX,c.centerY),this.scrollX=c.centerX-g,this.scrollY=c.centerY-p}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(c){if(this.disableCull)return c;var g=this.matrix.matrix,p=g[0],x=g[1],y=g[2],T=g[3],E=p*T-x*y;if(!E)return c;var S=g[4],C=g[5],P=this.scrollX,R=this.scrollY,A=this.width,M=this.height,O=this.y,F=O+M,I=this.x,B=I+A,V=this.culledObjects,U=c.length;E=1/E,V.length=0;for(var Y=0;Y<U;++Y){var W=c[Y];if(!W.hasOwnProperty("width")||W.parentContainer){V.push(W);continue}var w=W.width,L=W.height,D=W.x-P*W.scrollFactorX-w*W.originX,N=W.y-R*W.scrollFactorY-L*W.originY,G=D*p+N*y+S,b=D*x+N*T+C,z=(D+w)*p+(N+L)*y+S,X=(D+w)*x+(N+L)*T+C;z>I&&G<B&&X>O&&b<F&&V.push(W)}return V},getWorldPoint:function(c,g,p){p===void 0&&(p=new l);var x=this.matrix.matrix,y=x[0],T=x[1],E=x[2],S=x[3],C=x[4],P=x[5],R=y*S-T*E;if(!R)return p.x=c,p.y=g,p;R=1/R;var A=S*R,M=-T*R,O=-E*R,F=y*R,I=(E*P-S*C)*R,B=(T*C-y*P)*R,V=Math.cos(this.rotation),U=Math.sin(this.rotation),Y=this.zoomX,W=this.zoomY,w=this.scrollX,L=this.scrollY,D=c+(w*V-L*U)*Y,N=g+(w*U+L*V)*W;return p.x=D*A+N*O+I,p.y=D*M+N*F+B,p},ignore:function(c){var g=this.id;Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var x=c[p];Array.isArray(x)?this.ignore(x):x.isParent?this.ignore(x.getChildren()):x.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var c=this.width,g=this.height,p=c*.5,x=g*.5,y=this.zoomX,T=this.zoomY,E=this.matrix,S=c*this.originX,C=g*this.originY,P=this.scrollX,R=this.scrollY;this.useBounds&&(P=this.clampX(P),R=this.clampY(R)),this.roundPixels&&(S=Math.round(S),C=Math.round(C)),this.scrollX=P,this.scrollY=R;var A=P+p,M=R+x;this.midPoint.set(A,M);var O=c/y,F=g/T;this.worldView.setTo(A-O/2,M-F/2,O,F),E.applyITRS(this.x+S,this.y+C,this.rotation,y,T),E.translate(-S,-C)},clampX:function(c){var g=this._bounds,p=this.displayWidth,x=g.x+(p-this.width)/2,y=Math.max(x,x+g.width-p);return c<x?c=x:c>y&&(c=y),c},clampY:function(c){var g=this._bounds,p=this.displayHeight,x=g.y+(p-this.height)/2,y=Math.max(x,x+g.height-p);return c<x?c=x:c>y&&(c=y),c},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(c){return c===void 0&&(c=0),this.rotation=n(c),this},setBackgroundColor:function(c){return c===void 0&&(c="rgba(0,0,0,0)"),this.backgroundColor=d(c),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(c,g,p,x,y){return y===void 0&&(y=!1),this._bounds.setTo(c,g,p,x),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(c){c===void 0&&(c=new r);var g=this._bounds;return c.setTo(g.x,g.y,g.width,g.height),c},setName:function(c){return c===void 0&&(c=""),this.name=c,this},setPosition:function(c,g){return g===void 0&&(g=c),this.x=c,this.y=g,this},setRotation:function(c){return c===void 0&&(c=0),this.rotation=c,this},setRoundPixels:function(c){return this.roundPixels=c,this},setScene:function(c){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=c;var g=c.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(c,g){return g===void 0&&(g=c),this.scrollX=c,this.scrollY=g,this},setSize:function(c,g){return g===void 0&&(g=c),this.width=c,this.height=g,this},setViewport:function(c,g,p,x){return this.x=c,this.y=g,this.width=p,this.height=x,this},setZoom:function(c,g){return c===void 0&&(c=1),g===void 0&&(g=c),c===0&&(c=.001),g===0&&(g=.001),this.zoomX=c,this.zoomY=g,this},setMask:function(c,g){return g===void 0&&(g=!0),this.mask=c,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(c){return c===void 0&&(c=!1),c&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var c={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(c.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),c},update:function(){},updateSystem:function(){if(!!this.scaleManager){var c=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;c&&!this._customViewport?g.customViewports++:!c&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=c}},destroy:function(){this.emit(o.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(c){this._x=c,this.updateSystem()}},y:{get:function(){return this._y},set:function(c){this._y=c,this.updateSystem()}},width:{get:function(){return this._width},set:function(c){this._width=c,this.updateSystem()}},height:{get:function(){return this._height},set:function(c){this._height=c,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(c){this._scrollX=c,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(c){this._scrollY=c,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(c){this._zoomX=c,this._zoomY=c,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(c){this._zoomX=c,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(c){this._zoomY=c,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});e.exports=f},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(334),u=t(335),n=t(336),a=t(337),o=t(338),r=t(339),h=t(340),d=t(341),l=t(342),f=t(343),c=t(344),g=t(345);e.exports={Power0:h,Power1:d.Out,Power2:a.Out,Power3:l.Out,Power4:f.Out,Linear:h,Quad:d.Out,Cubic:a.Out,Quart:l.Out,Quint:f.Out,Sine:c.Out,Expo:r.Out,Circ:n.Out,Elastic:o.Out,Back:s.Out,Bounce:u.Out,Stepped:g,"Quad.easeIn":d.In,"Cubic.easeIn":a.In,"Quart.easeIn":l.In,"Quint.easeIn":f.In,"Sine.easeIn":c.In,"Expo.easeIn":r.In,"Circ.easeIn":n.In,"Elastic.easeIn":o.In,"Back.easeIn":s.In,"Bounce.easeIn":u.In,"Quad.easeOut":d.Out,"Cubic.easeOut":a.Out,"Quart.easeOut":l.Out,"Quint.easeOut":f.Out,"Sine.easeOut":c.Out,"Expo.easeOut":r.Out,"Circ.easeOut":n.Out,"Elastic.easeOut":o.Out,"Back.easeOut":s.Out,"Bounce.easeOut":u.Out,"Quad.easeInOut":d.InOut,"Cubic.easeInOut":a.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":f.InOut,"Sine.easeInOut":c.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":n.InOut,"Elastic.easeInOut":o.InOut,"Back.easeInOut":s.InOut,"Bounce.easeInOut":u.InOut}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return(u-s)*n+s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(105),u={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function n(){var a=navigator.userAgent;return/Edge\/\d+/.test(a)?u.edge=!0:/Chrome\/(\d+)/.test(a)&&!s.windowsPhone?(u.chrome=!0,u.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(a)?(u.firefox=!0,u.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(a)&&s.iOS?u.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(a)?(u.ie=!0,u.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(a)?u.opera=!0:/Safari/.test(a)&&!s.windowsPhone?u.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a)&&(u.ie=!0,u.trident=!0,u.tridentVersion=parseInt(RegExp.$1,10),u.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(a)&&(u.silk=!0),u}e.exports=n()},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.random()*(u-s)+s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s>0&&(s&s-1)===0&&u>0&&(u&u-1)===0};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return n===void 0&&(n=0),u===0?s:(s-=n,s=u*Math.ceil(s/u),a?(n+s)/u:n+s)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o,r,h){this.x=0,this.y=0,this.z=0,this.w=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=o||0,this.z=r||0,this.w=h||0)},clone:function(){return new u(this.x,this.y,this.z,this.w)},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this.w=n.w||0,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z&&this.w===n.w},set:function(n,a,o,r){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=a||0,this.z=o||0,this.w=r||0),this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this.w+=n.w||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this.w-=n.w||0,this},scale:function(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this},length:function(){var n=this.x,a=this.y,o=this.z,r=this.w;return Math.sqrt(n*n+a*a+o*o+r*r)},lengthSq:function(){var n=this.x,a=this.y,o=this.z,r=this.w;return n*n+a*a+o*o+r*r},normalize:function(){var n=this.x,a=this.y,o=this.z,r=this.w,h=n*n+a*a+o*o+r*r;return h>0&&(h=1/Math.sqrt(h),this.x=n*h,this.y=a*h,this.z=o*h,this.w=r*h),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w},lerp:function(n,a){a===void 0&&(a=0);var o=this.x,r=this.y,h=this.z,d=this.w;return this.x=o+a*(n.x-o),this.y=r+a*(n.y-r),this.z=h+a*(n.z-h),this.w=d+a*(n.w-d),this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this.w*=n.w||1,this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this.w/=n.w||1,this},distance:function(n){var a=n.x-this.x,o=n.y-this.y,r=n.z-this.z||0,h=n.w-this.w||0;return Math.sqrt(a*a+o*o+r*r+h*h)},distanceSq:function(n){var a=n.x-this.x,o=n.y-this.y,r=n.z-this.z||0,h=n.w-this.w||0;return a*a+o*o+r*r+h*h},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(n){var a=this.x,o=this.y,r=this.z,h=this.w,d=n.val;return this.x=d[0]*a+d[4]*o+d[8]*r+d[12]*h,this.y=d[1]*a+d[5]*o+d[9]*r+d[13]*h,this.z=d[2]*a+d[6]*o+d[10]*r+d[14]*h,this.w=d[3]*a+d[7]*o+d[11]*r+d[15]*h,this},transformQuat:function(n){var a=this.x,o=this.y,r=this.z,h=n.x,d=n.y,l=n.z,f=n.w,c=f*a+d*r-l*o,g=f*o+l*a-h*r,p=f*r+h*o-d*a,x=-h*a-d*o-l*r;return this.x=c*f+x*-h+g*-l-p*-d,this.y=g*f+x*-d+p*-h-c*-l,this.z=p*f+x*-l+c*-d-g*-h,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});u.prototype.sub=u.prototype.subtract,u.prototype.mul=u.prototype.multiply,u.prototype.div=u.prototype.divide,u.prototype.dist=u.prototype.distance,u.prototype.distSq=u.prototype.distanceSq,u.prototype.len=u.prototype.length,u.prototype.lenSq=u.prototype.lengthSq,e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(91),n=new s({initialize:function(o,r,h,d,l,f,c){d===void 0&&(d=1),l===void 0&&(l=0),f===void 0&&(f=!0),c===void 0&&(c=!1),this.renderer=o,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=d,this.minFilter=l,this.autoClear=f,this.autoResize=!1,this.resize(r,h),c&&this.setAutoResize(!0)},setAutoResize:function(a){return a&&!this.autoResize?(this.renderer.on(u.RESIZE,this.resize,this),this.autoResize=!0):!a&&this.autoResize&&(this.renderer.off(u.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(a,o){var r=a*this.scale,h=o*this.scale;if(r!==this.width||h!==this.height){var d=this.renderer;d.deleteFramebuffer(this.framebuffer),d.deleteTexture(this.texture),a*=this.scale,o*=this.scale,a=Math.round(a),o=Math.round(o),a<=0&&(a=1),o<=0&&(o=1),this.texture=d.createTextureFromSource(null,a,o,this.minFilter),this.framebuffer=d.createFramebuffer(a,o,this.texture,!1),this.width=a,this.height=o}return this},bind:function(a,o,r){if(a===void 0&&(a=!1),a&&this.renderer.flush(),o&&r&&this.resize(o,r),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),a&&this.adjustViewport(),this.autoClear){var h=this.renderer.gl;h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT)}},adjustViewport:function(){var a=this.renderer.gl;a.viewport(0,0,this.width,this.height),a.disable(a.SCISSOR_TEST)},clear:function(){var a=this.renderer,o=a.gl;a.pushFramebuffer(this.framebuffer),o.disable(o.SCISSOR_TEST),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),a.popFramebuffer(),a.resetScissor()},unbind:function(a){a===void 0&&(a=!1);var o=this.renderer;return a&&o.flush(),o.popFramebuffer()},destroy:function(){var a=this.renderer;a.deleteFramebuffer(this.framebuffer),a.deleteTexture(this.texture),a.off(u.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n;if(u)typeof u=="string"?n=document.getElementById(u):typeof u=="object"&&u.nodeType===1&&(n=u);else if(s.parentElement||u===null)return s;return n||(n=document.body),n.appendChild(s),s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(77),n=t(9),a=t(70),o=t(22),r=t(1),h=t(207),d=t(428),l=new s({Extends:n,initialize:function(c){n.call(this),this.game=c,this.jsonCache=c.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,c.events.on(o.BLUR,this.onGameBlur,this),c.events.on(o.FOCUS,this.onGameFocus,this),c.events.on(o.PRE_STEP,this.update,this),c.events.once(o.DESTROY,this.destroy,this)},add:r,addAudioSprite:function(f,c){c===void 0&&(c={});var g=this.add(f,c);g.spritemap=this.jsonCache.get(f).spritemap;for(var p in g.spritemap)if(!!g.spritemap.hasOwnProperty(p)){var x=u(c),y=g.spritemap[p];x.loop=y.hasOwnProperty("loop")?y.loop:!1,g.addMarker({name:p,start:y.start,duration:y.end-y.start,config:x})}return g},get:function(f){return d(this.sounds,"key",f)},getAll:function(f){return h(this.sounds,"key",f)},play:function(f,c){var g=this.add(f);return g.once(a.COMPLETE,g.destroy,g),c?c.name?(g.addMarker(c),g.play(c.name)):g.play(c):g.play()},playAudioSprite:function(f,c,g){var p=this.addAudioSprite(f);return p.once(a.COMPLETE,p.destroy,p),p.play(c,g)},remove:function(f){var c=this.sounds.indexOf(f);return c!==-1?(f.destroy(),this.sounds.splice(c,1),!0):!1},removeAll:function(){this.sounds.forEach(function(f){f.destroy()}),this.sounds.length=0},removeByKey:function(f){for(var c=0,g=this.sounds.length-1;g>=0;g--){var p=this.sounds[g];p.key===f&&(p.destroy(),this.sounds.splice(g,1),c++)}return c},pauseAll:function(){this.forEachActiveSound(function(f){f.pause()}),this.emit(a.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(f){f.resume()}),this.emit(a.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(f){f.stop()}),this.emit(a.STOP_ALL,this)},stopByKey:function(f){var c=0;return this.getAll(f).forEach(function(g){g.stop()&&c++}),c},unlock:r,onBlur:r,onFocus:r,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(f,c){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(a.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(p){p.update(f,c)})},destroy:function(){this.game.events.off(o.BLUR,this.onGameBlur,this),this.game.events.off(o.FOCUS,this.onGameFocus,this),this.game.events.off(o.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(f,c){var g=this;this.sounds.forEach(function(p,x){p&&!p.pendingRemove&&f.call(c||g,p,x,g.sounds)})},setRate:function(f){return this.rate=f,this},rate:{get:function(){return this._rate},set:function(f){this._rate=f,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(a.GLOBAL_RATE,this,f)}},setDetune:function(f){return this.detune=f,this},detune:{get:function(){return this._detune},set:function(f){this._detune=f,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(a.GLOBAL_DETUNE,this,f)}}});e.exports=l},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(70),a=t(17),o=t(1),r=new s({Extends:u,initialize:function(d,l,f){u.call(this),this.manager=d,this.key=l,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=a(this.config,f),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(h){return!h||!h.name||typeof h.name!="string"?!1:this.markers[h.name]?(console.error("addMarker "+h.name+" already exists in Sound"),!1):(h=a(!0,{name:"",start:0,duration:this.totalDuration-(h.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},h),this.markers[h.name]=h,!0)},updateMarker:function(h){return!h||!h.name||typeof h.name!="string"?!1:this.markers[h.name]?(this.markers[h.name]=a(!0,this.markers[h.name],h),!0):(console.warn("Audio Marker: "+h.name+" missing in Sound: "+this.key),!1)},removeMarker:function(h){var d=this.markers[h];return d?(this.markers[h]=null,d):null},play:function(h,d){if(h===void 0&&(h=""),typeof h=="object"&&(d=h,h=""),typeof h!="string")return!1;if(!h)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[h])return console.warn("Marker: "+h+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[h],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=a(this.currentConfig,d),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:o,calculateRate:function(){var h=1.0005777895065548,d=this.currentConfig.detune+this.manager.detune,l=Math.pow(h,d);this.totalRate=this.currentConfig.rate*this.manager.rate*l},destroy:function(){this.pendingRemove||(this.emit(n.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(209),u=t(435),n=function(a,o){if(o===void 0&&(o=90),!s(a))return null;if(typeof o!="string"&&(o=(o%360+360)%360),o===90||o===-270||o==="rotateLeft")a=u(a),a.reverse();else if(o===-90||o===270||o==="rotateRight")a.reverse(),a=u(a);else if(Math.abs(o)===180||o==="rotate180"){for(var r=0;r<a.length;r++)a[r].reverse();a.reverse()}return a};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(11),a=t(15),o=t(1043),r=t(1044),h=t(212),d=t(10),l=t(1045),f=new s({Extends:a,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Texture,n.Tint,n.Transform,n.Visible,l],initialize:function(g,p,x,y,T,E,S){T===void 0&&(T=""),S===void 0&&(S=0),a.call(this,g,"BitmapText"),this.font=y;var C=this.scene.sys.cache.bitmapFont.get(y);C||console.warn("Invalid BitmapText key: "+y),this.fontData=C.data,this._text="",this._fontSize=E||this.fontData.size,this._letterSpacing=0,this._align=S,this._bounds=o(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=C.fromAtlas,this.setTexture(C.texture,C.frame),this.setPosition(p,x),this.setOrigin(0,0),this.initPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=f.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=f.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=f.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(c){return this._fontSize=c,this._dirty=!0,this},setLetterSpacing:function(c){return c===void 0&&(c=0),this._letterSpacing=c,this._dirty=!0,this},setText:function(c){return!c&&c!==0&&(c=""),Array.isArray(c)&&(c=c.join(`
`)),c!==this.text&&(this._text=c.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(c,g,p,x){return c===void 0&&(c=0),g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=.5),this.dropShadowX=c,this.dropShadowY=g,this.dropShadowColor=p,this.dropShadowAlpha=x,this},setCharacterTint:function(c,g,p,x,y,T,E){c===void 0&&(c=0),g===void 0&&(g=1),p===void 0&&(p=!1),x===void 0&&(x=-1),y===void 0&&(y=x,T=x,E=x);var S=this.text.length;g===-1&&(g=S),c<0&&(c=S+c),c=u(c,0,S-1);for(var C=u(c+g,c,S),P=this.charColors,R=c;R<C;R++){var A=P[R];if(x===-1)P[R]=null;else{var M=p?1:0;A?(A.tintEffect=M,A.tintTL=x,A.tintTR=y,A.tintBL=T,A.tintBR=E):P[R]={tintEffect:M,tintTL:x,tintTR:y,tintBL:T,tintBR:E}}}return this},setWordTint:function(c,g,p,x,y,T,E){g===void 0&&(g=1);for(var S=this.getTextBounds(),C=S.words,P=typeof c=="number",R=0,A=0;A<C.length;A++){var M=C[A];if((P&&A===c||!P&&M.word===c)&&(this.setCharacterTint(M.i,M.word.length,p,x,y,T,E),R++,R===g))return this}return this},getTextBounds:function(c){var g=this._bounds;return(this._dirty||c||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(o(this,c,!0,g),this._dirty=!1),g},getCharacterAt:function(c,g,p){for(var x=this.getLocalPoint(c,g,null,p),y=this.getTextBounds(),T=y.characters,E=new d,S=0;S<T.length;S++){var C=T[S];if(E.setTo(C.x,C.t,C.r-C.x,C.b),E.contains(x.x,x.y))return C}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(c,g,p){if(g===void 0&&(g=this._fontSize),p===void 0&&(p=this._align),c!==this.font){var x=this.scene.sys.cache.bitmapFont.get(c);x&&(this.font=c,this.fontData=x.data,this._fontSize=g,this._align=p,this.fromAtlas=x.fromAtlas===!0,this.setTexture(x.texture,x.frame),o(this,!1,!0,this._bounds))}return this},setMaxWidth:function(c,g){return this._maxWidth=c,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(c){this._align=c,this._dirty=!0},get:function(){return this._align}},text:{set:function(c){this.setText(c)},get:function(){return this._text}},fontSize:{set:function(c){this._fontSize=c,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(c){this._letterSpacing=c,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(c){this._maxWidth=c,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var c=n.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return c.data=g,c},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});f.ALIGN_LEFT=0,f.ALIGN_CENTER=1,f.ALIGN_RIGHT=2,f.ParseFromAtlas=r,f.ParseXMLBitmapFont=h,e.exports=f},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a){if(this.entries=[],Array.isArray(a))for(var o=0;o<a.length;o++)this.set(a[o])},set:function(n){return this.entries.indexOf(n)===-1&&this.entries.push(n),this},get:function(n,a){for(var o=0;o<this.entries.length;o++){var r=this.entries[o];if(r[n]===a)return r}},getArray:function(){return this.entries.slice(0)},delete:function(n){var a=this.entries.indexOf(n);return a>-1&&this.entries.splice(a,1),this},dump:function(){console.group("Set");for(var n=0;n<this.entries.length;n++){var a=this.entries[n];console.log(a)}console.groupEnd()},each:function(n,a){var o,r=this.entries.slice(),h=r.length;if(a)for(o=0;o<h&&n.call(a,r[o],o)!==!1;o++);else for(o=0;o<h&&n(r[o],o)!==!1;o++);return this},iterate:function(n,a){var o,r=this.entries.length;if(a)for(o=0;o<r&&n.call(a,this.entries[o],o)!==!1;o++);else for(o=0;o<r&&n(this.entries[o],o)!==!1;o++);return this},iterateLocal:function(n){var a,o=[];for(a=1;a<arguments.length;a++)o.push(arguments[a]);var r=this.entries.length;for(a=0;a<r;a++){var h=this.entries[a];h[n].apply(h,o)}return this},clear:function(){return this.entries.length=0,this},contains:function(n){return this.entries.indexOf(n)>-1},union:function(n){var a=new u;return n.entries.forEach(function(o){a.set(o)}),this.entries.forEach(function(o){a.set(o)}),a},intersect:function(n){var a=new u;return this.entries.forEach(function(o){n.contains(o)&&a.set(o)}),a},difference:function(n){var a=new u;return this.entries.forEach(function(o){n.contains(o)||a.set(o)}),a},size:{get:function(){return this.entries.length},set:function(n){return n<this.entries.length?this.entries.length=n:this.entries.length}}});e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(189),o=t(92),r=t(1182),h=new s({Extends:n,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Pipeline,u.ScrollFactor,u.Transform,u.Visible,r],initialize:function(l,f,c,g,p,x,y){g===void 0&&(g=16777215),p===void 0&&(p=128),x===void 0&&(x=1),y===void 0&&(y=.1),n.call(this,l,"PointLight"),this.initPipeline(o.POINTLIGHT_PIPELINE),this.setPosition(f,c),this.color=a(g),this.intensity=x,this.attenuation=y,this.width=p*2,this.height=p*2,this._radius=p},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this.width=d*2,this.height=d*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});e.exports=h},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=u.width/2,a=u.height/2,o=Math.abs(s.x-u.x-n),r=Math.abs(s.y-u.y-a),h=n+s.radius,d=a+s.radius;if(o>h||r>d)return!1;if(o<=n||r<=a)return!0;var l=o-n,f=r-a,c=l*l,g=f*f,p=s.radius*s.radius;return c+g<=p};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.width<=0||s.height<=0||u.width<=0||u.height<=0?!1:!(s.right<u.x||s.bottom<u.y||s.x>u.right||s.y>u.bottom)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u={},n={};n.register=function(a,o,r,h,d){u[a]={plugin:o,mapping:r,settingsKey:h,configKey:d}},n.getPlugin=function(a){return u[a]},n.install=function(a){var o=a.scene.sys,r=o.settings.input,h=o.game.config;for(var d in u){var l=u[d].plugin,f=u[d].mapping,c=u[d].settingsKey,g=u[d].configKey;s(r,c,h[g])&&(a[f]=new l(a))}},n.remove=function(a){u.hasOwnProperty(a)&&delete u[a]},e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ANY_KEY_DOWN:t(1323),ANY_KEY_UP:t(1324),COMBO_MATCH:t(1325),DOWN:t(1326),KEY_DOWN:t(1327),KEY_UP:t(1328),UP:t(1329)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.url?s.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?s.url:u+s.url:!1};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o,r){return s===void 0&&(s=""),u===void 0&&(u=!0),n===void 0&&(n=""),a===void 0&&(a=""),o===void 0&&(o=0),r===void 0&&(r=!1),{responseType:s,async:u,user:n,password:a,timeout:o,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:r}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(243),n=t(73),a=new s({Extends:n,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function(r,h,d,l,f){n.call(this,r,h,d,l,f),this.body=null}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(119),u=function(n,a,o,r){if(o===void 0&&(o=!1),s(n,a,r)){var h=r.data[a][n]||null;return h?h.index===-1?o?h:null:h:null}else return null};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=s.data,r=s.width,h=s.height,d=s.tilemapLayer,l=Math.max(0,u.left),f=Math.min(r,u.right),c=Math.max(0,u.top),g=Math.min(h,u.bottom),p,x,y;if(n===0)for(x=c;x<g;x++)for(p=l;o[x]&&p<f;p++)y=o[x][p],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(n===1)for(x=c;x<g;x++)for(p=f;o[x]&&p>=l;p--)y=o[x][p],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(n===2)for(x=g;x>=c;x--)for(p=l;o[x]&&p<f;p++)y=o[x][p],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);else if(n===3)for(x=g;x>=c;x--)for(p=f;o[x]&&p>=l;p--)y=o[x][p],!(!y||y.index===-1||!y.visible||y.alpha===0)&&a.push(y);return d.tilesDrawn=a.length,d.tilesTotal=r*h,a};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n.collideIndexes.indexOf(s);u&&a===-1?n.collideIndexes.push(s):!u&&a!==-1&&n.collideIndexes.splice(a,1)};e.exports=t},function(e,v,t){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,a,o){if(!a)return{i:0,layers:n.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=a.x+s(a,"startx",0)*n.tilewidth+s(a,"offsetx",0),h=a.y+s(a,"starty",0)*n.tileheight+s(a,"offsety",0);return{i:0,layers:a.layers,name:o.name+a.name+"/",opacity:o.opacity*a.opacity,visible:o.visible&&a.visible,x:o.x+r,y:o.y+h}};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a;if(s.hasOwnProperty(u)){var o=typeof s[u];o==="function"?a=function(r,h,d,l,f,c){return s[u](r,h,d,l,f,c)}:a=function(){return s[u]}}else typeof n=="function"?a=n:a=function(){return n};return a};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(265),u=t(13),n=t(99),a=t(80),o=t(162),r=t(583),h=t(263),d=t(6),l=t(264),f=t(266),c=t(268),g=function(p,x,y){y===void 0&&(y=s);for(var T=y.targets?y.targets:h(x),E=r(x),S=o(x,"delay",y.delay),C=o(x,"duration",y.duration),P=d(x,"easeParams",y.easeParams),R=a(d(x,"ease",y.ease),P),A=o(x,"hold",y.hold),M=o(x,"repeat",y.repeat),O=o(x,"repeatDelay",y.repeatDelay),F=n(x,"yoyo",y.yoyo),I=n(x,"flipX",y.flipX),B=n(x,"flipY",y.flipY),V=[],U=0;U<E.length;U++)for(var Y=E[U].key,W=E[U].value,w=0;w<T.length;w++){var L=l(Y,W),D=c(T[w],w,Y,L.getEnd,L.getStart,L.getActive,a(d(W,"ease",R),d(W,"easeParams",P)),o(W,"delay",S),o(W,"duration",C),n(W,"yoyo",F),o(W,"hold",A),o(W,"repeat",M),o(W,"repeatDelay",O),n(W,"flipX",I),n(W,"flipY",B));V.push(D)}var N=new f(p,V,T);N.offset=u(x,"offset",null),N.completeDelay=u(x,"completeDelay",0),N.loop=Math.round(u(x,"loop",0)),N.loopDelay=Math.round(u(x,"loopDelay",0)),N.paused=n(x,"paused",!1),N.useFrames=n(x,"useFrames",!1);for(var G=d(x,"callbackScope",N),b=[N,null],z=f.TYPES,X=0;X<z.length;X++){var H=z[X],$=d(x,H,!1);if($){var J=d(x,H+"Scope",G),K=d(x,H+"Params",[]);N.setCallback(H,$,b.concat(K),J)}}return N};e.exports=g},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(102),n=t(2),a=t(132),o=t(185),r=new s({initialize:function(d){this.parent=d,this.animationManager=d.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(h){var d=this.parent;if(h===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,d;Array.isArray(h)||(h=[h]);for(var l=0;l<h.length;l++){var f=h[l];this.nextAnim===null?this.nextAnim=f:this.nextAnimsQueue.push(f)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(h){this.isPlaying&&this.stop();var d=this.animationManager,l=typeof h=="string"?h:n(h,"key",null),f=this.exists(l)?this.get(l):d.get(l);if(!f)console.warn("Missing animation: "+l);else{this.currentAnim=f;var c=f.getTotalFrames(),g=n(h,"frameRate",f.frameRate),p=n(h,"duration",f.duration);f.calculateDuration(this,c,p,g),this.delay=n(h,"delay",f.delay),this.repeat=n(h,"repeat",f.repeat),this.repeatDelay=n(h,"repeatDelay",f.repeatDelay),this.yoyo=n(h,"yoyo",f.yoyo),this.showOnStart=n(h,"showOnStart",f.showOnStart),this.hideOnComplete=n(h,"hideOnComplete",f.hideOnComplete),this.skipMissedFrames=n(h,"skipMissedFrames",f.skipMissedFrames),this.timeScale=n(h,"timeScale",this.timeScale);var x=n(h,"startFrame",0);x>f.getTotalFrames()&&(x=0);var y=f.frames[x];x===0&&!this.forward&&(y=f.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(h){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),h!==void 0&&this.setCurrentFrame(h),this.parent},resume:function(h){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),h!==void 0&&this.setCurrentFrame(h),this.parent},playAfterDelay:function(h,d){if(!this.isPlaying)this.delayCounter=d,this.play(h,!0);else{var l=this.nextAnim,f=this.nextAnimsQueue;l&&f.unshift(l),this.nextAnim=h,this._pendingStop=1,this._pendingStopValue=d}return this.parent},playAfterRepeat:function(h,d){if(d===void 0&&(d=1),!this.isPlaying)this.play(h);else{var l=this.nextAnim,f=this.nextAnimsQueue;l&&f.unshift(l),this.repeatCounter!==-1&&d>this.repeatCounter&&(d=this.repeatCounter),this.nextAnim=h,this._pendingStop=2,this._pendingStopValue=d}return this.parent},play:function(h,d){d===void 0&&(d=!1);var l=this.currentAnim,f=this.parent,c=typeof h=="string"?h:h.key;if(d&&this.isPlaying&&l.key===c)return f;if(l&&this.isPlaying){var g=this.animationManager.getMix(l.key,h);if(g>0)return this.playAfterDelay(h,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(h)},playReverse:function(h,d){d===void 0&&(d=!1);var l=typeof h=="string"?h:h.key;return d&&this.isPlaying&&this.currentAnim.key===l?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(h))},startAnimation:function(h){this.load(h);var d=this.currentAnim,l=this.parent;return d&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,d.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),l},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(h,d){var l=this.currentAnim,f=this.currentFrame,c=this.parent,g=f.textureFrame;c.emit(h,l,f,c,g),d&&c.emit(d+l.key,l,f,c,g)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var h=this.currentFrame;if(!h)return 0;var d=h.progress;return this.inReverse&&(d*=-1),d},setProgress:function(h){return this.forward||(h=1-h),this.setCurrentFrame(this.currentAnim.getFrameByProgress(h)),this.parent},setRepeat:function(h){return this.repeatCounter=h===-1?Number.MAX_VALUE:h,this.parent},globalRemove:function(h,d){d===void 0&&(d=this.currentAnim),this.isPlaying&&d.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(h,d){h===void 0&&(h=!1),d===void 0&&(d=!1);var l=this.currentAnim,f=this.parent;return l?(d&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),l.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!h,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(l.frames[0]),this.parent):f},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var h=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(h)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var h=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(h)}return this.parent},stopAfterDelay:function(h){return this._pendingStop=1,this._pendingStopValue=h,this.parent},stopAfterRepeat:function(h){return h===void 0&&(h=1),this.repeatCounter!==-1&&h>this.repeatCounter&&(h=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=h,this.parent},stopOnFrame:function(h){return this._pendingStop=3,this._pendingStopValue=h,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(h,d){var l=this.currentAnim;if(!(!this.isPlaying||!l||l.paused)){if(this.accumulator+=d*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=d,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?l.nextFrame(this):l.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var f=0;do this.forward?l.nextFrame(this):l.previousFrame(this),f++;while(this.isPlaying&&this.accumulator>this.nextTick&&f<60)}}},setCurrentFrame:function(h){var d=this.parent;return this.currentFrame=h,d.texture=h.frame.texture,d.frame=h.frame,d.isCropped&&d.frame.updateCropUVs(d._crop,d.flipX,d.flipY),h.setAlpha&&(d.alpha=h.alpha),d.setSizeToFrame(),d._originComponent&&(h.frame.customPivot?d.setOrigin(h.frame.pivotX,h.frame.pivotY):d.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===h&&this.stop()),d},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(h){return this.anims?this.anims.get(h):null},exists:function(h){return this.anims?this.anims.has(h):!1},create:function(h){var d=h.key,l=!1;return d&&(l=this.get(d),l||(l=new o(this,d,h),this.anims||(this.anims=new u),this.anims.set(d,l))),l},generateFrameNames:function(h,d){return this.animationManager.generateFrameNames(h,d)},generateFrameNumbers:function(h,d){return this.animationManager.generateFrameNumbers(h,d)},remove:function(h){var d=this.get(h);return d&&(this.currentAnim===d&&this.stop(),this.anims.delete(h)),d},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});e.exports=r},function(e,v,t){var s={};e.exports=s;var u=t(166);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(n,a){for(var o=a*a*a,r=0;r<n.length;r++){var h=n[r],d=h.speed*h.speed+h.angularSpeed*h.angularSpeed;if(h.force.x!==0||h.force.y!==0){s.set(h,!1);continue}var l=Math.min(h.motion,d),f=Math.max(h.motion,d);h.motion=s._minBias*l+(1-s._minBias)*f,h.sleepThreshold>0&&h.motion<s._motionSleepThreshold*o?(h.sleepCounter+=1,h.sleepCounter>=h.sleepThreshold&&s.set(h,!0)):h.sleepCounter>0&&(h.sleepCounter-=1)}},s.afterCollisions=function(n,a){for(var o=a*a*a,r=0;r<n.length;r++){var h=n[r];if(!!h.isActive){var d=h.collision,l=d.bodyA.parent,f=d.bodyB.parent;if(!(l.isSleeping&&f.isSleeping||l.isStatic||f.isStatic)&&(l.isSleeping||f.isSleeping)){var c=l.isSleeping&&!l.isStatic?l:f,g=c===l?f:l;!c.isStatic&&g.motion>s._motionWakeThreshold*o&&s.set(c,!1)}}}},s.set=function(n,a){var o=n.isSleeping;a?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,o||u.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,o&&u.trigger(n,"sleepEnd"))}})()},function(e,v,t){var s={};e.exports=s;var u=t(32);(function(){s.on=function(n,a,o){for(var r=a.split(" "),h,d=0;d<r.length;d++)h=r[d],n.events=n.events||{},n.events[h]=n.events[h]||[],n.events[h].push(o);return o},s.off=function(n,a,o){if(!a){n.events={};return}typeof a=="function"&&(o=a,a=u.keys(n.events).join(" "));for(var r=a.split(" "),h=0;h<r.length;h++){var d=n.events[r[h]],l=[];if(o&&d)for(var f=0;f<d.length;f++)d[f]!==o&&l.push(d[f]);n.events[r[h]]=l}},s.trigger=function(n,a,o){var r,h,d,l,f=n.events;if(f&&u.keys(f).length>0){o||(o={}),r=a.split(" ");for(var c=0;c<r.length;c++)if(h=r[c],d=f[h],d){l=u.clone(o,!1),l.name=h,l.source=n;for(var g=0;g<d.length;g++)d[g].apply(n,[l])}}}})()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(175),u=t(92),n=t(74),a={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(o){o===void 0&&(o=u.MULTI_PIPELINE);var r=this.scene.sys.renderer;if(!r)return!1;var h=r.pipelines;if(this.postPipelines=[],this.pipelineData={},h){var d=h.get(o);if(d)return this.defaultPipeline=d,this.pipeline=d,!0}return!1},setPipeline:function(o,r,h){var d=this.scene.sys.renderer;if(!d)return this;var l=d.pipelines;if(l){var f=l.get(o);f&&(this.pipeline=f),r&&(this.pipelineData=h?s(r):r)}return this},setPostPipeline:function(o,r,h){var d=this.scene.sys.renderer;if(!d)return this;var l=d.pipelines;if(l){Array.isArray(o)||(o=[o]);for(var f=0;f<o.length;f++){var c=l.getPostPipeline(o[f],this);c&&this.postPipelines.push(c)}r&&(this.pipelineData=h?s(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(o,r){var h=this.pipelineData;return r===void 0?delete h[o]:h[o]=r,this},getPostPipeline:function(o){for(var r=this.postPipelines,h=[],d=0;d<r.length;d++){var l=r[d];(typeof o=="string"&&l.name===o||l instanceof o)&&h.push(l)}return h.length===1?h[0]:h},resetPipeline:function(o,r){return o===void 0&&(o=!1),r===void 0&&(r=!1),this.pipeline=this.defaultPipeline,o&&(this.postPipelines=[],this.hasPostPipeline=!1),r&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(o){o===void 0&&(o=!1);for(var r=this.postPipelines,h=0;h<r.length;h++)r[h].destroy();this.postPipelines=[],this.hasPostPipeline=!1,o&&(this.pipelineData={})},removePostPipeline:function(o){for(var r=this.postPipelines,h=r.length-1;h>=0;h--){var d=r[h];(typeof o=="string"&&d.name===o||typeof o!="string"&&d instanceof o)&&(d.destroy(),n(r,h))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DEFAULT:0,LINEAR:0,NEAREST:1};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,o){return o===void 0&&(o=new s),o.x=n.x+n.radius*Math.cos(a),o.y=n.y+n.radius*Math.sin(a),o};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){a===void 0&&(a=new s);var o=2*Math.PI*Math.random(),r=Math.random()+Math.random(),h=r>1?2-r:r,d=h*Math.cos(o),l=h*Math.sin(o);return a.x=n.x+d*n.radius,a.y=n.y+l*n.radius,a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(130),u=t(4),n=function(a,o,r){if(r===void 0&&(r=new u),o<=0||o>=1)return r.x=a.x,r.y=a.y,r;var h=s(a)*o;return o>.5?(h-=a.width+a.height,h<=a.width?(r.x=a.right-h,r.y=a.bottom):(r.x=a.x,r.y=a.bottom-(h-a.width))):h<=a.width?(r.x=a.x+h,r.y=a.y):(r.x=a.right,r.y=a.y+(h-a.width)),r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(4),n=function(a,o,r,h){h===void 0&&(h=[]),!o&&r>0&&(o=s(a)/r);for(var d=a.x1,l=a.y1,f=a.x2,c=a.y2,g=0;g<o;g++){var p=g/o,x=d+(f-d)*p,y=l+(c-l)*p;h.push(new u(x,y))}return h};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){a===void 0&&(a=new s);var o=Math.random();return a.x=n.x1+o*(n.x2-n.x1),a.y=n.y1+o*(n.y2-n.y1),a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.x=n.x+Math.random()*n.width,a.y=n.y+Math.random()*n.height,a};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u,n,a;if(typeof s!="object"||s===null)return s;u=Array.isArray(s)?[]:{};for(a in s)n=s[a],u[a]=t(n);return u};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u={name:s.name,type:s.type,x:s.x,y:s.y,depth:s.depth,scale:{x:s.scaleX,y:s.scaleY},origin:{x:s.originX,y:s.originY},flipX:s.flipX,flipY:s.flipY,rotation:s.rotation,alpha:s.alpha,visible:s.visible,blendMode:s.blendMode,textureKey:"",frameKey:"",data:{}};return s.texture&&(u.textureKey=s.texture.key,u.frameKey=s.frame.name),u};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,o,r,h,d,l,f){f===void 0&&(f=new s);var c=Math.sin(h),g=Math.cos(h),p=g*d,x=c*d,y=-c*l,T=g*l,E=1/(p*T+y*-x);return f.x=T*E*n+-y*E*a+(r*y-o*T)*E,f.y=p*E*a+-x*E*n+(-r*p+o*x)*E,f};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);for(var n=null,a=0;a<u;a++)n=s.shift(),s.push(n);return n};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);for(var n=null,a=0;a<u;a++)n=s.pop(),s.unshift(n);return n};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){a===void 0&&(a=new s);var o=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return a.x=n.x+r*Math.cos(o)*n.width/2,a.y=n.y+r*Math.sin(o)*n.height/2,a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){a===void 0&&(a=new s);var o=n.x2-n.x1,r=n.y2-n.y1,h=n.x3-n.x1,d=n.y3-n.y1,l=Math.random(),f=Math.random();return l+f>=1&&(l=1-l,f=1-f),a.x=n.x1+(o*l+h*f),a.y=n.y1+(r*l+d*f),a};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o){var r=a+Math.atan2(s.y-n,s.x-u);return s.x=u+o*Math.cos(r),s.y=n+o*Math.sin(r),s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s=Math.max(0,Math.min(1,(s-u)/(n-u))),s*s*s*(s*(s*6-15)+10)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s<=u?0:s>=n?1:(s=(s-u)/(n-u),s*s*(3-2*s))};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(132),a=t(318),o=t(319),r=t(6),h=t(320),d=new u({initialize:function(f,c,g){this.manager=f,this.key=c,this.type="frame",this.frames=this.getFrames(f.textureManager,r(g,"frames",[]),r(g,"defaultTextureKey",null),r(g,"sortFrames",!0)),this.frameRate=r(g,"frameRate",null),this.duration=r(g,"duration",null),this.msPerFrame,this.skipMissedFrames=r(g,"skipMissedFrames",!0),this.delay=r(g,"delay",0),this.repeat=r(g,"repeat",0),this.repeatDelay=r(g,"repeatDelay",0),this.yoyo=r(g,"yoyo",!1),this.showOnStart=r(g,"showOnStart",!1),this.hideOnComplete=r(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(n.PAUSE_ALL,this.pause,this),this.manager.on(n.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(l,f,c,g){c===null&&g===null?(l.frameRate=24,l.duration=24/f*1e3):c&&g===null?(l.duration=c,l.frameRate=f/(c/1e3)):(l.frameRate=g,l.duration=f/g*1e3),l.msPerFrame=1e3/l.frameRate},addFrame:function(l){return this.addFrameAt(this.frames.length,l)},addFrameAt:function(l,f){var c=this.getFrames(this.manager.textureManager,f);if(c.length>0){if(l===0)this.frames=c.concat(this.frames);else if(l===this.frames.length)this.frames=this.frames.concat(c);else{var g=this.frames.slice(0,l),p=this.frames.slice(l);this.frames=g.concat(c,p)}this.updateFrameSequence()}return this},checkFrame:function(l){return l>=0&&l<this.frames.length},getFirstTick:function(l){l.accumulator=0,l.nextTick=l.msPerFrame+l.currentFrame.duration},getFrameAt:function(l){return this.frames[l]},getFrames:function(l,f,c,g){g===void 0&&(g=!0);var p=[],x,y,T=1,E,S;if(typeof f=="string"){S=f;var C=l.get(S),P=C.getFrameNames();g&&h(P),f=[],P.forEach(function(I){f.push({key:S,frame:I})})}if(!Array.isArray(f)||f.length===0)return p;for(E=0;E<f.length;E++){var R=f[E],A=r(R,"key",c);if(!!A){var M=r(R,"frame",0),O=l.getFrame(A,M);y=new o(A,M,T,O),y.duration=r(R,"duration",0),y.isFirst=!x,x&&(x.nextFrame=y,y.prevFrame=x),p.push(y),x=y,T++}}if(p.length>0){y.isLast=!0,y.nextFrame=p[0],p[0].prevFrame=y;var F=1/(p.length-1);for(E=0;E<p.length;E++)p[E].progress=E*F}return p},getNextTick:function(l){l.accumulator-=l.nextTick,l.nextTick=l.msPerFrame+l.currentFrame.duration},getFrameByProgress:function(l){return l=s(l,0,1),a(l,this.frames,"progress")},nextFrame:function(l){var f=l.currentFrame;f.isLast?l.yoyo?this.handleYoyoFrame(l,!1):l.repeatCounter>0?l.inReverse&&l.forward?l.forward=!1:this.repeatAnimation(l):l.complete():this.updateAndGetNextTick(l,f.nextFrame)},handleYoyoFrame:function(l,f){if(f||(f=!1),l.inReverse===!f&&l.repeatCounter>0){(l.repeatDelay===0||l.pendingRepeat)&&(l.forward=f),this.repeatAnimation(l);return}if(l.inReverse!==f&&l.repeatCounter===0){l.complete();return}l.forward=f;var c=f?l.currentFrame.nextFrame:l.currentFrame.prevFrame;this.updateAndGetNextTick(l,c)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(l){var f=l.currentFrame;f.isFirst?l.yoyo?this.handleYoyoFrame(l,!0):l.repeatCounter>0?l.inReverse&&!l.forward?this.repeatAnimation(l):(l.forward=!0,this.repeatAnimation(l)):l.complete():this.updateAndGetNextTick(l,f.prevFrame)},updateAndGetNextTick:function(l,f){l.setCurrentFrame(f),this.getNextTick(l)},removeFrame:function(l){var f=this.frames.indexOf(l);return f!==-1&&this.removeFrameAt(f),this},removeFrameAt:function(l){return this.frames.splice(l,1),this.updateFrameSequence(),this},repeatAnimation:function(l){if(l._pendingStop===2){if(l._pendingStopValue===0)return l.stop();l._pendingStopValue--}l.repeatDelay>0&&!l.pendingRepeat?(l.pendingRepeat=!0,l.accumulator-=l.nextTick,l.nextTick+=l.repeatDelay):(l.repeatCounter--,l.forward?l.setCurrentFrame(l.currentFrame.nextFrame):l.setCurrentFrame(l.currentFrame.prevFrame),l.isPlaying&&(this.getNextTick(l),l.handleRepeat()))},toJSON:function(){var l={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(f){l.frames.push(f.toJSON())}),l},updateFrameSequence:function(){for(var l=this.frames.length,f=1/(l-1),c,g=0;g<l;g++)c=this.frames[g],c.index=g+1,c.isFirst=!1,c.isLast=!1,c.progress=g*f,g===0?(c.isFirst=!0,l===1?(c.isLast=!0,c.nextFrame=c,c.prevFrame=c):(c.isLast=!1,c.prevFrame=this.frames[l-1],c.nextFrame=this.frames[g+1])):g===l-1&&l>1?(c.isLast=!0,c.prevFrame=this.frames[l-2],c.nextFrame=this.frames[0]):l>1&&(c.prevFrame=this.frames[g-1],c.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(n.PAUSE_ALL,this.pause,this),this.manager.off(n.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var l=0;l<this.frames.length;l++)this.frames[l].destroy();this.frames=[],this.manager=null}});e.exports=d},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u===void 0&&(u=0),n===void 0&&(n=" "),a===void 0&&(a=3),s=s.toString();var o=0;if(u+1>=s.length)switch(a){case 1:s=new Array(u+1-s.length).join(n)+s;break;case 3:var r=Math.ceil((o=u-s.length)/2),h=o-r;s=new Array(h+1).join(n)+s+new Array(r+1).join(n);break;default:s=s+new Array(u+1-s.length).join(n);break}return s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(327),u=t(189),n=t(331),a=t(332),o=function(r){var h=typeof r;switch(h){case"string":return r.substr(0,3).toLowerCase()==="rgb"?a(r):s(r);case"number":return u(r);case"object":return n(r)}};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(103);function u(a,o,r,h){var d=(a+o*6)%6,l=Math.min(d,4-d,1);return Math.round(255*(h-h*r*Math.max(0,l)))}var n=function(a,o,r,h){o===void 0&&(o=1),r===void 0&&(r=1);var d=u(5,a,o,r),l=u(3,a,o,r),f=u(1,a,o,r);return h?h.setTo?h.setTo(d,l,f,h.alpha,!1):(h.r=d,h.g=l,h.b=f,h.color=s(d,l,f),h):{r:d,g:l,b:f,color:s(d,l,f)}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=t(330),n=function(a){var o=u(a);return new s(o.r,o.g,o.b,o.a)};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x=u-s.width/2,s.y=n-s.height/2,s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(105),u=t(136),n=t(31),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function o(){var h=new ArrayBuffer(4),d=new Uint8Array(h),l=new Uint32Array(h);return d[0]=161,d[1]=178,d[2]=195,d[3]=212,l[0]===3569595041?!0:l[0]===2712847316?!1:null}function r(){if(typeof importScripts=="function")return a;a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch{a.localStorage=!1}a.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,a.fileSystem=!!window.requestFileSystem;var h=!1,d=function(){if(window.WebGLRenderingContext)try{var l=n.createWebGL(this),f=l.getContext("webgl")||l.getContext("experimental-webgl"),c=n.create2D(this),g=c.getContext("2d"),p=g.createImageData(1,1);return h=p.data instanceof Uint8ClampedArray,n.remove(l),n.remove(c),!!f}catch{return!1}return!1};return a.webGL=d(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,u.firefox&&u.firefoxVersion<21&&(a.getUserMedia=!1),!s.iOS&&(u.ie||u.firefox||u.chrome)&&(a.canvasBitBltShift=!0),(u.safari||u.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(a.littleEndian=o()),a.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&a.littleEndian!==null&&h,a}e.exports=r()},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="",s=function(){var u=function(r){for(var h=["i","webkitI","msI","mozI","oI"],d=0;d<h.length;d++){var l=h[d]+"mageSmoothingEnabled";if(l in r)return l}return null},n=function(r){return t===""&&(t=u(r)),t&&(r[t]=!0),r},a=function(r){return t===""&&(t=u(r)),t&&(r[t]=!1),r},o=function(r){return t!==null?r[t]:null};return{disable:a,enable:n,getPrefix:u,isEnabled:o}};e.exports=s()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(17),n={Angle:t(812),Distance:t(821),Easing:t(826),Fuzzy:t(827),Interpolation:t(830),Pow2:t(835),Snap:t(837),RandomDataGenerator:t(839),Average:t(840),Bernstein:t(356),Between:t(195),CatmullRom:t(194),CeilTo:t(841),Clamp:t(18),DegToRad:t(36),Difference:t(842),Euler:t(843),Factorial:t(357),FloatBetween:t(137),FloorTo:t(844),FromPercent:t(98),GetSpeed:t(845),IsEven:t(846),IsEvenStrict:t(847),Linear:t(135),MaxAdd:t(848),Median:t(849),MinSub:t(850),Percent:t(851),RadToDeg:t(196),RandomXY:t(852),RandomXYZ:t(853),RandomXYZW:t(854),Rotate:t(362),RotateAround:t(308),RotateAroundDistance:t(182),RotateTo:t(855),RoundAwayFromZero:t(363),RoundTo:t(856),SinCosTableGenerator:t(857),SmootherStep:t(183),SmoothStep:t(184),ToXY:t(858),TransformXY:t(177),Within:t(859),Wrap:t(68),Vector2:t(3),Vector3:t(39),Vector4:t(140),Matrix3:t(364),Matrix4:t(69),Quaternion:t(365),RotateVec3:t(860)};n=u(!1,n,s),e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o){var r=(a-u)*.5,h=(o-n)*.5,d=s*s,l=s*d;return(2*n-2*a+r+h)*l+(-3*n+3*a-2*r-h)*d+r*s+n};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.floor(Math.random()*(u-s+1)+s)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n){return n*s.RAD_TO_DEG};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(n){return this._matrix=n,this._dirty=!0,this},reset:function(){var n=this._matrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=1,n[7]=0,n[8]=0,n[9]=0,n[10]=0,n[11]=0,n[12]=1,n[13]=0,n[14]=0,n[15]=0,n[16]=0,n[17]=0,n[18]=1,n[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var n=new Float32Array(this._matrix);n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,this._data=n,this._dirty=!1}return this._data},brightness:function(n,a){n===void 0&&(n=0),a===void 0&&(a=!1);var o=n;return this.multiply([o,0,0,0,0,0,o,0,0,0,0,0,o,0,0,0,0,0,1,0],a)},saturate:function(n,a){n===void 0&&(n=0),a===void 0&&(a=!1);var o=n*2/3+1,r=(o-1)*-.5;return this.multiply([o,r,r,0,0,r,o,r,0,0,r,r,o,0,0,0,0,0,1,0],a)},desaturate:function(n){return n===void 0&&(n=!1),this.saturate(-1,n)},hue:function(n,a){n===void 0&&(n=0),a===void 0&&(a=!1),n=n/180*Math.PI;var o=Math.cos(n),r=Math.sin(n),h=.213,d=.715,l=.072;return this.multiply([h+o*(1-h)+r*-h,d+o*-d+r*-d,l+o*-l+r*(1-l),0,0,h+o*-h+r*.143,d+o*(1-d)+r*.14,l+o*-l+r*-.283,0,0,h+o*-h+r*-(1-h),d+o*-d+r*d,l+o*(1-l)+r*l,0,0,0,0,0,1,0],a)},grayscale:function(n,a){return n===void 0&&(n=1),a===void 0&&(a=!1),this.saturate(-n,a)},blackWhite:function(n){return n===void 0&&(n=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],n)},contrast:function(n,a){n===void 0&&(n=0),a===void 0&&(a=!1);var o=n+1,r=-.5*(o-1);return this.multiply([o,0,0,0,r,0,o,0,0,r,0,0,o,0,r,0,0,0,1,0],a)},negative:function(n){return n===void 0&&(n=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],n)},desaturateLuminance:function(n){return n===void 0&&(n=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],n)},sepia:function(n){return n===void 0&&(n=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],n)},night:function(n,a){return n===void 0&&(n=.1),a===void 0&&(a=!1),this.multiply([n*-2,-n,0,0,0,-n,0,n,0,0,0,n,n*2,0,0,0,0,0,1,0],a)},lsd:function(n){return n===void 0&&(n=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],n)},brown:function(n){return n===void 0&&(n=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],n)},vintagePinhole:function(n){return n===void 0&&(n=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],n)},kodachrome:function(n){return n===void 0&&(n=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],n)},technicolor:function(n){return n===void 0&&(n=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],n)},polaroid:function(n){return n===void 0&&(n=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],n)},shiftToBGR:function(n){return n===void 0&&(n=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],n)},multiply:function(n,a){a||this.reset();for(var o=this._matrix,r=[],h=0;h<20;h++)r[h]=o[h];return o[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],o[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],o[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],o[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],o[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],o[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],o[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],o[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],o[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],o[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],o[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],o[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],o[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],o[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],o[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],o[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],o[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],o[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],o[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],o[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],this._dirty=!0,this}});e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(14),n=function(a,o){if(o===void 0&&(o=new s),a.length===0)return o;for(var r=Number.MAX_VALUE,h=Number.MAX_VALUE,d=u.MIN_SAFE_INTEGER,l=u.MIN_SAFE_INTEGER,f,c,g,p=0;p<a.length;p++)f=a[p],Array.isArray(f)?(c=f[0],g=f[1]):(c=f.x,g=f.y),r=Math.min(r,c),h=Math.min(h,g),d=Math.max(d,c),l=Math.max(l,g);return o.x=r,o.y=h,o.width=d-r,o.height=l-h,o};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1),n=new s({initialize:function(o,r,h){this._rgb=[0,0,0],this.onChangeCallback=u,this.dirty=!1,this.set(o,r,h)},set:function(a,o,r){return a===void 0&&(a=0),o===void 0&&(o=0),r===void 0&&(r=0),this._rgb=[a,o,r],this.onChange(),this},equals:function(a,o,r){var h=this._rgb;return h.r===a&&h.g===o&&h.b===r},onChange:function(){this.dirty=!0;var a=this._rgb;this.onChangeCallback.call(this,a[0],a[1],a[2])},r:{get:function(){return this._rgb[0]},set:function(a){this._rgb[0]=a,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(a){this._rgb[1]=a,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(a){this._rgb[2]=a,this.onChange()}},destroy:function(){this.onChangeCallback=null}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={CENTER:t(403),ORIENTATION:t(404),SCALE_MODE:t(405),ZOOM:t(406)};e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){s.parentNode&&s.parentNode.removeChild(s)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(144),n=t(197),a=t(20),o=t(419),r=t(420),h=t(33),d=t(1),l=t(421),f=new s({initialize:function(g,p){this.scene=g,this.game,this.renderer,this.config=p,this.settings=l.create(p),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=d},init:function(c){this.settings.status=u.INIT,this.sceneUpdate=d,this.game=c,this.renderer=c.renderer,this.canvas=c.canvas,this.context=c.context;var g=c.plugins;this.plugins=g,g.addToScene(this,n.Global,[n.CoreScene,r(this),o(this)]),this.events.emit(a.BOOT,this),this.settings.isBooted=!0},step:function(c,g){var p=this.events;p.emit(a.PRE_UPDATE,c,g),p.emit(a.UPDATE,c,g),this.sceneUpdate.call(this.scene,c,g),p.emit(a.POST_UPDATE,c,g)},render:function(c){var g=this.displayList;g.depthSort(),this.events.emit(a.PRE_RENDER,c),this.cameras.render(c,g),this.events.emit(a.RENDER,c)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(c){var g=this.events,p=this.settings;return this.settings.active&&(p.status=u.PAUSED,p.active=!1,g.emit(a.PAUSE,this,c)),this},resume:function(c){var g=this.events,p=this.settings;return this.settings.active||(p.status=u.RUNNING,p.active=!0,g.emit(a.RESUME,this,c)),this},sleep:function(c){var g=this.events,p=this.settings;return p.status=u.SLEEPING,p.active=!1,p.visible=!1,g.emit(a.SLEEP,this,c),this},wake:function(c){var g=this.events,p=this.settings;return p.status=u.RUNNING,p.active=!0,p.visible=!0,g.emit(a.WAKE,this,c),p.isTransition&&g.emit(a.TRANSITION_WAKE,p.transitionFrom,p.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===u.SLEEPING},isActive:function(){return this.settings.status===u.RUNNING},isPaused:function(){return this.settings.status===u.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(c){return this.settings.visible=c,this},setActive:function(c,g){return c?this.resume(g):this.pause(g)},start:function(c){var g=this.events,p=this.settings;c&&(p.data=c),p.status=u.START,p.active=!0,p.visible=!0,g.emit(a.START,this),g.emit(a.READY,this,c)},shutdown:function(c){var g=this.events,p=this.settings;g.off(a.TRANSITION_INIT),g.off(a.TRANSITION_START),g.off(a.TRANSITION_COMPLETE),g.off(a.TRANSITION_OUT),p.status=u.SHUTDOWN,p.active=!1,p.visible=!1,this.renderer===h.WEBGL&&this.renderer.resetTextures(!0),g.emit(a.SHUTDOWN,this,c)},destroy:function(){var c=this.events,g=this.settings;g.status=u.DESTROYED,g.active=!1,g.visible=!1,c.emit(a.DESTROY,this),c.removeAllListeners();for(var p=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<p.length;x++)this[p[x]]=null}});e.exports=f},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s&&s[0].toUpperCase()+s.slice(1)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33),u=t(0),n=t(109),a=t(424),o="Texture.frame missing: ",r=new u({initialize:function(d,l,f,c,g){Array.isArray(f)||(f=[f]),this.manager=d,this.key=l,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var p=0;p<f.length;p++)this.source.push(new a(this,f[p],c,g))},add:function(h,d,l,f,c,g){if(this.has(h))return null;var p=new n(this,h,d,l,f,c,g);return this.frames[h]=p,this.firstFrame==="__BASE"&&(this.firstFrame=h),this.frameTotal++,p},remove:function(h){if(this.has(h)){var d=this.get(h);return d.destroy(),delete this.frames[h],!0}return!1},has:function(h){return this.frames[h]},get:function(h){h||(h=this.firstFrame);var d=this.frames[h];return d||(console.warn(o+h),d=this.frames[this.firstFrame]),d},getTextureSourceIndex:function(h){for(var d=0;d<this.source.length;d++)if(this.source[d]===h)return d;return-1},getFramesFromTextureSource:function(h,d){d===void 0&&(d=!1);var l=[];for(var f in this.frames)if(!(f==="__BASE"&&!d)){var c=this.frames[f];c.sourceIndex===h&&l.push(c)}return l},getFrameNames:function(h){h===void 0&&(h=!1);var d=Object.keys(this.frames);if(!h){var l=d.indexOf("__BASE");l!==-1&&d.splice(l,1)}return d},getSourceImage:function(h){(h==null||this.frameTotal===1)&&(h="__BASE");var d=this.frames[h];return d?d.source.image:(console.warn(o+h),this.frames.__BASE.source.image)},getDataSourceImage:function(h){(h==null||this.frameTotal===1)&&(h="__BASE");var d=this.frames[h],l;return d?l=d.sourceIndex:(console.warn(o+h),l=this.frames.__BASE.sourceIndex),this.dataSource[l].image},setDataSource:function(h){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var l=this.source[d];this.dataSource.push(new a(this,h[d],l.width,l.height))}},setFilter:function(h){var d;for(d=0;d<this.source.length;d++)this.source[d].setFilter(h);for(d=0;d<this.dataSource.length;d++)this.dataSource[d].setFilter(h)},destroy:function(){var h;for(h=0;h<this.source.length;h++)this.source[h].destroy();for(h=0;h<this.dataSource.length;h++)this.dataSource[h].destroy();for(var d in this.frames){var l=this.frames[d];l.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var f=this.manager.game.renderer;f&&f.type===s.WEBGL&&f.resetTextures(!0),this.manager=null}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,o,r,h){r===void 0&&(r=0),h===void 0&&(h=n.length);var d=[];if(s(n,r,h))for(var l=r;l<h;l++){var f=n[l];(!a||a&&o===void 0&&f.hasOwnProperty(a)||a&&o!==void 0&&f[a]===o)&&d.push(f)}return d};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Matrix:t(1013),Add:t(1021),AddAt:t(1022),BringToTop:t(1023),CountAllMatching:t(1024),Each:t(1025),EachInRange:t(1026),FindClosestInSorted:t(318),GetAll:t(207),GetFirst:t(428),GetRandom:t(210),MoveDown:t(1027),MoveTo:t(1028),MoveUp:t(1029),MoveAbove:t(1030),MoveBelow:t(1031),NumberArray:t(322),NumberArrayStep:t(1032),QuickSelect:t(436),Range:t(437),Remove:t(93),RemoveAt:t(1033),RemoveBetween:t(1034),RemoveRandomElement:t(1035),Replace:t(1036),RotateLeft:t(178),RotateRight:t(179),SafeRange:t(78),SendToBack:t(1037),SetAll:t(1038),Shuffle:t(131),SortByDigits:t(320),SpliceOne:t(74),StableSort:t(79),Swap:t(1039)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(!Array.isArray(s)||s.length<2||!Array.isArray(s[0]))return!1;for(var u=s[0].length,n=1;n<s.length;n++)if(s[n].length!==u)return!1;return!0};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=s.length);var a=u+Math.floor(Math.random()*n);return s[a]===void 0?null:s[a]};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(438),a=new s({Extends:u,initialize:function(){u.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(o){return this._pending.push(o),this._toProcess++,o},remove:function(o){return this._destroy.push(o),this._toProcess++,o},removeAll:function(){for(var o=this._active,r=this._destroy,h=o.length;h--;)r.push(o[h]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var o=this._destroy,r=this._active,h,d;for(h=0;h<o.length;h++){d=o[h];var l=r.indexOf(d);l!==-1&&(r.splice(l,1),this.emit(n.PROCESS_QUEUE_REMOVE,d))}for(o.length=0,o=this._pending,h=0;h<o.length;h++)d=o[h],(!this.checkQueue||this.checkQueue&&r.indexOf(d)===-1)&&(r.push(d),this.emit(n.PROCESS_QUEUE_ADD,d));return o.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(u,n){return parseInt(u.getAttribute(n),10)}var s=function(u,n,a,o,r){a===void 0&&(a=0),o===void 0&&(o=0);var h=n.cutX,d=n.cutY,l=n.source.width,f=n.source.height,c=n.sourceIndex,g={},p=u.getElementsByTagName("info")[0],x=u.getElementsByTagName("common")[0];g.font=p.getAttribute("face"),g.size=t(p,"size"),g.lineHeight=t(x,"lineHeight")+o,g.chars={};var y=u.getElementsByTagName("char"),T=n!==void 0&&n.trimmed;if(T)var E=n.height,S=n.width;for(var C=0;C<y.length;C++){var P=y[C],R=t(P,"id"),A=String.fromCharCode(R),M=t(P,"x"),O=t(P,"y"),F=t(P,"width"),I=t(P,"height");T&&(M<S&&(S=M),O<E&&(E=O)),T&&E!==0&&S!==0&&(M-=n.x,O-=n.y);var B=(h+M)/l,V=(d+O)/f,U=(h+M+F)/l,Y=(d+O+I)/f;if(g.chars[R]={x:M,y:O,width:F,height:I,centerX:Math.floor(F/2),centerY:Math.floor(I/2),xOffset:t(P,"xoffset"),yOffset:t(P,"yoffset"),xAdvance:t(P,"xadvance")+a,data:{},kerning:{},u0:B,v0:V,u1:U,v1:Y},r&&F!==0&&I!==0){var W=r.add(A,c,M,O,F,I);W&&W.setUVs(F,I,B,V,U,Y)}}var w=u.getElementsByTagName("kerning");for(C=0;C<w.length;C++){var L=w[C],D=t(L,"first"),N=t(L,"second"),G=t(L,"amount");g.chars[N].kerning[D]=G}return g};e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1049),u=t(440),n=t(0),a=t(11),o=t(109),r=t(15),h=t(110),d=new n({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,s],initialize:function(f,c,g,p,x){r.call(this,f,"Blitter"),this.setTexture(p,x),this.setPosition(c,g),this.initPipeline(),this.children=new h,this.renderList=[],this.dirty=!1},create:function(l,f,c,g,p){g===void 0&&(g=!0),p===void 0&&(p=this.children.length),c===void 0?c=this.frame:c instanceof o||(c=this.texture.get(c));var x=new u(this,l,f,c,g);return this.children.addAt(x,p,!1),this.dirty=!0,x},createFromCallback:function(l,f,c,g){for(var p=this.createMultiple(f,c,g),x=0;x<p.length;x++){var y=p[x];l.call(this,y,x)}return p},createMultiple:function(l,f,c){f===void 0&&(f=this.frame.name),c===void 0&&(c=!0),Array.isArray(f)||(f=[f]);var g=[],p=this;return f.forEach(function(x){for(var y=0;y<l;y++)g.push(p.create(0,0,x,c))}),g},childCanRender:function(l){return l.visible&&l.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(208),u=t(35),n=t(0),a=t(11),o=t(75),r=t(15),h=t(10),d=t(1052),l=t(441),f=t(3),c=new n({Extends:r,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.Pipeline,a.Transform,a.Visible,d],initialize:function(p,x,y,T){r.call(this,p,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this.tempTransformMatrix=new a.TransformMatrix,this._sortKey="",this._sysEvents=p.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(x,y),this.clearAlpha(),this.setBlendMode(u.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new h),g.setTo(this.x,this.y,0,0),this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix(),x=p.transformPoint(this.x,this.y);g.setTo(x.x,x.y,0,0)}if(this.list.length>0){var y=this.list,T=new h,E=!1;g.setEmpty();for(var S=0;S<y.length;S++){var C=y[S];C.getBounds&&(C.getBounds(T),E?l(T,g,g):(g.setTo(T.x,T.y,T.width,T.height),E=!0))}}return g},addHandler:function(g){g.once(o.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.removeFromDisplayList(),g.parentContainer=this)},removeHandler:function(g){g.off(o.DESTROY,this.remove),this.exclusive&&(g.parentContainer=null,g.addToDisplayList())},pointToContainer:function(g,p){p===void 0&&(p=new f),this.parentContainer?this.parentContainer.pointToContainer(g,p):p=new f(g.x,g.y);var x=this.tempTransformMatrix;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(g.x,g.y,p),p},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return s.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,p){return s.AddAt(this.list,g,p,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,p){return g?(p===void 0&&(p=function(x,y){return x[g]-y[g]}),s.StableSort(this.list,p),this):this},getByName:function(g){return s.GetFirst(this.list,"name",g)},getRandom:function(g,p){return s.GetRandom(this.list,g,p)},getFirst:function(g,p,x,y){return s.GetFirst(this.list,g,p,x,y)},getAll:function(g,p,x,y){return s.GetAll(this.list,g,p,x,y)},count:function(g,p,x,y){return s.CountAllMatching(this.list,g,p,x,y)},swap:function(g,p){return s.Swap(this.list,g,p),this},moveTo:function(g,p){return s.MoveTo(this.list,g,p),this},moveAbove:function(g,p){return s.MoveAbove(this.list,g,p),this},moveBelow:function(g,p){return s.MoveBelow(this.list,g,p),this},remove:function(g,p){var x=s.Remove(this.list,g,this.removeHandler,this);if(p&&x){Array.isArray(x)||(x=[x]);for(var y=0;y<x.length;y++)x[y].destroy()}return this},removeAt:function(g,p){var x=s.RemoveAt(this.list,g,this.removeHandler,this);return p&&x&&x.destroy(),this},removeBetween:function(g,p,x){var y=s.RemoveBetween(this.list,g,p,this.removeHandler,this);if(x)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(g){var p=s.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(g)for(var x=0;x<p.length;x++)p[x].destroy();return this},bringToTop:function(g){return s.BringToTop(this.list,g),this},sendToBack:function(g){return s.SendToBack(this.list,g),this},moveUp:function(g){return s.MoveUp(this.list,g),this},moveDown:function(g){return s.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(g,p,x){var y=s.Replace(this.list,g,p);return y&&(this.addHandler(p),this.removeHandler(g),x&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,p,x,y){return s.SetAll(this.list,g,p,x,y),this},each:function(g,p){var x=[null],y,T=this.list.slice(),E=T.length;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<E;y++)x[0]=T[y],g.apply(p,x);return this},iterate:function(g,p){var x=[null],y;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<this.list.length;y++)x[0]=this.list[y],g.apply(p,x);return this},setScrollFactor:function(g,p,x){return p===void 0&&(p=g),x===void 0&&(x=!1),this.scrollFactorX=g,this.scrollFactorY=p,x&&(s.SetAll(this.list,"scrollFactorX",g),s.SetAll(this.list,"scrollFactorY",p)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});e.exports=c},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(148),u=t(0),n=t(1057),a=new u({Extends:s,Mixins:[n],initialize:function(r,h,d,l,f,c,g){s.call(this,r,h,d,l,f,c,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(o,r){return this.cropWidth=o,this.cropHeight=r,this},setDisplayCallback:function(o){return this.displayCallback=o,this},setScrollX:function(o){return this.scrollX=o,this},setScrollY:function(o){return this.scrollY=o,this}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(133),u=t(0),n=t(217),a=t(303),o=t(304),r=t(305),h=t(309),d=t(167),l=t(312),f=t(313),c=t(314),g=t(111),p=t(15),x=t(2),y=t(6),T=t(14),E=t(1063),S=new u({Extends:p,Mixins:[a,o,r,h,d,f,c,l,E],initialize:function(P,R){var A=y(R,"x",0),M=y(R,"y",0);p.call(this,P,"Graphics"),this.setPosition(A,M),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(R)},setDefaultStyles:function(C){return y(C,"lineStyle",null)&&(this.defaultStrokeWidth=y(C,"lineStyle.width",1),this.defaultStrokeColor=y(C,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(C,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(C,"fillStyle",null)&&(this.defaultFillColor=y(C,"fillStyle.color",16777215),this.defaultFillAlpha=y(C,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(C,P,R){return R===void 0&&(R=1),this.commandBuffer.push(n.LINE_STYLE,C,P,R),this._lineWidth=C,this},fillStyle:function(C,P){return P===void 0&&(P=1),this.commandBuffer.push(n.FILL_STYLE,C,P),this},fillGradientStyle:function(C,P,R,A,M,O,F,I){return M===void 0&&(M=1),O===void 0&&(O=M),F===void 0&&(F=M),I===void 0&&(I=M),this.commandBuffer.push(n.GRADIENT_FILL_STYLE,M,O,F,I,C,P,R,A),this},lineGradientStyle:function(C,P,R,A,M,O){return O===void 0&&(O=1),this.commandBuffer.push(n.GRADIENT_LINE_STYLE,C,O,P,R,A,M),this},beginPath:function(){return this.commandBuffer.push(n.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(n.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(n.FILL_PATH),this},fill:function(){return this.commandBuffer.push(n.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(n.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(n.STROKE_PATH),this},fillCircleShape:function(C){return this.fillCircle(C.x,C.y,C.radius)},strokeCircleShape:function(C){return this.strokeCircle(C.x,C.y,C.radius)},fillCircle:function(C,P,R){return this.beginPath(),this.arc(C,P,R,0,T.PI2),this.fillPath(),this},strokeCircle:function(C,P,R){return this.beginPath(),this.arc(C,P,R,0,T.PI2),this.strokePath(),this},fillRectShape:function(C){return this.fillRect(C.x,C.y,C.width,C.height)},strokeRectShape:function(C){return this.strokeRect(C.x,C.y,C.width,C.height)},fillRect:function(C,P,R,A){return this.commandBuffer.push(n.FILL_RECT,C,P,R,A),this},strokeRect:function(C,P,R,A){var M=this._lineWidth/2,O=C-M,F=C+M;return this.beginPath(),this.moveTo(C,P),this.lineTo(C,P+A),this.strokePath(),this.beginPath(),this.moveTo(C+R,P),this.lineTo(C+R,P+A),this.strokePath(),this.beginPath(),this.moveTo(O,P),this.lineTo(F+R,P),this.strokePath(),this.beginPath(),this.moveTo(O,P+A),this.lineTo(F+R,P+A),this.strokePath(),this},fillRoundedRect:function(C,P,R,A,M){M===void 0&&(M=20);var O=M,F=M,I=M,B=M;return typeof M!="number"&&(O=x(M,"tl",20),F=x(M,"tr",20),I=x(M,"bl",20),B=x(M,"br",20)),this.beginPath(),this.moveTo(C+O,P),this.lineTo(C+R-F,P),this.arc(C+R-F,P+F,F,-T.TAU,0),this.lineTo(C+R,P+A-B),this.arc(C+R-B,P+A-B,B,0,T.TAU),this.lineTo(C+I,P+A),this.arc(C+I,P+A-I,I,T.TAU,Math.PI),this.lineTo(C,P+O),this.arc(C+O,P+O,O,-Math.PI,-T.TAU),this.fillPath(),this},strokeRoundedRect:function(C,P,R,A,M){M===void 0&&(M=20);var O=M,F=M,I=M,B=M;return typeof M!="number"&&(O=x(M,"tl",20),F=x(M,"tr",20),I=x(M,"bl",20),B=x(M,"br",20)),this.beginPath(),this.moveTo(C+O,P),this.lineTo(C+R-F,P),this.moveTo(C+R-F,P),this.arc(C+R-F,P+F,F,-T.TAU,0),this.lineTo(C+R,P+A-B),this.moveTo(C+R,P+A-B),this.arc(C+R-B,P+A-B,B,0,T.TAU),this.lineTo(C+I,P+A),this.moveTo(C+I,P+A),this.arc(C+I,P+A-I,I,T.TAU,Math.PI),this.lineTo(C,P+O),this.moveTo(C,P+O),this.arc(C+O,P+O,O,-Math.PI,-T.TAU),this.strokePath(),this},fillPointShape:function(C,P){return this.fillPoint(C.x,C.y,P)},fillPoint:function(C,P,R){return!R||R<1?R=1:(C-=R/2,P-=R/2),this.commandBuffer.push(n.FILL_RECT,C,P,R,R),this},fillTriangleShape:function(C){return this.fillTriangle(C.x1,C.y1,C.x2,C.y2,C.x3,C.y3)},strokeTriangleShape:function(C){return this.strokeTriangle(C.x1,C.y1,C.x2,C.y2,C.x3,C.y3)},fillTriangle:function(C,P,R,A,M,O){return this.commandBuffer.push(n.FILL_TRIANGLE,C,P,R,A,M,O),this},strokeTriangle:function(C,P,R,A,M,O){return this.commandBuffer.push(n.STROKE_TRIANGLE,C,P,R,A,M,O),this},strokeLineShape:function(C){return this.lineBetween(C.x1,C.y1,C.x2,C.y2)},lineBetween:function(C,P,R,A){return this.beginPath(),this.moveTo(C,P),this.lineTo(R,A),this.strokePath(),this},lineTo:function(C,P){return this.commandBuffer.push(n.LINE_TO,C,P),this},moveTo:function(C,P){return this.commandBuffer.push(n.MOVE_TO,C,P),this},strokePoints:function(C,P,R,A){P===void 0&&(P=!1),R===void 0&&(R=!1),A===void 0&&(A=C.length),this.beginPath(),this.moveTo(C[0].x,C[0].y);for(var M=1;M<A;M++)this.lineTo(C[M].x,C[M].y);return P&&this.lineTo(C[0].x,C[0].y),R&&this.closePath(),this.strokePath(),this},fillPoints:function(C,P,R,A){P===void 0&&(P=!1),R===void 0&&(R=!1),A===void 0&&(A=C.length),this.beginPath(),this.moveTo(C[0].x,C[0].y);for(var M=1;M<A;M++)this.lineTo(C[M].x,C[M].y);return P&&this.lineTo(C[0].x,C[0].y),R&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(C,P){P===void 0&&(P=32);var R=C.getPoints(P);return this.strokePoints(R,!0)},strokeEllipse:function(C,P,R,A,M){M===void 0&&(M=32);var O=new g(C,P,R,A),F=O.getPoints(M);return this.strokePoints(F,!0)},fillEllipseShape:function(C,P){P===void 0&&(P=32);var R=C.getPoints(P);return this.fillPoints(R,!0)},fillEllipse:function(C,P,R,A,M){M===void 0&&(M=32);var O=new g(C,P,R,A),F=O.getPoints(M);return this.fillPoints(F,!0)},arc:function(C,P,R,A,M,O,F){return O===void 0&&(O=!1),F===void 0&&(F=0),this.commandBuffer.push(n.ARC,C,P,R,A,M,O,F),this},slice:function(C,P,R,A,M,O,F){return O===void 0&&(O=!1),F===void 0&&(F=0),this.commandBuffer.push(n.BEGIN_PATH),this.commandBuffer.push(n.MOVE_TO,C,P),this.commandBuffer.push(n.ARC,C,P,R,A,M,O,F),this.commandBuffer.push(n.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(n.SAVE),this},restore:function(){return this.commandBuffer.push(n.RESTORE),this},translateCanvas:function(C,P){return this.commandBuffer.push(n.TRANSLATE,C,P),this},scaleCanvas:function(C,P){return this.commandBuffer.push(n.SCALE,C,P),this},rotateCanvas:function(C){return this.commandBuffer.push(n.ROTATE,C),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(C,P,R){var A=this.scene.sys,M=A.game.renderer;P===void 0&&(P=A.scale.width),R===void 0&&(R=A.scale.height),S.TargetCamera.setScene(this.scene),S.TargetCamera.setViewport(0,0,P,R),S.TargetCamera.scrollX=this.x,S.TargetCamera.scrollY=this.y;var O,F;if(typeof C=="string")if(A.textures.exists(C)){O=A.textures.get(C);var I=O.getSourceImage();I instanceof HTMLCanvasElement&&(F=I.getContext("2d"))}else O=A.textures.createCanvas(C,P,R),F=O.getSourceImage().getContext("2d");else C instanceof HTMLCanvasElement&&(F=C.getContext("2d"));return F&&(this.renderCanvas(M,this,S.TargetCamera,null,F,!1),O&&O.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});S.TargetCamera=new s,e.exports=S},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,o){o===void 0&&(o=new s);var r=n.width/2,h=n.height/2;return o.x=n.x+r*Math.cos(a),o.y=n.y+h*Math.sin(a),o};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(0),n=t(11),a=t(176),o=t(101),r=t(9),h=t(75),d=t(110),l=t(1071),f=t(20),c=t(79),g=new u({Extends:d,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Visible,r,l],initialize:function(x,y){d.call(this,x),r.call(this),this.scene=x,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=x.sys,this.events=x.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(s.SKIP_CHECK),y&&this.add(y),x.sys.queueDepthSort()},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},setState:function(p){return this.state=p,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(p,x){return this.data||(this.data=new o(this)),this.data.set(p,x),this},incData:function(p,x){return this.data||(this.data=new o(this)),this.data.inc(p,x),this},toggleData:function(p){return this.data||(this.data=new o(this)),this.data.toggle(p),this},getData:function(p){return this.data||(this.data=new o(this)),this.data.get(p)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(p){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&p.id)},getIndexList:function(){for(var p=this,x=this.parentContainer,y=[];x&&(y.unshift(x.getIndex(p)),p=x,x.parentContainer);)x=x.parentContainer;return y.unshift(this.displayList.getIndex(p)),y},addChildCallback:function(p){p.displayList&&p.displayList!==this&&p.removeFromDisplayList(),p.displayList||(this.queueDepthSort(),p.displayList=this,p.emit(h.ADDED_TO_SCENE,p,this.scene),this.events.emit(f.ADDED_TO_SCENE,p,this.scene))},removeChildCallback:function(p){this.queueDepthSort(),p.displayList=null,p.emit(h.REMOVED_FROM_SCENE,p,this.scene),this.events.emit(f.REMOVED_FROM_SCENE,p,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(c(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(p,x){return p._depth-x._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(h.DESTROY,this);for(var p=this.list.length;p--;)this.list[p].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});e.exports=g},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(450),o=t(110),r=t(452),h=t(1075),d=new s({Extends:n,Mixins:[u.Depth,u.Mask,u.Pipeline,u.Transform,u.Visible,h],initialize:function(f,c,g,p){if(n.call(this,f,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],g!==null&&(typeof g=="object"||Array.isArray(g))&&(p=g,g=null),this.setTexture(c,g),this.initPipeline(),this.emitters=new o(this),this.wells=new o(this),p){Array.isArray(p)||(p=[p]);for(var x=0;x<p.length;x++)this.createEmitter(p[x])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(l,f){return this.texture=this.scene.sys.textures.get(l),this.setFrame(f)},setFrame:function(l){this.frame=this.texture.get(l);var f=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),c=[];return f.forEach(function(g){c.push(g.name)}),this.frameNames=c,this.defaultFrame=this.frame,this},setEmitterFrames:function(l,f){Array.isArray(l)||(l=[l]);var c=f.frames;c.length=0;for(var g=0;g<l.length;g++){var p=l[g];this.frameNames.indexOf(p)!==-1&&c.push(this.texture.get(p))}return c.length>0?f.defaultFrame=c[0]:f.defaultFrame=this.defaultFrame,this},addEmitter:function(l){return this.emitters.add(l)},createEmitter:function(l){return this.addEmitter(new r(this,l))},removeEmitter:function(l){return this.emitters.remove(l,!0)},addGravityWell:function(l){return this.wells.add(l)},createGravityWell:function(l){return this.addGravityWell(new a(l))},emitParticle:function(l,f,c){for(var g=this.emitters.list,p=0;p<g.length;p++){var x=g[p];x.active&&x.emitParticle(l,f,c)}return this},emitParticleAt:function(l,f,c){return this.emitParticle(c,l,f)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(l,f){f*=this.timeScale;for(var c=this.emitters.list,g=0;g<c.length;g++){var p=c[g];p.active&&p.preUpdate(l,f)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(133),n=t(31),a=t(0),o=t(11),r=t(33),h=t(109),d=t(15),l=t(1),f=t(92),c=t(1079),g=t(141),p=t(12),x=t(222),y=new a({Extends:d,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,c],initialize:function(E,S,C,P,R,A,M){S===void 0&&(S=0),C===void 0&&(C=0),P===void 0&&(P=32),R===void 0&&(R=32),d.call(this,E,"RenderTexture"),this.renderer=E.sys.renderer,this.textureManager=E.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,A===void 0?(this.canvas=n.create2D(this,P,R),this.texture=E.sys.textures.addCanvas(x(),this.canvas),this.frame=this.texture.get()):(this.texture=E.sys.textures.get(A),this.frame=this.texture.get(M),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new u(0,0,P,R),this.renderTarget=null;var O=this.renderer;O?O.type===r.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new g(O,P,R,1,0,!1)):O.type===r.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=l,this.camera.setScene(E),this.setPosition(S,C),A===void 0&&this.setSize(P,R),this.setOrigin(0,0),this.initPipeline(f.SINGLE_PIPELINE)},setSize:function(T,E){return this.resize(T,E)},resize:function(T,E){E===void 0&&(E=T);var S=this.frame;if(T!==this.width||E!==this.height){if(S.name==="__BASE"){this.canvas.width=T,this.canvas.height=E,this.texture.width=T,this.texture.height=E;var C=this.renderTarget;C&&(C.resize(T,E),S.glTexture=C.texture,S.source.isRenderTexture=!0,S.source.isGLTexture=!0,S.source.glTexture=C.texture),this.camera.setSize(T,E),S.source.width=T,S.source.height=E,S.setSize(T,E),this.width=T,this.height=E}}else{var P=this.texture.getSourceImage();S.cutX+T>P.width&&(T=P.width-S.cutX),S.cutY+E>P.height&&(E=P.height-S.cutY),S.setSize(T,E,S.cutX,S.cutY)}this.updateDisplayOrigin();var R=this.input;return R&&!R.customHitArea&&(R.hitArea.width=T,R.hitArea.height=E),this},setGlobalTint:function(T){return this.globalTint=T,this},setGlobalAlpha:function(T){return this.globalAlpha=T,this},saveTexture:function(T){return this.textureManager.renameTexture(this.texture.key,T),this._saved=!0,this.texture},fill:function(T,E,S,C,P,R){var A=this.frame,M=this.camera,O=this.renderer;E===void 0&&(E=1),S===void 0&&(S=0),C===void 0&&(C=0),P===void 0&&(P=A.cutWidth),R===void 0&&(R=A.cutHeight);var F=(T>>16&255)/255,I=(T>>8&255)/255,B=(T&255)/255,V=this.renderTarget;if(M.preRender(),V){V.bind(!0);var U=this.pipeline;U.manager.set(U);var Y=V.width,W=V.height,w=O.width,L=O.height,D=w/Y,N=L/W;U.drawFillRect(S*D,C*N,P*D,R*N,p.getTintFromFloats(B,I,F,1),E),V.unbind(!0)}else{var G=this.context;O.setContext(G),G.fillStyle="rgba("+F+","+I+","+B+","+E+")",G.fillRect(S+A.cutX,C+A.cutY,P,R),O.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.renderTarget;if(T)T.clear();else{var E=this.context;E.save(),E.setTransform(1,0,0,1,0,0),E.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),E.restore()}this.dirty=!1}return this},erase:function(T,E,S){return this._eraseMode=!0,this.draw(T,E,S,1,16777215),this._eraseMode=!1,this},draw:function(T,E,S,C,P){return this.beginDraw(),this.batchDraw(T,E,S,C,P),this.endDraw(),this},drawFrame:function(T,E,S,C,P,R){return this.beginDraw(),this.batchDrawFrame(T,E,S,C,P,R),this.endDraw(),this},beginDraw:function(){var T=this.camera,E=this.renderer,S=this.renderTarget;return T.preRender(),S?E.beginCapture(S.width,S.height):E.setContext(this.context),this},batchDraw:function(T,E,S,C,P){return C===void 0&&(C=this.globalAlpha),P===void 0?P=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):P=(P>>16)+(P&65280)+((P&255)<<16),Array.isArray(T)||(T=[T]),this.batchList(T,E,S,C,P),this},batchDrawFrame:function(T,E,S,C,P,R){S===void 0&&(S=0),C===void 0&&(C=0),P===void 0&&(P=this.globalAlpha),R===void 0?R=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):R=(R>>16)+(R&65280)+((R&255)<<16);var A=this.textureManager.getFrame(T,E);return A&&(this.renderTarget?this.pipeline.batchTextureFrame(A,S,C,R,P,this.camera.matrix,null):this.batchTextureFrame(A,S+this.frame.cutX,C+this.frame.cutY,P,R)),this},endDraw:function(T){T===void 0&&(T=this._eraseMode);var E=this.renderer,S=this.renderTarget;if(S){var C=E.endCapture(),P=E.pipelines.setUtility();P.blitFrame(C,S,1,!1,!1,T),E.resetScissor(),E.resetViewport()}else E.setContext();return this.dirty=!0,this},batchList:function(T,E,S,C,P){for(var R=0;R<T.length;R++){var A=T[R];!A||A===this||(A.renderWebGL||A.renderCanvas?this.drawGameObject(A,E,S):A.isParent||A.list?this.batchGroup(A.getChildren(),E,S):typeof A=="string"?this.batchTextureFrameKey(A,null,E,S,C,P):A instanceof h?this.batchTextureFrame(A,E,S,C,P):Array.isArray(A)&&this.batchList(A,E,S,C,P))}},batchGroup:function(T,E,S){E===void 0&&(E=0),S===void 0&&(S=0),E+=this.frame.cutX,S+=this.frame.cutY;for(var C=0;C<T.length;C++){var P=T[C];if(P.willRender(this.camera)){var R=P.x+E,A=P.y+S;this.drawGameObject(P,R,A)}}},batchGameObjectWebGL:function(T,E,S){E===void 0&&(E=T.x),S===void 0&&(S=T.y);var C=T.x,P=T.y;T.setPosition(E+this.frame.cutX,S+this.frame.cutY),T.renderDirect?T.renderDirect(this.renderer,T,this.camera):T.renderWebGL(this.renderer,T,this.camera),T.setPosition(C,P)},batchGameObjectCanvas:function(T,E,S){E===void 0&&(E=T.x),S===void 0&&(S=T.y);var C=T.x,P=T.y;if(this._eraseMode){var R=T.blendMode;T.blendMode=s.ERASE}T.setPosition(E+this.frame.cutX,S+this.frame.cutY),T.renderCanvas(this.renderer,T,this.camera,null),T.setPosition(C,P),this._eraseMode&&(T.blendMode=R)},batchTextureFrameKey:function(T,E,S,C,P,R){var A=this.textureManager.getFrame(T,E);A&&this.batchTextureFrame(A,S,C,P,R)},batchTextureFrame:function(T,E,S,C,P){E===void 0&&(E=0),S===void 0&&(S=0),E+=this.frame.cutX,S+=this.frame.cutY;var R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(T,E,S,P,C,this.camera.matrix,null);else{var A=this.context,M=T.canvasData,O=T.source.image,F=this.camera.matrix;A.save(),A.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",A.globalAlpha=C,F.setToContext(A),A.drawImage(O,M.x,M.y,M.width,M.height,E,S,M.width,M.height),A.restore()}},snapshotArea:function(T,E,S,C,P,R,A){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,P,!1,T,E,S,C,R,A):this.renderer.snapshotCanvas(this.canvas,P,!1,T,E,S,C,R,A),this},snapshot:function(T,E,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,0,0,this.width,this.height,E,S):this.renderer.snapshotCanvas(this.canvas,T,!1,0,0,this.width,this.height,E,S),this},snapshotPixel:function(T,E,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!0,T,E):this.renderer.snapshotCanvas(this.canvas,S,!0,T,E),this},preDestroy:function(){this._saved||(n.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});e.exports=y},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var u=Math.random()*16|0,n=s==="x"?u:u&3|8;return n.toString(16)})};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(164),u=t(0),n=t(11),a=t(15),o=t(92),r=t(1085),h=t(3),d=new u({Extends:a,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Flip,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,r],initialize:function(f,c,g,p,x,y,T,E,S){p===void 0&&(p="__DEFAULT"),y===void 0&&(y=2),T===void 0&&(T=!0),a.call(this,f,"Rope"),this.anims=new s(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=p==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new h,this.debugCallback=null,this.debugGraphic=null,this.setTexture(p,x),this.setPosition(c,g),this.setSizeToFrame(),this.initPipeline(o.ROPE_PIPELINE),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,E,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(l,f){var c=this.anims.currentFrame;this.anims.update(l,f),this.anims.currentFrame!==c&&(this.updateUVs(),this.updateVertices())},play:function(l,f,c){return this.anims.play(l,f,c),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(l,f,c){return l===void 0&&(l=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(l,f,c))},setVertical:function(l,f,c){return l===void 0&&(l=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(l,f,c)):this},setTintFill:function(l){return l===void 0&&(l=!1),this.tintFill=l,this},setAlphas:function(l,f){var c=this.points.length;if(c<1)return this;var g=this.alphas;l===void 0?l=[1]:!Array.isArray(l)&&f===void 0&&(l=[l]);var p,x=0;if(f!==void 0)for(p=0;p<c;p++)x=p*2,g[x]=l,g[x+1]=f;else if(l.length===c)for(p=0;p<c;p++)x=p*2,g[x]=l[p],g[x+1]=l[p];else{var y=l[0];for(p=0;p<c;p++)x=p*2,l.length>x&&(y=l[x]),g[x]=y,l.length>x+1&&(y=l[x+1]),g[x+1]=y}return this},setColors:function(l){var f=this.points.length;if(f<1)return this;var c=this.colors;l===void 0?l=[16777215]:Array.isArray(l)||(l=[l]);var g,p=0;if(l.length===f)for(g=0;g<f;g++)p=g*2,c[p]=l[g],c[p+1]=l[g];else{var x=l[0];for(g=0;g<f;g++)p=g*2,l.length>p&&(x=l[p]),c[p]=x,l.length>p+1&&(x=l[p+1]),c[p+1]=x}return this},setPoints:function(l,f,c){if(l===void 0&&(l=2),typeof l=="number"){var g=l;g<2&&(g=2),l=[];var p,x,y;if(this.horizontal)for(y=-this.frame.halfWidth,x=this.frame.width/(g-1),p=0;p<g;p++)l.push({x:y+p*x,y:0});else for(y=-this.frame.halfHeight,x=this.frame.height/(g-1),p=0;p<g;p++)l.push({x:0,y:y+p*x})}var T=l.length,E=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(l.unshift({x:0,y:0}),T++),E!==T&&this.resizeArrays(T),this.points=l,this.updateUVs(),f!=null&&this.setColors(f),c!=null&&this.setAlphas(c),this)},updateUVs:function(){for(var l=this.uv,f=this.points.length,c=this.frame.u0,g=this.frame.v0,p=this.frame.u1,x=this.frame.v1,y=(p-c)/(f-1),T=(x-g)/(f-1),E=0;E<f;E++){var S=E*4,C,P,R,A;this.horizontal?(this._flipX?(C=p-E*y,R=p-E*y):(C=c+E*y,R=c+E*y),this._flipY?(P=x,A=g):(P=g,A=x)):(this._flipX?(C=c,R=p):(C=p,R=c),this._flipY?(P=x-E*T,A=x-E*T):(P=g+E*T,A=g+E*T)),l[S+0]=C,l[S+1]=P,l[S+2]=R,l[S+3]=A}return this},resizeArrays:function(l){var f=this.colors,c=this.alphas;this.vertices=new Float32Array(l*4),this.uv=new Float32Array(l*4),f=new Uint32Array(l*2),c=new Float32Array(l*2);for(var g=0;g<l*2;g++)f[g]=16777215,c[g]=1;return this.colors=f,this.alphas=c,this.dirty=!0,this},updateVertices:function(){var l=this._perp,f=this.points,c=this.vertices,g=f.length;if(this.dirty=!1,!(g<1)){for(var p,x=f[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<g;T++){var E=f[T],S=T*4;T<g-1?p=f[T+1]:p=E,l.x=p.y-x.y,l.y=-(p.x-x.x);var C=l.length();l.x/=C,l.y/=C,l.x*=y,l.y*=y,c[S]=E.x+l.x,c[S+1]=E.y+l.y,c[S+2]=E.x-l.x,c[S+3]=E.y-l.y,x=E}return this}},setDebug:function(l,f){return this.debugGraphic=l,!l&&!f?this.debugCallback=null:f?this.debugCallback=f:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(l,f,c){var g=l.debugGraphic,p=c[0],x=c[1],y=c[2],T=c[3];g.lineBetween(p,x,y,T);for(var E=4;E<f;E+=4){var S=c[E+0],C=c[E+1],P=c[E+2],R=c[E+3];g.lineBetween(p,x,S,C),g.lineBetween(y,T,P,R),g.lineBetween(y,T,S,C),g.lineBetween(S,C,P,R),p=S,x=C,y=P,T=R}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(l){return this._flipX=l,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(l){return this._flipY=l,this.updateUVs()}}});e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(142),u=t(31),n=t(0),a=t(11),o=t(22),r=t(15),h=t(458),d=t(6),l=t(202),f=t(1088),c=t(459),g=new n({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,f],initialize:function(x,y,T,E,S){y===void 0&&(y=0),T===void 0&&(T=0),r.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.canvas=u.create(this),this.context=this.canvas.getContext("2d"),this.style=new c(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(E),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),x.sys.game.events.on(o.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(p){var x=this.style;if(x.wordWrapCallback){var y=x.wordWrapCallback.call(x.wordWrapCallbackScope,p,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(p,this.context,this.style.wordWrapWidth):this.basicWordWrap(p,this.context,this.style.wordWrapWidth):p},advancedWordWrap:function(p,x,y){for(var T="",E=p.replace(/ +/gi," ").split(this.splitRegExp),S=E.length,C=0;C<S;C++){var P=E[C],R="";P=P.replace(/^ *|\s*$/gi,"");var A=x.measureText(P).width;if(A<y){T+=P+`
`;continue}for(var M=y,O=P.split(" "),F=0;F<O.length;F++){var I=O[F],B=I+" ",V=x.measureText(B).width;if(V>M){if(F===0){for(var U=B;U.length&&(U=U.slice(0,-1),V=x.measureText(U).width,!(V<=M)););if(!U.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var Y=I.substr(U.length);O[F]=Y,R+=U}var W=O[F].length?F:F+1,w=O.slice(W).join(" ").replace(/[ \n]*$/gi,"");E[C+1]=w+" "+(E[C+1]||""),S=E.length;break}else R+=B,M-=V}T+=R.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(p,x,y){for(var T="",E=p.split(this.splitRegExp),S=E.length-1,C=x.measureText(" ").width,P=0;P<=S;P++){for(var R=y,A=E[P].split(" "),M=A.length-1,O=0;O<=M;O++){var F=A[O],I=x.measureText(F).width,B=I;O<M&&(B+=C),B>R&&O>0&&(T+=`
`,R=y),T+=F,O<M?(T+=" ",R-=B):R-=I}P<S&&(T+=`
`)}return T},getWrappedText:function(p){p===void 0&&(p=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(p);return x.split(this.splitRegExp)},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this._text&&(this._text=p.toString(),this.updateText()),this},setStyle:function(p){return this.style.setStyle(p)},setFont:function(p){return this.style.setFont(p)},setFontFamily:function(p){return this.style.setFontFamily(p)},setFontSize:function(p){return this.style.setFontSize(p)},setFontStyle:function(p){return this.style.setFontStyle(p)},setFixedSize:function(p,x){return this.style.setFixedSize(p,x)},setBackgroundColor:function(p){return this.style.setBackgroundColor(p)},setFill:function(p){return this.style.setFill(p)},setColor:function(p){return this.style.setColor(p)},setStroke:function(p,x){return this.style.setStroke(p,x)},setShadow:function(p,x,y,T,E,S){return this.style.setShadow(p,x,y,T,E,S)},setShadowOffset:function(p,x){return this.style.setShadowOffset(p,x)},setShadowColor:function(p){return this.style.setShadowColor(p)},setShadowBlur:function(p){return this.style.setShadowBlur(p)},setShadowStroke:function(p){return this.style.setShadowStroke(p)},setShadowFill:function(p){return this.style.setShadowFill(p)},setWordWrapWidth:function(p,x){return this.style.setWordWrapWidth(p,x)},setWordWrapCallback:function(p,x){return this.style.setWordWrapCallback(p,x)},setAlign:function(p){return this.style.setAlign(p)},setResolution:function(p){return this.style.setResolution(p)},setLineSpacing:function(p){return this.lineSpacing=p,this.updateText()},setPadding:function(p,x,y,T){if(typeof p=="object"){var E=p,S=d(E,"x",null);S!==null?(p=S,y=S):(p=d(E,"left",0),y=d(E,"right",p));var C=d(E,"y",null);C!==null?(x=C,T=C):(x=d(E,"top",0),T=d(E,"bottom",x))}else p===void 0&&(p=0),x===void 0&&(x=p),y===void 0&&(y=p),T===void 0&&(T=x);return this.padding.left=p,this.padding.top=x,this.padding.right=y,this.padding.bottom=T,this.updateText()},setMaxLines:function(p){return this.style.setMaxLines(p)},updateText:function(){var p=this.canvas,x=this.context,y=this.style,T=y.resolution,E=y.metrics;y.syncFont(p,x);var S=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(S=this.runWordWrap(this._text));var C=S.split(this.splitRegExp),P=h(this,E,C),R=this.padding,A;y.fixedWidth===0?(this.width=P.width+R.left+R.right,A=P.width):(this.width=y.fixedWidth,A=this.width-R.left-R.right,A<P.width&&(A=P.width)),y.fixedHeight===0?this.height=P.height+R.top+R.bottom:this.height=y.fixedHeight;var M=this.width,O=this.height;this.updateDisplayOrigin(),M*=T,O*=T,M=Math.max(M,1),O=Math.max(O,1),p.width!==M||p.height!==O?(p.width=M,p.height=O,this.frame.setSize(M,O),y.syncFont(p,x)):x.clearRect(0,0,M,O),x.save(),x.scale(T,T),y.backgroundColor&&(x.fillStyle=y.backgroundColor,x.fillRect(0,0,M,O)),y.syncStyle(p,x),x.textBaseline="alphabetic",x.translate(R.left,R.top);for(var F,I,B=0;B<P.lines;B++){if(F=y.strokeThickness/2,I=y.strokeThickness/2+B*P.lineHeight+E.ascent,B>0&&(I+=P.lineSpacing*B),y.rtl)F=M-F;else if(y.align==="right")F+=A-P.lineWidths[B];else if(y.align==="center")F+=(A-P.lineWidths[B])/2;else if(y.align==="justify"){var V=.85;if(P.lineWidths[B]/P.width>=V){var U=P.width-P.lineWidths[B],Y=x.measureText(" ").width,W=C[B].trim(),w=W.split(" ");U+=(C[B].length-W.length)*Y;for(var L=Math.floor(U/Y),D=0;L>0;)w[D]+=" ",D=(D+1)%(w.length-1||1),--L;C[B]=w.join(" ")}}this.autoRound&&(F=Math.round(F),I=Math.round(I)),y.strokeThickness&&(this.style.syncShadow(x,y.shadowStroke),x.strokeText(C[B],F,I)),y.color&&(this.style.syncShadow(x,y.shadowFill),x.fillText(C[B],F,I))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(p,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var N=this.input;return N&&!N.customHitArea&&(N.hitArea.width=this.width,N.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(p){this.setText(p)}},toJSON:function(){var p=a.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return p.data=x,p},preDestroy:function(){this.style.rtl&&l(this.canvas),u.remove(this.canvas),this.texture.destroy()}});e.exports=g},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(0),n=t(11),a=t(22),o=t(15),r=t(361),h=t(192),d=t(1091),l=t(3),f=8,c=new u({Extends:o,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,d],initialize:function(p,x,y,T,E,S,C){var P=p.sys.renderer;o.call(this,p,"TileSprite");var R=p.sys.textures.get(S),A=R.get(C);!T||!E?(T=A.width,E=A.height):(T=Math.floor(T),E=Math.floor(E)),this._tilePosition=new l,this._tileScale=new l(1,1),this.dirty=!1,this.renderer=P,this.canvas=s.create(this,T,E),this.context=this.canvas.getContext("2d"),this.displayTexture=R,this.displayFrame=A,this._crop=this.resetCropObject(),this.texture=p.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=r(A.width),this.potHeight=r(A.height),this.fillCanvas=s.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(x,y),this.setSize(T,E),this.setFrame(C),this.setOriginFromFrame(),this.initPipeline(),p.sys.game.events.on(a.CONTEXT_RESTORED,function(M){if(!!M){var O=M.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=M.createTexture2D(0,O.LINEAR,O.LINEAR,O.REPEAT,O.REPEAT,O.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(g,p){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(p)},setFrame:function(g){var p=this.displayTexture.get(g);return this.potWidth=r(p.width),this.potHeight=r(p.height),this.canvas.width=0,!p.cutWidth||!p.cutHeight?this.renderFlags&=~f:this.renderFlags|=f,this.displayFrame=p,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,p){return g!==void 0&&(this.tilePositionX=g),p!==void 0&&(this.tilePositionY=p),this},setTileScale:function(g,p){return g===void 0&&(g=this.tileScaleX),p===void 0&&(p=g),this.tileScaleX=g,this.tileScaleY=p,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var p=this.fillContext,x=this.fillCanvas,y=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=g.cutWidth,T=g.cutHeight),p.clearRect(0,0,y,T),x.width=y,x.height=T,p.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,y,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=p.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var p=this.context;this.scene.sys.game.config.antialias||h.disable(p);var x=this._tileScale.x,y=this._tileScale.y,T=this._tilePosition.x,E=this._tilePosition.y;p.clearRect(0,0,this.width,this.height),p.save(),p.scale(x,y),p.translate(-T,-E),p.fillStyle=this.fillPattern,p.fillRect(T,E,this.width/x,this.height/y),p.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),s.remove(this.canvas),s.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});e.exports=c},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(11),a=t(75),o=t(22),r=t(51),h=t(15),d=t(70),l=t(222),f=t(1094),c=t(14),g=new s({Extends:h,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,f],initialize:function(x,y,T,E){h.call(this,x,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=l(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=c.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(y,T),this.initPipeline(),E&&this.changeSource(E,!1);var S=x.sys.game.events;S.on(o.PAUSE,this.globalPause,this),S.on(o.RESUME,this.globalResume,this);var C=x.sys.sound;C&&C.on(d.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(p,x,y){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var T=this.video;if(!T)return console.warn("Video not loaded"),this;p===void 0&&(p=T.loop);var E=this.scene.sys.sound;E&&E.mute&&this.setMute(!0),isNaN(x)||(this._markerIn=x),!isNaN(y)&&y>x&&(this._markerOut=y),T.loop=p;var S=this._callbacks,C=T.play();return C!==void 0?C.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(T.addEventListener("playing",S.play,!0),T.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),T.addEventListener("ended",S.end,!0),T.addEventListener("timeupdate",S.time,!0),T.addEventListener("seeking",S.seeking,!0),T.addEventListener("seeked",S.seeked,!0),this},changeSource:function(p,x,y,T,E){x===void 0&&(x=!0);var S=this.video;S&&this.stop();var C=this.scene.sys.cache.video.get(p);return C?(this.video=C,this._cacheKey=p,this._codePaused=C.paused,this._codeMuted=C.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,C,C.videoWidth,C.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,C.videoWidth,C.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,C.videoWidth,C.videoHeight)):this.updateTexture(),C.currentTime=0,this._lastUpdate=0,x&&this.play(y,T,E)):this.video=null,this},addMarker:function(p,x,y){return!isNaN(x)&&x>=0&&!isNaN(y)&&(this.markers[p]=[x,y]),this},playMarker:function(p,x){var y=this.markers[p];return y&&this.play(x,y[0],y[1]),this},removeMarker:function(p){return delete this.markers[p],this},snapshot:function(p,x){return p===void 0&&(p=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,p,x)},snapshotArea:function(p,x,y,T,E,S){p===void 0&&(p=0),x===void 0&&(x=0),y===void 0&&(y=this.width),T===void 0&&(T=this.height),E===void 0&&(E=y),S===void 0&&(S=T);var C=this.video,P=this.snapshotTexture;return P?(P.setSize(E,S),C&&P.context.drawImage(C,p,x,y,T,0,0,E,S)):(P=this.scene.sys.textures.createCanvas(l(),E,S),this.snapshotTexture=P,C&&P.context.drawImage(C,p,x,y,T,0,0,E,S)),P.update()},saveSnapshotTexture:function(p){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,p):this.snapshotTexture=this.scene.sys.textures.createCanvas(p,this.width,this.height),this.snapshotTexture},loadURL:function(p,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");return T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0),T.src=p,T.load(),this.video=T,this},loadMediaStream:function(p,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0);try{T.srcObject=p}catch{T.src=window.URL.createObjectURL(p)}return T.load(),this.video=T,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(p){this.scene.sys.input.once(r.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(a.VIDEO_ERROR,this,p)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(a.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(p){this.stop(),this.emit(a.VIDEO_ERROR,this,p)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(a.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(a.VIDEO_PLAY,this)},completeHandler:function(){this.emit(a.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(a.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var p=this.video;if(p){var x=p.currentTime;x!==this._lastUpdate&&(this._lastUpdate=x,this.updateTexture(),x>=this._markerOut&&(p.loop?(p.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=x,this.emit(a.VIDEO_LOOP,this)):(this.emit(a.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(a.VIDEO_TIMEOUT,this))},updateTexture:function(){var p=this.video,x=p.videoWidth,y=p.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,p,x,y),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,x,y),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(a.VIDEO_CREATED,this,x,y);else{var T=this.videoTextureSource;T.source!==p&&(T.source=p,T.width=x,T.height=y),T.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(p){var x=this.video;if(x){var y=x.duration;if(y!==1/0&&!isNaN(y)){var T=y*p;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(p){var x=this.video;if(x){if(typeof p=="string"){var y=p[0],T=parseFloat(p.substr(1));y==="+"?p=x.currentTime+T:y==="-"&&(p=x.currentTime-T)}x.currentTime=p,this._lastUpdate=p}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(a.VIDEO_SEEKED,this);var p=this.video;p&&this.updateTexture()},getProgress:function(){var p=this.video;if(p){var x=p.currentTime,y=p.duration;if(y!==1/0&&!isNaN(y))return x/y}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(p){p===void 0&&(p=!0),this._codeMuted=p;var x=this.video;return x&&(x.muted=this._systemMuted?!0:p),this},isMuted:function(){return this._codeMuted},globalMute:function(p,x){this._systemMuted=x;var y=this.video;y&&(y.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(p){p===void 0&&(p=!0);var x=this.video;return this._codePaused=p,x&&(p?x.paused||x.pause():p||x.paused&&!this._systemPaused&&x.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(p){return p===void 0&&(p=1),this.video&&(this.video.volume=u(p,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(p){return this.video&&(this.video.playbackRate=p),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(p){return p===void 0&&(p=!0),this.video&&(this.video.loop=p),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(p,x){return x===void 0&&(x=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,p),this._key=p,this.flipY=x,this.videoTextureSource&&this.videoTextureSource.setFlipY(x),this.videoTexture},stop:function(){var p=this.video;if(p){var x=this._callbacks;for(var y in x)p.removeEventListener(y,x[y],!0);p.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var p=this.video;if(!!p){for(p.parentNode&&p.parentNode.removeChild(p);p.hasChildNodes();)p.removeChild(p.firstChild);p.removeAttribute("autoplay"),p.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var p=this.scene.sys.game.events;p.off(o.PAUSE,this.globalPause,this),p.off(o.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(d.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});e.exports=g},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(228),n=t(470),a=t(56),o=new s({initialize:function(h){this.type=a.POLYGON,this.area=0,this.points=[],h&&this.setTo(h)},contains:function(r,h){return u(this,r,h)},setTo:function(r){if(this.area=0,this.points=[],typeof r=="string"&&(r=r.split(" ")),!Array.isArray(r))return this;for(var h,d=Number.MAX_VALUE,l=0;l<r.length;l++)h={x:0,y:0},typeof r[l]=="number"||typeof r[l]=="string"?(h.x=parseFloat(r[l]),h.y=parseFloat(r[l+1]),l++):Array.isArray(r[l])?(h.x=r[l][0],h.y=r[l][1]):(h.x=r[l].x,h.y=r[l].y),this.points.push(h),h.y<d&&(d=h.y);return this.calculateArea(d),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r=0,h,d,l=0;l<this.points.length-1;l++)h=this.points[l],d=this.points[l+1],r+=(d.x-h.x)*(h.y+d.y);return h=this.points[0],d=this.points[this.points.length-1],r+=(h.x-d.x)*(d.y+h.y),this.area=-r*.5,this.area},getPoints:function(r,h,d){return n(this,r,h,d)}});e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var a=!1,o=-1,r=s.points.length-1;++o<s.points.length;r=o){var h=s.points[o].x,d=s.points[o].y,l=s.points[r].x,f=s.points[r].y;(d<=n&&n<f||f<=n&&n<d)&&u<(l-h)*(n-d)/(f-d)+h&&(a=!a)}return a};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(2),o=t(17),r=t(478),h=t(1176),d=t(25),l=new s({Extends:n,Mixins:[u.ComputedSize,u.Depth,u.GetBounds,u.Mask,u.Origin,u.ScrollFactor,u.Transform,u.Visible,h],initialize:function(c,g,p,x,y,T,E,S){p===void 0&&(p=0),x===void 0&&(x=0),y===void 0&&(y=128),T===void 0&&(T=128),n.call(this,c,"Shader"),this.blendMode=-1,this.shader;var C=c.sys.renderer;this.renderer=C,this.gl=C.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=C.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=C.width,this._rendererHeight=C.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(p,x),this.setSize(y,T),this.setOrigin(.5,.5),this.setShader(g,E,S)},willRender:function(f){return this.renderToTexture?!0:!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},setRenderToTexture:function(f,c){if(c===void 0&&(c=!1),!this.renderToTexture){var g=this.width,p=this.height,x=this.renderer;this.glTexture=x.createTextureFromSource(null,g,p,0),this.glTexture.flipY=c,this.framebuffer=x.createFramebuffer(g,p,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=p,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),f&&(this.texture=this.scene.sys.textures.addGLTexture(f,this.glTexture,g,p))}return this.shader&&(x.pipelines.clear(),this.load(),this.flush(),x.pipelines.rebind()),this},setShader:function(f,c,g){if(c===void 0&&(c=[]),typeof f=="string"){var p=this.scene.sys.cache.shader;if(!p.has(f))return console.warn("Shader missing: "+f),this;this.shader=p.get(f)}else this.shader=f;var x=this.gl,y=this.renderer;this.program&&x.deleteProgram(this.program);var T=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);x.uniformMatrix4fv(x.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),x.uniformMatrix4fv(x.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),x.uniform2f(x.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var E=new Date,S={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[E.getFullYear(),E.getMonth(),E.getDate(),E.getHours()*60*60+E.getMinutes()*60+E.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=o(!0,{},this.shader.uniforms,S):this.uniforms=S;for(var C=0;C<4;C++)c[C]&&this.setSampler2D("iChannel"+C,c[C],C,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(f){return this.pointer=f,this},projOrtho:function(f,c,g,p){var x=-1e3,y=1e3,T=1/(f-c),E=1/(g-p),S=1/(x-y),C=this.projectionMatrix;C[0]=-2*T,C[5]=-2*E,C[10]=2*S,C[12]=(f+c)*T,C[13]=(p+g)*E,C[14]=(y+x)*S;var P=this.program,R=this.gl,A=this.renderer;A.setProgram(P),R.uniformMatrix4fv(R.getUniformLocation(P,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=c,this._rendererHeight=g},initUniforms:function(){var f=this.gl,c=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var p in this.uniforms){var x=this.uniforms[p],y=x.type,T=c[y];x.uniformLocation=f.getUniformLocation(g,p),y!=="sampler2D"&&(x.glMatrix=T.matrix,x.glValueLength=T.length,x.glFunc=T.func)}},setSampler2DBuffer:function(f,c,g,p,x,y){x===void 0&&(x=0),y===void 0&&(y={});var T=this.uniforms[f];return T.value=c,y.width=g,y.height=p,T.textureData=y,this._textureCount=x,this.initSampler2D(T),this},setSampler2D:function(f,c,g,p){g===void 0&&(g=0);var x=this.scene.sys.textures;if(x.exists(c)){var y=x.getFrame(c);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(f,y.glTexture,y.width,y.height,g,p);var T=this.uniforms[f],E=y.source;T.textureKey=c,T.source=E.image,T.value=y.glTexture,E.isGLTexture&&(p||(p={}),p.width=E.width,p.height=E.height),p&&(T.textureData=p),this._textureCount=g,this.initSampler2D(T)}return this},setUniform:function(f,c){return r(this.uniforms,f,c),this},getUniform:function(f){return a(this.uniforms,f,null)},setChannel0:function(f,c){return this.setSampler2D("iChannel0",f,0,c)},setChannel1:function(f,c){return this.setSampler2D("iChannel1",f,1,c)},setChannel2:function(f,c){return this.setSampler2D("iChannel2",f,2,c)},setChannel3:function(f,c){return this.setSampler2D("iChannel3",f,3,c)},initSampler2D:function(f){if(!!f.value){var c=this.gl;c.activeTexture(c.TEXTURE0+this._textureCount),c.bindTexture(c.TEXTURE_2D,f.value);var g=f.textureData;if(g&&!f.value.isRenderTexture){var p=c[a(g,"magFilter","linear").toUpperCase()],x=c[a(g,"minFilter","linear").toUpperCase()],y=c[a(g,"wrapS","repeat").toUpperCase()],T=c[a(g,"wrapT","repeat").toUpperCase()],E=c[a(g,"format","rgba").toUpperCase()];if(g.repeat&&(y=c.REPEAT,T=c.REPEAT),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var S=a(g,"width",512),C=a(g,"height",2),P=a(g,"border",0);c.texImage2D(c.TEXTURE_2D,0,E,S,C,P,E,c.UNSIGNED_BYTE,null)}else c.texImage2D(c.TEXTURE_2D,0,E,c.RGBA,c.UNSIGNED_BYTE,f.source);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,p),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,x),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,y),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,T)}this.renderer.setProgram(this.program),c.uniform1i(f.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var f=this.gl,c=this.uniforms,g,p,x,y,T,E=0;for(var S in c)g=c[S],x=g.glFunc,p=g.glValueLength,y=g.uniformLocation,T=g.value,T!==null&&(p===1?g.glMatrix?x.call(f,y,g.transpose,T):x.call(f,y,T):p===2?x.call(f,y,T.x,T.y):p===3?x.call(f,y,T.x,T.y,T.z):p===4?x.call(f,y,T.x,T.y,T.z,T.w):g.type==="sampler2D"&&(f.activeTexture(f.TEXTURE0+E),f.bindTexture(f.TEXTURE_2D,T),f.uniform1i(y,E),E++))},load:function(f){var c=this.gl,g=this.width,p=this.height,x=this.renderer,y=this.program,T=this.viewMatrix;if(!this.renderToTexture){var E=-this._displayOriginX,S=-this._displayOriginY;T[0]=f[0],T[1]=f[1],T[4]=f[2],T[5]=f[3],T[8]=f[4],T[9]=f[5],T[12]=T[0]*E+T[4]*S,T[13]=T[1]*E+T[5]*S}c.useProgram(y),c.uniformMatrix4fv(c.getUniformLocation(y,"uViewMatrix"),!1,T),c.uniform2f(c.getUniformLocation(y,"uResolution"),this.width,this.height);var C=this.uniforms,P=C.resolution;P.value.x=g,P.value.y=p,C.time.value=x.game.loop.getDuration();var R=this.pointer;if(R){var A=C.mouse,M=R.x/g,O=1-R.y/p;A.value.x=M.toFixed(2),A.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var f=this.width,c=this.height,g=this.program,p=this.gl,x=this.vertexBuffer,y=this.renderer,T=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT)),p.bindBuffer(p.ARRAY_BUFFER,x);var E=p.getAttribLocation(g,"inPosition");E!==-1&&(p.enableVertexAttribArray(E),p.vertexAttribPointer(E,2,p.FLOAT,!1,T,0));var S=this.vertexViewF32;S[3]=c,S[4]=f,S[5]=c,S[8]=f,S[9]=c,S[10]=f;var C=6;p.bufferSubData(p.ARRAY_BUFFER,0,this.bytes.subarray(0,C*T)),p.drawArrays(p.TRIANGLES,0,C),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var f=this.gl;f.deleteProgram(this.program),f.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});e.exports=l},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(36),a=t(116),o=t(15),r=t(479),h=t(480),d=t(19),l=t(69),f=t(1179),c=t(79),g=t(39),p=t(117),x=new s({Extends:o,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,f],initialize:function(T,E,S,C,P,R,A,M,O,F,I,B){E===void 0&&(E=0),S===void 0&&(S=0),C===void 0&&(C="__WHITE"),o.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new l,this.viewPosition=new g,this.viewMatrix=new l,this.projectionMatrix=new l,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var V=T.sys.renderer;this.setPosition(E,S),this.setTexture(C,P),this.setSize(V.width,V.height),this.initPipeline(),this.setPerspective(V.width,V.height),R&&this.addVertices(R,A,M,O,F,I,B)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(g.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=g.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,E,S,C){return E===void 0&&(E=45),S===void 0&&(S=.01),C===void 0&&(C=1e3),this.projectionMatrix.perspective(n(E),y/T,S,C),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,E,S){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),E===void 0&&(E=-1e3),S===void 0&&(S=1e3),this.projectionMatrix.ortho(-y,y,-T,T,E,S),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,E,S,C,P,R,A,M){var O=this.scene.sys.cache.obj.get(y);return O&&h(O,this,T,E,S,C,P,R,A,M),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return c(this.faces,this.sortByDepth),this},addVertex:function(y,T,E,S,C,P,R){var A=new p(y,T,E,S,C,P,R);return this.vertices.push(A),A},addFace:function(y,T,E){var S=new a(y,T,E);return this.faces.push(S),this.dirtyCache[9]=-1,S},addVertices:function(y,T,E,S,C,P,R){var A=r(y,T,E,S,C,P,R);return A&&(this.faces=this.faces.concat(A.faces),this.vertices=this.vertices.concat(A.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},getFaceAt:function(y,T,E){E===void 0&&(E=this.scene.sys.cameras.main);for(var S=d(this,E).calc,C=this.faces,P=[],R=0;R<C.length;R++){var A=C[R];A.contains(y,T,S)&&P.push(A)}return c(P,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,E=this.modelScale,S=this.dirtyCache,C=y.x,P=y.y,R=y.z,A=T.x,M=T.y,O=T.z,F=E.x,I=E.y,B=E.z,V=this.getFaceCount(),U=S[0],Y=S[1],W=S[2],w=S[3],L=S[4],D=S[5],N=S[6],G=S[7],b=S[8],z=S[9];return S[0]=C,S[1]=P,S[2]=R,S[3]=A,S[4]=M,S[5]=O,S[6]=F,S[7]=I,S[8]=B,S[9]=V,U!==C||Y!==P||W!==R||w!==A||L!==M||D!==O||N!==F||G!==I||b!==B||z!==V},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,E=this.height,S=this.viewMatrix,C=this.viewPosition;y[10]&&(S.identity(),S.translate(C),S.invert(),y[10]=0);var P=this.transformMatrix;P.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var R=C.z,A=this.faces,M=0;M<A.length;M++)A[M].transformCoordinatesLocal(P,T,E,R);this.depthSort()}},renderDebug:function(y,T){for(var E=y.debugGraphic,S=0;S<T.length;S++){var C=T[S],P=C.vertex1.tx,R=C.vertex1.ty,A=C.vertex2.tx,M=C.vertex2.ty,O=C.vertex3.tx,F=C.vertex3.ty;E.strokeTriangle(P,R,A,M,O,F)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});e.exports=x},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50),u=function(n,a){return s(n.x,n.y,a.x,a.y)<=n.radius+a.radius};e.exports=u},function(e,v,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(233),n=function(a,o,r){if(r===void 0&&(r=[]),u(a,o)){var h=a.x1,d=a.y1,l=a.x2,f=a.y2,c=o.x,g=o.y,p=o.radius,x=l-h,y=f-d,T=h-c,E=d-g,S=x*x+y*y,C=2*(x*T+y*E),P=T*T+E*E-p*p,R=C*C-4*S*P,A,M;if(R===0){var O=-C/(2*S);A=h+O*x,M=d+O*y,O>=0&&O<=1&&r.push(new s(A,M))}else if(R>0){var F=(-C-Math.sqrt(R))/(2*S);A=h+F*x,M=d+F*y,F>=0&&F<=1&&r.push(new s(A,M));var I=(-C+Math.sqrt(R))/(2*S);A=h+I*x,M=d+I*y,I>=0&&I<=1&&r.push(new s(A,M))}}return r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=t(4),n=new u,a=function(o,r,h){if(h===void 0&&(h=n),s(r,o.x1,o.y1))return h.x=o.x1,h.y=o.y1,!0;if(s(r,o.x2,o.y2))return h.x=o.x2,h.y=o.y2,!0;var d=o.x2-o.x1,l=o.y2-o.y1,f=r.x-o.x1,c=r.y-o.y1,g=d*d+l*l,p=d,x=l;if(g>0){var y=(f*d+c*l)/g;p*=y,x*=y}h.x=o.x1+p,h.y=o.y1+x;var T=p*p+x*x;return T<=g&&p*d+x*l>=0&&s(r,h.x,h.y)};e.exports=a},function(e,v,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(96),n=t(488),a=function(o,r,h){if(h===void 0&&(h=[]),n(o,r))for(var d=r.getLineA(),l=r.getLineB(),f=r.getLineC(),c=r.getLineD(),g=[new s,new s,new s,new s],p=[u(d,o,g[0]),u(l,o,g[1]),u(f,o,g[2]),u(c,o,g[3])],x=0;x<4;x++)p[x]&&h.push(g[x]);return h};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n===void 0&&(n=!1),a===void 0&&(a=[]);for(var o=s.x3-s.x1,r=s.y3-s.y1,h=s.x2-s.x1,d=s.y2-s.y1,l=o*o+r*r,f=o*h+r*d,c=h*h+d*d,g=l*c-f*f,p=g===0?0:1/g,x,y,T,E,S,C,P=s.x1,R=s.y1,A=0;A<u.length&&(T=u[A].x-P,E=u[A].y-R,S=o*T+r*E,C=h*T+d*E,x=(c*S-f*C)*p,y=(l*C-f*S)*p,!(x>=0&&y>=0&&x+y<1&&(a.push({x:u[A].x,y:u[A].y}),n)));A++);return a};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=Math.cos(a),r=Math.sin(a),h=s.x1-u,d=s.y1-n;return s.x1=h*o-d*r+u,s.y1=h*r+d*o+n,h=s.x2-u,d=s.y2-n,s.x2=h*o-d*r+u,s.y2=h*r+d*o+n,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.height===0?NaN:s.width/s.height};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=Math.cos(a),r=Math.sin(a),h=s.x1-u,d=s.y1-n;return s.x1=h*o-d*r+u,s.y1=h*r+d*o+n,h=s.x2-u,d=s.y2-n,s.x2=h*o-d*r+u,s.y2=h*r+d*o+n,h=s.x3-u,d=s.y3-n,s.x3=h*o-d*r+u,s.y3=h*r+d*o+n,s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BUTTON_DOWN:t(1310),BUTTON_UP:t(1311),CONNECTED:t(1312),DISCONNECTED:t(1313),GAMEPAD_BUTTON_DOWN:t(1314),GAMEPAD_BUTTON_UP:t(1315)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(156),n=function(a,o){var r=a===void 0?u():s({},a);if(o)for(var h in o)o[h]!==void 0&&(r[h]=o[h]);return r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=t(408),d=new s({Extends:n,initialize:function(f,c,g,p){var x="xml";if(r(c)){var y=c;c=o(y,"key"),g=o(y,"url"),p=o(y,"xhrSettings"),x=o(y,"extension",x)}var T={type:"xml",cache:f.cacheManager.xml,extension:x,responseType:"text",key:c,url:g,xhrSettings:p};n.call(this,f,T)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=h(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});a.register("xml",function(l,f,c){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new d(this,l[g]));else this.addFile(new d(this,l,f,c));return this}),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=new s({Extends:n,initialize:function(l,f,c,g){var p="text",x="txt",y=l.cacheManager.text;if(r(f)){var T=f;f=o(T,"key"),c=o(T,"url"),g=o(T,"xhrSettings"),x=o(T,"extension",x),p=o(T,"type",p),y=o(T,"cache",y)}var E={type:p,cache:y,extension:x,responseType:"text",key:f,url:c,xhrSettings:g};n.call(this,l,E)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("text",function(d,l,f){if(Array.isArray(d))for(var c=0;c<d.length;c++)this.addFile(new h(this,d[c]));else this.addFile(new h(this,d,l,f));return this}),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Acceleration:t(1368),Angular:t(1369),Bounce:t(1370),Debug:t(1371),Drag:t(1372),Enable:t(1373),Friction:t(1374),Gravity:t(1375),Immovable:t(1376),Mass:t(1377),OverlapCirc:t(523),OverlapRect:t(244),Pushable:t(1378),Size:t(1379),Velocity:t(1380)}},function(e,v){var t=function(s,u,n,a,o,r,h){r===void 0&&(r=!0),h===void 0&&(h=!1);var d=[],l=[],f=s.treeMinMax;if(f.minX=u,f.minY=n,f.maxX=u+a,f.maxY=n+o,h&&(l=s.staticTree.search(f)),r&&s.useTree)d=s.tree.search(f);else if(r){var c=s.bodies,g={position:{x:u,y:n},left:u,top:n,right:u+a,bottom:n+o,isCircle:!1},p=s.intersects;c.iterate(function(x){p(x,g)&&d.push(x)})}return l.concat(d)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COLLIDE:t(1381),OVERLAP:t(1382),PAUSE:t(1383),RESUME:t(1384),TILE_COLLIDE:t(1385),TILE_OVERLAP:t(1386),WORLD_BOUNDS:t(1387),WORLD_STEP:t(1388)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62),u=function(n,a,o,r){var h=0,d=n.deltaAbsX()+a.deltaAbsX()+r;return n._dx===0&&a._dx===0?(n.embedded=!0,a.embedded=!0):n._dx>a._dx?(h=n.right-a.x,h>d&&!o||n.checkCollision.right===!1||a.checkCollision.left===!1?h=0:(n.touching.none=!1,n.touching.right=!0,a.touching.none=!1,a.touching.left=!0,a.physicsType===s.STATIC_BODY&&!o&&(n.blocked.none=!1,n.blocked.right=!0),n.physicsType===s.STATIC_BODY&&!o&&(a.blocked.none=!1,a.blocked.left=!0))):n._dx<a._dx&&(h=n.x-a.width-a.x,-h>d&&!o||n.checkCollision.left===!1||a.checkCollision.right===!1?h=0:(n.touching.none=!1,n.touching.left=!0,a.touching.none=!1,a.touching.right=!0,a.physicsType===s.STATIC_BODY&&!o&&(n.blocked.none=!1,n.blocked.left=!0),n.physicsType===s.STATIC_BODY&&!o&&(a.blocked.none=!1,a.blocked.right=!0))),n.overlapX=h,a.overlapX=h,h};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62),u=function(n,a,o,r){var h=0,d=n.deltaAbsY()+a.deltaAbsY()+r;return n._dy===0&&a._dy===0?(n.embedded=!0,a.embedded=!0):n._dy>a._dy?(h=n.bottom-a.y,h>d&&!o||n.checkCollision.down===!1||a.checkCollision.up===!1?h=0:(n.touching.none=!1,n.touching.down=!0,a.touching.none=!1,a.touching.up=!0,a.physicsType===s.STATIC_BODY&&!o&&(n.blocked.none=!1,n.blocked.down=!0),n.physicsType===s.STATIC_BODY&&!o&&(a.blocked.none=!1,a.blocked.up=!0))):n._dy<a._dy&&(h=n.y-a.bottom,-h>d&&!o||n.checkCollision.up===!1||a.checkCollision.down===!1?h=0:(n.touching.none=!1,n.touching.up=!0,a.touching.none=!1,a.touching.down=!0,a.physicsType===s.STATIC_BODY&&!o&&(n.blocked.none=!1,n.blocked.up=!0),n.physicsType===s.STATIC_BODY&&!o&&(a.blocked.none=!1,a.blocked.down=!0))),n.overlapY=h,a.overlapY=h,h};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return!(u.right<=s.left||u.bottom<=s.top||u.position.x>=s.right||u.position.y>=s.bottom)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bounce:t(1495),Collision:t(1496),Force:t(1497),Friction:t(1498),Gravity:t(1499),Mass:t(1500),Sensor:t(1501),SetBody:t(1502),Sleep:t(1503),Static:t(1520),Transform:t(1521),Velocity:t(1522)}},function(e,v){var t={};e.exports=t,function(){t.create=function(s,u){var n=s.bodyA,a=s.bodyB,o={id:t.id(n,a),bodyA:n,bodyB:a,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||a.isSensor,timeCreated:u,timeUpdated:u,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(o,s,u),o},t.update=function(s,u,n){if(s.collision=u,u.collided){var a=u.supports,o=s.activeContacts,r=u.parentA,h=u.parentB;s.inverseMass=r.inverseMass+h.inverseMass,s.friction=Math.min(r.friction,h.friction),s.frictionStatic=Math.max(r.frictionStatic,h.frictionStatic),s.restitution=Math.max(r.restitution,h.restitution),s.slop=Math.max(r.slop,h.slop);for(var d=0;d<a.length;d++)o[d]=a[d].contact;var l=a.length;l<o.length&&(o.length=l),s.separation=u.depth,t.setActive(s,!0,n)}else s.isActive===!0&&t.setActive(s,!1,n)},t.setActive=function(s,u,n){u?(s.isActive=!0,s.timeUpdated=n):(s.isActive=!1,s.activeContacts.length=0)},t.id=function(s,u){return s.id<u.id?"A"+s.id+"B"+u.id:"A"+u.id+"B"+s.id}}()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CalculateFacesAt:t(252),CalculateFacesWithin:t(63),CheckIsoBounds:t(541),Copy:t(1420),CreateFromTiles:t(1421),CullBounds:t(543),CullTiles:t(544),Fill:t(1422),FilterTiles:t(1423),FindByIndex:t(1424),FindTile:t(1425),ForEachTile:t(1426),GetCullTilesFunction:t(1427),GetTileAt:t(158),GetTileAtWorldXY:t(1428),GetTilesWithin:t(26),GetTilesWithinShape:t(1429),GetTilesWithinWorldXY:t(529),GetTileToWorldXFunction:t(1430),GetTileToWorldXYFunction:t(1431),GetTileToWorldYFunction:t(1432),GetWorldToTileXFunction:t(1433),GetWorldToTileXYFunction:t(1434),GetWorldToTileYFunction:t(1435),HasTileAt:t(562),HasTileAtWorldXY:t(1436),HexagonalCullBounds:t(546),HexagonalCullTiles:t(545),HexagonalTileToWorldXY:t(550),HexagonalTileToWorldY:t(554),HexagonalWorldToTileXY:t(556),HexagonalWorldToTileY:t(560),IsInLayerBounds:t(119),IsometricCullTiles:t(547),IsometricTileToWorldXY:t(551),IsometricWorldToTileXY:t(557),PutTileAt:t(257),PutTileAtWorldXY:t(1437),PutTilesAt:t(1438),Randomize:t(1439),RemoveTileAt:t(563),RemoveTileAtWorldXY:t(1440),RenderDebug:t(1441),ReplaceByIndex:t(542),RunCull:t(159),SetCollision:t(1442),SetCollisionBetween:t(1443),SetCollisionByExclusion:t(1444),SetCollisionByProperty:t(1445),SetCollisionFromCollisionGroup:t(1446),SetLayerCollisionIndex:t(160),SetTileCollision:t(72),SetTileIndexCallback:t(1447),SetTileLocationCallback:t(1448),Shuffle:t(1449),StaggeredCullBounds:t(549),StaggeredCullTiles:t(548),StaggeredTileToWorldXY:t(552),StaggeredTileToWorldY:t(555),StaggeredWorldToTileXY:t(558),StaggeredWorldToTileY:t(561),SwapByIndex:t(1450),TileToWorldX:t(253),TileToWorldXY:t(553),TileToWorldY:t(254),WeightedRandomize:t(1451),WorldToTileX:t(255),WorldToTileXY:t(559),WorldToTileY:t(256)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(158),u=function(n,a,o){var r=s(n,a,!0,o),h=s(n,a-1,!0,o),d=s(n,a+1,!0,o),l=s(n-1,a,!0,o),f=s(n+1,a,!0,o),c=r&&r.collides;return c&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),h&&h.collides&&(c&&(r.faceTop=!1),h.faceBottom=!c),d&&d.collides&&(c&&(r.faceBottom=!1),d.faceTop=!c),l&&l.collides&&(c&&(r.faceLeft=!1),l.faceRight=!c),f&&f.collides&&(c&&(r.faceRight=!1),f.faceLeft=!c),r&&!r.collides&&r.resetFaces(),r};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n.baseTileWidth,o=n.tilemapLayer,r=0;return o&&(u||(u=o.scene.cameras.main),r=o.x+u.scrollX*(1-o.scrollFactorX),a*=o.scaleX),r+s*a};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n.baseTileHeight,o=n.tilemapLayer,r=0;return o&&(u||(u=o.scene.cameras.main),r=o.y+u.scrollY*(1-o.scrollFactorY),a*=o.scaleY),r+s*a};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u===void 0&&(u=!0);var o=a.baseTileWidth,r=a.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.x+n.scrollX*(1-r.scrollFactorX)),o*=r.scaleX),u?Math.floor(s/o):s/o};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u===void 0&&(u=!0);var o=a.baseTileHeight,r=a.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),o*=r.scaleY),u?Math.floor(s/o):s/o};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85),u=t(119),n=t(252),a=t(72),o=function(r,h,d,l,f){if(l===void 0&&(l=!0),!u(h,d,f))return null;var c=f.data[d][h],g=c&&c.collides;if(r instanceof s)f.data[d][h]===null&&(f.data[d][h]=new s(f,r.index,h,d,f.tileWidth,f.tileHeight)),f.data[d][h].copy(r);else{var p=r;f.data[d][h]===null?f.data[d][h]=new s(f,p,h,d,f.tileWidth,f.tileHeight):f.data[d][h].index=p}var x=f.data[d][h],y=f.collideIndexes.indexOf(x.index)!==-1;return a(x,y),l&&g!==x.collides&&n(h,d,f),x};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=function(n){return n=n.toLowerCase(),n==="isometric"?s.ISOMETRIC:n==="staggered"?s.STAGGERED:n==="hexagonal"?s.HEXAGONAL:s.ORTHOGONAL};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(120),n=t(121),a=t(85),o=function(r,h,d,l,f){for(var c=new u({tileWidth:d,tileHeight:l}),g=new n({name:r,tileWidth:d,tileHeight:l,format:s.ARRAY_2D,layers:[c]}),p=[],x=h.length,y=0,T=0;T<h.length;T++){p[T]=[];for(var E=h[T],S=0;S<E.length;S++){var C=parseInt(E[S],10);isNaN(C)||C===-1?p[T][S]=f?null:new a(c,-1,S,T,d,l):p[T][S]=new a(c,C,S,T,d,l)}y===0&&(y=E.length)}return g.width=c.width=y,g.height=c.height=x,g.widthInPixels=c.widthInPixels=y*d,g.heightInPixels=c.heightInPixels=x*l,c.data=p,g};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(571),u=t(261),n=function(r){return{x:r.x,y:r.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"],o=function(r,h,d){h===void 0&&(h=0),d===void 0&&(d=0);var l=s(r,a);if(l.x+=h,l.y+=d,r.gid){var f=u(r.gid);l.gid=f.gid,l.flippedHorizontal=f.flippedHorizontal,l.flippedVertical=f.flippedVertical,l.flippedAntiDiagonal=f.flippedAntiDiagonal}else r.polyline?l.polyline=r.polyline.map(n):r.polygon?l.polygon=r.polygon.map(n):r.ellipse?l.ellipse=r.ellipse:r.text?l.text=r.text:r.point?l.point=!0:l.rectangle=!0;return l};e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=2147483648,s=1073741824,u=536870912,n=function(a){var o=Boolean(a&t),r=Boolean(a&s),h=Boolean(a&u);a=a&~(t|s|u);var d=0,l=!1;return o&&r&&h?(d=Math.PI/2,l=!0):o&&r&&!h?(d=Math.PI,l=!1):o&&!r&&h?(d=Math.PI/2,l=!1):o&&!r&&!h?(d=0,l=!0):!o&&r&&h?(d=3*Math.PI/2,l=!1):!o&&r&&!h?(d=Math.PI,l=!0):!o&&!r&&h?(d=3*Math.PI/2,l=!0):!o&&!r&&!h&&(d=0,l=!1),{gid:a,flippedHorizontal:o,flippedVertical:r,flippedAntiDiagonal:h,rotation:d,flipped:l}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(121),n=t(564),a=t(580),o=function(r,h,d,l,f,c,g,p){d===void 0&&(d=32),l===void 0&&(l=32),f===void 0&&(f=10),c===void 0&&(c=10),p===void 0&&(p=!1);var x=null;if(Array.isArray(g)){var y=h!==void 0?h:"map";x=n(y,s.ARRAY_2D,g,d,l,p)}else if(h!==void 0){var T=r.cache.tilemap.get(h);T?x=n(h,T.format,T.data,d,l,p):console.warn("No map data found for key "+h)}return x===null&&(x=new u({tileWidth:d,tileHeight:l,width:f,height:c})),new a(r,x)};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=function(n){var a=s(n,"targets",null);return a===null||(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a])),a};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(o){return!!o.getActive&&typeof o.getActive=="function"}function s(o){return!!o.getStart&&typeof o.getStart=="function"}function u(o){return!!o.getEnd&&typeof o.getEnd=="function"}function n(o){return s(o)||u(o)||t(o)}var a=function(o,r){var h,d=function(C,P,R){return R},l=function(C,P,R){return R},f=null,c=typeof r;if(c==="number")d=function(){return r};else if(c==="string"){var g=r[0],p=parseFloat(r.substr(2));switch(g){case"+":d=function(C,P,R){return R+p};break;case"-":d=function(C,P,R){return R-p};break;case"*":d=function(C,P,R){return R*p};break;case"/":d=function(C,P,R){return R/p};break;default:d=function(){return parseFloat(r)}}}else if(c==="function")d=r;else if(c==="object")if(n(r))t(r)&&(f=r.getActive),u(r)&&(d=r.getEnd),s(r)&&(l=r.getStart);else if(r.hasOwnProperty("value"))h=a(o,r.value);else{var x=r.hasOwnProperty("to"),y=r.hasOwnProperty("from"),T=r.hasOwnProperty("start");if(x&&(y||T)){if(h=a(o,r.to),T){var E=a(o,r.start);h.getActive=E.getEnd}if(y){var S=a(o,r.from);h.getStart=S.getEnd}}}return h||(h={getActive:f,getEnd:d,getStart:l}),h};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(267),a=t(16),o=t(5),r=t(100),h=t(14),d=new s({Extends:u,initialize:function(f,c,g){u.call(this),this.parent=f,this.parentIsTimeline=f.hasOwnProperty("isTimeline"),this.data=c,this.totalData=c.length,this.targets=g,this.totalTargets=g.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=r.PENDING_ADD,this._pausedState=r.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(l){return l===void 0&&(l=0),this.data[l].current},setTimeScale:function(l){return this.timeScale=l,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===r.ACTIVE},isPaused:function(){return this.state===r.PAUSED},hasTarget:function(l){return this.targets.indexOf(l)!==-1},updateTo:function(l,f,c){c===void 0&&(c=!1);for(var g=0;g<this.totalData;g++){var p=this.data[g];p.key===l&&(p.end=f,c&&(p.start=p.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===r.ACTIVE?this.seek(0):this.state===r.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===r.PENDING_ADD?this:this.play()},calcDuration:function(){for(var l=0,f=h.MAX_SAFE_INTEGER,c=this.data,g=0;g<this.totalData;g++){var p=c[g];p.t1=p.duration+p.hold,p.yoyo&&(p.t1+=p.duration),p.t2=p.t1+p.repeatDelay,p.totalDuration=p.delay+p.t1,p.repeat===-1?p.totalDuration+=p.t2*999999999999:p.repeat>0&&(p.totalDuration+=p.t2*p.repeat),p.totalDuration>l&&(l=p.totalDuration),p.delay<f&&(f=p.delay)}this.duration=Math.max(l,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=f},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=r.PENDING_ADD,this._pausedState=r.INIT,!1;for(var l=this.data,f=this.totalTargets,c=0;c<this.totalData;c++){var g=l[c],p=g.target,x=g.gen,y=g.key,T=g.index;g.delay=x.delay(p,y,0,T,f,this),g.duration=Math.max(x.duration(p,y,0,T,f,this),.001),g.hold=x.hold(p,y,0,T,f,this),g.repeat=x.repeat(p,y,0,T,f,this),g.repeatDelay=x.repeatDelay(p,y,0,T,f,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=r.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(n.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=r.LOOP_DELAY):(this.state=r.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=r.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===r.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=r.PAUSED,this)},play:function(l){l===void 0&&(l=!1);var f=this.state;return f===r.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=r.ACTIVE,this):f===r.ACTIVE||f===r.PENDING_ADD&&this._pausedState===r.PENDING_ADD?this:!this.parentIsTimeline&&(f===r.PENDING_REMOVE||f===r.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(l),this.calculatedOffset===0?this.state=r.ACTIVE:(this.countdown=this.calculatedOffset,this.state=r.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(l),this.state=r.ACTIVE,this.makeActive()),this)},resetTweenData:function(l){for(var f=this.data,c=this.totalData,g=this.totalTargets,p=0;p<c;p++){var x=f[p],y=x.target,T=x.key,E=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,l?(x.start=x.getStartValue(y,T,x.start,E,g,this),x.end=x.getEndValue(y,T,x.end,E,g,this),x.current=x.start,x.state=r.PLAYING_FORWARD):x.state=r.PENDING_RENDER,x.delay>0&&(x.elapsed=x.delay,x.state=r.DELAY),x.getActiveValue&&(y[T]=x.getActiveValue(x.target,x.key,x.start))}},resume:function(){return this.state===r.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(l,f){f===void 0&&(f=16.6),this.state===r.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var c=this.data,g=this.totalTargets,p=0;p<this.totalData;p++){var x=c[p],y=x.target,T=x.gen,E=x.key,S=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,x.delay=T.delay(y,E,0,S,g,this),x.duration=Math.max(T.duration(y,E,0,S,g,this),.001),x.hold=T.hold(y,E,0,S,g,this),x.repeat=T.repeat(y,E,0,S,g,this),x.repeatDelay=T.repeatDelay(y,E,0,S,g,this),x.current=x.start,x.state=r.PLAYING_FORWARD,this.updateTweenData(this,x,0,S,g),x.delay>0&&(x.elapsed=x.delay,x.state=r.DELAY)}this.calcDuration();var C=!1;this.state===r.PAUSED&&(C=!0,this.state=r.ACTIVE),this.isSeeking=!0;do this.update(0,f);while(this.totalProgress<l);return this.isSeeking=!1,C&&(this.state=r.PAUSED),this},setCallback:function(l,f,c,g){return this.callbacks[l]={func:f,scope:g,params:c},this},complete:function(l){return l===void 0&&(l=0),l?(this.state=r.COMPLETE_DELAY,this.countdown=l):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(l){return this.state===r.ACTIVE&&l!==void 0&&this.seek(l),this.state!==r.REMOVED&&((this.state===r.PAUSED||this.state===r.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(n.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=r.PENDING_REMOVE),this},update:function(l,f){if(this.state===r.PAUSED)return!1;switch(this.useFrames&&(f=1*this.parent.timeScale),f*=this.timeScale,this.elapsed+=f,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=f,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case r.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=f,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(n.TWEEN_START,this.callbacks.onStart)));for(var c=!1,g=0;g<this.totalData;g++){var p=this.data[g];this.updateTweenData(this,p,f)&&(c=!0)}c||this.nextState();break;case r.LOOP_DELAY:this.countdown-=f,this.countdown<=0&&(this.state=r.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop));break;case r.OFFSET_DELAY:this.countdown-=f,this.countdown<=0&&(this.state=r.ACTIVE);break;case r.COMPLETE_DELAY:this.countdown-=f,this.countdown<=0&&(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===r.PENDING_REMOVE},dispatchTweenDataEvent:function(l,f,c){this.isSeeking||(this.emit(l,this,c.key,c.target,c.current,c.previous),f&&(f.params[1]=c.target,f.func.apply(f.scope,f.params)))},dispatchTweenEvent:function(l,f){this.isSeeking||(this.emit(l,this,this.targets),f&&(f.params[1]=this.targets,f.func.apply(f.scope,f.params)))},setStateFromEnd:function(l,f,c){return f.yoyo?(f.elapsed=c,f.progress=c/f.duration,f.flipX&&f.target.toggleFlipX(),f.flipY&&f.target.toggleFlipY(),this.dispatchTweenDataEvent(n.TWEEN_YOYO,l.callbacks.onYoyo,f),f.start=f.getStartValue(f.target,f.key,f.start,f.index,l.totalTargets,l),r.PLAYING_BACKWARD):f.repeatCounter>0?(f.repeatCounter--,f.elapsed=c,f.progress=c/f.duration,f.flipX&&f.target.toggleFlipX(),f.flipY&&f.target.toggleFlipY(),f.start=f.getStartValue(f.target,f.key,f.start,f.index,l.totalTargets,l),f.end=f.getEndValue(f.target,f.key,f.start,f.index,l.totalTargets,l),f.repeatDelay>0?(f.elapsed=f.repeatDelay-c,f.current=f.start,f.target[f.key]=f.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,l.callbacks.onRepeat,f),r.PLAYING_FORWARD)):r.COMPLETE},setStateFromStart:function(l,f,c){return f.repeatCounter>0?(f.repeatCounter--,f.elapsed=c,f.progress=c/f.duration,f.flipX&&f.target.toggleFlipX(),f.flipY&&f.target.toggleFlipY(),f.end=f.getEndValue(f.target,f.key,f.start,f.index,l.totalTargets,l),f.repeatDelay>0?(f.elapsed=f.repeatDelay-c,f.current=f.start,f.target[f.key]=f.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,l.callbacks.onRepeat,f),r.PLAYING_FORWARD)):r.COMPLETE},updateTweenData:function(l,f,c){var g=f.target;switch(f.state){case r.PLAYING_FORWARD:case r.PLAYING_BACKWARD:if(!g){f.state=r.COMPLETE;break}var p=f.elapsed,x=f.duration,y=0;p+=c,p>x&&(y=p-x,p=x);var T=f.state===r.PLAYING_FORWARD,E=p/x;if(f.elapsed=p,f.progress=E,f.previous=f.current,E===1)T?(f.current=f.end,g[f.key]=f.end,f.hold>0?(f.elapsed=f.hold-y,f.state=r.HOLD_DELAY):f.state=this.setStateFromEnd(l,f,y)):(f.current=f.start,g[f.key]=f.start,f.state=this.setStateFromStart(l,f,y));else{var S=T?f.ease(E):f.ease(1-E);f.current=f.start+(f.end-f.start)*S,g[f.key]=f.current}this.dispatchTweenDataEvent(n.TWEEN_UPDATE,l.callbacks.onUpdate,f);break;case r.DELAY:f.elapsed-=c,f.elapsed<=0&&(f.elapsed=Math.abs(f.elapsed),f.state=r.PENDING_RENDER);break;case r.REPEAT_DELAY:f.elapsed-=c,f.elapsed<=0&&(f.elapsed=Math.abs(f.elapsed),f.state=r.PLAYING_FORWARD,this.dispatchTweenDataEvent(n.TWEEN_REPEAT,l.callbacks.onRepeat,f));break;case r.HOLD_DELAY:f.elapsed-=c,f.elapsed<=0&&(f.state=this.setStateFromEnd(l,f,Math.abs(f.elapsed)));break;case r.PENDING_RENDER:g?(f.start=f.getStartValue(g,f.key,g[f.key],f.index,l.totalTargets,l),f.end=f.getEndValue(g,f.key,f.start,f.index,l.totalTargets,l),f.current=f.start,g[f.key]=f.start,f.state=r.PLAYING_FORWARD):f.state=r.COMPLETE;break}return f.state!==r.COMPLETE}});d.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],o.register("tween",function(l){return this.scene.sys.tweens.add(l)}),a.register("tween",function(l){return this.scene.sys.tweens.create(l)}),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TIMELINE_COMPLETE:t(1466),TIMELINE_LOOP:t(1467),TIMELINE_PAUSE:t(1468),TIMELINE_RESUME:t(1469),TIMELINE_START:t(1470),TIMELINE_UPDATE:t(1471),TWEEN_ACTIVE:t(1472),TWEEN_COMPLETE:t(1473),TWEEN_LOOP:t(1474),TWEEN_REPEAT:t(1475),TWEEN_START:t(1476),TWEEN_STOP:t(1477),TWEEN_UPDATE:t(1478),TWEEN_YOYO:t(1479)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o,r,h,d,l,f,c,g,p,x,y){return{target:s,index:u,key:n,getActiveValue:r,getEndValue:a,getStartValue:o,ease:h,duration:0,totalDuration:0,delay:0,yoyo:f,hold:0,repeat:0,repeatDelay:0,flipX:x,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:d,duration:l,hold:c,repeat:g,repeatDelay:p},state:0}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68),u=function(n){return s(n,-Math.PI,Math.PI)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68),u=function(n){return s(n,-180,180)};e.exports=u},function(e,v,t){var s={};e.exports=s;var u=t(83),n=t(32);(function(){s.fromVertices=function(a){for(var o={},r=0;r<a.length;r++){var h=(r+1)%a.length,d=u.normalise({x:a[h].y-a[r].y,y:a[r].x-a[h].x}),l=d.y===0?1/0:d.x/d.y;l=l.toFixed(3).toString(),o[l]=d}return n.values(o)},s.rotate=function(a,o){if(o!==0)for(var r=Math.cos(o),h=Math.sin(o),d=0;d<a.length;d++){var l=a[d],f;f=l.x*r-l.y*h,l.y=l.x*h+l.y*r,l.x=f}}})()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_ADD:t(1504),AFTER_REMOVE:t(1505),AFTER_UPDATE:t(1506),BEFORE_ADD:t(1507),BEFORE_REMOVE:t(1508),BEFORE_UPDATE:t(1509),COLLISION_ACTIVE:t(1510),COLLISION_END:t(1511),COLLISION_START:t(1512),DRAG_END:t(1513),DRAG:t(1514),DRAG_START:t(1515),PAUSE:t(1516),RESUME:t(1517),SLEEP_END:t(1518),SLEEP_START:t(1519)}},function(e,v,t){var s={};e.exports=s;var u=t(274),n=t(250),a=t(84);(function(){s.collisions=function(o,r){for(var h=[],d=r.pairs.table,l=r.metrics,f=0;f<o.length;f++){var c=o[f][0],g=o[f][1];if(!((c.isStatic||c.isSleeping)&&(g.isStatic||g.isSleeping))&&!!s.canCollide(c.collisionFilter,g.collisionFilter)&&(l.midphaseTests+=1,a.overlaps(c.bounds,g.bounds)))for(var p=c.parts.length>1?1:0;p<c.parts.length;p++)for(var x=c.parts[p],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(x===c&&T===g||a.overlaps(x.bounds,T.bounds)){var E=n.id(x,T),S=d[E],C;S&&S.isActive?C=S.collision:C=null;var P=u.collides(x,T,C);l.narrowphaseTests+=1,P.reused&&(l.narrowReuseCount+=1),P.collided&&(h.push(P),l.narrowDetections+=1)}}}return h},s.canCollide=function(o,r){return o.group===r.group&&o.group!==0?o.group>0:(o.mask&r.category)!==0&&(r.mask&o.category)!==0}})()},function(e,v,t){var s={};e.exports=s;var u=t(64),n=t(83);(function(){s.collides=function(a,o,r){var h,d,l,f,c=!1;if(r){var g=a.parent,p=o.parent,x=g.speed*g.speed+g.angularSpeed*g.angularSpeed+p.speed*p.speed+p.angularSpeed*p.angularSpeed;c=r&&r.collided&&x<.2,f=r}else f={collided:!1,bodyA:a,bodyB:o};if(r&&c){var y=f.axisBody,T=y===a?o:a,E=[y.axes[r.axisNumber]];if(l=s._overlapAxes(y.vertices,T.vertices,E),f.reused=!0,l.overlap<=0)return f.collided=!1,f}else{if(h=s._overlapAxes(a.vertices,o.vertices,a.axes),h.overlap<=0||(d=s._overlapAxes(o.vertices,a.vertices,o.axes),d.overlap<=0))return f.collided=!1,f;h.overlap<d.overlap?(l=h,f.axisBody=a):(l=d,f.axisBody=o),f.axisNumber=l.axisNumber}f.bodyA=a.id<o.id?a:o,f.bodyB=a.id<o.id?o:a,f.collided=!0,f.depth=l.overlap,f.parentA=f.bodyA.parent,f.parentB=f.bodyB.parent,a=f.bodyA,o=f.bodyB,n.dot(l.axis,n.sub(o.position,a.position))<0?f.normal={x:l.axis.x,y:l.axis.y}:f.normal={x:-l.axis.x,y:-l.axis.y},f.tangent=n.perp(f.normal),f.penetration=f.penetration||{},f.penetration.x=f.normal.x*f.depth,f.penetration.y=f.normal.y*f.depth;var S=s._findSupports(a,o,f.normal),C=[];if(u.contains(a.vertices,S[0])&&C.push(S[0]),u.contains(a.vertices,S[1])&&C.push(S[1]),C.length<2){var P=s._findSupports(o,a,n.neg(f.normal));u.contains(o.vertices,P[0])&&C.push(P[0]),C.length<2&&u.contains(o.vertices,P[1])&&C.push(P[1])}return C.length<1&&(C=[S[0]]),f.supports=C,f},s._overlapAxes=function(a,o,r){for(var h=n._temp[0],d=n._temp[1],l={overlap:Number.MAX_VALUE},f,c,g=0;g<r.length;g++){if(c=r[g],s._projectToAxis(h,a,c),s._projectToAxis(d,o,c),f=Math.min(h.max-d.min,d.max-h.min),f<=0)return l.overlap=f,l;f<l.overlap&&(l.overlap=f,l.axis=c,l.axisNumber=g)}return l},s._projectToAxis=function(a,o,r){for(var h=n.dot(o[0],r),d=h,l=1;l<o.length;l+=1){var f=n.dot(o[l],r);f>d?d=f:f<h&&(h=f)}a.min=h,a.max=d},s._findSupports=function(a,o,r){for(var h=Number.MAX_VALUE,d=n._temp[0],l=o.vertices,f=a.position,c,g,p,x,y=0;y<l.length;y++)g=l[y],d.x=g.x-f.x,d.y=g.y-f.y,c=-n.dot(r,d),c<h&&(h=c,p=g);var T=p.index-1>=0?p.index-1:l.length-1;g=l[T],d.x=g.x-f.x,d.y=g.y-f.y,h=-n.dot(r,d),x=g;var E=(p.index+1)%l.length;return g=l[E],d.x=g.x-f.x,d.y=g.y-f.y,c=-n.dot(r,d),c<h&&(x=g),[p,x]}})()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AlignTo:t(601),Angle:t(602),Call:t(603),GetFirst:t(604),GetLast:t(605),GridAlign:t(606),IncAlpha:t(678),IncX:t(679),IncXY:t(680),IncY:t(681),PlaceOnCircle:t(682),PlaceOnEllipse:t(683),PlaceOnLine:t(684),PlaceOnRectangle:t(685),PlaceOnTriangle:t(686),PlayAnimation:t(687),PropertyValueInc:t(46),PropertyValueSet:t(27),RandomCircle:t(688),RandomEllipse:t(689),RandomLine:t(690),RandomRectangle:t(691),RandomTriangle:t(692),Rotate:t(693),RotateAround:t(694),RotateAroundDistance:t(695),ScaleX:t(696),ScaleXY:t(697),ScaleY:t(698),SetAlpha:t(699),SetBlendMode:t(700),SetDepth:t(701),SetHitArea:t(702),SetOrigin:t(703),SetRotation:t(704),SetScale:t(705),SetScaleX:t(706),SetScaleY:t(707),SetScrollFactor:t(708),SetScrollFactorX:t(709),SetScrollFactorY:t(710),SetTint:t(711),SetVisible:t(712),SetX:t(713),SetXY:t(714),SetY:t(715),ShiftPosition:t(716),Shuffle:t(717),SmootherStep:t(718),SmoothStep:t(719),Spread:t(720),ToggleVisible:t(721),WrapInRectangle:t(722)}},function(e,v,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=[];u[s.BOTTOM_CENTER]=t(277),u[s.BOTTOM_LEFT]=t(278),u[s.BOTTOM_RIGHT]=t(279),u[s.LEFT_BOTTOM]=t(280),u[s.LEFT_CENTER]=t(281),u[s.LEFT_TOP]=t(282),u[s.RIGHT_BOTTOM]=t(283),u[s.RIGHT_CENTER]=t(284),u[s.RIGHT_TOP]=t(285),u[s.TOP_CENTER]=t(286),u[s.TOP_LEFT]=t(287),u[s.TOP_RIGHT]=t(288);var n=function(a,o,r,h,d){return u[r](a,o,h,d)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(87),n=t(88),a=t(52),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,u(h)+d),a(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(53),a=t(52),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,u(h)-d),a(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(44),n=t(54),a=t(52),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,u(h)+d),a(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(55),a=t(54),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,u(h)-d),n(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(43),n=t(90),a=t(54),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,u(h)-d),n(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43),u=t(45),n=t(54),a=t(52),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,s(h)-d),a(r,u(h)-l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(44),n=t(55),a=t(53),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,u(h)+d),n(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(44),n=t(90),a=t(53),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,u(h)+d),n(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44),u=t(45),n=t(53),a=t(52),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,s(h)+d),a(r,u(h)-l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87),u=t(45),n=t(55),a=t(88),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,s(h)+d),n(r,u(h)-l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43),u=t(45),n=t(55),a=t(53),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,s(h)-d),n(r,u(h)-l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44),u=t(45),n=t(55),a=t(54),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,s(h)+d),n(r,u(h)-l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=[];u[s.BOTTOM_CENTER]=t(290),u[s.BOTTOM_LEFT]=t(291),u[s.BOTTOM_RIGHT]=t(292),u[s.CENTER]=t(293),u[s.LEFT_CENTER]=t(295),u[s.RIGHT_CENTER]=t(296),u[s.TOP_CENTER]=t(297),u[s.TOP_LEFT]=t(298),u[s.TOP_RIGHT]=t(299),u[s.LEFT_BOTTOM]=u[s.BOTTOM_LEFT],u[s.LEFT_TOP]=u[s.TOP_LEFT],u[s.RIGHT_BOTTOM]=u[s.BOTTOM_RIGHT],u[s.RIGHT_TOP]=u[s.TOP_RIGHT];var n=function(a,o,r,h,d){return u[r](a,o,h,d)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(87),n=t(55),a=t(88),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,u(h)+d),n(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(55),a=t(53),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,u(h)-d),n(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(44),n=t(55),a=t(54),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,u(h)+d),n(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(294),u=t(87),n=t(89),a=function(o,r,h,d){return h===void 0&&(h=0),d===void 0&&(d=0),s(o,u(r)+h,n(r)+d),o};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88),u=t(90),n=function(a,o,r){return s(a,o),u(a,r)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(43),n=t(90),a=t(53),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,u(h)-d),n(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(44),n=t(90),a=t(54),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),a(r,u(h)+d),n(r,s(h)+l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87),u=t(45),n=t(88),a=t(52),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,s(h)+d),a(r,u(h)-l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43),u=t(45),n=t(53),a=t(52),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,s(h)-d),a(r,u(h)-l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44),u=t(45),n=t(54),a=t(52),o=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,s(h)+d),a(r,u(h)-l),r};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(169),u=t(98),n=t(14),a=t(4),o=function(r,h,d){d===void 0&&(d=new a);var l=u(h,0,n.PI2);return s(r,l,d)};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(302),u=t(169),n=t(98),a=t(14),o=function(r,h,d,l){l===void 0&&(l=[]),!h&&d>0&&(h=s(r)/d);for(var f=0;f<h;f++){var c=n(f/h,0,a.PI2);l.push(u(r,c))}return l};e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 2*(Math.PI*s.radius)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=2,n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a){return a===void 0&&(a=1),this.alpha=a,this},alpha:{get:function(){return this._alpha},set:function(a){var o=s(a,0,1);this._alpha=o,o===0?this.renderFlags&=~u:this.renderFlags|=u}}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u={_blendMode:s.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(n){typeof n=="string"&&(n=s[n]),n|=0,n>=-1&&(this._blendMode=n)}},setBlendMode:function(n){return this.blendMode=n,this}};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_depth:0,depth:{get:function(){return this._depth},set:function(s){this.displayList&&this.displayList.queueDepthSort(),this._depth=s}},setDepth:function(s){return s===void 0&&(s=0),this.depth=s,this}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(171),u=t(130),n=function(a,o,r,h){h===void 0&&(h=[]),!o&&r>0&&(o=u(a)/r);for(var d=0;d<o;d++){var l=d/o;h.push(s(a,l))}return h};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,o){return o===void 0&&(o=new s),o.x=n.x1+(n.x2-n.x1)*a,o.y=n.y1+(n.y2-n.y1)*a,o};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=Math.cos(a),r=Math.sin(a),h=s.x-u,d=s.y-n;return s.x=h*o-d*r+u,s.y=h*r+d*o+n,s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(310),u=t(311),n={mask:null,setMask:function(a){return this.mask=a,this},clearMask:function(a){return a===void 0&&(a=!1),a&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(a){return a===void 0&&(this.texture||this.shader)&&(a=this),new s(this.scene,a)},createGeometryMask:function(a){return a===void 0&&this.type==="Graphics"&&(a=this),new u(this.scene,a)}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(22),n=t(91),a=new s({initialize:function(r,h){var d=r.sys.renderer;this.renderer=d,this.bitmapMask=h,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),r.sys.game.events.on(u.CONTEXT_RESTORED,this.createMask,this),d&&d.on(n.RESIZE,this.createMask,this)},createMask:function(){var o=this.renderer;if(!(!o||!o.gl)){this.mainTexture&&this.clearMask();var r=o.width,h=o.height,d=(r&r-1)===0&&(h&h-1)===0,l=o.gl,f=d?l.REPEAT:l.CLAMP_TO_EDGE,c=l.LINEAR;this.mainTexture=o.createTexture2D(0,c,c,f,f,l.RGBA,null,r,h),this.maskTexture=o.createTexture2D(0,c,c,f,f,l.RGBA,null,r,h),this.mainFramebuffer=o.createFramebuffer(r,h,this.mainTexture,!0),this.maskFramebuffer=o.createFramebuffer(r,h,this.maskTexture,!0)}},clearMask:function(){var o=this.renderer;!o||!o.gl||!this.mainTexture||(o.deleteTexture(this.mainTexture),o.deleteTexture(this.maskTexture),o.deleteFramebuffer(this.mainFramebuffer),o.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(o){this.bitmapMask=o},preRenderWebGL:function(o,r,h){o.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,h)},postRenderWebGL:function(o,r){o.pipelines.BITMAPMASK_PIPELINE.endMask(this,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(n.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o){this.geometryMask=o,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(n){return this.geometryMask=n,this},setInvertAlpha:function(n){return n===void 0&&(n=!0),this.invertAlpha=n,this},preRenderWebGL:function(n,a,o){var r=n.gl;n.flush(),n.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),n.maskCount=0),n.currentCameraMask.mask!==this&&(n.currentMask.mask=this),n.maskStack.push({mask:this,camera:o}),this.applyStencil(n,o,!0),n.maskCount++},applyStencil:function(n,a,o){var r=n.gl,h=this.geometryMask,d=n.maskCount;r.colorMask(!1,!1,!1,!1),o?(r.stencilFunc(r.EQUAL,d,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,d+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),h.renderWebGL(n,h,a),n.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),o?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,d+1,255):r.stencilFunc(r.EQUAL,d+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,d,255):r.stencilFunc(r.EQUAL,d,255)},postRenderWebGL:function(n){var a=n.gl;n.maskStack.pop(),n.maskCount--,n.flush();var o=n.currentMask;if(n.maskStack.length===0)o.mask=null,a.disable(a.STENCIL_TEST);else{var r=n.maskStack[n.maskStack.length-1];r.mask.applyStencil(n,r.camera,!1),n.currentCameraMask.mask!==r.mask?(o.mask=r.mask,o.camera=r.camera):o.mask=null}},preRenderCanvas:function(n,a,o){var r=this.geometryMask;n.currentContext.save(),r.renderCanvas(n,r,o,null,null,!0),n.currentContext.clip()},postRenderCanvas:function(n){n.currentContext.restore()},destroy:function(){this.geometryMask=null}});e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(s,u){return u===void 0&&(u=s),this.scrollFactorX=s,this.scrollFactorY=u,this}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(25),n=t(177),a=t(269),o=t(270),r=t(3),h=4,d={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(l){this._scaleX=l,this._scaleY=l,l===0?this.renderFlags&=~h:this.renderFlags|=h}},scaleX:{get:function(){return this._scaleX},set:function(l){this._scaleX=l,l===0?this.renderFlags&=~h:this.renderFlags|=h}},scaleY:{get:function(){return this._scaleY},set:function(l){this._scaleY=l,l===0?this.renderFlags&=~h:this.renderFlags|=h}},angle:{get:function(){return o(this._rotation*s.RAD_TO_DEG)},set:function(l){this.rotation=o(l)*s.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=a(l)}},setPosition:function(l,f,c,g){return l===void 0&&(l=0),f===void 0&&(f=l),c===void 0&&(c=0),g===void 0&&(g=0),this.x=l,this.y=f,this.z=c,this.w=g,this},copyPosition:function(l){return l.x!==void 0&&(this.x=l.x),l.y!==void 0&&(this.y=l.y),l.z!==void 0&&(this.z=l.z),l.w!==void 0&&(this.w=l.w),this},setRandomPosition:function(l,f,c,g){return l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=l+Math.random()*c,this.y=f+Math.random()*g,this},setRotation:function(l){return l===void 0&&(l=0),this.rotation=l,this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,this},setScale:function(l,f){return l===void 0&&(l=1),f===void 0&&(f=l),this.scaleX=l,this.scaleY=f,this},setX:function(l){return l===void 0&&(l=0),this.x=l,this},setY:function(l){return l===void 0&&(l=0),this.y=l,this},setZ:function(l){return l===void 0&&(l=0),this.z=l,this},setW:function(l){return l===void 0&&(l=0),this.w=l,this},getLocalTransformMatrix:function(l){return l===void 0&&(l=new u),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(l,f){l===void 0&&(l=new u),f===void 0&&(f=new u);var c=this.parentContainer;if(!c)return this.getLocalTransformMatrix(l);for(l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);c;)f.applyITRS(c.x,c.y,c._rotation,c._scaleX,c._scaleY),f.multiply(l,l),c=c.parentContainer;return l},getLocalPoint:function(l,f,c,g){c||(c=new r),g||(g=this.scene.sys.cameras.main);var p=g.scrollX,x=g.scrollY,y=l+p*this.scrollFactorX-p,T=f+x*this.scrollFactorY-x;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,T,c):n(y,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,c),this._originComponent&&(c.x+=this._displayOriginX,c.y+=this._displayOriginY),c},getParentRotation:function(){for(var l=0,f=this.parentContainer;f;)l+=f.rotation,f=f.parentContainer;return l}};e.exports=d},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=1,s={_visible:!0,visible:{get:function(){return this._visible},set:function(u){u?(this._visible=!0,this.renderFlags|=t):(this._visible=!1,this.renderFlags&=~t)}},setVisible:function(u){return this.visible=u,this}};e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CHANGE_DATA:t(638),CHANGE_DATA_KEY:t(639),DESTROY:t(640),REMOVE_DATA:t(641),SET_DATA:t(642)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(130),u=t(4),n=function(a,o,r,h){if(h===void 0&&(h=[]),!o&&!r)return h;o?r=Math.round(s(a)/o):o=s(a)/r;for(var d=a.x,l=a.y,f=0,c=0;c<r;c++)switch(h.push(new u(d,l)),f){case 0:d+=o,d>=a.right&&(f=1,l+=d-a.right,d=a.right);break;case 1:l+=o,l>=a.bottom&&(f=2,d-=l-a.bottom,l=a.bottom);break;case 2:d-=o,d<=a.left&&(f=3,l-=a.left-d,d=a.left);break;case 3:l-=o,l<=a.top&&(f=0,l=a.top);break}return h};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=1),n===void 0&&(n=[]);var a=Math.round(s.x1),o=Math.round(s.y1),r=Math.round(s.x2),h=Math.round(s.y2),d=Math.abs(r-a),l=Math.abs(h-o),f=a<r?1:-1,c=o<h?1:-1,g=d-l;n.push({x:a,y:o});for(var p=1;!(a===r&&o===h);){var x=g<<1;x>-l&&(g-=l,a+=f),x<d&&(g+=d,o+=c),p%u===0&&n.push({x:a,y:o}),p++}return n};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u.length){if(u.length===1)return u[0]}else return NaN;var a=1,o,r;if(n){if(s<u[0][n])return u[0];for(;u[a][n]<s;)a++}else for(;u[a]<s;)a++;return a>u.length&&(a=u.length),n?(o=u[a-1][n],r=u[a][n],r-s<=s-o?u[a]:u[a-1]):(o=u[a-1],r=u[a],r-s<=s-o?r:o)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o,r,h,d){d===void 0&&(d=!1),this.textureKey=a,this.textureFrame=o,this.index=r,this.frame=h,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=d},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=/\D/g;return s.sort(function(n,a){return parseInt(n.replace(u,""),10)-parseInt(a.replace(u,""),10)}),s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(185),u=t(0),n=t(102),a=t(9),o=t(132),r=t(22),h=t(2),d=t(6),l=t(186),f=t(322),c=new u({Extends:a,initialize:function(p){a.call(this),this.game=p,this.textureManager=null,this.globalTimeScale=1,this.anims=new n,this.mixes=new n,this.paused=!1,this.name="AnimationManager",p.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(g,p,x){var y=this.anims,T=this.mixes,E=typeof g=="string"?g:g.key,S=typeof p=="string"?p:p.key;if(y.has(E)&&y.has(S)){var C=T.get(E);C||(C={}),C[S]=x,T.set(E,C)}return this},removeMix:function(g,p){var x=this.mixes,y=typeof g=="string"?g:g.key,T=x.get(y);if(T)if(p){var E=typeof p=="string"?p:p.key;T.hasOwnProperty(E)&&delete T[E]}else p||x.delete(y);return this},getMix:function(g,p){var x=this.mixes,y=typeof g=="string"?g:g.key,T=typeof p=="string"?p:p.key,E=x.get(y);return E&&E.hasOwnProperty(T)?E[T]:0},add:function(g,p){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(p.key=g,this.anims.set(g,p),this.emit(o.ADD_ANIMATION,g,p),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,p){var x=[],y=this.game.cache.json.get(g);if(!y)return x;var T=this,E=d(y,"meta",null),S=d(y,"frames",null);if(E&&S){var C=d(E,"frameTags",[]);C.forEach(function(P){var R=[],A=h(P,"name",null),M=h(P,"from",0),O=h(P,"to",0),F=h(P,"direction","forward");if(!!A&&(!p||p&&p.indexOf(A)>-1)){for(var I=[],B=Number.MAX_SAFE_INTEGER,V=M;V<=O;V++){var U=V.toString(),Y=S[U];if(Y){var W=h(Y,"duration",Number.MAX_SAFE_INTEGER);W<B&&(B=W),I.push({frame:U,duration:W})}}I.forEach(function(N){R.push({key:g,frame:N.frame,duration:B-N.duration})});var w=B*R.length;F==="reverse"&&(R=R.reverse());var L={key:A,frames:R,duration:w,yoyo:F==="pingpong"},D=T.create(L);D&&x.push(D)}})}return x},create:function(g){var p=g.key,x=!1;return p&&(x=this.get(p),x||(x=new s(this,p,g),this.anims.set(p,x),this.emit(o.ADD_ANIMATION,p,x))),x},fromJSON:function(g,p){p===void 0&&(p=!1),p&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var x=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var y=0;y<g.anims.length;y++)x.push(this.create(g.anims[y]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&x.push(this.create(g));return x},generateFrameNames:function(g,p){var x=d(p,"prefix",""),y=d(p,"start",0),T=d(p,"end",0),E=d(p,"suffix",""),S=d(p,"zeroPad",0),C=d(p,"outputArray",[]),P=d(p,"frames",!1),R=this.textureManager.get(g);if(!R)return C;var A;if(p)for(P||(P=f(y,T)),A=0;A<P.length;A++){var M=x+l(P[A],S,"0",1)+E;R.has(M)?C.push({key:g,frame:M}):console.warn("generateFrameNames: Frame missing: "+M+" from texture: "+g)}else for(P=R.getFrameNames(),A=0;A<P.length;A++)C.push({key:g,frame:P[A]});return C},generateFrameNumbers:function(g,p){var x=d(p,"start",0),y=d(p,"end",-1),T=d(p,"first",!1),E=d(p,"outputArray",[]),S=d(p,"frames",!1),C=this.textureManager.get(g);if(!C)return E;T&&C.has(T)&&E.push({key:g,frame:T}),S||(y===-1&&(y=C.frameTotal-2),S=f(x,y));for(var P=0;P<S.length;P++)C.has(S[P])?E.push({key:g,frame:S[P]}):console.warn("generateFrameNumbers: Frame "+P+" missing from texture: "+g);return E},get:function(g){return this.anims.get(g)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(o.PAUSE_ALL)),this},play:function(g,p){Array.isArray(p)||(p=[p]);for(var x=0;x<p.length;x++)p[x].anims.play(g);return this},staggerPlay:function(g,p,x,y){x===void 0&&(x=0),y===void 0&&(y=!0),Array.isArray(p)||(p=[p]);var T=p.length;y||T--;for(var E=0;E<p.length;E++){var S=x<0?Math.abs(x)*(T-E):x*E;p[E].anims.playAfterDelay(g,S)}return this},remove:function(g){var p=this.get(g);return p&&(this.emit(o.REMOVE_ANIMATION,g,p),this.anims.delete(g),this.removeMix(g)),p},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(o.RESUME_ALL)),this},toJSON:function(g){var p={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?p.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(x,y){p.anims.push(y.toJSON())}),p},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});e.exports=c},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=[],r,h=!1;if((n||a)&&(h=!0,n||(n=""),a||(a="")),u<s)for(r=s;r>=u;r--)h?o.push(n+r.toString()+a):o.push(r);else for(r=s;r<=u;r++)h?o.push(n+r.toString()+a):o.push(r);return o};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(102),n=t(9),a=t(324),o=new s({initialize:function(){this.entries=new u,this.events=new n},add:function(r,h){return this.entries.set(r,h),this.events.emit(a.ADD,this,r,h),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var h=this.get(r);return h&&(this.entries.delete(r),this.events.emit(a.REMOVE,this,r,h.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:t(736),REMOVE:t(737)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(323),u=t(0),n=t(22),a=new u({initialize:function(r){this.game=r,this.binary=new s,this.bitmapFont=new s,this.json=new s,this.physics=new s,this.shader=new s,this.audio=new s,this.video=new s,this.text=new s,this.html=new s,this.obj=new s,this.tilemap=new s,this.xml=new s,this.custom={},this.game.events.once(n.DESTROY,this.destroy,this)},addCustom:function(o){return this.custom.hasOwnProperty(o)||(this.custom[o]=new s),this.custom[o]},destroy:function(){for(var o=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<o.length;r++)this[o[r]].destroy(),this[o[r]]=null;for(var h in this.custom)this.custom[h].destroy();this.custom=null,this.game=null}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(133),u=t(190),n=t(18),a=t(0),o=t(11),r=t(333),h=t(37),d=t(135),l=t(10),f=t(3),c=new a({Extends:s,Mixins:[o.Flip,o.Tint,o.Pipeline],initialize:function(p,x,y,T){s.call(this,p,x,y,T),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new f(1,1),this.followOffset=new f,this.deadzone=null,this._follow=null},setDeadzone:function(g,p){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=p):this.deadzone=new l(0,0,g,p),this._follow){var x=this.width/2,y=this.height/2,T=this._follow.x-this.followOffset.x,E=this._follow.y-this.followOffset.y;this.midPoint.set(T,E),this.scrollX=T-x,this.scrollY=E-y}u(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,p,x,y,T,E){return this.fadeEffect.start(!1,g,p,x,y,!0,T,E)},fadeOut:function(g,p,x,y,T,E){return this.fadeEffect.start(!0,g,p,x,y,!0,T,E)},fadeFrom:function(g,p,x,y,T,E,S){return this.fadeEffect.start(!1,g,p,x,y,T,E,S)},fade:function(g,p,x,y,T,E,S){return this.fadeEffect.start(!0,g,p,x,y,T,E,S)},flash:function(g,p,x,y,T,E,S){return this.flashEffect.start(g,p,x,y,T,E,S)},shake:function(g,p,x,y,T){return this.shakeEffect.start(g,p,x,y,T)},pan:function(g,p,x,y,T,E,S){return this.panEffect.start(g,p,x,y,T,E,S)},rotateTo:function(g,p,x,y,T,E,S){return this.rotateToEffect.start(g,p,x,y,T,E,S)},zoomTo:function(g,p,x,y,T,E){return this.zoomEffect.start(g,p,x,y,T,E)},preRender:function(){this.renderList.length=0;var g=this.width,p=this.height,x=g*.5,y=p*.5,T=this.zoom,E=this.matrix,S=g*this.originX,C=p*this.originY,P=this._follow,R=this.deadzone,A=this.scrollX,M=this.scrollY;R&&u(R,this.midPoint.x,this.midPoint.y);var O=!1;if(P&&!this.panEffect.isRunning){var F=P.x-this.followOffset.x,I=P.y-this.followOffset.y;R?(F<R.x?A=d(A,A-(R.x-F),this.lerp.x):F>R.right&&(A=d(A,A+(F-R.right),this.lerp.x)),I<R.y?M=d(M,M-(R.y-I),this.lerp.y):I>R.bottom&&(M=d(M,M+(I-R.bottom),this.lerp.y))):(A=d(A,F-S,this.lerp.x),M=d(M,I-C,this.lerp.y)),O=!0}this.useBounds&&(A=this.clampX(A),M=this.clampY(M)),this.roundPixels&&(S=Math.round(S),C=Math.round(C),A=Math.round(A),M=Math.round(M)),this.scrollX=A,this.scrollY=M;var B=A+x,V=M+y;this.midPoint.set(B,V);var U=g/T,Y=p/T,W=B-U/2,w=V-Y/2;this.roundPixels&&(W=Math.round(W),w=Math.round(w)),this.worldView.setTo(W,w,U,Y),E.applyITRS(this.x+S,this.y+C,this.rotation,T,T),E.translate(-S,-C),this.shakeEffect.preRender(),O&&this.emit(h.FOLLOW_UPDATE,this,P)},setLerp:function(g,p){return g===void 0&&(g=1),p===void 0&&(p=g),this.lerp.set(g,p),this},setFollowOffset:function(g,p){return g===void 0&&(g=0),p===void 0&&(p=0),this.followOffset.set(g,p),this},startFollow:function(g,p,x,y,T,E){p===void 0&&(p=!1),x===void 0&&(x=1),y===void 0&&(y=x),T===void 0&&(T=0),E===void 0&&(E=T),this._follow=g,this.roundPixels=p,x=n(x,0,1),y=n(y,0,1),this.lerp.set(x,y),this.followOffset.set(T,E);var S=this.width/2,C=this.height/2,P=g.x-T,R=g.y-E;return this.midPoint.set(P,R),this.scrollX=P-S,this.scrollY=R-C,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,p){this.visible&&(this.rotateToEffect.update(g,p),this.panEffect.update(g,p),this.zoomEffect.update(g,p),this.shakeEffect.update(g,p),this.flashEffect.update(g,p),this.fadeEffect.update(g,p))},destroy:function(){this.resetFX(),s.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});e.exports=c},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=function(n){var a=new s;n=n.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(l,f,c,g){return f+f+c+c+g+g});var o=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(o){var r=parseInt(o[1],16),h=parseInt(o[2],16),d=parseInt(o[3],16);a.setTo(r,h,d)}return a};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return a<<24|s<<16|u<<8|n};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){a===void 0&&(a={h:0,s:0,v:0}),s/=255,u/=255,n/=255;var o=Math.min(s,u,n),r=Math.max(s,u,n),h=r-o,d=0,l=r===0?0:h/r,f=r;return r!==o&&(r===s?d=(u-n)/h+(u<n?6:0):r===u?d=(n-s)/h+2:r===n&&(d=(s-u)/h+4),d/=6),a.hasOwnProperty("_h")?(a._h=d,a._s=l,a._v=f):(a.h=d,a.s=l,a.v=f),a};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s>16777215?{a:s>>>24,r:s>>16&255,g:s>>8&255,b:s&255}:{a:255,r:s>>16&255,g:s>>8&255,b:s&255}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=function(n){return new s(n.r,n.g,n.b,n.a)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=function(n){var a=new s,o=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(n.toLowerCase());if(o){var r=parseInt(o[1],10),h=parseInt(o[2],10),d=parseInt(o[3],10),l=o[4]!==void 0?parseFloat(o[4]):1;a.setTo(r,h,d,l*255)}return a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Fade:t(761),Flash:t(762),Pan:t(763),Shake:t(796),RotateTo:t(797),Zoom:t(798)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(764),Out:t(765),InOut:t(766)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(767),Out:t(768),InOut:t(769)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(770),Out:t(771),InOut:t(772)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(773),Out:t(774),InOut:t(775)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(776),Out:t(777),InOut:t(778)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(779),Out:t(780),InOut:t(781)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=t(782)},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(783),Out:t(784),InOut:t(785)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(786),Out:t(787),InOut:t(788)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(789),Out:t(790),InOut:t(791)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(792),Out:t(793),InOut:t(794)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=t(795)},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(33),n=t(347),a=t(2),o=t(6),r=t(7),h=t(193),d=t(1),l=t(197),f=t(187),c=new s({initialize:function(p){p===void 0&&(p={});var x=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff";this.width=o(p,"width",1024),this.height=o(p,"height",768),this.zoom=o(p,"zoom",1),this.parent=o(p,"parent",void 0),this.scaleMode=o(p,"scaleMode",0),this.expandParent=o(p,"expandParent",!0),this.autoRound=o(p,"autoRound",!1),this.autoCenter=o(p,"autoCenter",0),this.resizeInterval=o(p,"resizeInterval",500),this.fullscreenTarget=o(p,"fullscreenTarget",null),this.minWidth=o(p,"minWidth",0),this.maxWidth=o(p,"maxWidth",0),this.minHeight=o(p,"minHeight",0),this.maxHeight=o(p,"maxHeight",0);var T=o(p,"scale",null);T&&(this.width=o(T,"width",this.width),this.height=o(T,"height",this.height),this.zoom=o(T,"zoom",this.zoom),this.parent=o(T,"parent",this.parent),this.scaleMode=o(T,"mode",this.scaleMode),this.expandParent=o(T,"expandParent",this.expandParent),this.autoRound=o(T,"autoRound",this.autoRound),this.autoCenter=o(T,"autoCenter",this.autoCenter),this.resizeInterval=o(T,"resizeInterval",this.resizeInterval),this.fullscreenTarget=o(T,"fullscreenTarget",this.fullscreenTarget),this.minWidth=o(T,"min.width",this.minWidth),this.maxWidth=o(T,"max.width",this.maxWidth),this.minHeight=o(T,"min.height",this.minHeight),this.maxHeight=o(T,"max.height",this.maxHeight)),this.renderType=o(p,"type",u.AUTO),this.canvas=o(p,"canvas",null),this.context=o(p,"context",null),this.canvasStyle=o(p,"canvasStyle",null),this.customEnvironment=o(p,"customEnvironment",!1),this.sceneConfig=o(p,"scene",null),this.seed=o(p,"seed",[(Date.now()*Math.random()).toString()]),h.RND=new h.RandomDataGenerator(this.seed),this.gameTitle=o(p,"title",""),this.gameURL=o(p,"url","https://phaser.io"),this.gameVersion=o(p,"version",""),this.autoFocus=o(p,"autoFocus",!0),this.domCreateContainer=o(p,"dom.createContainer",!1),this.domBehindCanvas=o(p,"dom.behindCanvas",!1),this.domPointerEvents=o(p,"dom.pointerEvents","none"),this.inputKeyboard=o(p,"input.keyboard",!0),this.inputKeyboardEventTarget=o(p,"input.keyboard.target",window),this.inputKeyboardCapture=o(p,"input.keyboard.capture",[]),this.inputMouse=o(p,"input.mouse",!0),this.inputMouseEventTarget=o(p,"input.mouse.target",null),this.inputMousePreventDefaultDown=o(p,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=o(p,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=o(p,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=o(p,"input.mouse.preventDefaultWheel",!0),this.inputTouch=o(p,"input.touch",n.input.touch),this.inputTouchEventTarget=o(p,"input.touch.target",null),this.inputTouchCapture=o(p,"input.touch.capture",!0),this.inputActivePointers=o(p,"input.activePointers",1),this.inputSmoothFactor=o(p,"input.smoothFactor",0),this.inputWindowEvents=o(p,"input.windowEvents",!0),this.inputGamepad=o(p,"input.gamepad",!1),this.inputGamepadEventTarget=o(p,"input.gamepad.target",window),this.disableContextMenu=o(p,"disableContextMenu",!1),this.audio=o(p,"audio",{}),this.hideBanner=o(p,"banner",null)===!1,this.hidePhaser=o(p,"banner.hidePhaser",!1),this.bannerTextColor=o(p,"banner.text",y),this.bannerBackgroundColor=o(p,"banner.background",x),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=o(p,"fps",null);var E=o(p,"render",p);this.pipeline=o(E,"pipeline",null),this.antialias=o(E,"antialias",!0),this.antialiasGL=o(E,"antialiasGL",!0),this.mipmapFilter=o(E,"mipmapFilter","LINEAR"),this.desynchronized=o(E,"desynchronized",!1),this.roundPixels=o(E,"roundPixels",!1),this.pixelArt=o(E,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=o(E,"transparent",!1),this.clearBeforeRender=o(E,"clearBeforeRender",!0),this.preserveDrawingBuffer=o(E,"preserveDrawingBuffer",!1),this.premultipliedAlpha=o(E,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=o(E,"failIfMajorPerformanceCaveat",!1),this.powerPreference=o(E,"powerPreference","default"),this.batchSize=o(E,"batchSize",4096),this.maxTextures=o(E,"maxTextures",-1),this.maxLights=o(E,"maxLights",10);var S=o(p,"backgroundColor",0);this.backgroundColor=f(S),this.transparent&&(this.backgroundColor=f(0),this.backgroundColor.alpha=0),this.preBoot=o(p,"callbacks.preBoot",d),this.postBoot=o(p,"callbacks.postBoot",d),this.physics=o(p,"physics",{}),this.defaultPhysicsSystem=o(this.physics,"default",!1),this.loaderBaseURL=o(p,"loader.baseURL",""),this.loaderPath=o(p,"loader.path","");var C=n.os.android?6:32;this.loaderMaxParallelDownloads=o(p,"loader.maxParallelDownloads",C),this.loaderCrossOrigin=o(p,"loader.crossOrigin",void 0),this.loaderResponseType=o(p,"loader.responseType",""),this.loaderAsync=o(p,"loader.async",!0),this.loaderUser=o(p,"loader.user",""),this.loaderPassword=o(p,"loader.password",""),this.loaderTimeout=o(p,"loader.timeout",0),this.loaderWithCredentials=o(p,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=o(p,"plugins",null),R=l.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:r(P)&&(this.installGlobalPlugins=a(P,"global",[]),this.installScenePlugins=a(P,"scene",[]),Array.isArray(P.default)?R=P.default:Array.isArray(P.defaultMerge)&&(R=R.concat(P.defaultMerge)))),this.defaultPlugins=R;var A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=o(p,"images.default",A+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=o(p,"images.missing",A+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=o(p,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=u.WEBGL:window.FORCE_CANVAS&&(this.renderType=u.CANVAS))}});e.exports=c},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={os:t(105),browser:t(136),features:t(191),input:t(808),audio:t(809),video:t(810),fullscreen:t(811),canvasFeatures:t(348)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u={supportInverseAlpha:!1,supportNewBlendModes:!1};function n(){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",h="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",d=new Image;return d.onload=function(){var l=new Image;l.onload=function(){var f=s.create(l,6,1),c=f.getContext("2d");if(c.globalCompositeOperation="multiply",c.drawImage(d,0,0),c.drawImage(l,2,0),!c.getImageData(2,0,1,1))return!1;var g=c.getImageData(2,0,1,1).data;s.remove(l),u.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},l.src=r+"/wCKxvRF"+h},d.src=r+"AP804Oa6"+h,!1}function a(){var r=s.create(this,2,1),h=r.getContext("2d");h.fillStyle="rgba(10, 20, 30, 0.5)",h.fillRect(0,0,1,1);var d=h.getImageData(0,0,1,1);if(d===null)return!1;h.putImageData(d,1,0);var l=h.getImageData(1,0,1,1);return l.data[0]===d.data[0]&&l.data[1]===d.data[1]&&l.data[2]===d.data[2]&&l.data[3]===d.data[3]}function o(){return typeof importScripts!="function"&&document!==void 0&&(u.supportNewBlendModes=n(),u.supportInverseAlpha=a()),u}e.exports=o()},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return Math.atan2(a-u,n-s)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.atan2(u.y-s.y,u.x-s.x)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s=s%(2*Math.PI),s>=0?s:s+2*Math.PI};e.exports=t},function(e,v){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x-u.x,a=s.y-u.y;return Math.sqrt(n*n+a*a)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=s-n,r=u-a;return o*o+r*r};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=1e-4),s>u-n};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=1e-4),s<u+n};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(357),u=function(n,a){return s(n)/s(a)/s(n-a)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(s===0)return 1;for(var u=s;--s;)u*=s;return u};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(o,r){var h=1-o;return h*h*h*r}function s(o,r){var h=1-o;return 3*h*h*o*r}function u(o,r){return 3*(1-o)*o*o*r}function n(o,r){return o*o*o*r}var a=function(o,r,h,d,l){return t(o,r)+s(o,h)+u(o,d)+n(o,l)};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(a,o){var r=1-a;return r*r*o}function s(a,o){return 2*(1-a)*a*o}function u(a,o){return a*a*o}var n=function(a,o,r,h){return t(a,o)+s(a,r)+u(a,h)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(184),u=function(n,a,o){return a+(o-a)*s(n,0,1)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=Math.log(s)/.6931471805599453;return 1<<Math.ceil(u)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x,a=s.y;return s.x=n*Math.cos(u)-a*Math.sin(u),s.y=n*Math.sin(u)+a*Math.cos(u),s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s>0?Math.ceil(s):Math.floor(s)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a){this.val=new Float32Array(9),a?this.copy(a):this.identity()},clone:function(){return new u(this)},set:function(n){return this.copy(n)},copy:function(n){var a=this.val,o=n.val;return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[8]=o[8],this},fromMat4:function(n){var a=n.val,o=this.val;return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[4],o[4]=a[5],o[5]=a[6],o[6]=a[8],o[7]=a[9],o[8]=a[10],this},fromArray:function(n){var a=this.val;return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],this},identity:function(){var n=this.val;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,this},transpose:function(){var n=this.val,a=n[1],o=n[2],r=n[5];return n[1]=n[3],n[2]=n[6],n[3]=a,n[5]=n[7],n[6]=o,n[7]=r,this},invert:function(){var n=this.val,a=n[0],o=n[1],r=n[2],h=n[3],d=n[4],l=n[5],f=n[6],c=n[7],g=n[8],p=g*d-l*c,x=-g*h+l*f,y=c*h-d*f,T=a*p+o*x+r*y;return T?(T=1/T,n[0]=p*T,n[1]=(-g*o+r*c)*T,n[2]=(l*o-r*d)*T,n[3]=x*T,n[4]=(g*a-r*f)*T,n[5]=(-l*a+r*h)*T,n[6]=y*T,n[7]=(-c*a+o*f)*T,n[8]=(d*a-o*h)*T,this):null},adjoint:function(){var n=this.val,a=n[0],o=n[1],r=n[2],h=n[3],d=n[4],l=n[5],f=n[6],c=n[7],g=n[8];return n[0]=d*g-l*c,n[1]=r*c-o*g,n[2]=o*l-r*d,n[3]=l*f-h*g,n[4]=a*g-r*f,n[5]=r*h-a*l,n[6]=h*c-d*f,n[7]=o*f-a*c,n[8]=a*d-o*h,this},determinant:function(){var n=this.val,a=n[0],o=n[1],r=n[2],h=n[3],d=n[4],l=n[5],f=n[6],c=n[7],g=n[8];return a*(g*d-l*c)+o*(-g*h+l*f)+r*(c*h-d*f)},multiply:function(n){var a=this.val,o=a[0],r=a[1],h=a[2],d=a[3],l=a[4],f=a[5],c=a[6],g=a[7],p=a[8],x=n.val,y=x[0],T=x[1],E=x[2],S=x[3],C=x[4],P=x[5],R=x[6],A=x[7],M=x[8];return a[0]=y*o+T*d+E*c,a[1]=y*r+T*l+E*g,a[2]=y*h+T*f+E*p,a[3]=S*o+C*d+P*c,a[4]=S*r+C*l+P*g,a[5]=S*h+C*f+P*p,a[6]=R*o+A*d+M*c,a[7]=R*r+A*l+M*g,a[8]=R*h+A*f+M*p,this},translate:function(n){var a=this.val,o=n.x,r=n.y;return a[6]=o*a[0]+r*a[3]+a[6],a[7]=o*a[1]+r*a[4]+a[7],a[8]=o*a[2]+r*a[5]+a[8],this},rotate:function(n){var a=this.val,o=a[0],r=a[1],h=a[2],d=a[3],l=a[4],f=a[5],c=Math.sin(n),g=Math.cos(n);return a[0]=g*o+c*d,a[1]=g*r+c*l,a[2]=g*h+c*f,a[3]=g*d-c*o,a[4]=g*l-c*r,a[5]=g*f-c*h,this},scale:function(n){var a=this.val,o=n.x,r=n.y;return a[0]=o*a[0],a[1]=o*a[1],a[2]=o*a[2],a[3]=r*a[3],a[4]=r*a[4],a[5]=r*a[5],this},fromQuat:function(n){var a=n.x,o=n.y,r=n.z,h=n.w,d=a+a,l=o+o,f=r+r,c=a*d,g=a*l,p=a*f,x=o*l,y=o*f,T=r*f,E=h*d,S=h*l,C=h*f,P=this.val;return P[0]=1-(x+T),P[3]=g+C,P[6]=p-S,P[1]=g-C,P[4]=1-(c+T),P[7]=y+E,P[2]=p+S,P[5]=y-E,P[8]=1-(c+x),this},normalFromMat4:function(n){var a=n.val,o=this.val,r=a[0],h=a[1],d=a[2],l=a[3],f=a[4],c=a[5],g=a[6],p=a[7],x=a[8],y=a[9],T=a[10],E=a[11],S=a[12],C=a[13],P=a[14],R=a[15],A=r*c-h*f,M=r*g-d*f,O=r*p-l*f,F=h*g-d*c,I=h*p-l*c,B=d*p-l*g,V=x*C-y*S,U=x*P-T*S,Y=x*R-E*S,W=y*P-T*C,w=y*R-E*C,L=T*R-E*P,D=A*L-M*w+O*W+F*Y-I*U+B*V;return D?(D=1/D,o[0]=(c*L-g*w+p*W)*D,o[1]=(g*Y-f*L-p*U)*D,o[2]=(f*w-c*Y+p*V)*D,o[3]=(d*w-h*L-l*W)*D,o[4]=(r*L-d*Y+l*U)*D,o[5]=(h*Y-r*w-l*V)*D,o[6]=(C*B-P*I+R*F)*D,o[7]=(P*O-S*B-R*M)*D,o[8]=(S*I-C*O+R*A)*D,this):null}});e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(364),n=t(1),a=t(39),o=1e-6,r=new Int8Array([1,2,0]),h=new Float32Array([0,0,0]),d=new a(1,0,0),l=new a(0,1,0),f=new a,c=new u,g=new s({initialize:function(x,y,T,E){this.onChangeCallback=n,this.set(x,y,T,E)},x:{get:function(){return this._x},set:function(p){this._x=p,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(p){this._y=p,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(p){this._z=p,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(p){this._w=p,this.onChangeCallback(this)}},copy:function(p){return this.set(p)},set:function(p,x,y,T,E){return E===void 0&&(E=!0),typeof p=="object"?(this._x=p.x||0,this._y=p.y||0,this._z=p.z||0,this._w=p.w||0):(this._x=p||0,this._y=x||0,this._z=y||0,this._w=T||0),E&&this.onChangeCallback(this),this},add:function(p){return this._x+=p.x,this._y+=p.y,this._z+=p.z,this._w+=p.w,this.onChangeCallback(this),this},subtract:function(p){return this._x-=p.x,this._y-=p.y,this._z-=p.z,this._w-=p.w,this.onChangeCallback(this),this},scale:function(p){return this._x*=p,this._y*=p,this._z*=p,this._w*=p,this.onChangeCallback(this),this},length:function(){var p=this.x,x=this.y,y=this.z,T=this.w;return Math.sqrt(p*p+x*x+y*y+T*T)},lengthSq:function(){var p=this.x,x=this.y,y=this.z,T=this.w;return p*p+x*x+y*y+T*T},normalize:function(){var p=this.x,x=this.y,y=this.z,T=this.w,E=p*p+x*x+y*y+T*T;return E>0&&(E=1/Math.sqrt(E),this._x=p*E,this._y=x*E,this._z=y*E,this._w=T*E),this.onChangeCallback(this),this},dot:function(p){return this.x*p.x+this.y*p.y+this.z*p.z+this.w*p.w},lerp:function(p,x){x===void 0&&(x=0);var y=this.x,T=this.y,E=this.z,S=this.w;return this.set(y+x*(p.x-y),T+x*(p.y-T),E+x*(p.z-E),S+x*(p.w-S))},rotationTo:function(p,x){var y=p.x*x.x+p.y*x.y+p.z*x.z;return y<-.999999?(f.copy(d).cross(p).length()<o&&f.copy(l).cross(p),f.normalize(),this.setAxisAngle(f,Math.PI)):y>.999999?this.set(0,0,0,1):(f.copy(p).cross(x),this._x=f.x,this._y=f.y,this._z=f.z,this._w=1+y,this.normalize())},setAxes:function(p,x,y){var T=c.val;return T[0]=x.x,T[3]=x.y,T[6]=x.z,T[1]=y.x,T[4]=y.y,T[7]=y.z,T[2]=-p.x,T[5]=-p.y,T[8]=-p.z,this.fromMat3(c).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(p,x){x=x*.5;var y=Math.sin(x);return this.set(y*p.x,y*p.y,y*p.z,Math.cos(x))},multiply:function(p){var x=this.x,y=this.y,T=this.z,E=this.w,S=p.x,C=p.y,P=p.z,R=p.w;return this.set(x*R+E*S+y*P-T*C,y*R+E*C+T*S-x*P,T*R+E*P+x*C-y*S,E*R-x*S-y*C-T*P)},slerp:function(p,x){var y=this.x,T=this.y,E=this.z,S=this.w,C=p.x,P=p.y,R=p.z,A=p.w,M=y*C+T*P+E*R+S*A;M<0&&(M=-M,C=-C,P=-P,R=-R,A=-A);var O=1-x,F=x;if(1-M>o){var I=Math.acos(M),B=Math.sin(I);O=Math.sin((1-x)*I)/B,F=Math.sin(x*I)/B}return this.set(O*y+F*C,O*T+F*P,O*E+F*R,O*S+F*A)},invert:function(){var p=this.x,x=this.y,y=this.z,T=this.w,E=p*p+x*x+y*y+T*T,S=E?1/E:0;return this.set(-p*S,-x*S,-y*S,T*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(p){p*=.5;var x=this.x,y=this.y,T=this.z,E=this.w,S=Math.sin(p),C=Math.cos(p);return this.set(x*C+E*S,y*C+T*S,T*C-y*S,E*C-x*S)},rotateY:function(p){p*=.5;var x=this.x,y=this.y,T=this.z,E=this.w,S=Math.sin(p),C=Math.cos(p);return this.set(x*C-T*S,y*C+E*S,T*C+x*S,E*C-y*S)},rotateZ:function(p){p*=.5;var x=this.x,y=this.y,T=this.z,E=this.w,S=Math.sin(p),C=Math.cos(p);return this.set(x*C+y*S,y*C-x*S,T*C+E*S,E*C-T*S)},calculateW:function(){var p=this.x,x=this.y,y=this.z;return this.w=-Math.sqrt(1-p*p-x*x-y*y),this},setFromEuler:function(p,x){var y=p.x/2,T=p.y/2,E=p.z/2,S=Math.cos(y),C=Math.cos(T),P=Math.cos(E),R=Math.sin(y),A=Math.sin(T),M=Math.sin(E);switch(p.order){case"XYZ":{this.set(R*C*P+S*A*M,S*A*P-R*C*M,S*C*M+R*A*P,S*C*P-R*A*M,x);break}case"YXZ":{this.set(R*C*P+S*A*M,S*A*P-R*C*M,S*C*M-R*A*P,S*C*P+R*A*M,x);break}case"ZXY":{this.set(R*C*P-S*A*M,S*A*P+R*C*M,S*C*M+R*A*P,S*C*P-R*A*M,x);break}case"ZYX":{this.set(R*C*P-S*A*M,S*A*P+R*C*M,S*C*M-R*A*P,S*C*P+R*A*M,x);break}case"YZX":{this.set(R*C*P+S*A*M,S*A*P+R*C*M,S*C*M-R*A*P,S*C*P-R*A*M,x);break}case"XZY":{this.set(R*C*P-S*A*M,S*A*P-R*C*M,S*C*M+R*A*P,S*C*P+R*A*M,x);break}}return this},setFromRotationMatrix:function(p){var x=p.val,y=x[0],T=x[4],E=x[8],S=x[1],C=x[5],P=x[9],R=x[2],A=x[6],M=x[10],O=y+C+M,F;return O>0?(F=.5/Math.sqrt(O+1),this.set((A-P)*F,(E-R)*F,(S-T)*F,.25/F)):y>C&&y>M?(F=2*Math.sqrt(1+y-C-M),this.set(.25*F,(T+S)/F,(E+R)/F,(A-P)/F)):C>M?(F=2*Math.sqrt(1+C-y-M),this.set((T+S)/F,.25*F,(P+A)/F,(E-R)/F)):(F=2*Math.sqrt(1+M-y-C),this.set((E+R)/F,(P+A)/F,.25*F,(S-T)/F)),this},fromMat3:function(p){var x=p.val,y=x[0]+x[4]+x[8],T;if(y>0)T=Math.sqrt(y+1),this.w=.5*T,T=.5/T,this._x=(x[7]-x[5])*T,this._y=(x[2]-x[6])*T,this._z=(x[3]-x[1])*T;else{var E=0;x[4]>x[0]&&(E=1),x[8]>x[E*3+E]&&(E=2);var S=r[E],C=r[S];T=Math.sqrt(x[E*3+E]-x[S*3+S]-x[C*3+C]+1),h[E]=.5*T,T=.5/T,h[S]=(x[S*3+E]+x[E*3+S])*T,h[C]=(x[C*3+E]+x[E*3+C])*T,this._x=h[0],this._y=h[1],this._z=h[2],this._w=(x[C*3+S]-x[S*3+C])*T}return this.onChangeCallback(this),this}});e.exports=g},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(367),u=t(31),n=t(33),a=t(191),o=function(r){var h=r.config;if((h.customEnvironment||h.canvas)&&h.renderType===n.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!h.customEnvironment&&!h.canvas&&h.renderType!==n.HEADLESS)if(h.renderType===n.CANVAS||h.renderType!==n.CANVAS&&!a.webGL)if(a.canvas)h.renderType=n.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else h.renderType=n.WEBGL;h.antialias||u.disableSmoothing();var d=r.scale.baseSize,l=d.width,f=d.height;if(h.canvas?(r.canvas=h.canvas,r.canvas.width=l,r.canvas.height=f):r.canvas=u.create(r,l,f,h.renderType),h.canvasStyle&&(r.canvas.style=h.canvasStyle),h.antialias||s.setCrisp(r.canvas),h.renderType!==n.HEADLESS){var c,g;c=t(368),g=t(371),h.renderType===n.WEBGL?r.renderer=new g(r):(r.renderer=new c(r),r.context=r.renderer.gameContext)}};e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCrisp:function(s){var u=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return u.forEach(function(n){s.style["image-rendering"]=n}),s.style.msInterpolationMode="nearest-neighbor",s},setBicubic:function(s){return s.style["image-rendering"]="auto",s.style.msInterpolationMode="bicubic",s}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(37),u=t(369),n=t(0),a=t(33),o=t(9),r=t(91),h=t(370),d=t(104),l=t(106),f=t(25),c=new n({Extends:o,initialize:function(p){o.call(this);var x=p.config;this.config={clearBeforeRender:x.clearBeforeRender,backgroundColor:x.backgroundColor,antialias:x.antialias,roundPixels:x.roundPixels},this.game=p,this.type=a.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=p.canvas;var y={alpha:p.config.transparent,desynchronized:p.config.desynchronized};this.gameContext=x.context?x.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=p.config.antialias,this.blendModes=h(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(l.READY,this.boot,this)},boot:function(){var g=this.game,p=g.scale.baseSize;this.width=p.width,this.height=p.height,this.isBooted=!0,g.scale.on(d.RESIZE,this.onResize,this),this.resize(p.width,p.height)},onResize:function(g,p){(p.width!==this.width||p.height!==this.height)&&this.resize(p.width,p.height)},resize:function(g,p){this.width=g,this.height=p,this.emit(r.RESIZE,g,p)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,p=this.config,x=this.width,y=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),p.clearBeforeRender&&(g.clearRect(0,0,x,y),p.transparent||(g.fillStyle=p.backgroundColor.rgba,g.fillRect(0,0,x,y))),g.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(g,p,x){var y=p.length;this.emit(r.RENDER,g,x);var T=x.x,E=x.y,S=x.width,C=x.height,P=x.renderToTexture?x.context:g.sys.context;P.save(),this.game.scene.customViewports&&(P.beginPath(),P.rect(T,E,S,C),P.clip()),this.currentContext=P;var R=x.mask;R&&R.preRenderCanvas(this,null,x._maskCamera),x.transparent||(P.fillStyle=x.backgroundColor.rgba,P.fillRect(T,E,S,C)),P.globalAlpha=x.alpha,P.globalCompositeOperation="source-over",this.drawCount+=y,x.renderToTexture&&x.emit(s.PRE_RENDER,x),x.matrix.copyToContext(P);for(var A=0;A<y;A++){var M=p[A];M.mask&&M.mask.preRenderCanvas(this,M,x),M.renderCanvas(this,M,x),M.mask&&M.mask.postRenderCanvas(this,M,x)}P.setTransform(1,0,0,1,0,0),P.globalCompositeOperation="source-over",P.globalAlpha=1,x.flashEffect.postRenderCanvas(P),x.fadeEffect.postRenderCanvas(P),x.dirty=!1,R&&R.postRenderCanvas(this),P.restore(),x.renderToTexture&&(x.emit(s.POST_RENDER,x),x.renderToGame&&g.sys.context.drawImage(x.canvas,T,E))},postRender:function(){var g=this.gameContext;g.restore(),this.emit(r.POST_RENDER);var p=this.snapshotState;p.callback&&(u(this.gameCanvas,p),p.callback=null)},snapshotCanvas:function(g,p,x,y,T,E,S,C,P){x===void 0&&(x=!1),this.snapshotArea(y,T,E,S,p,C,P);var R=this.snapshotState;return R.getPixel=x,u(this.canvas,R),R.callback=null,this},snapshot:function(g,p,x){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,p,x)},snapshotArea:function(g,p,x,y,T,E,S){var C=this.snapshotState;return C.callback=T,C.type=E,C.encoder=S,C.getPixel=!1,C.x=g,C.y=p,C.width=Math.min(x,this.gameCanvas.width),C.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(g,p,x){return this.snapshotArea(g,p,1,1,x),this.snapshotState.getPixel=!0,this},batchSprite:function(g,p,x,y){var T=x.alpha*g.alpha;if(T!==0){var E=this.currentContext,S=this._tempMatrix1,C=this._tempMatrix2,P=p.canvasData,R=P.x,A=P.y,M=p.cutWidth,O=p.cutHeight,F=p.customPivot,I=p.source.resolution,B=g.displayOriginX,V=g.displayOriginY,U=-B+p.x,Y=-V+p.y;if(g.isCropped){var W=g._crop;(W.flipX!==g.flipX||W.flipY!==g.flipY)&&p.updateCropUVs(W,g.flipX,g.flipY),M=W.cw,O=W.ch,R=W.cx,A=W.cy,U=-B+W.x,Y=-V+W.y,g.flipX&&(U>=0?U=-(U+M):U<0&&(U=Math.abs(U)-M)),g.flipY&&(Y>=0?Y=-(Y+O):Y<0&&(Y=Math.abs(Y)-O))}var w=1,L=1;g.flipX&&(F||(U+=-p.realWidth+B*2),w=-1),g.flipY&&(F||(Y+=-p.realHeight+V*2),L=-1),C.applyITRS(g.x,g.y,g.rotation,g.scaleX*w,g.scaleY*L),S.copyFrom(x.matrix),y?(S.multiplyWithOffset(y,-x.scrollX*g.scrollFactorX,-x.scrollY*g.scrollFactorY),C.e=g.x,C.f=g.y):(C.e-=x.scrollX*g.scrollFactorX,C.f-=x.scrollY*g.scrollFactorY),S.multiply(C),E.save(),S.setToContext(E),E.globalCompositeOperation=this.blendModes[g.blendMode],E.globalAlpha=T,E.imageSmoothingEnabled=!(!this.antialias||p.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,x),E.drawImage(p.source.image,R,A,M,O,U,Y,M/I,O/I),g.mask&&g.mask.postRenderCanvas(this,g,x),E.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});e.exports=c},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(38),n=t(2),a=function(o,r){var h=n(r,"callback"),d=n(r,"type","image/png"),l=n(r,"encoder",.92),f=Math.abs(Math.round(n(r,"x",0))),c=Math.abs(Math.round(n(r,"y",0))),g=n(r,"width",o.width),p=n(r,"height",o.height),x=n(r,"getPixel",!1);if(x){var y=o.getContext("2d"),T=y.getImageData(f,c,1,1),E=T.data;h.call(null,new u(E[0],E[1],E[2],E[3]/255))}else if(f!==0||c!==0||g!==o.width||p!==o.height){var S=s.createWebGL(this,g,p),C=S.getContext("2d");C.drawImage(o,f,c,g,p,0,0,g,p);var P=new Image;P.onerror=function(){h.call(null),s.remove(S)},P.onload=function(){h.call(null,P),s.remove(S)},P.src=S.toDataURL(d,l)}else{var R=new Image;R.onerror=function(){h.call(null)},R.onload=function(){h.call(null,R)},R.src=o.toDataURL(d,l)}};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(348),n=function(){var a=[],o=u.supportNewBlendModes,r="source-over";return a[s.NORMAL]=r,a[s.ADD]="lighter",a[s.MULTIPLY]=o?"multiply":r,a[s.SCREEN]=o?"screen":r,a[s.OVERLAY]=o?"overlay":r,a[s.DARKEN]=o?"darken":r,a[s.LIGHTEN]=o?"lighten":r,a[s.COLOR_DODGE]=o?"color-dodge":r,a[s.COLOR_BURN]=o?"color-burn":r,a[s.HARD_LIGHT]=o?"hard-light":r,a[s.SOFT_LIGHT]=o?"soft-light":r,a[s.DIFFERENCE]=o?"difference":r,a[s.EXCLUSION]=o?"exclusion":r,a[s.HUE]=o?"hue":r,a[s.SATURATION]=o?"saturation":r,a[s.COLOR]=o?"color":r,a[s.LUMINOSITY]=o?"luminosity":r,a[s.ERASE]="destination-out",a[s.SOURCE_IN]="source-in",a[s.SOURCE_OUT]="source-out",a[s.SOURCE_ATOP]="source-atop",a[s.DESTINATION_OVER]="destination-over",a[s.DESTINATION_IN]="destination-in",a[s.DESTINATION_OUT]="destination-out",a[s.DESTINATION_ATOP]="destination-atop",a[s.LIGHTER]="lighter",a[s.COPY]="copy",a[s.XOR]="xor",a};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93),u=t(37),n=t(0),a=t(33),o=t(9),r=t(91),h=t(22),d=t(138),l=t(69),f=t(1),c=t(372),g=t(141),p=t(104),x=t(106),y=t(12),T=t(383),E=new n({Extends:o,initialize:function(C){o.call(this);var P=C.config,R={alpha:P.transparent,desynchronized:P.desynchronized,depth:!1,antialias:P.antialiasGL,premultipliedAlpha:P.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:P.failIfMajorPerformanceCaveat,powerPreference:P.powerPreference,preserveDrawingBuffer:P.preserveDrawingBuffer};this.config={clearBeforeRender:P.clearBeforeRender,antialias:P.antialias,backgroundColor:P.backgroundColor,contextCreation:R,roundPixels:P.roundPixels,maxTextures:P.maxTextures,maxTextureSize:P.maxTextureSize,batchSize:P.batchSize,maxLights:P.maxLights,mipmapFilter:P.mipmapFilter},this.game=C,this.type=a.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=C.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=f,this.contextRestoredHandler=f,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(S){var C,P=this.game,R=this.canvas,A=S.backgroundColor;if(P.config.context?C=P.config.context:C=R.getContext("webgl",S.contextCreation)||R.getContext("experimental-webgl",S.contextCreation),!C||C.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=C;var M=this;this.contextLostHandler=function(D){M.contextLost=!0,M.game.events.emit(h.CONTEXT_LOST,M),D.preventDefault()},this.contextRestoredHandler=function(){M.contextLost=!1,M.init(M.config),M.game.events.emit(h.CONTEXT_RESTORED,M)},R.addEventListener("webglcontextlost",this.contextLostHandler,!1),R.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),P.context=C;for(var O=0;O<=27;O++)this.blendModes.push({func:[C.ONE,C.ONE_MINUS_SRC_ALPHA],equation:C.FUNC_ADD});this.blendModes[1].func=[C.ONE,C.DST_ALPHA],this.blendModes[2].func=[C.DST_COLOR,C.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[C.ONE,C.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[C.ZERO,C.ONE_MINUS_SRC_ALPHA],equation:C.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=C.BYTE,this.glFormats[1]=C.SHORT,this.glFormats[2]=C.UNSIGNED_BYTE,this.glFormats[3]=C.UNSIGNED_SHORT,this.glFormats[4]=C.FLOAT,this.glFuncMap={mat2:{func:C.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:C.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:C.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:C.uniform1f,length:1},"1fv":{func:C.uniform1fv,length:1},"1i":{func:C.uniform1i,length:1},"1iv":{func:C.uniform1iv,length:1},"2f":{func:C.uniform2f,length:2},"2fv":{func:C.uniform2fv,length:1},"2i":{func:C.uniform2i,length:2},"2iv":{func:C.uniform2iv,length:1},"3f":{func:C.uniform3f,length:3},"3fv":{func:C.uniform3fv,length:1},"3i":{func:C.uniform3i,length:3},"3iv":{func:C.uniform3iv,length:1},"4f":{func:C.uniform4f,length:4},"4fv":{func:C.uniform4fv,length:1},"4i":{func:C.uniform4i,length:4},"4iv":{func:C.uniform4iv,length:1}};var F=C.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=C.getParameter(C.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=C.getParameter(C.MAX_TEXTURE_SIZE));var I="WEBGL_compressed_texture_",B="WEBKIT_"+I;this.compression.ETC1=C.getExtension(I+"etc1")||C.getExtension(B+"etc1"),this.compression.PVRTC=C.getExtension(I+"pvrtc")||C.getExtension(B+"pvrtc"),this.compression.S3TC=C.getExtension(I+"s3tc")||C.getExtension(B+"s3tc"),this.supportedExtensions=F;var V="ANGLE_instanced_arrays";this.instancedArraysExtension=F.indexOf(V)>-1?C.getExtension(V):null;var U="OES_vertex_array_object";this.vaoExtension=F.indexOf(U)>-1?C.getExtension(U):null,C.disable(C.DEPTH_TEST),C.disable(C.CULL_FACE),C.enable(C.BLEND),C.clearColor(A.redGL,A.greenGL,A.blueGL,A.alphaGL),this.mipmapFilter=C[S.mipmapFilter],this.maxTextures=y.checkShaderMax(C,S.maxTextures),this.textureIndexes=[];var Y=this.tempTextures;if(Array.isArray(Y))for(var W=0;O<this.maxTextures;W++)C.deleteTexture(Y[W]);else Y=new Array(this.maxTextures);for(var w=0;w<this.maxTextures;w++){var L=C.createTexture();C.activeTexture(C.TEXTURE0+w),C.bindTexture(C.TEXTURE_2D,L),C.texImage2D(C.TEXTURE_2D,0,C.RGBA,1,1,0,C.RGBA,C.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),Y[w]=L,this.textureIndexes.push(w)}return this.tempTextures=Y,this.currentActiveTexture=1,this.startActiveTexture++,C.activeTexture(C.TEXTURE1),this.pipelines=new c(this),this.setBlendMode(a.BlendModes.NORMAL),this.projectionMatrix=new l().identity(),P.textures.once(x.READY,this.boot,this),this},boot:function(){var S=this.game,C=this.pipelines,P=S.scale.baseSize;this.width=P.width,this.height=P.height,this.isBooted=!0,this.renderTarget=new g(this,this.width,this.height,1,0,!0,!0),C.boot(S.config.pipeline),this.blankTexture=S.textures.getFrame("__DEFAULT"),this.whiteTexture=S.textures.getFrame("__WHITE");var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,null),R.enable(R.SCISSOR_TEST),S.scale.on(p.RESIZE,this.onResize,this),this.resize(P.width,P.height)},onResize:function(S,C){(C.width!==this.width||C.height!==this.height)&&this.resize(C.width,C.height)},beginCapture:function(S,C){S===void 0&&(S=this.width),C===void 0&&(C=this.height),this.renderTarget.bind(!0,S,C),this.setProjectionMatrix(S,C),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,C){var P=this.gl;return this.width=S,this.height=C,this.setProjectionMatrix(S,C),P.viewport(0,0,S,C),this.drawingBufferHeight=P.drawingBufferHeight,P.scissor(0,P.drawingBufferHeight-C,S,C),this.defaultScissor[2]=S,this.defaultScissor[3]=C,this.emit(r.RESIZE,S,C),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,C){return(S!==this.projectionWidth||C!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=C,this.projectionMatrix.ortho(0,S,C,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,C,P,R,A){A===void 0&&(A=this.drawingBufferHeight);var M=this.scissorStack,O=[S,C,P,R];return M.push(O),this.setScissor(S,C,P,R,A),this.currentScissor=O,O},setScissor:function(S,C,P,R,A){A===void 0&&(A=this.drawingBufferHeight);var M=this.gl,O=this.currentScissor,F=P>0&&R>0;if(O&&F){var I=O[0],B=O[1],V=O[2],U=O[3];F=I!==S||B!==C||V!==P||U!==R}F&&(this.flush(),M.scissor(S,A-C-R,P,R))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var C=this.currentScissor;if(C){var P=C[0],R=C[1],A=C[2],M=C[3];A>0&&M>0&&S.scissor(P,this.drawingBufferHeight-R-M,A,M)}},popScissor:function(){var S=this.scissorStack;S.pop();var C=S[S.length-1];C&&this.setScissor(C[0],C[1],C[2],C[3]),this.currentScissor=C},hasActiveStencilMask:function(){var S=this.currentMask.mask,C=this.currentCameraMask.mask;return S&&S.isStencil||C&&C.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,C){C===void 0&&(C=!1);var P=this.gl,R=this.blendModes[S];return C||S!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),P.enable(P.BLEND),P.blendEquation(R.equation),R.func.length>2?P.blendFuncSeparate(R.func[0],R.func[1],R.func[2],R.func[3]):P.blendFunc(R.func[0],R.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,C){var P=this.blendModes.push({func:S,equation:C});return P-1},updateBlendMode:function(S,C,P){return this.blendModes[S]&&(this.blendModes[S].func=C,P&&(this.blendModes[S].equation=P)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S.glTexture,!0),0;var C=this.gl,P=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(S.glIndex=P,C.activeTexture(C.TEXTURE0+P),C.bindTexture(C.TEXTURE_2D,S.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,S.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},isNewNormalMap:function(S,C){return this.textureZero!==S||this.normalTexture!==C},setTextureZero:function(S,C){if(this.textureZero!==S){C&&this.flush();var P=this.gl;P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,S),this.textureZero=S}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(S){if(this.normalTexture!==S){var C=this.gl;C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,S),this.normalTexture=S,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var S=this.gl,C=this.tempTextures,P=0;P<C.length;P++)S.activeTexture(S.TEXTURE0+P),S.bindTexture(S.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(S){if(S===void 0&&(S=!1),!this.isTextureClean){this.flush();var C=this.gl,P=this.tempTextures;if(S){for(var R=0;R<P.length;R++)C.activeTexture(C.TEXTURE0+R),C.bindTexture(C.TEXTURE_2D,P[R]);C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,P[1]),this.isTextureClean=!0}else C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,P[0]),C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,P[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S,!0),0;var C=this.gl,P=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(S.glIndex=P,C.activeTexture(C.TEXTURE0+P),C.bindTexture(C.TEXTURE_2D,S),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,S),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},pushFramebuffer:function(S,C,P,R){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,C,P,R))},setFramebuffer:function(S,C,P,R){if(C===void 0&&(C=!1),P===void 0&&(P=!1),R===void 0&&(R=!0),S===this.currentFramebuffer)return this;var A=this.gl,M=this.width,O=this.height;return S&&S.renderTexture&&R?(M=S.renderTexture.width,O=S.renderTexture.height):this.flush(),A.bindFramebuffer(A.FRAMEBUFFER,S),R&&A.viewport(0,0,M,O),C&&(S?(this.drawingBufferHeight=O,this.pushScissor(0,0,M,O)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,P&&this.resetTextures(),this},popFramebuffer:function(S,C,P){S===void 0&&(S=!1),C===void 0&&(C=!1),P===void 0&&(P=!0);var R=this.fboStack;R.pop();var A=R[R.length-1];return A||(A=null),this.setFramebuffer(A,S,C,P),A},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,C,P,R){var A=this.gl,M=A.NEAREST,O=A.NEAREST,F=A.CLAMP_TO_EDGE,I=null;C=S?S.width:C,P=S?S.height:P;var B=d(C,P);return B&&(F=A.REPEAT),R===a.ScaleModes.LINEAR&&this.config.antialias&&(M=B?this.mipmapFilter:A.LINEAR,O=A.LINEAR),!S&&typeof C=="number"&&typeof P=="number"?I=this.createTexture2D(0,M,O,F,F,A.RGBA,null,C,P):I=this.createTexture2D(0,M,O,F,F,A.RGBA,S),I},createTexture2D:function(S,C,P,R,A,M,O,F,I,B,V,U){B=B==null?!0:B,V===void 0&&(V=!1),U===void 0&&(U=!1);var Y=this.gl,W=Y.createTexture();Y.activeTexture(Y.TEXTURE0);var w=Y.getParameter(Y.TEXTURE_BINDING_2D);return Y.bindTexture(Y.TEXTURE_2D,W),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,C),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,P),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,A),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,R),Y.pixelStorei(Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B),Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,U),O==null?Y.texImage2D(Y.TEXTURE_2D,S,M,F,I,0,M,Y.UNSIGNED_BYTE,null):(V||(F=O.width,I=O.height),Y.texImage2D(Y.TEXTURE_2D,S,M,M,Y.UNSIGNED_BYTE,O)),d(F,I)&&Y.generateMipmap(Y.TEXTURE_2D),w&&Y.bindTexture(Y.TEXTURE_2D,w),W.isAlphaPremultiplied=B,W.isRenderTexture=!1,W.width=F,W.height=I,W.glIndex=0,W.glIndexCounter=-1,W},createFramebuffer:function(S,C,P,R){var A=this.gl,M=A.createFramebuffer(),O=0;if(this.setFramebuffer(M),R){var F=A.createRenderbuffer();A.bindRenderbuffer(A.RENDERBUFFER,F),A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,S,C),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,F)}if(P.isRenderTexture=!0,P.isAlphaPremultiplied=!1,A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,P,0),O=A.checkFramebufferStatus(A.FRAMEBUFFER),O!==A.FRAMEBUFFER_COMPLETE){var I={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+I[O])}return M.renderTexture=P,this.setFramebuffer(null),this.resetTextures(),M},createProgram:function(S,C){var P=this.gl,R=P.createProgram(),A=P.createShader(P.VERTEX_SHADER),M=P.createShader(P.FRAGMENT_SHADER);if(P.shaderSource(A,S),P.shaderSource(M,C),P.compileShader(A),P.compileShader(M),!P.getShaderParameter(A,P.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+P.getShaderInfoLog(A));if(!P.getShaderParameter(M,P.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+P.getShaderInfoLog(M));if(P.attachShader(R,A),P.attachShader(R,M),P.linkProgram(R),!P.getProgramParameter(R,P.LINK_STATUS))throw new Error(`Link Program failed:
`+P.getProgramInfoLog(R));return P.useProgram(R),R},createVertexBuffer:function(S,C){var P=this.gl,R=P.createBuffer();return P.bindBuffer(P.ARRAY_BUFFER,R),P.bufferData(P.ARRAY_BUFFER,S,C),P.bindBuffer(P.ARRAY_BUFFER,null),R},createIndexBuffer:function(S,C){var P=this.gl,R=P.createBuffer();return P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,R),P.bufferData(P.ELEMENT_ARRAY_BUFFER,S,C),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,null),R},deleteTexture:function(S,C){return C&&this.resetTextures(!0),S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){return S&&(this.gl.deleteFramebuffer(S),s(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)),this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var C=S.x,P=S.y,R=S.width,A=S.height,M=S.backgroundColor;if(S.emit(u.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(C,P,R,A),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),M.alphaGL>0){var O=this.pipelines.setMulti();O.drawFillRect(C,P,R,A,y.getTintFromFloats(M.blueGL,M.greenGL,M.redGL,1),M.alphaGL)}},getCurrentStencilMask:function(){var S=null,C=this.maskStack,P=this.currentCameraMask;return C.length>0?S=C[C.length-1]:P.mask&&P.mask.isStencil&&(S=P),S},postRenderCamera:function(S){var C=S.flashEffect,P=S.fadeEffect;if(C.isRunning||P.isRunning||P.isComplete){var R=this.pipelines.setMulti();C.postRenderWebGL(R,y.getTintFromFloats),P.postRenderWebGL(R,y.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(u.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var C=this.config.backgroundColor;S.clearColor(C.redGL,C.greenGL,C.blueGL,C.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(r.PRE_RENDER)}},render:function(S,C,P){if(!this.contextLost){var R=C.length;if(this.emit(r.RENDER,S,P),this.preRenderCamera(P),R===0){this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(P);return}this.currentType="";for(var A=this.currentMask,M=0;M<R;M++){this.finalType=M===R-1;var O=C[M],F=O.mask;A=this.currentMask,A.mask&&A.mask!==F&&A.mask.postRenderWebGL(this,A.camera),F&&A.mask!==F&&F.preRenderWebGL(this,O,P),O.blendMode!==this.currentBlendMode&&this.setBlendMode(O.blendMode);var I=O.type;I!==this.currentType&&(this.newType=!0,this.currentType=I),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=C[M+1].type===this.currentType,O.renderWebGL(this,O,P),this.newType=!1}A=this.currentMask,A.mask&&A.mask.postRenderWebGL(this,A.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(P)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(r.POST_RENDER);var S=this.snapshotState;S.callback&&(T(this.canvas,S),S.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(S,C,P){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,C,P)},snapshotArea:function(S,C,P,R,A,M,O){var F=this.snapshotState;return F.callback=A,F.type=M,F.encoder=O,F.getPixel=!1,F.x=S,F.y=C,F.width=Math.min(P,this.gl.drawingBufferWidth),F.height=Math.min(R,this.gl.drawingBufferHeight),this},snapshotPixel:function(S,C,P){return this.snapshotArea(S,C,1,1,P),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,C,P,R,A,M,O,F,I,B,V){A===void 0&&(A=!1),M===void 0&&(M=0),O===void 0&&(O=0),F===void 0&&(F=C),I===void 0&&(I=P);var U=this.currentFramebuffer;this.snapshotArea(M,O,F,I,R,B,V);var Y=this.snapshotState;return Y.getPixel=A,Y.isFramebuffer=!0,Y.bufferWidth=C,Y.bufferHeight=P,this.setFramebuffer(S),T(this.canvas,Y),this.setFramebuffer(U),Y.callback=null,Y.isFramebuffer=!1,this},canvasToTexture:function(S,C,P,R){return P===void 0&&(P=!1),R===void 0&&(R=!1),C?this.updateCanvasTexture(S,C,R):this.createCanvasTexture(S,P,R)},createCanvasTexture:function(S,C,P){C===void 0&&(C=!1),P===void 0&&(P=!1);var R=this.gl,A=R.NEAREST,M=R.NEAREST,O=S.width,F=S.height,I=R.CLAMP_TO_EDGE,B=d(O,F);return!C&&B&&(I=R.REPEAT),this.config.antialias&&(A=B?this.mipmapFilter:R.LINEAR,M=R.LINEAR),this.createTexture2D(0,A,M,I,I,R.RGBA,S,O,F,!0,!1,P)},updateCanvasTexture:function(S,C,P){P===void 0&&(P=!1);var R=this.gl,A=S.width,M=S.height;if(A>0&&M>0){R.activeTexture(R.TEXTURE0);var O=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,C),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,P),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,S),C.width=A,C.height=M,O&&R.bindTexture(R.TEXTURE_2D,O)}return C},createVideoTexture:function(S,C,P){C===void 0&&(C=!1),P===void 0&&(P=!1);var R=this.gl,A=R.NEAREST,M=R.NEAREST,O=S.videoWidth,F=S.videoHeight,I=R.CLAMP_TO_EDGE,B=d(O,F);return!C&&B&&(I=R.REPEAT),this.config.antialias&&(A=B?this.mipmapFilter:R.LINEAR,M=R.LINEAR),this.createTexture2D(0,A,M,I,I,R.RGBA,S,O,F,!0,!0,P)},updateVideoTexture:function(S,C,P){P===void 0&&(P=!1);var R=this.gl,A=S.videoWidth,M=S.videoHeight;if(A>0&&M>0){R.activeTexture(R.TEXTURE0);var O=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,C),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,P),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,S),C.width=A,C.height=M,O&&R.bindTexture(R.TEXTURE_2D,O)}return C},setTextureFilter:function(S,C){var P=this.gl,R=[P.LINEAR,P.NEAREST][C];P.activeTexture(P.TEXTURE0);var A=P.getParameter(P.TEXTURE_BINDING_2D);return P.bindTexture(P.TEXTURE_2D,S),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,R),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,R),A&&P.bindTexture(P.TEXTURE_2D,A),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var S=this.gl,C=this.tempTextures,P=0;P<C.length;P++)S.deleteTexture(C[P]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});e.exports=E},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(92),n=t(102),a=t(373),o=t(376),r=t(377),h=t(108),d=t(378),l=t(379),f=t(380),c=t(381),g=new s({initialize:function(x){this.game=x.game,this.renderer=x,this.classes=new n([[u.UTILITY_PIPELINE,c],[u.MULTI_PIPELINE,h],[u.BITMAPMASK_PIPELINE,a],[u.SINGLE_PIPELINE,f],[u.ROPE_PIPELINE,l],[u.LIGHT_PIPELINE,r],[u.POINTLIGHT_PIPELINE,d],[u.GRAPHICS_PIPELINE,o]]),this.postPipelineClasses=new n,this.pipelines=new n,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(p){var x,y,T=this,E=this.game;if(this.classes.each(function(C,P){x=T.add(C,new P({game:E})),C===u.UTILITY_PIPELINE&&(T.UTILITY_PIPELINE=x,T.fullFrame1=x.fullFrame1,T.fullFrame2=x.fullFrame2,T.halfFrame1=x.halfFrame1,T.halfFrame2=x.halfFrame2)}),this.MULTI_PIPELINE=this.get(u.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(u.BITMAPMASK_PIPELINE),p)for(y in p){var S=p[y];x=new S(E),x.isPostFX?this.postPipelineClasses.set(y,S):this.has(y)||(this.classes.set(y,S),this.add(y,x))}},add:function(p,x){if(x.isPostFX){console.warn(p+" is a Post Pipeline. Use `addPostPipeline` instead");return}var y=this.pipelines,T=this.renderer;return y.has(p)?console.warn("Pipeline exists: "+p):(x.name=p,x.manager=this,y.set(p,x)),x.hasBooted||x.boot(),T.width!==0&&T.height!==0&&x.resize(T.width,T.height),x},addPostPipeline:function(p,x){this.postPipelineClasses.has(p)||this.postPipelineClasses.set(p,x)},flush:function(){this.current&&this.current.flush()},has:function(p){var x=this.pipelines;return typeof p=="string"?x.has(p):!!x.contains(p)},get:function(p){var x=this.pipelines;if(typeof p=="string")return x.get(p);if(x.contains(p))return p},getPostPipeline:function(p,x){var y=this.postPipelineClasses,T;if(typeof p=="string"?T=y.get(p):typeof p=="function"?y.contains(p)&&(T=p):typeof p=="object"&&(T=y.get(p.name)),T){var E=new T(this.game);return x&&(E.gameObject=x),E}},remove:function(p,x,y){x===void 0&&(x=!0),y===void 0&&(y=!0),this.pipelines.delete(p),x&&this.classes.delete(p),y&&this.postPipelineClasses.delete(p)},set:function(p,x,y){if(!p.isPostFX)return this.isCurrent(p,y)||(this.flush(),this.current&&this.current.unbind(),this.current=p,p.bind(y)),p.updateProjectionMatrix(),p.onBind(x),p},preBatch:function(p){if(p.hasPostPipeline){this.flush();for(var x=p.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(p)}}},postBatch:function(p){if(p.hasPostPipeline){this.flush();for(var x=p.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(p)}}},preBatchCamera:function(p){if(p.hasPostPipeline){this.flush();for(var x=p.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(p)}}},postBatchCamera:function(p){if(p.hasPostPipeline){this.flush();for(var x=p.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(p)}}},isCurrent:function(p,x){var y=this.renderer,T=this.current;return T&&!x&&(x=T.currentShader),!(T!==p||x.program!==y.currentProgram)},copyFrame:function(p,x,y,T,E){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(p,x,y,T,E),this},copyToGame:function(p){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(p),this},drawFrame:function(p,x,y,T){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(p,x,y,T),this},blendFrames:function(p,x,y,T,E){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(p,x,y,T,E),this},blendFramesAdditive:function(p,x,y,T,E){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(p,x,y,T,E),this},clearFrame:function(p,x){return this.UTILITY_PIPELINE.clearFrame(p,x),this},blitFrame:function(p,x,y,T,E,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(p,x,y,T,E,S),this},copyFrameRect:function(p,x,y,T,E,S,C,P){return this.UTILITY_PIPELINE.copyFrameRect(p,x,y,T,E,S,C,P),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(p){return this.UTILITY_PIPELINE.bind(p)},rebind:function(p){p===void 0&&this.previous&&(p=this.previous);var x=this.renderer,y=x.gl;y.disable(y.DEPTH_TEST),y.disable(y.CULL_FACE),x.hasActiveStencilMask()?y.clear(y.DEPTH_BUFFER_BIT):(y.disable(y.STENCIL_TEST),y.clear(y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.viewport(0,0,x.width,x.height),x.currentProgram=null,x.setBlendMode(0,!0);var T=this.pipelines.entries;for(var E in T)T[E].glReset=!0;p&&(this.current=p,p.rebind()),x.resetTextures()},clear:function(){var p=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,p.currentProgram=null,p.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});e.exports=g},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(866),a=t(867),o=t(107),r=t(58),h=new s({Extends:r,initialize:function(l){l.fragShader=u(l,"fragShader",n),l.vertShader=u(l,"vertShader",a),l.batchSize=u(l,"batchSize",1),l.vertices=u(l,"vertices",[-1,1,-1,-7,7,1]),l.attributes=u(l,"attributes",[{name:"inPosition",size:2,type:o.FLOAT}]),r.call(this,l)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(d,l){r.prototype.resize.call(this,d,l),this.set2f("uResolution",d,l)},beginMask:function(d,l,f){var c=this.gl;if(d.bitmapMask&&c){var g=this.renderer;g.flush(),g.pushFramebuffer(d.mainFramebuffer),c.disable(c.STENCIL_TEST),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==d&&(g.currentMask.mask=d,g.currentMask.camera=f)}},endMask:function(d,l){var f=this.gl,c=this.renderer,g=d.bitmapMask;if(g&&f){c.flush(),c.pushFramebuffer(d.maskFramebuffer),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT),c.setBlendMode(0,!0),g.renderWebGL(c,g,l),c.flush(),c.popFramebuffer(),c.popFramebuffer();var p=c.getCurrentStencilMask();p?(f.enable(f.STENCIL_TEST),p.mask.applyStencil(c,p.camera,!0)):c.currentMask.mask=null,c.pipelines.set(this),f.activeTexture(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,d.maskTexture),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,d.mainTexture),this.set1i("uInvertMaskAlpha",d.invertAlpha),f.drawArrays(this.topology,0,3),c.resetTextures()}}});e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_FLUSH:t(868),BEFORE_FLUSH:t(869),BIND:t(870),BOOT:t(871),DESTROY:t(872),REBIND:t(873),RESIZE:t(874)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(107),a=new s({initialize:function(r,h,d,l,f){this.pipeline=r,this.name=h,this.renderer=r.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(d,l),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(f),this.createUniforms()},createAttributes:function(o){var r=0,h=0,d=[];this.vertexComponentCount=0;for(var l=0;l<o.length;l++){var f=o[l],c=f.name,g=u(f,"size",1),p=u(f,"type",n.FLOAT),x=p.enum,y=p.size,T=!!f.normalized;d.push({name:c,size:g,type:x,normalized:T,offset:h,enabled:!1,location:-1}),y===4?r+=g:r++,h+=g*y}this.vertexSize=h,this.vertexComponentCount=r,this.attributes=d},bind:function(o,r){return o===void 0&&(o=!1),r===void 0&&(r=!1),r&&this.pipeline.flush(),this.renderer.setProgram(this.program),o&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(o){o===void 0&&(o=!1);for(var r=this.gl,h=this.vertexSize,d=this.attributes,l=this.program,f=0;f<d.length;f++){var c=d[f],g=c.size,p=c.type,x=c.offset,y=c.enabled,T=c.location,E=!!c.normalized;if(o){var S=r.getAttribLocation(l,c.name);S>=0?(r.enableVertexAttribArray(S),r.vertexAttribPointer(S,g,p,E,h,x),c.enabled=!0,c.location=S):S!==-1&&r.disableVertexAttribArray(S)}else y?r.vertexAttribPointer(T,g,p,E,h,x):!y&&T>-1&&(r.disableVertexAttribArray(T),c.location=-1)}return this},createUniforms:function(){var o=this.gl,r=this.program,h=this.uniforms,d,l,f,c=o.getProgramParameter(r,o.ACTIVE_UNIFORMS);for(d=0;d<c;d++){var g=o.getActiveUniform(r,d);if(g){l=g.name,f=o.getUniformLocation(r,l),f!==null&&(h[l]={name:l,location:f,value1:null,value2:null,value3:null,value4:null});var p=l.indexOf("[");p>0&&(l=l.substr(0,p),h.hasOwnProperty(l)||(f=o.getUniformLocation(r,l),f!==null&&(h[l]={name:l,location:f,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(o){return this.uniforms.hasOwnProperty(o)},resetUniform:function(o){var r=this.uniforms[o];return r&&(r.value1=null,r.value2=null,r.value3=null,r.value4=null),this},setUniform1:function(o,r,h,d){var l=this.uniforms[r];return l?((d||l.value1!==h)&&(l.value1=h,this.renderer.setProgram(this.program),o.call(this.gl,l.location,h),this.pipeline.currentShader=this),this):this},setUniform2:function(o,r,h,d,l){var f=this.uniforms[r];return f?((l||f.value1!==h||f.value2!==d)&&(f.value1=h,f.value2=d,this.renderer.setProgram(this.program),o.call(this.gl,f.location,h,d),this.pipeline.currentShader=this),this):this},setUniform3:function(o,r,h,d,l,f){var c=this.uniforms[r];return c?((f||c.value1!==h||c.value2!==d||c.value3!==l)&&(c.value1=h,c.value2=d,c.value3=l,this.renderer.setProgram(this.program),o.call(this.gl,c.location,h,d,l),this.pipeline.currentShader=this),this):this},setUniform4:function(o,r,h,d,l,f,c){var g=this.uniforms[r];return g?((c||g.value1!==h||g.value2!==d||g.value3!==l||g.value4!==f)&&(g.value1=h,g.value2=d,g.value3=l,g.value4=f,this.renderer.setProgram(this.program),o.call(this.gl,g.location,h,d,l,f),this.pipeline.currentShader=this),this):this},set1f:function(o,r){return this.setUniform1(this.gl.uniform1f,o,r)},set2f:function(o,r,h){return this.setUniform2(this.gl.uniform2f,o,r,h)},set3f:function(o,r,h,d){return this.setUniform3(this.gl.uniform3f,o,r,h,d)},set4f:function(o,r,h,d,l){return this.setUniform4(this.gl.uniform4f,o,r,h,d,l)},set1fv:function(o,r){return this.setUniform1(this.gl.uniform1fv,o,r,!0)},set2fv:function(o,r){return this.setUniform1(this.gl.uniform2fv,o,r,!0)},set3fv:function(o,r){return this.setUniform1(this.gl.uniform3fv,o,r,!0)},set4fv:function(o,r){return this.setUniform1(this.gl.uniform4fv,o,r,!0)},set1iv:function(o,r){return this.setUniform1(this.gl.uniform1iv,o,r,!0)},set2iv:function(o,r){return this.setUniform1(this.gl.uniform2iv,o,r,!0)},set3iv:function(o,r){return this.setUniform1(this.gl.uniform3iv,o,r,!0)},set4iv:function(o,r){return this.setUniform1(this.gl.uniform4iv,o,r,!0)},set1i:function(o,r){return this.setUniform1(this.gl.uniform1i,o,r)},set2i:function(o,r,h){return this.setUniform2(this.gl.uniform2i,o,r,h)},set3i:function(o,r,h,d){return this.setUniform3(this.gl.uniform3i,o,r,h,d)},set4i:function(o,r,h,d,l){return this.setUniform4(this.gl.uniform4i,o,r,h,d,l)},setMatrix2fv:function(o,r,h){return this.setUniform2(this.gl.uniformMatrix2fv,o,r,h,!0)},setMatrix3fv:function(o,r,h){return this.setUniform2(this.gl.uniformMatrix3fv,o,r,h,!0)},setMatrix4fv:function(o,r,h){return this.setUniform2(this.gl.uniformMatrix4fv,o,r,h,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(59),n=t(2),a=t(875),o=t(876),r=t(25),h=t(107),d=t(58),l=new s({Extends:d,initialize:function(c){c.fragShader=n(c,"fragShader",a),c.vertShader=n(c,"vertShader",o),c.attributes=n(c,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:h.UNSIGNED_BYTE,normalized:!0}]),d.call(this,c),this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(f,c,g,p,x,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(x,T);var E=f+g,S=c+p,C=T.getX(f,c),P=T.getY(f,c),R=T.getX(f,S),A=T.getY(f,S),M=T.getX(E,S),O=T.getY(E,S),F=T.getX(E,c),I=T.getY(E,c),B=this.fillTint;this.batchQuad(C,P,R,A,M,O,F,I,B.TL,B.TR,B.BL,B.BR)},batchFillTriangle:function(f,c,g,p,x,y,T,E){this.renderer.pipelines.set(this);var S=this.calcMatrix;E&&E.multiply(T,S);var C=S.getX(f,c),P=S.getY(f,c),R=S.getX(g,p),A=S.getY(g,p),M=S.getX(x,y),O=S.getY(x,y),F=this.fillTint;this.batchTri(C,P,R,A,M,O,F.TL,F.TR,F.BL)},batchStrokeTriangle:function(f,c,g,p,x,y,T,E,S){var C=this.tempTriangle;C[0].x=f,C[0].y=c,C[0].width=T,C[1].x=g,C[1].y=p,C[1].width=T,C[2].x=x,C[2].y=y,C[2].width=T,C[3].x=f,C[3].y=c,C[3].width=T,this.batchStrokePath(C,T,!1,E,S)},batchFillPath:function(f,c,g){this.renderer.pipelines.set(this);var p=this.calcMatrix;g&&g.multiply(c,p);for(var x=f.length,y=this.polygonCache,T,E,S=this.fillTint.TL,C=this.fillTint.TR,P=this.fillTint.BL,R=0;R<x;++R)E=f[R],y.push(E.x,E.y);T=u(y),x=T.length;for(var A=0;A<x;A+=3){var M=T[A+0]*2,O=T[A+1]*2,F=T[A+2]*2,I=y[M+0],B=y[M+1],V=y[O+0],U=y[O+1],Y=y[F+0],W=y[F+1],w=p.getX(I,B),L=p.getY(I,B),D=p.getX(V,U),N=p.getY(V,U),G=p.getX(Y,W),b=p.getY(Y,W);this.batchTri(w,L,D,N,G,b,S,C,P)}y.length=0},batchStrokePath:function(f,c,g,p,x){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=f.length-1,T=0;T<y;T++){var E=f[T],S=f[T+1];this.batchLine(E.x,E.y,S.x,S.y,E.width/2,S.width/2,c,T,!g&&T===y-1,p,x)}},batchLine:function(f,c,g,p,x,y,T,E,S,C,P){this.renderer.pipelines.set(this);var R=this.calcMatrix;P&&P.multiply(C,R);var A=g-f,M=p-c,O=Math.sqrt(A*A+M*M),F=x*(p-c)/O,I=x*(f-g)/O,B=y*(p-c)/O,V=y*(f-g)/O,U=g-B,Y=p-V,W=f-F,w=c-I,L=g+B,D=p+V,N=f+F,G=c+I,b=R.getX(U,Y),z=R.getY(U,Y),X=R.getX(W,w),H=R.getY(W,w),$=R.getX(L,D),J=R.getY(L,D),K=R.getX(N,G),Z=R.getY(N,G),k=this.strokeTint,Q=k.TL,q=k.TR,ot=k.BL,st=k.BR;if(this.batchQuad(K,Z,X,H,b,z,$,J,Q,q,ot,st),!(T<=2)){var _=this.prevQuad,j=this.firstQuad;E>0&&_[4]?this.batchQuad(K,Z,X,H,_[0],_[1],_[2],_[3],Q,q,ot,st):(j[0]=K,j[1]=Z,j[2]=X,j[3]=H,j[4]=1),S&&j[4]?this.batchQuad(b,z,$,J,j[0],j[1],j[2],j[3],Q,q,ot,st):(_[0]=b,_[1]=z,_[2]=$,_[3]=J,_[4]=1)}},batchVert:function(f,c,g){var p=this.vertexViewF32,x=this.vertexViewU32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;p[++y]=f,p[++y]=c,x[++y]=g,this.vertexCount++},batchQuad:function(f,c,g,p,x,y,T,E,S,C,P,R){var A=!1;return this.shouldFlush(6)&&(this.flush(),A=!0),this.batchVert(f,c,S),this.batchVert(g,p,P),this.batchVert(x,y,R),this.batchVert(f,c,S),this.batchVert(x,y,R),this.batchVert(T,E,C),A},batchTri:function(f,c,g,p,x,y,T,E,S){var C=!1;return this.shouldFlush(3)&&(this.flush(),C=!0),this.batchVert(f,c,T),this.batchVert(g,p,E),this.batchVert(x,y,S),C},destroy:function(){return d.prototype.destroy.call(this),this.polygonCache=null,this}});e.exports=l},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(877),a=t(108),o=t(3),r=t(58),h=10,d=new o,l=new s({Extends:a,initialize:function(c){h=c.game.renderer.config.maxLights;for(var g=u(c,"fragShader",n),p=[],x=1;x<=h;x++)p.push({name:"lights"+x,fragShader:g.replace("%LIGHT_COUNT%",x.toString())});c.shaders=p,a.call(this,c),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){r.prototype.boot.call(this);var f=this.gl,c=f.createTexture();f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,c),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,1,1,0,f.RGBA,f.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:c};for(var g=0;g<this.shaders.length;g++)this["lightShader"+(g+1)]=this.shaders[g]},onRender:function(f,c){var g=f.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var p=g.getLights(c),x=p.length;if(x!==0){this.lightsActive=!0,this.setShader(this["lightShader"+x],!0);var y,T=this.renderer,E=T.height,S=c.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",c.x,c.y,c.rotation,c.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),y=0;y<x;y++){var C=p[y].light,P=C.color,R="uLights["+y+"].";S.transformPoint(C.x,C.y,d),this.set2f(R+"position",d.x-c.scrollX*C.scrollFactorX*c.zoom,E-(d.y-c.scrollY*C.scrollFactorY*c.zoom)),this.set3f(R+"color",P.r,P.g,P.b),this.set1f(R+"intensity",C.intensity),this.set1f(R+"radius",C.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(f){if(f!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var c=this.inverseRotationMatrix;if(f){var g=-f,p=Math.cos(g),x=Math.sin(g);c[1]=x,c[3]=-x,c[0]=c[4]=p}else c[0]=c[4]=1,c[1]=c[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,c),this.currentNormalMapRotation=f}},setTexture2D:function(f,c){var g=this.renderer;f===void 0&&(f=g.tempTextures[0]);var p=this.getNormalMap(c);g.isNewNormalMap(f,p)&&(this.flush(),g.setTextureZero(f),g.setNormalMap(p));var x=c?c.rotation:0;return this.setNormalMapRotation(x),this.currentUnit=0,0},setGameObject:function(f,c){c===void 0&&(c=f.frame);var g=this.renderer,p=c.glTexture,x=this.getNormalMap(f);return g.isNewNormalMap()&&(this.flush(),g.setTextureZero(p),g.setNormalMap(x)),this.setNormalMapRotation(f.rotation),this.currentUnit=0,0},getNormalMap:function(f){var c;return f?f.displayTexture?c=f.displayTexture.dataSource[f.displayFrame.sourceIndex]:f.texture?c=f.texture.dataSource[f.frame.sourceIndex]:f.tileset&&(Array.isArray(f.tileset)?c=f.tileset[0].image.dataSource[0]:c=f.tileset.image.dataSource[0]):c=this.defaultNormalMap,c||(c=this.defaultNormalMap),c.glTexture},batchSprite:function(f,c,g){this.lightsActive&&a.prototype.batchSprite.call(this,f,c,g)},batchTexture:function(f,c,g,p,x,y,T,E,S,C,P,R,A,M,O,F,I,B,V,U,Y,W,w,L,D,N,G,b,z,X,H,$){this.lightsActive&&a.prototype.batchTexture.call(this,f,c,g,p,x,y,T,E,S,C,P,R,A,M,O,F,I,B,V,U,Y,W,w,L,D,N,G,b,z,X,H,$)},batchTextureFrame:function(f,c,g,p,x,y,T){this.lightsActive&&a.prototype.batchTextureFrame.call(this,f,c,g,p,x,y,T)}});l.LIGHT_COUNT=h,e.exports=l},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(880),a=t(881),o=t(58),r=new s({Extends:o,initialize:function(d){d.vertShader=u(d,"vertShader",a),d.fragShader=u(d,"fragShader",n),d.attributes=u(d,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),o.call(this,d)},onRender:function(h,d){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",d.zoom)},batchPointLight:function(h,d,l,f,c,g,p,x,y,T,E,S){var C=h.color,P=h.intensity,R=h.radius,A=h.attenuation,M=C.r*P,O=C.g*P,F=C.b*P,I=d.alpha*h.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(l,f,E,S,R,A,M,O,F,I),this.batchLightVert(c,g,E,S,R,A,M,O,F,I),this.batchLightVert(p,x,E,S,R,A,M,O,F,I),this.batchLightVert(l,f,E,S,R,A,M,O,F,I),this.batchLightVert(p,x,E,S,R,A,M,O,F,I),this.batchLightVert(y,T,E,S,R,A,M,O,F,I)},batchLightVert:function(h,d,l,f,c,g,p,x,y,T){var E=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++S]=h,E[++S]=d,E[++S]=l,E[++S]=f,E[++S]=c,E[++S]=g,E[++S]=p,E[++S]=x,E[++S]=y,E[++S]=T,this.vertexCount++}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(108),a=new s({Extends:n,initialize:function(r){r.topology=5,r.batchSize=u(r,"batchSize",256),n.call(this,r)}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(108),a=t(882),o=t(883),r=t(58),h=new s({Extends:n,initialize:function(l){l.fragShader=u(l,"fragShader",a),l.vertShader=u(l,"vertShader",o),l.forceZero=!0,n.call(this,l)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0)}});e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(884),u=t(35),n=t(0),a=t(198),o=t(885),r=t(886),h=t(2),d=t(887),l=t(382),f=t(58),c=new n({Extends:f,initialize:function(p){p.renderTarget=h(p,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),p.vertShader=h(p,"vertShader",l),p.shaders=h(p,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:s},{name:"LinearBlend",fragShader:d},{name:"ColorMatrix",fragShader:o}]),p.attributes=h(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),p.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],p.batchSize=1,f.call(this,p),this.colorMatrix=new a,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){f.prototype.boot.call(this);var g=this.shaders,p=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=p[0],this.fullFrame2=p[1],this.halfFrame1=p[2],this.halfFrame2=p[3]},copyFrame:function(g,p,x,y,T){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0);var E=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,g.texture),p?(E.viewport(0,0,p.width,p.height),E.bindFramebuffer(E.FRAMEBUFFER,p.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,p.texture,0)):E.viewport(0,0,g.width,g.height),y&&(T?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT)),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blitFrame:function(g,p,x,y,T,E){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0),E===void 0&&(E=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),g.height>p.height)S.viewport(0,0,g.width,g.height),this.setTargetUVs(g,p);else{var C=p.height-g.height;S.viewport(0,C,g.width,g.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,p.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,p.texture,0),y&&(T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),E){var P=this.renderer.currentBlendMode;this.renderer.setBlendMode(u.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),E&&this.renderer.setBlendMode(P),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,p,x,y,T,E,S,C){S===void 0&&(S=!0),C===void 0&&(C=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,g.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,g.texture,0),S&&(C?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,p.texture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,x,y,T,E),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(g){var p=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,g.texture),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(g,p,x,y){x===void 0&&(x=!0),y===void 0&&(y=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g.texture),p?(T.viewport(0,0,p.width,p.height),T.bindFramebuffer(T.FRAMEBUFFER,p.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,p.texture,0)):T.viewport(0,0,g.width,g.height),x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(g,p,x,y,T,E){y===void 0&&(y=1),T===void 0&&(T=!0),E===void 0&&(E=this.linearShader);var S=this.gl;this.setShader(E),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,p.texture),x?(S.bindFramebuffer(S.FRAMEBUFFER,x.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,x.texture,0),S.viewport(0,0,x.width,x.height)):S.viewport(0,0,g.width,g.height),T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(g,p,x,y,T){this.blendFrames(g,p,x,y,T,this.addShader)},clearFrame:function(g,p){p===void 0&&(p=!0);var x=this.gl;x.viewport(0,0,g.width,g.height),x.bindFramebuffer(x.FRAMEBUFFER,g.framebuffer),p?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;x.bindFramebuffer(x.FRAMEBUFFER,y)},setUVs:function(g,p,x,y,T,E,S,C){var P=this.vertexViewF32;P[2]=g,P[3]=p,P[6]=x,P[7]=y,P[10]=T,P[11]=E,P[14]=g,P[15]=p,P[18]=T,P[19]=E,P[22]=S,P[23]=C},setTargetUVs:function(g,p){var x=p.height/g.height;x>.5?x=.5-(x-.5):x=.5+(.5-x),this.setUVs(0,x,0,1+x,1,1+x,1,x)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});e.exports=c},function(e,v){e.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(38),n=t(2),a=function(o,r){var h=o.getContext("experimental-webgl"),d=n(r,"callback"),l=n(r,"type","image/png"),f=n(r,"encoder",.92),c=n(r,"x",0),g=n(r,"y",0),p=n(r,"getPixel",!1),x=n(r,"isFramebuffer",!1),y=x?n(r,"bufferWidth",1):h.drawingBufferWidth,T=x?n(r,"bufferHeight",1):h.drawingBufferHeight;if(p){var E=new Uint8Array(4),S=x?g:T-g;h.readPixels(c,S,1,1,h.RGBA,h.UNSIGNED_BYTE,E),d.call(null,new u(E[0],E[1],E[2],E[3]/255))}else{var C=n(r,"width",y),P=n(r,"height",T),R=C*P*4,A=new Uint8Array(R);h.readPixels(c,T-g-P,C,P,h.RGBA,h.UNSIGNED_BYTE,A);for(var M=s.createWebGL(this,C,P),O=M.getContext("2d"),F=O.getImageData(0,0,C,P),I=F.data,B=0;B<P;B++)for(var V=0;V<C;V++){var U=((P-B-1)*C+V)*4,Y=(B*C+V)*4;I[Y+0]=A[U+0],I[Y+1]=A[U+1],I[Y+2]=A[U+2],I[Y+3]=A[U+3]}O.putImageData(F,0,0);var W=new Image;W.onerror=function(){d.call(null),s.remove(M)},W.onload=function(){d.call(null,W),s.remove(M)},W.src=M.toDataURL(l,f)}};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33),u=function(n){var a=n.config;if(!a.hideBanner){var o="WebGL";a.renderType===s.CANVAS?o="Canvas":a.renderType===s.HEADLESS&&(o="Headless");var r=a.audio,h=n.device.audio,d;if(h.webAudio&&!r.disableWebAudio?d="Web Audio":r.noAudio||!h.webAudio&&!h.audioData?d="No Audio":d="HTML5 Audio",n.device.browser.ie)window.console&&console.log("Phaser v"+s.VERSION+" / https://phaser.io");else{var l="",f=[l];if(Array.isArray(a.bannerBackgroundColor)){var c;a.bannerBackgroundColor.forEach(function(p){l=l.concat("%c "),f.push("background: "+p),c=p}),f[f.length-1]="color: "+a.bannerTextColor+"; background: "+c}else l=l.concat("%c "),f.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor);f.push("background: transparent"),a.gameTitle&&(l=l.concat(a.gameTitle),a.gameVersion&&(l=l.concat(" v"+a.gameVersion)),a.hidePhaser||(l=l.concat(" / ")));var g="";a.hidePhaser||(l=l.concat("Phaser v"+s.VERSION+g+" ("+o+" | "+d+")")),l=l.concat(" %c "+a.gameURL),f[0]=l,console.log.apply(console,f)}}};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(6),n=t(1),a=t(386),o=new s({initialize:function(h,d){this.game=h,this.raf=new a,this.started=!1,this.running=!1,this.minFps=u(d,"min",5),this.targetFps=u(d,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=n,this.forceSetTimeOut=u(d,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=u(d,"deltaHistory",10),this.panicMax=u(d,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=u(d,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0;for(var h=0;h<this.deltaSmoothingMax;h++)this.deltaHistory[h]=Math.min(this._target,this.deltaHistory[h]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var h=0;h<this.deltaSmoothingMax;h++)this.deltaHistory[h]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var r=window.performance.now();this.now=r;var h=r-this.lastTime;h<0&&(h=0),this.rawDelta=h;var d=this.deltaIndex,l=this.deltaHistory,f=this.deltaSmoothingMax,c=h,g=h;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,c=Math.min(c,this._target)),c>this._min&&(c=l[d],c=Math.min(c,this._min)),l[d]=c,this.deltaIndex++,this.deltaIndex>f&&(this.deltaIndex=0),g=0;for(var p=0;p<f;p++)g+=l[p];g/=f}this.delta=g,this.time+=this.rawDelta,r>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0),this.framesThisSecond++;var x=g/this._target;this.callback(r,g,x),this.lastTime=r,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){this.running||(r&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=n,this.raf=null,this.game=null}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1),n=new s({initialize:function(){this.isRunning=!1,this.callback=u,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var o=this;this.step=function r(){var h=window.performance.now();o.lastTime=o.tick,o.tick=h,o.callback(h),o.timeOutID=window.requestAnimationFrame(r)},this.stepTimeout=function r(){var h=Date.now(),d=Math.min(Math.max(o.target*2+o.tick-h,0),o.target);o.lastTime=o.tick,o.tick=h,o.callback(h),o.timeOutID=window.setTimeout(r,d)}},start:function(a,o,r){this.isRunning||(this.callback=a,this.isSetTimeOut=o,this.target=r,this.isRunning=!0,this.timeOutID=o?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=u}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(22),u=function(n){var a,o=n.events;if(document.hidden!==void 0)a="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(d){document[d+"Hidden"]!==void 0&&(document.hidden=function(){return document[d+"Hidden"]},a=d+"visibilitychange")})}var h=function(d){document.hidden||d.type==="pause"?o.emit(s.HIDDEN):o.emit(s.VISIBLE)};a&&document.addEventListener(a,h,!1),window.onblur=function(){o.emit(s.BLUR)},window.onfocus=function(){o.emit(s.FOCUS)},window.focus&&n.config.autoFocus&&window.focus()};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(389),u=t(31),n=t(6),a=function(o){var r=n(o,"data",[]),h=n(o,"canvas",null),d=n(o,"palette",s),l=n(o,"pixelWidth",1),f=n(o,"pixelHeight",l),c=n(o,"resizeCanvas",!0),g=n(o,"clearCanvas",!0),p=n(o,"preRender",null),x=n(o,"postRender",null),y=Math.floor(Math.abs(r[0].length*l)),T=Math.floor(Math.abs(r.length*f));h||(h=u.create2D(this,y,T),c=!1,g=!1),c&&(h.width=y,h.height=T);var E=h.getContext("2d");g&&E.clearRect(0,0,y,T),p&&p(h,E);for(var S=0;S<r.length;S++)for(var C=r[S],P=0;P<C.length;P++){var R=C[P];R!=="."&&R!==" "&&(E.fillStyle=d[R],E.fillRect(P*l,S*f,l,f))}return x&&x(h,E),h};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(358),n=t(94),a=t(3),o=new s({Extends:n,initialize:function(h,d,l,f){n.call(this,"CubicBezierCurve"),Array.isArray(h)&&(f=new a(h[6],h[7]),l=new a(h[4],h[5]),d=new a(h[2],h[3]),h=new a(h[0],h[1])),this.p0=h,this.p1=d,this.p2=l,this.p3=f},getStartPoint:function(r){return r===void 0&&(r=new a),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,h){h===void 0&&(h=new a);var d=this.p0,l=this.p1,f=this.p2,c=this.p3;return h.set(u(r,d.x,l.x,f.x,c.x),u(r,d.y,l.y,f.y,c.y))},draw:function(r,h){h===void 0&&(h=32);var d=this.getPoints(h);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var l=1;l<d.length;l++)r.lineTo(d[l].x,d[l].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});o.fromJSON=function(r){var h=r.points,d=new a(h[0],h[1]),l=new a(h[2],h[3]),f=new a(h[4],h[5]),c=new a(h[6],h[7]);return new o(d,l,f,c)},e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(94),n=t(36),a=t(6),o=t(196),r=t(3),h=new s({Extends:u,initialize:function(l,f,c,g,p,x,y,T){if(typeof l=="object"){var E=l;l=a(E,"x",0),f=a(E,"y",0),c=a(E,"xRadius",0),g=a(E,"yRadius",c),p=a(E,"startAngle",0),x=a(E,"endAngle",360),y=a(E,"clockwise",!1),T=a(E,"rotation",0)}else g===void 0&&(g=c),p===void 0&&(p=0),x===void 0&&(x=360),y===void 0&&(y=!1),T===void 0&&(T=0);u.call(this,"EllipseCurve"),this.p0=new r(l,f),this._xRadius=c,this._yRadius=g,this._startAngle=n(p),this._endAngle=n(x),this._clockwise=y,this._rotation=n(T)},getStartPoint:function(d){return d===void 0&&(d=new r),this.getPoint(0,d)},getResolution:function(d){return d*2},getPoint:function(d,l){l===void 0&&(l=new r);for(var f=Math.PI*2,c=this._endAngle-this._startAngle,g=Math.abs(c)<Number.EPSILON;c<0;)c+=f;for(;c>f;)c-=f;c<Number.EPSILON&&(g?c=0:c=f),this._clockwise&&!g&&(c===f?c=-f:c=c-f);var p=this._startAngle+d*c,x=this.p0.x+this._xRadius*Math.cos(p),y=this.p0.y+this._yRadius*Math.sin(p);if(this._rotation!==0){var T=Math.cos(this._rotation),E=Math.sin(this._rotation),S=x-this.p0.x,C=y-this.p0.y;x=S*T-C*E+this.p0.x,y=S*E+C*T+this.p0.y}return l.set(x,y)},setXRadius:function(d){return this.xRadius=d,this},setYRadius:function(d){return this.yRadius=d,this},setWidth:function(d){return this.xRadius=d/2,this},setHeight:function(d){return this.yRadius=d/2,this},setStartAngle:function(d){return this.startAngle=d,this},setEndAngle:function(d){return this.endAngle=d,this},setClockwise:function(d){return this.clockwise=d,this},setRotation:function(d){return this.rotation=d,this},x:{get:function(){return this.p0.x},set:function(d){this.p0.x=d}},y:{get:function(){return this.p0.y},set:function(d){this.p0.y=d}},xRadius:{get:function(){return this._xRadius},set:function(d){this._xRadius=d}},yRadius:{get:function(){return this._yRadius},set:function(d){this._yRadius=d}},startAngle:{get:function(){return o(this._startAngle)},set:function(d){this._startAngle=n(d)}},endAngle:{get:function(){return o(this._endAngle)},set:function(d){this._endAngle=n(d)}},clockwise:{get:function(){return this._clockwise},set:function(d){this._clockwise=d}},angle:{get:function(){return o(this._rotation)},set:function(d){this._rotation=n(d)}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=d}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:o(this._startAngle),endAngle:o(this._endAngle),clockwise:this._clockwise,rotation:o(this._rotation)}}});h.fromJSON=function(d){return new h(d)},e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(94),n=t(199),a=t(10),o=t(3),r=new s({Extends:u,initialize:function(d,l){u.call(this,"LineCurve"),Array.isArray(d)&&(l=new o(d[2],d[3]),d=new o(d[0],d[1])),this.p0=d,this.p1=l,this.arcLengthDivisions=1},getBounds:function(h){return h===void 0&&(h=new a),n([this.p0,this.p1],h)},getStartPoint:function(h){return h===void 0&&(h=new o),h.copy(this.p0)},getResolution:function(h){return h===void 0&&(h=1),h},getPoint:function(h,d){return d===void 0&&(d=new o),h===1?d.copy(this.p1):(d.copy(this.p1).subtract(this.p0).scale(h).add(this.p0),d)},getPointAt:function(h,d){return this.getPoint(h,d)},getTangent:function(h,d){return d===void 0&&(d=new o),d.copy(this.p1).subtract(this.p0).normalize(),d},getUtoTmapping:function(h,d,l){var f;if(d){var c=this.getLengths(l),g=c[c.length-1],p=Math.min(d,g);f=p/g}else f=h;return f},draw:function(h){return h.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),h},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(h){var d=h.points,l=new o(d[0],d[1]),f=new o(d[2],d[3]);return new r(l,f)},e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(3),n=new s({initialize:function(o,r){this.active=!1,this.p0=new u(o,r)},getPoint:function(a,o){return o===void 0&&(o=new u),o.copy(this.p0)},getPointAt:function(a,o){return this.getPoint(a,o)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(94),n=t(359),a=t(3),o=new s({Extends:u,initialize:function(h,d,l){u.call(this,"QuadraticBezier"),Array.isArray(h)&&(l=new a(h[4],h[5]),d=new a(h[2],h[3]),h=new a(h[0],h[1])),this.p0=h,this.p1=d,this.p2=l},getStartPoint:function(r){return r===void 0&&(r=new a),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,h){h===void 0&&(h=new a);var d=this.p0,l=this.p1,f=this.p2;return h.set(n(r,d.x,l.x,f.x),n(r,d.y,l.y,f.y))},draw:function(r,h){h===void 0&&(h=32);var d=this.getPoints(h);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var l=1;l<d.length;l++)r.lineTo(d[l].x,d[l].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});o.fromJSON=function(r){var h=r.points,d=new a(h[0],h[1]),l=new a(h[2],h[3]),f=new a(h[4],h[5]);return new o(d,l,f)},e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(194),u=t(0),n=t(94),a=t(3),o=new u({Extends:n,initialize:function(h){h===void 0&&(h=[]),n.call(this,"SplineCurve"),this.points=[],this.addPoints(h)},addPoints:function(r){for(var h=0;h<r.length;h++){var d=new a;typeof r[h]=="number"?(d.x=r[h],d.y=r[h+1],h++):Array.isArray(r[h])?(d.x=r[h][0],d.y=r[h][1]):(d.x=r[h].x,d.y=r[h].y),this.points.push(d)}return this},addPoint:function(r,h){var d=new a(r,h);return this.points.push(d),d},getStartPoint:function(r){return r===void 0&&(r=new a),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,h){h===void 0&&(h=new a);var d=this.points,l=(d.length-1)*r,f=Math.floor(l),c=l-f,g=d[f===0?f:f-1],p=d[f],x=d[f>d.length-2?d.length-1:f+1],y=d[f>d.length-3?d.length-1:f+2];return h.set(s(c,g.x,p.x,x.x,y.x),s(c,g.y,p.y,x.y,y.y))},toJSON:function(){for(var r=[],h=0;h<this.points.length;h++)r.push(this.points[h].x),r.push(this.points[h].y);return{type:this.type,points:r}}});o.fromJSON=function(r){return new o(r.points)},e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o,r,h){(!o||o==="")&&(o=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),h===void 0&&(h=null),this.key=a,this.fragmentSrc=o,this.vertexSrc=r,this.uniforms=h}});e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38);s.ColorSpectrum=t(909),s.ColorToRGBA=t(910),s.ComponentToHex=t(398),s.GetColor=t(103),s.GetColor32=t(328),s.HexStringToColor=t(327),s.HSLToColor=t(911),s.HSVColorWheel=t(912),s.HSVToRGB=t(188),s.HueToComponent=t(399),s.IntegerToColor=t(189),s.IntegerToRGB=t(330),s.Interpolate=t(913),s.ObjectToColor=t(331),s.RandomRGB=t(914),s.RGBStringToColor=t(332),s.RGBToHSV=t(329),s.RGBToString=t(915),s.ValueToColor=t(187),e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.toString(16);return u.length===1?"0"+u:u};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n<0&&(n+=1),n>1&&(n-=1),n<.16666666666666666?s+(u-s)*6*n:n<.5?u:n<.6666666666666666?s+(u-s)*(.6666666666666666-n)*6:s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(105),u=function(n){if(document.readyState==="complete"||document.readyState==="interactive"){n();return}var a=function(){document.removeEventListener("deviceready",a,!0),document.removeEventListener("DOMContentLoaded",a,!0),window.removeEventListener("load",a,!0),n()};document.body?s.cordova?document.addEventListener("deviceready",a,!1):(document.addEventListener("DOMContentLoaded",a,!0),window.addEventListener("load",a,!0)):window.setTimeout(a,20)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(!s)return window.innerHeight;var u=Math.abs(window.orientation),n={w:0,h:0},a=document.createElement("div");return a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(a),n.w=u===90?a.offsetHeight:window.innerWidth,n.h=u===90?window.innerWidth:a.offsetHeight,document.documentElement.removeChild(a),a=null,Math.abs(window.orientation)!==90?n.h:n.w};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(201),u=function(n,a){var o=window.screen,r=o?o.orientation||o.mozOrientation||o.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return s.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return s.ORIENTATION.LANDSCAPE}else return a>n?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u;return s!==""&&(typeof s=="string"?u=document.getElementById(s):s&&s.nodeType===1&&(u=s)),u||(u=document.body),u};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u="";try{if(window.DOMParser){var n=new DOMParser;u=n.parseFromString(s,"text/xml")}else u=new ActiveXObject("Microsoft.XMLDOM"),u.loadXML(s)}catch{u=null}return!u||!u.documentElement||u.getElementsByTagName("parsererror").length?null:u};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(203),n=t(9),a=t(51),o=t(22),r=t(410),h=t(411),d=t(412),l=t(413),f=t(25),c=t(177),g=new s({initialize:function(x,y){this.game=x,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new n,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new r(this):null,this.mouse=y.inputMouse?new h(this):null,this.touch=y.inputTouch?new l(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers,y.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var E=new d(this,T);E.smoothFactor=y.inputSmoothFactor,this.pointers.push(E)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new f,this._tempMatrix2=new f,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],x.events.once(o.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(a.MANAGER_BOOT),this.game.events.on(o.PRE_RENDER,this.preRender,this),this.game.events.once(o.DESTROY,this.destroy,this)},setCanvasOver:function(p){this.isOver=!0,this.events.emit(a.GAME_OVER,p)},setCanvasOut:function(p){this.isOver=!1,this.events.emit(a.GAME_OUT,p)},preRender:function(){var p=this.game.loop.now,x=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=p,this.events.emit(a.MANAGER_UPDATE);for(var T=0;T<y.length;T++){var E=y[T];if(E.sys.input&&E.sys.input.updatePoll(p,x)&&this.globalTopOnly)return}},setDefaultCursor:function(p){this.defaultCursor=p,this.canvas.style.cursor!==p&&(this.canvas.style.cursor=p)},setCursor:function(p){p.cursor&&(this.canvas.style.cursor=p.cursor)},resetCursor:function(p){p.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(p){p===void 0&&(p=1);var x=[];this.pointersTotal+p>10&&(p=10-this.pointersTotal);for(var y=0;y<p;y++){var T=this.pointers.length,E=new d(this,T);E.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(E),this.pointersTotal++,x.push(E)}return x},updateInputPlugins:function(p,x){var y=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<y.length;T++){var E=y[T];if(E.sys.input){var S=E.sys.input.update(p,x);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(p){for(var x=this.pointers,y=[],T=0;T<p.changedTouches.length;T++)for(var E=p.changedTouches[T],S=1;S<this.pointersTotal;S++){var C=x[S];if(!C.active){C.touchstart(E,p),this.activePointer=C,y.push(C);break}}this.updateInputPlugins(u.TOUCH_START,y)},onTouchMove:function(p){for(var x=this.pointers,y=[],T=0;T<p.changedTouches.length;T++)for(var E=p.changedTouches[T],S=1;S<this.pointersTotal;S++){var C=x[S];if(C.active&&C.identifier===E.identifier){C.touchmove(E,p),this.activePointer=C,y.push(C);break}}this.updateInputPlugins(u.TOUCH_MOVE,y)},onTouchEnd:function(p){for(var x=this.pointers,y=[],T=0;T<p.changedTouches.length;T++)for(var E=p.changedTouches[T],S=1;S<this.pointersTotal;S++){var C=x[S];if(C.active&&C.identifier===E.identifier){C.touchend(E,p),y.push(C);break}}this.updateInputPlugins(u.TOUCH_END,y)},onTouchCancel:function(p){for(var x=this.pointers,y=[],T=0;T<p.changedTouches.length;T++)for(var E=p.changedTouches[T],S=1;S<this.pointersTotal;S++){var C=x[S];if(C.active&&C.identifier===E.identifier){C.touchcancel(E,p),y.push(C);break}}this.updateInputPlugins(u.TOUCH_CANCEL,y)},onMouseDown:function(p){var x=this.mousePointer;x.down(p),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(u.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(p){var x=this.mousePointer;x.move(p),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(u.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(p){var x=this.mousePointer;x.up(p),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(u.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(p){var x=this.mousePointer;x.wheel(p),this.activePointer=x,this.updateInputPlugins(u.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(p){var x=this.mouse.locked;this.mousePointer.locked=x,this.events.emit(a.POINTERLOCK_CHANGE,p,x)},inputCandidate:function(p,x){var y=p.input;if(!y||!y.enabled||!y.alwaysEnabled&&!p.willRender(x))return!1;var T=!0,E=p.parentContainer;if(E)do{if(!E.willRender(x)){T=!1;break}E=E.parentContainer}while(E);return T},hitTest:function(p,x,y,T){T===void 0&&(T=this._tempHitTest);var E=this._tempPoint,S=y.scrollX,C=y.scrollY;T.length=0;var P=p.x,R=p.y;y.getWorldPoint(P,R,E),p.worldX=E.x,p.worldY=E.y;for(var A={x:0,y:0},M=this._tempMatrix,O=this._tempMatrix2,F=0;F<x.length;F++){var I=x[F];if(!!this.inputCandidate(I,y)){var B=E.x+S*I.scrollFactorX-S,V=E.y+C*I.scrollFactorY-C;I.parentContainer?(I.getWorldTransformMatrix(M,O),M.applyInverse(B,V,A)):c(B,V,I.x,I.y,I.rotation,I.scaleX,I.scaleY,A),this.pointWithinHitArea(I,A.x,A.y)&&T.push(I)}}return T},pointWithinHitArea:function(p,x,y){x+=p.displayOriginX,y+=p.displayOriginY;var T=p.input;return T&&T.hitAreaCallback(T.hitArea,x,y,p)?(T.localX=x,T.localY=y,!0):!1},pointWithinInteractiveObject:function(p,x,y){return p.hitArea?(x+=p.gameObject.displayOriginX,y+=p.gameObject.displayOriginY,p.localX=x,p.localY=y,p.hitAreaCallback(p.hitArea,x,y,p)):!1},transformPointer:function(p,x,y,T){var E=p.position,S=p.prevPosition;S.x=E.x,S.y=E.y;var C=this.scaleManager.transformX(x),P=this.scaleManager.transformY(y),R=p.smoothFactor;!T||R===0?(E.x=C,E.y=P):(E.x=C*R+S.x*(1-R),E.y=P*R+S.y*(1-R))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(o.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var p=0;p<this.pointers.length;p++)this.pointers[p].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});e.exports=g},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93),u=t(0),n=t(22),a=t(51),o=t(143),r=t(1),h=new u({initialize:function(l){this.manager=l,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=r,this.onKeyUp=r,l.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var d=this.manager.config;this.enabled=d.inputKeyboard,this.target=d.inputKeyboardEventTarget,this.addCapture(d.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(n.POST_STEP,this.postUpdate,this)},startListeners:function(){var d=this;this.onKeyDown=function(f){if(!(f.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(f),d.manager.events.emit(a.MANAGER_PROCESS);var c=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;d.preventDefault&&!c&&d.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}},this.onKeyUp=function(f){if(!(f.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(f),d.manager.events.emit(a.MANAGER_PROCESS);var c=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;d.preventDefault&&!c&&d.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}};var l=this.target;l&&(l.addEventListener("keydown",this.onKeyDown,!1),l.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var d=this.target;d.removeEventListener("keydown",this.onKeyDown,!1),d.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var l=this.captures,f=0;f<d.length;f++){var c=d[f];typeof c=="string"&&(c=o[c.trim().toUpperCase()]),l.indexOf(c)===-1&&l.push(c)}this.preventDefault=l.length>0},removeCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var l=this.captures,f=0;f<d.length;f++){var c=d[f];typeof c=="string"&&(c=o[c.toUpperCase()]),s(l,c)}this.preventDefault=l.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(n.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(191),n=t(51),a=t(1),o=new s({initialize:function(h){this.manager=h,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=a,this.onMouseDown=a,this.onMouseUp=a,this.onMouseDownWindow=a,this.onMouseUpWindow=a,this.onMouseOver=a,this.onMouseOut=a,this.onMouseWheel=a,this.pointerLockChange=a,this.isTop=!0,h.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){if(u.pointerLock){var r=this.target;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock()}},releasePointerLock:function(){u.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(!!r){var h=this,d=this.manager,l=d.canvas,f=window&&window.focus&&d.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseMove(g),h.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){f&&window.focus(),!g.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseDown(g),h.preventDefaultDown&&g.target===l&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&h.enabled&&d&&d.enabled&&g.target!==l&&d.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseUp(g),h.preventDefaultUp&&g.target===l&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&h.enabled&&d&&d.enabled&&g.target!==l&&d.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&h.enabled&&d&&d.enabled&&d.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&h.enabled&&d&&d.enabled&&d.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&h.enabled&&d&&d.enabled&&d.onMouseWheel(g),h.preventDefaultWheel&&g.target===l&&g.preventDefault()};var c={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,c),r.addEventListener("mouseout",this.onMouseOut,c),this.preventDefaultWheel?r.addEventListener("wheel",this.onMouseWheel,{passive:!1}):r.addEventListener("wheel",this.onMouseWheel,c),window&&d.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,c),window.top.addEventListener("mouseup",this.onMouseUpWindow,c)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,c),window.addEventListener("mouseup",this.onMouseUpWindow,c),this.isTop=!1}u.pointerLock&&(this.pointerLockChange=function(g){var p=h.target;h.locked=document.pointerLockElement===p||document.mozPointerLockElement===p||document.webkitPointerLockElement===p,d.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&(r=this.isTop?window.top:window,r.removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),u.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(349),u=t(0),n=t(50),a=t(124),o=t(360),r=t(3),h=t(105),d=new u({initialize:function(f,c){this.manager=f,this.id=c,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=c===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(l){var f=l.getWorldPoint(this.x,this.y);return this.worldX=f.x,this.worldY=f.y,this},positionToCamera:function(l,f){return l.getWorldPoint(this.x,this.y,f)},updateMotion:function(){var l=this.position.x,f=this.position.y,c=this.midPoint.x,g=this.midPoint.y;if(!(l===c&&f===g)){var p=o(this.motionFactor,c,l),x=o(this.motionFactor,g,f);a(p,l,.1)&&(p=l),a(x,f,.1)&&(x=f),this.midPoint.set(p,x);var y=l-p,T=f-x;this.velocity.set(y,T),this.angle=s(p,x,l,f),this.distance=Math.sqrt(y*y+T*T)}},up:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=l.timeStamp,this.wasTouch=!1)},down:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),h.macOS&&l.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=l.timeStamp),this.wasTouch=!1},move:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.locked&&(this.movementX=l.movementX||l.mozMovementX||l.webkitMovementX||0,this.movementY=l.movementY||l.mozMovementY||l.webkitMovementY||0),this.moveTime=l.timeStamp,this.wasTouch=!1},wheel:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.deltaX=l.deltaX,this.deltaY=l.deltaY,this.deltaZ=l.deltaZ,this.wasTouch=!1},touchstart:function(l,f){l.pointerId&&(this.pointerId=l.pointerId),this.identifier=l.identifier,this.target=l.target,this.active=!0,this.buttons=1,this.event=f,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=f.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(l,f){this.event=f,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.moveTime=f.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(l,f){this.buttons=0,this.event=f,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(l,f){this.buttons=0,this.event=f,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(l,f){l===void 0&&(l=10),f===void 0&&(f=[]);for(var c=this.prevPosition.x,g=this.prevPosition.y,p=this.position.x,x=this.position.y,y=0;y<l;y++){var T=1/l*y;f[y]={x:o(T,c,p),y:o(T,g,x)}}return f},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(l){this.position.x=l}},y:{get:function(){return this.position.y},set:function(l){this.position.y=l}},time:{get:function(){return this.event?this.event.timeStamp:0}}});e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(51),n=t(1),a=new s({initialize:function(r){this.manager=r,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=n,this.onTouchStartWindow=n,this.onTouchMove=n,this.onTouchEnd=n,this.onTouchEndWindow=n,this.onTouchCancel=n,this.onTouchCancelWindow=n,this.onTouchOver=n,this.onTouchOut=n,r.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var o=this.manager.config;this.enabled=o.inputTouch,this.target=o.inputTouchEventTarget,this.capture=o.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),o.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(o){return o.preventDefault(),!1}),this},startListeners:function(){var o=this,r=this.manager.canvas,h=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(c){h&&window.focus(),!c.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&(o.manager.onTouchStart(c),o.capture&&c.cancelable&&c.target===r&&c.preventDefault())},this.onTouchStartWindow=function(c){!c.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&c.target!==r&&o.manager.onTouchStart(c)},this.onTouchMove=function(c){!c.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&(o.manager.onTouchMove(c),o.capture&&c.cancelable&&c.preventDefault())},this.onTouchEnd=function(c){!c.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&(o.manager.onTouchEnd(c),o.capture&&c.cancelable&&c.target===r&&c.preventDefault())},this.onTouchEndWindow=function(c){!c.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&c.target!==r&&o.manager.onTouchEnd(c)},this.onTouchCancel=function(c){!c.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&(o.manager.onTouchCancel(c),o.capture&&c.preventDefault())},this.onTouchCancelWindow=function(c){!c.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&o.manager.onTouchCancel(c)},this.onTouchOver=function(c){!c.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&o.manager.setCanvasOver(c)},this.onTouchOut=function(c){!c.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&o.manager.setCanvasOut(c)};var d=this.target;if(!!d){var l={passive:!0},f={passive:!1};d.addEventListener("touchstart",this.onTouchStart,this.capture?f:l),d.addEventListener("touchmove",this.onTouchMove,this.capture?f:l),d.addEventListener("touchend",this.onTouchEnd,this.capture?f:l),d.addEventListener("touchcancel",this.onTouchCancel,this.capture?f:l),d.addEventListener("touchover",this.onTouchOver,this.capture?f:l),d.addEventListener("touchout",this.onTouchOut,this.capture?f:l),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,f),window.addEventListener("touchend",this.onTouchEndWindow,f),window.addEventListener("touchcancel",this.onTouchCancelWindow,f)),this.enabled=!0}},stopListeners:function(){var o=this.target;o.removeEventListener("touchstart",this.onTouchStart),o.removeEventListener("touchmove",this.onTouchMove),o.removeEventListener("touchend",this.onTouchEnd),o.removeEventListener("touchcancel",this.onTouchCancel),o.removeEventListener("touchover",this.onTouchOver),o.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(22),n=t(9),a=t(8),o=t(16),r=t(5),h=t(2),d=t(24),l=t(93),f=new s({Extends:n,initialize:function(g){n.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(u.BOOT,this.boot,this)},boot:function(){var c,g,p,x,y,T,E,S=this.game.config,C=S.installGlobalPlugins;for(C=C.concat(this._pendingGlobal),c=0;c<C.length;c++)g=C[c],p=h(g,"key",null),x=h(g,"plugin",null),y=h(g,"start",!1),T=h(g,"mapping",null),E=h(g,"data",null),p&&(x?this.install(p,x,y,T,E):console.warn("Missing `plugin` for key: "+p));for(C=S.installScenePlugins,C=C.concat(this._pendingScene),c=0;c<C.length;c++)g=C[c],p=h(g,"key",null),x=h(g,"plugin",null),T=h(g,"mapping",null),p&&(x?this.installScenePlugin(p,x,T):console.warn("Missing `plugin` for key: "+p));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(u.DESTROY,this.destroy,this)},addToScene:function(c,g,p){var x,y,T,E=this.game,S=c.scene,C=c.settings.map,P=c.settings.isBooted;for(x=0;x<g.length;x++)y=g[x],E[y]?(c[y]=E[y],C.hasOwnProperty(y)&&(S[C[y]]=c[y])):y==="game"&&C.hasOwnProperty(y)&&(S[C[y]]=E);for(var R=0;R<p.length;R++)for(T=p[R],x=0;x<T.length;x++)if(y=T[x],!!d.hasCore(y)){var A=d.getCore(y),M=A.mapping,O=new A.plugin(S,this,M);c[M]=O,A.custom?S[M]=O:C.hasOwnProperty(M)&&(S[C[M]]=O),P&&O.boot()}for(T=this.plugins,x=0;x<T.length;x++){var F=T[x];F.mapping&&(S[F.mapping]=F.plugin)}},getDefaultScenePlugins:function(){var c=this.game.config.defaultPlugins;return c=c.concat(this.scenePlugins),c},installScenePlugin:function(c,g,p,x,y){if(y===void 0&&(y=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+c);return}if(!d.hasCore(c))d.register(c,g,p,!0),this.scenePlugins.push(c);else if(!y&&d.hasCore(c)){console.warn("Scene Plugin key in use: "+c);return}if(x){var T=new g(x,this,c);x.sys[c]=T,p&&p!==""&&(x[p]=T),T.boot()}},install:function(c,g,p,x,y){if(p===void 0&&(p=!1),x===void 0&&(x=null),y===void 0&&(y=null),typeof g!="function")return console.warn("Invalid Plugin: "+c),null;if(d.hasCustom(c))return console.warn("Plugin key in use: "+c),null;if(x!==null&&(p=!0),!this.game.isBooted)this._pendingGlobal.push({key:c,plugin:g,start:p,mapping:x,data:y});else if(d.registerCustom(c,g,x,y),p)return this.start(c);return null},getIndex:function(c){for(var g=this.plugins,p=0;p<g.length;p++){var x=g[p];if(x.key===c)return p}return-1},getEntry:function(c){var g=this.getIndex(c);if(g!==-1)return this.plugins[g]},isActive:function(c){var g=this.getEntry(c);return g&&g.active},start:function(c,g){g===void 0&&(g=c);var p=this.getEntry(g);return p&&!p.active?(p.active=!0,p.plugin.start()):p||(p=this.createEntry(c,g)),p?p.plugin:null},createEntry:function(c,g){var p=d.getCustom(c);if(p){var x=new p.plugin(this);p={key:g,plugin:x,active:!0,mapping:p.mapping,data:p.data},this.plugins.push(p),x.init(p.data),x.start()}return p},stop:function(c){var g=this.getEntry(c);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(c,g){g===void 0&&(g=!0);var p=this.getEntry(c);if(p)return p.plugin;var x=this.getClass(c);return x&&g?(p=this.createEntry(c,c),p?p.plugin:null):x||null},getClass:function(c){return d.getCustomClass(c)},removeGlobalPlugin:function(c){var g=this.getEntry(c);g&&l(this.plugins,g),d.removeCustom(c)},removeScenePlugin:function(c){l(this.scenePlugins,c),d.remove(c)},registerGameObject:function(c,g,p){return g&&r.register(c,g),p&&o.register(c,p),this},removeGameObject:function(c,g,p){return g===void 0&&(g=!0),p===void 0&&(p=!0),g&&r.remove(c),p&&o.remove(c),this},registerFileType:function(c,g,p){a.register(c,g),p&&p.sys.load&&(p.sys.load[c]=g)},destroy:function(){for(var c=0;c<this.plugins.length;c++)this.plugins[c].plugin.destroy();d.destroyCustomPlugins(),this.game.noReturn&&d.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});e.exports=f},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(201),u=t(0),n=t(9),a=t(104),o=t(22),r=t(401),h=t(407),d=t(402),l=t(1),f=t(10),c=t(416),g=t(76),p=t(3),x=new u({Extends:n,initialize:function(T){n.call(this),this.game=T,this.canvas,this.canvasBounds=new f,this.parent=null,this.parentIsWindow=!1,this.parentSize=new c,this.gameSize=new c,this.baseSize=new c,this.displaySize=new c,this.scaleMode=s.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new p(1,1),this.autoRound=!1,this.autoCenter=s.CENTER.NO_CENTER,this.orientation=s.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(o.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen,this.scaleMode!==s.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===s.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(o.PRE_STEP,this.step,this),y.events.once(o.READY,this.refresh,this),y.events.once(o.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,E=y.height,S=y.scaleMode,C=y.zoom,P=y.autoRound;if(typeof T=="string"){var R=this.parentSize.width;R===0&&(R=window.innerWidth);var A=parseInt(T,10)/100;T=Math.floor(R*A)}if(typeof E=="string"){var M=this.parentSize.height;M===0&&(M=window.innerHeight);var O=parseInt(E,10)/100;E=Math.floor(M*O)}this.scaleMode=S,this.autoRound=P,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,P&&(T=Math.floor(T),E=Math.floor(E)),this.gameSize.setSize(T,E),C===s.ZOOM.MAX_ZOOM&&(C=this.getMaxZoom()),this.zoom=C,C!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,E),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*C,y.minHeight*C),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*C,y.maxHeight*C),this.displaySize.setSize(T,E),this.orientation=d(T,E)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=h(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==s.SCALE_MODE.NONE){var E=this.parent.getBoundingClientRect();(this.parentIsWindow||E.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",E=this.parent.getBoundingClientRect(),!this.parentIsWindow&&E.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=h(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=r(!0));var E=T.width,S=T.height;return y.width!==E||y.height!==S?(y.setSize(E,S),!0):!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var E=this.autoRound;E&&(y=Math.floor(y),T=Math.floor(T));var S=this.width,C=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),E&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(S,C)},resize:function(y,T){var E=this.zoom,S=this.autoRound;S&&(y=Math.floor(y),T=Math.floor(T));var C=this.width,P=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*E,T*E),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var R=this.canvas.style,A=y*E,M=T*E;return S&&(A=Math.floor(A),M=Math.floor(M)),(A!==y||M!==T)&&(R.width=A+"px",R.height=M+"px"),this.refresh(C,P)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var E=this.game.domContainer;if(E){this.baseSize.setCSS(E);var S=this.canvas.style,C=E.style;C.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",C.marginLeft=S.marginLeft,C.marginTop=S.marginTop}return this.emit(a.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=d(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(a.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,E=this.gameSize.height,S,C,P=this.zoom,R=this.autoRound;this.scaleMode===s.SCALE_MODE.NONE?(this.displaySize.setSize(T*P,E*P),S=this.displaySize.width,C=this.displaySize.height,R&&(S=Math.floor(S),C=Math.floor(C)),this._resetZoom&&(y.width=S+"px",y.height=C+"px",this._resetZoom=!1)):this.scaleMode===s.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),S=this.displaySize.width,C=this.displaySize.height,R&&(S=Math.floor(S),C=Math.floor(C)),this.canvas.width=S,this.canvas.height=C):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),S=this.displaySize.width,C=this.displaySize.height,R&&(S=Math.floor(S),C=Math.floor(C)),y.width=S+"px",y.height=C+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=g(this.parentSize.width,this.gameSize.width,0,!0),T=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==s.CENTER.NO_CENTER){var T=this.canvas,E=T.style,S=T.getBoundingClientRect(),C=S.width,P=S.height,R=Math.floor((this.parentSize.width-C)/2),A=Math.floor((this.parentSize.height-P)/2);y===s.CENTER.CENTER_HORIZONTALLY?A=0:y===s.CENTER.CENTER_VERTICALLY&&(R=0),E.marginLeft=R+"px",E.marginTop=A+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(a.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var E=this.getFullscreenTarget();T.keyboard?E[T.request](Element.ALLOW_KEYBOARD_INPUT):E[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(a.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(a.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(a.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(a.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.listeners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0},T.windowResize=function(){y.updateBounds(),y.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(S){return y.onFullScreenChange(S)},T.fullScreenError=function(S){return y.onFullScreenError(S)};var E=["webkit","moz",""];E.forEach(function(S){document.addEventListener(S+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(S+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(y,T){!this.parent||(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.listeners;window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(E){document.removeEventListener(E+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(E+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===s.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===s.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});e.exports=x},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(76),a=t(3),o=new u({initialize:function(h,d,l,f){h===void 0&&(h=0),d===void 0&&(d=h),l===void 0&&(l=0),f===void 0&&(f=null),this._width=h,this._height=d,this._parent=f,this.aspectMode=l,this.aspectRatio=d===0?1:h/d,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new a},setAspectMode:function(r){return r===void 0&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,h){return r===void 0&&(r=0),h===void 0&&(h=r),this.snapTo.set(r,h),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,h){return r===void 0&&(r=0),h===void 0&&(h=r),this.minWidth=s(r,0,this.maxWidth),this.minHeight=s(h,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,h){return r===void 0&&(r=Number.MAX_VALUE),h===void 0&&(h=r),this.maxWidth=s(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=s(h,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,h){switch(r===void 0&&(r=0),h===void 0&&(h=r),this.aspectMode){case o.NONE:this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(n(h,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case o.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case o.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(n(h,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case o.FIT:this.constrain(r,h,!0);break;case o.ENVELOP:this.constrain(r,h,!1);break}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,h){return this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(n(h,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(r,h){return h===void 0&&(h=!0),r=s(r,this.minWidth,this.maxWidth),h&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,h){return h===void 0&&(h=!0),r=s(r,this.minHeight,this.maxHeight),h&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,h,d){r===void 0&&(r=0),h===void 0&&(h=r),d===void 0&&(d=!0),r=this.getNewWidth(r),h=this.getNewHeight(h);var l=this.snapTo,f=h===0?1:r/h;return d&&this.aspectRatio>f||!d&&this.aspectRatio<f?(r=n(r,l.x),h=r/this.aspectRatio,l.y>0&&(h=n(h,l.y),r=h*this.aspectRatio)):(d&&this.aspectRatio<f||!d&&this.aspectRatio>f)&&(h=n(h,l.y),r=h*this.aspectRatio,l.x>0&&(r=n(r,l.x),h=r*(1/this.aspectRatio))),this._width=r,this._height=h,this},fitTo:function(r,h){return this.constrain(r,h,!0)},envelop:function(r,h){return this.constrain(r,h,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});o.NONE=0,o.WIDTH_CONTROLS_HEIGHT=1,o.HEIGHT_CONTROLS_WIDTH=2,o.FIT=3,o.ENVELOP=4,e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(144),n=t(20),a=t(22),o=t(6),r=t(95),h=t(1),d=t(418),l=t(204),f=new s({initialize:function(g,p){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,p){Array.isArray(p)||(p=[p]);for(var x=0;x<p.length;x++)this._pending.push({key:"default",scene:p[x],autoStart:x===0,data:{}})}g.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var c,g,p,x;for(c=0;c<this._pending.length;c++){g=this._pending[c],p=g.key,x=g.scene;var y;x instanceof d?y=this.createSceneFromInstance(p,x):typeof x=="object"?y=this.createSceneFromObject(p,x):typeof x=="function"&&(y=this.createSceneFromFunction(p,x)),p=y.sys.settings.key,this.keys[p]=y,this.scenes.push(y),this._data[p]&&(y.sys.settings.data=this._data[p].data,this._data[p].autoStart&&(g.autoStart=!0)),(g.autoStart||y.sys.settings.active)&&this._start.push(p)}for(this._pending.length=0,this._data={},this.isBooted=!0,c=0;c<this._start.length;c++)g=this._start[c],this.start(g);this._start.length=0}},processQueue:function(){var c=this._pending.length,g=this._queue.length;if(!(c===0&&g===0)){var p,x;if(c){for(p=0;p<c;p++)x=this._pending[p],this.add(x.key,x.scene,x.autoStart,x.data);for(p=0;p<this._start.length;p++)x=this._start[p],this.start(x);this._start.length=0,this._pending.length=0;return}for(p=0;p<this._queue.length;p++)x=this._queue[p],this[x.op](x.keyA,x.keyB);this._queue.length=0}},add:function(c,g,p,x){if(p===void 0&&(p=!1),x===void 0&&(x={}),this.isProcessing||!this.isBooted)return this._pending.push({key:c,scene:g,autoStart:p,data:x}),this.isBooted||(this._data[c]={data:x}),null;c=this.getKey(c,g);var y;return g instanceof d?y=this.createSceneFromInstance(c,g):typeof g=="object"?(g.key=c,y=this.createSceneFromObject(c,g)):typeof g=="function"&&(y=this.createSceneFromFunction(c,g)),y.sys.settings.data=x,c=y.sys.settings.key,this.keys[c]=y,this.scenes.push(y),(p||y.sys.settings.active)&&(this._pending.length?this._start.push(c):this.start(c)),y},remove:function(c){if(this.isProcessing)this._queue.push({op:"remove",keyA:c,keyB:null});else{var g=this.getScene(c);if(!g||g.sys.isTransitioning())return this;var p=this.scenes.indexOf(g),x=g.sys.settings.key;p>-1&&(delete this.keys[x],this.scenes.splice(p,1),this._start.indexOf(x)>-1&&(p=this._start.indexOf(x),this._start.splice(p,1)),g.sys.destroy())}return this},bootScene:function(c){var g=c.sys,p=g.settings;g.sceneUpdate=h,c.init&&(c.init.call(c,p.data),p.status=u.INIT,p.isTransition&&g.events.emit(n.TRANSITION_INIT,p.transitionFrom,p.transitionDuration));var x;g.load&&(x=g.load,x.reset()),x&&c.preload?(c.preload.call(c),x.list.size===0?this.create(c):(p.status=u.LOADING,x.once(r.COMPLETE,this.loadComplete,this),x.start())):this.create(c)},loadComplete:function(c){this.create(c.scene)},payloadComplete:function(c){this.bootScene(c.scene)},update:function(c,g){this.processQueue(),this.isProcessing=!0;for(var p=this.scenes.length-1;p>=0;p--){var x=this.scenes[p].sys;x.settings.status>u.START&&x.settings.status<=u.RUNNING&&x.step(c,g)}},render:function(c){for(var g=0;g<this.scenes.length;g++){var p=this.scenes[g].sys;p.settings.visible&&p.settings.status>=u.LOADING&&p.settings.status<u.SLEEPING&&p.render(c)}this.isProcessing=!1},create:function(c){var g=c.sys,p=g.settings;c.create&&(p.status=u.CREATING,c.create.call(c,p.data),p.status===u.DESTROYED)||(p.isTransition&&g.events.emit(n.TRANSITION_START,p.transitionFrom,p.transitionDuration),c.update&&(g.sceneUpdate=c.update),p.status=u.RUNNING,g.events.emit(n.CREATE,c))},createSceneFromFunction:function(c,g){var p=new g;if(p instanceof d){var x=p.sys.settings.key;if(x!==""&&(c=x),this.keys.hasOwnProperty(c))throw new Error("Cannot add a Scene with duplicate key: "+c);return this.createSceneFromInstance(c,p)}else return p.sys=new l(p),p.sys.settings.key=c,p.sys.init(this.game),p},createSceneFromInstance:function(c,g){var p=g.sys.settings.key;return p===""&&(g.sys.settings.key=c),g.sys.init(this.game),g},createSceneFromObject:function(c,g){var p=new d(g),x=p.sys.settings.key;x!==""?c=x:p.sys.settings.key=c,p.sys.init(this.game);for(var y=["init","preload","create","update","render"],T=0;T<y.length;T++){var E=o(g,y[T],null);E&&(p[y[T]]=E)}if(g.hasOwnProperty("extend")){for(var S in g.extend)if(!!g.extend.hasOwnProperty(S)){var C=g.extend[S];S==="data"&&p.hasOwnProperty("data")&&typeof C=="object"?p.data.merge(C):S!=="sys"&&(p[S]=C)}}return p},getKey:function(c,g){if(c||(c="default"),typeof g=="function")return c;if(g instanceof d?c=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(c=g.key),this.keys.hasOwnProperty(c))throw new Error("Cannot add a Scene with duplicate key: "+c);return c},getScenes:function(c,g){c===void 0&&(c=!0),g===void 0&&(g=!1);for(var p=[],x=this.scenes,y=0;y<x.length;y++){var T=x[y];T&&(!c||c&&T.sys.isActive())&&p.push(T)}return g?p.reverse():p},getScene:function(c){if(typeof c=="string"){if(this.keys[c])return this.keys[c]}else for(var g=0;g<this.scenes.length;g++)if(c===this.scenes[g])return c;return null},isActive:function(c){var g=this.getScene(c);return g?g.sys.isActive():null},isPaused:function(c){var g=this.getScene(c);return g?g.sys.isPaused():null},isVisible:function(c){var g=this.getScene(c);return g?g.sys.isVisible():null},isSleeping:function(c){var g=this.getScene(c);return g?g.sys.isSleeping():null},pause:function(c,g){var p=this.getScene(c);return p&&p.sys.pause(g),this},resume:function(c,g){var p=this.getScene(c);return p&&p.sys.resume(g),this},sleep:function(c,g){var p=this.getScene(c);return p&&!p.sys.isTransitioning()&&p.sys.sleep(g),this},wake:function(c,g){var p=this.getScene(c);return p&&p.sys.wake(g),this},run:function(c,g){var p=this.getScene(c);if(!p){for(var x=0;x<this._pending.length;x++)if(this._pending[x].key===c){this.queueOp("start",c,g);break}return this}p.sys.isSleeping()?p.sys.wake(g):p.sys.isPaused()?p.sys.resume(g):this.start(c,g)},start:function(c,g){if(!this.isBooted)return this._data[c]={autoStart:!0,data:g},this;var p=this.getScene(c);if(p){var x=p.sys;if(x.isActive()||x.isPaused())x.shutdown(),x.sceneUpdate=h,x.start(g);else{x.sceneUpdate=h,x.start(g);var y;if(x.load&&(y=x.load),y&&x.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:x.settings.pack})))return x.settings.status=u.LOADING,y.once(r.COMPLETE,this.payloadComplete,this),y.start(),this}this.bootScene(p)}return this},stop:function(c,g){var p=this.getScene(c);return p&&!p.sys.isTransitioning()&&p.sys.shutdown(g),this},switch:function(c,g){var p=this.getScene(c),x=this.getScene(g);return p&&x&&p!==x&&(this.sleep(c),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(c){return this.scenes[c]},getIndex:function(c){var g=this.getScene(c);return this.scenes.indexOf(g)},bringToTop:function(c){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:c,keyB:null});else{var g=this.getIndex(c);if(g!==-1&&g<this.scenes.length){var p=this.getScene(c);this.scenes.splice(g,1),this.scenes.push(p)}}return this},sendToBack:function(c){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:c,keyB:null});else{var g=this.getIndex(c);if(g!==-1&&g>0){var p=this.getScene(c);this.scenes.splice(g,1),this.scenes.unshift(p)}}return this},moveDown:function(c){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:c,keyB:null});else{var g=this.getIndex(c);if(g>0){var p=g-1,x=this.getScene(c),y=this.getAt(p);this.scenes[g]=y,this.scenes[p]=x}}return this},moveUp:function(c){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:c,keyB:null});else{var g=this.getIndex(c);if(g<this.scenes.length-1){var p=g+1,x=this.getScene(c),y=this.getAt(p);this.scenes[g]=y,this.scenes[p]=x}}return this},moveAbove:function(c,g){if(c===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:c,keyB:g});else{var p=this.getIndex(c),x=this.getIndex(g);if(p!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),this.scenes.splice(p+1,0,y)}}return this},moveBelow:function(c,g){if(c===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:c,keyB:g});else{var p=this.getIndex(c),x=this.getIndex(g);if(p!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),p===0?this.scenes.unshift(y):this.scenes.splice(p,0,y)}}return this},queueOp:function(c,g,p){return this._queue.push({op:c,keyA:g,keyB:p}),this},swapPosition:function(c,g){if(c===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:c,keyB:g});else{var p=this.getIndex(c),x=this.getIndex(g);if(p!==x&&p!==-1&&x!==-1){var y=this.getAt(p);this.scenes[p]=this.scenes[x],this.scenes[x]=y}}return this},dump:function(){for(var c=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],p=0;p<this.scenes.length;p++){var x=this.scenes[p].sys,y=x.settings.visible&&(x.settings.status===u.RUNNING||x.settings.status===u.PAUSED)?"[*] ":"[-] ";y+=x.settings.key+" ("+g[x.settings.status]+")",c.push(y)}console.log(c.join(`
`))},destroy:function(){for(var c=0;c<this.scenes.length;c++){var g=this.scenes[c].sys;g.destroy()}this.update=h,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});e.exports=f},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(204),n=new s({initialize:function(o){this.sys=new u(this,o),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=t(205),n=function(a){var o=a.game.config.defaultPhysicsSystem,r=s(a.settings,"physics",!1);if(!(!o&&!r)){var h=[];if(o&&h.push(u(o+"Physics")),r)for(var d in r)d=u(d.concat("Physics")),h.indexOf(d)===-1&&h.push(d);return h}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n){var a=n.plugins.getDefaultScenePlugins(),o=s(n.settings,"plugins",!1);return Array.isArray(o)?o:a||[]};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(144),u=t(6),n=t(127),a=t(978),o={create:function(r){return typeof r=="string"?r={key:r}:r===void 0&&(r={}),{status:s.PENDING,key:u(r,"key",""),active:u(r,"active",!1),visible:u(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:u(r,"pack",!1),cameras:u(r,"cameras",null),map:u(r,"map",n(a,u(r,"mapAdd",{}))),physics:u(r,"physics",{}),loader:u(r,"loader",{}),plugins:u(r,"plugins",!1),input:u(r,"input",{})}}};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(423),n=t(0),a=t(38),o=t(33),r=t(9),h=t(106),d=t(22),l=t(388),f=t(6),c=t(425),g=t(206),p=new n({Extends:r,initialize:function(y){r.call(this),this.game=y,this.name="TextureManager",this.list={},this._tempCanvas=s.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,y.events.once(d.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(h.LOAD,this.updatePending,this),this.on(h.ERROR,this.updatePending,this);var x=this.game.config;this.addBase64("__DEFAULT",x.defaultImage),this.addBase64("__MISSING",x.missingImage),this.addBase64("__WHITE",x.whiteImage),this.game.events.once(d.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(h.LOAD),this.off(h.ERROR),this.emit(h.READY))},checkKey:function(x){return this.exists(x)?(console.error("Texture key already in use: "+x),!1):!0},remove:function(x){if(typeof x=="string")if(this.exists(x))x=this.get(x);else return console.warn("No texture found matching key: "+x),this;return this.list.hasOwnProperty(x.key)&&(x.destroy(),this.emit(h.REMOVE,x.key)),this},removeKey:function(x){return this.list.hasOwnProperty(x)&&delete this.list[x],this},addBase64:function(x,y){if(this.checkKey(x)){var T=this,E=new Image;E.onerror=function(){T.emit(h.ERROR,x)},E.onload=function(){var S=T.create(x,E);c.Image(S,0),T.emit(h.ADD,x,S),T.emit(h.LOAD,x,S)},E.src=y}return this},getBase64:function(x,y,T,E){T===void 0&&(T="image/png"),E===void 0&&(E=.92);var S="",C=this.getFrame(x,y);if(C&&(C.source.isRenderTexture||C.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(C){var P=C.canvasData,R=s.create2D(this,P.width,P.height),A=R.getContext("2d");A.drawImage(C.source.image,P.x,P.y,P.width,P.height,0,0,P.width,P.height),S=R.toDataURL(T,E),s.remove(R)}return S},addImage:function(x,y,T){var E=null;return this.checkKey(x)&&(E=this.create(x,y),c.Image(E,0),T&&E.setDataSource(T),this.emit(h.ADD,x,E)),E},addGLTexture:function(x,y,T,E){var S=null;return this.checkKey(x)&&(T===void 0&&(T=y.width),E===void 0&&(E=y.height),S=this.create(x,y,T,E),S.add("__BASE",0,0,0,T,E),this.emit(h.ADD,x,S)),S},addRenderTexture:function(x,y){var T=null;return this.checkKey(x)&&(T=this.create(x,y),T.add("__BASE",0,0,0,y.width,y.height),this.emit(h.ADD,x,T)),T},generate:function(x,y){if(this.checkKey(x)){var T=s.create(this,1,1);return y.canvas=T,l(y),this.addCanvas(x,T)}else return null},createCanvas:function(x,y,T){if(y===void 0&&(y=256),T===void 0&&(T=256),this.checkKey(x)){var E=s.create(this,y,T,o.CANVAS,!0);return this.addCanvas(x,E)}return null},addCanvas:function(x,y,T){T===void 0&&(T=!1);var E=null;return T?E=new u(this,x,y,y.width,y.height):this.checkKey(x)&&(E=new u(this,x,y,y.width,y.height),this.list[x]=E,this.emit(h.ADD,x,E)),E},addAtlas:function(x,y,T,E){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(x,y,T,E):this.addAtlasJSONHash(x,y,T,E)},addAtlasJSONArray:function(x,y,T,E){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var C=T.length===1,P=0;P<S.source.length;P++){var R=C?T[0]:T[P];c.JSONArray(S,P,R)}else c.JSONArray(S,0,T);E&&S.setDataSource(E),this.emit(h.ADD,x,S)}return S},addAtlasJSONHash:function(x,y,T,E){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var C=0;C<T.length;C++)c.JSONHash(S,C,T[C]);else c.JSONHash(S,0,T);E&&S.setDataSource(E),this.emit(h.ADD,x,S)}return S},addAtlasXML:function(x,y,T,E){var S=null;return this.checkKey(x)&&(S=this.create(x,y),c.AtlasXML(S,0,T),E&&S.setDataSource(E),this.emit(h.ADD,x,S)),S},addUnityAtlas:function(x,y,T,E){var S=null;return this.checkKey(x)&&(S=this.create(x,y),c.UnityYAML(S,0,T),E&&S.setDataSource(E),this.emit(h.ADD,x,S)),S},addSpriteSheet:function(x,y,T){var E=null;if(this.checkKey(x)){E=this.create(x,y);var S=E.source[0].width,C=E.source[0].height;c.SpriteSheet(E,0,0,0,S,C,T),this.emit(h.ADD,x,E)}return E},addSpriteSheetFromAtlas:function(x,y){if(!this.checkKey(x))return null;var T=f(y,"atlas",null),E=f(y,"frame",null);if(!(!T||!E)){var S=this.get(T),C=S.get(E);if(C){var P=this.create(x,C.source.image);return C.trimmed?c.SpriteSheetFromAtlas(P,C,y):c.SpriteSheet(P,0,C.cutX,C.cutY,C.cutWidth,C.cutHeight,y),this.emit(h.ADD,x,P),P}}},create:function(x,y,T,E){var S=null;return this.checkKey(x)&&(S=new g(this,x,y,T,E),this.list[x]=S),S},exists:function(x){return this.list.hasOwnProperty(x)},get:function(x){return x===void 0&&(x="__DEFAULT"),this.list[x]?this.list[x]:x instanceof g?x:this.list.__MISSING},cloneFrame:function(x,y){if(this.list[x])return this.list[x].get(y).clone()},getFrame:function(x,y){if(this.list[x])return this.list[x].get(y)},getTextureKeys:function(){var x=[];for(var y in this.list)y!=="__DEFAULT"&&y!=="__MISSING"&&x.push(y);return x},getPixel:function(x,y,T,E){var S=this.getFrame(T,E);if(S){x-=S.x,y-=S.y;var C=S.data.cut;if(x+=C.x,y+=C.y,x>=C.x&&x<C.r&&y>=C.y&&y<C.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(S.source.image,x,y,1,1,0,0,1,1);var R=P.getImageData(0,0,1,1);return new a(R.data[0],R.data[1],R.data[2],R.data[3])}}return null},getPixelAlpha:function(x,y,T,E){var S=this.getFrame(T,E);if(S){x-=S.x,y-=S.y;var C=S.data.cut;if(x+=C.x,y+=C.y,x>=C.x&&x<C.r&&y>=C.y&&y<C.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(S.source.image,x,y,1,1,0,0,1,1);var R=P.getImageData(0,0,1,1);return R.data[3]}}return null},setTexture:function(x,y,T){return this.list[y]&&(x.texture=this.list[y],x.frame=x.texture.get(T)),x},renameTexture:function(x,y){var T=this.get(x);return T&&x!==y?(T.key=y,this.list[y]=T,delete this.list[x],!0):!1},each:function(x,y){for(var T=[null],E=1;E<arguments.length;E++)T.push(arguments[E]);for(var S in this.list)T[0]=this.list[S],x.apply(y,T)},destroy:function(){for(var x in this.list)this.list[x].destroy();this.list={},this.game=null,s.remove(this._tempCanvas)}});e.exports=p},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(38),a=t(33),o=t(138),r=t(206),h=new s({Extends:r,initialize:function(l,f,c,g,p){r.call(this,l,f,c,g,p),this.add("__BASE",0,0,0,g,p),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=g,this.height=p,this.imageData=this.context.getImageData(0,0,g,p),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===a.WEBGL&&this.refresh(),this},draw:function(d,l,f){return this.context.drawImage(f,d,l),this.update()},drawFrame:function(d,l,f,c){f===void 0&&(f=0),c===void 0&&(c=0);var g=this.manager.getFrame(d,l);if(g){var p=g.canvasData,x=g.cutWidth,y=g.cutHeight,T=g.source.resolution;return this.context.drawImage(g.source.image,p.x,p.y,x,y,f,c,x/T,y/T),this.update()}else return this},setPixel:function(d,l,f,c,g,p){p===void 0&&(p=255),d=Math.abs(Math.floor(d)),l=Math.abs(Math.floor(l));var x=this.getIndex(d,l);if(x>-1){var y=this.context.getImageData(d,l,1,1);y.data[0]=f,y.data[1]=c,y.data[2]=g,y.data[3]=p,this.context.putImageData(y,d,l)}return this},putData:function(d,l,f,c,g,p,x){return c===void 0&&(c=0),g===void 0&&(g=0),p===void 0&&(p=d.width),x===void 0&&(x=d.height),this.context.putImageData(d,l,f,c,g,p,x),this},getData:function(d,l,f,c){d=u(Math.floor(d),0,this.width-1),l=u(Math.floor(l),0,this.height-1),f=u(f,1,this.width-d),c=u(c,1,this.height-l);var g=this.context.getImageData(d,l,f,c);return g},getPixel:function(d,l,f){f||(f=new n);var c=this.getIndex(d,l);if(c>-1){var g=this.data,p=g[c+0],x=g[c+1],y=g[c+2],T=g[c+3];f.setTo(p,x,y,T)}return f},getPixels:function(d,l,f,c){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=this.width),c===void 0&&(c=f),d=Math.abs(Math.round(d)),l=Math.abs(Math.round(l));for(var g=u(d,0,this.width),p=u(d+f,0,this.width),x=u(l,0,this.height),y=u(l+c,0,this.height),T=new n,E=[],S=x;S<y;S++){for(var C=[],P=g;P<p;P++)T=this.getPixel(P,S,T),C.push({x:P,y:S,color:T.color,alpha:T.alphaGL});E.push(C)}return E},getIndex:function(d,l){return d=Math.abs(Math.round(d)),l=Math.abs(Math.round(l)),d<this.width&&l<this.height?(d+l*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(d,l,f,c){return d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=this.width),c===void 0&&(c=this.height),this.context.clearRect(d,l,f,c),this.update()},setSize:function(d,l){return l===void 0&&(l=d),(d!==this.width||l!==this.height)&&(this.canvas.width=d,this.canvas.height=l,this._source.width=d,this._source.height=l,this._source.isPowerOf2=o(d,l),this.frames.__BASE.setSize(d,l,0,0),this.width=d,this.height=l,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(0),n=t(138),a=t(168),o=new u({initialize:function(h,d,l,f,c){c===void 0&&(c=!1);var g=h.manager.game;this.renderer=g.renderer,this.texture=h,this.source=d,this.image=d,this.compressionAlgorithm=null,this.resolution=1,this.width=l||d.naturalWidth||d.videoWidth||d.width||0,this.height=f||d.naturalHeight||d.videoHeight||d.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=d instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&d instanceof HTMLVideoElement,this.isRenderTexture=d.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&d instanceof WebGLTexture,this.isPowerOf2=n(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=c,this.init(g)},init:function(r){var h=this.renderer;h&&(h.gl?this.isCanvas?this.glTexture=h.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=h.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=h.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=h.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),r.config.antialias||this.setFilter(1)},setFilter:function(r){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,r),this.scaleMode=r},setFlipY:function(r){return r===void 0&&(r=!0),this.flipY=r,this},update:function(){var r=this.renderer.gl;r&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):r&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&s.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AtlasXML:t(979),Canvas:t(980),Image:t(981),JSONArray:t(982),JSONHash:t(983),SpriteSheet:t(984),SpriteSheetFromAtlas:t(985),UnityYAML:t(986)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(427),u=t(430),n=t(432),a={create:function(o){var r=o.config.audio,h=o.device.audio;return r.noAudio||!h.webAudio&&!h.audioData?new u(o):h.webAudio&&!r.disableWebAudio?new n(o):new s(o)}};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(145),u=t(0),n=t(70),a=t(429),o=new u({Extends:s,initialize:function(h){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,s.call(this,h)},add:function(r,h){var d=new a(this,r,h);return this.sounds.push(d),d},unlock:function(){this.locked=!1;var r=this;if(this.game.cache.audio.entries.each(function(f,c){for(var g=0;g<c.length;g++)if(c[g].dataset.locked==="true")return r.locked=!0,!1;return!0}),!!this.locked){var h=!1,d=function(){h=!0},l=function(){if(h){h=!1;return}document.body.removeEventListener("touchmove",d),document.body.removeEventListener("touchend",l);var f=[];if(r.game.cache.audio.entries.each(function(g,p){for(var x=0;x<p.length;x++){var y=p[x];y.dataset.locked==="true"&&f.push(y)}return!0}),f.length!==0){var c=f[f.length-1];c.oncanplaythrough=function(){c.oncanplaythrough=null,f.forEach(function(g){g.dataset.locked="false"}),r.unlocked=!0},f.forEach(function(g){g.load()})}};this.once(n.UNLOCKED,function(){for(this.forEachActiveSound(function(c){c.currentMarker===null&&c.duration===0&&(c.duration=c.tags[0].duration),c.totalDuration=c.tags[0].duration});this.lockedActionsQueue.length;){var f=this.lockedActionsQueue.shift();f.sound[f.prop].apply?f.sound[f.prop].apply(f.sound,f.value||[]):f.sound[f.prop]=f.value}},this),document.body.addEventListener("touchmove",d,!1),document.body.addEventListener("touchend",l,!1)}},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){s.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,h,d){return r.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:r,prop:h,value:d}),!0):!1},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(h){h.updateMute()}),this.emit(n.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(h){h.updateVolume()}),this.emit(n.GLOBAL_VOLUME,this,r)}}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,o,r,h){if(r===void 0&&(r=0),h===void 0&&(h=n.length),s(n,r,h))for(var d=r;d<h;d++){var l=n[d];if(!a||a&&o===void 0&&l.hasOwnProperty(a)||a&&o!==void 0&&l[a]===o)return l}return null};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(146),u=t(0),n=t(70),a=t(18),o=new u({Extends:s,initialize:function(h,d,l){if(l===void 0&&(l={}),this.tags=h.game.cache.audio.get(d),!this.tags)throw new Error('There is no audio asset with key "'+d+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,s.call(this,h,d,l)},play:function(r,h){return this.manager.isLocked(this,"play",[r,h])||!s.prototype.play.call(this,r,h)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!s.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!s.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(n.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var r=this.currentConfig.seek,h=this.currentConfig.delay,d=(this.currentMarker?this.currentMarker.start:0)+r;return this.previousTime=d,this.audio.currentTime=d,this.applyConfig(),h===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+h*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var h=this.tags[r];if(h.dataset.used==="false")return h.dataset.used="true",this.audio=h,!0}if(!this.manager.override)return!1;var d=[];this.manager.forEachActiveSound(function(f){f.key===this.key&&f.audio&&d.push(f)},this),d.sort(function(f,c){return f.loop===c.loop?c.seek/c.duration-f.seek/f.duration:f.loop?1:-1});var l=d[0];return this.audio=l.audio,l.reset(),l.audio=null,l.startTime=0,l.previousTime=0,!0},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(h){console.warn(h)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){s.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(!!this.isPlaying){if(this.startTime>0){this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var h=this.currentMarker?this.currentMarker.start:0,d=h+this.duration,l=this.audio.currentTime;if(this.currentConfig.loop)l>=d-this.manager.loopEndOffset?(this.audio.currentTime=h+Math.max(0,l-d),l=this.audio.currentTime):l<h&&(this.audio.currentTime+=h,l=this.audio.currentTime),l<this.previousTime&&this.emit(n.LOOPED,this);else if(l>=d){this.reset(),this.stopAndReleaseAudioTag(),this.emit(n.COMPLETE,this);return}this.previousTime=l}},destroy:function(){s.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=a(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){s.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,!this.manager.isLocked(this,"mute",r)&&(this.updateMute(),this.emit(n.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,!this.manager.isLocked(this,"volume",r)&&(this.updateVolume(),this.emit(n.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,!this.manager.isLocked(this,n.RATE,r)&&(this.calculateRate(),this.emit(n.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,!this.manager.isLocked(this,n.DETUNE,r)&&(this.calculateRate(),this.emit(n.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||this.startTime>0||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(n.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,!this.manager.isLocked(this,"loop",r)&&(this.audio&&(this.audio.loop=r),this.emit(n.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(n.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(145),u=t(0),n=t(9),a=t(431),o=t(1),r=new u({Extends:n,initialize:function(d){n.call(this),this.game=d,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(h,d){var l=new a(this,h,d);return this.sounds.push(l),l},addAudioSprite:function(h,d){var l=this.add(h,d);return l.spritemap={},l},play:function(h,d){return!1},playAudioSprite:function(h,d,l){return!1},remove:function(h){return s.prototype.remove.call(this,h)},removeByKey:function(h){return s.prototype.removeByKey.call(this,h)},pauseAll:o,resumeAll:o,stopAll:o,update:o,setRate:o,setDetune:o,setMute:o,setVolume:o,forEachActiveSound:function(h,d){s.prototype.forEachActiveSound.call(this,h,d)},destroy:function(){s.prototype.destroy.call(this)}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(146),u=t(0),n=t(9),a=t(17),o=function(){return!1},r=function(){return null},h=function(){return this},d=new u({Extends:n,initialize:function(f,c,g){g===void 0&&(g={}),n.call(this),this.manager=f,this.key=c,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=a({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:o,updateMarker:o,removeMarker:r,play:o,pause:o,resume:o,stop:o,destroy:function(){s.prototype.destroy.call(this)},setMute:h,setVolume:h,setRate:h,setDetune:h,setSeek:h,setLoop:h,setPan:h});e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(433),u=t(145),n=t(0),a=t(70),o=t(22),r=t(434),h=new n({Extends:u,initialize:function(l){this.context=this.createAudioContext(l),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),u.call(this,l),this.locked&&l.isBooted?this.unlock():l.events.once(o.BOOT,this.unlock,this)},createAudioContext:function(d){var l=d.config.audio;if(l.context)return l.context.resume(),l.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(d){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=d,this.masterMuteNode=d.createGain(),this.masterVolumeNode=d.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(d.destination),this.destination=this.masterMuteNode,this},add:function(d,l){var f=new r(this,d,l);return this.sounds.push(f),f},decodeAudio:function(d,l){var f;Array.isArray(d)?f=d:f=[{key:d,data:l}];for(var c=this.game.cache.audio,g=f.length,p=0;p<f.length;p++){var x=f[p],y=x.key,T=x.data;typeof T=="string"&&(T=s(T));var E=function(C,P){c.add(C,P),this.emit(a.DECODED,C),g--,g===0&&this.emit(a.DECODED_ALL)}.bind(this,y),S=function(C,P){console.error("Error decoding audio: "+C+" - ",P?P.message:""),g--,g===0&&this.emit(a.DECODED_ALL)}.bind(this,y);this.context.decodeAudioData(T,E,S)}},unlock:function(){var d=this,l=document.body,f=function c(){if(d.context&&l){var g=l.removeEventListener;d.context.resume().then(function(){g("touchstart",c),g("touchend",c),g("click",c),g("keydown",c),d.unlocked=!0},function(){g("touchstart",c),g("touchend",c),g("click",c),g("keydown",c)})}};l&&(l.addEventListener("touchstart",f,!1),l.addEventListener("touchend",f,!1),l.addEventListener("click",f,!1),l.addEventListener("keydown",f,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var d=this.context;(d.state==="suspended"||d.state==="interrupted")&&!this.locked&&d.resume()},update:function(d,l){u.prototype.update.call(this,d,l);var f=this.context;f&&f.state==="interrupted"&&f.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var d=this;this.context.close().then(function(){d.context=null})}u.prototype.destroy.call(this)},setMute:function(d){return this.mute=d,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(d){this.masterMuteNode.gain.setValueAtTime(d?0:1,0),this.emit(a.GLOBAL_MUTE,this,d)}},setVolume:function(d){return this.volume=d,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(d){this.masterVolumeNode.gain.setValueAtTime(d,0),this.emit(a.GLOBAL_VOLUME,this,d)}}});e.exports=h},function(e,v){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(256),u=0;u<t.length;u++)s[t.charCodeAt(u)]=u;var n=function(a){a=a.substr(a.indexOf(",")+1);var o=a.length,r=o*.75,h=0,d,l,f,c;a[o-1]==="="&&(r--,a[o-2]==="="&&r--);for(var g=new ArrayBuffer(r),p=new Uint8Array(g),x=0;x<o;x+=4)d=s[a.charCodeAt(x)],l=s[a.charCodeAt(x+1)],f=s[a.charCodeAt(x+2)],c=s[a.charCodeAt(x+3)],p[h++]=d<<2|l>>4,p[h++]=(l&15)<<4|f>>2,p[h++]=(f&3)<<6|c&63;return g};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(146),u=t(0),n=t(70),a=new u({Extends:s,initialize:function(r,h,d){if(d===void 0&&(d={}),this.audioBuffer=r.game.cache.audio.get(h),!this.audioBuffer)throw new Error('Audio key "'+h+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=r.context.createGain(),this.volumeNode=r.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),r.context.createStereoPanner?(this.pannerNode=r.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(r.destination)):this.volumeNode.connect(r.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,s.call(this,r,h,d)},play:function(o,r){return s.prototype.play.call(this,o,r)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(n.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(n.RESUME,this),!0)},stop:function(){return s.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(n.STOP,this),!0):!1},createAndStartBufferSource:function(){var o=this.currentConfig.seek,r=this.currentConfig.delay,h=this.manager.context.currentTime+r,d=(this.currentMarker?this.currentMarker.start:0)+o,l=this.duration-o;this.playTime=h-o,this.startTime=h,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,h),Math.max(0,d),Math.max(0,l)),this.resetConfig()},createAndStartLoopBufferSource:function(){var o=this.getLoopTime(),r=this.currentMarker?this.currentMarker.start:0,h=this.duration;this.loopTime=o,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,o),Math.max(0,r),Math.max(0,h))},createBufferSource:function(){var o=this,r=this.manager.context.createBufferSource();return r.buffer=this.audioBuffer,r.connect(this.muteNode),r.onended=function(h){h.target===o.source&&(o.currentConfig.loop?o.hasLooped=!0:o.hasEnded=!0)},r},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),s.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,s.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(n.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(n.LOOPED,this))},destroy:function(){s.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){s.prototype.calculateRate.call(this);var o=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,o),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,o)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var o=0,r=0;r<this.rateUpdates.length;r++){var h=0;r<this.rateUpdates.length-1?h=this.rateUpdates[r+1].time:h=this.manager.context.currentTime-this.playTime,o+=(h-this.rateUpdates[r].time)*this.rateUpdates[r].rate}return o},getLoopTime:function(){for(var o=0,r=0;r<this.rateUpdates.length-1;r++)o+=(this.rateUpdates[r+1].time-this.rateUpdates[r].time)*this.rateUpdates[r].rate;var h=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+h.time+(this.duration-o)/h.rate},rate:{get:function(){return this.currentConfig.rate},set:function(o){this.currentConfig.rate=o,this.calculateRate(),this.emit(n.RATE,this,o)}},setRate:function(o){return this.rate=o,this},detune:{get:function(){return this.currentConfig.detune},set:function(o){this.currentConfig.detune=o,this.calculateRate(),this.emit(n.DETUNE,this,o)}},setDetune:function(o){return this.detune=o,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(o){this.currentConfig.mute=o,this.muteNode.gain.setValueAtTime(o?0:1,0),this.emit(n.MUTE,this,o)}},setMute:function(o){return this.mute=o,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(o){this.currentConfig.volume=o,this.volumeNode.gain.setValueAtTime(o,0),this.emit(n.VOLUME,this,o)}},setVolume:function(o){return this.volume=o,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(o){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(o=Math.min(Math.max(0,o),this.duration),this.currentConfig.seek=o,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(n.SEEK,this,o))}},setSeek:function(o){return this.seek=o,this},loop:{get:function(){return this.currentConfig.loop},set:function(o){this.currentConfig.loop=o,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),o&&this.createAndStartLoopBufferSource()),this.emit(n.LOOP,this,o)}},setLoop:function(o){return this.loop=o,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(o){this.currentConfig.pan=o,this.pannerNode&&this.pannerNode.pan.setValueAtTime(o,this.manager.context.currentTime),this.emit(n.PAN,this,o)}},setPan:function(o){return this.pan=o,this}});e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=s.length,n=s[0].length,a=new Array(n),o=0;o<n;o++){a[o]=new Array(u);for(var r=u-1;r>-1;r--)a[o][r]=s[r][o]}return a};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(n,a,o){var r=n[a];n[a]=n[o],n[o]=r}function s(n,a){return n<a?-1:n>a?1:0}var u=function(n,a,o,r,h){for(o===void 0&&(o=0),r===void 0&&(r=n.length-1),h===void 0&&(h=s);r>o;){if(r-o>600){var d=r-o+1,l=a-o+1,f=Math.log(d),c=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*c*(d-c)/d)*(l-d/2<0?-1:1),p=Math.max(o,Math.floor(a-l*c/d+g)),x=Math.min(r,Math.floor(a+(d-l)*c/d+g));u(n,a,p,x,h)}var y=n[a],T=o,E=r;for(t(n,o,a),h(n[r],y)>0&&t(n,o,r);T<E;){for(t(n,T,E),T++,E--;h(n[T],y)<0;)T++;for(;h(n[E],y)>0;)E--}h(n[o],y)===0?t(n,o,E):(E++,t(n,E,r)),E<=a&&(o=E+1),a<=E&&(r=E-1)}};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=t(131),n=function(o,r,h){for(var d=[],l=0;l<o.length;l++)for(var f=0;f<r.length;f++)for(var c=0;c<h;c++)d.push({a:o[l],b:r[f]});return d},a=function(o,r,h){var d=s(h,"max",0),l=s(h,"qty",1),f=s(h,"random",!1),c=s(h,"randomB",!1),g=s(h,"repeat",0),p=s(h,"yoyo",!1),x=[];if(c&&u(r),g===-1)if(d===0)g=0;else{var y=o.length*r.length*l;p&&(y*=2),g=Math.ceil(d/y)}for(var T=0;T<=g;T++){var E=n(o,r,l);f&&u(E),x=x.concat(E),p&&(E.reverse(),x=x.concat(E))}return d&&x.splice(d),x};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={PROCESS_QUEUE_ADD:t(1041),PROCESS_QUEUE_REMOVE:t(1042)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(13),u=function(n,a){var o=s(a,"anims",null);if(o===null)return n;if(typeof o=="string")n.anims.play(o);else if(typeof o=="object"){var r=n.anims,h=s(o,"key",void 0);if(h){var d=s(o,"startFrame",void 0),l=s(o,"delay",0),f=s(o,"repeat",0),c=s(o,"repeatDelay",0),g=s(o,"yoyo",!1),p=s(o,"play",!1),x=s(o,"delayedPlay",0),y={key:h,delay:l,repeat:f,repeatDelay:c,yoyo:g,startFrame:d};p?r.play(y):x>0?r.playAfterDelay(y,x):r.load(y)}}return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(109),n=new s({initialize:function(o,r,h,d,l){this.parent=o,this.x=r,this.y=h,this.frame=d,this.data={},this.tint=16777215,this._visible=l,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(a){return a===void 0?this.frame=this.parent.frame:a instanceof u&&a.texture===this.parent.texture?this.frame=a:this.frame=this.parent.texture.get(a),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(a,o,r){return this.x=a,this.y=o,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(a,o){return this.x=a,this.y=o,this},setFlipX:function(a){return this.flipX=a,this},setFlipY:function(a){return this.flipY=a,this},setFlip:function(a,o){return this.flipX=a,this.flipY=o,this},setVisible:function(a){return this.visible=a,this},setAlpha:function(a){return this.alpha=a,this},setTint:function(a){return this.tint=a,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(a){this.parent.dirty|=this._visible!==a,this._visible=a}},alpha:{get:function(){return this._alpha},set:function(a){this.parent.dirty|=this._alpha>0!=a>0,this._alpha=a}}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a,o){o===void 0&&(o=new s);var r=Math.min(n.x,a.x),h=Math.min(n.y,a.y),d=Math.max(n.right,a.right)-r,l=Math.max(n.bottom,a.bottom)-h;return o.setTo(r,h,d,l)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(1055),a=t(15),o=t(7),r=t(202),h=t(20),d=t(140),l=new s({Extends:a,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Origin,u.ScrollFactor,u.Transform,u.Visible,n],initialize:function(c,g,p,x,y,T){a.call(this,c,"DOMElement"),this.parent=c.sys.game.domContainer,this.cache=c.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new d,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,p),typeof x=="string"?x[0]==="#"?this.setElement(x.substr(1),y,T):this.createElement(x,y,T):x&&this.setElement(x,y,T),c.sys.events.on(h.SLEEP,this.handleSceneEvent,this),c.sys.events.on(h.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(f){var c=this.node,g=c.style;c&&(g.display=f.settings.visible?"block":"none")},setSkew:function(f,c){return f===void 0&&(f=0),c===void 0&&(c=f),this.skewX=f,this.skewY=c,this},setPerspective:function(f){return this.parent.style.perspective=f+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(f){this.parent.style.perspective=f+"px"}},addListener:function(f){if(this.node){f=f.split(" ");for(var c=0;c<f.length;c++)this.node.addEventListener(f[c],this.handler,!1)}return this},removeListener:function(f){if(this.node){f=f.split(" ");for(var c=0;c<f.length;c++)this.node.removeEventListener(f[c],this.handler)}return this},dispatchNativeEvent:function(f){this.emit(f.type,f)},createElement:function(f,c,g){return this.setElement(document.createElement(f),c,g)},setElement:function(f,c,g){this.removeElement();var p;if(typeof f=="string"?(f[0]==="#"&&(f=f.substr(1)),p=document.getElementById(f)):typeof f=="object"&&f.nodeType===1&&(p=f),!p)return this;if(this.node=p,c&&o(c))for(var x in c)p.style[x]=c[x];else typeof c=="string"&&(p.style=c);return p.style.zIndex="0",p.style.display="inline",p.style.position="absolute",p.phaser=this,this.parent&&this.parent.appendChild(p),g&&(p.innerText=g),this.updateSize()},createFromCache:function(f,c){var g=this.cache.get(f);return g&&this.createFromHTML(g,c),this},createFromHTML:function(f,c){c===void 0&&(c="div"),this.removeElement();var g=document.createElement(c);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=f,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var f=this.node,c=f.getBoundingClientRect();return this.width=f.clientWidth,this.height=f.clientHeight,this.displayWidth=c.width||0,this.displayHeight=c.height||0,this},getChildByProperty:function(f,c){if(this.node){for(var g=this.node.querySelectorAll("*"),p=0;p<g.length;p++)if(g[p][f]===c)return g[p]}return null},getChildByID:function(f){return this.getChildByProperty("id",f)},getChildByName:function(f){return this.getChildByProperty("name",f)},setClassName:function(f){return this.node&&(this.node.className=f,this.updateSize()),this},setText:function(f){return this.node&&(this.node.innerText=f,this.updateSize()),this},setHTML:function(f){return this.node&&(this.node.innerHTML=f,this.updateSize()),this},preUpdate:function(){var f=this.parentContainer,c=this.node;c&&f&&!f.willRender()&&(c.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(h.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(h.WAKE,this.handleSceneEvent,this)}});e.exports=l},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1056),u=t(15),n=t(25),a=new n,o=new n,r=new n,h=function(d,l,f,c){if(!!l.node){var g=l.node.style,p=l.scene.sys.settings;if(!g||!p.visible||u.RENDER_MASK!==l.renderFlags||l.cameraFilter!==0&&l.cameraFilter&f.id||l.parentContainer&&!l.parentContainer.willRender()){g.display="none";return}var x=l.parentContainer,y=f.alpha*l.alpha;x&&(y*=x.alpha);var T=a,E=o,S=r,C=0,P=0,R="0%",A="0%";c?(C=l.width*l.scaleX*l.originX,P=l.height*l.scaleY*l.originY,E.applyITRS(l.x-C,l.y-P,l.rotation,l.scaleX,l.scaleY),T.copyFrom(f.matrix),T.multiplyWithOffset(c,-f.scrollX*l.scrollFactorX,-f.scrollY*l.scrollFactorY),E.e=l.x-C,E.f=l.y-P,T.multiply(E,S)):(C=l.width*l.originX,P=l.height*l.originY,E.applyITRS(l.x-C,l.y-P,l.rotation,l.scaleX,l.scaleY),T.copyFrom(f.matrix),R=100*l.originX+"%",A=100*l.originY+"%",E.e-=f.scrollX*l.scrollFactorX,E.f-=f.scrollY*l.scrollFactorY,T.multiply(E,S)),l.transformOnly||(g.display="block",g.opacity=y,g.zIndex=l._depth,g.pointerEvents=l.pointerEvents,g.mixBlendMode=s[l._blendMode]),g.transform=S.getCSSMatrix()+" skew("+l.skewX+"rad, "+l.skewY+"rad) rotate3d("+l.rotate3d.x+","+l.rotate3d.y+","+l.rotate3d.z+","+l.rotate3d.w+l.rotate3dAngle+")",g.transformOrigin=R+" "+A}};e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(1060),o=new s({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.Origin,u.ScrollFactor,u.Size,u.Texture,u.Tint,u.Transform,u.Visible,a],initialize:function(h){n.call(this,h,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(218),u=t(98),n=t(14),a=t(4),o=function(r,h,d){d===void 0&&(d=new a);var l=u(h,0,n.PI2);return s(r,l,d)};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(447),u=t(218),n=t(98),a=t(14),o=function(r,h,d,l){l===void 0&&(l=[]),!h&&d>0&&(h=s(r)/d);for(var f=0;f<h;f++){var c=n(f/h,0,a.PI2);l.push(u(r,c))}return l};e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.width/2,n=s.height/2,a=Math.pow(u-n,2)/Math.pow(u+n,2);return Math.PI*(u+n)*(1+3*a/(10+Math.sqrt(4-3*a)))};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(217),u=t(30),n=function(a,o,r,h,d,l){var f=o.commandBuffer,c=f.length,g=d||a.currentContext;if(!(c===0||!u(a,g,o,r,h))){r.addToRenderList(o);var p=1,x=1,y=0,T=0,E=1,S=0,C=0,P=0;g.beginPath();for(var R=0;R<c;++R){var A=f[R];switch(A){case s.ARC:g.arc(f[R+1],f[R+2],f[R+3],f[R+4],f[R+5],f[R+6]),R+=7;break;case s.LINE_STYLE:E=f[R+1],y=f[R+2],p=f[R+3],S=(y&16711680)>>>16,C=(y&65280)>>>8,P=y&255,g.strokeStyle="rgba("+S+","+C+","+P+","+p+")",g.lineWidth=E,R+=3;break;case s.FILL_STYLE:T=f[R+1],x=f[R+2],S=(T&16711680)>>>16,C=(T&65280)>>>8,P=T&255,g.fillStyle="rgba("+S+","+C+","+P+","+x+")",R+=2;break;case s.BEGIN_PATH:g.beginPath();break;case s.CLOSE_PATH:g.closePath();break;case s.FILL_PATH:l||g.fill();break;case s.STROKE_PATH:l||g.stroke();break;case s.FILL_RECT:l?g.rect(f[R+1],f[R+2],f[R+3],f[R+4]):g.fillRect(f[R+1],f[R+2],f[R+3],f[R+4]),R+=4;break;case s.FILL_TRIANGLE:g.beginPath(),g.moveTo(f[R+1],f[R+2]),g.lineTo(f[R+3],f[R+4]),g.lineTo(f[R+5],f[R+6]),g.closePath(),l||g.fill(),R+=6;break;case s.STROKE_TRIANGLE:g.beginPath(),g.moveTo(f[R+1],f[R+2]),g.lineTo(f[R+3],f[R+4]),g.lineTo(f[R+5],f[R+6]),g.closePath(),l||g.stroke(),R+=6;break;case s.LINE_TO:g.lineTo(f[R+1],f[R+2]),R+=2;break;case s.MOVE_TO:g.moveTo(f[R+1],f[R+2]),R+=2;break;case s.LINE_FX_TO:g.lineTo(f[R+1],f[R+2]),R+=5;break;case s.MOVE_FX_TO:g.moveTo(f[R+1],f[R+2]),R+=5;break;case s.SAVE:g.save();break;case s.RESTORE:g.restore();break;case s.TRANSLATE:g.translate(f[R+1],f[R+2]),R+=2;break;case s.SCALE:g.scale(f[R+1],f[R+2]),R+=2;break;case s.ROTATE:g.rotate(f[R+1]),R+=1;break;case s.GRADIENT_FILL_STYLE:R+=5;break;case s.GRADIENT_LINE_STYLE:R+=6;break}}g.restore()}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(137),n=t(80),a=t(2),o=t(68),r=new s({initialize:function(d,l,f,c){c===void 0&&(c=!1),this.propertyKey=l,this.propertyValue=f,this.defaultValue=f,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=c,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(d)},loadConfig:function(h,d){h===void 0&&(h={}),d&&(this.propertyKey=d),this.propertyValue=a(h,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(h){return this.propertyValue=h,this.setMethods()},setMethods:function(){var h=this.propertyValue,d=typeof h;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,d==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(h))this.onEmit=this.randomStaticValueEmit;else if(d==="function")this.emitOnly?this.onEmit=h:this.onUpdate=h;else if(d==="object"&&this.hasBoth(h,"start","end")){this.start=h.start,this.end=h.end;var l=this.has(h,"random");if(l&&(this.onEmit=this.randomRangedValueEmit),this.has(h,"steps"))this.steps=h.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var f=this.has(h,"ease")?h.ease:"Linear";this.ease=n(f,h.easeParams),l||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(d==="object"&&this.hasBoth(h,"min","max"))this.start=h.min,this.end=h.max,this.onEmit=this.randomRangedValueEmit;else if(d==="object"&&this.has(h,"random")){var c=h.random;Array.isArray(c)&&(this.start=c[0],this.end=c[1]),this.onEmit=this.randomRangedValueEmit}else d==="object"&&this.hasEither(h,"onEmit","onUpdate")&&(this.has(h,"onEmit")&&(this.onEmit=h.onEmit),this.has(h,"onUpdate")&&(this.onUpdate=h.onUpdate));return this},has:function(h,d){return h.hasOwnProperty(d)},hasBoth:function(h,d,l){return h.hasOwnProperty(d)&&h.hasOwnProperty(l)},hasEither:function(h,d,l){return h.hasOwnProperty(d)||h.hasOwnProperty(l)},defaultEmit:function(h,d,l){return l},defaultUpdate:function(h,d,l,f){return f},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var h=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[h]},randomRangedValueEmit:function(h,d){var l=u(this.start,this.end);return h&&h.data[d]&&(h.data[d].min=l),l},steppedEmit:function(){var h=this.counter,d=this.counter+(this.end-this.start)/this.steps;return this.counter=o(d,this.start,this.end),h},easedValueEmit:function(h,d){if(h&&h.data[d]){var l=h.data[d];l.min=this.start,l.max=this.end}return this.start},easeValueUpdate:function(h,d,l){var f=h.data[d];return(f.max-f.min)*this.ease(l)+f.min}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=new s({initialize:function(o,r,h,d,l){if(typeof o=="object"){var f=o;o=u(f,"x",0),r=u(f,"y",0),h=u(f,"power",0),d=u(f,"epsilon",100),l=u(f,"gravity",50)}else o===void 0&&(o=0),r===void 0&&(r=0),h===void 0&&(h=0),d===void 0&&(d=100),l===void 0&&(l=50);this.x=o,this.y=r,this.active=!0,this._gravity=l,this._power=0,this._epsilon=0,this.power=h,this.epsilon=d},update:function(a,o){var r=this.x-a.x,h=this.y-a.y,d=r*r+h*h;if(d!==0){var l=Math.sqrt(d);d<this._epsilon&&(d=this._epsilon);var f=this._power*o/(d*l)*100;a.velocityX+=r*f,a.velocityY+=h*f}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(a){this._epsilon=a*a}},power:{get:function(){return this._power/this._gravity},set:function(a){this._power=a*this._gravity}},gravity:{get:function(){return this._gravity},set:function(a){var o=this.power;this._gravity=a,this.power=o}}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(36),n=t(50),a=new s({initialize:function(r){this.emitter=r,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(o,r){var h=this.emitter;this.frame=h.getFrame(),h.emitZone&&h.emitZone.getPoint(this),o===void 0?this.x+=h.x.onEmit(this,"x"):this.x+=o,r===void 0?this.y+=h.y.onEmit(this,"y"):this.y+=r,this.life=h.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var d=h.speedX.onEmit(this,"speedX"),l=h.speedY?h.speedY.onEmit(this,"speedY"):d;if(h.radial){var f=u(h.angle.onEmit(this,"angle"));this.velocityX=Math.cos(f)*Math.abs(d),this.velocityY=Math.sin(f)*Math.abs(l)}else if(h.moveTo){var c=h.moveToX.onEmit(this,"moveToX"),g=h.moveToY?h.moveToY.onEmit(this,"moveToY"):c,p=Math.atan2(g-this.y,c-this.x),x=n(this.x,this.y,c,g)/(this.life/1e3);this.velocityX=Math.cos(p)*x,this.velocityY=Math.sin(p)*x}else this.velocityX=d,this.velocityY=l;h.acceleration&&(this.accelerationX=h.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=h.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=h.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=h.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=h.delay.onEmit(this,"delay"),this.scaleX=h.scaleX.onEmit(this,"scaleX"),this.scaleY=h.scaleY?h.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=h.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),this.bounce=h.bounce.onEmit(this,"bounce"),this.alpha=h.alpha.onEmit(this,"alpha"),this.tint=h.tint.onEmit(this,"tint")},computeVelocity:function(o,r,h,d){var l=this.velocityX,f=this.velocityY,c=this.accelerationX,g=this.accelerationY,p=this.maxVelocityX,x=this.maxVelocityY;l+=o.gravityX*h,f+=o.gravityY*h,c&&(l+=c*h),g&&(f+=g*h),l>p?l=p:l<-p&&(l=-p),f>x?f=x:f<-x&&(f=-x),this.velocityX=l,this.velocityY=f;for(var y=0;y<d.length;y++)d[y].update(this,r,h)},checkBounds:function(o){var r=o.bounds,h=-this.bounce;this.x<r.x&&o.collideLeft?(this.x=r.x,this.velocityX*=h):this.x>r.right&&o.collideRight&&(this.x=r.right,this.velocityX*=h),this.y<r.y&&o.collideTop?(this.y=r.y,this.velocityY*=h):this.y>r.bottom&&o.collideBottom&&(this.y=r.bottom,this.velocityY*=h)},update:function(o,r,h){if(this.delayCurrent>0)return this.delayCurrent-=o,!1;var d=this.emitter,l=1-this.lifeCurrent/this.life;return this.lifeT=l,this.computeVelocity(d,o,r,h),this.x+=this.velocityX*r,this.y+=this.velocityY*r,d.bounds&&this.checkBounds(d),d.deathZone&&d.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=d.scaleX.onUpdate(this,"scaleX",l,this.scaleX),d.scaleY?this.scaleY=d.scaleY.onUpdate(this,"scaleY",l,this.scaleY):this.scaleY=this.scaleX,this.angle=d.rotate.onUpdate(this,"rotate",l,this.angle),this.rotation=u(this.angle),this.alpha=d.alpha.onUpdate(this,"alpha",l,this.alpha),this.tint=d.tint.onUpdate(this,"tint",l,this.tint),this.lifeCurrent-=o,this.lifeCurrent<=0)}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(0),n=t(11),a=t(453),o=t(454),r=t(449),h=t(2),d=t(210),l=t(455),f=t(126),c=t(451),g=t(456),p=t(10),x=t(79),y=t(3),T=t(68),E=new u({Mixins:[n.BlendMode,n.Mask,n.ScrollFactor,n.Visible],initialize:function(C,P){this.manager=C,this.texture=C.texture,this.frames=[C.defaultFrame],this.defaultFrame=C.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=c,this.x=new r(P,"x",0,!0),this.y=new r(P,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new r(P,"accelerationX",0,!0),this.accelerationY=new r(P,"accelerationY",0,!0),this.maxVelocityX=new r(P,"maxVelocityX",1e4,!0),this.maxVelocityY=new r(P,"maxVelocityY",1e4,!0),this.speedX=new r(P,"speedX",0,!0),this.speedY=new r(P,"speedY",0,!0),this.moveTo=!1,this.moveToX=new r(P,"moveToX",0,!0),this.moveToY=new r(P,"moveToY",0,!0),this.bounce=new r(P,"bounce",0,!0),this.scaleX=new r(P,"scaleX",1),this.scaleY=new r(P,"scaleY",1),this.tint=new r(P,"tint",16777215),this.alpha=new r(P,"alpha",1),this.lifespan=new r(P,"lifespan",1e3,!0),this.angle=new r(P,"angle",{min:0,max:360},!0),this.rotate=new r(P,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new r(P,"quantity",1,!0),this.delay=new r(P,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=s.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,P&&this.fromJSON(P)},fromJSON:function(S){if(!S)return this;var C=0,P="";for(C=0;C<this.configFastMap.length;C++)P=this.configFastMap[C],f(S,P)&&(this[P]=h(S,P));for(C=0;C<this.configOpMap.length;C++)P=this.configOpMap[C],f(S,P)&&this[P].loadConfig(S);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,f(S,"speed")&&(this.speedX.loadConfig(S,"speed"),this.speedY=null),(l(S,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),f(S,"scale")&&(this.scaleX.loadConfig(S,"scale"),this.scaleY=null),f(S,"callbackScope")){var R=h(S,"callbackScope",null);this.emitCallbackScope=R,this.deathCallbackScope=R}return f(S,"emitZone")&&this.setEmitZone(S.emitZone),f(S,"deathZone")&&this.setDeathZone(S.deathZone),f(S,"bounds")&&this.setBounds(S.bounds),f(S,"followOffset")&&this.followOffset.setFromObject(h(S,"followOffset",0)),f(S,"frame")&&this.setFrame(S.frame),f(S,"reserve")&&this.reserve(S.reserve),this},toJSON:function(S){S===void 0&&(S={});var C=0,P="";for(C=0;C<this.configFastMap.length;C++)P=this.configFastMap[C],S[P]=this[P];for(C=0;C<this.configOpMap.length;C++)P=this.configOpMap[C],this[P]&&(S[P]=this[P].toJSON());return this.speedY||(delete S.speedX,S.speed=this.speedX.toJSON()),this.scaleY||(delete S.scaleX,S.scale=this.scaleX.toJSON()),S},startFollow:function(S,C,P,R){return C===void 0&&(C=0),P===void 0&&(P=0),R===void 0&&(R=!1),this.follow=S,this.followOffset.set(C,P),this.trackVisible=R,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return d(this.frames);var S=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=T(this.currentFrame+1,0,this._frameLength)),S},setFrame:function(S,C,P){C===void 0&&(C=!0),P===void 0&&(P=1),this.randomFrame=C,this.frameQuantity=P,this.currentFrame=0,this._frameCounter=0;var R=typeof S;if(Array.isArray(S)||R==="string"||R==="number")this.manager.setEmitterFrames(S,this);else if(R==="object"){var A=S;S=h(A,"frames",null),S&&this.manager.setEmitterFrames(S,this);var M=h(A,"cycle",!1);this.randomFrame=!M,this.frameQuantity=h(A,"quantity",P)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(S){return S===void 0&&(S=!0),this.radial=S,this},setPosition:function(S,C){return this.x.onChange(S),this.y.onChange(C),this},setBounds:function(S,C,P,R){if(typeof S=="object"){var A=S;S=A.x,C=A.y,P=f(A,"w")?A.w:A.width,R=f(A,"h")?A.h:A.height}return this.bounds?this.bounds.setTo(S,C,P,R):this.bounds=new p(S,C,P,R),this},setSpeedX:function(S){return this.speedX.onChange(S),this.radial=!1,this},setSpeedY:function(S){return this.speedY&&(this.speedY.onChange(S),this.radial=!1),this},setSpeed:function(S){return this.speedX.onChange(S),this.speedY=null,this.radial=!0,this},setScaleX:function(S){return this.scaleX.onChange(S),this},setScaleY:function(S){return this.scaleY.onChange(S),this},setScale:function(S){return this.scaleX.onChange(S),this.scaleY=null,this},setGravityX:function(S){return this.gravityX=S,this},setGravityY:function(S){return this.gravityY=S,this},setGravity:function(S,C){return this.gravityX=S,this.gravityY=C,this},setAlpha:function(S){return this.alpha.onChange(S),this},setTint:function(S){return this.tint.onChange(S),this},setEmitterAngle:function(S){return this.angle.onChange(S),this},setAngle:function(S){return this.angle.onChange(S),this},setLifespan:function(S){return this.lifespan.onChange(S),this},setQuantity:function(S){return this.quantity.onChange(S),this},setFrequency:function(S,C){return this.frequency=S,this._counter=0,C&&this.quantity.onChange(C),this},setEmitZone:function(S){if(S===void 0)this.emitZone=null;else{var C=h(S,"type","random"),P=h(S,"source",null);switch(C){case"random":this.emitZone=new g(P);break;case"edge":var R=h(S,"quantity",1),A=h(S,"stepRate",0),M=h(S,"yoyo",!1),O=h(S,"seamless",!0);this.emitZone=new o(P,R,A,M,O);break}}return this},setDeathZone:function(S){if(S===void 0)this.deathZone=null;else{var C=h(S,"type","onEnter"),P=h(S,"source",null);if(P&&typeof P.contains=="function"){var R=C==="onEnter";this.deathZone=new a(P,R)}}return this},reserve:function(S){for(var C=this.dead,P=0;P<S;P++)C.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(S,C){return S===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof S=="function"&&(this.emitCallback=S,C&&(this.emitCallbackScope=C)),this},onParticleDeath:function(S,C){return S===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof S=="function"&&(this.deathCallback=S,C&&(this.deathCallbackScope=C)),this},killAll:function(){for(var S=this.dead,C=this.alive;C.length>0;)S.push(C.pop());return this},forEachAlive:function(S,C){for(var P=this.alive,R=P.length,A=0;A<R;++A)S.call(C,P[A],this);return this},forEachDead:function(S,C){for(var P=this.dead,R=P.length,A=0;A<R;++A)S.call(C,P[A],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return x(this.alive,this.depthSortCallback),this},flow:function(S,C){return C===void 0&&(C=1),this.frequency=S,this.quantity.onChange(C),this.start()},explode:function(S,C,P){return this.frequency=-1,this.emitParticle(S,C,P)},emitParticleAt:function(S,C,P){return this.emitParticle(P,S,C)},emitParticle:function(S,C,P){if(!this.atLimit()){S===void 0&&(S=this.quantity.onEmit());for(var R=this.dead,A=this.follow?this.follow.x+this.followOffset.x:C,M=this.follow?this.follow.y+this.followOffset.y:P,O=0;O<S;O++){var F=R.pop();if(F||(F=new this.particleClass(this)),F.fire(A,M),this.particleBringToTop?this.alive.push(F):this.alive.unshift(F),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,F,this),this.atLimit())break}return F}},preUpdate:function(S,C){C*=this.timeScale;var P=C/1e3;this.trackVisible&&(this.visible=this.follow.visible);var R=this.manager.getProcessors(),A=this.alive,M=this.dead,O=0,F=[],I=A.length;for(O=0;O<I;O++){var B=A[O];B.update(C,P,R)&&F.push({index:O,particle:B})}if(I=F.length,I>0){var V=this.deathCallback,U=this.deathCallbackScope;for(O=I-1;O>=0;O--){var Y=F[O];A.splice(Y.index,1),M.push(Y.particle),V&&V.call(U,Y.particle),Y.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=C,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(S,C){return S.y-C.y}});e.exports=E},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o){this.source=a,this.killOnEnter=o},willKill:function(n){var a=this.source.contains(n.x,n.y);return a&&this.killOnEnter||!a&&!this.killOnEnter}});e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o,r,h,d){h===void 0&&(h=!1),d===void 0&&(d=!0),this.source=a,this.points=[],this.quantity=o,this.stepRate=r,this.yoyo=h,this.counter=-1,this.seamless=d,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var n=this.points[0],a=this.points[this.points.length-1];n.x===a.x&&n.y===a.y&&this.points.pop()}var o=this._length;return this._length=this.points.length,this._length<o&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(n){return this.source=n,this.updateSource()},getPoint:function(n){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var a=this.points[this.counter];a&&(n.x=a.x,n.y=a.y)}});e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=0;n<u.length;n++)if(s.hasOwnProperty(u[n]))return!0;return!1};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(3),n=new s({initialize:function(o){this.source=o,this._tempVec=new u},getPoint:function(a){var o=this._tempVec;this.source.getRandomPoint(o),a.x=o.x,a.y=o.y}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(73),a=new s({Extends:n,Mixins:[u.PathFollower],initialize:function(r,h,d,l,f,c){n.call(this,r,d,l,f,c),this.path=h},preUpdate:function(o,r){this.anims.update(o,r),this.pathUpdate(o)}});e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=s.canvas,o=s.context,r=s.style,h=[],d=0,l=n.length;r.maxLines>0&&r.maxLines<n.length&&(l=r.maxLines),r.syncFont(a,o);for(var f=0;f<l;f++){var c=r.strokeThickness;c+=o.measureText(n[f]).width,r.wordWrap&&(c-=o.measureText(" ").width),h[f]=Math.ceil(c),d=Math.max(d,h[f])}var g=u.fontSize+r.strokeThickness,p=g*l,x=s.lineSpacing;return l>1&&(p+=x*(l-1)),{width:d,height:p,lines:l,lineWidths:h,lineSpacing:x,lineHeight:g}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(13),n=t(6),a=t(460),o={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new s({initialize:function(d,l){this.parent=d,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(l,!1,!0);var f=n(l,"metrics",!1);f?this.metrics={ascent:n(f,"ascent",0),descent:n(f,"descent",0),fontSize:n(f,"fontSize",0)}:this.metrics=a(this)},setStyle:function(h,d,l){d===void 0&&(d=!0),l===void 0&&(l=!1),h&&h.hasOwnProperty("fontSize")&&typeof h.fontSize=="number"&&(h.fontSize=h.fontSize.toString()+"px");for(var f in o){var c=l?o[f][1]:this[f];f==="wordWrapCallback"||f==="wordWrapCallbackScope"?this[f]=n(h,o[f][0],c):this[f]=u(h,o[f][0],c)}var g=n(h,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var p=n(h,"fill",null);return p!==null&&(this.color=p),d?this.update(!0):this.parent},syncFont:function(h,d){d.font=this._font},syncStyle:function(h,d){d.textBaseline="alphabetic",d.fillStyle=this.color,d.strokeStyle=this.stroke,d.lineWidth=this.strokeThickness,d.lineCap="round",d.lineJoin="round"},syncShadow:function(h,d){d?(h.shadowOffsetX=this.shadowOffsetX,h.shadowOffsetY=this.shadowOffsetY,h.shadowColor=this.shadowColor,h.shadowBlur=this.shadowBlur):(h.shadowOffsetX=0,h.shadowOffsetY=0,h.shadowColor=0,h.shadowBlur=0)},update:function(h){return h&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(h,d){d===void 0&&(d=!0);var l=h,f="",c="";if(typeof h!="string")l=n(h,"fontFamily","Courier"),f=n(h,"fontSize","16px"),c=n(h,"fontStyle","");else{var g=h.split(" "),p=0;c=g.length>2?g[p++]:"",f=g[p++]||"16px",l=g[p++]||"Courier"}return(l!==this.fontFamily||f!==this.fontSize||c!==this.fontStyle)&&(this.fontFamily=l,this.fontSize=f,this.fontStyle=c,d&&this.update(!0)),this.parent},setFontFamily:function(h){return this.fontFamily!==h&&(this.fontFamily=h,this.update(!0)),this.parent},setFontStyle:function(h){return this.fontStyle!==h&&(this.fontStyle=h,this.update(!0)),this.parent},setFontSize:function(h){return typeof h=="number"&&(h=h.toString()+"px"),this.fontSize!==h&&(this.fontSize=h,this.update(!0)),this.parent},setTestString:function(h){return this.testString=h,this.update(!0)},setFixedSize:function(h,d){return this.fixedWidth=h,this.fixedHeight=d,h&&(this.parent.width=h),d&&(this.parent.height=d),this.update(!1)},setBackgroundColor:function(h){return this.backgroundColor=h,this.update(!1)},setFill:function(h){return this.color=h,this.update(!1)},setColor:function(h){return this.color=h,this.update(!1)},setResolution:function(h){return this.resolution=h,this.update(!1)},setStroke:function(h,d){return d===void 0&&(d=this.strokeThickness),h===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==h||this.strokeThickness!==d)&&(this.stroke=h,this.strokeThickness=d,this.update(!0)),this.parent},setShadow:function(h,d,l,f,c,g){return h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l="#000"),f===void 0&&(f=0),c===void 0&&(c=!1),g===void 0&&(g=!0),this.shadowOffsetX=h,this.shadowOffsetY=d,this.shadowColor=l,this.shadowBlur=f,this.shadowStroke=c,this.shadowFill=g,this.update(!1)},setShadowOffset:function(h,d){return h===void 0&&(h=0),d===void 0&&(d=h),this.shadowOffsetX=h,this.shadowOffsetY=d,this.update(!1)},setShadowColor:function(h){return h===void 0&&(h="#000"),this.shadowColor=h,this.update(!1)},setShadowBlur:function(h){return h===void 0&&(h=0),this.shadowBlur=h,this.update(!1)},setShadowStroke:function(h){return this.shadowStroke=h,this.update(!1)},setShadowFill:function(h){return this.shadowFill=h,this.update(!1)},setWordWrapWidth:function(h,d){return d===void 0&&(d=!1),this.wordWrapWidth=h,this.wordWrapUseAdvanced=d,this.update(!1)},setWordWrapCallback:function(h,d){return d===void 0&&(d=null),this.wordWrapCallback=h,this.wordWrapCallbackScope=d,this.update(!1)},setAlign:function(h){return h===void 0&&(h="left"),this.align=h,this.update(!1)},setMaxLines:function(h){return h===void 0&&(h=0),this.maxLines=h,this.update(!1)},getTextMetrics:function(){var h=this.metrics;return{ascent:h.ascent,descent:h.descent,fontSize:h.fontSize}},toJSON:function(){var h={};for(var d in o)h[d]=this[d];return h.metrics=this.getTextMetrics(),h},destroy:function(){this.parent=void 0}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=function(n){var a=s.create(this),o=a.getContext("2d");n.syncFont(a,o);var r=o.measureText(n.testString);if("actualBoundingBoxAscent"in r){var h=r.actualBoundingBoxAscent,d=r.actualBoundingBoxDescent;return s.remove(a),{ascent:h,descent:d,fontSize:h+d}}var l=Math.ceil(r.width*n.baselineX),f=l,c=2*f;f=f*n.baselineY|0,a.width=l,a.height=c,o.fillStyle="#f00",o.fillRect(0,0,l,c),o.font=n._font,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(n.testString,0,f);var g={ascent:0,descent:0,fontSize:0},p=o.getImageData(0,0,l,c);if(!p)return g.ascent=f,g.descent=f+6,g.fontSize=g.ascent+g.descent,s.remove(a),g;var x=p.data,y=x.length,T=l*4,E,S,C=0,P=!1;for(E=0;E<f;E++){for(S=0;S<T;S+=4)if(x[C+S]!==255){P=!0;break}if(!P)C+=T;else break}for(g.ascent=f-E,C=y-T,P=!1,E=c;E>f;E--){for(S=0;S<T;S+=4)if(x[C+S]!==255){P=!0;break}if(!P)C-=T;else break}return g.descent=E-f,g.fontSize=g.ascent+g.descent,s.remove(a),g};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1097),u=t(0),n=t(36),a=t(59),o=t(65),r=t(14),h=t(34),d=new u({Extends:h,Mixins:[s],initialize:function(f,c,g,p,x,y,T,E,S){c===void 0&&(c=0),g===void 0&&(g=0),p===void 0&&(p=128),x===void 0&&(x=0),y===void 0&&(y=360),T===void 0&&(T=!1),h.call(this,f,"Arc",new o(0,0,p)),this._startAngle=x,this._endAngle=y,this._anticlockwise=T,this._iterations=.01,this.setPosition(c,g);var C=this.geom.radius*2;this.setSize(C,C),E!==void 0&&this.setFillStyle(E,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(l){this._iterations=l,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(l){this.geom.radius=l;var f=l*2;this.setSize(f,f),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(l){this._startAngle=l,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(l){this._endAngle=l,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(l){this._anticlockwise=l,this.updateData()}},setRadius:function(l){return this.radius=l,this},setIterations:function(l){return l===void 0&&(l=.01),this.iterations=l,this},setStartAngle:function(l,f){return this._startAngle=l,f!==void 0&&(this._anticlockwise=f),this.updateData()},setEndAngle:function(l,f){return this._endAngle=l,f!==void 0&&(this._anticlockwise=f),this.updateData()},updateData:function(){var l=this._iterations,f=l,c=this.geom.radius,g=n(this._startAngle),p=n(this._endAngle),x=this._anticlockwise,y=c,T=c;p-=g,x?p<-r.PI2?p=-r.PI2:p>0&&(p=-r.PI2+p%r.PI2):p>r.PI2?p=r.PI2:p<0&&(p=r.PI2+p%r.PI2);for(var E=[y+Math.cos(g)*c,T+Math.sin(g)*c],S;f<1;)S=p*f+g,E.push(y+Math.cos(S)*c,T+Math.sin(S)*c),f+=l;return S=p+g,E.push(y+Math.cos(S)*c,T+Math.sin(S)*c),E.push(y+Math.cos(g)*c,T+Math.sin(g)*c),this.pathIndexes=a(E),this.pathData=E,this}});e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1100),n=t(59),a=t(10),o=t(34),r=new s({Extends:o,Mixins:[u],initialize:function(d,l,f,c,g,p){l===void 0&&(l=0),f===void 0&&(f=0),o.call(this,d,"Curve",c),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(l,f),g!==void 0&&this.setFillStyle(g,p),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(h){this._smoothness=h,this.updateData()}},setSmoothness:function(h){return this._smoothness=h,this.updateData()},updateData:function(){var h=this._curveBounds,d=this._smoothness;this.geom.getBounds(h,d),this.setSize(h.width,h.height),this.updateDisplayOrigin();for(var l=[],f=this.geom.getPoints(d),c=0;c<f.length;c++)l.push(f[c].x,f[c].y);return l.push(f[0].x,f[0].y),this.pathIndexes=n(l),this.pathData=l,this}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(59),n=t(1103),a=t(111),o=t(34),r=new s({Extends:o,Mixins:[n],initialize:function(d,l,f,c,g,p,x){l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=128),g===void 0&&(g=128),o.call(this,d,"Ellipse",new a(c/2,g/2,c,g)),this._smoothness=64,this.setPosition(l,f),this.width=c,this.height=g,p!==void 0&&this.setFillStyle(p,x),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(h){this._smoothness=h,this.updateData()}},setSize:function(h,d){return this.width=h,this.height=d,this.geom.setPosition(h/2,d/2),this.geom.setSize(h,d),this.updateData()},setSmoothness:function(h){return this._smoothness=h,this.updateData()},updateData:function(){for(var h=[],d=this.geom.getPoints(this._smoothness),l=0;l<d.length;l++)h.push(d[l].x,d[l].y);return h.push(d[0].x,d[0].y),this.pathIndexes=u(h),this.pathData=h,this}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(34),n=t(1106),a=new s({Extends:u,Mixins:[n],initialize:function(r,h,d,l,f,c,g,p,x,y,T){h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=128),f===void 0&&(f=128),c===void 0&&(c=32),g===void 0&&(g=32),u.call(this,r,"Grid",null),this.cellWidth=c,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(h,d),this.setSize(l,f),this.setFillStyle(p,x),y!==void 0&&this.setOutlineStyle(y,T),this.updateDisplayOrigin()},setFillStyle:function(o,r){return r===void 0&&(r=1),o===void 0?this.showCells=!1:(this.fillColor=o,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(o,r){return r===void 0&&(r=1),o===void 0?this.showAltCells=!1:(this.altFillColor=o,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(o,r){return r===void 0&&(r=1),o===void 0?this.showOutline=!1:(this.outlineFillColor=o,this.outlineFillAlpha=r,this.showOutline=!0),this}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1109),u=t(0),n=t(34),a=new u({Extends:n,Mixins:[s],initialize:function(r,h,d,l,f,c,g,p){h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=48),f===void 0&&(f=32),c===void 0&&(c=15658734),g===void 0&&(g=10066329),p===void 0&&(p=13421772),n.call(this,r,"IsoBox",null),this.projection=4,this.fillTop=c,this.fillLeft=g,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(h,d),this.setSize(l,f),this.updateDisplayOrigin()},setProjection:function(o){return this.projection=o,this},setFaces:function(o,r,h){return o===void 0&&(o=!0),r===void 0&&(r=!0),h===void 0&&(h=!0),this.showTop=o,this.showLeft=r,this.showRight=h,this},setFillStyle:function(o,r,h){return this.fillTop=o,this.fillLeft=r,this.fillRight=h,this.isFilled=!0,this}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1112),n=t(34),a=new s({Extends:n,Mixins:[u],initialize:function(r,h,d,l,f,c,g,p,x){h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=48),f===void 0&&(f=32),c===void 0&&(c=!1),g===void 0&&(g=15658734),p===void 0&&(p=10066329),x===void 0&&(x=13421772),n.call(this,r,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=p,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=c,this.isFilled=!0,this.setPosition(h,d),this.setSize(l,f),this.updateDisplayOrigin()},setProjection:function(o){return this.projection=o,this},setReversed:function(o){return this.isReversed=o,this},setFaces:function(o,r,h){return o===void 0&&(o=!0),r===void 0&&(r=!0),h===void 0&&(h=!0),this.showTop=o,this.showLeft=r,this.showRight=h,this},setFillStyle:function(o,r,h){return this.fillTop=o,this.fillLeft=r,this.fillRight=h,this.isFilled=!0,this}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(34),n=t(47),a=t(1115),o=new s({Extends:u,Mixins:[a],initialize:function(h,d,l,f,c,g,p,x,y){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=0),g===void 0&&(g=128),p===void 0&&(p=0),u.call(this,h,"Line",new n(f,c,g,p));var T=Math.max(1,this.geom.right-this.geom.left),E=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(d,l),this.setSize(T,E),x!==void 0&&this.setStrokeStyle(1,x,y),this.updateDisplayOrigin()},setLineWidth:function(r,h){return h===void 0&&(h=r),this._startWidth=r,this._endWidth=h,this.lineWidth=r,this},setTo:function(r,h,d,l){return this.geom.setTo(r,h,d,l),this}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1118),u=t(0),n=t(59),a=t(469),o=t(227),r=t(34),h=t(472),d=new u({Extends:r,Mixins:[s],initialize:function(f,c,g,p,x,y){c===void 0&&(c=0),g===void 0&&(g=0),r.call(this,f,"Polygon",new o(p));var T=a(this.geom);this.setPosition(c,g),this.setSize(T.width,T.height),x!==void 0&&this.setFillStyle(x,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(l){l===void 0&&(l=1);for(var f=0;f<l;f++)h(this.geom);return this.updateData()},updateData:function(){for(var l=[],f=this.geom.points,c=0;c<f.length;c++)l.push(f[c].x,f[c].y);return l.push(f[0].x,f[0].y),this.pathIndexes=n(l),this.pathData=l,this}});e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a){a===void 0&&(a=new s);for(var o=1/0,r=1/0,h=-o,d=-r,l,f=0;f<n.points.length;f++)l=n.points[f],o=Math.min(o,l.x),r=Math.min(r,l.y),h=Math.max(h,l.x),d=Math.max(d,l.y);return a.x=o,a.y=r,a.width=h-o,a.height=d-r,a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(47),n=t(471),a=function(o,r,h,d){d===void 0&&(d=[]);var l=o.points,f=n(o);!r&&h>0&&(r=f/h);for(var c=0;c<r;c++)for(var g=f*(c/r),p=0,x=0;x<l.length;x++){var y=l[x],T=l[(x+1)%l.length],E=new u(y.x,y.y,T.x,T.y),S=s(E);if(g<p||g>p+S){p+=S;continue}var C=E.getPoint((g-p)/S);d.push(C);break}return d};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(47),n=function(a){for(var o=a.points,r=0,h=0;h<o.length;h++){var d=o[h],l=o[(h+1)%o.length],f=new u(d.x,d.y,l.x,l.y);r+=s(f)}return r};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(u,n){return u[0]=n[0],u[1]=n[1],u},s=function(u){var n,a=[],o=u.points;for(n=0;n<o.length;n++)a.push([o[n].x,o[n].y]);var r=[];for(a.length>0&&r.push(t([0,0],a[0])),n=0;n<a.length-1;n++){var h=a[n],d=a[n+1],l=h[0],f=h[1],c=d[0],g=d[1];r.push([.85*l+.15*c,.85*f+.15*g]),r.push([.15*l+.85*c,.15*f+.85*g])}return a.length>1&&r.push(t([0,0],a[a.length-1])),u.setTo(r)};e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(10),n=t(34),a=t(1121),o=new s({Extends:n,Mixins:[a],initialize:function(h,d,l,f,c,g,p){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=128),c===void 0&&(c=128),n.call(this,h,"Rectangle",new u(0,0,f,c)),this.setPosition(d,l),this.setSize(f,c),g!==void 0&&this.setFillStyle(g,p),this.updateDisplayOrigin(),this.updateData()},setSize:function(r,h){return this.width=r,this.height=h,this.geom.setSize(r,h),this.updateData(),this},updateData:function(){var r=[],h=this.geom,d=this._tempLine;return h.getLineA(d),r.push(d.x1,d.y1,d.x2,d.y2),h.getLineB(d),r.push(d.x2,d.y2),h.getLineC(d),r.push(d.x2,d.y2),h.getLineD(d),r.push(d.x2,d.y2),this.pathData=r,this}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1124),u=t(0),n=t(59),a=t(34),o=new u({Extends:a,Mixins:[s],initialize:function(h,d,l,f,c,g,p,x){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=5),c===void 0&&(c=32),g===void 0&&(g=64),a.call(this,h,"Star",null),this._points=f,this._innerRadius=c,this._outerRadius=g,this.setPosition(d,l),this.setSize(g*2,g*2),p!==void 0&&this.setFillStyle(p,x),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],h=this._points,d=this._innerRadius,l=this._outerRadius,f=Math.PI/2*3,c=Math.PI/h,g=l,p=l;r.push(g,p+-l);for(var x=0;x<h;x++)r.push(g+Math.cos(f)*l,p+Math.sin(f)*l),f+=c,r.push(g+Math.cos(f)*d,p+Math.sin(f)*d),f+=c;return r.push(g,p+-l),this.pathIndexes=n(r),this.pathData=r,this}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(34),n=t(82),a=t(1127),o=new s({Extends:u,Mixins:[a],initialize:function(h,d,l,f,c,g,p,x,y,T,E){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=128),g===void 0&&(g=64),p===void 0&&(p=0),x===void 0&&(x=128),y===void 0&&(y=128),u.call(this,h,"Triangle",new n(f,c,g,p,x,y));var S=this.geom.right-this.geom.left,C=this.geom.bottom-this.geom.top;this.setPosition(d,l),this.setSize(S,C),T!==void 0&&this.setFillStyle(T,E),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,h,d,l,f,c){return this.geom.setTo(r,h,d,l,f,c),this.updateData()},updateData:function(){var r=[],h=this.geom,d=this._tempLine;return h.getLineA(d),r.push(d.x1,d.y1,d.x2,d.y2),h.getLineB(d),r.push(d.x2,d.y2),h.getLineC(d),r.push(d.x2,d.y2),this.pathData=r,this}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(67),n=function(a,o,r){r===void 0&&(r=new s);var h=a.getLineA(),d=a.getLineB(),l=a.getLineC();if(o<=0||o>=1)return r.x=h.x1,r.y=h.y1,r;var f=u(h),c=u(d),g=u(l),p=f+c+g,x=p*o,y=0;return x<f?(y=x/f,r.x=h.x1+(h.x2-h.x1)*y,r.y=h.y1+(h.y2-h.y1)*y):x>f+c?(x-=f+c,y=x/g,r.x=l.x1+(l.x2-l.x1)*y,r.y=l.y1+(l.y2-l.y1)*y):(x-=f,y=x/c,r.x=d.x1+(d.x2-d.x1)*y,r.y=d.y1+(d.y2-d.y1)*y),r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(4),n=function(a,o,r,h){h===void 0&&(h=[]);var d=a.getLineA(),l=a.getLineB(),f=a.getLineC(),c=s(d),g=s(l),p=s(f),x=c+g+p;!o&&r>0&&(o=x/r);for(var y=0;y<o;y++){var T=x*(y/o),E=0,S=new u;T<c?(E=T/c,S.x=d.x1+(d.x2-d.x1)*E,S.y=d.y1+(d.y2-d.y1)*E):T>c+g?(T-=c+g,E=T/p,S.x=f.x1+(f.x2-f.x1)*E,S.y=f.y1+(f.y2-f.y1)*E):(T-=c,E=T/g,S.x=l.x1+(l.x2-l.x1)*E,S.y=l.y1+(l.y2-l.y1)*E),h.push(S)}return h};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(!s||typeof s=="number")return!1;if(s.hasOwnProperty(u))return s[u]=n,!0;if(u.indexOf(".")!==-1){for(var a=u.split("."),o=s,r=s,h=0;h<a.length;h++)if(o.hasOwnProperty(a[h]))r=o,o=o[a[h]];else return!1;return r[a[a.length-1]]=n,!0}return!1};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(116),u=t(117),n=function(a,o,r,h,d,l,f){if(h===void 0&&(h=!1),l===void 0&&(l=16777215),f===void 0&&(f=1),a.length!==o.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var c={faces:[],vertices:[]},g,p,x,y,T,E,S,C,P,R,A,M=h?3:2,O=Array.isArray(l),F=Array.isArray(f);if(Array.isArray(r)&&r.length>0)for(g=0;g<r.length;g++){var I=r[g],B=r[g]*2,V=r[g]*M;p=a[V],x=a[V+1],y=h?a[V+2]:0,T=o[B],E=o[B+1],S=O?l[I]:l,C=F?f[I]:f,P=0,R=0,A=0,d&&(P=d[V],R=d[V+1],A=h?d[V+2]:0),c.vertices.push(new u(p,x,y,T,E,S,C,P,R,A))}else{var U=0,Y=0;for(g=0;g<a.length;g+=M)p=a[g],x=a[g+1],y=h?a[g+2]:0,T=o[U],E=o[U+1],S=O?l[Y]:l,C=F?f[Y]:f,P=0,R=0,A=0,d&&(P=d[g],R=d[g+1],A=h?d[g+2]:0),c.vertices.push(new u(p,x,y,T,E,S,C,P,R,A)),U+=2,Y++}for(g=0;g<c.vertices.length;g+=3){var W=c.vertices[g],w=c.vertices[g+1],L=c.vertices[g+2];c.faces.push(new s(W,w,L))}return c};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(116),u=t(69),n=t(39),a=t(117),o=new n,r=new n,h=new u,d=function(l,f,c,g,p,x,y,T,E,S){c===void 0&&(c=1),g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=0),E===void 0&&(E=0),S===void 0&&(S=!0);var C={faces:[],verts:[]},P=l.materials;o.set(g,p,x),r.set(y,T,E),h.fromRotationXYTranslation(r,o,S);for(var R=0;R<l.models.length;R++)for(var A=l.models[R],M=A.vertices,O=A.textureCoords,F=A.faces,I=0;I<F.length;I++){var B=F[I],V=B.vertices[0],U=B.vertices[1],Y=B.vertices[2],W=M[V.vertexIndex],w=M[U.vertexIndex],L=M[Y.vertexIndex],D=V.textureCoordsIndex,N=U.textureCoordsIndex,G=Y.textureCoordsIndex,b=D===-1?{u:0,v:1}:O[D],z=N===-1?{u:0,v:0}:O[N],X=G===-1?{u:1,v:1}:O[G],H=16777215;B.material!==""&&P[B.material]&&(H=P[B.material]);var $=new a(W.x*c,W.y*c,W.z*c,b.u,b.v,H).transformMat4(h),J=new a(w.x*c,w.y*c,w.z*c,z.u,z.v,H).transformMat4(h),K=new a(L.x*c,L.y*c,L.z*c,X.u,X.v,H).transformMat4(h);C.verts.push($,J,K),C.faces.push(new s($,J,K))}return f&&(f.faces=f.faces.concat(C.faces),f.vertices=f.vertices.concat(C.verts)),C};e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=t(0),n=t(11),a=t(200),o=t(12),r=new u({Extends:s,Mixins:[n.ScrollFactor,n.Visible],initialize:function(d,l,f,c,g,p,x){s.call(this,d,l,f),this.color=new a(c,g,p),this.intensity=x,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(h){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&h.id)},setColor:function(h){var d=o.getFloatsFromUintRGB(h);return this.color.set(d[0],d[1],d[2]),this},setIntensity:function(h){return this.intensity=h,this},setRadius:function(h){return this.radius=h,this}});r.RENDER_MASK=15,e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(151),u=t(0),n=t(50),a=t(481),o=t(150),r=t(200),h=t(74),d=t(79),l=t(12),f=new u({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(c,g,p,x,y,T){return this.systems.displayList.add(new o(this.scene,c,g,p,x,y,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(c){for(var g=this.lights,p=c.worldView,x=[],y=0;y<g.length;y++){var T=g[y];T.willRender(c)&&s(T,p)&&x.push({light:T,distance:n(T.x,T.y,p.centerX,p.centerY)})}return x.length>this.maxLights&&(d(x,this.sortByDistance),x=x.slice(0,this.maxLights)),this.visibleLights=x.length,x},sortByDistance:function(c,g){return c.distance>=g.distance},setAmbientColor:function(c){var g=l.getFloatsFromUintRGB(c);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(c,g,p,x,y){c===void 0&&(c=0),g===void 0&&(g=0),p===void 0&&(p=128),x===void 0&&(x=16777215),y===void 0&&(y=1);var T=l.getFloatsFromUintRGB(x),E=new a(c,g,p,T[0],T[1],T[2],y);return this.lights.push(E),E},removeLight:function(c){var g=this.lights.indexOf(c);return g>=0&&h(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});e.exports=f},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56),u=t(17),n={Circle:t(1191),Ellipse:t(1201),Intersects:t(484),Line:t(1221),Mesh:t(1243),Point:t(1246),Polygon:t(1260),Rectangle:t(502),Triangle:t(1293)};n=u(!1,n,s),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CircleToCircle:t(231),CircleToRectangle:t(151),GetCircleToCircle:t(1211),GetCircleToRectangle:t(1212),GetLineToCircle:t(232),GetLineToLine:t(485),GetLineToPoints:t(486),GetLineToPolygon:t(487),GetLineToRectangle:t(234),GetRaysFromPointToPolygon:t(1213),GetRectangleIntersection:t(1214),GetRectangleToRectangle:t(1215),GetRectangleToTriangle:t(1216),GetTriangleToCircle:t(1217),GetTriangleToLine:t(492),GetTriangleToTriangle:t(1218),LineToCircle:t(233),LineToLine:t(96),LineToRectangle:t(488),PointToLine:t(496),PointToLineSegment:t(1219),RectangleToRectangle:t(152),RectangleToTriangle:t(489),RectangleToValues:t(1220),TriangleToCircle:t(491),TriangleToLine:t(493),TriangleToTriangle:t(494)}},function(e,v,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=function(n,a,o){var r=n.x1,h=n.y1,d=n.x2,l=n.y2,f=a.x1,c=a.y1,g=a.x2,p=a.y2,x=d-r,y=l-h,T=g-f,E=p-c,S=E*x-T*y;if(x===0||S===0)return!1;var C=(x*(c-h)+y*(r-f))/(T*y-E*x),P=(f+T*C-r)/x;return P<0||C<0||C>1?null:(o===void 0&&(o=new s),o.set(r+x*P,h+y*P,P))};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=t(485),n=t(47),a=new n,o=new s,r=function(h,d,l){l===void 0&&(l=new s);var f=!1;l.set(),o.set();for(var c=d[0],g=1;g<d.length;g++){var p=d[g];a.setTo(c.x,c.y,p.x,p.y),c=p,u(h,a,o)&&(!f||o.z<l.z)&&(l.copy(o),f=!0)}return f?l:null};e.exports=r},function(e,v,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=t(140),n=t(486),a=new s,o=function(r,h,d){d===void 0&&(d=new u),Array.isArray(h)||(h=[h]);var l=!1;d.set(),a.set();for(var f=0;f<h.length;f++)n(r,h[f].points,a)&&(!l||a.z<d.z)&&(d.set(a.x,a.y,a.z,f),l=!0);return l?d:null};e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x1,a=s.y1,o=s.x2,r=s.y2,h=u.x,d=u.y,l=u.right,f=u.bottom,c=0;if(n>=h&&n<=l&&a>=d&&a<=f||o>=h&&o<=l&&r>=d&&r<=f)return!0;if(n<h&&o>=h){if(c=a+(r-a)*(h-n)/(o-n),c>d&&c<=f)return!0}else if(n>l&&o<=l&&(c=a+(r-a)*(l-n)/(o-n),c>=d&&c<=f))return!0;if(a<d&&r>=d){if(c=n+(o-n)*(d-a)/(r-a),c>=h&&c<=l)return!0}else if(a>f&&r<=f&&(c=n+(o-n)*(f-a)/(r-a),c>=h&&c<=l))return!0;return!1};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(96),u=t(57),n=t(235),a=t(490),o=function(r,h){if(h.left>r.right||h.right<r.left||h.top>r.bottom||h.bottom<r.top)return!1;var d=h.getLineA(),l=h.getLineB(),f=h.getLineC();if(u(r,d.x1,d.y1)||u(r,d.x2,d.y2)||u(r,l.x1,l.y1)||u(r,l.x2,l.y2)||u(r,f.x1,f.y1)||u(r,f.x2,f.y2))return!0;var c=r.getLineA(),g=r.getLineB(),p=r.getLineC(),x=r.getLineD();if(s(d,c)||s(d,g)||s(d,p)||s(d,x)||s(l,c)||s(l,g)||s(l,p)||s(l,x)||s(f,c)||s(f,g)||s(f,p)||s(f,x))return!0;var y=a(r),T=n(h,y,!0);return T.length>0};e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=[]),u.push({x:s.x,y:s.y}),u.push({x:s.right,y:s.y}),u.push({x:s.right,y:s.bottom}),u.push({x:s.x,y:s.bottom}),u};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(233),u=t(115),n=function(a,o){return a.left>o.right||a.right<o.left||a.top>o.bottom||a.bottom<o.top?!1:!!(u(a,o.x,o.y)||s(a.getLineA(),o)||s(a.getLineB(),o)||s(a.getLineC(),o))};e.exports=n},function(e,v,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(493),n=t(96),a=function(o,r,h){if(h===void 0&&(h=[]),u(o,r))for(var d=o.getLineA(),l=o.getLineB(),f=o.getLineC(),c=[new s,new s,new s],g=[n(d,r,c[0]),n(l,r,c[1]),n(f,r,c[2])],p=0;p<3;p++)g[p]&&h.push(c[p]);return h};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(96),u=function(n,a){return!!(n.contains(a.x1,a.y1)||n.contains(a.x2,a.y2)||s(n.getLineA(),a)||s(n.getLineB(),a)||s(n.getLineC(),a))};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(235),u=t(495),n=t(96),a=function(o,r){if(o.left>r.right||o.right<r.left||o.top>r.bottom||o.bottom<r.top)return!1;var h=o.getLineA(),d=o.getLineB(),l=o.getLineC(),f=r.getLineA(),c=r.getLineB(),g=r.getLineC();if(n(h,f)||n(h,c)||n(h,g)||n(d,f)||n(d,c)||n(d,g)||n(l,f)||n(l,c)||n(l,g))return!0;var p=u(o),x=s(r,p,!0);return x.length>0||(p=u(r),x=s(o,p,!0),x.length>0)};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=[]),u.push({x:s.x1,y:s.y1}),u.push({x:s.x2,y:s.y2}),u.push({x:s.x3,y:s.y3}),u};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){n===void 0&&(n=1);var a=u.x1,o=u.y1,r=u.x2,h=u.y2,d=s.x,l=s.y,f=(r-a)*(r-a)+(h-o)*(h-o);if(f===0)return!1;var c=((d-a)*(r-a)+(l-o)*(h-o))/f;if(c<0)return Math.sqrt((a-d)*(a-d)+(o-l)*(o-l))<=n;if(c>=0&&c<=1){var g=((o-l)*(r-a)-(a-d)*(h-o))/f;return Math.abs(g)*Math.sqrt(f)<=n}else return Math.sqrt((r-d)*(r-d)+(h-l)*(h-l))<=n};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(68),n=t(97),a=function(o){var r=n(o)-s.TAU;return u(r,-Math.PI,Math.PI)};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=!0,s="untitled",u="",n="";function a(y){var T=y.indexOf("#");return T>-1?y.substring(0,T):y}function o(y){return y.models.length===0&&y.models.push({faces:[],name:s,textureCoords:[],vertexNormals:[],vertices:[]}),u="",y.models[y.models.length-1]}function r(y,T){var E=y.length>=2?y[1]:s;T.models.push({faces:[],name:E,textureCoords:[],vertexNormals:[],vertices:[]}),u=""}function h(y){y.length===2&&(u=y[1])}function d(y,T){var E=y.length,S=E>=2?parseFloat(y[1]):0,C=E>=3?parseFloat(y[2]):0,P=E>=4?parseFloat(y[3]):0;o(T).vertices.push({x:S,y:C,z:P})}function l(y,T){var E=y.length,S=E>=2?parseFloat(y[1]):0,C=E>=3?parseFloat(y[2]):0,P=E>=4?parseFloat(y[3]):0;isNaN(S)&&(S=0),isNaN(C)&&(C=0),isNaN(P)&&(P=0),t&&(C=1-C),o(T).textureCoords.push({u:S,v:C,w:P})}function f(y,T){var E=y.length,S=E>=2?parseFloat(y[1]):0,C=E>=3?parseFloat(y[2]):0,P=E>=4?parseFloat(y[3]):0;o(T).vertexNormals.push({x:S,y:C,z:P})}function c(y,T){var E=y.length-1;if(!(E<3)){for(var S={group:u,material:n,vertices:[]},C=0;C<E;C++){var P=y[C+1],R=P.split("/"),A=R.length;if(!(A<1||A>3)){var M=0,O=0,F=0;M=parseInt(R[0],10),A>1&&R[1]!==""&&(O=parseInt(R[1],10)),A>2&&(F=parseInt(R[2],10)),M!==0&&(M<0&&(M=o(T).vertices.length+1+M),O-=1,M-=1,F-=1,S.vertices.push({textureCoordsIndex:O,vertexIndex:M,vertexNormalIndex:F}))}}o(T).faces.push(S)}}function g(y,T){y.length>=2&&T.materialLibraries.push(y[1])}function p(y){y.length>=2&&(n=y[1])}var x=function(y,T){T===void 0&&(T=!0),t=T;var E={materials:{},materialLibraries:[],models:[]};u="",n="";for(var S=y.split(`
`),C=0;C<S.length;C++){var P=a(S[C]),R=P.replace(/\s\s+/g," ").trim().split(" ");switch(R[0].toLowerCase()){case"o":r(R,E);break;case"g":h(R);break;case"v":d(R,E);break;case"vt":l(R,E);break;case"vn":f(R,E);break;case"f":c(R,E);break;case"mtllib":g(R,E);break;case"usemtl":p(R);break}}return E};e.exports=x},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(103),u=function(n){for(var a={},o=n.split(`
`),r="",h=0;h<o.length;h++){var d=o[h].trim();if(!(d.indexOf("#")===0||d==="")){var l=d.replace(/\s\s+/g," ").trim().split(" ");switch(l[0].toLowerCase()){case"newmtl":{r=l[1];break}case"kd":{var f=Math.floor(l[1]*255),c=l.length>=2?Math.floor(l[2]*255):f,g=l.length>=3?Math.floor(l[3]*255):f;a[r]=s(f,c,g);break}}}}return a};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x*s.x+s.y*s.y};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10);s.Area=t(1267),s.Ceil=t(1268),s.CeilAll=t(1269),s.CenterOn=t(190),s.Clone=t(1270),s.Contains=t(57),s.ContainsPoint=t(1271),s.ContainsRect=t(503),s.CopyFrom=t(1272),s.Decompose=t(490),s.Equals=t(1273),s.FitInside=t(1274),s.FitOutside=t(1275),s.Floor=t(1276),s.FloorAll=t(1277),s.FromPoints=t(199),s.FromXY=t(1278),s.GetAspectRatio=t(237),s.GetCenter=t(1279),s.GetPoint=t(171),s.GetPoints=t(306),s.GetSize=t(1280),s.Inflate=t(1281),s.Intersection=t(1282),s.MarchingAnts=t(316),s.MergePoints=t(1283),s.MergeRect=t(1284),s.MergeXY=t(1285),s.Offset=t(1286),s.OffsetPoint=t(1287),s.Overlaps=t(1288),s.Perimeter=t(130),s.PerimeterPoint=t(1289),s.Random=t(174),s.RandomOutside=t(1290),s.SameDimensions=t(1291),s.Scale=t(1292),s.Union=t(441),e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.width*u.height>s.width*s.height?!1:u.x>s.x&&u.x<s.right&&u.right>s.x&&u.right<s.right&&u.y>s.y&&u.y<s.bottom&&u.bottom>s.y&&u.bottom<s.bottom};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.x=(n.x1+n.x2+n.x3)/3,a.y=(n.y1+n.y2+n.y3)/3,a};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x1+=u,s.y1+=n,s.x2+=u,s.y2+=n,s.x3+=u,s.y3+=n,s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4);function u(a,o,r,h){var d=a-r,l=o-h,f=d*d+l*l;return Math.sqrt(f)}var n=function(a,o){o===void 0&&(o=new s);var r=a.x1,h=a.y1,d=a.x2,l=a.y2,f=a.x3,c=a.y3,g=u(f,c,d,l),p=u(r,h,f,c),x=u(d,l,r,h),y=g+p+x;return o.x=(r*g+d*p+f*x)/y,o.y=(h*g+l*p+c*x)/y,o};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return function(n,a,o,r){var h=s.getPixelAlpha(a,o,r.texture.key,r.frame.name);return h&&h>=u}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return{gameObject:s,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:u,hitAreaCallback:n,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o){this.pad=a,this.events=a.events,this.index=o,this.value=0,this.threshold=.1},update:function(n){this.value=n},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(239),n=new s({initialize:function(o,r){this.pad=o,this.events=o.manager,this.index=r,this.value=0,this.threshold=1,this.pressed=!1},update:function(a){this.value=a;var o=this.pad,r=this.index;a>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(u.BUTTON_DOWN,o,this,a),this.pad.emit(u.GAMEPAD_BUTTON_DOWN,r,a,this)):this.pressed&&(this.pressed=!1,this.events.emit(u.BUTTON_UP,o,this,a),this.pad.emit(u.GAMEPAD_BUTTON_UP,r,a,this))},destroy:function(){this.pad=null,this.events=null}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(509),u=t(510),n=t(0),a=t(9),o=t(3),r=new n({Extends:a,initialize:function(d,l){a.call(this),this.manager=d,this.pad=l,this.id=l.id,this.index=l.index;for(var f=[],c=0;c<l.buttons.length;c++)f.push(new u(this,c));this.buttons=f;var g=[];for(c=0;c<l.axes.length;c++)g.push(new s(this,c));this.axes=g,this.vibration=l.vibrationActuator;var p={value:0,pressed:!1};this._LCLeft=f[14]?f[14]:p,this._LCRight=f[15]?f[15]:p,this._LCTop=f[12]?f[12]:p,this._LCBottom=f[13]?f[13]:p,this._RCLeft=f[2]?f[2]:p,this._RCRight=f[1]?f[1]:p,this._RCTop=f[3]?f[3]:p,this._RCBottom=f[0]?f[0]:p,this._FBLeftTop=f[4]?f[4]:p,this._FBLeftBottom=f[6]?f[6]:p,this._FBRightTop=f[5]?f[5]:p,this._FBRightBottom=f[7]?f[7]:p;var x={value:0};this._HAxisLeft=g[0]?g[0]:x,this._VAxisLeft=g[1]?g[1]:x,this._HAxisRight=g[2]?g[2]:x,this._VAxisRight=g[3]?g[3]:x,this.leftStick=new o,this.rightStick=new o,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(h){return this.axes[h].getValue()},setAxisThreshold:function(h){for(var d=0;d<this.axes.length;d++)this.axes[d].threshold=h},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(h){return this.buttons[h].value},isButtonDown:function(h){return this.buttons[h].pressed},update:function(h){if(!(h.timestamp<this._created)){var d,l=this.buttons,f=h.buttons,c=l.length;for(d=0;d<c;d++)l[d].update(f[d].value);var g=this.axes,p=h.axes;for(c=g.length,d=0;d<c;d++)g[d].update(p[d]);c>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),c>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var h;for(h=0;h<this.buttons.length;h++)this.buttons[h].destroy();for(h=0;h<this.axes.length;h++)this.axes[h].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(154),a=new s({Extends:u,initialize:function(r,h){u.call(this),this.plugin=r,this.keyCode=h,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(o){return this.emitOnRepeat=o,this},onDown:function(o){this.originalEvent=o,this.enabled&&(this.altKey=o.altKey,this.ctrlKey=o.ctrlKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.location=o.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(n.DOWN,this,o):(this.isDown=!0,this.isUp=!1,this.timeDown=o.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(n.DOWN,this,o)))},onUp:function(o){this.originalEvent=o,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=o.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(n.UP,this,o))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(154),n=t(2),a=t(514),o=t(516),r=new s({initialize:function(d,l,f){if(f===void 0&&(f={}),l.length<2)return!1;this.manager=d,this.enabled=!0,this.keyCodes=[];for(var c=0;c<l.length;c++){var g=l[c];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=n(f,"resetOnWrongKey",!0),this.maxKeyDelay=n(f,"maxKeyDelay",0),this.resetOnMatch=n(f,"resetOnMatch",!1),this.deleteOnMatch=n(f,"deleteOnMatch",!1);var p=this,x=function(y){if(!(p.matched||!p.enabled)){var T=a(y,p);T&&(p.manager.emit(u.COMBO_MATCH,p,y),p.resetOnMatch?o(p):p.deleteOnMatch&&p.destroy())}};this.onKeyDown=x,this.manager.on(u.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(u.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(515),u=function(n,a){if(a.matched)return!0;var o=!1,r=!1;if(n.keyCode===a.current)if(a.index>0&&a.maxKeyDelay>0){var h=a.timeLastMatched+a.maxKeyDelay;n.timeStamp<=h&&(r=!0,o=s(n,a))}else r=!0,o=s(n,a);return!r&&a.resetOnWrongKey&&(a.index=0,a.current=a.keyCodes[0]),o&&(a.timeLastMatched=n.timeStamp,a.matched=!0,a.timeMatched=n.timeStamp),o};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.timeLastMatched=s.timeStamp,u.index++,u.index===u.size?!0:(u.current=u.keyCodes[u.index],!1)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.current=s.keyCodes[0],s.index=0,s.timeLastMatched=0,s.matched=!1,s.timeMatched=0,s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(240),u=function(n,a){var o=s(a,n.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",n.src,o.async,o.user,o.password),r.responseType=n.xhrSettings.responseType,r.timeout=o.timeout,o.headers)for(var h in o.headers)r.setRequestHeader(h,o.headers[h]);return o.header&&o.headerValue&&r.setRequestHeader(o.header,o.headerValue),o.requestedWith&&r.setRequestHeader("X-Requested-With",o.requestedWith),o.overrideMimeType&&r.overrideMimeType(o.overrideMimeType),o.withCredentials&&(r.withCredentials=!0),r.onload=n.onLoad.bind(n,r),r.onerror=n.onError.bind(n,r),r.onprogress=n.onProgress.bind(n),r.send(),r};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(519),h=t(7),d=new s({Extends:n,initialize:function(f,c,g,p,x){if(h(c)){var y=c;c=o(y,"key"),p=o(y,"xhrSettings"),x=o(y,"context",x)}var T={type:"audio",cache:f.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:c,url:g.url,xhrSettings:p,config:{context:x}};n.call(this,f,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var l=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(f){l.data=f,l.onProcessComplete()},function(f){console.error("Error decoding audio: "+l.key+" - ",f?f.message:null),l.onProcessError()}),this.config.context=null}});d.create=function(l,f,c,g,p){var x=l.systems.game,y=x.config.audio,T=x.device.audio;h(f)&&(c=o(f,"url",[]),g=o(f,"config",{}));var E=d.getAudioURL(x,c);return E?T.webAudio&&!y.disableWebAudio?new d(l,f,E,p,x.sound.context):new r(l,f,E,g):null},d.getAudioURL=function(l,f){Array.isArray(f)||(f=[f]);for(var c=0;c<f.length;c++){var g=o(f[c],"url",f[c]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var p=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(p=o(f[c],"type",p?p[1]:"").toLowerCase(),l.device.audio[p])return{url:g,type:p}}return null},a.register("audio",function(l,f,c,g){var p=this.systems.game,x=p.config.audio,y=p.device.audio;if(x.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(l))for(var E=0;E<l.length;E++)T=d.create(this,l[E]),T&&this.addFile(T);else T=d.create(this,l,f,c,g),T&&this.addFile(T);return this}),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(95),n=t(23),a=t(2),o=t(155),r=t(7),h=new s({Extends:n,initialize:function(l,f,c,g){if(r(f)){var p=f;f=a(p,"key"),g=a(p,"config",g)}var x={type:"audio",cache:l.cacheManager.audio,extension:c.type,key:f,url:c.url,config:g};n.call(this,l,x),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var d=0;d<this.data.length;d++){var l=this.data[d];l.oncanplaythrough=null,l.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(d){var l=d.target;l.oncanplaythrough=null,l.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var d=this.config&&this.config.instances||1;this.filesTotal=d,this.filesLoaded=0,this.percentComplete=0;for(var l=0;l<d;l++){var f=new Audio;f.dataset||(f.dataset={}),f.dataset.name=this.key+("0"+l).slice(-2),f.dataset.used="false",this.locked?f.dataset.locked="true":(f.dataset.locked="false",f.preload="auto",f.oncanplaythrough=this.onProgress.bind(this),f.onerror=this.onError.bind(this)),this.data.push(f)}for(l=0;l<this.data.length;l++)f=this.data[l],f.src=o(this,this.loader.baseURL),this.locked||f.load();this.locked&&setTimeout(this.onLoad.bind(this))}});e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=new s({Extends:n,initialize:function(l,f,c,g){var p="js";if(r(f)){var x=f;f=o(x,"key"),c=o(x,"url"),g=o(x,"xhrSettings"),p=o(x,"extension",p)}var y={type:"script",cache:!1,extension:p,responseType:"text",key:f,url:c,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("script",function(d,l,f){if(Array.isArray(d))for(var c=0;c<d.length;c++)this.addFile(new h(this,d[c]));else this.addFile(new h(this,d,l,f));return this}),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(522),u=t(157),n=t(0),a=t(62),o=t(524),r=t(525),h=new n({initialize:function(l){this.world=l,this.scene=l.scene,this.sys=l.scene.sys},collider:function(d,l,f,c,g){return this.world.addCollider(d,l,f,c,g)},overlap:function(d,l,f,c,g){return this.world.addOverlap(d,l,f,c,g)},existing:function(d,l){var f=l?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(d,f),d},staticImage:function(d,l,f,c){var g=new s(this.scene,d,l,f,c);return this.sys.displayList.add(g),this.world.enableBody(g,a.STATIC_BODY),g},image:function(d,l,f,c){var g=new s(this.scene,d,l,f,c);return this.sys.displayList.add(g),this.world.enableBody(g,a.DYNAMIC_BODY),g},staticSprite:function(d,l,f,c){var g=new u(this.scene,d,l,f,c);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,a.STATIC_BODY),g},sprite:function(d,l,f,c){var g=new u(this.scene,d,l,f,c);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,a.DYNAMIC_BODY),g},staticGroup:function(d,l){return this.sys.updateList.add(new r(this.world,this.world.scene,d,l))},group:function(d,l){return this.sys.updateList.add(new o(this.world,this.world.scene,d,l))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(243),n=t(125),a=new s({Extends:n,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function(r,h,d,l,f){n.call(this,r,h,d,l,f),this.body=null}});e.exports=a},function(e,v,t){var s=t(244),u=t(65),n=t(231),a=t(151),o=function(r,h,d,l,f,c){var g=s(r,h-l,d-l,2*l,2*l,f,c);if(g.length===0)return g;for(var p=new u(h,d,l),x=new u,y=[],T=0;T<g.length;T++){var E=g[T];E.isCircle?(x.setTo(E.center.x,E.center.y,E.halfWidth),n(p,x)&&y.push(E)):a(p,E)&&y.push(E)}return y};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(157),u=t(0),n=t(62),a=t(2),o=t(113),r=t(7),h=new u({Extends:o,initialize:function(l,f,c,g){if(!c&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(r(c))g=c,c=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(c)&&r(c[0])){g=c[0];var p=this;c.forEach(function(x){x.internalCreateCallback=p.createCallbackHandler,x.internalRemoveCallback=p.removeCallbackHandler}),c=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=l,g.classType=a(g,"classType",s),this.physicsType=n.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:a(g,"collideWorldBounds",!1),setBoundsRectangle:a(g,"customBoundsRectangle",null),setAccelerationX:a(g,"accelerationX",0),setAccelerationY:a(g,"accelerationY",0),setAllowDrag:a(g,"allowDrag",!0),setAllowGravity:a(g,"allowGravity",!0),setAllowRotation:a(g,"allowRotation",!0),setBounceX:a(g,"bounceX",0),setBounceY:a(g,"bounceY",0),setDragX:a(g,"dragX",0),setDragY:a(g,"dragY",0),setEnable:a(g,"enable",!0),setGravityX:a(g,"gravityX",0),setGravityY:a(g,"gravityY",0),setFrictionX:a(g,"frictionX",0),setFrictionY:a(g,"frictionY",0),setMaxVelocityX:a(g,"maxVelocityX",1e4),setMaxVelocityY:a(g,"maxVelocityY",1e4),setVelocityX:a(g,"velocityX",0),setVelocityY:a(g,"velocityY",0),setAngularVelocity:a(g,"angularVelocity",0),setAngularAcceleration:a(g,"angularAcceleration",0),setAngularDrag:a(g,"angularDrag",0),setMass:a(g,"mass",1),setImmovable:a(g,"immovable",!1)},o.call(this,f,c,g),this.type="PhysicsGroup"},createCallbackHandler:function(d){d.body||this.world.enableBody(d,n.DYNAMIC_BODY);var l=d.body;for(var f in this.defaults)l[f](this.defaults[f])},removeCallbackHandler:function(d){d.body&&this.world.disableBody(d)},setVelocity:function(d,l,f){f===void 0&&(f=0);for(var c=this.getChildren(),g=0;g<c.length;g++)c[g].body.velocity.set(d+g*f,l+g*f);return this},setVelocityX:function(d,l){l===void 0&&(l=0);for(var f=this.getChildren(),c=0;c<f.length;c++)f[c].body.velocity.x=d+c*l;return this},setVelocityY:function(d,l){l===void 0&&(l=0);for(var f=this.getChildren(),c=0;c<f.length;c++)f[c].body.velocity.y=d+c*l;return this}});e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(157),u=t(0),n=t(62),a=t(2),o=t(113),r=t(7),h=new u({Extends:o,initialize:function(l,f,c,g){!c&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:s}:r(c)?(g=c,c=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=a(g,"classType",s)):Array.isArray(c)&&r(c[0])?(g=c,c=null,g.forEach(function(p){p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler,p.createMultipleCallback=this.createMultipleCallbackHandler,p.classType=a(p,"classType",s)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=l,this.physicsType=n.STATIC_BODY,o.call(this,f,c,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(d){d.body||this.world.enableBody(d,n.STATIC_BODY)},removeCallbackHandler:function(d){d.body&&this.world.disableBody(d)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var d=this.children.entries,l=0;l<d.length;l++)d[l].body.reset();return this}});e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(350),u=t(527),n=t(18),a=t(0),o=t(528),r=t(62),h=t(50),d=t(9),l=t(245),f=t(124),c=t(354),g=t(355),p=t(246),x=t(247),y=t(529),T=t(6),E=t(14),S=t(211),C=t(530),P=t(10),R=t(531),A=t(532),M=t(537),O=t(538),F=t(149),I=t(539),B=t(248),V=t(25),U=t(3),Y=t(68),W=new a({Extends:d,initialize:function(L,D){d.call(this),this.scene=L,this.bodies=new F,this.staticBodies=new F,this.pendingDestroy=new F,this.colliders=new S,this.gravity=new U(T(D,"gravity.x",0),T(D,"gravity.y",0)),this.bounds=new P(T(D,"x",0),T(D,"y",0),T(D,"width",L.sys.scale.width),T(D,"height",L.sys.scale.height)),this.checkCollision={up:T(D,"checkCollision.up",!0),down:T(D,"checkCollision.down",!0),left:T(D,"checkCollision.left",!0),right:T(D,"checkCollision.right",!0)},this.fps=T(D,"fps",60),this.fixedStep=T(D,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(D,"timeScale",1),this.OVERLAP_BIAS=T(D,"overlapBias",4),this.TILE_BIAS=T(D,"tileBias",16),this.forceX=T(D,"forceX",!1),this.isPaused=T(D,"isPaused",!1),this._total=0,this.drawDebug=T(D,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(D,"debugShowBody",!0),debugShowStaticBody:T(D,"debugShowStaticBody",!0),debugShowVelocity:T(D,"debugShowVelocity",!0),bodyDebugColor:T(D,"debugBodyColor",16711935),staticBodyDebugColor:T(D,"debugStaticBodyColor",255),velocityDebugColor:T(D,"debugVelocityColor",65280)},this.maxEntries=T(D,"maxEntries",16),this.useTree=T(D,"useTree",!0),this.tree=new R(this.maxEntries),this.staticTree=new R(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new V,this._tempMatrix2=new V,this.drawDebug&&this.createDebugGraphic()},enable:function(w,L){L===void 0&&(L=r.DYNAMIC_BODY),Array.isArray(w)||(w=[w]);for(var D=0;D<w.length;D++){var N=w[D];if(N.isParent)for(var G=N.getChildren(),b=0;b<G.length;b++){var z=G[b];z.isParent?this.enable(z,L):this.enableBody(z,L)}else this.enableBody(N,L)}},enableBody:function(w,L){return L===void 0&&(L=r.DYNAMIC_BODY),w.body||(L===r.DYNAMIC_BODY?w.body=new u(this,w):L===r.STATIC_BODY&&(w.body=new I(this,w))),this.add(w.body),w},add:function(w){return w.physicsType===r.DYNAMIC_BODY?this.bodies.set(w):w.physicsType===r.STATIC_BODY&&(this.staticBodies.set(w),this.staticTree.insert(w)),w.enable=!0,w},disable:function(w){Array.isArray(w)||(w=[w]);for(var L=0;L<w.length;L++){var D=w[L];if(D.isParent)for(var N=D.getChildren(),G=0;G<N.length;G++){var b=N[G];b.isParent?this.disable(b):this.disableBody(b.body)}else this.disableBody(D.body)}},disableBody:function(w){this.remove(w),w.enable=!1},remove:function(w){w.physicsType===r.DYNAMIC_BODY?(this.tree.remove(w),this.bodies.delete(w)):w.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(w),this.staticTree.remove(w))},createDebugGraphic:function(){var w=this.scene.sys.add.graphics({x:0,y:0});return w.setDepth(Number.MAX_VALUE),this.debugGraphic=w,this.drawDebug=!0,w},setBounds:function(w,L,D,N,G,b,z,X){return this.bounds.setTo(w,L,D,N),G!==void 0&&this.setBoundsCollision(G,b,z,X),this},setBoundsCollision:function(w,L,D,N){return w===void 0&&(w=!0),L===void 0&&(L=!0),D===void 0&&(D=!0),N===void 0&&(N=!0),this.checkCollision.left=w,this.checkCollision.right=L,this.checkCollision.up=D,this.checkCollision.down=N,this},pause:function(){return this.isPaused=!0,this.emit(l.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(l.RESUME),this},addCollider:function(w,L,D,N,G){D===void 0&&(D=null),N===void 0&&(N=null),G===void 0&&(G=D);var b=new o(this,!1,w,L,D,N,G);return this.colliders.add(b),b},addOverlap:function(w,L,D,N,G){D===void 0&&(D=null),N===void 0&&(N=null),G===void 0&&(G=D);var b=new o(this,!0,w,L,D,N,G);return this.colliders.add(b),b},removeCollider:function(w){return this.colliders.remove(w),this},setFPS:function(w){return this.fps=w,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(w,L){if(!(this.isPaused||this.bodies.size===0)){var D,N=this._frameTime,G=this._frameTimeMS*this.timeScale;this._elapsed+=L;var b,z=this.bodies.entries,X=this._elapsed>=G;for(this.fixedStep||(N=L*.001,X=!0,this._elapsed=0),D=0;D<z.length;D++)b=z[D],b.enable&&b.preUpdate(X,N);if(X){this._elapsed-=G,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(z));var H=this.colliders.update();for(D=0;D<H.length;D++){var $=H[D];$.active&&$.update()}this.emit(l.WORLD_STEP,N)}for(;this._elapsed>=G;)this._elapsed-=G,this.step(N)}},step:function(w){var L,D,N=this.bodies.entries,G=N.length;for(L=0;L<G;L++)D=N[L],D.enable&&D.update(w);this.useTree&&(this.tree.clear(),this.tree.load(N));var b=this.colliders.update();for(L=0;L<b.length;L++){var z=b[L];z.active&&z.update()}this.emit(l.WORLD_STEP,w),this.stepsLastFrame++},postUpdate:function(){var w,L,D=this.bodies.entries,N=D.length,G=this.bodies,b=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,w=0;w<N;w++)L=D[w],L.enable&&L.postUpdate();if(this.drawDebug){var z=this.debugGraphic;for(z.clear(),w=0;w<N;w++)L=D[w],L.willDrawDebug()&&L.drawDebug(z);for(D=b.entries,N=D.length,w=0;w<N;w++)L=D[w],L.willDrawDebug()&&L.drawDebug(z)}var X=this.pendingDestroy;if(X.size>0){var H=this.tree,$=this.staticTree;for(D=X.entries,N=D.length,w=0;w<N;w++)L=D[w],L.physicsType===r.DYNAMIC_BODY?(H.remove(L),G.delete(L)):L.physicsType===r.STATIC_BODY&&($.remove(L),b.delete(L)),L.world=void 0,L.gameObject=void 0;X.clear()}},updateMotion:function(w,L){w.allowRotation&&this.computeAngularVelocity(w,L),this.computeVelocity(w,L)},computeAngularVelocity:function(w,L){var D=w.angularVelocity,N=w.angularAcceleration,G=w.angularDrag,b=w.maxAngular;N?D+=N*L:w.allowDrag&&G&&(G*=L,c(D-G,0,.1)?D-=G:g(D+G,0,.1)?D+=G:D=0),D=n(D,-b,b);var z=D-w.angularVelocity;w.angularVelocity+=z,w.rotation+=w.angularVelocity*L},computeVelocity:function(w,L){var D=w.velocity.x,N=w.acceleration.x,G=w.drag.x,b=w.maxVelocity.x,z=w.velocity.y,X=w.acceleration.y,H=w.drag.y,$=w.maxVelocity.y,J=w.speed,K=w.maxSpeed,Z=w.allowDrag,k=w.useDamping;w.allowGravity&&(D+=(this.gravity.x+w.gravity.x)*L,z+=(this.gravity.y+w.gravity.y)*L),N?D+=N*L:Z&&G&&(k?(G=Math.pow(G,L),D*=G,J=Math.sqrt(D*D+z*z),f(J,0,.001)&&(D=0)):(G*=L,c(D-G,0,.01)?D-=G:g(D+G,0,.01)?D+=G:D=0)),X?z+=X*L:Z&&H&&(k?(H=Math.pow(H,L),z*=H,J=Math.sqrt(D*D+z*z),f(J,0,.001)&&(z=0)):(H*=L,c(z-H,0,.01)?z-=H:g(z+H,0,.01)?z+=H:z=0)),D=n(D,-b,b),z=n(z,-$,$),w.velocity.set(D,z),K>-1&&J>K&&(w.velocity.normalize().scale(K),J=K),w.speed=J},separate:function(w,L,D,N,G,b){if(!b&&!w.enable||!L.enable||w.checkCollision.none||L.checkCollision.none||!this.intersects(w,L)||D&&D.call(N,w.gameObject,L.gameObject)===!1)return!1;if(w.isCircle&&L.isCircle)return this.separateCircle(w,L,G);if(w.isCircle!==L.isCircle){var z=w.isCircle?L:w,X=w.isCircle?w:L,H={x:z.x,y:z.y,right:z.right,bottom:z.bottom},$=X.center;if(($.y<H.y||$.y>H.bottom)&&($.x<H.x||$.x>H.right))return this.separateCircle(w,L,G)}var J=!1,K=!1;G?(J=M(w,L,G,this.OVERLAP_BIAS),K=O(w,L,G,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+w.gravity.y)<Math.abs(this.gravity.x+w.gravity.x)?(J=M(w,L,G,this.OVERLAP_BIAS),this.intersects(w,L)&&(K=O(w,L,G,this.OVERLAP_BIAS))):(K=O(w,L,G,this.OVERLAP_BIAS),this.intersects(w,L)&&(J=M(w,L,G,this.OVERLAP_BIAS)));var Z=J||K;return Z&&(G?(w.onOverlap||L.onOverlap)&&this.emit(l.OVERLAP,w.gameObject,L.gameObject,w,L):(w.onCollide||L.onCollide)&&this.emit(l.COLLIDE,w.gameObject,L.gameObject,w,L)),Z},separateCircle:function(w,L,D,N){p(w,L,!1,N),x(w,L,!1,N);var G=0;if(w.isCircle!==L.isCircle){var b={x:L.isCircle?w.position.x:L.position.x,y:L.isCircle?w.position.y:L.position.y,right:L.isCircle?w.right:L.right,bottom:L.isCircle?w.bottom:L.bottom},z={x:w.isCircle?w.center.x:L.center.x,y:w.isCircle?w.center.y:L.center.y,radius:w.isCircle?w.halfWidth:L.halfWidth};z.y<b.y?z.x<b.x?G=h(z.x,z.y,b.x,b.y)-z.radius:z.x>b.right&&(G=h(z.x,z.y,b.right,b.y)-z.radius):z.y>b.bottom&&(z.x<b.x?G=h(z.x,z.y,b.x,b.bottom)-z.radius:z.x>b.right&&(G=h(z.x,z.y,b.right,b.bottom)-z.radius)),G*=-1}else G=w.halfWidth+L.halfWidth-h(w.center.x,w.center.y,L.center.x,L.center.y);if(w.overlapR=G,L.overlapR=G,D||G===0||w.immovable&&L.immovable||w.customSeparateX||L.customSeparateX)return G!==0&&(w.onOverlap||L.onOverlap)&&this.emit(l.OVERLAP,w.gameObject,L.gameObject,w,L),G!==0;var X=w.center.x-L.center.x,H=w.center.y-L.center.y,$=Math.sqrt(Math.pow(X,2)+Math.pow(H,2)),J=(L.center.x-w.center.x)/$||0,K=(L.center.y-w.center.y)/$||0,Z=2*(w.velocity.x*J+w.velocity.y*K-L.velocity.x*J-L.velocity.y*K)/(w.mass+L.mass);(w.immovable||L.immovable)&&(Z*=2),w.immovable||(w.velocity.x=w.velocity.x-Z/w.mass*J,w.velocity.y=w.velocity.y-Z/w.mass*K),L.immovable||(L.velocity.x=L.velocity.x+Z/L.mass*J,L.velocity.y=L.velocity.y+Z/L.mass*K),!w.immovable&&!L.immovable&&(G/=2);var k=s(w.center,L.center),Q=(G+E.EPSILON)*Math.cos(k),q=(G+E.EPSILON)*Math.sin(k);return w.immovable||(w.x-=Q,w.y-=q,w.updateCenter()),L.immovable||(L.x+=Q,L.y+=q,L.updateCenter()),w.velocity.x*=w.bounce.x,w.velocity.y*=w.bounce.y,L.velocity.x*=L.bounce.x,L.velocity.y*=L.bounce.y,(w.onCollide||L.onCollide)&&this.emit(l.COLLIDE,w.gameObject,L.gameObject,w,L),!0},intersects:function(w,L){return w===L?!1:!w.isCircle&&!L.isCircle?!(w.right<=L.position.x||w.bottom<=L.position.y||w.position.x>=L.right||w.position.y>=L.bottom):w.isCircle?L.isCircle?h(w.center.x,w.center.y,L.center.x,L.center.y)<=w.halfWidth+L.halfWidth:this.circleBodyIntersects(w,L):this.circleBodyIntersects(L,w)},circleBodyIntersects:function(w,L){var D=n(w.center.x,L.left,L.right),N=n(w.center.y,L.top,L.bottom),G=(w.center.x-D)*(w.center.x-D),b=(w.center.y-N)*(w.center.y-N);return G+b<=w.halfWidth*w.halfWidth},overlap:function(w,L,D,N,G){return D===void 0&&(D=null),N===void 0&&(N=null),G===void 0&&(G=D),this.collideObjects(w,L,D,N,G,!0)},collide:function(w,L,D,N,G){return D===void 0&&(D=null),N===void 0&&(N=null),G===void 0&&(G=D),this.collideObjects(w,L,D,N,G,!1)},collideObjects:function(w,L,D,N,G,b){var z,X;w.isParent&&w.physicsType===void 0&&(w=w.children.entries),L&&L.isParent&&L.physicsType===void 0&&(L=L.children.entries);var H=Array.isArray(w),$=Array.isArray(L);if(this._total=0,!H&&!$)this.collideHandler(w,L,D,N,G,b);else if(!H&&$)for(z=0;z<L.length;z++)this.collideHandler(w,L[z],D,N,G,b);else if(H&&!$)if(L)for(z=0;z<w.length;z++)this.collideHandler(w[z],L,D,N,G,b);else for(z=0;z<w.length;z++){var J=w[z];for(X=z+1;X<w.length;X++)z!==X&&this.collideHandler(J,w[X],D,N,G,b)}else for(z=0;z<w.length;z++)for(X=0;X<L.length;X++)this.collideHandler(w[z],L[X],D,N,G,b);return this._total>0},collideHandler:function(w,L,D,N,G,b){if(L===void 0&&w.isParent)return this.collideGroupVsGroup(w,w,D,N,G,b);if(!w||!L)return!1;if(w.body){if(L.body)return this.collideSpriteVsSprite(w,L,D,N,G,b);if(L.isParent)return this.collideSpriteVsGroup(w,L,D,N,G,b);if(L.isTilemap)return this.collideSpriteVsTilemapLayer(w,L,D,N,G,b)}else if(w.isParent){if(L.body)return this.collideSpriteVsGroup(L,w,D,N,G,b);if(L.isParent)return this.collideGroupVsGroup(w,L,D,N,G,b);if(L.isTilemap)return this.collideGroupVsTilemapLayer(w,L,D,N,G,b)}else if(w.isTilemap){if(L.body)return this.collideSpriteVsTilemapLayer(L,w,D,N,G,b);if(L.isParent)return this.collideGroupVsTilemapLayer(L,w,D,N,G,b)}},collideSpriteVsSprite:function(w,L,D,N,G,b){return!w.body||!L.body?!1:(this.separate(w.body,L.body,N,G,b)&&(D&&D.call(G,w,L),this._total++),!0)},collideSpriteVsGroup:function(w,L,D,N,G,b){var z=w.body;if(!(L.length===0||!z||!z.enable||z.checkCollision.none)){var X,H,$;if(this.useTree||L.physicsType===r.STATIC_BODY){var J=this.treeMinMax;J.minX=z.left,J.minY=z.top,J.maxX=z.right,J.maxY=z.bottom;var K=L.physicsType===r.DYNAMIC_BODY?this.tree.search(J):this.staticTree.search(J);for(H=K.length,X=0;X<H;X++)$=K[X],!(z===$||!$.enable||$.checkCollision.none||!L.contains($.gameObject))&&this.separate(z,$,N,G,b,!0)&&(D&&D.call(G,z.gameObject,$.gameObject),this._total++)}else{var Z=L.getChildren(),k=L.children.entries.indexOf(w);for(H=Z.length,X=0;X<H;X++)$=Z[X].body,!(!$||X===k||!$.enable)&&this.separate(z,$,N,G,b)&&(D&&D.call(G,z.gameObject,$.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(w,L,D,N,G,b){var z=w.getChildren();if(z.length===0)return!1;for(var X=!1,H=0;H<z.length;H++)z[H].body&&this.collideSpriteVsTilemapLayer(z[H],L,D,N,G,b)&&(X=!0);return X},collideTiles:function(w,L,D,N,G){return!w.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(w,L,D,N,G,!1,!1)},overlapTiles:function(w,L,D,N,G){return!w.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(w,L,D,N,G,!0,!1)},collideSpriteVsTilemapLayer:function(w,L,D,N,G,b){var z=w.body;if(!z.enable||z.checkCollision.none)return!1;var X=z.position.x,H=z.position.y,$=z.width,J=z.height,K=L.layer;if(K.tileWidth>K.baseTileWidth){var Z=(K.tileWidth-K.baseTileWidth)*L.scaleX;X-=Z,$+=Z}if(K.tileHeight>K.baseTileHeight){var k=(K.tileHeight-K.baseTileHeight)*L.scaleY;J+=k}var Q=y(X,H,$,J,null,L.scene.cameras.main,L.layer);return Q.length===0?!1:this.collideSpriteVsTilesHandler(w,Q,D,N,G,b,!0)},collideSpriteVsTilesHandler:function(w,L,D,N,G,b,z){for(var X=w.body,H,$={left:0,right:0,top:0,bottom:0},J,K=!1,Z=0;Z<L.length;Z++){H=L[Z],J=H.tilemapLayer;var k=J.tileToWorldXY(H.x,H.y);$.left=k.x,$.top=k.y,H.baseHeight!==H.height&&($.top-=(H.height-H.baseHeight)*J.scaleY),$.right=$.left+H.width*J.scaleX,$.bottom=$.top+H.height*J.scaleY,B($,X)&&(!N||N.call(G,w,H))&&C(H,w)&&(b||A(Z,X,H,$,J,this.TILE_BIAS,z))&&(this._total++,K=!0,D&&D.call(G,w,H),b&&X.onOverlap?this.emit(l.TILE_OVERLAP,w,H,X):X.onCollide&&this.emit(l.TILE_COLLIDE,w,H,X))}return K},collideGroupVsGroup:function(w,L,D,N,G,b){if(!(w.length===0||L.length===0))for(var z=w.getChildren(),X=0;X<z.length;X++)this.collideSpriteVsGroup(z[X],L,D,N,G,b)},wrap:function(w,L){w.body?this.wrapObject(w,L):w.getChildren?this.wrapArray(w.getChildren(),L):Array.isArray(w)?this.wrapArray(w,L):this.wrapObject(w,L)},wrapArray:function(w,L){for(var D=0;D<w.length;D++)this.wrapObject(w[D],L)},wrapObject:function(w,L){L===void 0&&(L=0),w.x=Y(w.x,this.bounds.left-L,this.bounds.right+L),w.y=Y(w.y,this.bounds.top-L,this.bounds.bottom+L)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});e.exports=W},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(62),n=t(245),a=t(196),o=t(10),r=t(57),h=t(3),d=new s({initialize:function(f,c){var g=c.displayWidth?c.displayWidth:64,p=c.displayHeight?c.displayHeight:64;this.world=f,this.gameObject=c,this.transform={x:c.x,y:c.y,rotation:c.angle,scaleX:c.scaleX,scaleY:c.scaleY,displayOriginX:c.displayOriginX,displayOriginY:c.displayOriginY},this.debugShowBody=f.defaults.debugShowBody,this.debugShowVelocity=f.defaults.debugShowVelocity,this.debugBodyColor=f.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(c.x-c.scaleX*c.displayOriginX,c.y-c.scaleY*c.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=c.angle,this.preRotation=c.angle,this.width=g,this.height=p,this.sourceWidth=g,this.sourceHeight=p,c.frame&&(this.sourceWidth=c.frame.realWidth,this.sourceHeight=c.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(p/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new h,this.newVelocity=new h,this.deltaMax=new h,this.acceleration=new h,this.allowDrag=!0,this.drag=new h,this.allowGravity=!0,this.gravity=new h,this.bounce=new h,this.worldBounce=null,this.customBoundsRectangle=f.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new h(1e4,1e4),this.maxSpeed=-1,this.friction=new h(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=u.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=u.DYNAMIC_BODY,this._sx=c.scaleX,this._sy=c.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new o},updateBounds:function(){var l=this.gameObject,f=this.transform;if(l.parentContainer){var c=l.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);f.x=c.tx,f.y=c.ty,f.rotation=a(c.rotation),f.scaleX=c.scaleX,f.scaleY=c.scaleY,f.displayOriginX=l.displayOriginX,f.displayOriginY=l.displayOriginY}else f.x=l.x,f.y=l.y,f.rotation=l.angle,f.scaleX=l.scaleX,f.scaleY=l.scaleY,f.displayOriginX=l.displayOriginX,f.displayOriginY=l.displayOriginY;var g=!1;if(this.syncBounds){var p=l.getBounds(this._bounds);this.width=p.width,this.height=p.height,g=!0}else{var x=Math.abs(f.scaleX),y=Math.abs(f.scaleY);(this._sx!==x||this._sy!==y)&&(this.width=this.sourceWidth*x,this.height=this.sourceHeight*y,this._sx=x,this._sy=y,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var l=this.transform;this.position.x=l.x+l.scaleX*(this.offset.x-l.displayOriginX),this.position.y=l.y+l.scaleY*(this.offset.y-l.displayOriginY),this.updateCenter()},resetFlags:function(l){l===void 0&&(l=!1);var f=this.wasTouching,c=this.touching,g=this.blocked;l?(f.none=!0,f.up=!1,f.down=!1,f.left=!1,f.right=!1):(f.none=c.none,f.up=c.up,f.down=c.down,f.left=c.left,f.right=c.right),c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(l,f){l&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),l&&this.update(f)},update:function(l){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,l);var f=this.velocity.x,c=this.velocity.y;this.newVelocity.set(f*l,c*l),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(c,f),this.speed=Math.sqrt(f*f+c*c),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(n.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var l=this.position.x-this.prevFrame.x,f=this.position.y-this.prevFrame.y;if(this.moves){var c=this.deltaMax.x,g=this.deltaMax.y;c!==0&&l!==0&&(l<0&&l<-c?l=-c:l>0&&l>c&&(l=c)),g!==0&&f!==0&&(f<0&&f<-g?f=-g:f>0&&f>g&&(f=g)),this.gameObject.x+=l,this.gameObject.y+=f}l<0?this.facing=u.FACING_LEFT:l>0&&(this.facing=u.FACING_RIGHT),f<0?this.facing=u.FACING_UP:f>0&&(this.facing=u.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=l,this._ty=f},setBoundsRectangle:function(l){return this.customBoundsRectangle=l||this.world.bounds,this},checkWorldBounds:function(){var l=this.position,f=this.customBoundsRectangle,c=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,p=this.worldBounce?-this.worldBounce.y:-this.bounce.y,x=!1;return l.x<f.x&&c.left?(l.x=f.x,this.velocity.x*=g,this.blocked.left=!0,x=!0):this.right>f.right&&c.right&&(l.x=f.right-this.width,this.velocity.x*=g,this.blocked.right=!0,x=!0),l.y<f.y&&c.up?(l.y=f.y,this.velocity.y*=p,this.blocked.up=!0,x=!0):this.bottom>f.bottom&&c.down&&(l.y=f.bottom-this.height,this.velocity.y*=p,this.blocked.down=!0,x=!0),x&&(this.blocked.none=!1,this.updateCenter()),x},setOffset:function(l,f){return f===void 0&&(f=l),this.offset.set(l,f),this},setSize:function(l,f,c){c===void 0&&(c=!0);var g=this.gameObject;if(!l&&g.frame&&(l=g.frame.realWidth),!f&&g.frame&&(f=g.frame.realHeight),this.sourceWidth=l,this.sourceHeight=f,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),c&&g.getCenter){var p=(g.width-l)/2,x=(g.height-f)/2;this.offset.set(p,x)}return this.isCircle=!1,this.radius=0,this},setCircle:function(l,f,c){return f===void 0&&(f=this.offset.x),c===void 0&&(c=this.offset.y),l>0?(this.isCircle=!0,this.radius=l,this.sourceWidth=l*2,this.sourceHeight=l*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(f,c),this.updateCenter()):this.isCircle=!1,this},reset:function(l,f){this.stop();var c=this.gameObject;c.setPosition(l,f),c.getTopLeft?c.getTopLeft(this.position):this.position.set(l,f),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=c.angle,this.preRotation=c.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(l){return l.x=this.x,l.y=this.y,l.right=this.right,l.bottom=this.bottom,l},hitTest:function(l,f){if(!this.isCircle)return r(this,l,f);if(this.radius>0&&l>=this.left&&l<=this.right&&f>=this.top&&f<=this.bottom){var c=(this.center.x-l)*(this.center.x-l),g=(this.center.y-f)*(this.center.y-f);return c+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(l){var f=this.position,c=f.x+this.halfWidth,g=f.y+this.halfHeight;this.debugShowBody&&(l.lineStyle(l.defaultStrokeWidth,this.debugBodyColor),this.isCircle?l.strokeCircle(c,g,this.width/2):(this.checkCollision.up&&l.lineBetween(f.x,f.y,f.x+this.width,f.y),this.checkCollision.right&&l.lineBetween(f.x+this.width,f.y,f.x+this.width,f.y+this.height),this.checkCollision.down&&l.lineBetween(f.x,f.y+this.height,f.x+this.width,f.y+this.height),this.checkCollision.left&&l.lineBetween(f.x,f.y,f.x,f.y+this.height))),this.debugShowVelocity&&(l.lineStyle(l.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),l.lineBetween(c,g,c+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(l,f,c,g){l===void 0&&(l=!0),this.collideWorldBounds=l;var p=f!==void 0,x=c!==void 0;return(p||x)&&(this.worldBounce||(this.worldBounce=new h),p&&(this.worldBounce.x=f),x&&(this.worldBounce.y=c)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(l,f){return this.velocity.set(l,f),l=this.velocity.x,f=this.velocity.y,this.speed=Math.sqrt(l*l+f*f),this},setVelocityX:function(l){this.velocity.x=l;var f=l,c=this.velocity.y;return this.speed=Math.sqrt(f*f+c*c),this},setVelocityY:function(l){this.velocity.y=l;var f=this.velocity.x,c=l;return this.speed=Math.sqrt(f*f+c*c),this},setMaxVelocity:function(l,f){return this.maxVelocity.set(l,f),this},setMaxVelocityX:function(l){return this.maxVelocity.x=l,this},setMaxVelocityY:function(l){return this.maxVelocity.y=l,this},setMaxSpeed:function(l){return this.maxSpeed=l,this},setBounce:function(l,f){return this.bounce.set(l,f),this},setBounceX:function(l){return this.bounce.x=l,this},setBounceY:function(l){return this.bounce.y=l,this},setAcceleration:function(l,f){return this.acceleration.set(l,f),this},setAccelerationX:function(l){return this.acceleration.x=l,this},setAccelerationY:function(l){return this.acceleration.y=l,this},setAllowDrag:function(l){return l===void 0&&(l=!0),this.allowDrag=l,this},setAllowGravity:function(l){return l===void 0&&(l=!0),this.allowGravity=l,this},setAllowRotation:function(l){return l===void 0&&(l=!0),this.allowRotation=l,this},setDrag:function(l,f){return this.drag.set(l,f),this},setDamping:function(l){return this.useDamping=l,this},setDragX:function(l){return this.drag.x=l,this},setDragY:function(l){return this.drag.y=l,this},setGravity:function(l,f){return this.gravity.set(l,f),this},setGravityX:function(l){return this.gravity.x=l,this},setGravityY:function(l){return this.gravity.y=l,this},setFriction:function(l,f){return this.friction.set(l,f),this},setFrictionX:function(l){return this.friction.x=l,this},setFrictionY:function(l){return this.friction.y=l,this},setAngularVelocity:function(l){return this.angularVelocity=l,this},setAngularAcceleration:function(l){return this.angularAcceleration=l,this},setAngularDrag:function(l){return this.angularDrag=l,this},setMass:function(l){return this.mass=l,this},setImmovable:function(l){return l===void 0&&(l=!0),this.immovable=l,this},setEnable:function(l){return l===void 0&&(l=!0),this.enable=l,this},processX:function(l,f,c,g){this.x+=l,this.updateCenter(),f!==null&&(this.velocity.x=f);var p=this.blocked;c&&(p.left=!0),g&&(p.right=!0)},processY:function(l,f,c,g){this.y+=l,this.updateCenter(),f!==null&&(this.velocity.y=f);var p=this.blocked;c&&(p.up=!0),g&&(p.down=!0)},x:{get:function(){return this.position.x},set:function(l){this.position.x=l}},y:{get:function(){return this.position.y},set:function(l){this.position.y=l}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o,r,h,d,l,f){this.world=a,this.name="",this.active=!0,this.overlapOnly=o,this.object1=r,this.object2=h,this.collideCallback=d,this.processCallback=l,this.callbackContext=f},setName:function(n){return this.name=n,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(3),n=new u,a=new u,o=function(r,h,d,l,f,c,g){var p=g.tilemapLayer.tilemap._convert.WorldToTileXY;p(r,h,!0,n,c,g);var x=n.x,y=n.y;p(r+d,h+l,!1,a,c,g);var T=Math.ceil(a.x),E=Math.ceil(a.y);return s(x,y,T-x,E-y,f,g)};e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.collisionCallback?!s.collisionCallback.call(s.collisionCallbackContext,u,s):s.layer.callbacks[s.index]?!s.layer.callbacks[s.index].callback.call(s.layer.callbacks[s.index].callbackContext,u,s):!0};e.exports=t},function(e,v,t){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(436);function u(E){var S=[".left",".top",".right",".bottom"];if(!(this instanceof u))return new u(E,S);this._maxEntries=Math.max(4,E||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}u.prototype={all:function(){return this._all(this.data,[])},search:function(E){var S=this.data,C=[],P=this.toBBox;if(!x(E,S))return C;for(var R=[],A,M,O,F;S;){for(A=0,M=S.children.length;A<M;A++)O=S.children[A],F=S.leaf?P(O):O,x(E,F)&&(S.leaf?C.push(O):p(E,F)?this._all(O,C):R.push(O));S=R.pop()}return C},collides:function(E){var S=this.data,C=this.toBBox;if(!x(E,S))return!1;for(var P=[],R,A,M,O;S;){for(R=0,A=S.children.length;R<A;R++)if(M=S.children[R],O=S.leaf?C(M):M,x(E,O)){if(S.leaf||p(E,O))return!0;P.push(M)}S=P.pop()}return!1},load:function(E){if(!(E&&E.length))return this;if(E.length<this._minEntries){for(var S=0,C=E.length;S<C;S++)this.insert(E[S]);return this}var P=this._build(E.slice(),0,E.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var R=this.data;this.data=P,P=R}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(E){return E&&this._insert(E,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(E,S){if(!E)return this;for(var C=this.data,P=this.toBBox(E),R=[],A=[],M,O,F,I;C||R.length;){if(C||(C=R.pop(),O=R[R.length-1],M=A.pop(),I=!0),C.leaf&&(F=n(E,C.children,S),F!==-1))return C.children.splice(F,1),R.push(C),this._condense(R),this;!I&&!C.leaf&&p(C,P)?(R.push(C),A.push(M),M=0,O=C,C=C.children[0]):O?(M++,C=O.children[M],I=!1):C=null}return this},toBBox:function(E){return E},compareMinX:h,compareMinY:d,toJSON:function(){return this.data},fromJSON:function(E){return this.data=E,this},_all:function(E,S){for(var C=[];E;)E.leaf?S.push.apply(S,E.children):C.push.apply(C,E.children),E=C.pop();return S},_build:function(E,S,C,P){var R=C-S+1,A=this._maxEntries,M;if(R<=A)return M=y(E.slice(S,C+1)),a(M,this.toBBox),M;P||(P=Math.ceil(Math.log(R)/Math.log(A)),A=Math.ceil(R/Math.pow(A,P-1))),M=y([]),M.leaf=!1,M.height=P;var O=Math.ceil(R/A),F=O*Math.ceil(Math.sqrt(A)),I,B,V,U;for(T(E,S,C,F,this.compareMinX),I=S;I<=C;I+=F)for(V=Math.min(I+F-1,C),T(E,I,V,O,this.compareMinY),B=I;B<=V;B+=O)U=Math.min(B+O-1,V),M.children.push(this._build(E,B,U,P-1));return a(M,this.toBBox),M},_chooseSubtree:function(E,S,C,P){for(var R,A,M,O,F,I,B,V;P.push(S),!(S.leaf||P.length-1===C);){for(B=V=1/0,R=0,A=S.children.length;R<A;R++)M=S.children[R],F=l(M),I=c(E,M)-F,I<V?(V=I,B=F<B?F:B,O=M):I===V&&F<B&&(B=F,O=M);S=O||S.children[0]}return S},_insert:function(E,S,C){var P=this.toBBox,R=C?E:P(E),A=[],M=this._chooseSubtree(R,this.data,S,A);for(M.children.push(E),r(M,R);S>=0&&A[S].children.length>this._maxEntries;)this._split(A,S),S--;this._adjustParentBBoxes(R,A,S)},_split:function(E,S){var C=E[S],P=C.children.length,R=this._minEntries;this._chooseSplitAxis(C,R,P);var A=this._chooseSplitIndex(C,R,P),M=y(C.children.splice(A,C.children.length-A));M.height=C.height,M.leaf=C.leaf,a(C,this.toBBox),a(M,this.toBBox),S?E[S-1].children.push(M):this._splitRoot(C,M)},_splitRoot:function(E,S){this.data=y([E,S]),this.data.height=E.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(E,S,C){var P,R,A,M,O,F,I,B;for(F=I=1/0,P=S;P<=C-S;P++)R=o(E,0,P,this.toBBox),A=o(E,P,C,this.toBBox),M=g(R,A),O=l(R)+l(A),M<F?(F=M,B=P,I=O<I?O:I):M===F&&O<I&&(I=O,B=P);return B},_chooseSplitAxis:function(E,S,C){var P=E.leaf?this.compareMinX:h,R=E.leaf?this.compareMinY:d,A=this._allDistMargin(E,S,C,P),M=this._allDistMargin(E,S,C,R);A<M&&E.children.sort(P)},_allDistMargin:function(E,S,C,P){E.children.sort(P);var R=this.toBBox,A=o(E,0,S,R),M=o(E,C-S,C,R),O=f(A)+f(M),F,I;for(F=S;F<C-S;F++)I=E.children[F],r(A,E.leaf?R(I):I),O+=f(A);for(F=C-S-1;F>=S;F--)I=E.children[F],r(M,E.leaf?R(I):I),O+=f(M);return O},_adjustParentBBoxes:function(E,S,C){for(var P=C;P>=0;P--)r(S[P],E)},_condense:function(E){for(var S=E.length-1,C;S>=0;S--)E[S].children.length===0?S>0?(C=E[S-1].children,C.splice(C.indexOf(E[S]),1)):this.clear():a(E[S],this.toBBox)},compareMinX:function(E,S){return E.left-S.left},compareMinY:function(E,S){return E.top-S.top},toBBox:function(E){return{minX:E.left,minY:E.top,maxX:E.right,maxY:E.bottom}}};function n(E,S,C){if(!C)return S.indexOf(E);for(var P=0;P<S.length;P++)if(C(E,S[P]))return P;return-1}function a(E,S){o(E,0,E.children.length,S,E)}function o(E,S,C,P,R){R||(R=y(null)),R.minX=1/0,R.minY=1/0,R.maxX=-1/0,R.maxY=-1/0;for(var A=S,M;A<C;A++)M=E.children[A],r(R,E.leaf?P(M):M);return R}function r(E,S){return E.minX=Math.min(E.minX,S.minX),E.minY=Math.min(E.minY,S.minY),E.maxX=Math.max(E.maxX,S.maxX),E.maxY=Math.max(E.maxY,S.maxY),E}function h(E,S){return E.minX-S.minX}function d(E,S){return E.minY-S.minY}function l(E){return(E.maxX-E.minX)*(E.maxY-E.minY)}function f(E){return E.maxX-E.minX+(E.maxY-E.minY)}function c(E,S){return(Math.max(S.maxX,E.maxX)-Math.min(S.minX,E.minX))*(Math.max(S.maxY,E.maxY)-Math.min(S.minY,E.minY))}function g(E,S){var C=Math.max(E.minX,S.minX),P=Math.max(E.minY,S.minY),R=Math.min(E.maxX,S.maxX),A=Math.min(E.maxY,S.maxY);return Math.max(0,R-C)*Math.max(0,A-P)}function p(E,S){return E.minX<=S.minX&&E.minY<=S.minY&&S.maxX<=E.maxX&&S.maxY<=E.maxY}function x(E,S){return S.minX<=E.maxX&&S.minY<=E.maxY&&S.maxX>=E.minX&&S.maxY>=E.minY}function y(E){return{children:E,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function T(E,S,C,P,R){for(var A=[S,C],M;A.length;)C=A.pop(),S=A.pop(),!(C-S<=P)&&(M=S+Math.ceil((C-S)/P/2)*P,s(E,M,S,C,R),A.push(S,M,M,C))}e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(533),u=t(535),n=t(248),a=function(o,r,h,d,l,f,c){var g=d.left,p=d.top,x=d.right,y=d.bottom,T=h.faceLeft||h.faceRight,E=h.faceTop||h.faceBottom;if(c||(T=!0,E=!0),!T&&!E)return!1;var S=0,C=0,P=0,R=1;if(r.deltaAbsX()>r.deltaAbsY()?P=-1:r.deltaAbsX()<r.deltaAbsY()&&(R=-1),r.deltaX()!==0&&r.deltaY()!==0&&T&&E&&(P=Math.min(Math.abs(r.position.x-x),Math.abs(r.right-g)),R=Math.min(Math.abs(r.position.y-y),Math.abs(r.bottom-p))),P<R){if(T&&(S=s(r,h,g,x,f,c),S!==0&&!n(d,r)))return!0;E&&(C=u(r,h,p,y,f,c))}else{if(E&&(C=u(r,h,p,y,f,c),C!==0&&!n(d,r)))return!0;T&&(S=s(r,h,g,x,f,c))}return S!==0||C!==0};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(534),u=function(n,a,o,r,h,d){var l=0,f=a.faceLeft,c=a.faceRight,g=a.collideLeft,p=a.collideRight;return d||(f=!0,c=!0,g=!0,p=!0),n.deltaX()<0&&p&&n.checkCollision.left?c&&n.x<r&&(l=n.x-r,l<-h&&(l=0)):n.deltaX()>0&&g&&n.checkCollision.right&&f&&n.right>o&&(l=n.right-o,l>h&&(l=0)),l!==0&&(n.customSeparateX?n.overlapX=l:s(n,l)),l};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u<0?(s.blocked.none=!1,s.blocked.left=!0):u>0&&(s.blocked.none=!1,s.blocked.right=!0),s.position.x-=u,s.bounce.x===0?s.velocity.x=0:s.velocity.x=-s.velocity.x*s.bounce.x};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(536),u=function(n,a,o,r,h,d){var l=0,f=a.faceTop,c=a.faceBottom,g=a.collideUp,p=a.collideDown;return d||(f=!0,c=!0,g=!0,p=!0),n.deltaY()<0&&p&&n.checkCollision.up?c&&n.y<r&&(l=n.y-r,l<-h&&(l=0)):n.deltaY()>0&&g&&n.checkCollision.down&&f&&n.bottom>o&&(l=n.bottom-o,l>h&&(l=0)),l!==0&&(n.customSeparateY?n.overlapY=l:s(n,l)),l};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u<0?(s.blocked.none=!1,s.blocked.up=!0):u>0&&(s.blocked.none=!1,s.blocked.down=!0),s.position.y-=u,s.bounce.y===0?s.velocity.y=0:s.velocity.y=-s.velocity.y*s.bounce.y};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(246),u=t(1389),n=function(a,o,r,h){var d=s(a,o,r,h),l=a.immovable,f=o.immovable;if(r||d===0||l&&f||a.customSeparateX||o.customSeparateX)return d!==0||a.embedded&&o.embedded;var c=u.Set(a,o,d);return!l&&!f?c>0?!0:u.Check():(l?u.RunImmovableBody1(c):f&&u.RunImmovableBody2(c),!0)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(247),u=t(1390),n=function(a,o,r,h){var d=s(a,o,r,h),l=a.immovable,f=o.immovable;if(r||d===0||l&&f||a.customSeparateY||o.customSeparateY)return d!==0||a.embedded&&o.embedded;var c=u.Set(a,o,d);return!l&&!f?c>0?!0:u.Check():(l?u.RunImmovableBody1(c):f&&u.RunImmovableBody2(c),!0)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=t(0),n=t(62),a=t(57),o=t(3),r=new u({initialize:function(d,l){var f=l.displayWidth?l.displayWidth:64,c=l.displayHeight?l.displayHeight:64;this.world=d,this.gameObject=l,this.debugShowBody=d.defaults.debugShowStaticBody,this.debugBodyColor=d.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(l.x-f*l.originX,l.y-c*l.originY),this.width=f,this.height=c,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=o.ZERO,this.allowGravity=!1,this.gravity=o.ZERO,this.bounce=o.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=n.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(h,d){return h&&h!==this.gameObject&&(this.gameObject.body=null,h.body=this,this.gameObject=h),d&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var h=this.gameObject;return h.getTopLeft(this.position),this.width=h.displayWidth,this.height=h.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(h,d){return d===void 0&&(d=h),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(h,d),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(h,d,l){l===void 0&&(l=!0);var f=this.gameObject;if(!h&&f.frame&&(h=f.frame.realWidth),!d&&f.frame&&(d=f.frame.realHeight),this.world.staticTree.remove(this),this.width=h,this.height=d,this.halfWidth=Math.floor(h/2),this.halfHeight=Math.floor(d/2),l&&f.getCenter){var c=f.displayWidth/2,g=f.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(c-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(h,d,l){return d===void 0&&(d=this.offset.x),l===void 0&&(l=this.offset.y),h>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=h,this.width=h*2,this.height=h*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(d,l),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(h,d){var l=this.gameObject;h===void 0&&(h=l.x),d===void 0&&(d=l.y),this.world.staticTree.remove(this),l.setPosition(h,d),l.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(h){return h.x=this.x,h.y=this.y,h.right=this.right,h.bottom=this.bottom,h},hitTest:function(h,d){return this.isCircle?s(this,h,d):a(this,h,d)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(h){var d=this.position,l=d.x+this.halfWidth,f=d.y+this.halfHeight;this.debugShowBody&&(h.lineStyle(h.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?h.strokeCircle(l,f,this.width/2):h.strokeRect(d.x,d.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(h){return h<=0&&(h=.1),this.mass=h,this},x:{get:function(){return this.position.x},set:function(h){this.world.staticTree.remove(this),this.position.x=h,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(h){this.world.staticTree.remove(this),this.position.y=h,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=r},function(e,v,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=t(0),u=new s({initialize:function(a){this.pluginManager=a,this.game=a.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=new s,n=function(a,o,r,h){var d=r.tilemapLayer,l=d.cullPaddingX,f=d.cullPaddingY,c=d.tilemap.tileToWorldXY(a,o,u,h,d);return c.x>h.worldView.x+d.scaleX*r.tileWidth*(-l-.5)&&c.x<h.worldView.right+d.scaleX*r.tileWidth*(l-.5)&&c.y>h.worldView.y+d.scaleY*r.tileHeight*(-f-1)&&c.y<h.worldView.bottom+d.scaleY*r.tileHeight*(f-.5)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,o,r,h,d,l){for(var f=s(o,r,h,d,null,l),c=0;c<f.length;c++)f[c]&&f[c].index===n&&(f[c].index=a)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(139),n=t(76),a=new s,o=function(r,h){var d=r.tilemapLayer.tilemap,l=r.tilemapLayer,f=Math.floor(d.tileWidth*l.scaleX),c=Math.floor(d.tileHeight*l.scaleY),g=n(h.worldView.x-l.x,f,0,!0)-l.cullPaddingX,p=u(h.worldView.right-l.x,f,0,!0)+l.cullPaddingX,x=n(h.worldView.y-l.y,c,0,!0)-l.cullPaddingY,y=u(h.worldView.bottom-l.y,c,0,!0)+l.cullPaddingY;return a.setTo(g,x,p-g,y-x)};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(543),u=t(159),n=function(a,o,r,h){r===void 0&&(r=[]),h===void 0&&(h=0),r.length=0;var d=a.tilemapLayer,l=s(a,o);return(d.skipCull||d.scrollFactorX!==1||d.scrollFactorY!==1)&&(l.left=0,l.right=a.width,l.top=0,l.bottom=a.height),u(a,l,h,r),r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(546),u=t(159),n=function(a,o,r,h){r===void 0&&(r=[]),h===void 0&&(h=0),r.length=0;var d=a.tilemapLayer;if(!d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1){var l=s(a,o);u(a,l,h,r)}return r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(139),u=t(76),n=function(a,o){var r=a.tilemapLayer.tilemap,h=a.tilemapLayer,d=Math.floor(r.tileWidth*h.scaleX),l=Math.floor(r.tileHeight*h.scaleY),f=a.hexSideLength,c=(l-f)/2+f,g=u(o.worldView.x-h.x,d,0,!0)-h.cullPaddingX,p=s(o.worldView.right-h.x,d,0,!0)+h.cullPaddingX,x=u(o.worldView.y-h.y,c,0,!0)-h.cullPaddingY,y=s(o.worldView.bottom-h.y,c,0,!0)+h.cullPaddingY;return{left:g,right:p,top:x,bottom:y}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(541),u=function(n,a,o,r){o===void 0&&(o=[]),r===void 0&&(r=0),o.length=0;var h=n.tilemapLayer,d=n.data,l=n.width,f=n.height,c=0,g=l,p=0,x=f;if(!h.skipCull){var y,T,E;if(r===0){for(T=p;T<x;T++)for(y=c;d[T]&&y<g;y++)if(s(y,T,n,a)){if(E=d[T][y],!E||E.index===-1||!E.visible||E.alpha===0)continue;o.push(E)}}else if(r===1){for(T=p;T<x;T++)for(y=g;d[T]&&y>=c;y--)if(s(y,T,n,a)){if(E=d[T][y],!E||E.index===-1||!E.visible||E.alpha===0)continue;o.push(E)}}else if(r===2){for(T=x;T>=p;T--)for(y=c;d[T]&&y<g;y++)if(s(y,T,n,a)){if(E=d[T][y],!E||E.index===-1||!E.visible||E.alpha===0)continue;o.push(E)}}else if(r===3){for(T=x;T>=p;T--)for(y=g;d[T]&&y>=c;y--)if(s(y,T,n,a)){if(E=d[T][y],!E||E.index===-1||!E.visible||E.alpha===0)continue;o.push(E)}}}return h.tilesDrawn=o.length,h.tilesTotal=l*f,o};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(549),u=t(159),n=function(a,o,r,h){r===void 0&&(r=[]),h===void 0&&(h=0),r.length=0;var d=a.tilemapLayer;if(!d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1){var l=s(a,o);u(a,l,h,r)}return r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(139),u=t(76),n=function(a,o){var r=a.tilemapLayer.tilemap,h=a.tilemapLayer,d=Math.floor(r.tileWidth*h.scaleX),l=Math.floor(r.tileHeight*h.scaleY),f=u(o.worldView.x-h.x,d,0,!0)-h.cullPaddingX,c=s(o.worldView.right-h.x,d,0,!0)+h.cullPaddingX,g=u(o.worldView.y-h.y,l/2,0,!0)-h.cullPaddingY,p=s(o.worldView.bottom-h.y,l/2,0,!0)+h.cullPaddingY;return{left:f,right:c,top:g,bottom:p}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,o,r,h){o||(o=new s);var d=h.baseTileWidth,l=h.baseTileHeight,f=h.tilemapLayer,c=0,g=0;f&&(r||(r=f.scene.cameras.main),c=f.x+r.scrollX*(1-f.scrollFactorX),d*=f.scaleX,g=f.y+r.scrollY*(1-f.scrollFactorY),l*=f.scaleY);var p=h.hexSideLength,x=(l-p)/2+p,y=c+n*d+a%2*(d/2),T=g+a*x;return o.set(y,T)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,o,r,h){o||(o=new s);var d=h.baseTileWidth,l=h.baseTileHeight,f=h.tilemapLayer,c=0,g=0;f&&(r||(r=f.scene.cameras.main),c=f.x+r.scrollX*(1-f.scrollFactorX),d*=f.scaleX,g=f.y+r.scrollY*(1-f.scrollFactorY),l*=f.scaleY);var p=c+(n-a)*(d/2),x=g+(n+a)*(l/2);return o.set(p,x)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,o,r,h){o||(o=new s);var d=h.baseTileWidth,l=h.baseTileHeight,f=h.tilemapLayer,c=0,g=0;f&&(r||(r=f.scene.cameras.main),c=f.x+r.scrollX*(1-f.scrollFactorX),d*=f.scaleX,g=f.y+r.scrollY*(1-f.scrollFactorY),l*=f.scaleY);var p=c+n*d+a%2*(d/2),x=g+a*(l/2);return o.set(p,x)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(253),u=t(254),n=t(3),a=function(o,r,h,d,l){return h||(h=new n(0,0)),h.x=s(o,d,l),h.y=u(r,d,l),h};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n.baseTileHeight,o=n.tilemapLayer,r=0;o&&(u===void 0&&(u=o.scene.cameras.main),r=o.y+u.scrollY*(1-o.scrollFactorY),a*=o.scaleY);var h=o.tilemap.hexSideLength,d=(a-h)/2+h;return r+s*d};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=n.baseTileHeight,o=n.tilemapLayer,r=0;return o&&(u===void 0&&(u=o.scene.cameras.main),r=o.y+u.scrollY*(1-o.scrollFactorY),a*=o.scaleY),r+s*(a/2)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,o,r,h,d){r||(r=new s);var l=d.baseTileWidth,f=d.baseTileHeight,c=d.tilemapLayer;c&&(h||(h=c.scene.cameras.main),a=a-(c.y+h.scrollY*(1-c.scrollFactorY)),f*=c.scaleY,n=n-(c.x+h.scrollX*(1-c.scrollFactorX)),l*=c.scaleX);var g=d.hexSideLength,p=(f-g)/2+g,x=o?Math.floor(a/p):a/p,y=o?Math.floor((n-x%2*.5*l)/l):(n-x%2*.5*l)/l;return r.set(y,x)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,o,r,h,d){r||(r=new s);var l=d.baseTileWidth,f=d.baseTileHeight,c=d.tilemapLayer;c&&(h||(h=c.scene.cameras.main),a=a-(c.y+h.scrollY*(1-c.scrollFactorY)),f*=c.scaleY,n=n-(c.x+h.scrollX*(1-c.scrollFactorX)),l*=c.scaleX);var g=o?Math.floor((n/(l/2)+a/(f/2))/2):(n/(l/2)+a/(f/2))/2,p=o?Math.floor((a/(f/2)-n/(l/2))/2):(a/(f/2)-n/(l/2))/2;return r.set(g,p)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,o,r,h,d){r||(r=new s);var l=d.baseTileWidth,f=d.baseTileHeight,c=d.tilemapLayer;c&&(h||(h=c.scene.cameras.main),a=a-(c.y+h.scrollY*(1-c.scrollFactorY)),f*=c.scaleY,n=n-(c.x+h.scrollX*(1-c.scrollFactorX)),l*=c.scaleX);var g=o?Math.floor(a/(f/2)):a/(f/2),p=o?Math.floor((n+g%2*.5*l)/l):(n+g%2*.5*l)/l;return r.set(p,g)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(255),u=t(256),n=t(3),a=function(o,r,h,d,l,f){return h===void 0&&(h=!0),d||(d=new n(0,0)),d.x=s(o,h,l,f),d.y=u(r,h,l,f),d};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=a.baseTileHeight,r=a.tilemapLayer;r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),o*=r.scaleY);var h=a.hexSideLength,d=(o-h)/2+h;return u?Math.floor(s/d):s/d};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=a.baseTileHeight,r=a.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),o*=r.scaleY),u?Math.floor(s/(o/2)):s/(o/2)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(119),u=function(n,a,o){if(s(n,a,o)){var r=o.data[a][n];return r!==null&&r.index>-1}else return!1};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85),u=t(119),n=t(252),a=function(o,r,h,d,l){if(h===void 0&&(h=!0),d===void 0&&(d=!0),!u(o,r,l))return null;var f=l.data[r][o];if(f)l.data[r][o]=h?null:new s(l,-1,o,r,l.tileWidth,l.tileHeight);else return null;return d&&f&&f.collides&&n(o,r,l),f};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(259),n=t(565),a=t(566),o=t(577),r=function(h,d,l,f,c,g){var p;switch(d){case s.ARRAY_2D:p=u(h,l,f,c,g);break;case s.CSV:p=n(h,l,f,c,g);break;case s.TILED_JSON:p=a(h,l,g);break;case s.WELTMEISTER:p=o(h,l,g);break;default:console.warn("Unrecognized tilemap data format: "+d),p=null}return p};e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(259),n=function(a,o,r,h,d){var l=o.trim().split(`
`).map(function(c){return c.split(",")}),f=u(a,l,r,h,d);return f.format=s.CSV,f};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(567),u=t(568),n=t(29),a=t(40),o=t(258),r=t(121),h=t(569),d=t(570),l=t(573),f=t(575),c=function(g,p,x){var y=new r({width:p.width,height:p.height,name:g,tileWidth:p.tilewidth,tileHeight:p.tileheight,orientation:o(p.orientation),format:a.TILED_JSON,version:p.version,properties:p.properties,renderOrder:p.renderorder,infinite:p.infinite});y.orientation===n.HEXAGONAL&&(y.hexSideLength=p.hexsidelength),y.layers=l(p,x),y.images=h(p);var T=f(p);return y.tilesets=T.tilesets,y.imageCollections=T.imageCollections,y.objects=d(p),y.tiles=u(y),s(y),y};e.exports=c},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=function(n){for(var a,o,r,h,d,l=0;l<n.layers.length;l++){a=n.layers[l],h=null;for(var f=0;f<a.data.length;f++){d=a.data[f];for(var c=0;c<d.length;c++)o=d[c],!(o===null||o.index<0)&&(r=n.tiles[o.index][2],h=n.tilesets[r],o.width=h.tileWidth,o.height=h.tileHeight,h.tileProperties&&h.tileProperties[o.index-h.firstgid]&&(o.properties=s(o.properties,h.tileProperties[o.index-h.firstgid])))}}};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(122),u=function(n){var a,o,r=[];for(a=0;a<n.imageCollections.length;a++)for(var h=n.imageCollections[a],d=h.images,l=0;l<d.length;l++){var f=d[l];o=new s(f.image,f.gid,h.imageWidth,h.imageHeight,0,0),o.updateTileData(h.imageWidth,h.imageHeight),n.tilesets.push(o)}for(a=0;a<n.tilesets.length;a++){o=n.tilesets[a];for(var c=o.tileMargin,g=o.tileMargin,p=0,x=0,y=0,T=o.firstgid;T<o.firstgid+o.total&&(r[T]=[c,g,a],c+=o.tileWidth+o.tileSpacing,p++,!(p===o.total||(x++,x===o.columns&&(c=o.tileMargin,g+=o.tileHeight+o.tileSpacing,x=0,y++,y===o.rows))));T++);}return r};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=t(161),n=function(a){for(var o=[],r=[],h=u(a);h.i<h.layers.length||r.length>0;){if(h.i>=h.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=r.pop();continue}var d=h.layers[h.i];if(h.i++,d.type!=="imagelayer"){if(d.type==="group"){var l=u(a,d,h);r.push(h),h=l}continue}var f=s(d,"offsetx",0)+s(d,"startx",0),c=s(d,"offsety",0)+s(d,"starty",0);o.push({name:h.name+d.name,image:d.image,x:h.x+f+d.x,y:h.y+c+d.y,alpha:h.opacity*d.opacity,visible:h.visible&&d.visible,properties:s(d,"properties",{})})}return o};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=t(260),n=t(572),a=t(161),o=function(r){for(var h=[],d=[],l=a(r);l.i<l.layers.length||d.length>0;){if(l.i>=l.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=d.pop();continue}var f=l.layers[l.i];if(l.i++,f.opacity*=l.opacity,f.visible=l.visible&&f.visible,f.type!=="objectgroup"){if(f.type==="group"){var c=a(r,f,l);d.push(l),l=c}continue}f.name=l.name+f.name;for(var g=l.x+s(f,"startx",0)+s(f,"offsetx",0),p=l.y+s(f,"starty",0)+s(f,"offsety",0),x=[],y=0;y<f.objects.length;y++){var T=u(f.objects[y],g,p);x.push(T)}var E=new n(f);E.objects=x,h.push(E)}return h};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(126),u=function(n,a){for(var o={},r=0;r<a.length;r++){var h=a[r];s(n,h)&&(o[h]=n[h])}return o};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=new s({initialize:function(o){o===void 0&&(o={}),this.name=u(o,"name","object layer"),this.opacity=u(o,"opacity",1),this.properties=u(o,"properties",{}),this.propertyTypes=u(o,"propertytypes",{}),this.type=u(o,"type","objectgroup"),this.visible=u(o,"visible",!0),this.objects=u(o,"objects",[])}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(574),u=t(29),n=t(161),a=t(258),o=t(2),r=t(120),h=t(261),d=t(85),l=function(f,c){for(var g=o(f,"infinite",!1),p=[],x=[],y=n(f);y.i<y.layers.length||x.length>0;){if(y.i>=y.layers.length){if(x.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=x.pop();continue}var T=y.layers[y.i];if(y.i++,T.type!=="tilelayer"){if(T.type==="group"){var E=n(f,T,y);x.push(y),y=E}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var S=0;S<T.chunks.length;S++)T.chunks[S].data=s(T.chunks[S].data);T.data&&(T.data=s(T.data)),delete T.encoding}var C,P,R,A,M=[],O=0;if(g){var F=o(T,"startx",0)+T.x,I=o(T,"starty",0)+T.y;C=new r({name:y.name+T.name,x:y.x+o(T,"offsetx",0)+F*f.tilewidth,y:y.y+o(T,"offsety",0)+I*f.tileheight,width:T.width,height:T.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:o(T,"properties",[]),orientation:a(f.orientation)}),C.orientation===u.HEXAGONAL&&(C.hexSideLength=f.hexsidelength);for(var B=0;B<T.height;B++){M.push([null]);for(var V=0;V<T.width;V++)M[B][V]=null}for(B=0,X=T.chunks.length;B<X;B++)for(var U=T.chunks[B],Y=U.x-F,W=U.y-I,w=0,L=0,D=U.data.length;L<D;L++){var N=O+Y,G=w+W;P=h(U.data[L]),P.gid>0?(R=new d(C,P.gid,N,G,f.tilewidth,f.tileheight),R.rotation=P.rotation,R.flipX=P.flipped,M[G][N]=R):(A=c?null:new d(C,-1,N,G,f.tilewidth,f.tileheight),M[G][N]=A),O++,O===U.width&&(w++,O=0)}}else{C=new r({name:y.name+T.name,x:y.x+o(T,"offsetx",0)+T.x,y:y.y+o(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:o(T,"properties",[]),orientation:a(f.orientation)}),C.orientation===u.HEXAGONAL&&(C.hexSideLength=f.hexsidelength);for(var b=[],z=0,X=T.data.length;z<X;z++)P=h(T.data[z]),P.gid>0?(R=new d(C,P.gid,O,M.length,f.tilewidth,f.tileheight),R.rotation=P.rotation,R.flipX=P.flipped,b.push(R)):(A=c?null:new d(C,-1,O,M.length,f.tilewidth,f.tileheight),b.push(A)),O++,O===T.width&&(M.push(b),O=0,b=[])}C.data=M,p.push(C)}return p};e.exports=l},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=window.atob(s),n=u.length,a=new Array(n/4),o=0;o<n;o+=4)a[o/4]=(u.charCodeAt(o)|u.charCodeAt(o+1)<<8|u.charCodeAt(o+2)<<16|u.charCodeAt(o+3)<<24)>>>0;return a};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(122),u=t(576),n=t(260),a=t(1453),o=function(r){for(var h=[],d=[],l=null,f,c=0;c<r.tilesets.length;c++){var g=r.tilesets[c];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var p=new s(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(r.version>1){var x=void 0,y=void 0;if(Array.isArray(g.tiles)){x=x||{},y=y||{};for(var T=0;T<g.tiles.length;T++){var E=g.tiles[T];if(E.properties){var S={};E.properties.forEach(function(B){S[B.name]=B.value}),y[E.id]=S}if(E.objectgroup&&((x[E.id]||(x[E.id]={})).objectgroup=E.objectgroup,E.objectgroup.objects)){var C=E.objectgroup.objects.map(function(B){return n(B)});x[E.id].objectgroup.objects=C}E.animation&&((x[E.id]||(x[E.id]={})).animation=E.animation),E.type&&((x[E.id]||(x[E.id]={})).type=E.type)}}Array.isArray(g.wangsets)&&(x=x||{},y=y||{},a(g.wangsets,x)),x&&(p.tileData=x,p.tileProperties=y)}else if(g.tileproperties&&(p.tileProperties=g.tileproperties),g.tiles){p.tileData=g.tiles;for(f in p.tileData){var P=p.tileData[f].objectgroup;if(P&&P.objects){var R=P.objects.map(function(B){return n(B)});p.tileData[f].objectgroup.objects=R}}}p.updateTileData(g.imagewidth,g.imageheight),h.push(p)}else{var A=new u(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),M=0;for(T=0;T<g.tiles.length;T++){E=g.tiles[T];var O=E.image,F=parseInt(E.id,10),I=g.firstgid+F;A.addImage(I,O),M=Math.max(F,M)}A.maxId=M,d.push(A)}l&&(l.lastgid=g.firstgid-1),l=g}return{tilesets:h,imageCollections:d}};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a,o,r,h,d,l,f){(r===void 0||r<=0)&&(r=32),(h===void 0||h<=0)&&(h=32),d===void 0&&(d=0),l===void 0&&(l=0),this.name=a,this.firstgid=o|0,this.imageWidth=r|0,this.imageHeight=h|0,this.imageMargin=d|0,this.imageSpacing=l|0,this.properties=f||{},this.images=[],this.total=0},containsImageIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},addImage:function(n,a){return this.images.push({gid:n,image:a}),this.total++,this}});e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(121),n=t(578),a=t(579),o=function(r,h,d){if(h.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+r),null;for(var l=0,f=0,c=0;c<h.layer.length;c++)h.layer[c].width>l&&(l=h.layer[c].width),h.layer[c].height>f&&(f=h.layer[c].height);var g=new u({width:l,height:f,name:r,tileWidth:h.layer[0].tilesize,tileHeight:h.layer[0].tilesize,format:s.WELTMEISTER});return g.layers=n(h,d),g.tilesets=a(h),g};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(120),u=t(85),n=function(a,o){for(var r=[],h=0;h<a.layer.length;h++){for(var d=a.layer[h],l=new s({name:d.name,width:d.width,height:d.height,tileWidth:d.tilesize,tileHeight:d.tilesize,visible:d.visible===1}),f=[],c=[],g=0;g<d.data.length;g++){for(var p=0;p<d.data[g].length;p++){var x=d.data[g][p]-1,y;x>-1?y=new u(l,x,p,g,d.tilesize,d.tilesize):y=o?null:new u(l,-1,p,g,d.tilesize,d.tilesize),f.push(y)}c.push(f),f=[]}l.data=c,r.push(l)}return r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(122),u=function(n){for(var a=[],o=[],r=0;r<n.layer.length;r++){var h=n.layer[r],d=h.tilesetName;d!==""&&o.indexOf(d)===-1&&(o.push(d),a.push(new s(d,0,h.tilesize,h.tilesize,0,0)))}return a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(36),n=t(40),a=t(2),o=t(120),r=t(29),h=t(362),d=t(74),l=t(73),f=t(85),c=t(251),g=t(581),p=t(122),x=new s({initialize:function(T,E){this.scene=T,this.tileWidth=E.tileWidth,this.tileHeight=E.tileHeight,this.width=E.width,this.height=E.height,this.orientation=E.orientation,this.renderOrder=E.renderOrder,this.format=E.format,this.version=E.version,this.properties=E.properties,this.widthInPixels=E.widthInPixels,this.heightInPixels=E.heightInPixels,this.imageCollections=E.imageCollections,this.images=E.images,this.layers=E.layers,this.tilesets=E.tilesets,this.objects=E.objects,this.currentLayerIndex=0,this.hexSideLength=E.hexSideLength;var S=this.orientation;this._convert={WorldToTileXY:c.GetWorldToTileXYFunction(S),WorldToTileX:c.GetWorldToTileXFunction(S),WorldToTileY:c.GetWorldToTileYFunction(S),TileToWorldXY:c.GetTileToWorldXYFunction(S),TileToWorldX:c.GetTileToWorldXFunction(S),TileToWorldY:c.GetTileToWorldYFunction(S)}},createBlankDynamicLayer:function(y,T,E,S,C,P,R,A){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(y,T,E,S,C,P,R,A)},createDynamicLayer:function(y,T,E,S){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(y,T,E,S)},createStaticLayer:function(y,T,E,S){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(y,T,E,S)},setRenderOrder:function(y){var T=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=T[y]),T.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,T,E,S,C,P,R){if(y===void 0)return null;if(T==null&&(T=y),!this.scene.sys.textures.exists(T))return console.warn("Invalid Tileset Image: "+T),null;var A=this.scene.sys.textures.get(T),M=this.getTilesetIndex(y);if(M===null&&this.format===n.TILED_JSON)return console.warn("No data found for Tileset: "+y),null;var O=this.tilesets[M];return O?(O.setTileSize(E,S),O.setSpacing(C,P),O.setImage(A),O):(E===void 0&&(E=this.tileWidth),S===void 0&&(S=this.tileHeight),C===void 0&&(C=0),P===void 0&&(P=0),R===void 0&&(R=0),O=new p(y,R,E,S,C,P),O.setImage(A),this.tilesets.push(O),O)},copy:function(y,T,E,S,C,P,R,A){return A=this.getLayer(A),A!==null?(c.Copy(y,T,E,S,C,P,R,A),this):null},createBlankLayer:function(y,T,E,S,C,P,R,A){E===void 0&&(E=0),S===void 0&&(S=0),C===void 0&&(C=this.width),P===void 0&&(P=this.height),R===void 0&&(R=this.tileWidth),A===void 0&&(A=this.tileHeight);var M=this.getLayerIndex(y);if(M!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var O=new o({name:y,tileWidth:R,tileHeight:A,width:C,height:P,orientation:this.orientation}),F,I=0;I<P;I++){F=[];for(var B=0;B<C;B++)F.push(new f(O,-1,B,I,R,A,this.tileWidth,this.tileHeight));O.data.push(F)}this.layers.push(O),this.currentLayerIndex=this.layers.length-1;var V=new g(this.scene,this,this.currentLayerIndex,T,E,S);return V.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(V),V},createLayer:function(y,T,E,S){var C=this.getLayerIndex(y);if(C===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var P=this.layers[C];if(P.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=C,E===void 0&&(E=P.x),S===void 0&&(S=P.y);var R=new g(this.scene,this,C,T,E,S);return R.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(R),R},createFromObjects:function(y,T){var E=[],S=this.getObjectLayer(y);if(!S)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),E;Array.isArray(T)||(T=[T]);for(var C=S.objects,P=0;P<T.length;P++){for(var R=T[P],A=a(R,"id",null),M=a(R,"gid",null),O=a(R,"name",null),F,I=[],B=0;B<C.length;B++)F=C[B],(A===null&&M===null&&O===null||A!==null&&F.id===A||M!==null&&F.gid===M||O!==null&&F.name===O)&&I.push(F);for(var V=a(R,"classType",l),U=a(R,"scene",this.scene),Y=a(R,"container",null),W=a(R,"key",null),w=a(R,"frame",null),L=0;L<I.length;L++){F=I[L];var D=new V(U);D.setName(F.name),D.setPosition(F.x,F.y),D.setTexture(W,w),F.width&&(D.displayWidth=F.width),F.height&&(D.displayHeight=F.height);var N={x:D.originX*F.width,y:(D.originY-1)*F.height};if(F.rotation){var G=u(F.rotation);h(N,G),D.rotation=G}if(D.x+=N.x,D.y+=N.y,(F.flippedHorizontal!==void 0||F.flippedVertical!==void 0)&&D.setFlip(F.flippedHorizontal,F.flippedVertical),F.visible||(D.visible=!1),Array.isArray(F.properties))F.properties.forEach(function(z){var X=z.name;D[X]!==void 0?D[X]=z.value:D.setData(X,z.value)});else for(var b in F.properties)D[b]!==void 0?D[b]=F.properties[b]:D.setData(b,F.properties[b]);Y?Y.add(D):U.add.existing(D),E.push(D)}}return E},createFromTiles:function(y,T,E,S,C,P){return P=this.getLayer(P),P===null?null:c.CreateFromTiles(y,T,E,S,C,P)},fill:function(y,T,E,S,C,P,R){return P===void 0&&(P=!0),R=this.getLayer(R),R===null?null:(c.Fill(y,T,E,S,C,P,R),this)},filterObjects:function(y,T,E){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.filter(T,E)},filterTiles:function(y,T,E,S,C,P,R,A){return A=this.getLayer(A),A===null?null:c.FilterTiles(y,T,E,S,C,P,R,A)},findByIndex:function(y,T,E,S){return S=this.getLayer(S),S===null?null:c.FindByIndex(y,T,E,S)},findObject:function(y,T,E){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.find(T,E)||null},findTile:function(y,T,E,S,C,P,R,A){return A=this.getLayer(A),A===null?null:c.FindTile(y,T,E,S,C,P,R,A)},forEachTile:function(y,T,E,S,C,P,R,A){return A=this.getLayer(A),A===null?null:(c.ForEachTile(y,T,E,S,C,P,R,A),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,T){for(var E=0;E<y.length;E++)if(y[E].name===T)return E;return null},getLayer:function(y){var T=this.getLayerIndex(y);return T!==null?this.layers[T]:null},getObjectLayer:function(y){var T=this.getIndex(this.objects,y);return T!==null?this.objects[T]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof g?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,T,E,S){return S=this.getLayer(S),S===null?null:c.GetTileAt(y,T,E,S)},getTileAtWorldXY:function(y,T,E,S,C){return C=this.getLayer(C),C===null?null:c.GetTileAtWorldXY(y,T,E,S,C)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,T,E,S,C,P){return P=this.getLayer(P),P===null?null:c.GetTilesWithin(y,T,E,S,C,P)},getTilesWithinShape:function(y,T,E,S){return S=this.getLayer(S),S===null?null:c.GetTilesWithinShape(y,T,E,S)},getTilesWithinWorldXY:function(y,T,E,S,C,P,R){return R=this.getLayer(R),R===null?null:c.GetTilesWithinWorldXY(y,T,E,S,C,P,R)},getTileset:function(y){var T=this.getIndex(this.tilesets,y);return T!==null?this.tilesets[T]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,T,E){return E=this.getLayer(E),E===null?null:c.HasTileAt(y,T,E)},hasTileAtWorldXY:function(y,T,E,S){return S=this.getLayer(S),S===null?null:c.HasTileAtWorldXY(y,T,E,S)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,T,E,S,C){return S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:c.PutTileAt(y,T,E,S,C)},putTileAtWorldXY:function(y,T,E,S,C,P){return S===void 0&&(S=!0),P=this.getLayer(P),P===null?null:c.PutTileAtWorldXY(y,T,E,S,C,P)},putTilesAt:function(y,T,E,S,C){return S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:(c.PutTilesAt(y,T,E,S,C),this)},randomize:function(y,T,E,S,C,P){return P=this.getLayer(P),P===null?null:(c.Randomize(y,T,E,S,C,P),this)},calculateFacesAt:function(y,T,E){return E=this.getLayer(E),E===null?null:(c.CalculateFacesAt(y,T,E),this)},calculateFacesWithin:function(y,T,E,S,C){return C=this.getLayer(C),C===null?null:(c.CalculateFacesWithin(y,T,E,S,C),this)},removeLayer:function(y){var T=this.getLayerIndex(y);if(T!==null){d(this.layers,T);for(var E=T;E<this.layers.length;E++)this.layers[E].tilemapLayer&&this.layers[E].tilemapLayer.layerIndex--;return this.currentLayerIndex===T&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var T=this.getLayerIndex(y);return T!==null?(y=this.layers[T],y.destroy(),d(this.layers,T),this.currentLayerIndex===T&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,T=0;T<y.length;T++)y[T].tilemapLayer&&y[T].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,T,E){T===void 0&&(T=-1),E===void 0&&(E=!0);var S=[];Array.isArray(y)||(y=[y]);for(var C=0;C<y.length;C++){var P=y[C];S.push(this.removeTileAt(P.x,P.y,!0,E,P.tilemapLayer)),T>-1&&this.putTileAt(T,P.x,P.y,E,P.tilemapLayer)}return S},removeTileAt:function(y,T,E,S,C){return E===void 0&&(E=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:c.RemoveTileAt(y,T,E,S,C)},removeTileAtWorldXY:function(y,T,E,S,C,P){return E===void 0&&(E=!0),S===void 0&&(S=!0),P=this.getLayer(P),P===null?null:c.RemoveTileAtWorldXY(y,T,E,S,C,P)},renderDebug:function(y,T,E){return E=this.getLayer(E),E===null?null:(this.orientation===r.ORTHOGONAL&&c.RenderDebug(y,T,E),this)},renderDebugFull:function(y,T){for(var E=this.layers,S=0;S<E.length;S++)c.RenderDebug(y,T,E[S]);return this},replaceByIndex:function(y,T,E,S,C,P,R){return R=this.getLayer(R),R===null?null:(c.ReplaceByIndex(y,T,E,S,C,P,R),this)},setCollision:function(y,T,E,S,C){return T===void 0&&(T=!0),E===void 0&&(E=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(c.SetCollision(y,T,E,S,C),this)},setCollisionBetween:function(y,T,E,S,C){return E===void 0&&(E=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:(c.SetCollisionBetween(y,T,E,S,C),this)},setCollisionByProperty:function(y,T,E,S){return T===void 0&&(T=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(c.SetCollisionByProperty(y,T,E,S),this)},setCollisionByExclusion:function(y,T,E,S){return T===void 0&&(T=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(c.SetCollisionByExclusion(y,T,E,S),this)},setCollisionFromCollisionGroup:function(y,T,E){return y===void 0&&(y=!0),T===void 0&&(T=!0),E=this.getLayer(E),E===null?null:(c.SetCollisionFromCollisionGroup(y,T,E),this)},setTileIndexCallback:function(y,T,E,S){return S=this.getLayer(S),S===null?null:(c.SetTileIndexCallback(y,T,E,S),this)},setTileLocationCallback:function(y,T,E,S,C,P,R){return R=this.getLayer(R),R===null?null:(c.SetTileLocationCallback(y,T,E,S,C,P,R),this)},setLayer:function(y){var T=this.getLayerIndex(y);return T!==null&&(this.currentLayerIndex=T),this},setBaseTileSize:function(y,T){this.tileWidth=y,this.tileHeight=T,this.widthInPixels=this.width*y,this.heightInPixels=this.height*T;for(var E=0;E<this.layers.length;E++){this.layers[E].baseTileWidth=y,this.layers[E].baseTileHeight=T;for(var S=this.layers[E].data,C=this.layers[E].width,P=this.layers[E].height,R=0;R<P;R++)for(var A=0;A<C;A++){var M=S[R][A];M!==null&&M.setSize(void 0,void 0,y,T)}}return this},setLayerTileSize:function(y,T,E){if(E=this.getLayer(E),E===null)return this;E.tileWidth=y,E.tileHeight=T;for(var S=E.data,C=E.width,P=E.height,R=0;R<P;R++)for(var A=0;A<C;A++){var M=S[R][A];M!==null&&M.setSize(y,T)}return this},shuffle:function(y,T,E,S,C){return C=this.getLayer(C),C===null?null:(c.Shuffle(y,T,E,S,C),this)},swapByIndex:function(y,T,E,S,C,P,R){return R=this.getLayer(R),R===null?null:(c.SwapByIndex(y,T,E,S,C,P,R),this)},tileToWorldX:function(y,T,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldX(y,T,E)},tileToWorldY:function(y,T,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldY(y,T,E)},tileToWorldXY:function(y,T,E,S,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldXY(y,T,E,S,C)},weightedRandomize:function(y,T,E,S,C,P){return P=this.getLayer(P),P===null?null:(c.WeightedRandomize(T,E,S,C,y,P),this)},worldToTileX:function(y,T,E,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileX(y,T,E,S)},worldToTileY:function(y,T,E,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileY(y,T,E,S)},worldToTileXY:function(y,T,E,S,C,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileXY(y,T,E,S,C,P)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=x},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),a=t(251),o=t(1456),r=new s({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Origin,u.Pipeline,u.Transform,u.Visible,u.ScrollFactor,o],initialize:function(d,l,f,c,g,p){n.call(this,d,"TilemapLayer"),this.isTilemap=!0,this.tilemap=l,this.layerIndex=f,this.layer=l.layers[f],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(c),this.setAlpha(this.layer.alpha),this.setPosition(g,p),this.setOrigin(),this.setSize(l.tileWidth*this.layer.width,l.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(h){var d=[],l=[],f=this.tilemap;Array.isArray(h)||(h=[h]);for(var c=0;c<h.length;c++){var g=h[c];if(typeof g=="string"&&(g=f.getTileset(g)),g){l.push(g);for(var p=g.firstgid,x=0;x<g.total;x++)d[p+x]=g}}this.gidMap=d,this.tileset=l},setRenderOrder:function(h){var d=["right-down","left-down","right-up","left-up"];return typeof h=="string"&&(h=d.indexOf(h)),h>=0&&h<4&&(this._renderOrder=h),this},calculateFacesAt:function(h,d){return a.CalculateFacesAt(h,d,this.layer),this},calculateFacesWithin:function(h,d,l,f){return a.CalculateFacesWithin(h,d,l,f,this.layer),this},createFromTiles:function(h,d,l,f,c){return a.CreateFromTiles(h,d,l,f,c,this.layer)},cull:function(h){return this.cullCallback(this.layer,h,this.culledTiles,this._renderOrder)},copy:function(h,d,l,f,c,g,p){return a.Copy(h,d,l,f,c,g,p,this.layer),this},fill:function(h,d,l,f,c,g){return a.Fill(h,d,l,f,c,g,this.layer),this},filterTiles:function(h,d,l,f,c,g,p){return a.FilterTiles(h,d,l,f,c,g,p,this.layer)},findByIndex:function(h,d,l){return a.FindByIndex(h,d,l,this.layer)},findTile:function(h,d,l,f,c,g,p){return a.FindTile(h,d,l,f,c,g,p,this.layer)},forEachTile:function(h,d,l,f,c,g,p){return a.ForEachTile(h,d,l,f,c,g,p,this.layer),this},getTileAt:function(h,d,l){return a.GetTileAt(h,d,l,this.layer)},getTileAtWorldXY:function(h,d,l,f){return a.GetTileAtWorldXY(h,d,l,f,this.layer)},getTilesWithin:function(h,d,l,f,c){return a.GetTilesWithin(h,d,l,f,c,this.layer)},getTilesWithinShape:function(h,d,l){return a.GetTilesWithinShape(h,d,l,this.layer)},getTilesWithinWorldXY:function(h,d,l,f,c,g){return a.GetTilesWithinWorldXY(h,d,l,f,c,g,this.layer)},hasTileAt:function(h,d){return a.HasTileAt(h,d,this.layer)},hasTileAtWorldXY:function(h,d,l){return a.HasTileAtWorldXY(h,d,l,this.layer)},putTileAt:function(h,d,l,f){return a.PutTileAt(h,d,l,f,this.layer)},putTileAtWorldXY:function(h,d,l,f,c){return a.PutTileAtWorldXY(h,d,l,f,c,this.layer)},putTilesAt:function(h,d,l,f){return a.PutTilesAt(h,d,l,f,this.layer),this},randomize:function(h,d,l,f,c){return a.Randomize(h,d,l,f,c,this.layer),this},removeTileAt:function(h,d,l,f){return a.RemoveTileAt(h,d,l,f,this.layer)},removeTileAtWorldXY:function(h,d,l,f,c){return a.RemoveTileAtWorldXY(h,d,l,f,c,this.layer)},renderDebug:function(h,d){return a.RenderDebug(h,d,this.layer),this},replaceByIndex:function(h,d,l,f,c,g){return a.ReplaceByIndex(h,d,l,f,c,g,this.layer),this},setSkipCull:function(h){return h===void 0&&(h=!0),this.skipCull=h,this},setCullPadding:function(h,d){return h===void 0&&(h=1),d===void 0&&(d=1),this.cullPaddingX=h,this.cullPaddingY=d,this},setCollision:function(h,d,l,f){return a.SetCollision(h,d,l,this.layer,f),this},setCollisionBetween:function(h,d,l,f){return a.SetCollisionBetween(h,d,l,f,this.layer),this},setCollisionByProperty:function(h,d,l){return a.SetCollisionByProperty(h,d,l,this.layer),this},setCollisionByExclusion:function(h,d,l){return a.SetCollisionByExclusion(h,d,l,this.layer),this},setCollisionFromCollisionGroup:function(h,d){return a.SetCollisionFromCollisionGroup(h,d,this.layer),this},setTileIndexCallback:function(h,d,l){return a.SetTileIndexCallback(h,d,l,this.layer),this},setTileLocationCallback:function(h,d,l,f,c,g){return a.SetTileLocationCallback(h,d,l,f,c,g,this.layer),this},shuffle:function(h,d,l,f){return a.Shuffle(h,d,l,f,this.layer),this},swapByIndex:function(h,d,l,f,c,g){return a.SwapByIndex(h,d,l,f,c,g,this.layer),this},tileToWorldX:function(h,d){return this.tilemap.tileToWorldX(h,d,this)},tileToWorldY:function(h,d){return this.tilemap.tileToWorldY(h,d,this)},tileToWorldXY:function(h,d,l,f){return this.tilemap.tileToWorldXY(h,d,l,f,this)},weightedRandomize:function(h,d,l,f,c){return a.WeightedRandomize(d,l,f,c,h,this.layer),this},worldToTileX:function(h,d,l){return this.tilemap.worldToTileX(h,d,l,this)},worldToTileY:function(h,d,l){return this.tilemap.worldToTileY(h,d,l,this)},worldToTileXY:function(h,d,l,f,c){return this.tilemap.worldToTileXY(h,d,l,f,c,this)},destroy:function(h){h===void 0&&(h=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),h&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],n.prototype.destroy.call(this))}});e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=new s({initialize:function(o){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(o)},reset:function(a){return this.delay=u(a,"delay",0),this.repeat=u(a,"repeat",0),this.loop=u(a,"loop",!1),this.callback=u(a,"callback",void 0),this.callbackScope=u(a,"callbackScope",this.callback),this.args=u(a,"args",[]),this.timeScale=u(a,"timeScale",1),this.startAt=u(a,"startAt",0),this.paused=u(a,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var a=this.delay+this.delay*this.repeat,o=this.elapsed+this.delay*(this.repeat-this.repeatCount);return o/a}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(a){a===void 0&&(a=!1),this.elapsed=this.delay,this.hasDispatched=!a,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1465),u=function(n){var a,o=[];if(n.hasOwnProperty("props"))for(a in n.props)a.substr(0,1)!=="_"&&o.push({key:a,value:n.props[a]});else for(a in n)s.indexOf(a)===-1&&a.substr(0,1)!=="_"&&o.push({key:a,value:n[a]});return o};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=function(n){var a=s(n,"tweens",null);return a===null?[]:(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a]),a)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(265),u=t(13),n=t(99),a=t(80),o=t(162),r=t(6),h=t(264),d=t(266),l=t(268),f=function(c,g,p){p===void 0&&(p=s);var x=r(g,"from",0),y=r(g,"to",1),T=[{value:x}],E=o(g,"delay",p.delay),S=o(g,"duration",p.duration),C=r(g,"easeParams",p.easeParams),P=a(r(g,"ease",p.ease),C),R=o(g,"hold",p.hold),A=o(g,"repeat",p.repeat),M=o(g,"repeatDelay",p.repeatDelay),O=n(g,"yoyo",p.yoyo),F=[],I=h("value",y),B=l(T[0],0,"value",I.getEnd,I.getStart,I.getActive,P,E,S,O,R,A,M,!1,!1);B.start=x,B.current=x,B.to=y,F.push(B);var V=new d(c,F,T);V.offset=u(g,"offset",null),V.completeDelay=u(g,"completeDelay",0),V.loop=Math.round(u(g,"loop",0)),V.loopDelay=Math.round(u(g,"loopDelay",0)),V.paused=n(g,"paused",!1),V.useFrames=n(g,"useFrames",!1);for(var U=r(g,"callbackScope",V),Y=[V,null],W=d.TYPES,w=0;w<W.length;w++){var L=W[w],D=r(g,L,!1);if(D){var N=r(g,L+"Scope",U),G=r(g,L+"Params",[]);V.setCallback(L,D,Y.concat(G),N)}}return V};e.exports=f},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(80),u=t(6),n=t(14),a=function(o,r){r===void 0&&(r={});var h,d=u(r,"start",0),l=u(r,"ease",null),f=u(r,"grid",null),c=u(r,"from",0),g=c==="first",p=c==="center",x=c==="last",y=typeof c=="number",T=Array.isArray(o),E=parseFloat(T?o[0]:o),S=T?parseFloat(o[1]):0,C=Math.max(E,S);if(T&&(d+=E),f){var P=f[0],R=f[1],A=0,M=0,O=0,F=0,I=[];x?(A=P-1,M=R-1):y?(A=c%P,M=Math.floor(c/P)):p&&(A=(P-1)/2,M=(R-1)/2);for(var B=n.MIN_SAFE_INTEGER,V=0;V<R;V++){I[V]=[];for(var U=0;U<P;U++){O=A-U,F=M-V;var Y=Math.sqrt(O*O+F*F);Y>B&&(B=Y),I[V][U]=Y}}}var W=l?s(l):null;return f?h=function(w,L,D,N){var G=0,b=N%P,z=Math.floor(N/P);b>=0&&b<P&&z>=0&&z<R&&(G=I[z][b]);var X;if(T){var H=S-E;W?X=G/B*H*W(G/B):X=G/B*H}else W?X=G*E*W(G/B):X=G*E;return X+d}:h=function(w,L,D,N,G){G--;var b;g?b=N:p?b=Math.abs(G/2-N):x?b=G-N:y&&(b=Math.abs(c-N));var z;if(T){var X;p?X=(S-E)/G*(b*2):X=(S-E)/G*b,W?z=X*W(b/G):z=X}else W?z=G*C*W(b/G):z=b*E;return z+d},h};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=t(265),n=t(13),a=t(99),o=t(80),r=t(162),h=t(263),d=t(584),l=t(6),f=t(588),c=t(163),g=function(p,x){var y=new f(p);y.completeDelay=n(x,"completeDelay",0),y.loop=Math.round(n(x,"loop",0)),y.loopDelay=Math.round(n(x,"loopDelay",0)),y.paused=a(x,"paused",!1),y.useFrames=a(x,"useFrames",!1);var T=l(x,"callbackScope",y),E=[y],S=l(x,"onStart",!1);if(S){var C=l(x,"onStartScope",T),P=l(x,"onStartParams",[]);y.setCallback("onStart",S,E.concat(P),C)}var R=l(x,"onUpdate",!1);if(R){var A=l(x,"onUpdateScope",T),M=l(x,"onUpdateParams",[]);y.setCallback("onUpdate",R,E.concat(M),A)}var O=l(x,"onLoop",!1);if(O){var F=l(x,"onLoopScope",T),I=l(x,"onLoopParams",[]);y.setCallback("onLoop",O,E.concat(I),F)}var B=l(x,"onYoyo",!1);if(B){var V=l(x,"onYoyoScope",T),U=l(x,"onYoyoParams",[]);y.setCallback("onYoyo",B,E.concat(null,U),V)}var Y=l(x,"onComplete",!1);if(Y){var W=l(x,"onCompleteScope",T),w=l(x,"onCompleteParams",[]);y.setCallback("onComplete",Y,E.concat(w),W)}var L=d(x);if(L.length===0)return y.paused=!0,y;var D=s(u);D.targets=h(x);var N=n(x,"totalDuration",0);N>0?D.duration=Math.floor(N/L.length):D.duration=r(x,"duration",D.duration),D.delay=r(x,"delay",D.delay),D.easeParams=l(x,"easeParams",D.easeParams),D.ease=o(l(x,"ease",D.ease),D.easeParams),D.hold=r(x,"hold",D.hold),D.repeat=r(x,"repeat",D.repeat),D.repeatDelay=r(x,"repeatDelay",D.repeatDelay),D.yoyo=a(x,"yoyo",D.yoyo),D.flipX=a(x,"flipX",D.flipX),D.flipY=a(x,"flipY",D.flipY);for(var G=0;G<L.length;G++)y.queue(c(y,L[G],D));return y};e.exports=g},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(267),a=t(163),o=t(100),r=new s({Extends:u,initialize:function(d){u.call(this),this.manager=d,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=o.PENDING_ADD,this._pausedState=o.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(h,d){this.emit(h,this),d&&d.func.apply(d.scope,d.params)},setTimeScale:function(h){return this.timeScale=h,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===o.ACTIVE},add:function(h){return this.queue(a(this,h))},queue:function(h){return this.isPlaying()||(h.parent=this,h.parentIsTimeline=!0,this.data.push(h),this.totalData=this.data.length),this},hasOffset:function(h){return h.offset!==null},isOffsetAbsolute:function(h){return typeof h=="number"},isOffsetRelative:function(h){var d=typeof h;if(d==="string"){var l=h[0];if(l==="-"||l==="+")return!0}return!1},getRelativeOffset:function(h,d){var l=h[0],f=parseFloat(h.substr(2)),c=d;switch(l){case"+":c+=f;break;case"-":c-=f;break}return Math.max(0,c)},calcDuration:function(){for(var h=0,d=0,l=0,f=0;f<this.totalData;f++){var c=this.data[f];c.init(),this.hasOffset(c)?this.isOffsetAbsolute(c.offset)?(c.calculatedOffset=c.offset,c.offset===0&&(l=0)):this.isOffsetRelative(c.offset)&&(c.calculatedOffset=this.getRelativeOffset(c.offset,h)):c.calculatedOffset=l,h=c.totalDuration+c.calculatedOffset,d+=c.totalDuration,l+=c.totalDuration}this.duration=d,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=o.PAUSED,!1):!0},resetTweens:function(h){for(var d=0;d<this.totalData;d++){var l=this.data[d];l.play(h)}},setCallback:function(h,d,l,f){return r.TYPES.indexOf(h)!==-1&&(this.callbacks[h]={func:d,scope:f,params:l}),this},makeActive:function(h){return this.manager.makeActive(h)},play:function(){if(this.state!==o.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=o.ACTIVE;this.dispatchTimelineEvent(n.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=o.LOOP_DELAY):(this.state=o.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=o.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=o.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(h,d){if(this.state!==o.PAUSED){switch(this.useFrames&&(d=1*this.manager.timeScale),d*=this.timeScale,this.elapsed+=d,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=d,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case o.ACTIVE:for(var l=this.totalData,f=0;f<this.totalData;f++){var c=this.data[f];c.update(h,d)&&l--}this.dispatchTimelineEvent(n.TIMELINE_UPDATE,this.callbacks.onUpdate),l===0&&this.nextState();break;case o.LOOP_DELAY:this.countdown-=d,this.countdown<=0&&(this.state=o.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop));break;case o.COMPLETE_DELAY:this.countdown-=d,this.countdown<=0&&(this.state=o.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===o.PENDING_REMOVE}},stop:function(){this.state=o.PENDING_REMOVE},pause:function(){if(this.state!==o.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=o.PAUSED,this.emit(n.TIMELINE_PAUSE,this),this},resume:function(){return this.state===o.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(n.TIMELINE_RESUME,this)),this},hasTarget:function(h){for(var d=0;d<this.data.length;d++)if(this.data[d].hasTarget(h))return!0;return!1},destroy:function(){for(var h=0;h<this.data.length;h++)this.data[h].stop()}});r.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],e.exports=r},function(e,v,t){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(32),a=t(2),o=t(64),r={parseBody:function(h,d,l,f){f===void 0&&(f={});for(var c=a(l,"fixtures",[]),g=[],p=0;p<c.length;p++)for(var x=this.parseFixture(c[p]),y=0;y<x.length;y++)g.push(x[y]);var T=n.clone(l,!0);n.extend(T,f,!0),delete T.fixtures,delete T.type;var E=u.create(T);return u.setParts(E,g),u.setPosition(E,{x:h,y:d}),E},parseFixture:function(h){var d=n.extend({},!1,h);delete d.circle,delete d.vertices;var l;if(h.circle){var f=a(h.circle,"x"),c=a(h.circle,"y"),g=a(h.circle,"radius");l=[s.circle(f,c,g,d)]}else h.vertices&&(l=this.parseVertices(h.vertices,d));return l},parseVertices:function(h,d){d===void 0&&(d={});for(var l=[],f=0;f<h.length;f++)o.clockwiseSort(h[f]),l.push(u.create(n.extend({position:o.centre(h[f]),vertices:h[f]},d)));return s.flagCoincidentParts(l)}};e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n={parseBody:function(a,o,r,h){h===void 0&&(h={});var d,l=r.vertices;if(l.length===1)h.vertices=l[0],d=u.create(h),s.flagCoincidentParts(d.parts);else{for(var f=[],c=0;c<l.length;c++){var g=u.create({vertices:l[c]});f.push(g)}s.flagCoincidentParts(f),h.parts=f,d=u.create(h)}return d.label=r.label,u.setPosition(d,{x:a,y:o}),d}};e.exports=n},function(e,v,t){var s={};e.exports=s;var u=t(118),n=t(128),a=t(32),o=t(41),r=t(86);(function(){s.stack=function(h,d,l,f,c,g,p){for(var x=u.create({label:"Stack"}),y=h,T=d,E,S=0,C=0;C<f;C++){for(var P=0,R=0;R<l;R++){var A=p(y,T,R,C,E,S);if(A){var M=A.bounds.max.y-A.bounds.min.y,O=A.bounds.max.x-A.bounds.min.x;M>P&&(P=M),o.translate(A,{x:O*.5,y:M*.5}),y=A.bounds.max.x+c,u.addBody(x,A),E=A,S+=1}else y+=c}T+=P+g,y=h}return x},s.chain=function(h,d,l,f,c,g){for(var p=h.bodies,x=1;x<p.length;x++){var y=p[x-1],T=p[x],E=y.bounds.max.y-y.bounds.min.y,S=y.bounds.max.x-y.bounds.min.x,C=T.bounds.max.y-T.bounds.min.y,P=T.bounds.max.x-T.bounds.min.x,R={bodyA:y,pointA:{x:S*d,y:E*l},bodyB:T,pointB:{x:P*f,y:C*c}},A=a.extend(R,g);u.addConstraint(h,n.create(A))}return h.label+=" Chain",h},s.mesh=function(h,d,l,f,c){var g=h.bodies,p,x,y,T,E;for(p=0;p<l;p++){for(x=1;x<d;x++)y=g[x-1+p*d],T=g[x+p*d],u.addConstraint(h,n.create(a.extend({bodyA:y,bodyB:T},c)));if(p>0)for(x=0;x<d;x++)y=g[x+(p-1)*d],T=g[x+p*d],u.addConstraint(h,n.create(a.extend({bodyA:y,bodyB:T},c))),f&&x>0&&(E=g[x-1+(p-1)*d],u.addConstraint(h,n.create(a.extend({bodyA:E,bodyB:T},c)))),f&&x<d-1&&(E=g[x+1+(p-1)*d],u.addConstraint(h,n.create(a.extend({bodyA:E,bodyB:T},c))))}return h.label+=" Mesh",h},s.pyramid=function(h,d,l,f,c,g,p){return s.stack(h,d,l,f,c,g,function(x,y,T,E,S,C){var P=Math.min(f,Math.ceil(l/2)),R=S?S.bounds.max.x-S.bounds.min.x:0;if(!(E>P)){E=P-E;var A=E,M=l-1-E;if(!(T<A||T>M)){C===1&&o.translate(S,{x:(T+(l%2===1?1:-1))*R,y:0});var O=S?T*R:0;return p(h+O+T*c,y,T,E,S,C)}}})},s.newtonsCradle=function(h,d,l,f,c){for(var g=u.create({label:"Newtons Cradle"}),p=0;p<l;p++){var x=1.9,y=r.circle(h+p*(f*x),d+c,f,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=n.create({pointA:{x:h+p*(f*x),y:d},bodyB:y});u.addBody(g,y),u.addConstraint(g,T)}return g},s.car=function(h,d,l,f,c){var g=o.nextGroup(!0),p=20,x=-l*.5+p,y=l*.5-p,T=0,E=u.create({label:"Car"}),S=r.rectangle(h,d,l,f,{collisionFilter:{group:g},chamfer:{radius:f*.5},density:2e-4}),C=r.circle(h+x,d+T,c,{collisionFilter:{group:g},friction:.8}),P=r.circle(h+y,d+T,c,{collisionFilter:{group:g},friction:.8}),R=n.create({bodyB:S,pointB:{x,y:T},bodyA:C,stiffness:1,length:0}),A=n.create({bodyB:S,pointB:{x:y,y:T},bodyA:P,stiffness:1,length:0});return u.addBody(E,S),u.addBody(E,C),u.addBody(E,P),u.addConstraint(E,R),u.addConstraint(E,A),E},s.softBody=function(h,d,l,f,c,g,p,x,y,T){y=a.extend({inertia:1/0},y),T=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var E=s.stack(h,d,l,f,c,g,function(S,C){return r.circle(S,C,x,y)});return s.mesh(E,l,f,p,T),E.label="Soft Body",E}})()},function(e,v,t){var s={};e.exports=s,t(84);var u=t(32);(function(){s.pathToVertices=function(n,a){typeof window!="undefined"&&!("SVGPathSeg"in window)&&u.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,r,h,d,l,f,c,g,p,x,y=[],T,E,S=0,C=0,P=0;a=a||15;var R=function(M,O,F){var I=F%2===1&&F>1;if(!p||M!=p.x||O!=p.y){p&&I?(T=p.x,E=p.y):(T=0,E=0);var B={x:T+M,y:E+O};(I||!p)&&(p=B),y.push(B),C=T+M,P=E+O}},A=function(M){var O=M.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":C=M.x,P=M.y;break;case"H":C=M.x;break;case"V":P=M.y;break}R(C,P,M.pathSegType)}};for(s._svgPathToAbsolute(n),h=n.getTotalLength(),f=[],o=0;o<n.pathSegList.numberOfItems;o+=1)f.push(n.pathSegList.getItem(o));for(c=f.concat();S<h;){if(x=n.getPathSegAtLength(S),l=f[x],l!=g){for(;c.length&&c[0]!=l;)A(c.shift());g=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=n.getPointAtLength(S),R(d.x,d.y,0);break}S+=a}for(o=0,r=c.length;o<r;++o)A(c[o]);return y},s._svgPathToAbsolute=function(n){for(var a,o,r,h,d,l,f=n.pathSegList,c=0,g=0,p=f.numberOfItems,x=0;x<p;++x){var y=f.getItem(x),T=y.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in y&&(c=y.x),"y"in y&&(g=y.y);else switch("x1"in y&&(r=c+y.x1),"x2"in y&&(d=c+y.x2),"y1"in y&&(h=g+y.y1),"y2"in y&&(l=g+y.y2),"x"in y&&(c+=y.x),"y"in y&&(g+=y.y),T){case"m":f.replaceItem(n.createSVGPathSegMovetoAbs(c,g),x);break;case"l":f.replaceItem(n.createSVGPathSegLinetoAbs(c,g),x);break;case"h":f.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(c),x);break;case"v":f.replaceItem(n.createSVGPathSegLinetoVerticalAbs(g),x);break;case"c":f.replaceItem(n.createSVGPathSegCurvetoCubicAbs(c,g,r,h,d,l),x);break;case"s":f.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(c,g,d,l),x);break;case"q":f.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(c,g,r,h),x);break;case"t":f.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(c,g),x);break;case"a":f.replaceItem(n.createSVGPathSegArcAbs(c,g,y.r1,y.r2,y.angle,y.largeArcFlag,y.sweepFlag),x);break;case"z":case"Z":c=a,g=o;break}(T=="M"||T=="m")&&(a=c,o=g)}}})()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(0),a=t(249),o=t(9),r=t(2),h=t(126),d=t(64),l=new n({Extends:o,Mixins:[a.Bounce,a.Collision,a.Friction,a.Gravity,a.Mass,a.Sensor,a.Sleep,a.Static],initialize:function(c,g,p){o.call(this),this.tile=g,this.world=c,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var x=r(p,"body",null),y=r(p,"addToWorld",!0);if(x)this.setBody(x,y);else{var T=g.getCollisionGroup(),E=r(T,"objects",[]);E.length>0?this.setFromTileCollision(p):this.setFromTileRectangle(p)}},setFromTileRectangle:function(f){f===void 0&&(f={}),h(f,"isStatic")||(f.isStatic=!0),h(f,"addToWorld")||(f.addToWorld=!0);var c=this.tile.getBounds(),g=c.x+c.width/2,p=c.y+c.height/2,x=s.rectangle(g,p,c.width,c.height,f);return this.setBody(x,f.addToWorld),this},setFromTileCollision:function(f){f===void 0&&(f={}),h(f,"isStatic")||(f.isStatic=!0),h(f,"addToWorld")||(f.addToWorld=!0);for(var c=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,p=this.tile.getLeft(),x=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=r(y,"objects",[]),E=[],S=0;S<T.length;S++){var C=T[S],P=p+C.x*c,R=x+C.y*g,A=C.width*c,M=C.height*g,O=null;if(C.rectangle)O=s.rectangle(P+A/2,R+M/2,A,M,f);else if(C.ellipse)O=s.circle(P+A/2,R+M/2,A/2,f);else if(C.polygon||C.polyline){var F=C.polygon?C.polygon:C.polyline,I=F.map(function(U){return{x:U.x*c,y:U.y*g}}),B=d.create(I),V=d.centre(B);P+=V.x,R+=V.y,O=s.fromVertices(P,R,B,f)}O&&E.push(O)}return E.length===1?this.setBody(E[0],f.addToWorld):E.length>1&&(f.parts=E,this.setBody(u.create(f),f.addToWorld)),this},setBody:function(f,c){return c===void 0&&(c=!0),this.body&&this.removeBody(),this.body=f,this.body.gameObject=this,c&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});e.exports=l},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1399);s.Body=t(41),s.Composite=t(118),s.World=t(596),s.Detector=t(273),s.Grid=t(597),s.Pairs=t(598),s.Pair=t(250),s.Query=t(1400),s.Resolver=t(599),s.SAT=t(274),s.Constraint=t(128),s.Common=t(32),s.Engine=t(1401),s.Events=t(166),s.Sleeping=t(165),s.Plugin=t(595),s.Bodies=t(86),s.Composites=t(591),s.Axes=t(271),s.Bounds=t(84),s.Svg=t(592),s.Vector=t(83),s.Vertices=t(64),s.World.add=s.Composite.add,s.World.remove=s.Composite.remove,s.World.addComposite=s.Composite.addComposite,s.World.addBody=s.Composite.addBody,s.World.addConstraint=s.Composite.addConstraint,s.World.clear=s.Composite.clear,e.exports=s},function(e,v,t){var s={};e.exports=s;var u=t(32);(function(){s._registry={},s.register=function(n){if(s.isPlugin(n)||u.warn("Plugin.register:",s.toString(n),"does not implement all required fields."),n.name in s._registry){var a=s._registry[n.name],o=s.versionParse(n.version).number,r=s.versionParse(a.version).number;o>r?(u.warn("Plugin.register:",s.toString(a),"was upgraded to",s.toString(n)),s._registry[n.name]=n):o<r?u.warn("Plugin.register:",s.toString(a),"can not be downgraded to",s.toString(n)):n!==a&&u.warn("Plugin.register:",s.toString(n),"is already registered to different plugin object")}else s._registry[n.name]=n;return n},s.resolve=function(n){return s._registry[s.dependencyParse(n).name]},s.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},s.isPlugin=function(n){return n&&n.name&&n.version&&n.install},s.isUsed=function(n,a){return n.used.indexOf(a)>-1},s.isFor=function(n,a){var o=n.for&&s.dependencyParse(n.for);return!n.for||a.name===o.name&&s.versionSatisfies(a.version,o.range)},s.use=function(n,a){if(n.uses=(n.uses||[]).concat(a||[]),n.uses.length===0){u.warn("Plugin.use:",s.toString(n),"does not specify any dependencies to install.");return}for(var o=s.dependencies(n),r=u.topologicalSort(o),h=[],d=0;d<r.length;d+=1)if(r[d]!==n.name){var l=s.resolve(r[d]);if(!l){h.push("\u274C "+r[d]);continue}s.isUsed(n,l.name)||(s.isFor(l,n)||(u.warn("Plugin.use:",s.toString(l),"is for",l.for,"but installed on",s.toString(n)+"."),l._warned=!0),l.install?l.install(n):(u.warn("Plugin.use:",s.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(h.push("\u{1F536} "+s.toString(l)),delete l._warned):h.push("\u2705 "+s.toString(l)),n.used.push(l.name))}h.length>0&&!l.silent&&u.info(h.join("  "))},s.dependencies=function(n,a){var o=s.dependencyParse(n),r=o.name;if(a=a||{},!(r in a)){n=s.resolve(n)||n,a[r]=u.map(n.uses||[],function(d){s.isPlugin(d)&&s.register(d);var l=s.dependencyParse(d),f=s.resolve(d);return f&&!s.versionSatisfies(f.version,l.range)?(u.warn("Plugin.dependencies:",s.toString(f),"does not satisfy",s.toString(l),"used by",s.toString(o)+"."),f._warned=!0,n._warned=!0):f||(u.warn("Plugin.dependencies:",s.toString(d),"used by",s.toString(o),"could not be resolved."),n._warned=!0),l.name});for(var h=0;h<a[r].length;h+=1)s.dependencies(a[r][h],a);return a}},s.dependencyParse=function(n){if(u.isString(n)){var a=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return a.test(n)||u.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},s.versionParse=function(n){var a=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;a.test(n)||u.warn("Plugin.versionParse:",n,"is not a valid version or range.");var o=n.split("-");n=o[0];var r=isNaN(Number(n[0])),h=r?n.substr(1):n,d=u.map(h.split("."),function(l){return Number(l)});return{isRange:r,version:h,range:n,operator:r?n[0]:"",parts:d,prerelease:o[1],number:d[0]*1e8+d[1]*1e4+d[2]}},s.versionSatisfies=function(n,a){a=a||"*";var o=s.versionParse(a),r=o.parts,h=s.versionParse(n),d=h.parts;if(o.isRange){if(o.operator==="*"||n==="*")return!0;if(o.operator==="~")return d[0]===r[0]&&d[1]===r[1]&&d[2]>=r[2];if(o.operator==="^")return r[0]>0?d[0]===r[0]&&h.number>=o.number:r[1]>0?d[1]===r[1]&&d[2]>=r[2]:d[2]===r[2]}return n===a||n==="*"}})()},function(e,v,t){var s={};e.exports=s;var u=t(118);t(128);var n=t(32);(function(){s.create=function(a){var o=u.create(),r={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return n.extend(o,r,a)}})()},function(e,v,t){var s={};e.exports=s;var u=t(250),n=t(273),a=t(32);(function(){s.create=function(o){var r={controller:s,detector:n.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(r,o)},s.update=function(o,r,h,d){var l,f,c,g=h.world,p=o.buckets,x,y,T=!1,E=h.metrics;for(E.broadphaseTests=0,l=0;l<r.length;l++){var S=r[l];if(!(S.isSleeping&&!d)&&!(S.bounds.max.x<g.bounds.min.x||S.bounds.min.x>g.bounds.max.x||S.bounds.max.y<g.bounds.min.y||S.bounds.min.y>g.bounds.max.y)){var C=s._getRegion(o,S);if(!S.region||C.id!==S.region.id||d){E.broadphaseTests+=1,(!S.region||d)&&(S.region=C);var P=s._regionUnion(C,S.region);for(f=P.startCol;f<=P.endCol;f++)for(c=P.startRow;c<=P.endRow;c++){y=s._getBucketId(f,c),x=p[y];var R=f>=C.startCol&&f<=C.endCol&&c>=C.startRow&&c<=C.endRow,A=f>=S.region.startCol&&f<=S.region.endCol&&c>=S.region.startRow&&c<=S.region.endRow;!R&&A&&A&&x&&s._bucketRemoveBody(o,x,S),(S.region===C||R&&!A||d)&&(x||(x=s._createBucket(p,y)),s._bucketAddBody(o,x,S))}S.region=C,T=!0}}}T&&(o.pairsList=s._createActivePairsList(o))},s.clear=function(o){o.buckets={},o.pairs={},o.pairsList=[]},s._regionUnion=function(o,r){var h=Math.min(o.startCol,r.startCol),d=Math.max(o.endCol,r.endCol),l=Math.min(o.startRow,r.startRow),f=Math.max(o.endRow,r.endRow);return s._createRegion(h,d,l,f)},s._getRegion=function(o,r){var h=r.bounds,d=Math.floor(h.min.x/o.bucketWidth),l=Math.floor(h.max.x/o.bucketWidth),f=Math.floor(h.min.y/o.bucketHeight),c=Math.floor(h.max.y/o.bucketHeight);return s._createRegion(d,l,f,c)},s._createRegion=function(o,r,h,d){return{id:o+","+r+","+h+","+d,startCol:o,endCol:r,startRow:h,endRow:d}},s._getBucketId=function(o,r){return"C"+o+"R"+r},s._createBucket=function(o,r){var h=o[r]=[];return h},s._bucketAddBody=function(o,r,h){for(var d=0;d<r.length;d++){var l=r[d];if(!(h.id===l.id||h.isStatic&&l.isStatic)){var f=u.id(h,l),c=o.pairs[f];c?c[2]+=1:o.pairs[f]=[h,l,1]}}r.push(h)},s._bucketRemoveBody=function(o,r,h){r.splice(r.indexOf(h),1);for(var d=0;d<r.length;d++){var l=r[d],f=u.id(h,l),c=o.pairs[f];c&&(c[2]-=1)}},s._createActivePairsList=function(o){var r,h,d=[];r=a.keys(o.pairs);for(var l=0;l<r.length;l++)h=o.pairs[r[l]],h[2]>0?d.push(h):delete o.pairs[r[l]];return d}})()},function(e,v,t){var s={};e.exports=s;var u=t(250),n=t(32);(function(){s._pairMaxIdleLife=1e3,s.create=function(a){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},s.update=function(a,o,r){var h=a.list,d=a.table,l=a.collisionStart,f=a.collisionEnd,c=a.collisionActive,g,p,x,y;for(l.length=0,f.length=0,c.length=0,y=0;y<h.length;y++)h[y].confirmedActive=!1;for(y=0;y<o.length;y++)g=o[y],g.collided&&(p=u.id(g.bodyA,g.bodyB),x=d[p],x?(x.isActive?c.push(x):l.push(x),u.update(x,g,r),x.confirmedActive=!0):(x=u.create(g,r),d[p]=x,l.push(x),h.push(x)));for(y=0;y<h.length;y++)x=h[y],x.isActive&&!x.confirmedActive&&(u.setActive(x,!1,r),f.push(x))},s.removeOld=function(a,o){var r=a.list,h=a.table,d=[],l,f,c,g;for(g=0;g<r.length;g++){if(l=r[g],f=l.collision,f.bodyA.isSleeping||f.bodyB.isSleeping){l.timeUpdated=o;continue}o-l.timeUpdated>s._pairMaxIdleLife&&d.push(g)}for(g=0;g<d.length;g++)c=d[g]-g,l=r[c],delete h[l.id],r.splice(c,1)},s.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}})()},function(e,v,t){var s={};e.exports=s;var u=t(64),n=t(83),a=t(32),o=t(84);(function(){s._restingThresh=4,s._restingThreshTangent=6,s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s.preSolvePosition=function(r){var h,d,l;for(h=0;h<r.length;h++)d=r[h],d.isActive&&(l=d.activeContacts.length,d.collision.parentA.totalContacts+=l,d.collision.parentB.totalContacts+=l)},s.solvePosition=function(r,h,d){var l,f,c,g,p,x,y,T,E,S,C,P,R,A,M,O,F=d*s._positionDampen;for(l=0;l<h.length;l++){var I=h[l];I.previousPositionImpulse.x=I.positionImpulse.x,I.previousPositionImpulse.y=I.positionImpulse.y}for(l=0;l<r.length;l++)g=r[l],!(!g.isActive||g.isSensor)&&(p=g.collision,x=p.parentA,y=p.parentB,T=p.normal,C=x.previousPositionImpulse,P=y.previousPositionImpulse,S=p.penetration,A=P.x-C.x+S.x,M=P.y-C.y+S.y,f=T.x,c=T.y,E=f*A+c*M,g.separation=E,O=(E-g.slop)*F,(x.isStatic||y.isStatic)&&(O*=2),x.isStatic||x.isSleeping||(R=O/x.totalContacts,x.positionImpulse.x+=f*R,x.positionImpulse.y+=c*R),y.isStatic||y.isSleeping||(R=O/y.totalContacts,y.positionImpulse.x-=f*R,y.positionImpulse.y-=c*R))},s.postSolvePosition=function(r){for(var h=0;h<r.length;h++){var d=r[h];if(d.totalContacts=0,d.positionImpulse.x!==0||d.positionImpulse.y!==0){for(var l=0;l<d.parts.length;l++){var f=d.parts[l];u.translate(f.vertices,d.positionImpulse),o.update(f.bounds,f.vertices,d.velocity),f.position.x+=d.positionImpulse.x,f.position.y+=d.positionImpulse.y}d.positionPrev.x+=d.positionImpulse.x,d.positionPrev.y+=d.positionImpulse.y,n.dot(d.positionImpulse,d.velocity)<0?(d.positionImpulse.x=0,d.positionImpulse.y=0):(d.positionImpulse.x*=s._positionWarming,d.positionImpulse.y*=s._positionWarming)}}},s.preSolveVelocity=function(r){var h,d,l,f,c,g,p,x,y,T,E,S,C,P,R=n._temp[0],A=n._temp[1];for(h=0;h<r.length;h++)if(l=r[h],!(!l.isActive||l.isSensor))for(f=l.activeContacts,c=l.collision,g=c.parentA,p=c.parentB,x=c.normal,y=c.tangent,d=0;d<f.length;d++)T=f[d],E=T.vertex,S=T.normalImpulse,C=T.tangentImpulse,(S!==0||C!==0)&&(R.x=x.x*S+y.x*C,R.y=x.y*S+y.y*C,g.isStatic||g.isSleeping||(P=n.sub(E,g.position,A),g.positionPrev.x+=R.x*g.inverseMass,g.positionPrev.y+=R.y*g.inverseMass,g.anglePrev+=n.cross(P,R)*g.inverseInertia),p.isStatic||p.isSleeping||(P=n.sub(E,p.position,A),p.positionPrev.x-=R.x*p.inverseMass,p.positionPrev.y-=R.y*p.inverseMass,p.anglePrev-=n.cross(P,R)*p.inverseInertia))},s.solveVelocity=function(r,h){for(var d=h*h,l=n._temp[0],f=n._temp[1],c=n._temp[2],g=n._temp[3],p=n._temp[4],x=n._temp[5],y=0;y<r.length;y++){var T=r[y];if(!(!T.isActive||T.isSensor)){var E=T.collision,S=E.parentA,C=E.parentB,P=E.normal,R=E.tangent,A=T.activeContacts,M=1/A.length;S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,C.velocity.x=C.position.x-C.positionPrev.x,C.velocity.y=C.position.y-C.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,C.angularVelocity=C.angle-C.anglePrev;for(var O=0;O<A.length;O++){var F=A[O],I=F.vertex,B=n.sub(I,S.position,f),V=n.sub(I,C.position,c),U=n.add(S.velocity,n.mult(n.perp(B),S.angularVelocity),g),Y=n.add(C.velocity,n.mult(n.perp(V),C.angularVelocity),p),W=n.sub(U,Y,x),w=n.dot(P,W),L=n.dot(R,W),D=Math.abs(L),N=a.sign(L),G=(1+T.restitution)*w,b=a.clamp(T.separation+w,0,1)*s._frictionNormalMultiplier,z=L,X=1/0;D>T.friction*T.frictionStatic*b*d&&(X=D,z=a.clamp(T.friction*N*d,-X,X));var H=n.cross(B,P),$=n.cross(V,P),J=M/(S.inverseMass+C.inverseMass+S.inverseInertia*H*H+C.inverseInertia*$*$);if(G*=J,z*=J,w<0&&w*w>s._restingThresh*d)F.normalImpulse=0;else{var K=F.normalImpulse;F.normalImpulse=Math.min(F.normalImpulse+G,0),G=F.normalImpulse-K}if(L*L>s._restingThreshTangent*d)F.tangentImpulse=0;else{var Z=F.tangentImpulse;F.tangentImpulse=a.clamp(F.tangentImpulse+z,-X,X),z=F.tangentImpulse-Z}l.x=P.x*G+R.x*z,l.y=P.y*G+R.y*z,S.isStatic||S.isSleeping||(S.positionPrev.x+=l.x*S.inverseMass,S.positionPrev.y+=l.y*S.inverseMass,S.anglePrev+=n.cross(B,l)*S.inverseInertia),C.isStatic||C.isSleeping||(C.positionPrev.x-=l.x*C.inverseMass,C.positionPrev.y-=l.y*C.inverseMass,C.anglePrev-=n.cross(V,l)*C.inverseInertia)}}}}})()},function(e,v){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}e.exports=t},function(e,v,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(276),u=function(n,a,o,r){for(var h=n[0],d=1;d<n.length;d++){var l=n[d];s(l,h,a,o,r),h=l}return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,o,r,h){return s(n,"angle",a,o,r,h)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var a=0;a<s.length;a++){var o=s[a];u.call(n,o)}return s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){n===void 0&&(n=0);for(var a=n;a<s.length;a++){var o=s[a],r=!0;for(var h in u)o[h]!==u[h]&&(r=!1);if(r)return o}return null};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){n===void 0&&(n=0);for(var a=n;a<s.length;a++){var o=s[a],r=!0;for(var h in u)o[h]!==u[h]&&(r=!1);if(r)return o}return null};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(289),u=t(123),n=t(2),a=t(1),o=t(129),r=new o({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1),h=function(d,l){l===void 0&&(l={});var f=l.hasOwnProperty("width"),c=l.hasOwnProperty("height"),g=n(l,"width",-1),p=n(l,"height",-1),x=n(l,"cellWidth",1),y=n(l,"cellHeight",x),T=n(l,"position",u.TOP_LEFT),E=n(l,"x",0),S=n(l,"y",0),C=0,P=0,R=g*x,A=p*y;r.setPosition(E,S),r.setSize(x,y);for(var M=0;M<d.length;M++)if(s(d[M],r,T),f&&g===-1)r.x+=x;else if(c&&p===-1)r.y+=y;else if(c&&!f){if(P+=y,r.y+=y,P===A&&(P=0,C+=x,r.y=S,r.x+=x,C===R))break}else if(C+=x,r.x+=x,C===R&&(C=0,P+=y,r.x=E,r.y+=y,P===A))break;return d};e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=2,n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a,o,r,h){return a===void 0&&(a=1),o===void 0?this.alpha=a:(this._alphaTL=s(a,0,1),this._alphaTR=s(o,0,1),this._alphaBL=s(r,0,1),this._alphaBR=s(h,0,1)),this},alpha:{get:function(){return this._alpha},set:function(a){var o=s(a,0,1);this._alpha=o,this._alphaTL=o,this._alphaTR=o,this._alphaBL=o,this._alphaBR=o,o===0?this.renderFlags&=~u:this.renderFlags|=u}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(a){var o=s(a,0,1);this._alphaTL=o,o!==0&&(this.renderFlags|=u)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(a){var o=s(a,0,1);this._alphaTR=o,o!==0&&(this.renderFlags|=u)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(a){var o=s(a,0,1);this._alphaBL=o,o!==0&&(this.renderFlags|=u)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(a){var o=s(a,0,1);this._alphaBR=o,o!==0&&(this.renderFlags|=u)}}};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}},setSize:function(s,u){return this.width=s,this.height=u,this},setDisplaySize:function(s,u){return this.displayWidth=s,this.displayHeight=u,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={texture:null,frame:null,isCropped:!1,setCrop:function(s,u,n,a){if(s===void 0)this.isCropped=!1;else if(this.frame){if(typeof s=="number")this.frame.setCropUVs(this._crop,s,u,n,a,this.flipX,this.flipY);else{var o=s;this.frame.setCropUVs(this._crop,o.x,o.y,o.width,o.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(s){return this.flipX=s,this},setFlipY:function(s){return this.flipY=s,this},setFlip:function(s,u){return this.flipX=s,this.flipY=u,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(308),n=t(3),a={prepareBoundsOutput:function(o,r){if(r===void 0&&(r=!1),this.rotation!==0&&u(o,this.x,this.y,this.rotation),r&&this.parentContainer){var h=this.parentContainer.getBoundsTransformMatrix();h.transformPoint(o.x,o.y,o)}return o},getCenter:function(o){return o===void 0&&(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,o},getTopLeft:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,r)},getTopCenter:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,r)},getTopRight:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,r)},getLeftCenter:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,r)},getRightCenter:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,r)},getBottomLeft:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,r)},getBottomCenter:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,r)},getBottomRight:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,r)},getBounds:function(o){o===void 0&&(o=new s);var r,h,d,l,f,c,g,p;if(this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(o),x.transformPoint(o.x,o.y,o),r=o.x,h=o.y,this.getTopRight(o),x.transformPoint(o.x,o.y,o),d=o.x,l=o.y,this.getBottomLeft(o),x.transformPoint(o.x,o.y,o),f=o.x,c=o.y,this.getBottomRight(o),x.transformPoint(o.x,o.y,o),g=o.x,p=o.y}else this.getTopLeft(o),r=o.x,h=o.y,this.getTopRight(o),d=o.x,l=o.y,this.getBottomLeft(o),f=o.x,c=o.y,this.getBottomRight(o),g=o.x,p=o.y;return o.x=Math.min(r,d,f,g),o.y=Math.min(h,l,c,p),o.width=Math.max(r,d,f,g)-o.x,o.height=Math.max(h,l,c,p)-o.y,o}};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="blur"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextlost"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextrestored"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="focus"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="hidden"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="poststep"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prestep"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="step"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="visible"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(s){this._displayOriginX=s,this.originX=s/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(s){this._displayOriginY=s,this.originY=s/this.height}},setOrigin:function(s,u){return s===void 0&&(s=.5),u===void 0&&(u=s),this.originX=s,this.originY=u,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(s,u){return s===void 0&&(s=0),u===void 0&&(u=s),this.displayOriginX=s,this.displayOriginY=u,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36),u=t(99),n=t(6),a=t(100),o=t(3),r={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(h,d){d===void 0&&(d=this.pathConfig);var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this.path=h,d&&this.startFollow(d),this},setRotateToPath:function(h,d){return d===void 0&&(d=0),this.rotateToPath=h,this.pathRotationOffset=d,this},isFollowing:function(){var h=this.pathTween;return h&&h.isPlaying()},startFollow:function(h,d){h===void 0&&(h={}),d===void 0&&(d=0);var l=this.pathTween;l&&l.isPlaying()&&l.stop(),typeof h=="number"&&(h={duration:h}),h.from=n(h,"from",0),h.to=n(h,"to",1);var f=u(h,"positionOnPath",!1);this.rotateToPath=u(h,"rotateToPath",!1),this.pathRotationOffset=n(h,"rotationOffset",0);var c=n(h,"startAt",d);if(c&&(h.onStart=function(p){var x=p.data[0];x.progress=c,x.elapsed=x.duration*c;var y=x.ease(x.progress);x.current=x.start+(x.end-x.start)*y,x.target[x.key]=x.current}),this.pathOffset||(this.pathOffset=new o(this.x,this.y)),this.pathVector||(this.pathVector=new o),this.pathDelta||(this.pathDelta=new o),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(h),this.path.getStartPoint(this.pathOffset),f&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+s(this.pathRotationOffset)}return this.pathConfig=h,this},pauseFollow:function(){var h=this.pathTween;return h&&h.isPlaying()&&h.pause(),this},resumeFollow:function(){var h=this.pathTween;return h&&h.isPaused()&&h.resume(),this},stopFollow:function(){var h=this.pathTween;return h&&h.isPlaying()&&h.stop(),this},pathUpdate:function(){var h=this.pathTween;if(h){var d=h.data[0],l=this.pathDelta,f=this.pathVector;if(l.copy(f).negate(),d.state===a.COMPLETE){this.path.getPoint(1,f),l.add(f),f.add(this.pathOffset),this.setPosition(f.x,f.y);return}else if(d.state!==a.PLAYING_FORWARD&&d.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(h.getValue(),f),l.add(f),f.add(this.pathOffset);var c=this.x,g=this.y;this.setPosition(f.x,f.y);var p=this.x-c,x=this.y-g;if(p===0&&x===0)return;if(d.state!==this._prevDirection){this._prevDirection=d.state;return}this.rotateToPath&&(this.rotation=Math.atan2(x,p)+s(this.pathRotationOffset))}}};e.exports=r},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(s){this.scaleX=s/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(s){this.scaleY=s/this.frame.realHeight}},setSizeToFrame:function(s){return s===void 0&&(s=this.frame),this.width=s.realWidth,this.height=s.realHeight,this},setSize:function(s,u){return this.width=s,this.height=u,this},setDisplaySize:function(s,u){return this.displayWidth=s,this.displayHeight=u,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,s={texture:null,frame:null,isCropped:!1,setTexture:function(u,n){return this.texture=this.scene.sys.textures.get(u),this.setFrame(n)},setFrame:function(u,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,s={texture:null,frame:null,isCropped:!1,setCrop:function(u,n,a,o){if(u===void 0)this.isCropped=!1;else if(this.frame){if(typeof u=="number")this.frame.setCropUVs(this._crop,u,n,a,o,this.flipX,this.flipY);else{var r=u;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(u,n){return this.texture=this.scene.sys.textures.get(u),this.setFrame(n)},setFrame:function(u,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(s,u,n,a){return s===void 0&&(s=16777215),u===void 0&&(u=s,n=s,a=s),this.tintTopLeft=s,this.tintTopRight=u,this.tintBottomLeft=n,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function(s,u,n,a){return this.setTint(s,u,n,a),this.tintFill=!0,this},tint:{set:function(s){this.setTint(s,s,s,s)}},isTinted:{get:function(){var s=16777215;return this.tintFill||this.tintTopLeft!==s||this.tintTopRight!==s||this.tintBottomLeft!==s||this.tintBottomRight!==s}}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata-"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedata"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="setdata"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="created"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="error"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeked"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeking"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="timeout"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="create"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postupdate"},function(e,v){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleep"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioncomplete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioninit"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionout"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionstart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionwake"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wake"},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,o,r,h){return s(n,"alpha",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,o,r,h){return s(n,"x",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,o,r,h,d,l){return o==null&&(o=a),s(n,"x",a,r,d,l),s(n,"y",o,h,d,l)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,o,r,h){return s(n,"y",a,o,r,h)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n===void 0&&(n=0),a===void 0&&(a=6.28);for(var o=n,r=(a-n)/s.length,h=0;h<s.length;h++)s[h].x=u.x+u.radius*Math.cos(o),s[h].y=u.y+u.radius*Math.sin(o),o+=r;return s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n===void 0&&(n=0),a===void 0&&(a=6.28);for(var o=n,r=(a-n)/s.length,h=u.width/2,d=u.height/2,l=0;l<s.length;l++)s[l].x=u.x+h*Math.cos(o),s[l].y=u.y+d*Math.sin(o),o+=r;return s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(172),u=function(n,a){for(var o=s(a,n.length),r=0;r<n.length;r++){var h=n[r],d=o[r];h.x=d.x,h.y=d.y}return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(316),u=t(178),n=t(179),a=function(o,r,h){h===void 0&&(h=0);var d=s(r,!1,o.length);h>0?u(d,h):h<0&&n(d,Math.abs(h));for(var l=0;l<o.length;l++)o[l].x=d[l].x,o[l].y=d[l].y;return o};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(317),u=function(n,a,o){var r=s({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},o),h=s({x1:a.x2,y1:a.y2,x2:a.x3,y2:a.y3},o),d=s({x1:a.x3,y1:a.y3,x2:a.x1,y2:a.y1},o);r.pop(),h.pop(),d.pop(),r=r.concat(h,d);for(var l=r.length/n.length,f=0,c=0;c<n.length;c++){var g=n[c],p=r[Math.floor(f)];g.x=p.x,g.y=p.y,f+=l}return n};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var a=0;a<s.length;a++){var o=s[a];o.anims&&o.anims.play(u,n)}return s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(170),u=function(n,a){for(var o=0;o<n.length;o++)s(a,n[o]);return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(180),u=function(n,a){for(var o=0;o<n.length;o++)s(a,n[o]);return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(173),u=function(n,a){for(var o=0;o<n.length;o++)s(a,n[o]);return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(174),u=function(n,a){for(var o=0;o<n.length;o++)s(a,n[o]);return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(181),u=function(n,a){for(var o=0;o<n.length;o++)s(a,n[o]);return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,o,r,h){return s(n,"rotation",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(182),u=t(50),n=function(a,o,r){for(var h=o.x,d=o.y,l=0;l<a.length;l++){var f=a[l];s(f,h,d,r,Math.max(1,u(f.x,f.y,h,d)))}return a};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(182),u=function(n,a,o,r){var h=a.x,d=a.y;if(r===0)return n;for(var l=0;l<n.length;l++)s(n[l],h,d,o,r);return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,o,r,h){return s(n,"scaleX",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,o,r,h,d,l){return o==null&&(o=a),s(n,"scaleX",a,r,d,l),s(n,"scaleY",o,h,d,l)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,a,o,r,h){return s(n,"scaleY",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h){return s(n,"alpha",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r){return s(n,"blendMode",a,0,o,r)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h){return s(n,"depth",a,o,r,h)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var a=0;a<s.length;a++)s[a].setInteractive(u,n);return s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h,d,l){return o==null&&(o=a),s(n,"originX",a,r,d,l),s(n,"originY",o,h,d,l),n.forEach(function(f){f.updateDisplayOrigin()}),n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h){return s(n,"rotation",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h,d,l){return o==null&&(o=a),s(n,"scaleX",a,r,d,l),s(n,"scaleY",o,h,d,l)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h){return s(n,"scaleX",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h){return s(n,"scaleY",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h,d,l){return o==null&&(o=a),s(n,"scrollFactorX",a,r,d,l),s(n,"scrollFactorY",o,h,d,l)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h){return s(n,"scrollFactorX",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h){return s(n,"scrollFactorY",a,o,r,h)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o){for(var r=0;r<s.length;r++)s[r].setTint(u,n,a,o);return s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r){return s(n,"visible",a,0,o,r)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h){return s(n,"x",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h,d,l){return o==null&&(o=a),s(n,"x",a,r,d,l),s(n,"y",o,h,d,l)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,a,o,r,h){return s(n,"y",a,o,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,o,r,h){r===void 0&&(r=0),h===void 0&&(h=new s);var d,l;if(n.length>1){var f,c,g,p;if(r===0){var x=n.length-1;for(d=n[x].x,l=n[x].y,f=x-1;f>=0;f--)p=n[f],c=p.x,g=p.y,p.x=d,p.y=l,d=c,l=g;n[x].x=a,n[x].y=o}else{for(d=n[0].x,l=n[0].y,f=1;f<n.length;f++)p=n[f],c=p.x,g=p.y,p.x=d,p.y=l,d=c,l=g;n[0].x=a,n[0].y=o}}else d=n[0].x,l=n[0].y,n[0].x=a,n[0].y=o;return h.x=d,h.y=l,h};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(131),u=function(n){return s(n)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(183),u=function(n,a,o,r,h){h===void 0&&(h=!1);var d=Math.abs(r-o)/n.length,l;if(h)for(l=0;l<n.length;l++)n[l][a]+=s(l*d,o,r);else for(l=0;l<n.length;l++)n[l][a]=s(l*d,o,r);return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(184),u=function(n,a,o,r,h){h===void 0&&(h=!1);var d=Math.abs(r-o)/n.length,l;if(h)for(l=0;l<n.length;l++)n[l][a]+=s(l*d,o,r);else for(l=0;l<n.length;l++)n[l][a]=s(l*d,o,r);return n};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o){o===void 0&&(o=!1);var r=Math.abs(a-n)/s.length,h;if(o)for(h=0;h<s.length;h++)s[h][u]+=h*r+n;else for(h=0;h<s.length;h++)s[h][u]=h*r+n;return s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=0;u<s.length;u++)s[u].visible=!s[u].visible;return s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68),u=function(n,a,o){o===void 0&&(o=0);for(var r=0;r<n.length;r++){var h=n[r];h.x=s(h.x,a.left-o,a.right+o),h.y=s(h.y,a.top-o,a.bottom+o)}return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Animation:t(185),AnimationFrame:t(319),AnimationManager:t(321),AnimationState:t(164),Events:t(132)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete-"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrepeat"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrestart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstop"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationupdate"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BaseCache:t(323),CacheManager:t(325),Events:t(324)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Controls:t(739),Scene2D:t(742)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FixedKeyControl:t(740),SmoothedKeyControl:t(741)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(6),n=new s({initialize:function(o){this.camera=u(o,"camera",null),this.left=u(o,"left",null),this.right=u(o,"right",null),this.up=u(o,"up",null),this.down=u(o,"down",null),this.zoomIn=u(o,"zoomIn",null),this.zoomOut=u(o,"zoomOut",null),this.zoomSpeed=u(o,"zoomSpeed",.01),this.minZoom=u(o,"minZoom",.001),this.maxZoom=u(o,"maxZoom",1e3),this.speedX=0,this.speedY=0;var r=u(o,"speed",null);typeof r=="number"?(this.speedX=r,this.speedY=r):(this.speedX=u(o,"speed.x",0),this.speedY=u(o,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(!!this.active){a===void 0&&(a=1);var o=this.camera;this.up&&this.up.isDown?o.scrollY-=this.speedY*a|0:this.down&&this.down.isDown&&(o.scrollY+=this.speedY*a|0),this.left&&this.left.isDown?o.scrollX-=this.speedX*a|0:this.right&&this.right.isDown&&(o.scrollX+=this.speedX*a|0),this.zoomIn&&this.zoomIn.isDown?(o.zoom-=this.zoomSpeed,o.zoom<this.minZoom&&(o.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(o.zoom+=this.zoomSpeed,o.zoom>this.maxZoom&&(o.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(6),n=new s({initialize:function(o){this.camera=u(o,"camera",null),this.left=u(o,"left",null),this.right=u(o,"right",null),this.up=u(o,"up",null),this.down=u(o,"down",null),this.zoomIn=u(o,"zoomIn",null),this.zoomOut=u(o,"zoomOut",null),this.zoomSpeed=u(o,"zoomSpeed",.01),this.minZoom=u(o,"minZoom",.001),this.maxZoom=u(o,"maxZoom",1e3),this.accelX=0,this.accelY=0;var r=u(o,"acceleration",null);typeof r=="number"?(this.accelX=r,this.accelY=r):(this.accelX=u(o,"acceleration.x",0),this.accelY=u(o,"acceleration.y",0)),this.dragX=0,this.dragY=0;var h=u(o,"drag",null);typeof h=="number"?(this.dragX=h,this.dragY=h):(this.dragX=u(o,"drag.x",0),this.dragY=u(o,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var d=u(o,"maxSpeed",null);typeof d=="number"?(this.maxSpeedX=d,this.maxSpeedY=d):(this.maxSpeedX=u(o,"maxSpeed.x",0),this.maxSpeedY=u(o,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(!!this.active){a===void 0&&(a=1);var o=this.camera;this._speedX>0?(this._speedX-=this.dragX*a,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*a,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*a,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*a,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(o.scrollX-=this._speedX*a|0),this._speedY!==0&&(o.scrollY-=this._speedY*a|0),this._zoom!==0&&(o.zoom+=this._zoom,o.zoom<this.minZoom?o.zoom=this.minZoom:o.zoom>this.maxZoom&&(o.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Camera:t(326),BaseCamera:t(133),CameraManager:t(799),Effects:t(333),Events:t(37)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameradestroy"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeincomplete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeinstart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutcomplete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutstart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashcomplete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashstart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="followupdate"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapancomplete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapanstart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatecomplete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatestart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakecomplete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakestart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomcomplete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomstart"},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(37),a=new u({initialize:function(r){this.camera=r,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,r,h,d,l,f,c,g){if(o===void 0&&(o=!0),r===void 0&&(r=1e3),h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=!1),c===void 0&&(c=null),g===void 0&&(g=this.camera.scene),!f&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=o,this.progress=0,this.red=h,this.green=d,this.blue=l,this.alpha=o?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=g;var p=o?n.FADE_OUT_START:n.FADE_IN_START;return this.camera.emit(p,this.camera,this,r,h,d,l),this.camera},update:function(o,r){!this.isRunning||(this._elapsed+=r,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(o){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return o.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",o.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(o,r){if(!this.isRunning&&!this.isComplete)return!1;var h=this.camera,d=this.red/255,l=this.green/255,f=this.blue/255;return o.drawFillRect(h.x,h.y,h.width,h.height,r(f,l,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var o=this.direction?n.FADE_OUT_COMPLETE:n.FADE_IN_COMPLETE;this.camera.emit(o,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(37),a=new u({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,r,h,d,l,f,c){return o===void 0&&(o=250),r===void 0&&(r=255),h===void 0&&(h=255),d===void 0&&(d=255),l===void 0&&(l=!1),f===void 0&&(f=null),c===void 0&&(c=this.camera.scene),!l&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=o,this.progress=0,this.red=r,this.green=h,this.blue=d,this.alpha=1,this._elapsed=0,this._onUpdate=f,this._onUpdateScope=c,this.camera.emit(n.FLASH_START,this.camera,this,o,r,h,d),this.camera)},update:function(o,r){!this.isRunning||(this._elapsed+=r,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(o){if(!this.isRunning)return!1;var r=this.camera;return o.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",o.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(o,r){if(!this.isRunning)return!1;var h=this.camera,d=this.red/255,l=this.green/255,f=this.blue/255;return o.drawFillRect(h.x,h.y,h.width,h.height,r(f,l,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(134),a=t(37),o=t(3),r=new u({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=new o,this.current=new o,this.destination=new o,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,d,l,f,c,g,p){l===void 0&&(l=1e3),f===void 0&&(f=n.Linear),c===void 0&&(c=!1),g===void 0&&(g=null),p===void 0&&(p=this.camera.scene);var x=this.camera;return!c&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source.set(x.scrollX,x.scrollY),this.destination.set(h,d),x.getScroll(h,d,this.current),typeof f=="string"&&n.hasOwnProperty(f)?this.ease=n[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=p,this.camera.emit(a.PAN_START,this.camera,this,l,h,d)),x},update:function(h,d){if(!!this.isRunning){this._elapsed+=d;var l=s(this._elapsed/this.duration,0,1);this.progress=l;var f=this.camera;if(this._elapsed<this.duration){var c=this.ease(l);f.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*c,p=this.source.y+(this.current.y-this.source.y)*c;f.setScroll(g,p),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,l,g,p)}else f.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,l,f.scrollX,f.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=r},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1.70158),s*s*((u+1)*s-u)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1.70158),--s*s*((u+1)*s+u)+1};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1.70158);var n=u*1.525;return(s*=2)<1?.5*(s*s*((n+1)*s-n)):.5*((s-=2)*s*((n+1)*s+n)+2)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s=1-s,s<.36363636363636365?1-7.5625*s*s:s<.7272727272727273?1-(7.5625*(s-=.5454545454545454)*s+.75):s<.9090909090909091?1-(7.5625*(s-=.8181818181818182)*s+.9375):1-(7.5625*(s-=.9545454545454546)*s+.984375)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s<.36363636363636365?7.5625*s*s:s<.7272727272727273?7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?7.5625*(s-=.8181818181818182)*s+.9375:7.5625*(s-=.9545454545454546)*s+.984375};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=!1;return s<.5?(s=1-s*2,u=!0):s=s*2-1,s<.36363636363636365?s=7.5625*s*s:s<.7272727272727273?s=7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?s=7.5625*(s-=.8181818181818182)*s+.9375:s=7.5625*(s-=.9545454545454546)*s+.984375,u?(1-s)*.5:s*.5+.5};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 1-Math.sqrt(1-s*s)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.sqrt(1- --s*s)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s*s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return--s*s*s+1};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s*s:.5*((s-=2)*s*s+2)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===void 0&&(u=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var a=n/4;return u<1?u=1:a=n*Math.asin(1/u)/(2*Math.PI),-(u*Math.pow(2,10*(s-=1))*Math.sin((s-a)*(2*Math.PI)/n))};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===void 0&&(u=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var a=n/4;return u<1?u=1:a=n*Math.asin(1/u)/(2*Math.PI),u*Math.pow(2,-10*s)*Math.sin((s-a)*(2*Math.PI)/n)+1};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===void 0&&(u=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var a=n/4;return u<1?u=1:a=n*Math.asin(1/u)/(2*Math.PI),(s*=2)<1?-.5*(u*Math.pow(2,10*(s-=1))*Math.sin((s-a)*(2*Math.PI)/n)):u*Math.pow(2,-10*(s-=1))*Math.sin((s-a)*(2*Math.PI)/n)*.5+1};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.pow(2,10*(s-1))-.001};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 1-Math.pow(2,-10*s)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*Math.pow(2,10*(s-1)):.5*(2-Math.pow(2,-10*(s-1)))};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*(2-s)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s:-.5*(--s*(s-2)-1)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s*s*s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 1- --s*s*s*s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s*s*s*s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return--s*s*s*s*s+1};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===0?0:s===1?1:1-Math.cos(s*Math.PI/2)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===0?0:s===1?1:Math.sin(s*Math.PI/2)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===0?0:s===1?1:.5*(1-Math.cos(Math.PI*s))};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1),s<=0?0:s>=1?1:((u*s|0)+1)*(1/u)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(37),a=t(3),o=new u({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.intensity=new a,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(r,h,d,l,f){return r===void 0&&(r=100),h===void 0&&(h=.05),d===void 0&&(d=!1),l===void 0&&(l=null),f===void 0&&(f=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,typeof h=="number"?this.intensity.set(h):this.intensity.set(h.x,h.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=l,this._onUpdateScope=f,this.camera.emit(n.SHAKE_START,this.camera,this,r,h),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,h){if(!!this.isRunning)if(this._elapsed+=h,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var d=this.intensity,l=this.camera.width,f=this.camera.height,c=this.camera.zoom;this._offsetX=(Math.random()*d.x*l*2-d.x*l)*c,this._offsetY=(Math.random()*d.y*f*2-d.y*f)*c,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});e.exports=o},function(e,v,t){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var s=t(18),u=t(0),n=t(37),a=t(134),o=new u({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(r,h,d,l,f,c,g){d===void 0&&(d=1e3),l===void 0&&(l=a.Linear),f===void 0&&(f=!1),c===void 0&&(c=null),g===void 0&&(g=this.camera.scene),h===void 0&&(h=!1),this.shortestPath=h;var p=r;r<0?(p=-1*r,this.clockwise=!1):this.clockwise=!0;var x=360*Math.PI/180;p=p-Math.floor(p/x)*x;var y=this.camera;if(!f&&this.isRunning)return y;if(this.isRunning=!0,this.duration=d,this.progress=0,this.source=y.rotation,this.destination=p,typeof l=="string"&&a.hasOwnProperty(l)?this.ease=a[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=g,this.shortestPath){var T=0,E=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+x)-this.source,this.source>this.destination?E=Math.abs(this.source-this.destination):E=Math.abs(this.source+x)-this.destination,T<E?this.clockwise=!0:T>E&&(this.clockwise=!1)}return this.camera.emit(n.ROTATE_START,this.camera,this,d,p),y},update:function(r,h){if(!!this.isRunning){this._elapsed+=h;var d=s(this._elapsed/this.duration,0,1);this.progress=d;var l=this.camera;if(this._elapsed<this.duration){var f=this.ease(d);this.current=l.rotation;var c=0,g=360*Math.PI/180,p=this.destination,x=this.current;this.clockwise===!1&&(p=this.current,x=this.destination),p>=x?c=Math.abs(p-x):c=Math.abs(p+g)-x;var y=0;this.clockwise?y=l.rotation+c*f:y=l.rotation-c*f,l.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,d,y)}else l.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,d,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(134),a=t(37),o=new u({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,h,d,l,f,c){h===void 0&&(h=1e3),d===void 0&&(d=n.Linear),l===void 0&&(l=!1),f===void 0&&(f=null),c===void 0&&(c=this.camera.scene);var g=this.camera;return!l&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.source=g.zoom,this.destination=r,typeof d=="string"&&n.hasOwnProperty(d)?this.ease=n[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=c,this.camera.emit(a.ZOOM_START,this.camera,this,h,r)),g},update:function(r,h){!this.isRunning||(this._elapsed+=h,this.progress=s(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(326),u=t(0),n=t(2),a=t(24),o=t(57),r=t(104),h=t(20),d=new u({initialize:function(f){this.scene=f,this.systems=f.sys,this.roundPixels=f.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,f.sys.events.once(h.BOOT,this.boot,this),f.sys.events.on(h.START,this.start,this)},boot:function(){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new s(0,0,l.scale.width,l.scale.height).setScene(this.scene),l.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){if(!this.main){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0]}var f=this.systems.events;f.on(h.UPDATE,this.update,this),f.once(h.SHUTDOWN,this.shutdown,this)},add:function(l,f,c,g,p,x){l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),p===void 0&&(p=!1),x===void 0&&(x="");var y=new s(l,f,c,g);return y.setName(x),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),p&&(this.main=y),y},addExisting:function(l,f){f===void 0&&(f=!1);var c=this.cameras.indexOf(l);return c===-1?(l.id=this.getNextID(),l.setRoundPixels(this.roundPixels),this.cameras.push(l),f&&(this.main=l),l):null},getNextID:function(){for(var l=this.cameras,f=1,c=0;c<32;c++){for(var g=!1,p=0;p<l.length;p++){var x=l[p];if(x&&x.id===f){g=!0;continue}}if(g)f=f<<1;else return f}return 0},getTotal:function(l){l===void 0&&(l=!1);for(var f=0,c=this.cameras,g=0;g<c.length;g++){var p=c[g];(!l||l&&p.visible)&&f++}return f},fromJSON:function(l){Array.isArray(l)||(l=[l]);for(var f=this.scene.sys.scale.width,c=this.scene.sys.scale.height,g=0;g<l.length;g++){var p=l[g],x=n(p,"x",0),y=n(p,"y",0),T=n(p,"width",f),E=n(p,"height",c),S=this.add(x,y,T,E);S.name=n(p,"name",""),S.zoom=n(p,"zoom",1),S.rotation=n(p,"rotation",0),S.scrollX=n(p,"scrollX",0),S.scrollY=n(p,"scrollY",0),S.roundPixels=n(p,"roundPixels",!1),S.visible=n(p,"visible",!0);var C=n(p,"backgroundColor",!1);C&&S.setBackgroundColor(C);var P=n(p,"bounds",null);if(P){var R=n(P,"x",0),A=n(P,"y",0),M=n(P,"width",f),O=n(P,"height",c);S.setBounds(R,A,M,O)}}return this},getCamera:function(l){for(var f=this.cameras,c=0;c<f.length;c++)if(f[c].name===l)return f[c];return null},getCamerasBelowPointer:function(l){for(var f=this.cameras,c=l.x,g=l.y,p=[],x=0;x<f.length;x++){var y=f[x];y.visible&&y.inputEnabled&&o(y,c,g)&&p.unshift(y)}return p},remove:function(l,f){f===void 0&&(f=!0),Array.isArray(l)||(l=[l]);for(var c=0,g=this.cameras,p=0;p<l.length;p++){var x=g.indexOf(l[p]);x!==-1&&(f?g[x].destroy():g[x].renderList=[],g.splice(x,1),c++)}return!this.main&&g[0]&&(this.main=g[0]),c},render:function(l,f){for(var c=this.scene,g=this.cameras,p=0;p<this.cameras.length;p++){var x=g[p];if(x.visible&&x.alpha>0){x.preRender();var y=this.getVisibleChildren(f.getChildren(),x);l.render(c,y,x)}}},getVisibleChildren:function(l,f){for(var c=[],g=0;g<l.length;g++){var p=l[g];p.willRender(f)&&c.push(p)}return c},resetAll:function(){for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(l,f){for(var c=0;c<this.cameras.length;c++)this.cameras[c].update(l,f)},onResize:function(l,f,c,g,p){for(var x=0;x<this.cameras.length;x++){var y=this.cameras[x];y._x===0&&y._y===0&&y._width===g&&y._height===p&&y.setSize(f.width,f.height)}},resize:function(l,f){for(var c=0;c<this.cameras.length;c++)this.cameras[c].setSize(l,f)},shutdown:function(){this.main=void 0;for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();this.cameras=[];var f=this.systems.events;f.off(h.UPDATE,this.update,this),f.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});a.register("CameraManager",d,"cameras"),e.exports=d},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="enterfullscreen"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenfailed"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenunsupported"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="leavefullscreen"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="orientationchange"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Config:t(346),CreateRenderer:t(366),DebugHeader:t(384),Events:t(22),TimeStep:t(385),VisibilityHandler:t(387)}},function(e,v){var t=e.exports={},s,u;function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=n}catch{s=n}try{typeof clearTimeout=="function"?u=clearTimeout:u=a}catch{u=a}})();function o(y){if(s===setTimeout)return setTimeout(y,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(y,0);try{return s(y,0)}catch{try{return s.call(null,y,0)}catch{return s.call(this,y,0)}}}function r(y){if(u===clearTimeout)return clearTimeout(y);if((u===a||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(y);try{return u(y)}catch{try{return u.call(null,y)}catch{return u.call(this,y)}}}var h=[],d=!1,l,f=-1;function c(){!d||!l||(d=!1,l.length?h=l.concat(h):f=-1,h.length&&g())}function g(){if(!d){var y=o(c);d=!0;for(var T=h.length;T;){for(l=h,h=[];++f<T;)l&&l[f].run();f=-1,T=h.length}l=null,d=!1,r(y)}}t.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)T[E-1]=arguments[E];h.push(new p(y,T)),h.length===1&&!d&&o(g)};function p(y,T){this.fun=y,this.array=T}p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function x(){}t.on=x,t.addListener=x,t.once=x,t.off=x,t.removeListener=x,t.removeAllListeners=x,t.emit=x,t.prependListener=x,t.prependOnceListener=x,t.listeners=function(y){return[]},t.binding=function(y){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(y){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(136),u={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function n(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(u.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(u.mspointer=!0),navigator.getGamepads&&(u.gamepads=!0),"onwheel"in window||s.ie&&"WheelEvent"in window?u.wheelEvent="wheel":"onmousewheel"in window?u.wheelEvent="mousewheel":s.firefox&&"MouseScrollEvent"in window&&(u.wheelEvent="DOMMouseScroll")),u}e.exports=n()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(136),u={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function n(){if(typeof importScripts=="function")return u;u.audioData=!!window.Audio,u.webAudio=!!(window.AudioContext||window.webkitAudioContext);var a=document.createElement("audio"),o=!!a.canPlayType;try{if(o&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(u.ogg=!0),(a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||a.canPlayType("audio/opus;").replace(/^no$/,""))&&(u.opus=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(u.mp3=!0),a.canPlayType("audio/wav").replace(/^no$/,"")&&(u.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(u.m4a=!0),a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(u.webm=!0),a.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(s.edge)u.dolby=!0;else if(s.safari&&s.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var r=parseInt(RegExp.$1,10),h=parseInt(RegExp.$2,10);(r===10&&h>=11||r>10)&&(u.dolby=!0)}}}catch{}return u}e.exports=n()},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function s(){if(typeof importScripts=="function")return t;var u=document.createElement("video"),n=!!u.canPlayType;try{n&&(u.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(t.ogg=!0),u.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.h264=!0,t.mp4=!0),u.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(t.webm=!0),u.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(t.vp9=!0),u.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.hls=!0))}catch{}return t}e.exports=s()},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={available:!1,cancel:"",keyboard:!1,request:""};function s(){if(typeof importScripts=="function")return t;var u,n="Fullscreen",a="FullScreen",o=["request"+n,"request"+a,"webkitRequest"+n,"webkitRequest"+a,"msRequest"+n,"msRequest"+a,"mozRequest"+a,"mozRequest"+n];for(u=0;u<o.length;u++)if(document.documentElement[o[u]]){t.available=!0,t.request=o[u];break}var r=["cancel"+a,"exit"+n,"webkitCancel"+a,"webkitExit"+n,"msCancel"+a,"msExit"+n,"mozCancel"+a,"mozExit"+n];if(t.available){for(u=0;u<r.length;u++)if(document[r[u]]){t.cancel=r[u];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(t.keyboard=!0),Object.defineProperty(t,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),t}e.exports=s()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:t(349),BetweenPoints:t(350),BetweenPointsY:t(813),BetweenY:t(814),CounterClockwise:t(815),Normalize:t(351),Random:t(816),RandomDegrees:t(817),Reverse:t(818),RotateTo:t(819),ShortestBetween:t(820),Wrap:t(269),WrapDegrees:t(270)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.atan2(u.x-s.x,u.y-s.y)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return Math.atan2(n-s,a-u)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n){return n>Math.PI&&(n-=s.PI2),Math.abs(((n+s.TAU)%s.PI2-s.PI2)%s.PI2)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(137),u=function(){return s(-Math.PI,Math.PI)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(137),u=function(){return s(-180,180)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(351),u=function(n){return s(n+Math.PI)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n,a,o){return o===void 0&&(o=.05),n===a||(Math.abs(a-n)<=o||Math.abs(a-n)>=s.PI2-o?n=a:(Math.abs(a-n)>Math.PI&&(a<n?a+=s.PI2:a-=s.PI2),a>n?n+=o:a<n&&(n-=o))),n};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=u-s;if(n===0)return 0;var a=Math.floor((n- -180)/360);return n-a*360};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:t(50),BetweenPoints:t(352),BetweenPointsSquared:t(822),Chebyshev:t(823),Power:t(824),Snake:t(825),Squared:t(353)}},function(e,v){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x-u.x,a=s.y-u.y;return n*n+a*a};e.exports=t},function(e,v){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return Math.max(Math.abs(s-n),Math.abs(u-a))};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o){return o===void 0&&(o=2),Math.sqrt(Math.pow(n-s,o)+Math.pow(a-u,o))};e.exports=t},function(e,v){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return Math.abs(s-n)+Math.abs(u-a)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Back:t(334),Bounce:t(335),Circular:t(336),Cubic:t(337),Elastic:t(338),Expo:t(339),Linear:t(340),Quadratic:t(341),Quartic:t(342),Quintic:t(343),Sine:t(344),Stepped:t(345)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:t(828),Equal:t(124),Floor:t(829),GreaterThan:t(354),LessThan:t(355)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1e-4),Math.ceil(s-u)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1e-4),Math.floor(s+u)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bezier:t(831),CatmullRom:t(832),CubicBezier:t(358),Linear:t(833),QuadraticBezier:t(359),SmoothStep:t(360),SmootherStep:t(834)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(356),u=function(n,a){for(var o=0,r=n.length-1,h=0;h<=r;h++)o+=Math.pow(1-a,r-h)*Math.pow(a,h)*n[h]*s(r,h);return o};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(194),u=function(n,a){var o=n.length-1,r=o*a,h=Math.floor(r);return n[0]===n[o]?(a<0&&(h=Math.floor(r=o*(1+a))),s(r-h,n[(h-1+o)%o],n[h],n[(h+1)%o],n[(h+2)%o])):a<0?n[0]-(s(-r,n[0],n[0],n[1],n[1])-n[0]):a>1?n[o]-(s(r-o,n[o],n[o],n[o-1],n[o-1])-n[o]):s(r-h,n[h?h-1:0],n[h],n[o<h+1?o:h+1],n[o<h+2?o:h+2])};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(135),u=function(n,a){var o=n.length-1,r=o*a,h=Math.floor(r);return a<0?s(n[0],n[1],r):a>1?s(n[o],n[o-1],o-r):s(n[h],n[h+1>o?o:h+1],r-h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(183),u=function(n,a,o){return a+(o-a)*s(n,0,1)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetNext:t(361),IsSize:t(138),IsValue:t(836)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s>0&&(s&s-1)===0};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:t(139),Floor:t(76),To:t(838)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){return n===void 0&&(n=0),u===0?s:(s-=n,s=u*Math.round(s/u),a?(n+s)/u:n+s)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(a){a===void 0&&(a=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],a&&this.init(a)},rnd:function(){var n=2091639*this.s0+this.c*23283064365386963e-26;return this.c=n|0,this.s0=this.s1,this.s1=this.s2,this.s2=n-this.c,this.s2},hash:function(n){var a,o=this.n;n=n.toString();for(var r=0;r<n.length;r++)o+=n.charCodeAt(r),a=.02519603282416938*o,o=a>>>0,a-=o,a*=o,o=a>>>0,a-=o,o+=a*4294967296;return this.n=o,(o>>>0)*23283064365386963e-26},init:function(n){typeof n=="string"?this.state(n):this.sow(n)},sow:function(n){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!n)for(var a=0;a<n.length&&n[a]!=null;a++){var o=n[a];this.s0-=this.hash(o),this.s0+=~~(this.s0<0),this.s1-=this.hash(o),this.s1+=~~(this.s1<0),this.s2-=this.hash(o),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(n,a){return Math.floor(this.realInRange(0,a-n+1)+n)},between:function(n,a){return Math.floor(this.realInRange(0,a-n+1)+n)},realInRange:function(n,a){return this.frac()*(a-n)+n},normal:function(){return 1-2*this.frac()},uuid:function(){var n="",a="";for(a=n="";n++<36;a+=~n%5|n*3&4?(n^15?8^this.frac()*(n^20?16:4):4).toString(16):"-");return a},pick:function(n){return n[this.integerInRange(0,n.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(n){return n[~~(Math.pow(this.frac(),2)*(n.length-1)+.5)]},timestamp:function(n,a){return this.realInRange(n||9466848e5,a||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(n){return typeof n=="string"&&n.match(/^!rnd/)&&(n=n.split(","),this.c=parseFloat(n[1]),this.s0=parseFloat(n[2]),this.s1=parseFloat(n[3]),this.s2=parseFloat(n[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(n){for(var a=n.length-1,o=a;o>0;o--){var r=Math.floor(this.frac()*(o+1)),h=n[r];n[r]=n[o],n[o]=h}return n}});e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=0,n=0;n<s.length;n++)u+=+s[n];return u/s.length};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=10);var a=Math.pow(n,-u);return Math.ceil(s*a)/a};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.abs(s-u)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(69),a=t(1),o=new n,r=new u({initialize:function h(d,l,f,c){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=h.DefaultOrder),this._x=d,this._y=l,this._z=f,this._order=c,this.onChangeCallback=a},x:{get:function(){return this._x},set:function(h){this._x=h,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(h){this._y=h,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(h){this._z=h,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(h){this._order=h,this.onChangeCallback(this)}},set:function(h,d,l,f){return f===void 0&&(f=this._order),this._x=h,this._y=d,this._z=l,this._order=f,this.onChangeCallback(this),this},copy:function(h){return this.set(h.x,h.y,h.z,h.order)},setFromQuaternion:function(h,d,l){return d===void 0&&(d=this._order),l===void 0&&(l=!1),o.fromQuat(h),this.setFromRotationMatrix(o,d,l)},setFromRotationMatrix:function(h,d,l){d===void 0&&(d=this._order),l===void 0&&(l=!1);var f=h.val,c=f[0],g=f[4],p=f[8],x=f[1],y=f[5],T=f[9],E=f[2],S=f[6],C=f[10],P=0,R=0,A=0,M=.99999;switch(d){case"XYZ":{R=Math.asin(s(p,-1,1)),Math.abs(p)<M?(P=Math.atan2(-T,C),A=Math.atan2(-g,c)):P=Math.atan2(S,y);break}case"YXZ":{P=Math.asin(-s(T,-1,1)),Math.abs(T)<M?(R=Math.atan2(p,C),A=Math.atan2(x,y)):R=Math.atan2(-E,c);break}case"ZXY":{P=Math.asin(s(S,-1,1)),Math.abs(S)<M?(R=Math.atan2(-E,C),A=Math.atan2(-g,y)):A=Math.atan2(x,c);break}case"ZYX":{R=Math.asin(-s(E,-1,1)),Math.abs(E)<M?(P=Math.atan2(S,C),A=Math.atan2(x,c)):A=Math.atan2(-g,y);break}case"YZX":{A=Math.asin(s(x,-1,1)),Math.abs(x)<M?(P=Math.atan2(-T,y),R=Math.atan2(-E,c)):R=Math.atan2(p,C);break}case"XZY":{A=Math.asin(-s(g,-1,1)),Math.abs(g)<M?(P=Math.atan2(S,y),R=Math.atan2(p,c)):P=Math.atan2(-T,C);break}}return this._x=P,this._y=R,this._z=A,this._order=d,l&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",e.exports=r},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=10);var a=Math.pow(n,-u);return Math.floor(s*a)/a};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s/u/1e3};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s==parseFloat(s)?!(s%2):void 0};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===parseFloat(s)?!(s%2):void 0};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.min(s+u,n)};e.exports=t},function(e,v){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.length;if(u===0)return 0;s.sort(function(a,o){return a-o});var n=Math.floor(u/2);return u%2===0?(s[n]+s[n-1])/2:s[n]};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.max(s-u,n)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n===void 0&&(n=u+1);var o=(s-u)/(n-u);return o>1?a!==void 0?(o=(a-s)/(a-n),o<0&&(o=0)):o=1:o<0&&(o=0),o};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);var n=Math.random()*2*Math.PI;return s.x=Math.cos(n)*u,s.y=Math.sin(n)*u,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);var n=Math.random()*2*Math.PI,a=Math.random()*2-1,o=Math.sqrt(1-a*a)*u;return s.x=Math.cos(n)*o,s.y=Math.sin(n)*o,s.z=a*u,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1),s.x=(Math.random()*2-1)*u,s.y=(Math.random()*2-1)*u,s.z=(Math.random()*2-1)*u,s.w=(Math.random()*2-1)*u,s};e.exports=t},function(e,v){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o){return s.x=u+o*Math.cos(a),s.y=n+o*Math.sin(a),s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=10);var a=Math.pow(n,-u);return Math.round(s*a)/a};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u===void 0&&(u=1),n===void 0&&(n=1),a===void 0&&(a=1),a*=Math.PI/s;for(var o=[],r=[],h=0;h<s;h++)n-=u*a,u+=n*a,o[h]=n,r[h]=u;return{sin:r,cos:o,length:s}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,a,o,r){r===void 0&&(r=new s);var h=0,d=0,l=a*o;return n>0&&n<=l&&(n>a-1?(d=Math.floor(n/a),h=n-d*a):h=n),r.set(h,d)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.abs(s-u)<=n};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=t(69),n=t(365),a=new u,o=new n,r=new s,h=function(d,l,f){return o.setAxisAngle(l,f),a.fromRotationTranslation(o,r.set(0,0,0)),d.transformMat4(a)};e.exports=h},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addtexture"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onerror"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onload"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removetexture"},function(e,v){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineafterflush"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebeforeflush"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebind"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineboot"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinedestroy"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinerebind"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineresize"},function(e,v){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(e,v){e.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GenerateTexture:t(388),Palettes:t(889)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARNE16:t(389),C64:t(890),CGA:t(891),JMP:t(892),MSX:t(893)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Path:t(895),MoveTo:t(393),CubicBezier:t(390),Curve:t(94),Ellipse:t(391),Line:t(392),QuadraticBezier:t(394),Spline:t(395)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(390),n=t(391),a=t(5),o=t(392),r=t(393),h=t(394),d=t(10),l=t(395),f=t(3),c=t(14),g=new s({initialize:function(x,y){x===void 0&&(x=0),y===void 0&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new f,this._tmpVec2A=new f,this._tmpVec2B=new f,typeof x=="object"?this.fromJSON(x):this.startPoint.set(x,y)},add:function(p){return this.curves.push(p),this},circleTo:function(p,x,y){return x===void 0&&(x=!1),this.ellipseTo(p,p,0,360,x,y)},closePath:function(){var p=this.curves[0].getPoint(0),x=this.curves[this.curves.length-1].getPoint(1);return p.equals(x)||this.curves.push(new o(x,p)),this},cubicBezierTo:function(p,x,y,T,E,S){var C=this.getEndPoint(),P,R,A;return p instanceof f?(P=p,R=x,A=y):(P=new f(y,T),R=new f(E,S),A=new f(p,x)),this.add(new u(C,P,R,A))},quadraticBezierTo:function(p,x,y,T){var E=this.getEndPoint(),S,C;return p instanceof f?(S=p,C=x):(S=new f(y,T),C=new f(p,x)),this.add(new h(E,S,C))},draw:function(p,x){for(var y=0;y<this.curves.length;y++){var T=this.curves[y];!T.active||T.draw(p,x)}return p},ellipseTo:function(p,x,y,T,E,S){var C=new n(0,0,p,x,y,T,E,S),P=this.getEndPoint(this._tmpVec2A),R=C.getStartPoint(this._tmpVec2B);return P.subtract(R),C.x=P.x,C.y=P.y,this.add(C)},fromJSON:function(p){this.curves=[],this.cacheLengths=[],this.startPoint.set(p.x,p.y),this.autoClose=p.autoClose;for(var x=0;x<p.curves.length;x++){var y=p.curves[x];switch(y.type){case"LineCurve":this.add(o.fromJSON(y));break;case"EllipseCurve":this.add(n.fromJSON(y));break;case"SplineCurve":this.add(l.fromJSON(y));break;case"CubicBezierCurve":this.add(u.fromJSON(y));break;case"QuadraticBezierCurve":this.add(h.fromJSON(y));break}}return this},getBounds:function(p,x){p===void 0&&(p=new d),x===void 0&&(x=16),p.x=Number.MAX_VALUE,p.y=Number.MAX_VALUE;for(var y=new d,T=c.MIN_SAFE_INTEGER,E=c.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var C=this.curves[S];!C.active||(C.getBounds(y,x),p.x=Math.min(p.x,y.x),p.y=Math.min(p.y,y.y),T=Math.max(T,y.right),E=Math.max(E,y.bottom))}return p.right=T,p.bottom=E,p},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var p=[],x=0,y=0;y<this.curves.length;y++)x+=this.curves[y].getLength(),p.push(x);return this.cacheLengths=p,p},getEndPoint:function(p){return p===void 0&&(p=new f),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,p):p.copy(this.startPoint),p},getLength:function(){var p=this.getCurveLengths();return p[p.length-1]},getPoint:function(p,x){x===void 0&&(x=new f);for(var y=p*this.getLength(),T=this.getCurveLengths(),E=0;E<T.length;){if(T[E]>=y){var S=T[E]-y,C=this.curves[E],P=C.getLength(),R=P===0?0:1-S/P;return C.getPointAt(R,x)}E++}return null},getPoints:function(p){p===void 0&&(p=12);for(var x=[],y,T=0;T<this.curves.length;T++){var E=this.curves[T];if(!!E.active)for(var S=E.getResolution(p),C=E.getPoints(S),P=0;P<C.length;P++){var R=C[P];y&&y.equals(R)||(x.push(R),y=R)}}return this.autoClose&&x.length>1&&!x[x.length-1].equals(x[0])&&x.push(x[0]),x},getRandomPoint:function(p){return p===void 0&&(p=new f),this.getPoint(Math.random(),p)},getSpacedPoints:function(p){p===void 0&&(p=40);for(var x=[],y=0;y<=p;y++)x.push(this.getPoint(y/p));return this.autoClose&&x.push(x[0]),x},getStartPoint:function(p){return p===void 0&&(p=new f),p.copy(this.startPoint)},getTangent:function(p,x){x===void 0&&(x=new f);for(var y=p*this.getLength(),T=this.getCurveLengths(),E=0;E<T.length;){if(T[E]>=y){var S=T[E]-y,C=this.curves[E],P=C.getLength(),R=P===0?0:1-S/P;return C.getTangentAt(R,x)}E++}return null},lineTo:function(p,x){p instanceof f?this._tmpVec2B.copy(p):this._tmpVec2B.set(p,x);var y=this.getEndPoint(this._tmpVec2A);return this.add(new o([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(p){return p.unshift(this.getEndPoint()),this.add(new l(p))},moveTo:function(p,x){return p instanceof f?this.add(new r(p.x,p.y)):this.add(new r(p,x))},toJSON:function(){for(var p=[],x=0;x<this.curves.length;x++)p.push(this.curves[x].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:p}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",function(p,x){return new g(p,x)}),e.exports=g},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DataManager:t(101),DataManagerPlugin:t(897),Events:t(315)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(101),n=t(24),a=t(20),o=new s({Extends:u,initialize:function(h){u.call(this,h,h.sys.events),this.scene=h,this.systems=h.sys,h.sys.events.once(a.BOOT,this.boot,this),h.sys.events.on(a.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){u.prototype.destroy.call(this),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});n.register("DataManagerPlugin",o,"data"),e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Align:t(899),BaseShader:t(396),Bounds:t(902),Canvas:t(906),Color:t(397),ColorMatrix:t(198),Masks:t(916),RGB:t(200)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=t(17),n={In:t(900),To:t(901)};n=u(!1,n,s),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:t(290),BottomLeft:t(291),BottomRight:t(292),Center:t(293),LeftCenter:t(295),QuickSet:t(289),RightCenter:t(296),TopCenter:t(297),TopLeft:t(298),TopRight:t(299)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:t(277),BottomLeft:t(278),BottomRight:t(279),LeftBottom:t(280),LeftCenter:t(281),LeftTop:t(282),QuickSet:t(276),RightBottom:t(283),RightCenter:t(284),RightTop:t(285),TopCenter:t(286),TopLeft:t(287),TopRight:t(288)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CenterOn:t(294),GetBottom:t(42),GetBounds:t(903),GetCenterX:t(87),GetCenterY:t(89),GetLeft:t(43),GetOffsetX:t(904),GetOffsetY:t(905),GetRight:t(44),GetTop:t(45),SetBottom:t(55),SetCenterX:t(88),SetCenterY:t(90),SetLeft:t(53),SetRight:t(54),SetTop:t(52)}},function(e,v,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(44),a=t(45),o=function(r,h){h===void 0&&(h={});var d=u(r),l=a(r);return h.x=d,h.y=l,h.width=n(r)-d,h.height=s(r)-l,h};e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.width*s.originX};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.height*s.originY};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasInterpolation:t(367),CanvasPool:t(31),Smoothing:t(192),TouchAction:t(907),UserSelect:t(908)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u="none"),s.style.msTouchAction=u,s.style["ms-touch-action"]=u,s.style["touch-action"]=u,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u="none");var n=["-webkit-","-khtml-","-moz-","-ms-",""];return n.forEach(function(a){s.style[a+"user-select"]=u}),s.style["-webkit-touch-callout"]=u,s.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(103),u=function(n){n===void 0&&(n=1024);var a=[],o=255,r,h=255,d=0,l=0;for(r=0;r<=o;r++)a.push({r:h,g:r,b:l,color:s(h,r,l)});for(d=255,r=o;r>=0;r--)a.push({r,g:d,b:l,color:s(r,d,l)});for(h=0,r=0;r<=o;r++,d--)a.push({r:h,g:d,b:r,color:s(h,d,r)});for(d=0,l=255,r=0;r<=o;r++,l--,h++)a.push({r:h,g:d,b:l,color:s(h,d,l)});if(n===1024)return a;var f=[],c=0,g=1024/n;for(r=0;r<n;r++)f.push(a[Math.floor(c)]),c+=g;return f};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u={r:s>>16&255,g:s>>8&255,b:s&255,a:255};return s>16777215&&(u.a=s>>>24),u};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=t(399),n=function(a,o,r){var h=r,d=r,l=r;if(o!==0){var f=r<.5?r*(1+o):r+o-r*o,c=2*r-f;h=u(c,f,a+1/3),d=u(c,f,a),l=u(c,f,a-1/3)}var g=new s;return g.setGLTo(h,d,l,1)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(188),u=function(n,a){n===void 0&&(n=1),a===void 0&&(a=1);for(var o=[],r=0;r<=359;r++)o.push(s(r/359,n,a));return o};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(135),u=function(o,r,h,d,l,f,c,g){c===void 0&&(c=100),g===void 0&&(g=0);var p=g/c;return{r:s(o,d,p),g:s(r,l,p),b:s(h,f,p)}},n=function(o,r,h,d){return h===void 0&&(h=100),d===void 0&&(d=0),u(o.r,o.g,o.b,r.r,r.g,r.b,h,d)},a=function(o,r,h,d,l,f){return l===void 0&&(l=100),f===void 0&&(f=0),u(o.r,o.g,o.b,r,h,d,l,f)};e.exports={RGBWithRGB:u,ColorWithRGB:a,ColorWithColor:n}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(195),u=t(38),n=function(a,o){return a===void 0&&(a=0),o===void 0&&(o=255),new u(s(a,o),s(a,o),s(a,o))};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(398),u=function(n,a,o,r,h){return r===void 0&&(r=255),h===void 0&&(h="#"),h==="#"?"#"+((1<<24)+(n<<16)+(a<<8)+o).toString(16).slice(1,7):"0x"+s(r)+s(n)+s(a)+s(o)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BitmapMask:t(310),GeometryMask:t(311)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={AddToDOM:t(142),DOMContentLoaded:t(400),GetInnerHeight:t(401),GetScreenOrientation:t(402),GetTarget:t(407),ParseXML:t(408),RemoveFromDOM:t(202),RequestAnimationFrame:t(386)};e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EventEmitter:t(919)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(24),a=new s({Extends:u,initialize:function(){u.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});n.register("EventEmitter",a,"events"),e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(142),u=t(321),n=t(325),a=t(31),o=t(0),r=t(346),h=t(921),d=t(366),l=t(101),f=t(384),c=t(347),g=t(400),p=t(9),x=t(22),y=t(409),T=t(24),E=t(414),S=t(415),C=t(417),P=t(106),R=t(422),A=t(385),M=t(387),O=t(426),F=new o({initialize:function(B){this.config=new r(B),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new p,this.anims=new u(this),this.textures=new R(this),this.cache=new n(this),this.registry=new l(this),this.input=new y(this,this.config),this.scene=new C(this,this.config.sceneConfig),this.device=c,this.scale=new S(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new A(this,this.config.fps),this.plugins=new E(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,g(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),d(this),h(this),f(this),s(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(x.BOOT)},texturesReady:function(){this.events.emit(x.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),M(this);var I=this.events;I.on(x.HIDDEN,this.onHidden,this),I.on(x.VISIBLE,this.onVisible,this),I.on(x.BLUR,this.onBlur,this),I.on(x.FOCUS,this.onFocus,this)},step:function(I,B){if(this.pendingDestroy)return this.runDestroy();var V=this.events;V.emit(x.PRE_STEP,I,B),V.emit(x.STEP,I,B),this.scene.update(I,B),V.emit(x.POST_STEP,I,B);var U=this.renderer;U.preRender(),V.emit(x.PRE_RENDER,U,I,B),this.scene.render(U),U.postRender(),V.emit(x.POST_RENDER,U,I,B)},headlessStep:function(I,B){if(this.pendingDestroy)return this.runDestroy();var V=this.events;V.emit(x.PRE_STEP,I,B),V.emit(x.STEP,I,B),this.scene.update(I,B),V.emit(x.POST_STEP,I,B),V.emit(x.PRE_RENDER),V.emit(x.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(x.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(x.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(I,B){B===void 0&&(B=!1),this.pendingDestroy=!0,this.removeCanvas=I,this.noReturn=B},runDestroy:function(){this.scene.destroy(),this.events.emit(x.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(a.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});e.exports=F},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(142),u=function(n){var a=n.config;if(!(!a.parent||!a.domCreateContainer)){var o=document.createElement("div");o.style.cssText=["display: block;","width: "+n.scale.width+"px;","height: "+n.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+a.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),n.domContainer=o,s(o,a.parent)}};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameout"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameover"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectdown"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectmove"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectout"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectover"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectup"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectwheel"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="process"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdownoutside"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerupoutside"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerlockchange"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addfile"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete-"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loaderror"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="load"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fileprogress"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postprocess"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="progress"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(!n.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var a=s.source[u];s.add("__BASE",u,0,0,a.width,a.height);for(var o=n.getElementsByTagName("SubTexture"),r,h=0;h<o.length;h++){var d=o[h].attributes,l=d.name.value,f=parseInt(d.x.value,10),c=parseInt(d.y.value,10),g=parseInt(d.width.value,10),p=parseInt(d.height.value,10);if(r=s.add(l,u,f,c,g,p),d.frameX){var x=Math.abs(parseInt(d.frameX.value,10)),y=Math.abs(parseInt(d.frameY.value,10)),T=parseInt(d.frameWidth.value,10),E=parseInt(d.frameHeight.value,10);r.setTrim(g,p,x,y,T,E)}}return s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.source[u];return s.add("__BASE",u,0,0,n.width,n.height),s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.source[u];return s.add("__BASE",u,0,0,n.width,n.height),s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,a,o){if(!o.frames&&!o.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=n.source[a];n.add("__BASE",a,0,0,r.width,r.height);for(var h=Array.isArray(o.textures)?o.textures[a].frames:o.frames,d,l=0;l<h.length;l++){var f=h[l];d=n.add(f.filename,a,f.frame.x,f.frame.y,f.frame.w,f.frame.h),f.trimmed&&d.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(d.rotated=!0,d.updateUVsInverted());var c=f.anchor||f.pivot;c&&(d.customPivot=!0,d.pivotX=c.x,d.pivotY=c.y),d.customData=s(f)}for(var g in o)g!=="frames"&&(Array.isArray(o[g])?n.customData[g]=o[g].slice(0):n.customData[g]=o[g]);return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,a,o){if(!o.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=n.source[a];n.add("__BASE",a,0,0,r.width,r.height);var h=o.frames,d;for(var l in h)if(!!h.hasOwnProperty(l)){var f=h[l];d=n.add(l,a,f.frame.x,f.frame.y,f.frame.w,f.frame.h),f.trimmed&&d.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(d.rotated=!0,d.updateUVsInverted());var c=f.anchor||f.pivot;c&&(d.customPivot=!0,d.pivotX=c.x,d.pivotY=c.y),d.customData=s(f)}for(var g in o)g!=="frames"&&(Array.isArray(o[g])?n.customData[g]=o[g].slice(0):n.customData[g]=o[g]);return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,a,o,r,h,d,l){var f=s(l,"frameWidth",null),c=s(l,"frameHeight",f);if(f===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=n.source[a];n.add("__BASE",a,0,0,g.width,g.height);var p=s(l,"startFrame",0),x=s(l,"endFrame",-1),y=s(l,"margin",0),T=s(l,"spacing",0),E=Math.floor((h-y+T)/(f+T)),S=Math.floor((d-y+T)/(c+T)),C=E*S;C===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",n.key),(p>C||p<-C)&&(p=0),p<0&&(p=C+p),x!==-1&&(C=p+(x+1));for(var P=y,R=y,A=0,M=0,O=0;O<C;O++){A=0,M=0;var F=P+f,I=R+c;F>h&&(A=F-h),I>d&&(M=I-d),n.add(O,a,o+P,r+R,f-A,c-M),P+=f+T,P+f>h&&(P=y,R+=c+T)}return n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,a,o){var r=s(o,"frameWidth",null),h=s(o,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var d=n.source[0];n.add("__BASE",0,0,0,d.width,d.height),s(o,"startFrame",0),s(o,"endFrame",-1);for(var l=s(o,"margin",0),f=s(o,"spacing",0),c=a.cutX,g=a.cutY,p=a.cutWidth,x=a.cutHeight,y=a.realWidth,T=a.realHeight,E=Math.floor((y-l+f)/(r+f)),S=Math.floor((T-l+f)/(h+f)),C=a.x,P=r-C,R=r-(y-p-C),A=a.y,M=h-A,O=h-(T-x-A),F,I=l,B=l,V=0,U=a.sourceIndex,Y=0;Y<S;Y++){for(var W=Y===0,w=Y===S-1,L=0;L<E;L++){var D=L===0,N=L===E-1;if(F=n.add(V,U,c+I,g+B,r,h),D||W||N||w){var G=D?C:0,b=W?A:0,z=0,X=0;D&&(z+=r-P),N&&(z+=r-R),W&&(X+=h-M),w&&(X+=h-O);var H=r-z,$=h-X;F.cutWidth=H,F.cutHeight=$,F.setTrim(r,h,G,b,H,$)}I+=f,D?I+=P:N?I+=R:I+=r,V++}I=l,B+=f,W?B+=M:w?B+=O:B+=h}return n};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=0,s=function(n,a,o,r){var h=t-r.y-r.height;n.add(o,a,r.x,h,r.width,r.height)},u=function(n,a,o){var r=n.source[a];n.add("__BASE",a,0,0,r.width,r.height),t=r.height;for(var h=o.split(`
`),d=/^[ ]*(- )*(\w+)+[: ]+(.*)/,l="",f="",c={x:0,y:0,width:0,height:0},g=0;g<h.length;g++){var p=h[g].match(d);if(!!p){var x=p[1]==="- ",y=p[2],T=p[3];if(x&&(f!==l&&(s(n,a,f,c),l=f),c={x:0,y:0,width:0,height:0}),y==="name"){f=T;continue}switch(y){case"x":case"y":case"width":case"height":c[y]=parseInt(T,10);break}}}return f!==l&&s(n,a,f,c),n};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decoded"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decodedall"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="looped"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,v){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pan"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seek"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stopall"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Events:t(75),DisplayList:t(1012),GameObjectCreator:t(16),GameObjectFactory:t(5),UpdateList:t(1040),Components:t(11),GetCalcMatrix:t(19),BuildGameObject:t(28),BuildGameObjectAnimation:t(439),GameObject:t(15),BitmapText:t(148),Blitter:t(213),Bob:t(440),Container:t(214),DOMElement:t(442),DynamicBitmapText:t(215),Extern:t(444),Graphics:t(216),Group:t(113),Image:t(125),Layer:t(219),Particles:t(1074),PathFollower:t(457),RenderTexture:t(221),RetroFont:t(1082),Rope:t(223),Sprite:t(73),Text:t(224),GetTextSize:t(458),MeasureText:t(460),TextStyle:t(459),TileSprite:t(225),Zone:t(129),Video:t(226),Shape:t(34),Arc:t(461),Curve:t(462),Ellipse:t(463),Grid:t(464),IsoBox:t(465),IsoTriangle:t(466),Line:t(467),Polygon:t(468),Rectangle:t(473),Star:t(474),Triangle:t(475),Factories:{Blitter:t(1130),Container:t(1131),DOMElement:t(1132),DynamicBitmapText:t(1133),Extern:t(1134),Graphics:t(1135),Group:t(1136),Image:t(1137),Layer:t(1138),Particles:t(1139),PathFollower:t(1140),RenderTexture:t(1141),Rope:t(1142),Sprite:t(1143),StaticBitmapText:t(1144),Text:t(1145),TileSprite:t(1146),Zone:t(1147),Video:t(1148),Arc:t(1149),Curve:t(1150),Ellipse:t(1151),Grid:t(1152),IsoBox:t(1153),IsoTriangle:t(1154),Line:t(1155),Polygon:t(1156),Rectangle:t(1157),Star:t(1158),Triangle:t(1159)},Creators:{Blitter:t(1160),Container:t(1161),DynamicBitmapText:t(1162),Graphics:t(1163),Group:t(1164),Image:t(1165),Layer:t(1166),Particles:t(1167),RenderTexture:t(1168),Rope:t(1169),Sprite:t(1170),StaticBitmapText:t(1171),Text:t(1172),TileSprite:t(1173),Zone:t(1174),Video:t(1175)}};s.Shader=t(229),s.Mesh=t(230),s.PointLight=t(150),s.Factories.Shader=t(1184),s.Factories.Mesh=t(1185),s.Factories.PointLight=t(1186),s.Creators.Shader=t(1187),s.Creators.Mesh=t(1188),s.Creators.PointLight=t(1189),s.Light=t(481),s.LightsManager=t(482),s.LightsPlugin=t(1190),e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(110),n=t(24),a=t(75),o=t(20),r=t(79),h=new s({Extends:u,initialize:function(l){u.call(this,l),this.sortChildrenFlag=!1,this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.events.once(o.DESTROY,this.destroy,this)},addChildCallback:function(d){d.displayList&&d.displayList!==this&&d.removeFromDisplayList(),d.displayList||(this.queueDepthSort(),d.displayList=this,d.emit(a.ADDED_TO_SCENE,d,this.scene),this.events.emit(o.ADDED_TO_SCENE,d,this.scene))},removeChildCallback:function(d){this.queueDepthSort(),d.displayList=null,d.emit(a.REMOVED_FROM_SCENE,d,this.scene),this.events.emit(o.REMOVED_FROM_SCENE,d,this.scene)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,l){return d._depth-l._depth},getChildren:function(){return this.list},shutdown:function(){for(var d=this.list,l=d.length;l--;)d[l].destroy(!0);d.length=0,this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});n.register("DisplayList",h,"displayList"),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CheckMatrix:t(209),MatrixToString:t(1014),ReverseColumns:t(1015),ReverseRows:t(1016),Rotate180:t(1017),RotateLeft:t(1018),RotateMatrix:t(147),RotateRight:t(1019),Translate:t(1020),TransposeMatrix:t(435)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(186),u=t(209),n=function(a){var o="";if(!u(a))return o;for(var r=0;r<a.length;r++){for(var h=0;h<a[r].length;h++){var d=a[r][h].toString();d!=="undefined"?o+=s(d,2):o+="?",h<a[r].length-1&&(o+=" |")}if(r<a.length-1){o+=`
`;for(var l=0;l<a[r].length;l++)o+="---",l<a[r].length-1&&(o+="+");o+=`
`}}return o};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.reverse()};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=0;u<s.length;u++)s[u].reverse();return s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(147),u=function(n){return s(n,180)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(147),u=function(n){return s(n,90)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(147),u=function(n){return s(n,-90)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(178),u=t(179),n=function(a,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),r!==0&&(r<0?s(a,Math.abs(r)):u(a,r)),o!==0)for(var h=0;h<a.length;h++){var d=a[h];o<0?s(d,Math.abs(o)):u(d,o)}return a};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o){if(o===void 0&&(o=s),n>0){var r=n-s.length;if(r<=0)return null}if(!Array.isArray(u))return s.indexOf(u)===-1?(s.push(u),a&&a.call(o,u),u):null;for(var h=u.length-1;h>=0;)s.indexOf(u[h])!==-1&&u.splice(h,1),h--;if(h=u.length,h===0)return null;n>0&&h>r&&(u.splice(r),h=r);for(var d=0;d<h;d++){var l=u[d];s.push(l),a&&a.call(o,l)}return u};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o,r){if(n===void 0&&(n=0),r===void 0&&(r=s),a>0){var h=a-s.length;if(h<=0)return null}if(!Array.isArray(u))return s.indexOf(u)===-1?(s.splice(n,0,u),o&&o.call(r,u),u):null;for(var d=u.length-1;d>=0;)s.indexOf(u[d])!==-1&&u.pop(),d--;if(d=u.length,d===0)return null;a>0&&d>h&&(u.splice(h),d=h);for(var l=d-1;l>=0;l--){var f=u[l];s.splice(n,0,f),o&&o.call(r,f)}return u};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);return n!==-1&&n<s.length&&(s.splice(n,1),s.push(u)),u};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,o,r,h){r===void 0&&(r=0),h===void 0&&(h=n.length);var d=0;if(s(n,r,h))for(var l=r;l<h;l++){var f=n[l];f[a]===o&&d++}return d};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a,o=[null];for(a=3;a<arguments.length;a++)o.push(arguments[a]);for(a=0;a<s.length;a++)o[0]=s[a],u.apply(n,o);return s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,o,r,h){if(r===void 0&&(r=0),h===void 0&&(h=n.length),s(n,r,h)){var d,l=[null];for(d=5;d<arguments.length;d++)l.push(arguments[d]);for(d=r;d<h;d++)l[0]=n[d],a.apply(o,l)}return n};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);if(n>0){var a=s[n-1],o=s.indexOf(a);s[n]=a,s[o]=u}return s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=s.indexOf(u);if(a===-1||n<0||n>=s.length)throw new Error("Supplied index out of bounds");return a!==n&&(s.splice(a,1),s.splice(n,0,u)),u};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);if(n!==-1&&n<s.length-1){var a=s[n+1],o=s.indexOf(a);s[n]=a,s[o]=u}return s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===n)return s;var a=s.indexOf(u),o=s.indexOf(n);if(a<0||o<0)throw new Error("Supplied items must be elements of the same array");return a>o||(s.splice(a,1),o===s.length-1?s.push(u):s.splice(o,0,u)),s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===n)return s;var a=s.indexOf(u),o=s.indexOf(n);if(a<0||o<0)throw new Error("Supplied items must be elements of the same array");return a<o||(s.splice(a,1),o===0?s.unshift(u):s.splice(o,0,u)),s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(363),u=function(n,a,o){n===void 0&&(n=0),a===void 0&&(a=null),o===void 0&&(o=1),a===null&&(a=n,n=0);for(var r=[],h=Math.max(s((a-n)/(o||1)),0),d=0;d<h;d++)r.push(n),n+=o;return r};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74),u=function(n,a,o,r){if(r===void 0&&(r=n),a<0||a>n.length-1)throw new Error("Index out of bounds");var h=s(n,a);return o&&o.call(r,h),h};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,o,r,h){if(a===void 0&&(a=0),o===void 0&&(o=n.length),h===void 0&&(h=n),s(n,a,o)){var d=o-a,l=n.splice(a,d);if(r)for(var f=0;f<l.length;f++){var c=l[f];r.call(h,c)}return l}else return[]};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74),u=function(n,a,o){a===void 0&&(a=0),o===void 0&&(o=n.length);var r=a+Math.floor(Math.random()*o);return s(n,r)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=s.indexOf(u),o=s.indexOf(n);return a!==-1&&o===-1?(s[a]=n,!0):!1};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);return n!==-1&&n>0&&(s.splice(n,1),s.unshift(u)),u};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,a,o,r,h){if(r===void 0&&(r=0),h===void 0&&(h=n.length),s(n,r,h))for(var d=r;d<h;d++){var l=n[d];l.hasOwnProperty(a)&&(l[a]=o)}return n};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===n)return s;var a=s.indexOf(u),o=s.indexOf(n);if(a<0||o<0)throw new Error("Supplied items must be elements of the same array");return s[a]=n,s[o]=u,s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(211),n=t(24),a=t(20),o=new s({Extends:u,initialize:function(h){u.call(this),this.checkQueue=!0,this.scene=h,this.systems=h.sys,h.sys.events.once(a.BOOT,this.boot,this),h.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(a.PRE_UPDATE,this.update,this),r.on(a.UPDATE,this.sceneUpdate,this),r.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,h){for(var d=this._active,l=d.length,f=0;f<l;f++){var c=d[f];c.active&&c.preUpdate.call(c,r,h)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var h=this.systems.events;h.off(a.PRE_UPDATE,this.update,this),h.off(a.UPDATE,this.sceneUpdate,this),h.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});n.register("UpdateList",o,"updateList"),e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){if(n===void 0&&(n=!1),a===void 0)return a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},a;var o=s.text,r=o.length,h=s.maxWidth,d=s.wordWrapCharCode,l=Number.MAX_VALUE,f=Number.MAX_VALUE,c=0,g=0,p=s.fontData.chars,x=s.fontData.lineHeight,y=s.letterSpacing,T=0,E=0,S=0,C=null,P=s._align,R=0,A=0,M=s.fontSize/s.fontData.size,O=M*s.scaleX,F=M*s.scaleY,I=null,B=0,V=[],U=Number.MAX_VALUE,Y=0,W=0,w=0,L,D=[],N=[],G=null;if(h>0){for(L=0;L<r;L++){if(S=o.charCodeAt(L),S===10){G!==null&&(D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F,cr:!0}),G=null),T=0,E+=x,I=null;continue}if(C=p[S],!!C){if(I!==null)var b=C.kerning[B];S===d?G!==null&&(D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F,cr:!1}),G=null):(G===null&&(G={word:"",i:L,x:T,y:E,w:0,h:x,cr:!1}),G.word=G.word.concat(o[L]),G.w+=C.xOffset+C.xAdvance+(b!==void 0?b:0)),T+=C.xAdvance+y,I=C,B=S}}G!==null&&D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F,cr:!1}),T=0,E=0,I=null,B=0;var z,X=0,H=[];for(L=0;L<D.length;L++){var $=D[L],J=$.x,K=$.x+$.w;if(z){var Z=J-(z.x+z.w);X=J-(Z+z.w),z=null}var k=J-X,Q=K-X;k>h||Q>h?(H.push($.i-1),$.cr?(H.push($.i+$.word.length),X=0,z=null):z=$):$.cr&&(H.push($.i+$.word.length),X=0,z=null)}var q=function(Et,yt,Xt){return Et.substr(0,yt)+Xt+Et.substr(yt+1)};for(L=H.length-1;L>=0;L--)o=q(o,H[L],`
`);a.wrappedText=o,r=o.length,D=[],G=null}var ot=0;for(L=0;L<r;L++){if(S=o.charCodeAt(L),S===10){G!==null&&(D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F}),G=null),T=0,E+=x,I=null,V[W]=w,w>Y&&(Y=w),w<U&&(U=w),W++,w=0;continue}if(C=p[S],!!C){if(R=T,A=E,I!==null){var st=C.kerning[B];R+=st!==void 0?st:0}l>R&&(l=R),f>A&&(f=A);var _=R+C.xAdvance,j=A+x;c<_&&(c=_),g<j&&(g=j);var ht=C.xOffset+C.xAdvance+(st!==void 0?st:0);S===d?G!==null&&(D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F}),G=null):(G===null&&(G={word:"",i:ot,x:T,y:E,w:0,h:x}),G.word=G.word.concat(o[L]),G.w+=ht),N.push({i:ot,char:o[L],code:S,x:(C.xOffset+T)*M,y:(C.yOffset+E)*M,w:C.width*M,h:C.height*M,t:E*M,r:_*M,b:x*M,line:W,glyph:C}),T+=C.xAdvance+y,I=C,B=S,w=_*M,ot++}}if(G!==null&&D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*F,w:G.w*O,h:G.h*F}),V[W]=w,w>Y&&(Y=w),w<U&&(U=w),P>0)for(var tt=0;tt<N.length;tt++){var at=N[tt];if(P===1){var Ut=(Y-V[at.line])/2;at.x+=Ut,at.r+=Ut}else if(P===2){var Yt=Y-V[at.line];at.x+=Yt,at.r+=Yt}}var pt=a.local,ft=a.global,Ct=a.lines;return pt.x=l*M,pt.y=f*M,pt.width=c*M,pt.height=g*M,ft.x=s.x-s._displayOriginX+l*O,ft.y=s.y-s._displayOriginY+f*F,ft.width=c*O,ft.height=g*F,Ct.shortest=U,Ct.longest=Y,Ct.lengths=V,u&&(pt.x=Math.ceil(pt.x),pt.y=Math.ceil(pt.y),pt.width=Math.ceil(pt.width),pt.height=Math.ceil(pt.height),ft.x=Math.ceil(ft.x),ft.y=Math.ceil(ft.y),ft.width=Math.ceil(ft.width),ft.height=Math.ceil(ft.height),Ct.shortest=Math.ceil(U),Ct.longest=Math.ceil(Y)),n&&(s._displayOriginX=s.originX*pt.width,s._displayOriginY=s.originY*pt.height,ft.x=s.x-s._displayOriginX*s.scaleX,ft.y=s.y-s._displayOriginY*s.scaleY,u&&(ft.x=Math.ceil(ft.x),ft.y=Math.ceil(ft.y))),a.words=D,a.characters=N,a.lines.height=x,a.scale=M,a.scaleX=s.scaleX,a.scaleY=s.scaleY,a};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(212),u=function(n,a,o,r,h,d,l){var f=n.sys.textures.get(o),c=f.get(r),g=n.sys.cache.xml.get(h);if(c&&g){var p=s(g,c,d,l,f);return n.sys.cache.bitmapFont.add(a,{data:p,texture:o,frame:r,fromAtlas:!0}),!0}else return!1};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1046),u=t(1048),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1047),u=t(19),n=t(12),a=function(o,r,h,d){var l=r._text,f=l.length;if(f!==0){h.addToRenderList(r);var c=o.pipelines.set(r.pipeline,r),g=u(r,h,d).calc,p=h.roundPixels,x=h.alpha,y=r.charColors,T=r.tintFill,E=n.getTintAppendFloatAlpha,S=E(r.tintTopLeft,x*r._alphaTL),C=E(r.tintTopRight,x*r._alphaTR),P=E(r.tintBottomLeft,x*r._alphaBL),R=E(r.tintBottomRight,x*r._alphaBR),A=r.frame.glTexture,M=c.setGameObject(r),O=r.getTextBounds(!1),F,I,B,V=O.characters,U=r.dropShadowX,Y=r.dropShadowY,W=U!==0||Y!==0;if(o.pipelines.preBatch(r),W){var w=r.dropShadowColor,L=r.dropShadowAlpha,D=E(w,x*L*r._alphaTL),N=E(w,x*L*r._alphaTR),G=E(w,x*L*r._alphaBL),b=E(w,x*L*r._alphaBR);for(F=0;F<V.length;F++)I=V[F],B=I.glyph,!(I.code===32||B.width===0||B.height===0)&&s(c,r,I,B,U,Y,g,p,D,N,G,b,1,A,M)}for(F=0;F<V.length;F++)if(I=V[F],B=I.glyph,!(I.code===32||B.width===0||B.height===0))if(y[I.i]){var z=y[I.i],X=z.tintEffect,H=E(z.tintTL,x*r._alphaTL),$=E(z.tintTR,x*r._alphaTR),J=E(z.tintBL,x*r._alphaBL),K=E(z.tintBR,x*r._alphaBR);s(c,r,I,B,0,0,g,p,H,$,J,K,X,A,M)}else s(c,r,I,B,0,0,g,p,S,C,P,R,T,A,M);o.pipelines.postBatch(r)}};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o,r,h,d,l,f,c,g,p,x,y){var T=n.x-u.displayOriginX+o,E=n.y-u.displayOriginY+r,S=T+n.w,C=E+n.h,P=h.getXRound(T,E,d),R=h.getYRound(T,E,d),A=h.getXRound(T,C,d),M=h.getYRound(T,C,d),O=h.getXRound(S,C,d),F=h.getYRound(S,C,d),I=h.getXRound(S,E,d),B=h.getYRound(S,E,d);s.batchQuad(u,P,R,A,M,O,F,I,B,a.u0,a.v0,a.u1,a.v1,l,f,c,g,p,x,y)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(30),u=function(n,a,o,r){var h=a._text,d=h.length,l=n.currentContext;if(!(d===0||!s(n,l,a,o,r))){o.addToRenderList(a);var f=a.fromAtlas?a.frame:a.texture.frames.__BASE,c=a.fontData.chars,g=a.fontData.lineHeight,p=a._letterSpacing,x=0,y=0,T=0,E=null,S=0,C=0,P=0,R=0,A=0,M=0,O=null,F=0,I=f.source.image,B=f.cutX,V=f.cutY,U=a._fontSize/a.fontData.size,Y=a._align,W=0,w=0,L=a.getTextBounds(!1);a.maxWidth>0&&(h=L.wrappedText,d=h.length);var D=a._bounds.lines;Y===1?w=(D.longest-D.lengths[0])/2:Y===2&&(w=D.longest-D.lengths[0]),l.translate(-a.displayOriginX,-a.displayOriginY);for(var N=o.roundPixels,G=0;G<d;G++){if(T=h.charCodeAt(G),T===10){W++,Y===1?w=(D.longest-D.lengths[W])/2:Y===2&&(w=D.longest-D.lengths[W]),x=0,y+=g,O=null;continue}if(E=c[T],!!E){if(S=B+E.x,C=V+E.y,P=E.width,R=E.height,A=E.xOffset+x,M=E.yOffset+y,O!==null){var b=E.kerning[F];A+=b!==void 0?b:0}A*=U,M*=U,A+=w,x+=E.xAdvance+p,O=E,F=T,!(P===0||R===0||T===32)&&(N&&(A=Math.round(A),M=Math.round(M)),l.save(),l.translate(A,M),l.scale(U,U),l.drawImage(I,S,C,P,R,0,0,P,R),l.restore())}}l.restore()}};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1050),u=t(1051),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=t(12),n=new s,a=function(o,r,h,d){var l=r.getRenderList();if(l.length!==0){var f=h.alpha*r.alpha;if(f!==0){h.addToRenderList(r);var c=o.pipelines.set(this.pipeline,r),g=h.scrollX*r.scrollFactorX,p=h.scrollY*r.scrollFactorY,x=n.copyFrom(h.matrix);d&&(x.multiplyWithOffset(d,-g,-p),g=0,p=0);var y=r.x-g,T=r.y-p,E=-1,S=!1,C=h.roundPixels;o.pipelines.preBatch(r);for(var P=0;P<l.length;P++){var R=l[P],A=R.frame,M=R.alpha*f;if(M!==0){var O=A.width,F=A.height,I=y+R.x+A.x,B=T+R.y+A.y;R.flipX&&(O*=-1,I+=A.width),R.flipY&&(F*=-1,B+=A.height);var V=I+O,U=B+F,Y=x.getX(I,B),W=x.getY(I,B),w=x.getX(V,U),L=x.getY(V,U),D=u.getTintAppendFloatAlpha(R.tint,M);if(A.sourceIndex!==E){var N=c.setGameObject(r,A);E=A.sourceIndex}C&&(Y=Math.round(Y),W=Math.round(W),w=Math.round(w),L=Math.round(L)),c.batchQuad(r,Y,W,Y,L,w,L,w,W,A.u0,A.v0,A.u1,A.v1,D,D,D,D,S,A.glTexture,N)&&(E=-1)}}o.pipelines.postBatch(r)}}};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o=u.getRenderList();if(o.length!==0){var r=s.currentContext,h=n.alpha*u.alpha;if(h!==0){n.addToRenderList(u),r.globalCompositeOperation=s.blendModes[u.blendMode],r.imageSmoothingEnabled=!(!s.antialias||u.frame.source.scaleMode);var d=u.x-n.scrollX*u.scrollFactorX,l=u.y-n.scrollY*u.scrollFactorY;r.save(),a&&a.copyToContext(r);for(var f=n.roundPixels,c=0;c<o.length;c++){var g=o[c],p=g.flipX||g.flipY,x=g.frame,y=x.canvasData,T=x.x,E=x.y,S=1,C=1,P=g.alpha*h;P!==0&&(r.globalAlpha=P,p?(g.flipX&&(S=-1,T-=y.width),g.flipY&&(C=-1,E-=y.height),r.save(),r.translate(g.x+d,g.y+l),r.scale(S,C),r.drawImage(x.source.image,y.x,y.y,y.width,y.height,T,E,y.width,y.height),r.restore()):(f&&(T=Math.round(T),E=Math.round(E)),r.drawImage(x.source.image,y.x,y.y,y.width,y.height,T+g.x+d,E+g.y+l,y.width,y.height)))}r.restore()}}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1053),u=t(1054),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u);var o=u.list,r=o.length;if(r!==0){var h=u.localTransform;a?(h.loadIdentity(),h.multiply(a),h.translate(u.x,u.y),h.rotate(u.rotation),h.scale(u.scaleX,u.scaleY)):h.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),s.pipelines.preBatch(u);var d=u.blendMode!==-1;d||s.setBlendMode(0);for(var l=u.alpha,f=u.scrollFactorX,c=u.scrollFactorY,g=0;g<r;g++){var p=o[g];if(!!p.willRender(n)){var x,y,T,E;if(p.alphaTopLeft!==void 0)x=p.alphaTopLeft,y=p.alphaTopRight,T=p.alphaBottomLeft,E=p.alphaBottomRight;else{var S=p.alpha;x=S,y=S,T=S,E=S}var C=p.scrollFactorX,P=p.scrollFactorY;!d&&p.blendMode!==s.currentBlendMode&&s.setBlendMode(p.blendMode);var R=p.mask;R&&R.preRenderWebGL(s,p,n);var A=p.type;A!==s.currentType&&(s.newType=!0,s.currentType=A),s.nextTypeMatch=g<r-1?o[g+1].type===s.currentType:!1,p.setScrollFactor(C*f,P*c),p.setAlpha(x*l,y*l,T*l,E*l),p.renderWebGL(s,p,n,h),p.setAlpha(x,y,T,E),p.setScrollFactor(C,P),R&&R.postRenderWebGL(s,n),s.newType=!1}}s.pipelines.postBatch(u)}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u);var o=u.list;if(o.length!==0){var r=u.localTransform;a?(r.loadIdentity(),r.multiply(a),r.translate(u.x,u.y),r.rotate(u.rotation),r.scale(u.scaleX,u.scaleY)):r.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var h=u.blendMode!==-1;h||s.setBlendMode(0);var d=u._alpha,l=u.scrollFactorX,f=u.scrollFactorY;u.mask&&u.mask.preRenderCanvas(s,null,n);for(var c=0;c<o.length;c++){var g=o[c];if(!!g.willRender(n)){var p=g.alpha,x=g.scrollFactorX,y=g.scrollFactorY;!h&&g.blendMode!==s.currentBlendMode&&s.setBlendMode(g.blendMode),g.setScrollFactor(x*l,y*f),g.setAlpha(p*d),g.renderCanvas(s,g,n,r),g.setAlpha(p),g.setScrollFactor(x,y)}}u.mask&&u.mask.postRenderCanvas(s)}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(443),u=t(443),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1058),u=t(1059),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(25),n=t(12),a=new u,o=function(r,h,d,l){var f=h.text,c=f.length;if(c!==0){d.addToRenderList(h);var g=r.pipelines.set(h.pipeline,h),p=s(h,d,l),x=p.sprite,y=p.calc,T=a,E=h.cropWidth>0||h.cropHeight>0;E&&(g.flush(),r.pushScissor(y.tx,y.ty,h.cropWidth*y.scaleX,h.cropHeight*y.scaleY));var S=h.frame,C=S.glTexture,P=h.tintFill,R=n.getTintAppendFloatAlpha(h.tintTopLeft,d.alpha*h._alphaTL),A=n.getTintAppendFloatAlpha(h.tintTopRight,d.alpha*h._alphaTR),M=n.getTintAppendFloatAlpha(h.tintBottomLeft,d.alpha*h._alphaBL),O=n.getTintAppendFloatAlpha(h.tintBottomRight,d.alpha*h._alphaBR),F=g.setGameObject(h),I=0,B=0,V=0,U=0,Y=h.letterSpacing,W,w=0,L=0,D,N=h.scrollX,G=h.scrollY,b=h.fontData,z=b.chars,X=b.lineHeight,H=h.fontSize/b.size,$=0,J=h._align,K=0,Z=0,k=h.getTextBounds(!1);h.maxWidth>0&&(f=k.wrappedText,c=f.length);var Q=h._bounds.lines;J===1?Z=(Q.longest-Q.lengths[0])/2:J===2&&(Z=Q.longest-Q.lengths[0]);var q=d.roundPixels,ot=h.displayCallback,st=h.callbackData;r.pipelines.preBatch(h);for(var _=0;_<c;_++){if(V=f.charCodeAt(_),V===10){K++,J===1?Z=(Q.longest-Q.lengths[K])/2:J===2&&(Z=Q.longest-Q.lengths[K]),I=0,B+=X,D=null;continue}if(W=z[V],!!W){w=W.width,L=W.height;var j=W.xOffset+I-N,ht=W.yOffset+B-G;if(D!==null){var tt=W.kerning[U];j+=tt!==void 0?tt:0}if(I+=W.xAdvance+Y,D=W,U=V,!(w===0||L===0||V===32)){if(H=h.fontSize/h.fontData.size,$=0,ot){st.color=0,st.tint.topLeft=R,st.tint.topRight=A,st.tint.bottomLeft=M,st.tint.bottomRight=O,st.index=_,st.charCode=V,st.x=j,st.y=ht,st.scale=H,st.rotation=$,st.data=W.data;var at=ot(st);j=at.x,ht=at.y,H=at.scale,$=at.rotation,at.color?(R=at.color,A=at.color,M=at.color,O=at.color):(R=at.tint.topLeft,A=at.tint.topRight,M=at.tint.bottomLeft,O=at.tint.bottomRight),R=n.getTintAppendFloatAlpha(R,d.alpha*h._alphaTL),A=n.getTintAppendFloatAlpha(A,d.alpha*h._alphaTR),M=n.getTintAppendFloatAlpha(M,d.alpha*h._alphaBL),O=n.getTintAppendFloatAlpha(O,d.alpha*h._alphaBR)}j*=H,ht*=H,j-=h.displayOriginX,ht-=h.displayOriginY,j+=Z,T.applyITRS(j,ht,$,H,H),y.multiply(T,x);var Ut=W.u0,Yt=W.v0,pt=W.u1,ft=W.v1,Ct=w,Et=L,yt=x.e,Xt=x.f,Ae=Et*x.c+x.e,Oe=Et*x.d+x.f,Le=Ct*x.a+Et*x.c+x.e,Fe=Ct*x.b+Et*x.d+x.f,Ie=Ct*x.a+x.e,we=Ct*x.b+x.f;q&&(yt=Math.round(yt),Xt=Math.round(Xt),Ae=Math.round(Ae),Oe=Math.round(Oe),Le=Math.round(Le),Fe=Math.round(Fe),Ie=Math.round(Ie),we=Math.round(we)),g.batchQuad(h,yt,Xt,Ae,Oe,Le,Fe,Ie,we,Ut,Yt,pt,ft,R,A,M,O,P,C,F)}}}E&&(g.flush(),r.popScissor()),r.pipelines.postBatch(h)}};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(30),u=function(n,a,o,r){var h=a._text,d=h.length,l=n.currentContext;if(!(d===0||!s(n,l,a,o,r))){o.addToRenderList(a);var f=a.fromAtlas?a.frame:a.texture.frames.__BASE,c=a.displayCallback,g=a.callbackData,p=a.fontData.chars,x=a.fontData.lineHeight,y=a._letterSpacing,T=0,E=0,S=0,C=null,P=0,R=0,A=0,M=0,O=0,F=0,I=null,B=0,V=a.frame.source.image,U=f.cutX,Y=f.cutY,W=0,w=0,L=a._fontSize/a.fontData.size,D=a._align,N=0,G=0;a.getTextBounds(!1);var b=a._bounds.lines;D===1?G=(b.longest-b.lengths[0])/2:D===2&&(G=b.longest-b.lengths[0]),l.translate(-a.displayOriginX,-a.displayOriginY);var z=o.roundPixels;a.cropWidth>0&&a.cropHeight>0&&(l.beginPath(),l.rect(0,0,a.cropWidth,a.cropHeight),l.clip());for(var X=0;X<d;X++){if(w=L,W=0,S=h.charCodeAt(X),S===10){N++,D===1?G=(b.longest-b.lengths[N])/2:D===2&&(G=b.longest-b.lengths[N]),T=0,E+=x,I=null;continue}if(C=p[S],!!C){if(P=U+C.x,R=Y+C.y,A=C.width,M=C.height,O=C.xOffset+T-a.scrollX,F=C.yOffset+E-a.scrollY,I!==null){var H=C.kerning[B];O+=H!==void 0?H:0}if(c){g.index=X,g.charCode=S,g.x=O,g.y=F,g.scale=w,g.rotation=W,g.data=C.data;var $=c(g);O=$.x,F=$.y,w=$.scale,W=$.rotation}O*=w,F*=w,O+=G,T+=C.xAdvance+y,I=C,B=S,!(A===0||M===0||S===32)&&(z&&(O=Math.round(O),F=Math.round(F)),l.save(),l.translate(O,F),l.rotate(W),l.scale(w,w),l.drawImage(V,P,R,A,M,0,0,A,M),l.restore())}}l.restore()}};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1061),u=t(1062),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,a,o,r){n.pipelines.clear();var h=s(a,o,r).calc;a.render.call(a,n,o,h),n.pipelines.rebind()};e.exports=u},function(e,v){},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1064),u=t(448),u=t(448),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(217),u=t(19),n=t(25),a=t(12),o=function(f,c,g){this.x=f,this.y=c,this.width=g},r=function(f,c,g){this.points=[],this.pointsLength=1,this.points[0]=new o(f,c,g)},h=[],d=new n,l=function(f,c,g,p){if(c.commandBuffer.length!==0){g.addToRenderList(c);var x=f.pipelines.set(c.pipeline,c);f.pipelines.preBatch(c);for(var y=u(c,g,p).calc,T=d.loadIdentity(),E=c.commandBuffer,S=g.alpha*c.alpha,C=1,P=x.fillTint,R=x.strokeTint,A=0,M=0,O=0,F=.01,I=Math.PI*2,B,V=[],U=0,Y=!0,W=null,w=a.getTintAppendFloatAlpha,L=0;L<E.length;L++)switch(B=E[L],B){case s.BEGIN_PATH:{V.length=0,W=null,Y=!0;break}case s.CLOSE_PATH:{Y=!1,W&&W.points.length&&W.points.push(W.points[0]);break}case s.FILL_PATH:{for(U=0;U<V.length;U++)x.batchFillPath(V[U].points,T,y);break}case s.STROKE_PATH:{for(U=0;U<V.length;U++)x.batchStrokePath(V[U].points,C,Y,T,y);break}case s.LINE_STYLE:{C=E[++L];var D=E[++L],N=E[++L]*S,G=w(D,N);R.TL=G,R.TR=G,R.BL=G,R.BR=G;break}case s.FILL_STYLE:{var b=E[++L],z=E[++L]*S,X=w(b,z);P.TL=X,P.TR=X,P.BL=X,P.BR=X;break}case s.GRADIENT_FILL_STYLE:{var H=E[++L]*S,$=E[++L]*S,J=E[++L]*S,K=E[++L]*S;P.TL=w(E[++L],H),P.TR=w(E[++L],$),P.BL=w(E[++L],J),P.BR=w(E[++L],K);break}case s.GRADIENT_LINE_STYLE:{C=E[++L];var Z=E[++L]*S;R.TL=w(E[++L],Z),R.TR=w(E[++L],Z),R.BL=w(E[++L],Z),R.BR=w(E[++L],Z);break}case s.ARC:{var k=0,Q=E[++L],q=E[++L],ot=E[++L],st=E[++L],_=E[++L],j=E[++L],ht=E[++L];for(_-=st,j?_<-I?_=-I:_>0&&(_=-I+_%I):_>I?_=I:_<0&&(_=I+_%I),W===null&&(W=new r(Q+Math.cos(st)*ot,q+Math.sin(st)*ot,C),V.push(W),k+=F);k<1+ht;)O=_*k+st,A=Q+Math.cos(O)*ot,M=q+Math.sin(O)*ot,W.points.push(new o(A,M,C)),k+=F;O=_+st,A=Q+Math.cos(O)*ot,M=q+Math.sin(O)*ot,W.points.push(new o(A,M,C));break}case s.FILL_RECT:{x.batchFillRect(E[++L],E[++L],E[++L],E[++L],T,y);break}case s.FILL_TRIANGLE:{x.batchFillTriangle(E[++L],E[++L],E[++L],E[++L],E[++L],E[++L],T,y);break}case s.STROKE_TRIANGLE:{x.batchStrokeTriangle(E[++L],E[++L],E[++L],E[++L],E[++L],E[++L],C,T,y);break}case s.LINE_TO:{W!==null?W.points.push(new o(E[++L],E[++L],C)):(W=new r(E[++L],E[++L],C),V.push(W));break}case s.MOVE_TO:{W=new r(E[++L],E[++L],C),V.push(W);break}case s.SAVE:{h.push(T.copyToArray());break}case s.RESTORE:{T.copyFromArray(h.pop());break}case s.TRANSLATE:{Q=E[++L],q=E[++L],T.translate(Q,q);break}case s.SCALE:{Q=E[++L],q=E[++L],T.scale(Q,q);break}case s.ROTATE:{T.rotate(E[++L]);break}}f.pipelines.postBatch(c)}};e.exports=l},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1066),u=t(1067),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u),u.pipeline.batchSprite(u,n,a)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u),s.batchSprite(u,u.frame,n,a)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1069),u=t(1070),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u),this.pipeline.batchSprite(u,n,a)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u),s.batchSprite(u,u.frame,n,a)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1072),u=t(1073),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=u.list,o=a.length;if(o!==0){u.depthSort(),s.pipelines.preBatch(u);var r=u.blendMode!==-1;r||s.setBlendMode(0);for(var h=u.alpha,d=0;d<o;d++){var l=a[d];if(!!l.willRender(n)){var f,c,g,p;if(l.alphaTopLeft!==void 0)f=l.alphaTopLeft,c=l.alphaTopRight,g=l.alphaBottomLeft,p=l.alphaBottomRight;else{var x=l.alpha;f=x,c=x,g=x,p=x}!r&&l.blendMode!==s.currentBlendMode&&s.setBlendMode(l.blendMode);var y=l.mask;y&&y.preRenderWebGL(s,l,n);var T=l.type;T!==s.currentType&&(s.newType=!0,s.currentType=T),s.nextTypeMatch=d<o-1?a[d+1].type===s.currentType:!1,l.setAlpha(f*h,c*h,g*h,p*h),l.renderWebGL(s,l,n),l.setAlpha(f,c,g,p),y&&y.postRenderWebGL(s,n),s.newType=!1}}s.pipelines.postBatch(u)}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=u.list;if(a.length!==0){u.depthSort();var o=u.blendMode!==-1;o||s.setBlendMode(0);var r=u._alpha;u.mask&&u.mask.preRenderCanvas(s,null,n);for(var h=0;h<a.length;h++){var d=a[h];if(!!d.willRender(n)){var l=d.alpha;!o&&d.blendMode!==s.currentBlendMode&&s.setBlendMode(d.blendMode),d.setAlpha(l*r),d.renderCanvas(s,d,n),d.setAlpha(l)}}u.mask&&u.mask.postRenderCanvas(s)}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EmitterOp:t(449),GravityWell:t(450),Particle:t(451),ParticleEmitter:t(452),ParticleEmitterManager:t(220),Zones:t(1078)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1076),u=t(1077),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=t(12),n=new s,a=new s,o=new s,r=new s,h=function(d,l,f,c){var g=l.emitters.list,p=g.length;if(p!==0){var x=d.pipelines.set(l.pipeline),y=n,T=a,E=o,S=r;c?(S.loadIdentity(),S.multiply(c),S.translate(l.x,l.y),S.rotate(l.rotation),S.scale(l.scaleX,l.scaleY)):S.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var C=f.roundPixels,P=l.defaultFrame.glTexture,R=u.getTintAppendFloatAlpha,A=x.setGameObject(l,l.defaultFrame);d.pipelines.preBatch(l);for(var M=0;M<p;M++){var O=g[M],F=O.alive,I=F.length;if(!(!O.visible||I===0)){f.addToRenderList(O);var B=O.scrollFactorX,V=O.scrollFactorY;d.setBlendMode(O.blendMode),O.mask&&(O.mask.preRenderWebGL(d,O,f),d.pipelines.set(l.pipeline));for(var U=0,Y=0;Y<I;Y++){var W=F[Y],w=W.alpha*f.alpha;if(!(w<=0)){E.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),y.copyFrom(f.matrix),y.multiplyWithOffset(S,-f.scrollX*B,-f.scrollY*V),E.e=W.x,E.f=W.y,y.multiply(E,T);var L=W.frame,D=-L.halfWidth,N=-L.halfHeight,G=D+L.width,b=N+L.height,z=T.getXRound(D,N,C),X=T.getYRound(D,N,C),H=T.getXRound(D,b,C),$=T.getYRound(D,b,C),J=T.getXRound(G,b,C),K=T.getYRound(G,b,C),Z=T.getXRound(G,N,C),k=T.getYRound(G,N,C),Q=R(W.tint,w);x.batchQuad(O,z,X,H,$,J,K,Z,k,L.u0,L.v0,L.u1,L.v1,Q,Q,Q,Q,U,P,A)}}O.mask&&O.mask.postRenderWebGL(d,f)}}d.pipelines.postBatch(l)}};e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=new s,n=new s,a=new s,o=new s,r=function(h,d,l,f){var c=d.emitters.list,g=c.length;if(g!==0){var p=u.copyFrom(l.matrix),x=n,y=a,T=o;f?(T.loadIdentity(),T.multiply(f),T.translate(d.x,d.y),T.rotate(d.rotation),T.scale(d.scaleX,d.scaleY)):T.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);for(var E=h.currentContext,S=l.roundPixels,C=0;C<g;C++){var P=c[C],R=P.alive,A=R.length;if(!(!P.visible||A===0)){l.addToRenderList(P);var M=P.scrollFactorX,O=P.scrollFactorY;E.save(),E.globalCompositeOperation=h.blendModes[P.blendMode];for(var F=0;F<A;F++){var I=R[F],B=I.alpha*l.alpha;if(!(B<=0)){y.applyITRS(I.x,I.y,I.rotation,I.scaleX,I.scaleY),p.copyFrom(l.matrix),p.multiplyWithOffset(T,-l.scrollX*M,-l.scrollY*O),y.e=I.x,y.f=I.y,p.multiply(y,x);var V=I.frame,U=V.canvasData,Y=-V.halfWidth,W=-V.halfHeight;E.globalAlpha=B,E.save(),x.setToContext(E),S&&(Y=Math.round(Y),W=Math.round(W)),E.imageSmoothingEnabled=!(!h.antialias||V.source.scaleMode),E.drawImage(V.source.image,U.x,U.y,U.width,U.height,Y,W,U.width,U.height),E.restore()}}E.restore()}}}};e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DeathZone:t(453),EdgeZone:t(454),RandomZone:t(456)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1080),u=t(1081),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,o,r){o.addToRenderList(a);var h=o.alpha,d=a.renderTarget,l=d.width,f=d.height,c=s.getTintAppendFloatAlpha,g=n.pipelines.set(a.pipeline),p=g.setTexture2D(d.texture);n.pipelines.preBatch(a),g.batchTexture(a,d.texture,l,f,a.x,a.y,l,f,a.scaleX,a.scaleY,a.rotation,a.flipX,!a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,l,f,c(a.tintTopLeft,h*a._alphaTL),c(a.tintTopRight,h*a._alphaTR),c(a.tintBottomLeft,h*a._alphaBL),c(a.tintBottomRight,h*a._alphaBR),a.tintFill,0,0,o,r,!0,p),n.resetTextures(),n.pipelines.postBatch(a)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){n.addToRenderList(u),s.batchSprite(u,u.frame,n,a)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1083),u=t(17),n={Parse:t(1084)};n=u(!1,n,s),e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=function(n,a){var o=a.width,r=a.height,h=Math.floor(o/2),d=Math.floor(r/2),l=s(a,"chars","");if(l!==""){var f=s(a,"image",""),c=n.sys.textures.getFrame(f),g=c.cutX,p=c.cutY,x=c.source.width,y=c.source.height,T=s(a,"offset.x",0),E=s(a,"offset.y",0),S=s(a,"spacing.x",0),C=s(a,"spacing.y",0),P=s(a,"lineSpacing",0),R=s(a,"charsPerRow",null);R===null&&(R=x/o,R>l.length&&(R=l.length));for(var A=T,M=E,O={retroFont:!0,font:f,size:o,lineHeight:r+P,chars:{}},F=0,I=0;I<l.length;I++){var B=l.charCodeAt(I),V=(g+A)/x,U=(p+M)/y,Y=(g+A+o)/x,W=(p+M+r)/y;O.chars[B]={x:A,y:M,width:o,height:r,centerX:h,centerY:d,xOffset:0,yOffset:0,xAdvance:o,data:{},kerning:{},u0:V,v0:U,u1:Y,v1:W},F++,F===R?(F=0,A=T,M+=r+C):A+=o+S}var w={data:O,frame:null,texture:f};return w}};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1086),u=t(1087),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(a,o,r,h){r.addToRenderList(o);var d=a.pipelines.set(o.pipeline,o),l=s(o,r,h).calc,f=o.vertices,c=o.uv,g=o.colors,p=o.alphas,x=o.alpha,y=u.getTintAppendFloatAlpha,T=r.roundPixels,E=f.length,S=Math.floor(E*.5);d.flush(),a.pipelines.preBatch(o);var C=d.setGameObject(o),P=d.vertexViewF32,R=d.vertexViewU32,A=d.vertexCount*d.currentShader.vertexComponentCount-1,M=0,O=o.tintFill;o.dirty&&o.updateVertices();for(var F=o.debugCallback,I=[],B=0;B<E;B+=2){var V=f[B+0],U=f[B+1],Y=V*l.a+U*l.c+l.e,W=V*l.b+U*l.d+l.f;T&&(Y=Math.round(Y),W=Math.round(W)),P[++A]=Y,P[++A]=W,P[++A]=c[B+0],P[++A]=c[B+1],P[++A]=C,P[++A]=O,R[++A]=y(g[M],r.alpha*(p[M]*x)),M++,F&&(I[B+0]=Y,I[B+1]=W)}F&&F.call(o,o,E,I),d.vertexCount+=S,a.pipelines.postBatch(o)};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1089),u=t(1090),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,o,r){if(!(a.width===0||a.height===0)){o.addToRenderList(a);var h=a.frame,d=h.width,l=h.height,f=s.getTintAppendFloatAlpha,c=n.pipelines.set(a.pipeline,a),g=c.setTexture2D(h.glTexture,a);n.pipelines.preBatch(a),c.batchTexture(a,h.glTexture,d,l,a.x,a.y,d/a.style.resolution,l/a.style.resolution,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,d,l,f(a.tintTopLeft,o.alpha*a._alphaTL),f(a.tintTopRight,o.alpha*a._alphaTR),f(a.tintBottomLeft,o.alpha*a._alphaBL),f(a.tintBottomRight,o.alpha*a._alphaBR),a.tintFill,0,0,o,r,!1,g),n.pipelines.postBatch(a)}};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u.width===0||u.height===0||(n.addToRenderList(u),s.batchSprite(u,u.frame,n,a))};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1092),u=t(1093),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,o,r){a.updateCanvas();var h=a.width,d=a.height;if(!(h===0||d===0)){o.addToRenderList(a),n.pipelines.preBatch(a);var l=s.getTintAppendFloatAlpha,f=n.pipelines.set(a.pipeline,a),c=f.setTexture2D(a.fillPattern,a);f.batchTexture(a,a.fillPattern,a.displayFrame.width*a.tileScaleX,a.displayFrame.height*a.tileScaleY,a.x,a.y,h,d,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.originX*h,a.originY*d,0,0,h,d,l(a.tintTopLeft,o.alpha*a._alphaTL),l(a.tintTopRight,o.alpha*a._alphaTR),l(a.tintBottomLeft,o.alpha*a._alphaBL),l(a.tintBottomRight,o.alpha*a._alphaBR),a.tintFill,a.tilePositionX%a.displayFrame.width/a.displayFrame.width,a.tilePositionY%a.displayFrame.height/a.displayFrame.height,o,r,!1,c),n.pipelines.postBatch(a)}};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u.updateCanvas(),n.addToRenderList(u),s.batchSprite(u,u.frame,n,a)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1095),u=t(1096),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u.videoTexture&&(n.addToRenderList(u),u.pipeline.batchSprite(u,n,a))};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u.videoTexture&&(n.addToRenderList(u),s.batchSprite(u,u.frame,n,a))};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1098),u=t(1099),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(114),n=t(81),a=function(o,r,h,d){h.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=s(r,h,d),c=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,p=r._displayOriginY,x=h.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&u(l,c,r,x,g,p),r.isStroked&&n(l,r,x,g,p),o.pipelines.postBatch(r)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36),u=t(48),n=t(60),a=t(30),o=function(r,h,d,l){d.addToRenderList(h);var f=r.currentContext;if(a(r,f,h,d,l)){var c=h.radius;f.beginPath(),f.arc(c-h.originX*(c*2),c-h.originY*(c*2),c,s(h._startAngle),s(h._endAngle),h.anticlockwise),h.closePath&&f.closePath(),h.isFilled&&(u(f,h),f.fill()),h.isStroked&&(n(f,h),f.stroke()),f.restore()}};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1101),u=t(1102),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),a=function(o,r,h,d){h.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=u(r,h,d),c=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX+r._curveBounds.x,p=r._displayOriginY+r._curveBounds.y,x=h.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&s(l,c,r,x,g,p),r.isStroked&&n(l,r,x,g,p),o.pipelines.postBatch(r)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(o,r,h,d){h.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,h,d)){var f=r._displayOriginX+r._curveBounds.x,c=r._displayOriginY+r._curveBounds.y,g=r.pathData,p=g.length-1,x=g[0]-f,y=g[1]-c;l.beginPath(),l.moveTo(x,y),r.closePath||(p-=2);for(var T=2;T<p;T+=2){var E=g[T]-f,S=g[T+1]-c;l.lineTo(E,S)}r.closePath&&l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1104),u=t(1105),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),a=function(o,r,h,d){h.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=u(r,h,d),c=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,p=r._displayOriginY,x=h.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&s(l,c,r,x,g,p),r.isStroked&&n(l,r,x,g,p),o.pipelines.postBatch(r)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(o,r,h,d){h.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,h,d)){var f=r._displayOriginX,c=r._displayOriginY,g=r.pathData,p=g.length-1,x=g[0]-f,y=g[1]-c;l.beginPath(),l.moveTo(x,y),r.closePath||(p-=2);for(var T=2;T<p;T+=2){var E=g[T]-f,S=g[T+1]-c;l.lineTo(E,S)}l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1107),u=t(1108),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(a,o,r,h){r.addToRenderList(o);var d=a.pipelines.set(o.pipeline),l=s(o,r,h),f=d.calcMatrix.copyFrom(l.calc);f.translate(-o._displayOriginX,-o._displayOriginY);var c=r.alpha*o.alpha,g=o.width,p=o.height,x=o.cellWidth,y=o.cellHeight,T=Math.ceil(g/x),E=Math.ceil(p/y),S=x,C=y,P=x-(T*x-g),R=y-(E*y-p),A,M,O=o.showCells,F=o.showAltCells,I=o.showOutline,B=0,V=0,U=0,Y=0,W=0;if(I&&(S--,C--,P===x&&P--,R===y&&R--),a.pipelines.preBatch(o),O&&o.fillAlpha>0)for(A=d.fillTint,M=u.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*c),A.TL=M,A.TR=M,A.BL=M,A.BR=M,V=0;V<E;V++)for(F&&(U=V%2),B=0;B<T;B++){if(F&&U){U=0;continue}U++,Y=B<T-1?S:P,W=V<E-1?C:R,d.batchFillRect(B*x,V*y,Y,W)}if(F&&o.altFillAlpha>0)for(A=d.fillTint,M=u.getTintAppendFloatAlpha(o.altFillColor,o.altFillAlpha*c),A.TL=M,A.TR=M,A.BL=M,A.BR=M,V=0;V<E;V++)for(F&&(U=V%2),B=0;B<T;B++){if(F&&!U){U=1;continue}U=0,Y=B<T-1?S:P,W=V<E-1?C:R,d.batchFillRect(B*x,V*y,Y,W)}if(I&&o.outlineFillAlpha>0){var w=d.strokeTint,L=u.getTintAppendFloatAlpha(o.outlineFillColor,o.outlineFillAlpha*c);for(w.TL=L,w.TR=L,w.BL=L,w.BR=L,B=1;B<T;B++){var D=B*x;d.batchLine(D,0,D,p,1,1,1,0,!1)}for(V=1;V<E;V++){var N=V*y;d.batchLine(0,N,g,N,1,1,1,0,!1)}}a.pipelines.postBatch(o)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(o,r,h,d){h.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,h,d)){var f=-r._displayOriginX,c=-r._displayOriginY,g=h.alpha*r.alpha,p=r.width,x=r.height,y=r.cellWidth,T=r.cellHeight,E=Math.ceil(p/y),S=Math.ceil(x/T),C=y,P=T,R=y-(E*y-p),A=T-(S*T-x),M=r.showCells,O=r.showAltCells,F=r.showOutline,I=0,B=0,V=0,U=0,Y=0;if(F&&(C--,P--,R===y&&R--,A===T&&A--),M&&r.fillAlpha>0)for(s(l,r),B=0;B<S;B++)for(O&&(V=B%2),I=0;I<E;I++){if(O&&V){V=0;continue}V++,U=I<E-1?C:R,Y=B<S-1?P:A,l.fillRect(f+I*y,c+B*T,U,Y)}if(O&&r.altFillAlpha>0)for(s(l,r,r.altFillColor,r.altFillAlpha*g),B=0;B<S;B++)for(O&&(V=B%2),I=0;I<E;I++){if(O&&!V){V=1;continue}V=0,U=I<E-1?C:R,Y=B<S-1?P:A,l.fillRect(f+I*y,c+B*T,U,Y)}if(F&&r.outlineFillAlpha>0){for(u(l,r,r.outlineFillColor,r.outlineFillAlpha*g),I=1;I<E;I++){var W=I*y;l.beginPath(),l.moveTo(W+f,c),l.lineTo(W+f,x+c),l.stroke()}for(B=1;B<S;B++){var w=B*T;l.beginPath(),l.moveTo(f,w+c),l.lineTo(f+p,w+c),l.stroke()}}l.restore()}};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1110),u=t(1111),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(a,o,r,h){r.addToRenderList(o);var d=a.pipelines.set(o.pipeline),l=s(o,r,h),f=d.calcMatrix.copyFrom(l.calc),c=o.width,g=o.height,p=c/2,x=c/o.projection,y=r.alpha*o.alpha;if(!!o.isFilled){var T,E,S,C,P,R,A,M,O;a.pipelines.preBatch(o),o.showTop&&(T=u.getTintAppendFloatAlpha(o.fillTop,y),E=f.getX(-p,-g),S=f.getY(-p,-g),C=f.getX(0,-x-g),P=f.getY(0,-x-g),R=f.getX(p,-g),A=f.getY(p,-g),M=f.getX(0,x-g),O=f.getY(0,x-g),d.batchQuad(o,E,S,C,P,R,A,M,O,0,0,1,1,T,T,T,T,2)),o.showLeft&&(T=u.getTintAppendFloatAlpha(o.fillLeft,y),E=f.getX(-p,0),S=f.getY(-p,0),C=f.getX(0,x),P=f.getY(0,x),R=f.getX(0,x-g),A=f.getY(0,x-g),M=f.getX(-p,-g),O=f.getY(-p,-g),d.batchQuad(o,E,S,C,P,R,A,M,O,0,0,1,1,T,T,T,T,2)),o.showRight&&(T=u.getTintAppendFloatAlpha(o.fillRight,y),E=f.getX(p,0),S=f.getY(p,0),C=f.getX(0,x),P=f.getY(0,x),R=f.getX(0,x-g),A=f.getY(0,x-g),M=f.getX(p,-g),O=f.getY(p,-g),d.batchQuad(o,E,S,C,P,R,A,M,O,0,0,1,1,T,T,T,T,2)),a.pipelines.postBatch(o)}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(30),n=function(a,o,r,h){r.addToRenderList(o);var d=a.currentContext;if(u(a,d,o,r,h)&&o.isFilled){var l=o.width,f=o.height,c=l/2,g=l/o.projection;o.showTop&&(s(d,o,o.fillTop),d.beginPath(),d.moveTo(-c,-f),d.lineTo(0,-g-f),d.lineTo(c,-f),d.lineTo(c,-1),d.lineTo(0,g-1),d.lineTo(-c,-1),d.lineTo(-c,-f),d.fill()),o.showLeft&&(s(d,o,o.fillLeft),d.beginPath(),d.moveTo(-c,0),d.lineTo(0,g),d.lineTo(0,g-f),d.lineTo(-c,-f),d.lineTo(-c,0),d.fill()),o.showRight&&(s(d,o,o.fillRight),d.beginPath(),d.moveTo(c,0),d.lineTo(0,g),d.lineTo(0,g-f),d.lineTo(c,-f),d.lineTo(c,0),d.fill()),d.restore()}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1113),u=t(1114),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(a,o,r,h){r.addToRenderList(o);var d=a.pipelines.set(o.pipeline),l=s(o,r,h),f=d.calcMatrix.copyFrom(l.calc),c=o.width,g=o.height,p=c/2,x=c/o.projection,y=o.isReversed,T=r.alpha*o.alpha;if(!!o.isFilled){a.pipelines.preBatch(o);var E,S,C,P,R,A,M;if(o.showTop&&y){E=u.getTintAppendFloatAlpha(o.fillTop,T),S=f.getX(-p,-g),C=f.getY(-p,-g),P=f.getX(0,-x-g),R=f.getY(0,-x-g),A=f.getX(p,-g),M=f.getY(p,-g);var O=f.getX(0,x-g),F=f.getY(0,x-g);d.batchQuad(o,S,C,P,R,A,M,O,F,0,0,1,1,E,E,E,E,2)}o.showLeft&&(E=u.getTintAppendFloatAlpha(o.fillLeft,T),y?(S=f.getX(-p,-g),C=f.getY(-p,-g),P=f.getX(0,x),R=f.getY(0,x),A=f.getX(0,x-g),M=f.getY(0,x-g)):(S=f.getX(-p,0),C=f.getY(-p,0),P=f.getX(0,x),R=f.getY(0,x),A=f.getX(0,x-g),M=f.getY(0,x-g)),d.batchTri(o,S,C,P,R,A,M,0,0,1,1,E,E,E,2)),o.showRight&&(E=u.getTintAppendFloatAlpha(o.fillRight,T),y?(S=f.getX(p,-g),C=f.getY(p,-g),P=f.getX(0,x),R=f.getY(0,x),A=f.getX(0,x-g),M=f.getY(0,x-g)):(S=f.getX(p,0),C=f.getY(p,0),P=f.getX(0,x),R=f.getY(0,x),A=f.getX(0,x-g),M=f.getY(0,x-g)),d.batchTri(o,S,C,P,R,A,M,0,0,1,1,E,E,E,2)),a.pipelines.postBatch(o)}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(30),n=function(a,o,r,h){r.addToRenderList(o);var d=a.currentContext;if(u(a,d,o,r,h)&&o.isFilled){var l=o.width,f=o.height,c=l/2,g=l/o.projection,p=o.isReversed;o.showTop&&p&&(s(d,o,o.fillTop),d.beginPath(),d.moveTo(-c,-f),d.lineTo(0,-g-f),d.lineTo(c,-f),d.lineTo(0,g-f),d.fill()),o.showLeft&&(s(d,o,o.fillLeft),d.beginPath(),p?(d.moveTo(-c,-f),d.lineTo(0,g),d.lineTo(0,g-f)):(d.moveTo(-c,0),d.lineTo(0,g),d.lineTo(0,g-f)),d.fill()),o.showRight&&(s(d,o,o.fillRight),d.beginPath(),p?(d.moveTo(c,-f),d.lineTo(0,g),d.lineTo(0,g-f)):(d.moveTo(c,0),d.lineTo(0,g),d.lineTo(0,g-f)),d.fill()),d.restore()}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1116),u=t(1117),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(a,o,r,h){r.addToRenderList(o);var d=a.pipelines.set(o.pipeline),l=s(o,r,h);d.calcMatrix.copyFrom(l.calc);var f=o._displayOriginX,c=o._displayOriginY,g=r.alpha*o.alpha;if(a.pipelines.preBatch(o),o.isStroked){var p=d.strokeTint,x=u.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*g);p.TL=x,p.TR=x,p.BL=x,p.BR=x;var y=o._startWidth,T=o._endWidth;d.batchLine(o.geom.x1-f,o.geom.y1-c,o.geom.x2-f,o.geom.y2-c,y,T,1,0,!1,l.sprite,l.camera)}a.pipelines.postBatch(o)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(60),u=t(30),n=function(a,o,r,h){r.addToRenderList(o);var d=a.currentContext;if(u(a,d,o,r,h)){var l=o._displayOriginX,f=o._displayOriginY;o.isStroked&&(s(d,o),d.beginPath(),d.moveTo(o.geom.x1-l,o.geom.y1-f),d.lineTo(o.geom.x2-l,o.geom.y2-f),d.stroke()),d.restore()}};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1119),u=t(1120),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),a=function(o,r,h,d){h.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=u(r,h,d),c=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,p=r._displayOriginY,x=h.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&s(l,c,r,x,g,p),r.isStroked&&n(l,r,x,g,p),o.pipelines.postBatch(r)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(o,r,h,d){h.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,h,d)){var f=r._displayOriginX,c=r._displayOriginY,g=r.pathData,p=g.length-1,x=g[0]-f,y=g[1]-c;l.beginPath(),l.moveTo(x,y),r.closePath||(p-=2);for(var T=2;T<p;T+=2){var E=g[T]-f,S=g[T+1]-c;l.lineTo(E,S)}l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1122),u=t(1123),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(81),n=t(12),a=function(o,r,h,d){h.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=s(r,h,d);l.calcMatrix.copyFrom(f.calc);var c=r._displayOriginX,g=r._displayOriginY,p=h.alpha*r.alpha;if(o.pipelines.preBatch(r),r.isFilled){var x=l.fillTint,y=n.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*p);x.TL=y,x.TR=y,x.BL=y,x.BR=y,l.batchFillRect(-c,-g,r.width,r.height)}r.isStroked&&u(l,r,p,c,g),o.pipelines.postBatch(r)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(o,r,h,d){h.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,h,d)){var f=r._displayOriginX,c=r._displayOriginY;r.isFilled&&(s(l,r),l.fillRect(-f,-c,r.width,r.height)),r.isStroked&&(u(l,r),l.beginPath(),l.rect(-f,-c,r.width,r.height),l.stroke()),l.restore()}};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1125),u=t(1126),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),a=function(o,r,h,d){h.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=u(r,h,d),c=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,p=r._displayOriginY,x=h.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&s(l,c,r,x,g,p),r.isStroked&&n(l,r,x,g,p),o.pipelines.postBatch(r)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(o,r,h,d){h.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,h,d)){var f=r._displayOriginX,c=r._displayOriginY,g=r.pathData,p=g.length-1,x=g[0]-f,y=g[1]-c;l.beginPath(),l.moveTo(x,y),r.closePath||(p-=2);for(var T=2;T<p;T+=2){var E=g[T]-f,S=g[T+1]-c;l.lineTo(E,S)}l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1128),u=t(1129),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(81),n=t(12),a=function(o,r,h,d){h.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=s(r,h,d);l.calcMatrix.copyFrom(f.calc);var c=r._displayOriginX,g=r._displayOriginY,p=h.alpha*r.alpha;if(o.pipelines.preBatch(r),r.isFilled){var x=l.fillTint,y=n.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*p);x.TL=y,x.TR=y,x.BL=y,x.BR=y;var T=r.geom.x1-c,E=r.geom.y1-g,S=r.geom.x2-c,C=r.geom.y2-g,P=r.geom.x3-c,R=r.geom.y3-g;l.batchFillTriangle(T,E,S,C,P,R,f.sprite,f.camera)}r.isStroked&&u(l,r,p,c,g),o.pipelines.postBatch(r)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),a=function(o,r,h,d){h.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,h,d)){var f=r._displayOriginX,c=r._displayOriginY,g=r.geom.x1-f,p=r.geom.y1-c,x=r.geom.x2-f,y=r.geom.y2-c,T=r.geom.x3-f,E=r.geom.y3-c;l.beginPath(),l.moveTo(g,p),l.lineTo(x,y),l.lineTo(T,E),l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(213),u=t(5);u.register("blitter",function(n,a,o,r){return this.displayList.add(new s(this.scene,n,a,o,r))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(214),u=t(5);u.register("container",function(n,a,o){return this.displayList.add(new s(this.scene,n,a,o))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(442),u=t(5);u.register("dom",function(n,a,o,r,h){var d=new s(this.scene,n,a,o,r,h);return this.displayList.add(d),d})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(215),u=t(5);u.register("dynamicBitmapText",function(n,a,o,r,h){return this.displayList.add(new s(this.scene,n,a,o,r,h))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(444),u=t(5);u.register("extern",function(){var n=new s(this.scene);return this.displayList.add(n),n})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(216),u=t(5);u.register("graphics",function(n){return this.displayList.add(new s(this.scene,n))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(113),u=t(5);u.register("group",function(n,a){return this.updateList.add(new s(this.scene,n,a))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(125),u=t(5);u.register("image",function(n,a,o,r){return this.displayList.add(new s(this.scene,n,a,o,r))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(219),u=t(5);u.register("layer",function(n){return this.displayList.add(new s(this.scene,n))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(220);s.register("particles",function(n,a,o){return this.displayList.add(new u(this.scene,n,a,o))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(457);s.register("follower",function(n,a,o,r,h){var d=new u(this.scene,n,a,o,r,h);return this.displayList.add(d),this.updateList.add(d),d})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(221);s.register("renderTexture",function(n,a,o,r,h,d){return this.displayList.add(new u(this.scene,n,a,o,r,h,d))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(223),u=t(5);u.register("rope",function(n,a,o,r,h,d,l,f){return this.displayList.add(new s(this.scene,n,a,o,r,h,d,l,f))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(73);s.register("sprite",function(n,a,o,r){var h=new u(this.scene,n,a,o,r);return this.displayList.add(h),h})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(148),u=t(5);u.register("bitmapText",function(n,a,o,r,h,d){return this.displayList.add(new s(this.scene,n,a,o,r,h,d))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(224),u=t(5);u.register("text",function(n,a,o,r){return this.displayList.add(new s(this.scene,n,a,o,r))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(225),u=t(5);u.register("tileSprite",function(n,a,o,r,h,d){return this.displayList.add(new s(this.scene,n,a,o,r,h,d))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(129),u=t(5);u.register("zone",function(n,a,o,r){return this.displayList.add(new s(this.scene,n,a,o,r))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(226),u=t(5);u.register("video",function(n,a,o){return this.displayList.add(new s(this.scene,n,a,o))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(461),u=t(5);u.register("arc",function(n,a,o,r,h,d,l,f){return this.displayList.add(new s(this.scene,n,a,o,r,h,d,l,f))}),u.register("circle",function(n,a,o,r,h){return this.displayList.add(new s(this.scene,n,a,o,0,360,!1,r,h))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(462);s.register("curve",function(n,a,o,r,h){return this.displayList.add(new u(this.scene,n,a,o,r,h))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(463),u=t(5);u.register("ellipse",function(n,a,o,r,h,d){return this.displayList.add(new s(this.scene,n,a,o,r,h,d))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(464);s.register("grid",function(n,a,o,r,h,d,l,f,c,g){return this.displayList.add(new u(this.scene,n,a,o,r,h,d,l,f,c,g))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(465);s.register("isobox",function(n,a,o,r,h,d,l){return this.displayList.add(new u(this.scene,n,a,o,r,h,d,l))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(466);s.register("isotriangle",function(n,a,o,r,h,d,l,f){return this.displayList.add(new u(this.scene,n,a,o,r,h,d,l,f))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(467);s.register("line",function(n,a,o,r,h,d,l,f){return this.displayList.add(new u(this.scene,n,a,o,r,h,d,l,f))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(468);s.register("polygon",function(n,a,o,r,h){return this.displayList.add(new u(this.scene,n,a,o,r,h))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(473);s.register("rectangle",function(n,a,o,r,h,d){return this.displayList.add(new u(this.scene,n,a,o,r,h,d))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(474),u=t(5);u.register("star",function(n,a,o,r,h,d,l){return this.displayList.add(new s(this.scene,n,a,o,r,h,d,l))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(475);s.register("triangle",function(n,a,o,r,h,d,l,f,c,g){return this.displayList.add(new u(this.scene,n,a,o,r,h,d,l,f,c,g))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(213),u=t(28),n=t(16),a=t(13);n.register("blitter",function(o,r){o===void 0&&(o={});var h=a(o,"key",null),d=a(o,"frame",null),l=new s(this.scene,0,0,h,d);return r!==void 0&&(o.add=r),u(this.scene,l,o),l})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(214),n=t(16),a=t(13);n.register("container",function(o,r){o===void 0&&(o={});var h=a(o,"x",0),d=a(o,"y",0),l=a(o,"children",null),f=new u(this.scene,h,d,l);return r!==void 0&&(o.add=r),s(this.scene,f,o),f})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(215),u=t(28),n=t(16),a=t(13);n.register("dynamicBitmapText",function(o,r){o===void 0&&(o={});var h=a(o,"font",""),d=a(o,"text",""),l=a(o,"size",!1),f=new s(this.scene,0,0,h,d,l);return r!==void 0&&(o.add=r),u(this.scene,f,o),f})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(216);s.register("graphics",function(n,a){n===void 0&&(n={}),a!==void 0&&(n.add=a);var o=new u(this.scene,n);return n.add&&this.scene.sys.displayList.add(o),o})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(113);s.register("group",function(n){return new u(this.scene,null,n)})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(125);u.register("image",function(o,r){o===void 0&&(o={});var h=n(o,"key",null),d=n(o,"frame",null),l=new a(this.scene,0,0,h,d);return r!==void 0&&(o.add=r),s(this.scene,l,o),l})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(219),n=t(16),a=t(13);n.register("layer",function(o,r){o===void 0&&(o={});var h=a(o,"children",null),d=new u(this.scene,h);return r!==void 0&&(o.add=r),s(this.scene,d,o),d})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(13),n=t(2),a=t(220);s.register("particles",function(o,r){o===void 0&&(o={});var h=u(o,"key",null),d=u(o,"frame",null),l=n(o,"emitters",null),f=new a(this.scene,h,d,l);r!==void 0&&(o.add=r);var c=n(o,"add",!1);return c?this.displayList.add(f):this.updateList.add(f),f})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(221);u.register("renderTexture",function(o,r){o===void 0&&(o={});var h=n(o,"x",0),d=n(o,"y",0),l=n(o,"width",32),f=n(o,"height",32),c=n(o,"key",void 0),g=n(o,"frame",void 0),p=new a(this.scene,h,d,l,f,c,g);return r!==void 0&&(o.add=r),s(this.scene,p,o),p})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(6),o=t(223);u.register("rope",function(r,h){r===void 0&&(r={});var d=n(r,"key",null),l=n(r,"frame",null),f=n(r,"horizontal",!0),c=a(r,"points",void 0),g=a(r,"colors",void 0),p=a(r,"alphas",void 0),x=new o(this.scene,0,0,d,l,c,f,g,p);return h!==void 0&&(r.add=h),s(this.scene,x,r),r.add||this.updateList.add(x),x})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(439),n=t(16),a=t(13),o=t(73);n.register("sprite",function(r,h){r===void 0&&(r={});var d=a(r,"key",null),l=a(r,"frame",null),f=new o(this.scene,0,0,d,l);return h!==void 0&&(r.add=h),s(this.scene,f,r),u(f,r),f})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(148),u=t(28),n=t(16),a=t(13),o=t(6);n.register("bitmapText",function(r,h){r===void 0&&(r={});var d=o(r,"font",""),l=a(r,"text",""),f=a(r,"size",!1),c=o(r,"align",0),g=new s(this.scene,0,0,d,l,f,c);return h!==void 0&&(r.add=h),u(this.scene,g,r),g})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(224);u.register("text",function(o,r){o===void 0&&(o={});var h=n(o,"text",""),d=n(o,"style",null),l=n(o,"padding",null);l!==null&&(d.padding=l);var f=new a(this.scene,0,0,h,d);return r!==void 0&&(o.add=r),s(this.scene,f,o),f.autoRound=n(o,"autoRound",!0),f.resolution=n(o,"resolution",1),f})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(225);u.register("tileSprite",function(o,r){o===void 0&&(o={});var h=n(o,"x",0),d=n(o,"y",0),l=n(o,"width",512),f=n(o,"height",512),c=n(o,"key",""),g=n(o,"frame",""),p=new a(this.scene,h,d,l,f,c,g);return r!==void 0&&(o.add=r),s(this.scene,p,o),p})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(13),n=t(129);s.register("zone",function(a){var o=u(a,"x",0),r=u(a,"y",0),h=u(a,"width",1),d=u(a,"height",h);return new n(this.scene,o,r,h,d)})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(226);u.register("video",function(o,r){o===void 0&&(o={});var h=n(o,"key",null),d=new a(this.scene,0,0,h);return r!==void 0&&(o.add=r),s(this.scene,d,o),o.add||this.updateList.add(d),d})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1177),u=t(1178),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,a,o,r){if(!!a.shader){if(o.addToRenderList(a),n.pipelines.clear(),a.renderToTexture)a.load(),a.flush();else{var h=s(a,o,r).calc;(n.width!==a._rendererWidth||n.height!==a._rendererHeight)&&a.projOrtho(0,n.width,n.height,0),a.load(h.matrix),a.flush()}n.pipelines.rebind()}};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1180),u=t(1181),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,a,o,r){var h=a.faces,d=h.length;if(d!==0){o.addToRenderList(a);var l=n.pipelines.set(a.pipeline,a),f=s(a,o,r).calc,c=l.setGameObject(a),g=l.vertexViewF32,p=l.vertexViewU32,x=l.vertexCount*l.currentShader.vertexComponentCount-1,y=a.tintFill,T=[],E=a.debugCallback,S=f.a,C=f.b,P=f.c,R=f.d,A=f.e,M=f.f,O=a.viewPosition.z,F=a.hideCCW,I=o.roundPixels,B=o.alpha*a.alpha,V=0;n.pipelines.preBatch(a);for(var U=0;U<d;U++){var Y=h[U];!Y.isInView(o,F,O,B,S,C,P,R,A,M,I)||(l.shouldFlush(3)&&(l.flush(),x=0),x=Y.load(g,p,x,c,y),V++,l.vertexCount+=3,E&&T.push(Y))}a.totalFrame+=V,E&&E.call(a,a,T),n.pipelines.postBatch(a)}};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1183),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,a,o,r){o.addToRenderList(a);var h=n.pipelines.set(a.pipeline),d=s(a,o,r).calc,l=a.width,f=a.height,c=-a._radius,g=-a._radius,p=c+l,x=g+f,y=d.getX(0,0),T=d.getY(0,0),E=d.getX(c,g),S=d.getY(c,g),C=d.getX(c,x),P=d.getY(c,x),R=d.getX(p,x),A=d.getY(p,x),M=d.getX(p,g),O=d.getY(p,g);n.pipelines.preBatch(a),h.batchPointLight(a,o,E,S,C,P,R,A,M,O,y,T),n.pipelines.postBatch(a)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(229),u=t(5);u.register("shader",function(n,a,o,r,h,d,l){return this.displayList.add(new s(this.scene,n,a,o,r,h,d,l))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(230),u=t(5);u.register("mesh",function(n,a,o,r,h,d,l,f,c,g,p){return this.displayList.add(new s(this.scene,n,a,o,r,h,d,l,f,c,g,p))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(150);s.register("pointlight",function(n,a,o,r,h,d){return this.displayList.add(new u(this.scene,n,a,o,r,h,d))})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(229);u.register("shader",function(o,r){o===void 0&&(o={});var h=n(o,"key",null),d=n(o,"x",0),l=n(o,"y",0),f=n(o,"width",128),c=n(o,"height",128),g=new a(this.scene,h,d,l,f,c);return r!==void 0&&(o.add=r),s(this.scene,g,o),g})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(6),o=t(230);u.register("mesh",function(r,h){r===void 0&&(r={});var d=n(r,"key",null),l=n(r,"frame",null),f=a(r,"vertices",[]),c=a(r,"uvs",[]),g=a(r,"indicies",[]),p=a(r,"containsZ",!1),x=a(r,"normals",[]),y=a(r,"colors",16777215),T=a(r,"alphas",1),E=new o(this.scene,0,0,d,l,f,c,g,p,x,y,T);return h!==void 0&&(r.add=h),s(this.scene,E,r),E})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),a=t(150);u.register("pointlight",function(o,r){o===void 0&&(o={});var h=n(o,"color",16777215),d=n(o,"radius",128),l=n(o,"intensity",1),f=n(o,"attenuation",.1),c=new a(this.scene,0,0,h,d,l,f);return r!==void 0&&(o.add=r),s(this.scene,c,o),c})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(482),n=t(24),a=t(20),o=new s({Extends:u,initialize:function(h){this.scene=h,this.systems=h.sys,h.sys.settings.isBooted||h.sys.events.once(a.BOOT,this.boot,this),u.call(this)},boot:function(){var r=this.systems.events;r.on(a.SHUTDOWN,this.shutdown,this),r.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});n.register("LightsPlugin",o,"lights"),e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65);s.Area=t(1192),s.Circumference=t(302),s.CircumferencePoint=t(169),s.Clone=t(1193),s.Contains=t(66),s.ContainsPoint=t(1194),s.ContainsRect=t(1195),s.CopyFrom=t(1196),s.Equals=t(1197),s.GetBounds=t(1198),s.GetPoint=t(300),s.GetPoints=t(301),s.Offset=t(1199),s.OffsetPoint=t(1200),s.Random=t(170),e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.radius>0?Math.PI*s.radius*s.radius:0};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=function(n){return new s(n.x,n.y,n.radius)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=function(n,a){return s(n,a.x,a.y)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=function(n,a){return s(n,a.x,a.y)&&s(n,a.right,a.y)&&s(n,a.x,a.bottom)&&s(n,a.right,a.bottom)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y,s.radius)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y&&s.radius===u.radius};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a){return a===void 0&&(a=new s),a.x=n.left,a.y=n.top,a.width=n.diameter,a.height=n.diameter,a};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x+=u,s.y+=n,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x+=u.x,s.y+=u.y,s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(111);s.Area=t(1202),s.Circumference=t(447),s.CircumferencePoint=t(218),s.Clone=t(1203),s.Contains=t(112),s.ContainsPoint=t(1204),s.ContainsRect=t(1205),s.CopyFrom=t(1206),s.Equals=t(1207),s.GetBounds=t(1208),s.GetPoint=t(445),s.GetPoints=t(446),s.Offset=t(1209),s.OffsetPoint=t(1210),s.Random=t(180),e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.isEmpty()?0:s.getMajorRadius()*s.getMinorRadius()*Math.PI};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(111),u=function(n){return new s(n.x,n.y,n.width,n.height)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(112),u=function(n,a){return s(n,a.x,a.y)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(112),u=function(n,a){return s(n,a.x,a.y)&&s(n,a.right,a.y)&&s(n,a.x,a.bottom)&&s(n,a.right,a.bottom)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y,s.width,s.height)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y&&s.width===u.width&&s.height===u.height};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a){return a===void 0&&(a=new s),a.x=n.left,a.y=n.top,a.width=n.width,a.height=n.height,a};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x+=u,s.y+=n,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x+=u.x,s.y+=u.y,s};e.exports=t},function(e,v,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(231),n=function(a,o,r){if(r===void 0&&(r=[]),u(a,o)){var h=a.x,d=a.y,l=a.radius,f=o.x,c=o.y,g=o.radius,p,x,y,T,E;if(d===c)E=(g*g-l*l-f*f+h*h)/(2*(h-f)),p=1,x=-2*c,y=f*f+E*E-2*f*E+c*c-g*g,T=x*x-4*p*y,T===0?r.push(new s(E,-x/(2*p))):T>0&&(r.push(new s(E,(-x+Math.sqrt(T))/(2*p))),r.push(new s(E,(-x-Math.sqrt(T))/(2*p))));else{var S=(h-f)/(d-c),C=(g*g-l*l-f*f+h*h-c*c+d*d)/(2*(d-c));p=S*S+1,x=2*d*S-2*C*S-2*h,y=h*h+d*d+C*C-l*l-2*d*C,T=x*x-4*p*y,T===0?(E=-x/(2*p),r.push(new s(E,C-E*S))):T>0&&(E=(-x+Math.sqrt(T))/(2*p),r.push(new s(E,C-E*S)),E=(-x-Math.sqrt(T))/(2*p),r.push(new s(E,C-E*S)))}}return r};e.exports=n},function(e,v,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(232),u=t(151),n=function(a,o,r){if(r===void 0&&(r=[]),u(a,o)){var h=o.getLineA(),d=o.getLineB(),l=o.getLineC(),f=o.getLineD();s(h,a,r),s(d,a,r),s(l,a,r),s(f,a,r)}return r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(140),u=t(487),n=t(47),a=new n;function o(d,l,f,c,g){var p=Math.cos(d),x=Math.sin(d);a.setTo(l,f,l+p,f+x);var y=u(a,c);y&&g.push(new s(y.x,y.y,d,y.w))}function r(d,l){return d.z-l.z}var h=function(d,l,f){Array.isArray(f)||(f=[f]);for(var c=[],g=[],p=0;p<f.length;p++)for(var x=f[p].points,y=0;y<x.length;y++){var T=Math.atan2(x[y].y-l,x[y].x-d);g.indexOf(T)===-1&&(o(T,d,l,f,c),o(T-1e-5,d,l,f,c),o(T+1e-5,d,l,f,c),g.push(T))}return c.sort(r)};e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(152),n=function(a,o,r){return r===void 0&&(r=new s),u(a,o)&&(r.x=Math.max(a.x,o.x),r.y=Math.max(a.y,o.y),r.width=Math.min(a.right,o.right)-r.x,r.height=Math.min(a.bottom,o.bottom)-r.y),r};e.exports=n},function(e,v,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(234),u=t(152),n=function(a,o,r){if(r===void 0&&(r=[]),u(a,o)){var h=a.getLineA(),d=a.getLineB(),l=a.getLineC(),f=a.getLineD();s(h,o,r),s(d,o,r),s(l,o,r),s(f,o,r)}return r};e.exports=n},function(e,v,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(489),u=t(234),n=function(a,o,r){if(r===void 0&&(r=[]),s(a,o)){var h=o.getLineA(),d=o.getLineB(),l=o.getLineC();u(h,a,r),u(d,a,r),u(l,a,r)}return r};e.exports=n},function(e,v,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(232),u=t(491),n=function(a,o,r){if(r===void 0&&(r=[]),u(a,o)){var h=a.getLineA(),d=a.getLineB(),l=a.getLineC();s(h,o,r),s(d,o,r),s(l,o,r)}return r};e.exports=n},function(e,v,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(494),u=t(492),n=function(a,o,r){if(r===void 0&&(r=[]),s(a,o)){var h=o.getLineA(),d=o.getLineB(),l=o.getLineC();u(a,h,r),u(a,d,r),u(a,l,r)}return r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(496),u=function(n,a){if(!s(n,a))return!1;var o=Math.min(a.x1,a.x2),r=Math.max(a.x1,a.x2),h=Math.min(a.y1,a.y2),d=Math.max(a.y1,a.y2);return n.x>=o&&n.x<=r&&n.y>=h&&n.y<=d};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o,r){return r===void 0&&(r=0),!(u>s.right+r||n<s.left-r||a>s.bottom+r||o<s.top-r)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47);s.Angle=t(97),s.BresenhamPoints=t(317),s.CenterOn=t(1222),s.Clone=t(1223),s.CopyFrom=t(1224),s.Equals=t(1225),s.Extend=t(1226),s.GetEasedPoints=t(1227),s.GetMidPoint=t(1228),s.GetNearestPoint=t(1229),s.GetNormal=t(1230),s.GetPoint=t(307),s.GetPoints=t(172),s.GetShortestDistance=t(1231),s.Height=t(1232),s.Length=t(67),s.NormalAngle=t(497),s.NormalX=t(1233),s.NormalY=t(1234),s.Offset=t(1235),s.PerpSlope=t(1236),s.Random=t(173),s.ReflectAngle=t(1237),s.Rotate=t(1238),s.RotateAroundPoint=t(1239),s.RotateAroundXY=t(236),s.SetToAngle=t(1240),s.Slope=t(1241),s.Width=t(1242),e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=u-(s.x1+s.x2)/2,o=n-(s.y1+s.y2)/2;return s.x1+=a,s.y1+=o,s.x2+=a,s.y2+=o,s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47),u=function(n){return new s(n.x1,n.y1,n.x2,n.y2)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x1,s.y1,s.x2,s.y2)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x1===u.x1&&s.y1===u.y1&&s.x2===u.x2&&s.y2===u.y2};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=function(n,a,o){o===void 0&&(o=a);var r=s(n),h=n.x2-n.x1,d=n.y2-n.y1;return a&&(n.x1=n.x1-h/r*a,n.y1=n.y1-d/r*a),o&&(n.x2=n.x2+h/r*o,n.y2=n.y2+d/r*o),n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(352),u=t(80),n=t(4),a=function(o,r,h,d,l){d===void 0&&(d=0),l===void 0&&(l=[]);var f=[],c=o.x1,g=o.y1,p=o.x2-c,x=o.y2-g,y=u(r,l),T,E,S=h-1;for(T=0;T<S;T++)E=y(T/S),f.push(new n(c+p*E,g+x*E));if(E=y(1),f.push(new n(c+p*E,g+x*E)),d>0){var C=f[0],P=[C];for(T=1;T<f.length-1;T++){var R=f[T];s(C,R)>=d&&(P.push(R),C=R)}var A=f[f.length-1];return s(C,A)<d&&P.pop(),P.push(A),P}else return f};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.x=(n.x1+n.x2)/2,a.y=(n.y1+n.y2)/2,a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,o){o===void 0&&(o=new s);var r=n.x1,h=n.y1,d=n.x2,l=n.y2,f=(d-r)*(d-r)+(l-h)*(l-h);if(f===0)return o;var c=((a.x-r)*(d-r)+(a.y-h)*(l-h))/f;return o.x=r+c*(d-r),o.y=h+c*(l-h),o};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(97),n=t(4),a=function(o,r){r===void 0&&(r=new n);var h=u(o)-s.TAU;return r.x=Math.cos(h),r.y=Math.sin(h),r};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x1,a=s.y1,o=s.x2,r=s.y2,h=(o-n)*(o-n)+(r-a)*(r-a);if(h===0)return!1;var d=((a-u.y)*(o-n)-(n-u.x)*(r-a))/h;return Math.abs(d)*Math.sqrt(h)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.abs(s.y1-s.y2)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(97),n=function(a){return Math.cos(u(a)-s.TAU)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(97),n=function(a){return Math.sin(u(a)-s.TAU)};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x1+=u,s.y1+=n,s.x2+=u,s.y2+=n,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return-((s.x2-s.x1)/(s.y2-s.y1))};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97),u=t(497),n=function(a,o){return 2*u(o)-Math.PI-s(a)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(236),u=function(n,a){var o=(n.x1+n.x2)/2,r=(n.y1+n.y2)/2;return s(n,o,r,a)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(236),u=function(n,a,o){return s(n,a.x,a.y,o)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a,o){return s.x1=u,s.y1=n,s.x2=u+Math.cos(a)*o,s.y2=n+Math.sin(a)*o,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s.y2-s.y1)/(s.x2-s.x1)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.abs(s.x1-s.x2)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Face:t(116),GenerateGridVerts:t(1244),GenerateObjVerts:t(480),GenerateVerts:t(479),ParseObj:t(498),ParseObjMaterial:t(499),RotateFace:t(1245),Vertex:t(117)};e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(116),u=t(2),n=t(69),a=t(39),o=t(117),r=new a,h=new a,d=new n,l=function(f){var c=u(f,"mesh"),g=u(f,"texture",null),p=u(f,"frame"),x=u(f,"width",1),y=u(f,"height",x),T=u(f,"widthSegments",1),E=u(f,"heightSegments",T),S=u(f,"x",0),C=u(f,"y",0),P=u(f,"z",0),R=u(f,"rotateX",0),A=u(f,"rotateY",0),M=u(f,"rotateZ",0),O=u(f,"zIsUp",!0),F=u(f,"isOrtho",c?c.dirtyCache[11]:!1),I=u(f,"colors",[16777215]),B=u(f,"alphas",[1]),V=u(f,"tile",!1),U=u(f,"flipY",!1),Y=u(f,"width",null),W={faces:[],verts:[]};if(r.set(S,C,P),h.set(R,A,M),d.fromRotationXYTranslation(h,r,O),!g&&c)g=c.texture;else if(c&&typeof g=="string")g=c.scene.sys.textures.get(g);else return W;var w=g.get(p);!Y&&F&&g&&c&&(x=w.width/c.height,y=w.height/c.height);var L=x/2,D=y/2,N=Math.floor(T),G=Math.floor(E),b=N+1,z=G+1,X=x/N,H=y/G,$=[],J=[],K,Z,k=0,Q=1,q=0,ot=1;w&&(k=w.u0,Q=w.u1,U?(q=w.v1,ot=w.v0):(q=w.v0,ot=w.v1));var st=Q-k,_=ot-q;for(Z=0;Z<z;Z++){var j=Z*H-D;for(K=0;K<b;K++){var ht=K*X-L;J.push(ht,-j);var tt=k+st*(K/N),at=q+_*(Z/G);$.push(tt,at)}}Array.isArray(I)||(I=[I]),Array.isArray(B)||(B=[B]);var Ut=0,Yt=0;for(Z=0;Z<G;Z++)for(K=0;K<N;K++){var pt=(K+b*Z)*2,ft=(K+b*(Z+1))*2,Ct=(K+1+b*(Z+1))*2,Et=(K+1+b*Z)*2,yt=I[Yt],Xt=B[Ut],Ae=new o(J[pt],J[pt+1],0,$[pt],$[pt+1],yt,Xt).transformMat4(d),Oe=new o(J[ft],J[ft+1],0,$[ft],$[ft+1],yt,Xt).transformMat4(d),Le=new o(J[Et],J[Et+1],0,$[Et],$[Et+1],yt,Xt).transformMat4(d),Fe=new o(J[ft],J[ft+1],0,$[ft],$[ft+1],yt,Xt).transformMat4(d),Ie=new o(J[Ct],J[Ct+1],0,$[Ct],$[Ct+1],yt,Xt).transformMat4(d),we=new o(J[Et],J[Et+1],0,$[Et],$[Et+1],yt,Xt).transformMat4(d);V&&(Ae.setUVs(k,ot),Oe.setUVs(k,q),Le.setUVs(Q,ot),Fe.setUVs(k,q),Ie.setUVs(Q,q),we.setUVs(Q,ot)),Yt++,Yt===I.length&&(Yt=0),Ut++,Ut===B.length&&(Ut=0),W.verts.push(Ae,Oe,Le,Fe,Ie,we),W.faces.push(new s(Ae,Oe,Le),new s(Fe,Ie,we))}return c&&(c.faces=c.faces.concat(W.faces),c.vertices=c.vertices.concat(W.verts)),W};e.exports=l},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){var o,r;if(n===void 0&&a===void 0){var h=s.getInCenter();o=h.x,r=h.y}var d=Math.cos(u),l=Math.sin(u),f=s.vertex1,c=s.vertex2,g=s.vertex3,p=f.x-o,x=f.y-r;f.set(p*d-x*l+o,p*l+x*d+r),p=c.x-o,x=c.y-r,c.set(p*d-x*l+o,p*l+x*d+r),p=g.x-o,x=g.y-r,g.set(p*d-x*l+o,p*l+x*d+r)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4);s.Ceil=t(1247),s.Clone=t(1248),s.CopyFrom=t(1249),s.Equals=t(1250),s.Floor=t(1251),s.GetCentroid=t(1252),s.GetMagnitude=t(500),s.GetMagnitudeSq=t(501),s.GetRectangleFromPoints=t(1253),s.Interpolate=t(1254),s.Invert=t(1255),s.Negative=t(1256),s.Project=t(1257),s.ProjectUnit=t(1258),s.SetMagnitude=t(1259),e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.setTo(Math.ceil(s.x),Math.ceil(s.y))};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n){return new s(n.x,n.y)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.setTo(Math.floor(s.x),Math.floor(s.y))};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){if(a===void 0&&(a=new s),!Array.isArray(n))throw new Error("GetCentroid points argument must be an array");var o=n.length;if(o<1)throw new Error("GetCentroid points array must not be empty");if(o===1)a.x=n[0].x,a.y=n[0].y;else{for(var r=0;r<o;r++)a.x+=n[r].x,a.y+=n[r].y;a.x/=o,a.y/=o}return a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a){a===void 0&&(a=new s);for(var o=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,l=0;l<n.length;l++){var f=n[l];f.x>o&&(o=f.x),f.x<r&&(r=f.x),f.y>h&&(h=f.y),f.y<d&&(d=f.y)}return a.x=r,a.y=d,a.width=o-r,a.height=h-d,a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,o,r){return o===void 0&&(o=0),r===void 0&&(r=new s),r.x=n.x+(a.x-n.x)*o,r.y=n.y+(a.y-n.y)*o,r};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.setTo(s.y,s.x)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.setTo(-n.x,-n.y)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(501),n=function(a,o,r){r===void 0&&(r=new s);var h=a.x*o.x+a.y*o.y,d=h/u(o);return d!==0&&(r.x=d*o.x,r.y=d*o.y),r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a,o){o===void 0&&(o=new s);var r=n.x*a.x+n.y*a.y;return r!==0&&(o.x=r*a.x,o.y=r*a.y),o};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(500),u=function(n,a){if(n.x!==0||n.y!==0){var o=s(n);n.x/=o,n.y/=o}return n.x*=a,n.y*=a,n};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(227);s.Clone=t(1261),s.Contains=t(228),s.ContainsPoint=t(1262),s.Earcut=t(59),s.GetAABB=t(469),s.GetNumberArray=t(1263),s.GetPoints=t(470),s.Perimeter=t(471),s.Reverse=t(1264),s.Simplify=t(1265),s.Smooth=t(472),s.Translate=t(1266),e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(227),u=function(n){return new s(n.points)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(228),u=function(n,a){return s(n,a.x,a.y)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=[]);for(var n=0;n<s.points.length;n++)u.push(s.points[n].x),u.push(s.points[n].y);return u};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.points.reverse(),s};e.exports=t},function(e,v){function t(r,h){var d=r.x-h.x,l=r.y-h.y;return d*d+l*l}function s(r,h,d){var l=h.x,f=h.y,c=d.x-l,g=d.y-f;if(c!==0||g!==0){var p=((r.x-l)*c+(r.y-f)*g)/(c*c+g*g);p>1?(l=d.x,f=d.y):p>0&&(l+=c*p,f+=g*p)}return c=r.x-l,g=r.y-f,c*c+g*g}function u(r,h){for(var d=r[0],l=[d],f,c=1,g=r.length;c<g;c++)f=r[c],t(f,d)>h&&(l.push(f),d=f);return d!==f&&l.push(f),l}function n(r,h,d,l,f){for(var c=l,g,p=h+1;p<d;p++){var x=s(r[p],r[h],r[d]);x>c&&(g=p,c=x)}c>l&&(g-h>1&&n(r,h,g,l,f),f.push(r[g]),d-g>1&&n(r,g,d,l,f))}function a(r,h){var d=r.length-1,l=[r[0]];return n(r,0,d,h,l),l.push(r[d]),l}var o=function(r,h,d){h===void 0&&(h=1),d===void 0&&(d=!1);var l=r.points;if(l.length>2){var f=h*h;d||(l=u(l,f)),r.setTo(a(l,f))}return r};e.exports=o},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var a=s.points,o=0;o<a.length;o++)a[o].x+=u,a[o].y+=n;return s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.width*s.height};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s.width=Math.ceil(s.width),s.height=Math.ceil(s.height),s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n){return new s(n.x,n.y,n.width,n.height)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(57),u=function(n,a){return s(n,a.x,a.y)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y,s.width,s.height)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y&&s.width===u.width&&s.height===u.height};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(237),u=function(n,a){var o=s(n);return o<s(a)?n.setSize(a.height*o,a.height):n.setSize(a.width,a.width/o),n.setPosition(a.centerX-n.width/2,a.centerY-n.height/2)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(237),u=function(n,a){var o=s(n);return o>s(a)?n.setSize(a.height*o,a.height):n.setSize(a.width,a.width/o),n.setPosition(a.centerX-n.width/2,a.centerY-n.height/2)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s.width=Math.floor(s.width),s.height=Math.floor(s.height),s};e.exports=t},function(e,v,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,a,o,r,h){return h===void 0&&(h=new s),h.setTo(Math.min(n,o),Math.min(a,r),Math.abs(n-o),Math.abs(a-r))};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.x=n.centerX,a.y=n.centerY,a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,a){return a===void 0&&(a=new s),a.x=n.width,a.y=n.height,a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(190),u=function(n,a,o){var r=n.centerX,h=n.centerY;return n.setSize(n.width+a*2,n.height+o*2),s(n,r,h)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(152),n=function(a,o,r){return r===void 0&&(r=new s),u(a,o)?(r.x=Math.max(a.x,o.x),r.y=Math.max(a.y,o.y),r.width=Math.min(a.right,o.right)-r.x,r.height=Math.min(a.bottom,o.bottom)-r.y):r.setEmpty(),r};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=s.x,a=s.right,o=s.y,r=s.bottom,h=0;h<u.length;h++)n=Math.min(n,u[h].x),a=Math.max(a,u[h].x),o=Math.min(o,u[h].y),r=Math.max(r,u[h].y);return s.x=n,s.y=o,s.width=a-n,s.height=r-o,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=Math.min(s.x,u.x),a=Math.max(s.right,u.right);s.x=n,s.width=a-n;var o=Math.min(s.y,u.y),r=Math.max(s.bottom,u.bottom);return s.y=o,s.height=r-o,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var a=Math.min(s.x,u),o=Math.max(s.right,u);s.x=a,s.width=o-a;var r=Math.min(s.y,n),h=Math.max(s.bottom,n);return s.y=r,s.height=h-r,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x+=u,s.y+=n,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x+=u.x,s.y+=u.y,s};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x<u.right&&s.right>u.x&&s.y<u.bottom&&s.bottom>u.y};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(36),n=function(a,o,r){r===void 0&&(r=new s),o=u(o);var h=Math.sin(o),d=Math.cos(o),l=d>0?a.width/2:a.width/-2,f=h>0?a.height/2:a.height/-2;return Math.abs(l*h)<Math.abs(f*d)?f=l*h/d:l=f*d/h,r.x=l+a.centerX,r.y=f+a.centerY,r};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(195),u=t(503),n=t(4),a=function(o,r,h){if(h===void 0&&(h=new n),u(o,r))switch(s(0,3)){case 0:h.x=o.x+Math.random()*(r.right-o.x),h.y=o.y+Math.random()*(r.top-o.y);break;case 1:h.x=r.x+Math.random()*(o.right-r.x),h.y=r.bottom+Math.random()*(o.bottom-r.bottom);break;case 2:h.x=o.x+Math.random()*(r.x-o.x),h.y=r.y+Math.random()*(o.bottom-r.y);break;case 3:h.x=r.right+Math.random()*(o.right-r.right),h.y=o.y+Math.random()*(r.bottom-o.y);break}return h};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.width===u.width&&s.height===u.height};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=u),s.width*=u,s.height*=n,s};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82);s.Area=t(1294),s.BuildEquilateral=t(1295),s.BuildFromPolygon=t(1296),s.BuildRight=t(1297),s.CenterOn=t(1298),s.Centroid=t(504),s.CircumCenter=t(1299),s.CircumCircle=t(1300),s.Clone=t(1301),s.Contains=t(115),s.ContainsArray=t(235),s.ContainsPoint=t(1302),s.CopyFrom=t(1303),s.Decompose=t(495),s.Equals=t(1304),s.GetPoint=t(476),s.GetPoints=t(477),s.InCenter=t(506),s.Perimeter=t(1305),s.Offset=t(505),s.Random=t(181),s.Rotate=t(1306),s.RotateAroundPoint=t(1307),s.RotateAroundXY=t(238),e.exports=s},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.x1,n=s.y1,a=s.x2,o=s.y2,r=s.x3,h=s.y3;return Math.abs(((r-u)*(o-n)-(a-u)*(h-n))/2)};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82),u=function(n,a,o){var r=o*(Math.sqrt(3)/2),h=n,d=a,l=n+o/2,f=a+r,c=n-o/2,g=a+r;return new s(h,d,l,f,c,g)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59),u=t(82),n=function(a,o,r,h,d){o===void 0&&(o=null),r===void 0&&(r=1),h===void 0&&(h=1),d===void 0&&(d=[]);for(var l=s(a,o),f,c,g,p,x,y,T,E,S,C=0;C<l.length;C+=3)f=l[C],c=l[C+1],g=l[C+2],p=a[f*2]*r,x=a[f*2+1]*h,y=a[c*2]*r,T=a[c*2+1]*h,E=a[g*2]*r,S=a[g*2+1]*h,d.push(new u(p,x,y,T,E,S));return d};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82),u=function(n,a,o,r){r===void 0&&(r=o);var h=n,d=a,l=n,f=a-r,c=n+o,g=a;return new s(h,d,l,f,c,g)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(504),u=t(505),n=function(a,o,r,h){h===void 0&&(h=s);var d=h(a),l=o-d.x,f=r-d.y;return u(a,l,f)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3);function u(a,o,r,h){return a*h-o*r}var n=function(a,o){o===void 0&&(o=new s);var r=a.x3,h=a.y3,d=a.x1-r,l=a.y1-h,f=a.x2-r,c=a.y2-h,g=2*u(d,l,f,c),p=u(l,d*d+l*l,c,f*f+c*c),x=u(d,d*d+l*l,f,f*f+c*c);return o.x=r-p/g,o.y=h+x/g,o};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=function(n,a){a===void 0&&(a=new s);var o=n.x1,r=n.y1,h=n.x2,d=n.y2,l=n.x3,f=n.y3,c=h-o,g=d-r,p=l-o,x=f-r,y=c*(o+h)+g*(r+d),T=p*(o+l)+x*(r+f),E=2*(c*(f-d)-g*(l-h)),S,C;if(Math.abs(E)<1e-6){var P=Math.min(o,h,l),R=Math.min(r,d,f);S=(Math.max(o,h,l)-P)*.5,C=(Math.max(r,d,f)-R)*.5,a.x=P+S,a.y=R+C,a.radius=Math.sqrt(S*S+C*C)}else a.x=(x*y-g*T)/E,a.y=(c*T-p*y)/E,S=a.x-o,C=a.y-r,a.radius=Math.sqrt(S*S+C*C);return a};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82),u=function(n){return new s(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(115),u=function(n,a){return s(n,a.x,a.y)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x1,s.y1,s.x2,s.y2,s.x3,s.y3)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x1===u.x1&&s.y1===u.y1&&s.x2===u.x2&&s.y2===u.y2&&s.x3===u.x3&&s.y3===u.y3};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=function(n){var a=n.getLineA(),o=n.getLineB(),r=n.getLineC();return s(a)+s(o)+s(r)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(238),u=t(506),n=function(a,o){var r=u(a);return s(a,r.x,r.y,o)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(238),u=function(n,a,o){return s(n,a.x,a.y,o)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(203),u=t(17),n={CreatePixelPerfectHandler:t(507),CreateInteractiveObject:t(508),Events:t(51),Gamepad:t(1309),InputManager:t(409),InputPlugin:t(1321),InputPluginCache:t(153),Keyboard:t(1322),Mouse:t(1336),Pointer:t(412),Touch:t(1337)};n=u(!1,n,s),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Axis:t(509),Button:t(510),Events:t(239),Gamepad:t(511),GamepadPlugin:t(1316),Configs:t(1317)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="connected"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="disconnected"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(239),a=t(511),o=t(6),r=t(153),h=t(51),d=new s({Extends:u,initialize:function(f){u.call(this),this.scene=f.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=f,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,f.pluginEvents.once(h.BOOT,this.boot,this),f.pluginEvents.on(h.START,this.start,this)},boot:function(){var l=this.scene.sys.game,f=this.settings.input,c=l.config;this.enabled=o(f,"gamepad",c.inputGamepad)&&l.device.input.gamepads,this.target=o(f,"gamepad.target",c.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var l=this,f=this.target,c=function(g){g.defaultPrevented||!l.isActive()||(l.refreshPads(),l.queue.push(g))};this.onGamepadHandler=c,f.addEventListener("gamepadconnected",c,!1),f.addEventListener("gamepaddisconnected",c,!1),this.sceneInputPlugin.pluginEvents.on(h.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(h.UPDATE,this.update);for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].removeAllListeners()},disconnectAll:function(){for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].pad.connected=!1},refreshPads:function(){var l=navigator.getGamepads();if(!l)this.disconnectAll();else for(var f=this.gamepads,c=0;c<l.length;c++){var g=l[c];if(!!g){var p=g.id,x=g.index,y=f[x];if(y)y.id!==p?(y.destroy(),f[x]=new a(this,g)):y.update(g);else{var T=new a(this,g);f[x]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var l=[],f=this.gamepads,c=0;c<f.length;c++)f[c]&&l.push(f[c]);return l},getPad:function(l){for(var f=this.gamepads,c=0;c<f.length;c++)if(f[c]&&f[c].index===l)return f[c]},update:function(){if(!!this.enabled){this.refreshPads();var l=this.queue.length;if(l!==0)for(var f=this.queue.splice(0,l),c=0;c<l;c++){var g=f[c],p=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(n.CONNECTED,p,g):g.type==="gamepaddisconnected"&&this.emit(n.DISCONNECTED,p,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var l=0;l<this.gamepads.length;l++)this.gamepads[l]&&this.gamepads[l].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",d,"gamepad","gamepad","inputGamepad"),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DUALSHOCK_4:t(1318),SNES_USB:t(1319),XBOX_360:t(1320)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=t(66),n=t(0),a=t(203),o=t(508),r=t(507),h=t(50),d=t(111),l=t(112),f=t(51),c=t(9),g=t(2),p=t(56),x=t(153),y=t(7),T=t(24),E=t(10),S=t(57),C=t(20),P=t(82),R=t(115),A=new n({Extends:c,initialize:function(O){c.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new c,this.enabled=!0,this.displayList,this.cameras,x.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var F={cancelled:!1};this._eventContainer={stopPropagation:function(){F.cancelled=!0}},this._eventData=F,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(C.BOOT,this.boot,this),O.sys.events.on(C.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(C.DESTROY,this.destroy,this),this.pluginEvents.emit(f.BOOT)},start:function(){var M=this.systems.events;M.on(C.TRANSITION_START,this.transitionIn,this),M.on(C.TRANSITION_OUT,this.transitionOut,this),M.on(C.TRANSITION_COMPLETE,this.transitionComplete,this),M.on(C.PRE_UPDATE,this.preUpdate,this),M.once(C.SHUTDOWN,this.shutdown,this),this.manager.events.on(f.GAME_OUT,this.onGameOut,this),this.manager.events.on(f.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(f.START)},onGameOver:function(M){this.isActive()&&this.emit(f.GAME_OVER,M.timeStamp,M)},onGameOut:function(M){this.isActive()&&this.emit(f.GAME_OUT,M.timeStamp,M)},preUpdate:function(){this.pluginEvents.emit(f.PRE_UPDATE);var M=this._pendingRemoval,O=this._pendingInsertion,F=M.length,I=O.length;if(!(F===0&&I===0)){for(var B=this._list,V=0;V<F;V++){var U=M[V],Y=B.indexOf(U);Y>-1&&(B.splice(Y,1),this.clear(U,!0))}M.length=0,this._pendingRemoval.length=0,this._list=B.concat(O.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(M,O){if(!this.isActive())return!1;if(this.pluginEvents.emit(f.UPDATE,M,O),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var F,I=this.manager,B=I.pointers,V=I.pointersTotal;for(F=0;F<V;F++)B[F].updateMotion();if(this._list.length===0)return!1;var U=this.pollRate;if(U===-1)return!1;if(U>0)if(this._pollTimer-=O,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var Y=!1;for(F=0;F<V;F++){var W=0,w=B[F];this._tempZones=[],this._temp=this.hitTestPointer(w),this.sortGameObjects(this._temp,w),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),W+=this.processOverOutEvents(w),this.getDragState(w)===2&&this.processDragThresholdEvent(w,M),W>0&&(Y=!0)}return Y},update:function(M,O){if(!this.isActive())return!1;for(var F=O.length,I=!1,B=0;B<F;B++){var V=0,U=O[B];switch(this._tempZones=[],this._temp=this.hitTestPointer(U),this.sortGameObjects(this._temp,U),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),M){case a.MOUSE_DOWN:V+=this.processDragDownEvent(U),V+=this.processDownEvents(U),V+=this.processOverOutEvents(U);break;case a.MOUSE_UP:V+=this.processDragUpEvent(U),V+=this.processUpEvents(U),V+=this.processOverOutEvents(U);break;case a.TOUCH_START:V+=this.processDragDownEvent(U),V+=this.processDownEvents(U),V+=this.processOverEvents(U);break;case a.TOUCH_END:case a.TOUCH_CANCEL:V+=this.processDragUpEvent(U),V+=this.processUpEvents(U),V+=this.processOutEvents(U);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:V+=this.processDragMoveEvent(U),V+=this.processMoveEvents(U),V+=this.processOverOutEvents(U);break;case a.MOUSE_WHEEL:V+=this.processWheelEvent(U);break}V>0&&(I=!0)}return this._updatedThisFrame=!0,I},clear:function(M,O){O===void 0&&(O=!1);var F=M.input;if(!!F){O||this.queueForRemoval(M),F.gameObject=void 0,F.target=void 0,F.hitArea=void 0,F.hitAreaCallback=void 0,F.callbackContext=void 0,M.input=null;var I=this._draggable.indexOf(M);return I>-1&&this._draggable.splice(I,1),I=this._drag[0].indexOf(M),I>-1&&this._drag[0].splice(I,1),I=this._over[0].indexOf(M),I>-1&&(this._over[0].splice(I,1),this.manager.resetCursor(F)),M}},disable:function(M){M.input.enabled=!1},enable:function(M,O,F,I){return I===void 0&&(I=!1),M.input?M.input.enabled=!0:this.setHitArea(M,O,F),M.input&&I&&!M.input.dropZone&&(M.input.dropZone=I),this},hitTestPointer:function(M){for(var O=this.cameras.getCamerasBelowPointer(M),F=0;F<O.length;F++){for(var I=O[F],B=this.manager.hitTest(M,this._list,I),V=0;V<B.length;V++){var U=B[V];U.input.dropZone&&this._tempZones.push(U)}if(B.length>0)return M.camera=I,B}return M.camera=O[0],[]},processDownEvents:function(M){var O=0,F=this._temp,I=this._eventData,B=this._eventContainer;I.cancelled=!1;for(var V=!1,U=0;U<F.length;U++){var Y=F[U];if(!!Y.input){if(O++,Y.emit(f.GAMEOBJECT_POINTER_DOWN,M,Y.input.localX,Y.input.localY,B),I.cancelled||!Y.input){V=!0;break}if(this.emit(f.GAMEOBJECT_DOWN,M,Y,B),I.cancelled||!Y.input){V=!0;break}}}return!V&&this.manager&&(M.downElement===this.manager.game.canvas?this.emit(f.POINTER_DOWN,M,F):this.emit(f.POINTER_DOWN_OUTSIDE,M)),O},getDragState:function(M){return this._dragState[M.id]},setDragState:function(M,O){this._dragState[M.id]=O},processDragThresholdEvent:function(M,O){var F=!1,I=this.dragTimeThreshold,B=this.dragDistanceThreshold;if((B>0&&h(M.x,M.y,M.downX,M.downY)>=B||I>0&&O>=M.downTime+I)&&(F=!0),F)return this.setDragState(M,3),this.processDragStartList(M)},processDragStartList:function(M){if(this.getDragState(M)!==3)return 0;for(var O=this._drag[M.id],F=0;F<O.length;F++){var I=O[F],B=I.input;B.dragState=2,B.dragStartX=I.x,B.dragStartY=I.y,B.dragStartXGlobal=M.worldX,B.dragStartYGlobal=M.worldY,B.dragX=B.dragStartXGlobal-B.dragStartX,B.dragY=B.dragStartYGlobal-B.dragStartY,I.emit(f.GAMEOBJECT_DRAG_START,M,B.dragX,B.dragY),this.emit(f.DRAG_START,M,I)}return this.setDragState(M,4),O.length},processDragDownEvent:function(M){var O=this._temp;if(this._draggable.length===0||O.length===0||!M.primaryDown||this.getDragState(M)!==0)return 0;this.setDragState(M,1);for(var F=[],I=0;I<O.length;I++){var B=O[I];B.input.draggable&&B.input.dragState===0&&F.push(B)}return F.length===0?(this.setDragState(M,0),0):(F.length>1&&(this.sortGameObjects(F,M),this.topOnly&&F.splice(1)),this._drag[M.id]=F,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(M,3),this.processDragStartList(M)):(this.setDragState(M,2),0))},processDragMoveEvent:function(M){if(this.getDragState(M)===2&&this.processDragThresholdEvent(M,this.manager.game.loop.now),this.getDragState(M)!==4)return 0;for(var O=this._tempZones,F=this._drag[M.id],I=0;I<F.length;I++){var B=F[I],V=B.input,U=V.target;if(U){var Y=O.indexOf(U);Y===0?(B.emit(f.GAMEOBJECT_DRAG_OVER,M,U),this.emit(f.DRAG_OVER,M,B,U)):Y>0?(B.emit(f.GAMEOBJECT_DRAG_LEAVE,M,U),this.emit(f.DRAG_LEAVE,M,B,U),V.target=O[0],U=V.target,B.emit(f.GAMEOBJECT_DRAG_ENTER,M,U),this.emit(f.DRAG_ENTER,M,B,U)):(B.emit(f.GAMEOBJECT_DRAG_LEAVE,M,U),this.emit(f.DRAG_LEAVE,M,B,U),O[0]?(V.target=O[0],U=V.target,B.emit(f.GAMEOBJECT_DRAG_ENTER,M,U),this.emit(f.DRAG_ENTER,M,B,U)):V.target=null)}else!U&&O[0]&&(V.target=O[0],U=V.target,B.emit(f.GAMEOBJECT_DRAG_ENTER,M,U),this.emit(f.DRAG_ENTER,M,B,U));var W,w;if(!B.parentContainer)W=M.worldX-V.dragX,w=M.worldY-V.dragY;else{var L=M.worldX-V.dragStartXGlobal,D=M.worldY-V.dragStartYGlobal,N=B.getParentRotation(),G=L*Math.cos(N)+D*Math.sin(N),b=D*Math.cos(N)-L*Math.sin(N);G*=1/B.parentContainer.scaleX,b*=1/B.parentContainer.scaleY,W=G+V.dragStartX,w=b+V.dragStartY}B.emit(f.GAMEOBJECT_DRAG,M,W,w),this.emit(f.DRAG,M,B,W,w)}return F.length},processDragUpEvent:function(M){for(var O=this._drag[M.id],F=0;F<O.length;F++){var I=O[F],B=I.input;if(B&&B.dragState===2){B.dragState=0,B.dragX=B.localX-I.displayOriginX,B.dragY=B.localY-I.displayOriginY;var V=!1,U=B.target;U&&(I.emit(f.GAMEOBJECT_DROP,M,U),this.emit(f.DROP,M,I,U),B.target=null,V=!0),I.input&&(I.emit(f.GAMEOBJECT_DRAG_END,M,B.dragX,B.dragY,V),this.emit(f.DRAG_END,M,I,V))}}return this.setDragState(M,0),O.splice(0),0},processMoveEvents:function(M){var O=0,F=this._temp,I=this._eventData,B=this._eventContainer;I.cancelled=!1;for(var V=!1,U=0;U<F.length;U++){var Y=F[U];if(!!Y.input){if(O++,Y.emit(f.GAMEOBJECT_POINTER_MOVE,M,Y.input.localX,Y.input.localY,B),I.cancelled||!Y.input){V=!0;break}if(this.emit(f.GAMEOBJECT_MOVE,M,Y,B),I.cancelled||!Y.input){V=!0;break}if(this.topOnly)break}}return V||this.emit(f.POINTER_MOVE,M,F),O},processWheelEvent:function(M){var O=0,F=this._temp,I=this._eventData,B=this._eventContainer;I.cancelled=!1;for(var V=!1,U=M.deltaX,Y=M.deltaY,W=M.deltaZ,w=0;w<F.length;w++){var L=F[w];if(!!L.input){if(O++,L.emit(f.GAMEOBJECT_POINTER_WHEEL,M,U,Y,W,B),I.cancelled||!L.input){V=!0;break}if(this.emit(f.GAMEOBJECT_WHEEL,M,L,U,Y,W,B),I.cancelled||!L.input){V=!0;break}}}return V||this.emit(f.POINTER_WHEEL,M,F,U,Y,W),O},processOverEvents:function(M){var O=this._temp,F=0,I=O.length,B=[];if(I>0){var V=this.manager,U=this._eventData,Y=this._eventContainer;U.cancelled=!1;for(var W=!1,w=0;w<I;w++){var L=O[w];if(!!L.input){if(B.push(L),V.setCursor(L.input),L.emit(f.GAMEOBJECT_POINTER_OVER,M,L.input.localX,L.input.localY,Y),F++,U.cancelled||!L.input){W=!0;break}if(this.emit(f.GAMEOBJECT_OVER,M,L,Y),U.cancelled||!L.input){W=!0;break}}}W||this.emit(f.POINTER_OVER,M,B)}return this._over[M.id]=B,F},processOutEvents:function(M){var O=this._over[M.id],F=0,I=O.length;if(I>0){var B=this.manager,V=this._eventData,U=this._eventContainer;V.cancelled=!1;var Y=!1;this.sortGameObjects(O,M);for(var W=0;W<I;W++){var w=O[W];if(w=O[W],!!w.input){if(B.resetCursor(w.input),w.emit(f.GAMEOBJECT_POINTER_OUT,M,U),F++,V.cancelled||!w.input){Y=!0;break}if(this.emit(f.GAMEOBJECT_OUT,M,w,U),V.cancelled||!w.input){Y=!0;break}Y||this.emit(f.POINTER_OUT,M,O)}}this._over[M.id]=[]}return F},processOverOutEvents:function(M){var O=this._temp,F,I,B=[],V=[],U=[],Y=this._over[M.id],W=this._drag[M.id],w=this.manager;for(F=0;F<Y.length;F++)I=Y[F],O.indexOf(I)===-1&&W.indexOf(I)===-1?B.push(I):U.push(I);for(F=0;F<O.length;F++)I=O[F],Y.indexOf(I)===-1&&V.push(I);var L=B.length,D=0,N=this._eventData,G=this._eventContainer;N.cancelled=!1;var b=!1;if(L>0){for(this.sortGameObjects(B,M),F=0;F<L;F++)if(I=B[F],!!I.input){if(w.resetCursor(I.input),I.emit(f.GAMEOBJECT_POINTER_OUT,M,G),D++,N.cancelled||!I.input){b=!0;break}if(this.emit(f.GAMEOBJECT_OUT,M,I,G),N.cancelled||!I.input){b=!0;break}}b||this.emit(f.POINTER_OUT,M,B)}if(L=V.length,N.cancelled=!1,b=!1,L>0){for(this.sortGameObjects(V,M),F=0;F<L;F++)if(I=V[F],!!I.input){if(w.setCursor(I.input),I.emit(f.GAMEOBJECT_POINTER_OVER,M,I.input.localX,I.input.localY,G),D++,N.cancelled||!I.input){b=!0;break}if(this.emit(f.GAMEOBJECT_OVER,M,I,G),N.cancelled||!I.input){b=!0;break}}b||this.emit(f.POINTER_OVER,M,V)}return Y=U.concat(V),this._over[M.id]=this.sortGameObjects(Y,M),D},processUpEvents:function(M){var O=this._temp,F=this._eventData,I=this._eventContainer;F.cancelled=!1;for(var B=!1,V=0;V<O.length;V++){var U=O[V];if(!!U.input){if(U.emit(f.GAMEOBJECT_POINTER_UP,M,U.input.localX,U.input.localY,I),F.cancelled||!U.input){B=!0;break}if(this.emit(f.GAMEOBJECT_UP,M,U,I),F.cancelled||!U.input){B=!0;break}}}return!B&&this.manager&&(M.upElement===this.manager.game.canvas?this.emit(f.POINTER_UP,M,O):this.emit(f.POINTER_UP_OUTSIDE,M)),O.length},queueForInsertion:function(M){return this._pendingInsertion.indexOf(M)===-1&&this._list.indexOf(M)===-1&&this._pendingInsertion.push(M),this},queueForRemoval:function(M){return this._pendingRemoval.push(M),this},setDraggable:function(M,O){O===void 0&&(O=!0),Array.isArray(M)||(M=[M]);for(var F=0;F<M.length;F++){var I=M[F];I.input.draggable=O;var B=this._draggable.indexOf(I);O&&B===-1?this._draggable.push(I):!O&&B>-1&&this._draggable.splice(B,1)}return this},makePixelPerfect:function(M){M===void 0&&(M=1);var O=this.systems.textures;return r(O,M)},setHitArea:function(M,O,F){if(O===void 0)return this.setHitAreaFromTexture(M);Array.isArray(M)||(M=[M]);var I=!1,B=!1,V=!1,U=!1,Y=!1,W=!0;if(y(O)){var w=O;O=g(w,"hitArea",null),F=g(w,"hitAreaCallback",null),I=g(w,"draggable",!1),B=g(w,"dropZone",!1),V=g(w,"cursor",!1),U=g(w,"useHandCursor",!1),Y=g(w,"pixelPerfect",!1);var L=g(w,"alphaTolerance",1);Y&&(O={},F=this.makePixelPerfect(L)),(!O||!F)&&(this.setHitAreaFromTexture(M),W=!1)}else typeof O=="function"&&!F&&(F=O,O={});for(var D=0;D<M.length;D++){var N=M[D];if(Y&&N.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var G=N.input?N.input:o(N,O,F);G.customHitArea=W,G.dropZone=B,G.cursor=U?"pointer":V,N.input=G,I&&this.setDraggable(N),this.queueForInsertion(N)}return this},setHitAreaCircle:function(M,O,F,I,B){B===void 0&&(B=u);var V=new s(O,F,I);return this.setHitArea(M,V,B)},setHitAreaEllipse:function(M,O,F,I,B,V){V===void 0&&(V=l);var U=new d(O,F,I,B);return this.setHitArea(M,U,V)},setHitAreaFromTexture:function(M,O){O===void 0&&(O=S),Array.isArray(M)||(M=[M]);for(var F=0;F<M.length;F++){var I=M[F],B=I.frame,V=0,U=0;if(I.width?(V=I.width,U=I.height):B&&(V=B.realWidth,U=B.realHeight),I.type==="Container"&&(V===0||U===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}V!==0&&U!==0&&(I.input=o(I,new E(0,0,V,U),O),this.queueForInsertion(I))}return this},setHitAreaRectangle:function(M,O,F,I,B,V){V===void 0&&(V=S);var U=new E(O,F,I,B);return this.setHitArea(M,U,V)},setHitAreaTriangle:function(M,O,F,I,B,V,U,Y){Y===void 0&&(Y=R);var W=new P(O,F,I,B,V,U);return this.setHitArea(M,W,Y)},enableDebug:function(M,O){O===void 0&&(O=65280);var F=M.input;if(!F||!F.hitArea)return this;var I=F.hitArea,B=I.type,V=F.hitAreaDebug,U=this.systems.add,Y=this.systems.updateList;V&&(Y.remove(V),V.destroy(),V=null);var W=0,w=0;switch(B){case p.CIRCLE:V=U.arc(0,0,I.radius),W=I.x-I.radius,w=I.y-I.radius;break;case p.ELLIPSE:V=U.ellipse(0,0,I.width,I.height),W=I.x-I.width/2,w=I.y-I.height/2;break;case p.LINE:V=U.line(0,0,I.x1,I.y1,I.x2,I.y2);break;case p.POLYGON:V=U.polygon(0,0,I.points);break;case p.RECTANGLE:V=U.rectangle(0,0,I.width,I.height),W=I.x,w=I.y;break;case p.TRIANGLE:V=U.triangle(0,0,I.x1,I.y1,I.x2,I.y2,I.x3,I.y3);break}return V&&(V.isFilled=!1,V.preUpdate=function(){V.setStrokeStyle(1/M.scale,O),V.setDisplayOrigin(M.displayOriginX,M.displayOriginY);var L=M.x,D=M.y,N=M.rotation,G=M.scaleX,b=M.scaleY;if(M.parentContainer){var z=M.getWorldTransformMatrix();L=z.tx,D=z.ty,N=z.rotation,G=z.scaleX,b=z.scaleY}V.setRotation(N),V.setScale(G,b),V.setPosition(L+W,D+w),V.setScrollFactor(M.scrollFactorX,M.scrollFactorY),V.setDepth(M.depth)},Y.add(V),F.hitAreaDebug=V),this},removeDebug:function(M){var O=M.input;if(O&&O.hitAreaDebug){var F=O.hitAreaDebug;this.systems.updateList.remove(F),F.destroy(),O.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(M){return this.pollRate=M,this._pollTimer=0,this},setGlobalTopOnly:function(M){return this.manager.globalTopOnly=M,this},setTopOnly:function(M){return this.topOnly=M,this},sortGameObjects:function(M,O){if(M.length<2)return M;var F=O.camera.renderList;return M.sort(function(I,B){return F.indexOf(B)-F.indexOf(I)})},sortDropZones:function(M){return M.length<2?M:(this.scene.sys.depthSort(),M.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(M,O){if(!M.parentContainer&&!O.parentContainer)return this.displayList.getIndex(O)-this.displayList.getIndex(M);if(M.parentContainer===O.parentContainer)return O.parentContainer.getIndex(O)-M.parentContainer.getIndex(M);if(M.parentContainer===O)return-1;if(O.parentContainer===M)return 1;for(var F=M.getIndexList(),I=O.getIndexList(),B=Math.min(F.length,I.length),V=0;V<B;V++){var U=F[V],Y=I[V];if(U!==Y)return Y-U}return I.length-F.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(M){return this.manager.addPointer(M)},setDefaultCursor:function(M){return this.manager.setDefaultCursor(M),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(f.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var M=0;M<10;M++)this._drag[M]=[],this._over[M]=[];this.removeAllListeners();var O=this.manager;O.canvas.style.cursor=O.defaultCursor;var F=this.systems.events;F.off(C.TRANSITION_START,this.transitionIn,this),F.off(C.TRANSITION_OUT,this.transitionOut,this),F.off(C.TRANSITION_COMPLETE,this.transitionComplete,this),F.off(C.PRE_UPDATE,this.preUpdate,this),O.events.off(f.GAME_OUT,this.onGameOut,this),O.events.off(f.GAME_OVER,this.onGameOver,this),F.off(C.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(f.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(C.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",A,"input"),e.exports=A},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:t(154),KeyboardManager:t(410),KeyboardPlugin:t(1330),Key:t(512),KeyCodes:t(143),KeyCombo:t(513),AdvanceKeyCombo:t(515),ProcessKeyCombo:t(514),ResetKeyCombo:t(516),JustDown:t(1332),JustUp:t(1333),DownDuration:t(1334),UpDuration:t(1335)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keycombomatch"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown-"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup-"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(154),a=t(22),o=t(6),r=t(51),h=t(153),d=t(512),l=t(143),f=t(513),c=t(1331),g=t(20),p=t(76),x=new s({Extends:u,initialize:function(T){u.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(r.BOOT,this.boot,this),T.pluginEvents.on(r.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=o(y,"keyboard",!0);var T=o(y,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(a.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(y,T,E){T===void 0&&(T=!0),E===void 0&&(E=!1);var S={};if(typeof y=="string"){y=y.split(",");for(var C=0;C<y.length;C++){var P=y[C].trim();P&&(S[P]=this.addKey(P,T,E))}}else for(var R in y)S[R]=this.addKey(y[R],T,E);return S},addKey:function(y,T,E){T===void 0&&(T=!0),E===void 0&&(E=!1);var S=this.keys;if(y instanceof d){var C=S.indexOf(y);return C>-1?S[C]=y:S[y.keyCode]=y,T&&this.addCapture(y.keyCode),y.setEmitOnRepeat(E),y}return typeof y=="string"&&(y=l[y.toUpperCase()]),S[y]||(S[y]=new d(this,y),T&&this.addCapture(y),S[y].setEmitOnRepeat(E)),S[y]},removeKey:function(y,T){T===void 0&&(T=!1);var E=this.keys,S;if(y instanceof d){var C=E.indexOf(y);C>-1&&(S=this.keys[C],this.keys[C]=void 0)}else typeof y=="string"&&(y=l[y.toUpperCase()]);return E[y]&&(S=E[y],E[y]=void 0),S&&(S.plugin=null,T&&S.destroy()),this},removeAllKeys:function(y){for(var T=this.keys,E=0;E<T.length;E++){var S=T[E];S&&(T[E]=void 0,y&&S.destroy())}return this},createCombo:function(y,T){return new f(this,y,T)},checkDown:function(y,T){if(T===void 0&&(T=0),this.enabled&&y.isDown){var E=p(this.time-y.timeDown,T);if(E>y._tick)return y._tick=E,!0}return!1},update:function(){var y=this.manager.queue,T=y.length;if(!(!this.isActive()||T===0))for(var E=this.keys,S=0;S<T;S++){var C=y[S],P=C.keyCode,R=E[P],A=!1;C.cancelled===void 0&&(C.cancelled=0,C.stopImmediatePropagation=function(){C.cancelled=1},C.stopPropagation=function(){C.cancelled=-1}),C.cancelled!==-1&&(P===this.prevCode&&C.timeStamp===this.prevTime&&C.type===this.prevType||(this.prevCode=P,this.prevTime=C.timeStamp,this.prevType=C.type,C.type==="keydown"?(R&&(A=R.isDown,R.onDown(C)),!C.cancelled&&(!R||!A)&&(c[P]&&this.emit(n.KEY_DOWN+c[P],C),C.cancelled||this.emit(n.ANY_KEY_DOWN,C))):(R&&R.onUp(C),C.cancelled||(c[P]&&this.emit(n.KEY_UP+c[P],C),C.cancelled||this.emit(n.ANY_KEY_UP,C))),C.cancelled===1&&(C.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(a.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});h.register("KeyboardPlugin",x,"keyboard","keyboard","inputKeyboard"),e.exports=x},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(143),u={};for(var n in s)u[s[n]]=n;e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s._justDown?(s._justDown=!1,!0):!1};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s._justUp?(s._justUp=!1,!0):!1};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=50);var n=s.plugin.game.loop.time-s.timeDown;return s.isDown&&n<u};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=50);var n=s.plugin.game.loop.time-s.timeUp;return s.isUp&&n<u};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={MouseManager:t(411)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TouchManager:t(413)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(21),u=t(17),n={Events:t(95),FileTypes:t(1339),File:t(23),FileTypesManager:t(8),GetURL:t(155),LoaderPlugin:t(1365),MergeXHRSettings:t(240),MultiFile:t(49),XHRLoader:t(517),XHRSettings:t(156)};n=u(!1,n,s),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AnimationJSONFile:t(1340),AsepriteFile:t(1341),AtlasJSONFile:t(1342),AtlasXMLFile:t(1343),AudioFile:t(518),AudioSpriteFile:t(1344),BinaryFile:t(1345),BitmapFontFile:t(1346),CSSFile:t(1347),GLSLFile:t(1348),HTML5AudioFile:t(519),HTMLFile:t(1349),HTMLTextureFile:t(1350),ImageFile:t(71),JSONFile:t(61),MultiAtlasFile:t(1351),MultiScriptFile:t(1352),OBJFile:t(1353),PackFile:t(1354),PluginFile:t(1355),SceneFile:t(1356),ScenePluginFile:t(1357),ScriptFile:t(520),SpriteSheetFile:t(1358),SVGFile:t(1359),TextFile:t(242),TilemapCSVFile:t(1360),TilemapImpactFile:t(1361),TilemapJSONFile:t(1362),UnityAtlasFile:t(1363),VideoFile:t(1364),XMLFile:t(241)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(61),a=t(95),o=new s({Extends:n,initialize:function(h,d,l,f,c){n.call(this,h,d,l,f,c),this.type="animationJSON"},onProcess:function(){this.loader.once(a.POST_PROCESS,this.onLoadComplete,this),n.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});u.register("animation",function(r,h,d,l){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new o(this,r[f]));else this.addFile(new o(this,r,h,l,d));return this}),e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),o=t(7),r=t(61),h=t(49),d=new s({Extends:h,initialize:function(f,c,g,p,x,y){var T,E;if(o(c)){var S=c;c=n(S,"key"),T=new a(f,{key:c,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),E=new r(f,{key:c,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","json"),xhrSettings:n(S,"atlasXhrSettings")})}else T=new a(f,c,g,x),E=new r(f,c,p,y);T.linkFile?h.call(this,f,"atlasjson",c,[T,E,T.linkFile]):h.call(this,f,"atlasjson",c,[T,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,f.data,c),f.addToCache(),this.complete=!0}}});u.register("aseprite",function(l,f,c,g,p){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new d(this,l[y]),this.addFile(x.files);else x=new d(this,l,f,c,g,p),this.addFile(x.files);return this}),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),o=t(7),r=t(61),h=t(49),d=new s({Extends:h,initialize:function(f,c,g,p,x,y){var T,E;if(o(c)){var S=c;c=n(S,"key"),T=new a(f,{key:c,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),E=new r(f,{key:c,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","json"),xhrSettings:n(S,"atlasXhrSettings")})}else T=new a(f,c,g,x),E=new r(f,c,p,y);T.linkFile?h.call(this,f,"atlasjson",c,[T,E,T.linkFile]):h.call(this,f,"atlasjson",c,[T,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,f.data,c),f.pendingDestroy(),this.complete=!0}}});u.register("atlas",function(l,f,c,g,p){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new d(this,l[y]),this.addFile(x.files);else x=new d(this,l,f,c,g,p),this.addFile(x.files);return this}),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),o=t(7),r=t(49),h=t(241),d=new s({Extends:r,initialize:function(f,c,g,p,x,y){var T,E;if(o(c)){var S=c;c=n(S,"key"),T=new a(f,{key:c,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),E=new h(f,{key:c,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","xml"),xhrSettings:n(S,"atlasXhrSettings")})}else T=new a(f,c,g,x),E=new h(f,c,p,y);T.linkFile?r.call(this,f,"atlasxml",c,[T,E,T.linkFile]):r.call(this,f,"atlasxml",c,[T,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(l.key,l.data,f.data,c),f.pendingDestroy(),this.complete=!0}}});u.register("atlasXML",function(l,f,c,g,p){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new d(this,l[y]),this.addFile(x.files);else x=new d(this,l,f,c,g,p),this.addFile(x.files);return this}),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(518),u=t(0),n=t(8),a=t(2),o=t(7),r=t(61),h=t(49),d=new u({Extends:h,initialize:function(f,c,g,p,x,y,T){if(o(c)){var E=c;c=a(E,"key"),g=a(E,"jsonURL"),p=a(E,"audioURL"),x=a(E,"audioConfig"),y=a(E,"audioXhrSettings"),T=a(E,"jsonXhrSettings")}var S;if(!p)S=new r(f,c,g,T),h.call(this,f,"audiosprite",c,[S]),this.config.resourceLoad=!0,this.config.audioConfig=x,this.config.audioXhrSettings=y;else{var C=s.create(f,c,p,x,y);C&&(S=new r(f,c,g,T),h.call(this,f,"audiosprite",c,[C,S]),this.config.resourceLoad=!1)}},onFileComplete:function(l){var f=this.files.indexOf(l);if(f!==-1&&(this.pending--,this.config.resourceLoad&&l.type==="json"&&l.data.hasOwnProperty("resources"))){var c=l.data.resources,g=a(this.config,"audioConfig"),p=a(this.config,"audioXhrSettings"),x=s.create(this.loader,l.key,c,g,p);x&&(this.addToMultiFile(x),this.loader.addFile(x))}},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1];l.addToCache(),f.addToCache(),this.complete=!0}}});n.register("audioSprite",function(l,f,c,g,p,x){var y=this.systems.game,T=y.config.audio,E=y.device.audio;if(T&&T.noAudio||!E.webAudio&&!E.audioData)return this;var S;if(Array.isArray(l))for(var C=0;C<l.length;C++)S=new d(this,l[C]),S.files&&this.addFile(S.files);else S=new d(this,l,f,c,g,p,x),S.files&&this.addFile(S.files);return this})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=new s({Extends:n,initialize:function(l,f,c,g,p){var x="bin";if(r(f)){var y=f;f=o(y,"key"),c=o(y,"url"),g=o(y,"xhrSettings"),x=o(y,"extension",x),p=o(y,"dataType",p)}var T={type:"binary",cache:l.cacheManager.binary,extension:x,responseType:"arraybuffer",key:f,url:c,xhrSettings:g,config:{dataType:p}};n.call(this,l,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var d=this.config.dataType;this.data=d?new d(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});a.register("binary",function(d,l,f,c){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,l,c,f));return this}),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),o=t(7),r=t(49),h=t(212),d=t(241),l=new s({Extends:r,initialize:function(c,g,p,x,y,T){var E,S;if(o(g)){var C=g;g=n(C,"key"),E=new a(c,{key:g,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new d(c,{key:g,url:n(C,"fontDataURL"),extension:n(C,"fontDataExtension","xml"),xhrSettings:n(C,"fontDataXhrSettings")})}else E=new a(c,g,p,y),S=new d(c,g,x,T);E.linkFile?r.call(this,c,"bitmapfont",g,[E,S,E.linkFile]):r.call(this,c,"bitmapfont",g,[E,S])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],c=this.files[1];f.addToCache(),c.pendingDestroy();var g=f.cache.get(f.key),p=h(c.data,f.cache.getFrame(f.key),0,0,g);this.loader.cacheManager.bitmapFont.add(f.key,{data:p,texture:f.key,frame:null}),this.complete=!0}}});u.register("bitmapFont",function(f,c,g,p,x){var y;if(Array.isArray(f))for(var T=0;T<f.length;T++)y=new l(this,f[T]),this.addFile(y.files);else y=new l(this,f,c,g,p,x),this.addFile(y.files);return this}),e.exports=l},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=new s({Extends:n,initialize:function(l,f,c,g){var p="css";if(r(f)){var x=f;f=o(x,"key"),c=o(x,"url"),g=o(x,"xhrSettings"),p=o(x,"extension",p)}var y={type:"script",cache:!1,extension:p,responseType:"text",key:f,url:c,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("css",function(d,l,f){if(Array.isArray(d))for(var c=0;c<d.length;c++)this.addFile(new h(this,d[c]));else this.addFile(new h(this,d,l,f));return this}),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=t(396),d=new s({Extends:n,initialize:function(f,c,g,p,x){var y="glsl";if(r(c)){var T=c;c=o(T,"key"),g=o(T,"url"),p=o(T,"shaderType","fragment"),x=o(T,"xhrSettings"),y=o(T,"extension",y)}else p===void 0&&(p="fragment");var E={type:"glsl",cache:f.cacheManager.shader,extension:y,responseType:"text",key:c,url:g,config:{shaderType:p},xhrSettings:x};n.call(this,f,E)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l=this.data.split(`
`),f=this.extractBlock(l,0);if(f)for(;f;){var c=this.getShaderName(f.header),g=this.getShaderType(f.header),p=this.getShaderUniforms(f.header),x=f.shader;if(this.cache.has(c)){var y=this.cache.get(c);g==="fragment"?y.fragmentSrc=x:y.vertexSrc=x,y.uniforms||(y.uniforms=p)}else g==="fragment"?this.cache.add(c,new h(c,x,"",p)):this.cache.add(c,new h(c,"",x,p));f=this.extractBlock(l,f.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new h(this.key,this.data)):this.cache.add(this.key,new h(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(l){for(var f=0;f<l.length;f++){var c=l[f].trim();if(c.substring(0,5)==="name:")return c.substring(5).trim()}return this.key},getShaderType:function(l){for(var f=0;f<l.length;f++){var c=l[f].trim();if(c.substring(0,5)==="type:")return c.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(l){for(var f={},c=0;c<l.length;c++){var g=l[c].trim();if(g.substring(0,8)==="uniform."){var p=g.indexOf(":");if(p){var x=g.substring(8,p);try{f[x]=JSON.parse(g.substring(p+1))}catch{console.warn("Invalid uniform JSON: "+x)}}}}return f},extractBlock:function(l,f){for(var c=-1,g=-1,p=-1,x=!1,y=!1,T=[],E=[],S=f;S<l.length;S++){var C=l[S].trim();if(C==="---")if(c===-1)c=S,x=!0;else if(x)g=S,x=!1,y=!0;else{y=!1;break}else x?T.push(C):y&&(E.push(C),p=S)}return!x&&g!==-1?{header:T,shader:E.join(`
`),offset:p}:null}});a.register("glsl",function(l,f,c,g){if(Array.isArray(l))for(var p=0;p<l.length;p++)this.addFile(new d(this,l[p]));else this.addFile(new d(this,l,f,c,g));return this}),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=new s({Extends:n,initialize:function(l,f,c,g){var p="html";if(r(f)){var x=f;f=o(x,"key"),c=o(x,"url"),g=o(x,"xhrSettings"),p=o(x,"extension",p)}var y={type:"text",cache:l.cacheManager.html,extension:p,responseType:"text",key:f,url:c,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("html",function(d,l,f){if(Array.isArray(d))for(var c=0;c<d.length;c++)this.addFile(new h(this,d[c]));else this.addFile(new h(this,d,l,f));return this}),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=new s({Extends:n,initialize:function(l,f,c,g,p,x){g===void 0&&(g=512),p===void 0&&(p=512);var y="html";if(r(f)){var T=f;f=o(T,"key"),c=o(T,"url"),x=o(T,"xhrSettings"),y=o(T,"extension",y),g=o(T,"width",g),p=o(T,"height",p)}var E={type:"html",cache:l.textureManager,extension:y,responseType:"text",key:f,url:c,xhrSettings:x,config:{width:g,height:p}};n.call(this,l,E)},onProcess:function(){this.state=u.FILE_PROCESSING;var d=this.config.width,l=this.config.height,f=[];f.push('<svg width="'+d+'px" height="'+l+'px" viewBox="0 0 '+d+" "+l+'" xmlns="http://www.w3.org/2000/svg">'),f.push('<foreignObject width="100%" height="100%">'),f.push('<body xmlns="http://www.w3.org/1999/xhtml">'),f.push(this.xhrLoader.responseText),f.push("</body>"),f.push("</foreignObject>"),f.push("</svg>");var c=[f.join(`
`)],g=this;try{var p=new window.Blob(c,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=u.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){n.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(g.data),g.onProcessError()},n.createObjectURL(this.data,p,"image/svg+xml")},addToCache:function(){var d=this.cache.addImage(this.key,this.data);this.pendingDestroy(d)}});a.register("htmlTexture",function(d,l,f,c,g){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new h(this,d[p]));else this.addFile(new h(this,d,l,f,c,g));return this}),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),o=t(7),r=t(61),h=t(49),d=new s({Extends:h,initialize:function(f,c,g,p,x,y,T){if(o(c)){var E=c;c=n(E,"key"),n(E,"url",!1)?g=n(E,"url"):g=n(E,"atlasURL"),y=n(E,"xhrSettings"),p=n(E,"path"),x=n(E,"baseURL"),T=n(E,"textureXhrSettings")}var S=new r(f,c,g,y);h.call(this,f,"multiatlas",c,[S]),this.config.path=p,this.config.baseURL=x,this.config.textureXhrSettings=T},onFileComplete:function(l){var f=this.files.indexOf(l);if(f!==-1&&(this.pending--,l.type==="json"&&l.data.hasOwnProperty("textures"))){var c=l.data.textures,g=this.config,p=this.loader,x=p.baseURL,y=p.path,T=p.prefix,E=n(g,"baseURL",this.baseURL),S=n(g,"path",this.path),C=n(g,"prefix",this.prefix),P=n(g,"textureXhrSettings");p.setBaseURL(E),p.setPath(S),p.setPrefix(C);for(var R=0;R<c.length;R++){var A=c[R].image,M="MA"+this.multiKeyIndex+"_"+A,O=new a(p,M,A,P);if(this.addToMultiFile(O),p.addFile(O),c[R].normalMap){var F=new a(p,M,c[R].normalMap,P);F.type="normalMap",O.setLink(F),this.addToMultiFile(F),p.addFile(F)}}p.setBaseURL(x),p.setPath(y),p.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var l=this.files[0],f=[],c=[],g=[],p=1;p<this.files.length;p++){var x=this.files[p];if(x.type!=="normalMap")for(var y=x.key.indexOf("_"),T=x.key.substr(y+1),E=x.data,S=0;S<l.data.textures.length;S++){var C=l.data.textures[S];if(C.image===T){c.push(E),f.push(C),x.linkFile&&g.push(x.linkFile.data);break}}}for(g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,c,f,g),this.complete=!0,p=0;p<this.files.length;p++)this.files[p].pendingDestroy()}}});u.register("multiatlas",function(l,f,c,g,p){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new d(this,l[y]),this.addFile(x.files);else x=new d(this,l,f,c,g,p),this.addFile(x.files);return this}),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(7),o=t(49),r=t(520),h=new s({Extends:o,initialize:function(l,f,c,g){var p="js",x=[];if(a(f)){var y=f;f=n(y,"key"),c=n(y,"url"),g=n(y,"xhrSettings"),p=n(y,"extension",p)}Array.isArray(c)||(c=[c]);for(var T=0;T<c.length;T++){var E=new r(l,{key:f+"_"+T.toString(),url:c[T],extension:p,xhrSettings:g});E.onProcess=function(){this.onProcessComplete()},x.push(E)}o.call(this,l,"scripts",f,x)},addToCache:function(){if(this.isReadyToProcess()){for(var d=0;d<this.files.length;d++){var l=this.files[d];l.data=document.createElement("script"),l.data.language="javascript",l.data.type="text/javascript",l.data.defer=!1,l.data.text=l.xhrLoader.responseText,document.head.appendChild(l.data)}this.complete=!0}}});u.register("scripts",function(d,l,f){var c;if(Array.isArray(d))for(var g=0;g<d.length;g++)c=new h(this,d[g]),this.addFile(c.files);else c=new h(this,d,l,f),this.addFile(c.files);return this}),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(7),o=t(49),r=t(498),h=t(499),d=t(242),l=new s({Extends:o,initialize:function(c,g,p,x,y,T){var E,S,C=c.cacheManager.obj;if(a(g)){var P=g;g=n(P,"key"),E=new d(c,{key:g,type:"obj",cache:C,url:n(P,"url"),extension:n(P,"extension","obj"),xhrSettings:n(P,"xhrSettings"),config:{flipUV:n(P,"flipUV",y)}}),x=n(P,"matURL"),x&&(S=new d(c,{key:g,type:"mat",cache:C,url:x,extension:n(P,"matExtension","mat"),xhrSettings:n(P,"xhrSettings")}))}else E=new d(c,{key:g,url:p,type:"obj",cache:C,extension:"obj",xhrSettings:T,config:{flipUV:y}}),x&&(S=new d(c,{key:g,url:x,type:"mat",cache:C,extension:"mat",xhrSettings:T}));o.call(this,c,"obj",g,[E,S])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],c=this.files[1],g=r(f.data,f.config.flipUV);c&&(g.materials=h(c.data)),f.cache.add(f.key,g),this.complete=!0}}});u.register("obj",function(f,c,g,p,x){var y;if(Array.isArray(f))for(var T=0;T<f.length;T++)y=new l(this,f[T]),this.addFile(y.files);else y=new l(this,f,c,g,p,x),this.addFile(y.files);return this}),e.exports=l},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(8),a=t(61),o=new s({Extends:a,initialize:function(h,d,l,f,c){a.call(this,h,d,l,f,c),this.type="packfile"},onProcess:function(){this.state!==u.FILE_POPULATED&&(this.state=u.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});n.register("pack",function(r,h,d,l){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new o(this,r[f]));else this.addFile(new o(this,r,h,l,d));return this}),e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=new s({Extends:n,initialize:function(l,f,c,g,p,x){var y="js";if(r(f)){var T=f;f=o(T,"key"),c=o(T,"url"),x=o(T,"xhrSettings"),y=o(T,"extension",y),g=o(T,"start"),p=o(T,"mapping")}var E={type:"plugin",cache:!1,extension:y,responseType:"text",key:f,url:c,xhrSettings:x,config:{start:g,mapping:p}};n.call(this,l,E),typeof c=="function"&&(this.data=c,this.state=u.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,l=this.config,f=o(l,"start",!1),c=o(l,"mapping",null);if(this.state===u.FILE_POPULATED)d.install(this.key,this.data,f,c);else{this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=d.install(this.key,window[this.key],f,c);(f||c)&&(this.loader.systems[c]=g,this.loader.scene[c]=g)}this.onProcessComplete()}});a.register("plugin",function(d,l,f,c,g){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new h(this,d[p]));else this.addFile(new h(this,d,l,f,c,g));return this}),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=new s({Extends:n,initialize:function(l,f,c,g){var p="js";if(r(f)){var x=f;f=o(x,"key"),c=o(x,"url"),g=o(x,"xhrSettings"),p=o(x,"extension",p)}var y={type:"text",extension:p,responseType:"text",key:f,url:c,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),l=eval;this.loader.sceneManager.add(this.key,l(d)),this.complete=!0}});a.register("sceneFile",function(d,l,f){if(Array.isArray(d))for(var c=0;c<d.length;c++)this.addFile(new h(this,d[c]));else this.addFile(new h(this,d,l,f));return this}),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=new s({Extends:n,initialize:function(l,f,c,g,p,x){var y="js";if(r(f)){var T=f;f=o(T,"key"),c=o(T,"url"),x=o(T,"xhrSettings"),y=o(T,"extension",y),g=o(T,"systemKey"),p=o(T,"sceneKey")}var E={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:f,url:c,xhrSettings:x,config:{systemKey:g,sceneKey:p}};n.call(this,l,E),typeof c=="function"&&(this.data=c,this.state=u.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,l=this.config,f=this.key,c=o(l,"systemKey",f),g=o(l,"sceneKey",f);this.state===u.FILE_POPULATED?d.installScenePlugin(c,this.data,g,this.loader.scene,!0):(this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),d.installScenePlugin(c,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});a.register("scenePlugin",function(d,l,f,c,g){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new h(this,d[p]));else this.addFile(new h(this,d,l,f,c,g));return this}),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(71),a=new s({Extends:n,initialize:function(r,h,d,l,f){n.call(this,r,h,d,f,l),this.type="spritesheet"},addToCache:function(){var o=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(o)}});u.register("spritesheet",function(o,r,h,d){if(Array.isArray(o))for(var l=0;l<o.length;l++)this.addFile(new a(this,o[l]));else this.addFile(new a(this,o,r,h,d));return this}),e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=new s({Extends:n,initialize:function(l,f,c,g,p){var x="svg";if(r(f)){var y=f;f=o(y,"key"),c=o(y,"url"),g=o(y,"svgConfig",{}),p=o(y,"xhrSettings"),x=o(y,"extension",x)}var T={type:"svg",cache:l.textureManager,extension:x,responseType:"text",key:f,url:c,xhrSettings:p,config:{width:o(g,"width"),height:o(g,"height"),scale:o(g,"scale")}};n.call(this,l,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var d=this.xhrLoader.responseText,l=[d],f=this.config.width,c=this.config.height,g=this.config.scale;t:if(f&&c||g){var p=null,x=new DOMParser;p=x.parseFromString(d,"text/xml");var y=p.getElementsByTagName("svg")[0],T=y.hasAttribute("viewBox"),E=parseFloat(y.getAttribute("width")),S=parseFloat(y.getAttribute("height"));if(!T&&E&&S)y.setAttribute("viewBox","0  0 "+E+" "+S);else if(T&&!E&&!S){var C=y.getAttribute("viewBox").split(/\s+|,/);E=C[2],S=C[3]}if(g)if(E&&S)f=E*g,c=S*g;else break t;y.setAttribute("width",f.toString()+"px"),y.setAttribute("height",c.toString()+"px"),l=[new XMLSerializer().serializeToString(y)]}try{var P=new window.Blob(l,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var R=this,A=!1;this.data.onload=function(){A||n.revokeObjectURL(R.data),R.onProcessComplete()},this.data.onerror=function(){A?R.onProcessError():(A=!0,n.revokeObjectURL(R.data),R.data.src="data:image/svg+xml,"+encodeURIComponent(l.join("")))},n.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){var d=this.cache.addImage(this.key,this.data);this.pendingDestroy(d)}});a.register("svg",function(d,l,f,c){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,l,f,c));return this}),e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(2),r=t(7),h=t(40),d=new s({Extends:n,initialize:function(f,c,g,p){var x="csv";if(r(c)){var y=c;c=o(y,"key"),g=o(y,"url"),p=o(y,"xhrSettings"),x=o(y,"extension",x)}var T={type:"tilemapCSV",cache:f.cacheManager.tilemap,extension:x,responseType:"text",key:c,url:g,xhrSettings:p};n.call(this,f,T),this.tilemapFormat=h.CSV},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,l),this.pendingDestroy(l)}});a.register("tilemapCSV",function(l,f,c){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new d(this,l[g]));else this.addFile(new d(this,l,f,c));return this}),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(61),a=t(40),o=new s({Extends:n,initialize:function(h,d,l,f){n.call(this,h,d,l,f),this.type="tilemapJSON",this.cache=h.cacheManager.tilemap},addToCache:function(){var r={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});u.register("tilemapImpact",function(r,h,d){if(Array.isArray(r))for(var l=0;l<r.length;l++)this.addFile(new o(this,r[l]));else this.addFile(new o(this,r,h,d));return this}),e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(61),a=t(40),o=new s({Extends:n,initialize:function(h,d,l,f){n.call(this,h,d,l,f),this.type="tilemapJSON",this.cache=h.cacheManager.tilemap},addToCache:function(){var r={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});u.register("tilemapTiledJSON",function(r,h,d){if(Array.isArray(r))for(var l=0;l<r.length;l++)this.addFile(new o(this,r[l]));else this.addFile(new o(this,r,h,d));return this}),e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),a=t(71),o=t(7),r=t(49),h=t(242),d=new s({Extends:r,initialize:function(f,c,g,p,x,y){var T,E;if(o(c)){var S=c;c=n(S,"key"),T=new a(f,{key:c,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),E=new h(f,{key:c,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","txt"),xhrSettings:n(S,"atlasXhrSettings")})}else T=new a(f,c,g,x),E=new h(f,c,p,y);T.linkFile?r.call(this,f,"unityatlas",c,[T,E,T.linkFile]):r.call(this,f,"unityatlas",c,[T,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(l.key,l.data,f.data,c),f.pendingDestroy(),this.complete=!0}}});u.register("unityAtlas",function(l,f,c,g,p){var x;if(Array.isArray(l))for(var y=0;y<l.length;y++)x=new d(this,l[y]),this.addFile(x.files);else x=new d(this,l,f,c,g,p),this.addFile(x.files);return this}),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),a=t(8),o=t(155),r=t(2),h=t(7),d=new s({Extends:n,initialize:function(f,c,g,p,x,y,T){p===void 0&&(p="loadeddata"),x===void 0&&(x=!1),y===void 0&&(y=!1),p!=="loadeddata"&&p!=="canplay"&&p!=="canplaythrough"&&(p="loadeddata");var E={type:"video",cache:f.cacheManager.video,extension:g.type,responseType:"blob",key:c,url:g.url,xhrSettings:T,config:{loadEvent:p,asBlob:x,noAudio:y}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),n.call(this,f,E)},onProcess:function(){if(this.state=u.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var l=this.createVideoElement();this.data=l;var f=this;this.data.onloadeddata=function(){f.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(f.data),f.onProcessError()},n.createObjectURL(l,this.xhrLoader.response,""),l.load()},createVideoElement:function(){var l=document.createElement("video");return l.controls=!1,l.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(l.muted=!0,l.defaultMuted=!0,l.setAttribute("autoplay","autoplay")),l.setAttribute("playsinline","playsinline"),l.setAttribute("preload","auto"),l},onVideoLoadHandler:function(l){var f=l.target;f.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),f.removeEventListener("error",this.onErrorCallback,!0),this.data=f,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(l){var f=l.target;f&&(f.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),f.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var l=this.config.loadEvent;if(this.config.asBlob)n.prototype.load.call(this);else{this.percentComplete=0;var f=this.createVideoElement();f.addEventListener(l,this.onLoadCallback,!0),f.addEventListener("error",this.onErrorCallback,!0),f.src=o(this,this.loader.baseURL),f.load()}}});d.create=function(l,f,c,g,p,x,y){var T=l.systems.game;h(f)&&(c=r(f,"url",[]),g=r(f,"loadEvent","loadeddata"),p=r(f,"asBlob",!1),x=r(f,"noAudio",!1),y=r(f,"xhrSettings"),f=r(f,"key"));var E=d.getVideoURL(T,c);if(E)return new d(l,f,E,g,p,x,y)},d.getVideoURL=function(l,f){Array.isArray(f)||(f=[f]);for(var c=0;c<f.length;c++){var g=r(f[c],"url",f[c]);if(g.indexOf("blob:")===0)return{url:g,type:""};var p;if(g.indexOf("data:")===0?p=g.split(",")[0].match(/\/(.*?);/):p=g.match(/\.([a-zA-Z0-9]+)($|\?)/),p=r(f[c],"type",p?p[1]:"").toLowerCase(),l.device.video[p])return{url:g,type:p}}return null},a.register("video",function(l,f,c,g,p,x){var y;if(Array.isArray(l))for(var T=0;T<l.length;T++)y=d.create(this,l[T]),y&&this.addFile(y);else y=d.create(this,l,f,c,g,p,x),y&&this.addFile(y);return this}),e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(149),a=t(9),o=t(95),r=t(8),h=t(2),d=t(24),l=t(20),f=t(156),c=new s({Extends:a,initialize:function(p){a.call(this);var x=p.sys.game.config,y=p.sys.settings.loader;this.scene=p,this.systems=p.sys,this.cacheManager=p.sys.cache,this.textureManager=p.sys.textures,this.sceneManager=p.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(h(y,"baseURL",x.loaderBaseURL)),this.setPath(h(y,"path",x.loaderPath)),this.setPrefix(h(y,"prefix",x.loaderPrefix)),this.maxParallelDownloads=h(y,"maxParallelDownloads",x.loaderMaxParallelDownloads),this.xhr=f(h(y,"responseType",x.loaderResponseType),h(y,"async",x.loaderAsync),h(y,"user",x.loaderUser),h(y,"password",x.loaderPassword),h(y,"timeout",x.loaderTimeout),h(y,"withCredentials",x.loaderWithCredentials)),this.crossOrigin=h(y,"crossOrigin",x.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new n,this.inflight=new n,this.queue=new n,this._deleteQueue=new n,this.totalFailed=0,this.totalComplete=0,this.state=u.LOADER_IDLE,this.multiKeyIndex=0,p.sys.events.once(l.BOOT,this.boot,this),p.sys.events.on(l.START,this.pluginStart,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(l.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var p=0;p<g.length;p++){var x=g[p];this.keyExists(x)||(this.list.set(x),this.emit(o.ADD,x.key,x.type,this,x),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var p=g.hasCacheConflict();return p||this.list.iterate(function(x){if(x.type===g.type&&x.key===g.key)return p=!0,!1}),!p&&this.isLoading()&&(this.inflight.iterate(function(x){if(x.type===g.type&&x.key===g.key)return p=!0,!1}),this.queue.iterate(function(x){if(x.type===g.type&&x.key===g.key)return p=!0,!1})),p},addPack:function(g,p){p&&g.hasOwnProperty(p)&&(g={packKey:g[p]});var x=0,y=this.baseURL,T=this.path,E=this.prefix;for(var S in g)if(!!Object.prototype.hasOwnProperty.call(g,S)){var C=g[S],P=h(C,"baseURL",y),R=h(C,"path",T),A=h(C,"prefix",E),M=h(C,"files",null),O=h(C,"defaultType","void");if(Array.isArray(M)){this.setBaseURL(P),this.setPath(R),this.setPrefix(A);for(var F=0;F<M.length;F++){var I=M[F],B=I.hasOwnProperty("type")?I.type:O;this[B]&&(this[B](I),x++)}}}return this.setBaseURL(y),this.setPath(T),this.setPrefix(E),x>0},isLoading:function(){return this.state===u.LOADER_LOADING||this.state===u.LOADER_PROCESSING},isReady:function(){return this.state===u.LOADER_IDLE||this.state===u.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(o.START,this),this.list.size===0?this.loadComplete():(this.state=u.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(l.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(o.PROGRESS,this.progress)},update:function(){this.state===u.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===u.FILE_POPULATED||g.state===u.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,p){!this.inflight||(this.inflight.delete(g),this.updateProgress(),p?(this.totalComplete++,this.queue.set(g),this.emit(o.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(o.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===u.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===u.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&g.multiFile.addToCache():g.addToCache()),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(o.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=u.LOADER_COMPLETE,this.systems.events.off(l.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(o.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,p){return this.save(JSON.stringify(g),p)},save:function(g,p,x){p===void 0&&(p="file.json"),x===void 0&&(x="application/json");var y=new Blob([g],{type:x}),T=URL.createObjectURL(y),E=document.createElement("a");return E.download=p,E.textContent="Download "+p,E.href=T,E.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,p=this.systems.settings.loader;this.setBaseURL(h(p,"baseURL",g.loaderBaseURL)),this.setPath(h(p,"path",g.loaderPath)),this.setPrefix(h(p,"prefix",g.loaderPrefix)),this.state=u.LOADER_IDLE},shutdown:function(){this.reset(),this.state=u.LOADER_SHUTDOWN,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=u.LOADER_DESTROYED,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});d.register("Loader",c,"load"),e.exports=c},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62),u=t(17),n={ArcadePhysics:t(1367),Body:t(527),Collider:t(528),Components:t(243),Events:t(245),Factory:t(521),GetOverlapX:t(246),GetOverlapY:t(247),SeparateX:t(537),SeparateY:t(538),Group:t(524),Image:t(522),Sprite:t(157),StaticBody:t(539),StaticGroup:t(525),Tilemap:t(1391),World:t(526)};n=u(!1,n,s),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(36),n=t(50),a=t(353),o=t(521),r=t(2),h=t(127),d=t(523),l=t(244),f=t(24),c=t(20),g=t(3),p=t(526),x=new s({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,T.sys.events.once(c.BOOT,this.boot,this),T.sys.events.on(c.START,this.start,this)},boot:function(){this.world=new p(this.scene,this.config),this.add=new o(this.world),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new p(this.scene,this.config),this.add=new o(this.world));var y=this.systems.events;r(this.config,"customUpdate",!1)||y.on(c.UPDATE,this.world.update,this.world),y.on(c.POST_UPDATE,this.world.postUpdate,this.world),y.once(c.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(c.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(c.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,T=this.systems.settings.physics,E=h(r(T,"arcade",{}),r(y,"arcade",{}));return E},overlap:function(y,T,E,S,C){return E===void 0&&(E=null),S===void 0&&(S=null),C===void 0&&(C=E),this.world.collideObjects(y,T,E,S,C,!0)},collide:function(y,T,E,S,C){return E===void 0&&(E=null),S===void 0&&(S=null),C===void 0&&(C=E),this.world.collideObjects(y,T,E,S,C,!1)},collideTiles:function(y,T,E,S,C){return this.world.collideTiles(y,T,E,S,C)},overlapTiles:function(y,T,E,S,C){return this.world.overlapTiles(y,T,E,S,C)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,T,E,S,C,P){S===void 0&&(S=60);var R=Math.atan2(E-y.y,T-y.x);return y.body.acceleration.setToPolar(R,S),C!==void 0&&P!==void 0&&y.body.maxVelocity.set(C,P),R},accelerateToObject:function(y,T,E,S,C){return this.accelerateTo(y,T.x,T.y,E,S,C)},closest:function(y,T){T||(T=this.world.bodies.entries);for(var E=Number.MAX_VALUE,S=null,C=y.x,P=y.y,R=T.length,A=0;A<R;A++){var M=T[A],O=M.body||M;if(!(y===M||y===O||y===O.gameObject||y===O.center)){var F=a(C,P,O.center.x,O.center.y);F<E&&(S=M,E=F)}}return S},furthest:function(y,T){T||(T=this.world.bodies.entries);for(var E=-1,S=null,C=y.x,P=y.y,R=T.length,A=0;A<R;A++){var M=T[A],O=M.body||M;if(!(y===M||y===O||y===O.gameObject||y===O.center)){var F=a(C,P,O.center.x,O.center.y);F>E&&(S=M,E=F)}}return S},moveTo:function(y,T,E,S,C){S===void 0&&(S=60),C===void 0&&(C=0);var P=Math.atan2(E-y.y,T-y.x);return C>0&&(S=n(y.x,y.y,T,E)/(C/1e3)),y.body.velocity.setToPolar(P,S),P},moveToObject:function(y,T,E,S){return this.moveTo(y,T.x,T.y,E,S)},velocityFromAngle:function(y,T,E){return T===void 0&&(T=60),E===void 0&&(E=new g),E.setToPolar(u(y),T)},velocityFromRotation:function(y,T,E){return T===void 0&&(T=60),E===void 0&&(E=new g),E.setToPolar(y,T)},overlapRect:function(y,T,E,S,C,P){return l(this.world,y,T,E,S,C,P)},overlapCirc:function(y,T,E,S,C){return d(this.world,y,T,E,S,C)},shutdown:function(){if(!!this.world){var y=this.systems.events;y.off(c.UPDATE,this.world.update,this.world),y.off(c.POST_UPDATE,this.world.postUpdate,this.world),y.off(c.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});f.register("ArcadePhysics",x,"arcadePhysics"),e.exports=x},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAcceleration:function(s,u){return this.body.acceleration.set(s,u),this},setAccelerationX:function(s){return this.body.acceleration.x=s,this},setAccelerationY:function(s){return this.body.acceleration.y=s,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAngularVelocity:function(s){return this.body.angularVelocity=s,this},setAngularAcceleration:function(s){return this.body.angularAcceleration=s,this},setAngularDrag:function(s){return this.body.angularDrag=s,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(s,u){return this.body.bounce.set(s,u),this},setBounceX:function(s){return this.body.bounce.x=s,this},setBounceY:function(s){return this.body.bounce.y=s,this},setCollideWorldBounds:function(s,u,n){return this.body.setCollideWorldBounds(s,u,n),this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDebug:function(s,u,n){return this.debugShowBody=s,this.debugShowVelocity=u,this.debugBodyColor=n,this},setDebugBodyColor:function(s){return this.body.debugBodyColor=s,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(s){this.body.debugShowBody=s}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(s){this.body.debugShowVelocity=s}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(s){this.body.debugBodyColor=s}}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDrag:function(s,u){return this.body.drag.set(s,u),this},setDragX:function(s){return this.body.drag.x=s,this},setDragY:function(s){return this.body.drag.y=s,this},setDamping:function(s){return this.body.useDamping=s,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={enableBody:function(s,u,n,a,o){return s&&this.body.reset(u,n),a&&(this.body.gameObject.active=!0),o&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(s,u){return s===void 0&&(s=!1),u===void 0&&(u=!1),this.body.stop(),this.body.enable=!1,s&&(this.body.gameObject.active=!1),u&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(s,u){return this.body.friction.set(s,u),this},setFrictionX:function(s){return this.body.friction.x=s,this},setFrictionY:function(s){return this.body.friction.y=s,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setGravity:function(s,u){return this.body.gravity.set(s,u),this},setGravityX:function(s){return this.body.gravity.x=s,this},setGravityY:function(s){return this.body.gravity.y=s,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setImmovable:function(s){return s===void 0&&(s=!0),this.body.immovable=s,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setMass:function(s){return this.body.mass=s,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setPushable:function(s){return s===void 0&&(s=!0),this.body.pushable=s,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setOffset:function(s,u){return this.body.setOffset(s,u),this},setSize:function(s,u,n){return this.body.setSize(s,u,n),this},setBodySize:function(s,u,n){return this.body.setSize(s,u,n),this},setCircle:function(s,u,n){return this.body.setCircle(s,u,n),this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setVelocity:function(s,u){return this.body.setVelocity(s,u),this},setVelocityX:function(s){return this.body.setVelocityX(s),this},setVelocityY:function(s){return this.body.setVelocityY(s),this},setMaxVelocity:function(s,u){return this.body.maxVelocity.set(s,u),this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collide"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="overlap"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tilecollide"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tileoverlap"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldbounds"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldstep"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,s,u,n,a,o,r,h,d,l,f,c,g,p,x,y,T,E=function(M,O,F){t=M,s=O;var I=t.velocity.x,B=s.velocity.x;return u=t.pushable,d=t._dx<0,l=t._dx>0,f=t._dx===0,x=Math.abs(t.right-s.x)<=Math.abs(s.right-t.x),r=B-I*t.bounce.x,n=s.pushable,c=s._dx<0,g=s._dx>0,p=s._dx===0,y=!x,h=I-B*s.bounce.x,T=Math.abs(F),S()},S=function(){return l&&x&&s.blocked.right?(t.processX(-T,r,!1,!0),1):d&&y&&s.blocked.left?(t.processX(T,r,!0),1):g&&y&&t.blocked.right?(s.processX(-T,h,!1,!0),2):c&&x&&t.blocked.left?(s.processX(T,h,!0),2):0},C=function(){var M=t.velocity.x,O=s.velocity.x,F=Math.sqrt(O*O*s.mass/t.mass)*(O>0?1:-1),I=Math.sqrt(M*M*t.mass/s.mass)*(M>0?1:-1),B=(F+I)*.5;return F-=B,I-=B,a=B+F*t.bounce.x,o=B+I*s.bounce.x,d&&y?P(0):c&&x?P(1):l&&x?P(2):g&&y?P(3):!1},P=function(M){if(u&&n)T*=.5,M===0||M===3?(t.processX(T,a),s.processX(-T,o)):(t.processX(-T,a),s.processX(T,o));else if(u&&!n)M===0||M===3?t.processX(T,r,!0):t.processX(-T,r,!1,!0);else if(!u&&n)M===0||M===3?s.processX(-T,h,!1,!0):s.processX(T,h,!0);else{var O=T*.5;M===0?p?(t.processX(T,0,!0),s.processX(0,null,!1,!0)):g?(t.processX(O,0,!0),s.processX(-O,0,!1,!0)):(t.processX(O,s.velocity.x,!0),s.processX(-O,null,!1,!0)):M===1?f?(t.processX(0,null,!1,!0),s.processX(T,0,!0)):l?(t.processX(-O,0,!1,!0),s.processX(O,0,!0)):(t.processX(-O,null,!1,!0),s.processX(O,t.velocity.x,!0)):M===2?p?(t.processX(-T,0,!1,!0),s.processX(0,null,!0)):c?(t.processX(-O,0,!1,!0),s.processX(O,0,!0)):(t.processX(-O,s.velocity.x,!1,!0),s.processX(O,null,!0)):M===3&&(f?(t.processX(0,null,!0),s.processX(-T,0,!1,!0)):d?(t.processX(O,0,!0),s.processX(-O,0,!1,!0)):(t.processX(O,s.velocity.y,!0),s.processX(-O,null,!1,!0)))}return!0},R=function(M){M===1?s.velocity.x=0:x?s.processX(T,h,!0):s.processX(-T,h,!1,!0),t.moves&&(s.y+=(t.y-t.prev.y)*t.friction.y,s._dy=s.y-s.prev.y)},A=function(M){M===2?t.velocity.x=0:y?t.processX(T,r,!0):t.processX(-T,r,!1,!0),s.moves&&(t.y+=(s.y-s.prev.y)*s.friction.y,t._dy=t.y-t.prev.y)};e.exports={BlockCheck:S,Check:C,Set:E,Run:P,RunImmovableBody1:R,RunImmovableBody2:A}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,s,u,n,a,o,r,h,d,l,f,c,g,p,x,y,T,E=function(M,O,F){t=M,s=O;var I=t.velocity.y,B=s.velocity.y;return u=t.pushable,d=t._dy<0,l=t._dy>0,f=t._dy===0,x=Math.abs(t.bottom-s.y)<=Math.abs(s.bottom-t.y),r=B-I*t.bounce.y,n=s.pushable,c=s._dy<0,g=s._dy>0,p=s._dy===0,y=!x,h=I-B*s.bounce.y,T=Math.abs(F),S()},S=function(){return l&&x&&s.blocked.down?(t.processY(-T,r,!1,!0),1):d&&y&&s.blocked.up?(t.processY(T,r,!0),1):g&&y&&t.blocked.down?(s.processY(-T,h,!1,!0),2):c&&x&&t.blocked.up?(s.processY(T,h,!0),2):0},C=function(){var M=t.velocity.y,O=s.velocity.y,F=Math.sqrt(O*O*s.mass/t.mass)*(O>0?1:-1),I=Math.sqrt(M*M*t.mass/s.mass)*(M>0?1:-1),B=(F+I)*.5;return F-=B,I-=B,a=B+F*t.bounce.y,o=B+I*s.bounce.y,d&&y?P(0):c&&x?P(1):l&&x?P(2):g&&y?P(3):!1},P=function(M){if(u&&n)T*=.5,M===0||M===3?(t.processY(T,a),s.processY(-T,o)):(t.processY(-T,a),s.processY(T,o));else if(u&&!n)M===0||M===3?t.processY(T,r,!0):t.processY(-T,r,!1,!0);else if(!u&&n)M===0||M===3?s.processY(-T,h,!1,!0):s.processY(T,h,!0);else{var O=T*.5;M===0?p?(t.processY(T,0,!0),s.processY(0,null,!1,!0)):g?(t.processY(O,0,!0),s.processY(-O,0,!1,!0)):(t.processY(O,s.velocity.y,!0),s.processY(-O,null,!1,!0)):M===1?f?(t.processY(0,null,!1,!0),s.processY(T,0,!0)):l?(t.processY(-O,0,!1,!0),s.processY(O,0,!0)):(t.processY(-O,null,!1,!0),s.processY(O,t.velocity.y,!0)):M===2?p?(t.processY(-T,0,!1,!0),s.processY(0,null,!0)):c?(t.processY(-O,0,!1,!0),s.processY(O,0,!0)):(t.processY(-O,s.velocity.y,!1,!0),s.processY(O,null,!0)):M===3&&(f?(t.processY(0,null,!0),s.processY(-T,0,!1,!0)):d?(t.processY(O,0,!0),s.processY(-O,0,!1,!0)):(t.processY(O,s.velocity.y,!0),s.processY(-O,null,!1,!0)))}return!0},R=function(M){M===1?s.velocity.y=0:x?s.processY(T,h,!0):s.processY(-T,h,!1,!0),t.moves&&(s.x+=(t.x-t.prev.x)*t.friction.x,s._dx=s.x-s.prev.x)},A=function(M){M===2?t.velocity.y=0:y?t.processY(T,r,!0):t.processY(-T,r,!1,!0),s.moves&&(t.x+=(s.x-s.prev.x)*s.friction.x,t._dx=t.x-t.prev.x)};e.exports={BlockCheck:S,Check:C,Set:E,Run:P,RunImmovableBody1:R,RunImmovableBody2:A}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ProcessTileCallbacks:t(530),ProcessTileSeparationX:t(534),ProcessTileSeparationY:t(536),SeparateTile:t(532),TileCheckX:t(533),TileCheckY:t(535),TileIntersectsBody:t(248)};e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(3),n=new s({initialize:function(){this.boundsCenter=new u,this.centerDiff=new u},parseBody:function(a){if(a=a.hasOwnProperty("body")?a.body:a,!a.hasOwnProperty("bounds")||!a.hasOwnProperty("centerOfMass"))return!1;var o=this.boundsCenter,r=this.centerDiff,h=a.bounds.max.x-a.bounds.min.x,d=a.bounds.max.y-a.bounds.min.y,l=h*a.centerOfMass.x,f=d*a.centerOfMass.y;return o.set(h/2,d/2),r.set(l-o.x,f-o.y),!0},getTopLeft:function(a,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(a)){var h=this.boundsCenter,d=this.centerDiff;return new u(o+h.x+d.x,r+h.y+d.y)}return!1},getTopCenter:function(a,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(a)){var h=this.boundsCenter,d=this.centerDiff;return new u(o+d.x,r+h.y+d.y)}return!1},getTopRight:function(a,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(a)){var h=this.boundsCenter,d=this.centerDiff;return new u(o-(h.x-d.x),r+h.y+d.y)}return!1},getLeftCenter:function(a,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(a)){var h=this.boundsCenter,d=this.centerDiff;return new u(o+h.x+d.x,r+d.y)}return!1},getCenter:function(a,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(a)){var h=this.centerDiff;return new u(o+h.x,r+h.y)}return!1},getRightCenter:function(a,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(a)){var h=this.boundsCenter,d=this.centerDiff;return new u(o-(h.x-d.x),r+d.y)}return!1},getBottomLeft:function(a,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(a)){var h=this.boundsCenter,d=this.centerDiff;return new u(o+h.x+d.x,r-(h.y-d.y))}return!1},getBottomCenter:function(a,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(a)){var h=this.boundsCenter,d=this.centerDiff;return new u(o+d.x,r-(h.y-d.y))}return!1},getBottomRight:function(a,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(a)){var h=this.boundsCenter,d=this.centerDiff;return new u(o-(h.x-d.x),r-(h.y-d.y))}return!1}});e.exports=n},function(e,v){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={decomp:M,quickDecomp:B,isSimple:F,removeCollinearPoints:V,removeDuplicatePoints:U,makeCCW:x};function t(w,L,D){D=D||0;var N=[0,0],G,b,z,X,H,$,J;return G=w[1][1]-w[0][1],b=w[0][0]-w[1][0],z=G*w[0][0]+b*w[0][1],X=L[1][1]-L[0][1],H=L[0][0]-L[1][0],$=X*L[0][0]+H*L[0][1],J=G*H-X*b,Y(J,0,D)||(N[0]=(H*z-b*$)/J,N[1]=(G*$-X*z)/J),N}function s(w,L,D,N){var G=L[0]-w[0],b=L[1]-w[1],z=N[0]-D[0],X=N[1]-D[1];if(z*b-X*G===0)return!1;var H=(G*(D[1]-w[1])+b*(w[0]-D[0]))/(z*b-X*G),$=(z*(w[1]-D[1])+X*(D[0]-w[0]))/(X*G-z*b);return H>=0&&H<=1&&$>=0&&$<=1}function u(w,L,D){return(L[0]-w[0])*(D[1]-w[1])-(D[0]-w[0])*(L[1]-w[1])}function n(w,L,D){return u(w,L,D)>0}function a(w,L,D){return u(w,L,D)>=0}function o(w,L,D){return u(w,L,D)<0}function r(w,L,D){return u(w,L,D)<=0}var h=[],d=[];function l(w,L,D,N){if(N){var G=h,b=d;G[0]=L[0]-w[0],G[1]=L[1]-w[1],b[0]=D[0]-L[0],b[1]=D[1]-L[1];var z=G[0]*b[0]+G[1]*b[1],X=Math.sqrt(G[0]*G[0]+G[1]*G[1]),H=Math.sqrt(b[0]*b[0]+b[1]*b[1]),$=Math.acos(z/(X*H));return $<N}else return u(w,L,D)===0}function f(w,L){var D=L[0]-w[0],N=L[1]-w[1];return D*D+N*N}function c(w,L){var D=w.length;return w[L<0?L%D+D:L%D]}function g(w){w.length=0}function p(w,L,D,N){for(var G=D;G<N;G++)w.push(L[G])}function x(w){for(var L=0,D=w,N=1;N<w.length;++N)(D[N][1]<D[L][1]||D[N][1]===D[L][1]&&D[N][0]>D[L][0])&&(L=N);return n(c(w,L-1),c(w,L),c(w,L+1))?!1:(y(w),!0)}function y(w){for(var L=[],D=w.length,N=0;N!==D;N++)L.push(w.pop());for(var N=0;N!==D;N++)w[N]=L[N]}function T(w,L){return o(c(w,L-1),c(w,L),c(w,L+1))}var E=[],S=[];function C(w,L,D){var N,G,b=E,z=S;if(a(c(w,L+1),c(w,L),c(w,D))&&r(c(w,L-1),c(w,L),c(w,D)))return!1;G=f(c(w,L),c(w,D));for(var X=0;X!==w.length;++X)if(!((X+1)%w.length===L||X===L)&&a(c(w,L),c(w,D),c(w,X+1))&&r(c(w,L),c(w,D),c(w,X))&&(b[0]=c(w,L),b[1]=c(w,D),z[0]=c(w,X),z[1]=c(w,X+1),N=t(b,z),f(c(w,L),N)<G))return!1;return!0}function P(w,L,D){for(var N=0;N!==w.length;++N)if(!(N===L||N===D||(N+1)%w.length===L||(N+1)%w.length===D)&&s(c(w,L),c(w,D),c(w,N),c(w,N+1)))return!1;return!0}function R(w,L,D,N){var G=N||[];if(g(G),L<D)for(var b=L;b<=D;b++)G.push(w[b]);else{for(var b=0;b<=D;b++)G.push(w[b]);for(var b=L;b<w.length;b++)G.push(w[b])}return G}function A(w){for(var L=[],D=[],N=[],G=[],b=Number.MAX_VALUE,z=0;z<w.length;++z)if(T(w,z)){for(var X=0;X<w.length;++X)if(C(w,z,X)){D=A(R(w,z,X,G)),N=A(R(w,X,z,G));for(var H=0;H<N.length;H++)D.push(N[H]);D.length<b&&(L=D,b=D.length,L.push([c(w,z),c(w,X)]))}}return L}function M(w){var L=A(w);return L.length>0?O(w,L):[w]}function O(w,L){if(L.length===0)return[w];if(L instanceof Array&&L.length&&L[0]instanceof Array&&L[0].length===2&&L[0][0]instanceof Array){for(var D=[w],N=0;N<L.length;N++)for(var G=L[N],b=0;b<D.length;b++){var z=D[b],X=O(z,G);if(X){D.splice(b,1),D.push(X[0],X[1]);break}}return D}else{var G=L,N=w.indexOf(G[0]),b=w.indexOf(G[1]);return N!==-1&&b!==-1?[R(w,N,b),R(w,b,N)]:!1}}function F(w){var L=w,D;for(D=0;D<L.length-1;D++)for(var N=0;N<D-1;N++)if(s(L[D],L[D+1],L[N],L[N+1]))return!1;for(D=1;D<L.length-2;D++)if(s(L[0],L[L.length-1],L[D],L[D+1]))return!1;return!0}function I(w,L,D,N,G){G=G||0;var b=L[1]-w[1],z=w[0]-L[0],X=b*w[0]+z*w[1],H=N[1]-D[1],$=D[0]-N[0],J=H*D[0]+$*D[1],K=b*$-H*z;return Y(K,0,G)?[0,0]:[($*X-z*J)/K,(b*J-H*X)/K]}function B(w,L,D,N,G,b,z){b=b||100,z=z||0,G=G||25,L=typeof L!="undefined"?L:[],D=D||[],N=N||[];var X=[0,0],H=[0,0],$=[0,0],J=0,K=0,Z=0,k=0,Q=0,q=0,ot=0,st=[],_=[],j=w,ht=w;if(ht.length<3)return L;if(z++,z>b)return console.warn("quickDecomp: max level ("+b+") reached."),L;for(var tt=0;tt<w.length;++tt)if(T(j,tt)){D.push(j[tt]),J=K=Number.MAX_VALUE;for(var at=0;at<w.length;++at)n(c(j,tt-1),c(j,tt),c(j,at))&&r(c(j,tt-1),c(j,tt),c(j,at-1))&&($=I(c(j,tt-1),c(j,tt),c(j,at),c(j,at-1)),o(c(j,tt+1),c(j,tt),$)&&(Z=f(j[tt],$),Z<K&&(K=Z,H=$,q=at))),n(c(j,tt+1),c(j,tt),c(j,at+1))&&r(c(j,tt+1),c(j,tt),c(j,at))&&($=I(c(j,tt+1),c(j,tt),c(j,at),c(j,at+1)),n(c(j,tt-1),c(j,tt),$)&&(Z=f(j[tt],$),Z<J&&(J=Z,X=$,Q=at)));if(q===(Q+1)%w.length)$[0]=(H[0]+X[0])/2,$[1]=(H[1]+X[1])/2,N.push($),tt<Q?(p(st,j,tt,Q+1),st.push($),_.push($),q!==0&&p(_,j,q,j.length),p(_,j,0,tt+1)):(tt!==0&&p(st,j,tt,j.length),p(st,j,0,Q+1),st.push($),_.push($),p(_,j,q,tt+1));else{if(q>Q&&(Q+=w.length),k=Number.MAX_VALUE,Q<q)return L;for(var at=q;at<=Q;++at)a(c(j,tt-1),c(j,tt),c(j,at))&&r(c(j,tt+1),c(j,tt),c(j,at))&&(Z=f(c(j,tt),c(j,at)),Z<k&&P(j,tt,at)&&(k=Z,ot=at%w.length));tt<ot?(p(st,j,tt,ot+1),ot!==0&&p(_,j,ot,ht.length),p(_,j,0,tt+1)):(tt!==0&&p(st,j,tt,ht.length),p(st,j,0,ot+1),p(_,j,ot,tt+1))}return st.length<_.length?(B(st,L,D,N,G,b,z),B(_,L,D,N,G,b,z)):(B(_,L,D,N,G,b,z),B(st,L,D,N,G,b,z)),L}return L.push(w),L}function V(w,L){for(var D=0,N=w.length-1;w.length>3&&N>=0;--N)l(c(w,N-1),c(w,N),c(w,N+1),L)&&(w.splice(N%w.length,1),D++);return D}function U(w,L){for(var D=w.length-1;D>=1;--D)for(var N=w[D],G=D-1;G>=0;--G)if(W(N,w[G],L)){w.splice(D,1);continue}}function Y(w,L,D){return D=D||0,Math.abs(w-L)<=D}function W(w,L,D){return Y(w[0],L[0],D)&&Y(w[1],L[1],D)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(0),n=t(591),a=t(128),o=t(592),r=t(1395),h=t(1396),d=t(1397),l=t(593),f=t(589),c=t(590),g=t(1398),p=t(64),x=new u({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(y,T,E,S,C){var P=s.rectangle(y,T,E,S,C);return this.world.add(P),P},trapezoid:function(y,T,E,S,C,P){var R=s.trapezoid(y,T,E,S,C,P);return this.world.add(R),R},circle:function(y,T,E,S,C){var P=s.circle(y,T,E,S,C);return this.world.add(P),P},polygon:function(y,T,E,S,C){var P=s.polygon(y,T,E,S,C);return this.world.add(P),P},fromVertices:function(y,T,E,S,C,P,R){typeof E=="string"&&(E=p.fromPath(E));var A=s.fromVertices(y,T,E,S,C,P,R);return this.world.add(A),A},fromPhysicsEditor:function(y,T,E,S,C){C===void 0&&(C=!0);var P=f.parseBody(y,T,E,S);return C&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(y,T,E,S,C,P){S===void 0&&(S=1),C===void 0&&(C={}),P===void 0&&(P=!0);for(var R=E.getElementsByTagName("path"),A=[],M=0;M<R.length;M++){var O=o.pathToVertices(R[M],30);S!==1&&p.scale(O,S,S),A.push(O)}var F=s.fromVertices(y,T,A,C);return P&&this.world.add(F),F},fromJSON:function(y,T,E,S,C){S===void 0&&(S={}),C===void 0&&(C=!0);var P=c.parseBody(y,T,E,S);return P&&C&&this.world.add(P),P},imageStack:function(y,T,E,S,C,P,R,A,M){R===void 0&&(R=0),A===void 0&&(A=0),M===void 0&&(M={});var O=this.world,F=this.sys.displayList;M.addToWorld=!1;var I=n.stack(E,S,C,P,R,A,function(B,V){var U=new h(O,B,V,y,T,M);return F.add(U),U.body});return O.add(I),I},stack:function(y,T,E,S,C,P,R){var A=n.stack(y,T,E,S,C,P,R);return this.world.add(A),A},pyramid:function(y,T,E,S,C,P,R){var A=n.pyramid(y,T,E,S,C,P,R);return this.world.add(A),A},chain:function(y,T,E,S,C,P){return n.chain(y,T,E,S,C,P)},mesh:function(y,T,E,S,C){return n.mesh(y,T,E,S,C)},newtonsCradle:function(y,T,E,S,C){var P=n.newtonsCradle(y,T,E,S,C);return this.world.add(P),P},car:function(y,T,E,S,C){var P=n.car(y,T,E,S,C);return this.world.add(P),P},softBody:function(y,T,E,S,C,P,R,A,M,O){var F=n.softBody(y,T,E,S,C,P,R,A,M,O);return this.world.add(F),F},joint:function(y,T,E,S,C){return this.constraint(y,T,E,S,C)},spring:function(y,T,E,S,C){return this.constraint(y,T,E,S,C)},constraint:function(y,T,E,S,C){S===void 0&&(S=1),C===void 0&&(C={}),C.bodyA=y.type==="body"?y:y.body,C.bodyB=T.type==="body"?T:T.body,isNaN(E)||(C.length=E),C.stiffness=S;var P=a.create(C);return this.world.add(P),P},worldConstraint:function(y,T,E,S){E===void 0&&(E=1),S===void 0&&(S={}),S.bodyB=y.type==="body"?y:y.body,isNaN(T)||(S.length=T),S.stiffness=E;var C=a.create(S);return this.world.add(C),C},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var T=new g(this.scene,this.world,y);return this.world.add(T.constraint),T},image:function(y,T,E,S,C){var P=new h(this.world,y,T,E,S,C);return this.sys.displayList.add(P),P},tileBody:function(y,T){return new l(this.world,y,T)},sprite:function(y,T,E,S,C){var P=new d(this.world,y,T,E,S,C);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(y,T,E){return r(this.world,y,T,E)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=x},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(249),u=t(2),n=t(3);function a(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}var o=function(r,h,d,l){d===void 0&&(d={}),l===void 0&&(l=!0);var f=h.x,c=h.y;h.body={temp:!0,position:{x:f,y:c}};var g=[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity];if(g.forEach(function(x){for(var y in x)a(x[y])?Object.defineProperty(h,y,{get:x[y].get,set:x[y].set}):Object.defineProperty(h,y,{value:x[y]})}),h.world=r,h._tempVec2=new n(f,c),d.hasOwnProperty("type")&&d.type==="body")h.setExistingBody(d,l);else{var p=u(d,"shape",null);p||(p="rectangle"),d.addToWorld=l,h.setBody(p,d)}return h};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(249),n=t(15),a=t(2),o=t(125),r=t(167),h=t(3),d=new s({Extends:o,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,r],initialize:function(f,c,g,p,x,y){n.call(this,f.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(p,x),this.setSizeToFrame(),this.setOrigin(),this.world=f,this._tempVec2=new h(c,g);var T=a(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(c,g),this.initPipeline()}});e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(164),u=t(0),n=t(249),a=t(15),o=t(2),r=t(167),h=t(73),d=t(3),l=new u({Extends:h,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,r],initialize:function(c,g,p,x,y,T){a.call(this,c.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(x,y),this.setSizeToFrame(),this.setOrigin(),this.world=c,this._tempVec2=new d(g,p);var E=o(T,"shape",null);E?this.setBody(E,T):this.setRectangle(this.width,this.height,T),this.setPosition(g,p),this.initPipeline()}});e.exports=l},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84),u=t(0),n=t(118),a=t(128),o=t(273),r=t(272),h=t(51),d=t(127),l=t(165),f=t(3),c=t(64),g=new u({initialize:function(x,y,T){T===void 0&&(T={});var E={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=x,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new f,this.body=null,this.part=null,this.constraint=a.create(d(T,E)),this.world.on(r.BEFORE_UPDATE,this.update,this),x.sys.input.on(h.POINTER_DOWN,this.onDown,this),x.sys.input.on(h.POINTER_UP,this.onUp,this)},onDown:function(p){this.pointer||(this.pointer=p,this.camera=p.camera)},onUp:function(p){p===this.pointer&&(this.pointer=null)},getBody:function(p){var x=this.position,y=this.constraint;this.camera.getWorldPoint(p.x,p.y,x);for(var T=n.allBodies(this.world.localWorld),E=0;E<T.length;E++){var S=T[E];if(!S.ignorePointer&&s.contains(S.bounds,x)&&o.canCollide(S.collisionFilter,y.collisionFilter)&&this.hitTestBody(S,x))return this.world.emit(r.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(p,x){for(var y=this.constraint,T=p.parts.length,E=T>1?1:0,S=E;S<T;S++){var C=p.parts[S];if(c.contains(C.vertices,x))return y.pointA=x,y.pointB={x:x.x-p.position.x,y:x.y-p.position.y},y.bodyB=p,y.angleB=p.angle,l.set(p,!1),this.part=C,this.body=p,!0}return!1},update:function(){var p=this.pointer,x=this.body;if(!this.active||!p){x&&this.stopDrag();return}if(!p.isDown&&x){this.stopDrag();return}else if(p.isDown){if(!x&&!this.getBody(p))return;x=this.body;var y=this.position,T=this.constraint;this.camera.getWorldPoint(p.x,p.y,y),T.pointA.x=y.x,T.pointA.y=y.y,l.set(x,!1),this.world.emit(r.DRAG,x,this)}},stopDrag:function(){var p=this.body,x=this.constraint;x.bodyB=null,x.pointB=null,this.pointer=null,this.body=null,this.part=null,p&&this.world.emit(r.DRAG_END,p,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(h.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(h.POINTER_UP,this.onUp,this)}});e.exports=g},function(e,v,t){var s={};e.exports=s;var u=t(595),n=t(32);(function(){s.name="matter-js",s.version="0.14.2",s.uses=[],s.used=[],s.use=function(){u.use(s,Array.prototype.slice.call(arguments))},s.before=function(a,o){return a=a.replace(/^Matter./,""),n.chainPathBefore(s,a,o)},s.after=function(a,o){return a=a.replace(/^Matter./,""),n.chainPathAfter(s,a,o)}})()},function(e,v,t){var s={};e.exports=s;var u=t(83),n=t(274),a=t(84),o=t(86),r=t(64);(function(){s.collides=function(h,d){for(var l=[],f=0;f<d.length;f++){var c=d[f];if(h!==c&&a.overlaps(c.bounds,h.bounds))for(var g=c.parts.length===1?0:1;g<c.parts.length;g++){var p=c.parts[g];if(a.overlaps(p.bounds,h.bounds)){var x=n.collides(p,h);if(x.collided){l.push(x);break}}}}return l},s.ray=function(h,d,l,f){f=f||1e-100;for(var c=u.angle(d,l),g=u.magnitude(u.sub(d,l)),p=(l.x+d.x)*.5,x=(l.y+d.y)*.5,y=o.rectangle(p,x,g,f,{angle:c}),T=s.collides(y,h),E=0;E<T.length;E+=1){var S=T[E];S.body=S.bodyB=S.bodyA}return T},s.region=function(h,d,l){for(var f=[],c=0;c<h.length;c++){var g=h[c],p=a.overlaps(g.bounds,d);(p&&!l||!p&&l)&&f.push(g)}return f},s.point=function(h,d){for(var l=[],f=0;f<h.length;f++){var c=h[f];if(a.contains(c.bounds,d))for(var g=c.parts.length===1?0:1;g<c.parts.length;g++){var p=c.parts[g];if(a.contains(p.bounds,d)&&r.contains(p.vertices,d)){l.push(c);break}}}return l}})()},function(e,v,t){var s={};e.exports=s;var u=t(596),n=t(165),a=t(599),o=t(598),r=t(1523),h=t(597),d=t(166),l=t(118),f=t(128),c=t(32),g=t(41);(function(){s.create=function(p,x){x=c.isElement(p)?x:p,p=c.isElement(p)?p:null,x=x||{},(p||x.render)&&c.warn("Engine.create: engine.render is deprecated (see docs)");var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:h}},T=c.extend(y,x);return T.world=x.world||u.create(T.world),T.pairs=o.create(),T.broadphase=T.broadphase.controller.create(T.broadphase),T.metrics=T.metrics||{extended:!1},T.metrics=r.create(T.metrics),T},s.update=function(p,x,y){x=x||1e3/60,y=y||1;var T=p.world,E=p.timing,S=p.broadphase,C=[],P;E.timestamp+=x*E.timeScale;var R={timestamp:E.timestamp};d.trigger(p,"beforeUpdate",R);var A=l.allBodies(T),M=l.allConstraints(T);for(r.reset(p.metrics),p.enableSleeping&&n.update(A,E.timeScale),s._bodiesApplyGravity(A,T.gravity),s._bodiesUpdate(A,x,E.timeScale,y,T.bounds),f.preSolveAll(A),P=0;P<p.constraintIterations;P++)f.solveAll(M,E.timeScale);f.postSolveAll(A),S.controller?(T.isModified&&S.controller.clear(S),S.controller.update(S,A,p,T.isModified),C=S.pairsList):C=A,T.isModified&&l.setModified(T,!1,!1,!0);var O=S.detector(C,p),F=p.pairs,I=E.timestamp;for(o.update(F,O,I),o.removeOld(F,I),p.enableSleeping&&n.afterCollisions(F.list,E.timeScale),F.collisionStart.length>0&&d.trigger(p,"collisionStart",{pairs:F.collisionStart}),a.preSolvePosition(F.list),P=0;P<p.positionIterations;P++)a.solvePosition(F.list,A,E.timeScale);for(a.postSolvePosition(A),f.preSolveAll(A),P=0;P<p.constraintIterations;P++)f.solveAll(M,E.timeScale);for(f.postSolveAll(A),a.preSolveVelocity(F.list),P=0;P<p.velocityIterations;P++)a.solveVelocity(F.list,E.timeScale);return F.collisionActive.length>0&&d.trigger(p,"collisionActive",{pairs:F.collisionActive}),F.collisionEnd.length>0&&d.trigger(p,"collisionEnd",{pairs:F.collisionEnd}),r.update(p.metrics,p),s._bodiesClearForces(A),d.trigger(p,"afterUpdate",R),p},s.merge=function(p,x){if(c.extend(p,x),x.world){p.world=x.world,s.clear(p);for(var y=l.allBodies(p.world),T=0;T<y.length;T++){var E=y[T];n.set(E,!1),E.id=c.nextId()}}},s.clear=function(p){var x=p.world;o.clear(p.pairs);var y=p.broadphase;if(y.controller){var T=l.allBodies(x);y.controller.clear(y),y.controller.update(y,T,p,!0)}},s._bodiesClearForces=function(p){for(var x=0;x<p.length;x++){var y=p[x];y.force.x=0,y.force.y=0,y.torque=0}},s._bodiesApplyGravity=function(p,x){var y=typeof x.scale!="undefined"?x.scale:.001;if(!(x.x===0&&x.y===0||y===0))for(var T=0;T<p.length;T++){var E=p[T];E.ignoreGravity||E.isStatic||E.isSleeping||(E.force.x+=E.mass*x.x*y*E.gravityScale.x,E.force.y+=E.mass*x.y*y*E.gravityScale.y)}},s._bodiesUpdate=function(p,x,y,T,E){for(var S=0;S<p.length;S++){var C=p[S];C.isStatic||C.isSleeping||g.update(C,x,y,T)}}})()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(0),a=t(32),o=t(118),r=t(1401),h=t(9),d=t(272),l=t(2),f=t(6),c=t(41),g=t(166),p=t(593),x=t(596),y=t(83),T=new n({Extends:h,initialize:function(S,C){h.call(this),this.scene=S,this.engine=r.create(C),this.localWorld=this.engine.world;var P=f(C,"gravity",null);P?this.setGravity(P.x,P.y,P.scale):P===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=f(C,"enabled",!0),this.correction=f(C,"correction",1),this.getDelta=f(C,"getDelta",this.update60Hz);var R=l(C,"runner",{}),A=l(R,"fps",!1),M=l(R,"fps",60),O=l(R,"delta",1e3/M),F=l(R,"deltaMin",1e3/M),I=l(R,"deltaMax",1e3/(M*.5));A||(M=1e3/O),this.runner={fps:M,correction:l(R,"correction",1),deltaSampleSize:l(R,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:l(R,"isFixed",!1),delta:O,deltaMin:F,deltaMax:I},this.autoUpdate=f(C,"autoUpdate",!0);var B=f(C,"debug",!1);if(this.drawDebug=typeof B=="object"?!0:B,this.debugGraphic,this.debugConfig={showAxes:l(B,"showAxes",!1),showAngleIndicator:l(B,"showAngleIndicator",!1),angleColor:l(B,"angleColor",15208787),showBroadphase:l(B,"showBroadphase",!1),broadphaseColor:l(B,"broadphaseColor",16757760),showBounds:l(B,"showBounds",!1),boundsColor:l(B,"boundsColor",16777215),showVelocity:l(B,"showVelocity",!1),velocityColor:l(B,"velocityColor",44783),showCollisions:l(B,"showCollisions",!1),collisionColor:l(B,"collisionColor",16094476),showSeparations:l(B,"showSeparations",!1),separationColor:l(B,"separationColor",16753920),showBody:l(B,"showBody",!0),showStaticBody:l(B,"showStaticBody",!0),showInternalEdges:l(B,"showInternalEdges",!1),renderFill:l(B,"renderFill",!1),renderLine:l(B,"renderLine",!0),fillColor:l(B,"fillColor",1075465),fillOpacity:l(B,"fillOpacity",1),lineColor:l(B,"lineColor",2678297),lineOpacity:l(B,"lineOpacity",1),lineThickness:l(B,"lineThickness",1),staticFillColor:l(B,"staticFillColor",857979),staticLineColor:l(B,"staticLineColor",1255396),showSleeping:l(B,"showSleeping",!1),staticBodySleepOpacity:l(B,"staticBodySleepOpacity",.7),sleepFillColor:l(B,"sleepFillColor",4605510),sleepLineColor:l(B,"sleepLineColor",10066585),showSensors:l(B,"showSensors",!0),sensorFillColor:l(B,"sensorFillColor",857979),sensorLineColor:l(B,"sensorLineColor",1255396),showPositions:l(B,"showPositions",!0),positionSize:l(B,"positionSize",4),positionColor:l(B,"positionColor",14697178),showJoint:l(B,"showJoint",!0),jointColor:l(B,"jointColor",14737474),jointLineOpacity:l(B,"jointLineOpacity",1),jointLineThickness:l(B,"jointLineThickness",2),pinSize:l(B,"pinSize",4),pinColor:l(B,"pinColor",4382944),springColor:l(B,"springColor",14697184),anchorColor:l(B,"anchorColor",15724527),anchorSize:l(B,"anchorSize",4),showConvexHulls:l(B,"showConvexHulls",!1),hullColor:l(B,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),l(C,"setBounds",!1)){var V=C.setBounds;if(typeof V=="boolean")this.setBounds();else{var U=l(V,"x",0),Y=l(V,"y",0),W=l(V,"width",S.sys.scale.width),w=l(V,"height",S.sys.scale.height),L=l(V,"thickness",64),D=l(V,"left",!0),N=l(V,"right",!0),G=l(V,"top",!0),b=l(V,"bottom",!0);this.setBounds(U,Y,W,w,L,D,N,G,b)}}},setCompositeRenderStyle:function(E){var S=E.bodies,C=E.constraints,P=E.composites,R,A,M;for(R=0;R<S.length;R++)A=S[R],M=A.render,this.setBodyRenderStyle(A,M.lineColor,M.lineOpacity,M.lineThickness,M.fillColor,M.fillOpacity);for(R=0;R<C.length;R++)A=C[R],M=A.render,this.setConstraintRenderStyle(A,M.lineColor,M.lineOpacity,M.lineThickness,M.pinSize,M.anchorColor,M.anchorSize);for(R=0;R<P.length;R++)A=P[R],this.setCompositeRenderStyle(A);return this},setBodyRenderStyle:function(E,S,C,P,R,A){var M=E.render,O=this.debugConfig;return M?(S==null&&(S=E.isStatic?O.staticLineColor:O.lineColor),C==null&&(C=O.lineOpacity),P==null&&(P=O.lineThickness),R==null&&(R=E.isStatic?O.staticFillColor:O.fillColor),A==null&&(A=O.fillOpacity),S!==!1&&(M.lineColor=S),C!==!1&&(M.lineOpacity=C),P!==!1&&(M.lineThickness=P),R!==!1&&(M.fillColor=R),A!==!1&&(M.fillOpacity=A),this):this},setConstraintRenderStyle:function(E,S,C,P,R,A,M){var O=E.render,F=this.debugConfig;if(!O)return this;if(S==null){var I=O.type;I==="line"?S=F.jointColor:I==="pin"?S=F.pinColor:I==="spring"&&(S=F.springColor)}return C==null&&(C=F.jointLineOpacity),P==null&&(P=F.jointLineThickness),R==null&&(R=F.pinSize),A==null&&(A=F.anchorColor),M==null&&(M=F.anchorSize),S!==!1&&(O.lineColor=S),C!==!1&&(O.lineOpacity=C),P!==!1&&(O.lineThickness=P),R!==!1&&(O.pinSize=R),A!==!1&&(O.anchorColor=A),M!==!1&&(O.anchorSize=M),this},setEventsProxy:function(){var E=this,S=this.engine,C=this.localWorld;this.drawDebug&&(g.on(C,"compositeModified",function(P){E.setCompositeRenderStyle(P)}),g.on(C,"beforeAdd",function(P){for(var R=[].concat(P.object),A=0;A<R.length;A++){var M=R[A],O=M.render;M.type==="body"?E.setBodyRenderStyle(M,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity):M.type==="composite"?E.setCompositeRenderStyle(M):M.type==="constraint"&&E.setConstraintRenderStyle(M,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize)}})),g.on(C,"beforeAdd",function(P){E.emit(d.BEFORE_ADD,P)}),g.on(C,"afterAdd",function(P){E.emit(d.AFTER_ADD,P)}),g.on(C,"beforeRemove",function(P){E.emit(d.BEFORE_REMOVE,P)}),g.on(C,"afterRemove",function(P){E.emit(d.AFTER_REMOVE,P)}),g.on(S,"beforeUpdate",function(P){E.emit(d.BEFORE_UPDATE,P)}),g.on(S,"afterUpdate",function(P){E.emit(d.AFTER_UPDATE,P)}),g.on(S,"collisionStart",function(P){var R=P.pairs,A,M;R.length>0&&(A=R[0].bodyA,M=R[0].bodyB),E.emit(d.COLLISION_START,P,A,M)}),g.on(S,"collisionActive",function(P){var R=P.pairs,A,M;R.length>0&&(A=R[0].bodyA,M=R[0].bodyB),E.emit(d.COLLISION_ACTIVE,P,A,M)}),g.on(S,"collisionEnd",function(P){var R=P.pairs,A,M;R.length>0&&(A=R[0].bodyA,M=R[0].bodyB),E.emit(d.COLLISION_END,P,A,M)})},setBounds:function(E,S,C,P,R,A,M,O,F){return E===void 0&&(E=0),S===void 0&&(S=0),C===void 0&&(C=this.scene.sys.scale.width),P===void 0&&(P=this.scene.sys.scale.height),R===void 0&&(R=64),A===void 0&&(A=!0),M===void 0&&(M=!0),O===void 0&&(O=!0),F===void 0&&(F=!0),this.updateWall(A,"left",E-R,S-R,R,P+R*2),this.updateWall(M,"right",E+C,S-R,R,P+R*2),this.updateWall(O,"top",E,S-R,C,R),this.updateWall(F,"bottom",E,S+P,C,R),this},updateWall:function(E,S,C,P,R,A){var M=this.walls[S];E?(M&&x.remove(this.localWorld,M),C+=R/2,P+=A/2,this.walls[S]=this.create(C,P,R,A,{isStatic:!0,friction:0,frictionStatic:0})):(M&&x.remove(this.localWorld,M),this.walls[S]=null)},createDebugGraphic:function(){var E=this.scene.sys.add.graphics({x:0,y:0});return E.setDepth(Number.MAX_VALUE),this.debugGraphic=E,this.drawDebug=!0,E},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(E,S,C){return E===void 0&&(E=0),S===void 0&&(S=1),this.localWorld.gravity.x=E,this.localWorld.gravity.y=S,C!==void 0&&(this.localWorld.gravity.scale=C),this},create:function(E,S,C,P,R){var A=s.rectangle(E,S,C,P,R);return x.add(this.localWorld,A),A},add:function(E){return x.add(this.localWorld,E),this},remove:function(E,S){Array.isArray(E)||(E=[E]);for(var C=0;C<E.length;C++){var P=E[C],R=P.body?P.body:P;o.remove(this.localWorld,R,S)}return this},removeConstraint:function(E,S){return o.remove(this.localWorld,E,S),this},convertTilemapLayer:function(E,S){var C=E.layer,P=E.getTilesWithin(0,0,C.width,C.height,{isColliding:!0});return this.convertTiles(P,S),this},convertTiles:function(E,S){if(E.length===0)return this;for(var C=0;C<E.length;C++)new p(this,E[C],S);return this},nextGroup:function(E){return c.nextGroup(E)},nextCategory:function(){return c.nextCategory()},pause:function(){return this.enabled=!1,this.emit(d.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(d.RESUME),this},update:function(E,S){if(!(!this.enabled||!this.autoUpdate)){var C=this.engine,P=this.runner,R=C.timing,A=this.correction;P.isFixed?S=this.getDelta(E,S):(S=E-P.timePrev||P.delta,P.timePrev=E,P.deltaHistory.push(S),P.deltaHistory=P.deltaHistory.slice(-P.deltaSampleSize),S=Math.min.apply(null,P.deltaHistory),S=S<P.deltaMin?P.deltaMin:S,S=S>P.deltaMax?P.deltaMax:S,A=S/P.delta,P.delta=S),P.timeScalePrev!==0&&(A*=R.timeScale/P.timeScalePrev),R.timeScale===0&&(A=0),P.timeScalePrev=R.timeScale,P.correction=A,P.frameCounter+=1,E-P.counterTimestamp>=1e3&&(P.fps=P.frameCounter*((E-P.counterTimestamp)/1e3),P.counterTimestamp=E,P.frameCounter=0),r.update(C,S,A)}},step:function(E,S){r.update(this.engine,E,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(E){var S=E.hasOwnProperty("body")?E.body:E;return o.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return o.allBodies(this.localWorld)},getAllConstraints:function(){return o.allConstraints(this.localWorld)},getAllComposites:function(){return o.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var E=this.debugConfig,S=this.engine,C=this.debugGraphic,P=o.allBodies(this.localWorld);this.debugGraphic.clear(),E.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,C,E.broadphaseColor,.5),E.showBounds&&this.renderBodyBounds(P,C,E.boundsColor,.5),(E.showBody||E.showStaticBody)&&this.renderBodies(P),E.showJoint&&this.renderJoints(),(E.showAxes||E.showAngleIndicator)&&this.renderBodyAxes(P,C,E.showAxes,E.angleColor,.5),E.showVelocity&&this.renderBodyVelocity(P,C,E.velocityColor,1,2),E.showSeparations&&this.renderSeparations(S.pairs.list,C,E.separationColor),E.showCollisions&&this.renderCollisions(S.pairs.list,C,E.collisionColor)}},renderGrid:function(E,S,C,P){S.lineStyle(1,C,P);for(var R=a.keys(E.buckets),A=0;A<R.length;A++){var M=R[A];if(!(E.buckets[M].length<2)){var O=M.split(/C|R/);S.strokeRect(parseInt(O[1],10)*E.bucketWidth,parseInt(O[2],10)*E.bucketHeight,E.bucketWidth,E.bucketHeight)}}return this},renderSeparations:function(E,S,C){S.lineStyle(1,C,1);for(var P=0;P<E.length;P++){var R=E[P];if(!!R.isActive){var A=R.collision,M=A.bodyA,O=A.bodyB,F=M.position,I=O.position,B=A.penetration,V=!M.isStatic&&!O.isStatic?4:1;O.isStatic&&(V=0),S.lineBetween(I.x,I.y,I.x-B.x*V,I.y-B.y*V),V=!M.isStatic&&!O.isStatic?4:1,M.isStatic&&(V=0),S.lineBetween(F.x,F.y,F.x-B.x*V,F.y-B.y*V)}}return this},renderCollisions:function(E,S,C){S.lineStyle(1,C,.5),S.fillStyle(C,1);var P,R;for(P=0;P<E.length;P++)if(R=E[P],!!R.isActive)for(var A=0;A<R.activeContacts.length;A++){var M=R.activeContacts[A],O=M.vertex;S.fillRect(O.x-2,O.y-2,5,5)}for(P=0;P<E.length;P++)if(R=E[P],!!R.isActive){var F=R.collision,I=R.activeContacts;if(I.length>0){var B=I[0].vertex.x,V=I[0].vertex.y;I.length===2&&(B=(I[0].vertex.x+I[1].vertex.x)/2,V=(I[0].vertex.y+I[1].vertex.y)/2),F.bodyB===F.supports[0].body||F.bodyA.isStatic?S.lineBetween(B-F.normal.x*8,V-F.normal.y*8,B,V):S.lineBetween(B+F.normal.x*8,V+F.normal.y*8,B,V)}}return this},renderBodyBounds:function(E,S,C,P){S.lineStyle(1,C,P);for(var R=0;R<E.length;R++){var A=E[R];if(!!A.render.visible){var M=A.bounds;if(M)S.strokeRect(M.min.x,M.min.y,M.max.x-M.min.x,M.max.y-M.min.y);else for(var O=A.parts,F=O.length>1?1:0;F<O.length;F++){var I=O[F];S.strokeRect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}}return this},renderBodyAxes:function(E,S,C,P,R){S.lineStyle(1,P,R);for(var A=0;A<E.length;A++){var M=E[A],O=M.parts;if(!!M.render.visible){var F,I,B;if(C)for(I=O.length>1?1:0;I<O.length;I++)for(F=O[I],B=0;B<F.axes.length;B++){var V=F.axes[B];S.lineBetween(F.position.x,F.position.y,F.position.x+V.x*20,F.position.y+V.y*20)}else for(I=O.length>1?1:0;I<O.length;I++)for(F=O[I],B=0;B<F.axes.length;B++)S.lineBetween(F.position.x,F.position.y,(F.vertices[0].x+F.vertices[F.vertices.length-1].x)/2,(F.vertices[0].y+F.vertices[F.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(E,S,C,P,R){S.lineStyle(R,C,P);for(var A=0;A<E.length;A++){var M=E[A];!M.render.visible||S.lineBetween(M.position.x,M.position.y,M.position.x+(M.position.x-M.positionPrev.x)*2,M.position.y+(M.position.y-M.positionPrev.y)*2)}return this},renderBodies:function(E){for(var S=this.debugGraphic,C=this.debugConfig,P=C.showBody,R=C.showStaticBody,A=C.showSleeping,M=C.showInternalEdges,O=C.showConvexHulls,F=C.renderFill,I=C.renderLine,B=C.staticBodySleepOpacity,V=C.sleepFillColor,U=C.sleepLineColor,Y=C.hullColor,W=0;W<E.length;W++){var w=E[W];if(!!w.render.visible&&!(!R&&w.isStatic||!P&&!w.isStatic)){var L=w.render.lineColor,D=w.render.lineOpacity,N=w.render.lineThickness,G=w.render.fillColor,b=w.render.fillOpacity;A&&w.isSleeping&&(w.isStatic?(D*=B,b*=B):(L=U,G=V)),F||(G=null),I||(L=null),this.renderBody(w,S,M,L,D,N,G,b);var z=w.parts.length;O&&z>1&&this.renderConvexHull(w,S,Y,N)}}},renderBody:function(E,S,C,P,R,A,M,O){P===void 0&&(P=null),R===void 0&&(R=null),A===void 0&&(A=1),M===void 0&&(M=null),O===void 0&&(O=null);for(var F=this.debugConfig,I=F.sensorFillColor,B=F.sensorLineColor,V=E.parts,U=V.length,Y=U>1?1:0;Y<U;Y++){var W=V[Y],w=W.render,L=w.opacity;if(!(!w.visible||L===0||W.isSensor&&!F.showSensors)){var D=W.circleRadius;if(S.beginPath(),W.isSensor?(M!==null&&S.fillStyle(I,O*L),P!==null&&S.lineStyle(A,B,R*L)):(M!==null&&S.fillStyle(M,O*L),P!==null&&S.lineStyle(A,P,R*L)),D)S.arc(W.position.x,W.position.y,D,0,2*Math.PI);else{var N=W.vertices,G=N.length;S.moveTo(N[0].x,N[0].y);for(var b=1;b<G;b++){var z=N[b];if(!N[b-1].isInternal||C?S.lineTo(z.x,z.y):S.moveTo(z.x,z.y),b<G&&z.isInternal&&!C){var X=(b+1)%G;S.moveTo(N[X].x,N[X].y)}}S.closePath()}M!==null&&S.fillPath(),P!==null&&S.strokePath()}}if(F.showPositions&&!E.isStatic){var H=E.position.x,$=E.position.y,J=Math.ceil(F.positionSize/2);S.fillStyle(F.positionColor,1),S.fillRect(H-J,$-J,F.positionSize,F.positionSize)}return this},renderConvexHull:function(E,S,C,P){P===void 0&&(P=1);var R=E.parts,A=R.length;if(A>1){var M=E.vertices;S.lineStyle(P,C),S.beginPath(),S.moveTo(M[0].x,M[0].y);for(var O=1;O<M.length;O++)S.lineTo(M[O].x,M[O].y);S.lineTo(M[0].x,M[0].y),S.strokePath()}return this},renderJoints:function(){for(var E=this.debugGraphic,S=o.allConstraints(this.localWorld),C=0;C<S.length;C++){var P=S[C].render,R=P.lineColor,A=P.lineOpacity,M=P.lineThickness,O=P.pinSize,F=P.anchorColor,I=P.anchorSize;this.renderConstraint(S[C],E,R,A,M,O,F,I)}},renderConstraint:function(E,S,C,P,R,A,M,O){var F=E.render;if(!F.visible||!E.pointA||!E.pointB)return this;S.lineStyle(R,C,P);var I=E.bodyA,B=E.bodyB,V,U;if(I?V=y.add(I.position,E.pointA):V=E.pointA,F.type==="pin")S.strokeCircle(V.x,V.y,A);else{if(B?U=y.add(B.position,E.pointB):U=E.pointB,S.beginPath(),S.moveTo(V.x,V.y),F.type==="spring")for(var Y=y.sub(U,V),W=y.perp(y.normalise(Y)),w=Math.ceil(a.clamp(E.length/5,12,20)),L,D=1;D<w;D+=1)L=D%2===0?1:-1,S.lineTo(V.x+Y.x*(D/w)+W.x*L*4,V.y+Y.y*(D/w)+W.y*L*4);S.lineTo(U.x,U.y)}return S.strokePath(),F.anchors&&O>0&&(S.fillStyle(M),S.fillCircle(V.x,V.y,O),S.fillCircle(U.x,U.y,O)),this},resetCollisionIDs:function(){return u._nextCollidingGroupId=1,u._nextNonCollidingGroupId=-1,u._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),x.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});e.exports=T},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BasePlugin:t(540),DefaultPlugins:t(197),PluginCache:t(24),PluginManager:t(414),ScenePlugin:t(1404)}},function(e,v,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=t(540),u=t(0),n=t(20),a=new u({Extends:s,initialize:function(r,h,d){s.call(this,h),this.scene=r,this.systems=r.sys,this.pluginKey=d,r.sys.events.once(n.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:t(1406),Events:t(91),Snapshot:t(1407),WebGL:t(1408)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasRenderer:t(368),GetBlendModes:t(370),SetTransform:t(30)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:t(369),WebGL:t(383)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(107),u=t(17),n={PipelineManager:t(372),Pipelines:t(1409),RenderTarget:t(141),Utils:t(12),WebGLPipeline:t(58),WebGLRenderer:t(371),WebGLShader:t(375)};n=u(!1,n,s),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(92),u=t(17),n={BitmapMaskPipeline:t(373),Events:t(374),GraphicsPipeline:t(376),LightPipeline:t(377),MultiPipeline:t(108),PointLightPipeline:t(378),PostFXPipeline:t(1410),RopePipeline:t(379),SinglePipeline:t(380),UtilityPipeline:t(381)};n=u(!1,n,s),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(198),n=t(2),a=t(1411),o=t(382),r=t(58),h=new s({Extends:r,initialize:function(l){l.renderTarget=n(l,"renderTarget",1),l.fragShader=n(l,"fragShader",a),l.vertShader=n(l,"vertShader",o),l.attributes=n(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),l.batchSize=1,l.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,l),this.isPostFX=!0,this.gameObject,this.colorMatrix=new u,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){r.prototype.boot.call(this);var d=this.manager.UTILITY_PIPELINE;this.fullFrame1=d.fullFrame1,this.fullFrame2=d.fullFrame2,this.halfFrame1=d.halfFrame1,this.halfFrame2=d.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(d){this.bindAndDraw(d)},copyFrame:function(d,l,f,c,g){this.manager.copyFrame(d,l,f,c,g)},copyToGame:function(d){this.manager.copyToGame(d)},drawFrame:function(d,l,f){this.manager.drawFrame(d,l,f,this.colorMatrix)},blendFrames:function(d,l,f,c,g){this.manager.blendFrames(d,l,f,c,g)},blendFramesAdditive:function(d,l,f,c,g){this.manager.blendFramesAdditive(d,l,f,c,g)},clearFrame:function(d,l){this.manager.clearFrame(d,l)},blitFrame:function(d,l,f,c,g,p){this.manager.blitFrame(d,l,f,c,g,p)},copyFrameRect:function(d,l,f,c,g,p,x,y){this.manager.copyFrameRect(d,l,f,c,g,p,x,y)},bindAndDraw:function(d,l,f,c,g){f===void 0&&(f=!0),c===void 0&&(c=!0);var p=this.gl,x=this.renderer;this.bind(g),this.set1i("uMainSampler",0),l?(p.viewport(0,0,l.width,l.height),p.bindFramebuffer(p.FRAMEBUFFER,l.framebuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l.texture,0),f&&(c?p.clearColor(0,0,0,0):p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT))):(x.popFramebuffer(!1,!1,!1),x.currentFramebuffer||p.viewport(0,0,x.width,x.height)),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,d.texture),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6),l?(p.bindTexture(p.TEXTURE_2D,null),p.bindFramebuffer(p.FRAMEBUFFER,null)):x.resetTextures()}});e.exports=h},function(e,v){e.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(201),n={Center:t(403),Events:t(104),Orientation:t(404),ScaleManager:t(415),ScaleModes:t(405),Zoom:t(406)};n=s(!1,n,u.CENTER),n=s(!1,n,u.ORIENTATION),n=s(!1,n,u.SCALE_MODE),n=s(!1,n,u.ZOOM),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(144),u=t(17),n={Events:t(20),GetPhysicsPlugins:t(419),GetScenePlugins:t(420),SceneManager:t(417),ScenePlugin:t(1414),Settings:t(421),Systems:t(204)};n=u(!1,n,s),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(20),a=t(2),o=t(24),r=new u({initialize:function(d){this.scene=d,this.systems=d.sys,this.settings=d.sys.settings,this.key=d.sys.settings.key,this.manager=d.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,d.sys.events.once(n.BOOT,this.boot,this),d.sys.events.on(n.START,this.pluginStart,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(n.SHUTDOWN,this.shutdown,this)},start:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",h,d),this},restart:function(h){var d=this.key;return this.manager.queueOp("stop",d),this.manager.queueOp("start",d,h),this},transition:function(h){h===void 0&&(h={});var d=a(h,"target",!1),l=this.manager.getScene(d);if(!d||!this.checkValidTransition(l))return!1;var f=a(h,"duration",1e3);this._elapsed=0,this._target=l,this._duration=f,this._willSleep=a(h,"sleep",!1),this._willRemove=a(h,"remove",!1);var c=a(h,"onUpdate",null);c&&(this._onUpdate=c,this._onUpdateScope=a(h,"onUpdateScope",this.scene));var g=a(h,"allowInput",!1);this.settings.transitionAllowInput=g;var p=l.sys.settings;return p.isTransition=!0,p.transitionFrom=this.scene,p.transitionDuration=f,p.transitionAllowInput=g,a(h,"moveAbove",!1)?this.manager.moveAbove(this.key,d):a(h,"moveBelow",!1)&&this.manager.moveBelow(this.key,d),l.sys.isSleeping()?l.sys.wake(a(h,"data")):this.manager.start(d,a(h,"data")),this.systems.events.emit(n.TRANSITION_OUT,l,f),this.systems.events.on(n.UPDATE,this.step,this),!0},checkValidTransition:function(h){return!(!h||h.sys.isActive()||h.sys.isTransitioning()||h===this.scene||this.systems.isTransitioning())},step:function(h,d){this._elapsed+=d,this.transitionProgress=s(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var h=this._target.sys,d=this._target.sys.settings;this.systems.events.off(n.UPDATE,this.step,this),h.events.emit(n.TRANSITION_COMPLETE,this.scene),d.isTransition=!1,d.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(h,d,l,f){return this.manager.add(h,d,l,f)},launch:function(h,d){return h&&h!==this.key&&this.manager.queueOp("start",h,d),this},run:function(h,d){return h&&h!==this.key&&this.manager.queueOp("run",h,d),this},pause:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("pause",h,d),this},resume:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("resume",h,d),this},sleep:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("sleep",h,d),this},wake:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("wake",h,d),this},switch:function(h){return h!==this.key&&this.manager.queueOp("switch",this.key,h),this},stop:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("stop",h,d),this},setActive:function(h,d,l){d===void 0&&(d=this.key);var f=this.manager.getScene(d);return f&&f.sys.setActive(h,l),this},setVisible:function(h,d){d===void 0&&(d=this.key);var l=this.manager.getScene(d);return l&&l.sys.setVisible(h),this},isSleeping:function(h){return h===void 0&&(h=this.key),this.manager.isSleeping(h)},isActive:function(h){return h===void 0&&(h=this.key),this.manager.isActive(h)},isPaused:function(h){return h===void 0&&(h=this.key),this.manager.isPaused(h)},isVisible:function(h){return h===void 0&&(h=this.key),this.manager.isVisible(h)},swapPosition:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.swapPosition(h,d),this},moveAbove:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.moveAbove(h,d),this},moveBelow:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.moveBelow(h,d),this},remove:function(h){return h===void 0&&(h=this.key),this.manager.remove(h),this},moveUp:function(h){return h===void 0&&(h=this.key),this.manager.moveUp(h),this},moveDown:function(h){return h===void 0&&(h=this.key),this.manager.moveDown(h),this},bringToTop:function(h){return h===void 0&&(h=this.key),this.manager.bringToTop(h),this},sendToBack:function(h){return h===void 0&&(h=this.key),this.manager.sendToBack(h),this},get:function(h){return this.manager.getScene(h)},getIndex:function(h){return h===void 0&&(h=this.key),this.manager.getIndex(h)},shutdown:function(){var h=this.systems.events;h.off(n.SHUTDOWN,this.shutdown,this),h.off(n.POST_UPDATE,this.step,this),h.off(n.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});o.register("ScenePlugin",r,"scenePlugin"),e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:t(438),List:t(110),Map:t(102),ProcessQueue:t(211),RTree:t(531),Set:t(149),Size:t(416)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(1417),n={CanvasTexture:t(423),Events:t(106),FilterMode:u,Frame:t(109),Parsers:t(425),Texture:t(206),TextureManager:t(422),TextureSource:t(424)};n=s(!1,n,u),e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LINEAR:0,NEAREST:1};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(1419),n={Components:t(251),Parsers:t(1452),Formats:t(40),ImageCollection:t(576),ParseToTilemap:t(262),Tile:t(85),Tilemap:t(580),TilemapCreator:t(1459),TilemapFactory:t(1460),Tileset:t(122),TilemapLayer:t(581),Orientation:t(29),LayerData:t(120),MapData:t(121),ObjectLayer:t(572)};n=s(!1,n,u.ORIENTATION),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ORIENTATION:t(29)};e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(63),n=function(a,o,r,h,d,l,f,c){f===void 0&&(f=!0),a<0&&(a=0),o<0&&(o=0);for(var g=s(a,o,r,h,null,c),p=d-a,x=l-o,y=0;y<g.length;y++){var T=g[y].x+p,E=g[y].y+x;T>=0&&T<c.width&&E>=0&&E<c.height&&c.data[E][T]&&c.data[E][T].copy(g[y])}f&&u(d-1,l-1,r+2,h+2,c)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(542),n=function(a,o,r,h,d,l){r||(r={}),Array.isArray(a)||(a=[a]);var f=l.tilemapLayer;h||(h=f.scene),d||(d=h.cameras.main);var c=s(0,0,l.width,l.height,null,l),g=[],p;for(p=0;p<c.length;p++){var x=c[p];if(a.indexOf(x.index)!==-1){var y=f.tileToWorldXY(x.x,x.y,void 0,d,l);r.x=y.x,r.y=y.y,g.push(h.make.sprite(r))}}if(typeof o=="number")for(p=0;p<a.length;p++)u(a[p],o,0,0,l.width,l.height,l);else if(Array.isArray(o))for(p=0;p<a.length;p++)u(a[p],o[p],0,0,l.width,l.height,l);return g};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(63),n=t(72),a=function(o,r,h,d,l,f,c){for(var g=c.collideIndexes.indexOf(o)!==-1,p=s(r,h,d,l,null,c),x=0;x<p.length;x++)p[x].index=o,n(p[x],g);f&&u(r-1,h-1,d+2,l+2,c)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,o,r,h,d,l,f){var c=s(o,r,h,d,l,f);return c.filter(n,a)};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){u===void 0&&(u=0),n===void 0&&(n=!1);var o=0,r,h,d;if(n){for(h=a.height-1;h>=0;h--)for(r=a.width-1;r>=0;r--)if(d=a.data[h][r],d&&d.index===s){if(o===u)return d;o+=1}}else for(h=0;h<a.height;h++)for(r=0;r<a.width;r++)if(d=a.data[h][r],d&&d.index===s){if(o===u)return d;o+=1}return null};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,o,r,h,d,l,f){var c=s(o,r,h,d,l,f);return c.find(n,a)||null};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,o,r,h,d,l,f){var c=s(o,r,h,d,l,f);c.forEach(n,a)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(544),n=t(545),a=t(547),o=t(1),r=t(548),h=function(d){return d===s.ORTHOGONAL?u:d===s.HEXAGONAL?n:d===s.STAGGERED?r:d===s.ISOMETRIC?a:o};e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(158),u=t(3),n=new u,a=function(o,r,h,d,l){return l.tilemapLayer.worldToTileXY(o,r,!0,n,d),s(n.x,n.y,h,l)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(483),u=t(26),n=t(484),a=t(1),o=t(3),r=function(c,g){return n.RectangleToTriangle(g,c)},h=new o,d=new o,l=new o,f=function(c,g,p,x){if(c===void 0)return[];var y=a;c instanceof s.Circle?y=n.CircleToRectangle:c instanceof s.Rectangle?y=n.RectangleToRectangle:c instanceof s.Triangle?y=r:c instanceof s.Line&&(y=n.LineToRectangle),x.tilemapLayer.worldToTileXY(c.left,c.top,!0,d,p);var T=d.x,E=d.y;x.tilemapLayer.worldToTileXY(c.right,c.bottom,!0,l,p);var S=Math.ceil(l.x),C=Math.ceil(l.y),P=Math.max(S-T,1),R=Math.max(C-E,1),A=u(T,E,P,R,g,x),M=x.tileWidth,O=x.tileHeight;x.tilemapLayer&&(M*=x.tilemapLayer.scaleX,O*=x.tilemapLayer.scaleY);for(var F=[],I=new s.Rectangle(0,0,M,O),B=0;B<A.length;B++){var V=A[B];x.tilemapLayer.tileToWorldXY(V.x,V.y,h,p),I.x=h.x,I.y=h.y,y(c,I)&&F.push(V)}return F};e.exports=f},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(1),n=t(253),a=function(o){return o===s.ORTHOGONAL?n:u};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(550),n=t(551),a=t(1),o=t(552),r=t(553),h=function(d){return d===s.ORTHOGONAL?r:d===s.ISOMETRIC?n:d===s.HEXAGONAL?u:d===s.STAGGERED?o:a};e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(554),n=t(1),a=t(555),o=t(254),r=function(h){return h===s.ORTHOGONAL?o:h===s.HEXAGONAL?u:h===s.STAGGERED?a:n};e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(1),n=t(255),a=function(o){return o===s.ORTHOGONAL?n:u};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(556),n=t(557),a=t(1),o=t(558),r=t(559),h=function(d){return d===s.ORTHOGONAL?r:d===s.ISOMETRIC?n:d===s.HEXAGONAL?u:d===s.STAGGERED?o:a};e.exports=h},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(560),n=t(1),a=t(561),o=t(256),r=function(h){return h===s.ORTHOGONAL?o:h===s.HEXAGONAL?u:h===s.STAGGERED?a:n};e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(562),u=t(3),n=new u,a=function(o,r,h,d){d.tilemapLayer.worldToTileXY(o,r,!0,n,h);var l=n.x,f=n.y;return s(l,f,d)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(257),u=t(3),n=new u,a=function(o,r,h,d,l,f){return f.tilemapLayer.worldToTileXY(r,h,!0,n,l,f),s(o,n.x,n.y,d,f)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(63),u=t(257),n=function(a,o,r,h,d){if(h===void 0&&(h=!0),!Array.isArray(a))return null;Array.isArray(a[0])||(a=[a]);for(var l=a.length,f=a[0].length,c=0;c<l;c++)for(var g=0;g<f;g++){var p=a[c][g];u(p,o+g,r+c,!1,d)}h&&s(o-1,r-1,f+2,l+2,d)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(210),n=function(a,o,r,h,d,l){var f,c=s(a,o,r,h,{},l);if(!d)for(d=[],f=0;f<c.length;f++)d.indexOf(c[f].index)===-1&&d.push(c[f].index);for(f=0;f<c.length;f++)c[f].index=u(d)};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(563),u=t(3),n=new u,a=function(o,r,h,d,l,f){return f.tilemapLayer.worldToTileXY(o,r,!0,n,l,f),s(n.x,n.y,h,d,f)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(397),n=new u(105,210,231,150),a=new u(243,134,48,200),o=new u(40,39,37,150),r=function(h,d,l){d===void 0&&(d={});var f=d.tileColor!==void 0?d.tileColor:n,c=d.collidingTileColor!==void 0?d.collidingTileColor:a,g=d.faceColor!==void 0?d.faceColor:o,p=s(0,0,l.width,l.height,null,l);h.translateCanvas(l.tilemapLayer.x,l.tilemapLayer.y),h.scaleCanvas(l.tilemapLayer.scaleX,l.tilemapLayer.scaleY);for(var x=0;x<p.length;x++){var y=p[x],T=y.width,E=y.height,S=y.pixelX,C=y.pixelY,P=y.collides?c:f;P!==null&&(h.fillStyle(P.color,P.alpha/255),h.fillRect(S,C,T,E)),S+=1,C+=1,T-=2,E-=2,g!==null&&(h.lineStyle(1,g.color,g.alpha/255),y.faceTop&&h.lineBetween(S,C,S+T,C),y.faceRight&&h.lineBetween(S+T,C,S+T,C+E),y.faceBottom&&h.lineBetween(S,C+E,S+T,C+E),y.faceLeft&&h.lineBetween(S,C,S,C+E))}};e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(160),a=function(o,r,h,d,l){r===void 0&&(r=!0),h===void 0&&(h=!0),l===void 0&&(l=!0),Array.isArray(o)||(o=[o]);for(var f=0;f<o.length;f++)n(o[f],r,d);if(l)for(var c=0;c<d.height;c++)for(var g=0;g<d.width;g++){var p=d.data[c][g];p&&o.indexOf(p.index)!==-1&&s(p,r)}h&&u(0,0,d.width,d.height,d)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(160),a=function(o,r,h,d,l,f){if(h===void 0&&(h=!0),d===void 0&&(d=!0),f===void 0&&(f=!0),!(o>r)){for(var c=o;c<=r;c++)n(c,h,l);if(f)for(var g=0;g<l.height;g++)for(var p=0;p<l.width;p++){var x=l.data[g][p];x&&x.index>=o&&x.index<=r&&s(x,h)}d&&u(0,0,l.width,l.height,l)}};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(160),a=function(o,r,h,d){r===void 0&&(r=!0),h===void 0&&(h=!0),Array.isArray(o)||(o=[o]);for(var l=0;l<d.height;l++)for(var f=0;f<d.width;f++){var c=d.data[l][f];c&&o.indexOf(c.index)===-1&&(s(c,r),n(c.index,r,d))}h&&u(0,0,d.width,d.height,d)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(126),a=function(o,r,h,d){r===void 0&&(r=!0),h===void 0&&(h=!0);for(var l=0;l<d.height;l++)for(var f=0;f<d.width;f++){var c=d.data[l][f];if(!!c){for(var g in o)if(!!n(c.properties,g)){var p=o[g];Array.isArray(p)||(p=[p]);for(var x=0;x<p.length;x++)c.properties[g]===p[x]&&s(c,r)}}}h&&u(0,0,d.width,d.height,d)};e.exports=a},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=function(a,o,r){a===void 0&&(a=!0),o===void 0&&(o=!0);for(var h=0;h<r.height;h++)for(var d=0;d<r.width;d++){var l=r.data[h][d];if(!!l){var f=l.getCollisionGroup();f&&f.objects&&f.objects.length>0&&s(l,a)}}o&&u(0,0,r.width,r.height,r)};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,a){if(typeof s=="number")a.callbacks[s]=u!==null?{callback:u,callbackContext:n}:void 0;else for(var o=0,r=s.length;o<r;o++)a.callbacks[s[o]]=u!==null?{callback:u,callbackContext:n}:void 0};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,o,r,h,d,l){for(var f=s(n,a,o,r,null,l),c=0;c<f.length;c++)f[c].setCollisionCallback(h,d)};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(131),n=function(a,o,r,h,d){var l=s(a,o,r,h,null,d),f=l.map(function(g){return g.index});u(f);for(var c=0;c<l.length;c++)l[c].index=f[c]};e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,o,r,h,d,l){for(var f=s(o,r,h,d,null,l),c=0;c<f.length;c++)f[c]&&(f[c].index===n?f[c].index=a:f[c].index===a&&(f[c].index=n))};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,a,o,r,h,d){if(!!h){var l,f=s(n,a,o,r,null,d),c=0;for(l=0;l<h.length;l++)c+=h[l].weight;if(!(c<=0))for(l=0;l<f.length;l++){for(var g=Math.random()*c,p=0,x=-1,y=0;y<h.length;y++)if(p+=h[y].weight,g<=p){var T=h[y].index;x=Array.isArray(T)?T[Math.floor(Math.random()*T.length)]:T;break}f[l].index=x}}};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FromOrientationString:t(258),Parse:t(564),Parse2DArray:t(259),ParseCSV:t(565),Impact:t(1454),Tiled:t(1455)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=0;n<s.length;n++){var a=s[n],o=n;if(a.name&&a.name!==""&&(o=a.name),Array.isArray(a.wangtiles)&&a.wangtiles.length>0){var r={},h={},d,l,f;if(Array.isArray(a.edgecolors))for(d=0;d<a.edgecolors.length;d++)f=1+d,l=a.edgecolors[d],l.name!==""&&(r[f]=l.name);if(Array.isArray(a.cornercolors))for(d=0;d<a.cornercolors.length;d++)f=1+d,l=a.cornercolors[d],l.name!==""&&(h[f]=l.name);if(Array.isArray(a.colors))for(d=0;d<a.colors.length;d++)l=a.colors[d],f=1+d,l.name!==""&&(r[f]=h[f]=l.name);for(var c=[r,h,r,h,r,h,r,h],g=0;g<a.wangtiles.length;g++){var p=a.wangtiles[g],x=u[p.tileid]||(u[p.tileid]={});x=x.wangid||(x.wangid={});for(var y=[],T=0;T<Math.min(c.length,p.wangid.length);T++){if(l=p.wangid[T],l===0){y.push(void 0);continue}var E=c[T][l];if(E!==void 0){y.push(E);continue}y.push(l)}x[o]=y}}}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ParseTileLayers:t(578),ParseTilesets:t(579),ParseWeltmeister:t(577)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AssignTileProperties:t(567),Base64Decode:t(574),BuildTilesetIndex:t(568),CreateGroupLayer:t(161),ParseGID:t(261),ParseImageLayers:t(569),ParseJSONTiled:t(566),ParseObject:t(260),ParseObjectLayers:t(570),ParseTileLayers:t(573),ParseTilesets:t(575)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1457),u=t(1458),e.exports={renderWebGL:s,renderCanvas:u}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,a,o){var r=a.cull(o),h=r.length,d=o.alpha*a.alpha;if(!(h===0||d<=0)){var l=a.gidMap,f=n.pipelines.set(a.pipeline,a),c=s.getTintAppendFloatAlpha,g=a.scrollFactorX,p=a.scrollFactorY,x=a.x,y=a.y,T=a.scaleX,E=a.scaleY;n.pipelines.preBatch(a);for(var S=0;S<h;S++){var C=r[S],P=l[C.index];if(!!P){var R=P.getTileTextureCoordinates(C.index);if(R!==null){var A=P.glTexture,M=f.setTexture2D(A,a),O=P.tileWidth,F=P.tileHeight,I=R.x,B=R.y,V=P.tileWidth*.5,U=P.tileHeight*.5,Y=c(C.tint,d*C.alpha);f.batchTexture(a,A,A.width,A.height,x+(V+C.pixelX)*T,y+(U+C.pixelY)*E,C.width,C.height,T,E,C.rotation,C.flipX,C.flipY,g,p,V,U,I,B,O,F,Y,Y,Y,Y,!1,0,0,o,null,!0,M)}}}n.pipelines.postBatch(a)}};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=new s,n=new s,a=new s,o=function(r,h,d,l){var f=h.cull(d),c=f.length,g=d.alpha*h.alpha;if(!(c===0||g<=0)){var p=u,x=n,y=a;x.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),p.copyFrom(d.matrix);var T=r.currentContext,E=h.gidMap;T.save(),l?(p.multiplyWithOffset(l,-d.scrollX*h.scrollFactorX,-d.scrollY*h.scrollFactorY),x.e=h.x,x.f=h.y,p.multiply(x,y),y.copyToContext(T)):(x.e-=d.scrollX*h.scrollFactorX,x.f-=d.scrollY*h.scrollFactorY,x.copyToContext(T)),(!r.antialias||h.scaleX>1||h.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var S=0;S<c;S++){var C=f[S],P=E[C.index];if(!!P){var R=P.image.getSourceImage(),A=P.getTileTextureCoordinates(C.index);if(A!==null){var M=P.tileWidth,O=P.tileHeight,F=M*.5,I=O*.5;T.save(),T.translate(C.pixelX+F,C.pixelY+I),C.rotation!==0&&T.rotate(C.rotation),(C.flipX||C.flipY)&&T.scale(C.flipX?-1:1,C.flipY?-1:1),T.globalAlpha=g*C.alpha,T.drawImage(R,A.x,A.y,M,O,-F,-I,M,O),T.restore()}}}T.restore()}};e.exports=o},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(262);s.register("tilemap",function(n){var a=n!==void 0?n:{};return u(this.scene,a.key,a.tileWidth,a.tileHeight,a.width,a.height,a.data,a.insertNull)})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(262);s.register("tilemap",function(n,a,o,r,h,d,l){return n===null&&(n=void 0),a===null&&(a=void 0),o===null&&(o=void 0),r===null&&(r=void 0),h===null&&(h=void 0),u(this.scene,n,a,o,r,h,d,l)})},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clock:t(1462),TimerEvent:t(582)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(24),n=t(20),a=t(582),o=t(93),r=new s({initialize:function(d){this.scene=d,this.systems=d.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],d.sys.events.once(n.BOOT,this.boot,this),d.sys.events.on(n.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){var h=this.systems.events;h.on(n.PRE_UPDATE,this.preUpdate,this),h.on(n.UPDATE,this.update,this),h.once(n.SHUTDOWN,this.shutdown,this)},addEvent:function(h){var d;return h instanceof a?(d=h,this.removeEvent(d),d.elapsed=d.startAt,d.hasDispatched=!1,d.repeatCount=d.repeat===-1||d.loop?999999999999:d.repeat):d=new a(h),this._pendingInsertion.push(d),d},delayedCall:function(h,d,l,f){return this.addEvent({delay:h,callback:d,args:l,callbackScope:f})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(h){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var l=h[d];o(this._pendingRemoval,l),o(this._pendingInsertion,l),o(this._active,l)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var h=this._pendingRemoval.length,d=this._pendingInsertion.length;if(!(h===0&&d===0)){var l,f;for(l=0;l<h;l++){f=this._pendingRemoval[l];var c=this._active.indexOf(f);c>-1&&this._active.splice(c,1),f.destroy()}for(l=0;l<d;l++)f=this._pendingInsertion[l],this._active.push(f);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(h,d){if(this.now=h,!this.paused){d*=this.timeScale;for(var l=0;l<this._active.length;l++){var f=this._active[l];if(!f.paused&&(f.elapsed+=d*f.timeScale,f.elapsed>=f.delay)){var c=f.elapsed-f.delay;f.elapsed=f.delay,!f.hasDispatched&&f.callback&&(f.hasDispatched=!0,f.callback.apply(f.callbackScope,f.args)),f.repeatCount>0?(f.repeatCount--,f.elapsed=c,f.hasDispatched=!1):this._pendingRemoval.push(f)}}}},shutdown:function(){var h;for(h=0;h<this._pendingInsertion.length;h++)this._pendingInsertion[h].destroy();for(h=0;h<this._active.length;h++)this._active[h].destroy();for(h=0;h<this._pendingRemoval.length;h++)this._pendingRemoval[h].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var d=this.systems.events;d.off(n.PRE_UPDATE,this.preUpdate,this),d.off(n.UPDATE,this.update,this),d.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});u.register("Clock",r,"time"),e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(100),u=t(17),n={Builders:t(1464),Events:t(267),TweenManager:t(1480),Tween:t(266),TweenData:t(268),Timeline:t(588)};n=u(!1,n,s),e.exports=n},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetBoolean:t(99),GetEaseFunction:t(80),GetNewValue:t(162),GetProps:t(583),GetTargets:t(263),GetTweens:t(584),GetValueOp:t(264),NumberTweenBuilder:t(585),StaggerBuilder:t(586),TimelineBuilder:t(587),TweenBuilder:t(163)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="active"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="repeat"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,v){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="yoyo"},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93),u=t(0),n=t(585),a=t(24),o=t(20),r=t(586),h=t(587),d=t(100),l=t(163),f=new u({initialize:function(g){this.scene=g,this.systems=g.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,g.sys.events.once(o.BOOT,this.boot,this),g.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var c=this.systems.events;c.on(o.PRE_UPDATE,this.preUpdate,this),c.on(o.UPDATE,this.update,this),c.once(o.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(c){return h(this,c)},timeline:function(c){var g=h(this,c);return g.paused||(this._add.push(g),this._toProcess++),g},create:function(c){return l(this,c)},add:function(c){var g=l(this,c);return this._add.push(g),this._toProcess++,g},existing:function(c){return this._add.push(c),this._toProcess++,this},addCounter:function(c){var g=n(this,c);return this._add.push(g),this._toProcess++,g},stagger:function(c,g){return r(c,g)},preUpdate:function(){if(this._toProcess!==0){var c=this._destroy,g=this._active,p=this._pending,x,y;for(x=0;x<c.length;x++){y=c[x];var T=g.indexOf(y);T===-1?(T=p.indexOf(y),T>-1&&(y.state=d.REMOVED,p.splice(T,1))):(y.state=d.REMOVED,g.splice(T,1))}for(c.length=0,c=this._add,x=0;x<c.length;x++)y=c[x],y.state===d.PENDING_ADD&&(y.init()?(y.play(),this._active.push(y)):this._pending.push(y));c.length=0,this._toProcess=0}},update:function(c,g){var p=this._active,x;g*=this.timeScale;for(var y=0;y<p.length;y++)x=p[y],x.update(c,g)&&(this._destroy.push(x),this._toProcess++)},remove:function(c){return s(this._add,c),s(this._pending,c),s(this._active,c),s(this._destroy,c),c.state=d.REMOVED,this},makeActive:function(c){if(this._add.indexOf(c)!==-1||this._active.indexOf(c)!==-1)return this;var g=this._pending.indexOf(c);return g!==-1&&this._pending.splice(g,1),this._add.push(c),c.state=d.PENDING_ADD,this._toProcess++,this},each:function(c,g){for(var p=[null],x=1;x<arguments.length;x++)p.push(arguments[x]);for(var y in this.list)p[0]=this.list[y],c.apply(g,p)},getAllTweens:function(){for(var c=this._active,g=[],p=0;p<c.length;p++)g.push(c[p]);return g},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(c,g){g===void 0&&(g=!1);var p=this._active,x,y=[],T,E;for(Array.isArray(c)||(c=[c]),T=0;T<p.length;T++)for(x=p[T],E=0;E<c.length;E++)x.hasTarget(c[E])&&y.push(x);if(g)for(p=this._pending,T=0;T<p.length;T++)for(x=p[T],E=0;E<c.length;E++)x.hasTarget(c[E])&&y.push(x);return y},isTweening:function(c){for(var g=this._active,p,x=0;x<g.length;x++)if(p=g[x],p.hasTarget(c)&&p.isPlaying())return!0;return!1},killAll:function(){for(var c=this.getAllTweens(),g=0;g<c.length;g++)c[g].stop();return this},killTweensOf:function(c){for(var g=this.getTweensOf(c),p=0;p<g.length;p++)g[p].stop();return this},pauseAll:function(){for(var c=this._active,g=0;g<c.length;g++)c[g].pause();return this},resumeAll:function(){for(var c=this._active,g=0;g<c.length;g++)c[g].resume();return this},setGlobalTimeScale:function(c){return this.timeScale=c,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var c=this.systems.events;c.off(o.PRE_UPDATE,this.preUpdate,this),c.off(o.UPDATE,this.update,this),c.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});a.register("TweenManager",f,"tweens"),e.exports=f},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Array:t(208),Base64:t(1482),Objects:t(1484),String:t(1488),NOOP:t(1)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ArrayBufferToBase64:t(1483),Base64ToArrayBuffer:t(433)}},function(e,v){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(u,n){for(var a=new Uint8Array(u),o=a.length,r=n?"data:"+n+";base64,":"",h=0;h<o;h+=3)r+=t[a[h]>>2],r+=t[(a[h]&3)<<4|a[h+1]>>4],r+=t[(a[h+1]&15)<<2|a[h+2]>>6],r+=t[a[h+2]&63];return o%3===2?r=r.substring(0,r.length-1)+"=":o%3===1&&(r=r.substring(0,r.length-2)+"=="),r};e.exports=s},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clone:t(77),DeepCopy:t(175),Extend:t(17),GetAdvancedValue:t(13),GetFastValue:t(2),GetMinMaxValue:t(1485),GetValue:t(6),HasAll:t(1486),HasAny:t(455),HasValue:t(126),IsPlainObject:t(7),Merge:t(127),MergeRight:t(1487),Pick:t(571),SetValue:t(478)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=t(18),n=function(a,o,r,h,d){d===void 0&&(d=r);var l=s(a,o,d);return u(l,r,h)};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=0;n<u.length;n++)if(!s.hasOwnProperty(u[n]))return!1;return!0};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,a){var o=s(n);for(var r in a)o.hasOwnProperty(r)&&(o[r]=a[r]);return o};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Format:t(1489),Pad:t(186),RemoveAt:t(1490),Reverse:t(1491),UppercaseFirst:t(205),UUID:t(222)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.replace(/%([0-9]+)/g,function(n,a){return u[Number(a)-1]})};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===0?s.slice(1):s.slice(0,u-1)+s.slice(u)};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.split("").reverse().join("")};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SoundManagerCreator:t(426),Events:t(70),BaseSound:t(146),BaseSoundManager:t(145),WebAudioSound:t(434),WebAudioSoundManager:t(432),HTML5AudioSound:t(429),HTML5AudioSoundManager:t(427),NoAudioSound:t(431),NoAudioSoundManager:t(430)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Arcade:t(1366),Matter:t(1494)}},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BodyBounds:t(1392),Components:t(249),Events:t(272),Factory:t(1394),MatterGameObject:t(1395),Image:t(1396),Matter:t(594),MatterPhysics:t(1524),PolyDecomp:t(1393),Sprite:t(1397),TileBody:t(593),PhysicsEditorParser:t(589),PhysicsJSONParser:t(590),PointerConstraint:t(1398),World:t(1402)}},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(s){return this.body.restitution=s,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCollisionCategory:function(s){return this.body.collisionFilter.category=s,this},setCollisionGroup:function(s){return this.body.collisionFilter.group=s,this},setCollidesWith:function(s){var u=0;if(!Array.isArray(s))u=s;else for(var n=0;n<s.length;n++)u|=s[n];return this.body.collisionFilter.mask=u,this},setOnCollide:function(s){return this.body.onCollideCallback=s,this},setOnCollideEnd:function(s){return this.body.onCollideEndCallback=s,this},setOnCollideActive:function(s){return this.body.onCollideActiveCallback=s,this},setOnCollideWith:function(s,u){Array.isArray(s)||(s=[s]);for(var n=0;n<s.length;n++){var a=s[n].hasOwnProperty("body")?s[n].body:s[n];this.body.setOnCollideWith(a,u)}return this}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u={applyForce:function(n){return this._tempVec2.set(this.body.position.x,this.body.position.y),s.applyForce(this.body,this._tempVec2,n),this},applyForceFrom:function(n,a){return s.applyForce(this.body,n,a),this},thrust:function(n){var a=this.body.angle;return this._tempVec2.set(n*Math.cos(a),n*Math.sin(a)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(n){var a=this.body.angle-Math.PI/2;return this._tempVec2.set(n*Math.cos(a),n*Math.sin(a)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(n){var a=this.body.angle+Math.PI/2;return this._tempVec2.set(n*Math.cos(a),n*Math.sin(a)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(n){var a=this.body.angle-Math.PI;return this._tempVec2.set(n*Math.cos(a),n*Math.sin(a)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};e.exports=u},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(s,u,n){return this.body.friction=s,u!==void 0&&(this.body.frictionAir=u),n!==void 0&&(this.body.frictionStatic=n),this},setFrictionAir:function(s){return this.body.frictionAir=s,this},setFrictionStatic:function(s){return this.body.frictionStatic=s,this}};e.exports=t},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setIgnoreGravity:function(s){return this.body.ignoreGravity=s,this}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u=t(3),n={setMass:function(a){return s.setMass(this.body,a),this},setDensity:function(a){return s.setDensity(this.body,a),this},centerOfMass:{get:function(){return new u(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};e.exports=n},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setSensor:function(s){return this.body.isSensor=s,this},isSensor:function(){return this.body.isSensor}};e.exports=t},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(124),a=t(2),o=t(589),r=t(590),h=t(64),d={setRectangle:function(l,f,c){return this.setBody({type:"rectangle",width:l,height:f},c)},setCircle:function(l,f){return this.setBody({type:"circle",radius:l},f)},setPolygon:function(l,f,c){return this.setBody({type:"polygon",sides:f,radius:l},c)},setTrapezoid:function(l,f,c,g){return this.setBody({type:"trapezoid",width:l,height:f,slope:c},g)},setExistingBody:function(l,f){f===void 0&&(f=!0),this.body&&this.world.remove(this.body,!0),this.body=l;for(var c=0;c<l.parts.length;c++)l.parts[c].gameObject=this;var g=this;if(l.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},f&&(this.world.has(l)&&this.world.remove(l,!0),this.world.add(l)),this._originComponent){var p=l.render.sprite.xOffset,x=l.render.sprite.yOffset,y=l.centerOfMass.x,T=l.centerOfMass.y;if(n(y,.5)&&n(T,.5))this.setOrigin(p+.5,x+.5);else{var E=l.centerOffset.x,S=l.centerOffset.y;this.setOrigin(p+E/this.displayWidth,x+S/this.displayHeight)}}return this},setBody:function(l,f){if(!l)return this;var c;typeof l=="string"&&(l={type:l});var g=a(l,"type","rectangle"),p=a(l,"x",this._tempVec2.x),x=a(l,"y",this._tempVec2.y),y=a(l,"width",this.width),T=a(l,"height",this.height);switch(g){case"rectangle":c=s.rectangle(p,x,y,T,f);break;case"circle":var E=a(l,"radius",Math.max(y,T)/2),S=a(l,"maxSides",25);c=s.circle(p,x,E,f,S);break;case"trapezoid":var C=a(l,"slope",.5);c=s.trapezoid(p,x,y,T,C,f);break;case"polygon":var P=a(l,"sides",5),R=a(l,"radius",Math.max(y,T)/2);c=s.polygon(p,x,P,R,f);break;case"fromVertices":case"fromVerts":var A=a(l,"verts",null);if(A)if(typeof A=="string"&&(A=h.fromPath(A)),this.body&&!this.body.hasOwnProperty("temp"))u.setVertices(this.body,A),c=this.body;else{var M=a(l,"flagInternal",!1),O=a(l,"removeCollinear",.01),F=a(l,"minimumArea",10);c=s.fromVertices(p,x,A,f,M,O,F)}break;case"fromPhysicsEditor":c=o.parseBody(p,x,l,f);break;case"fromPhysicsTracer":c=r.parseBody(p,x,l,f);break}return c&&this.setExistingBody(c,l.addToWorld),this}};e.exports=d},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(272),u=t(165),n=t(166),a={setToSleep:function(){return u.set(this.body,!0),this},setAwake:function(){return u.set(this.body,!1),this},setSleepThreshold:function(o){return o===void 0&&(o=60),this.body.sleepThreshold=o,this},setSleepEvents:function(o,r){return this.setSleepStartEvent(o),this.setSleepEndEvent(r),this},setSleepStartEvent:function(o){if(o){var r=this.world;n.on(this.body,"sleepStart",function(h){r.emit(s.SLEEP_START,h,this)})}else n.off(this.body,"sleepStart");return this},setSleepEndEvent:function(o){if(o){var r=this.world;n.on(this.body,"sleepEnd",function(h){r.emit(s.SLEEP_END,h,this)})}else n.off(this.body,"sleepEnd");return this}};e.exports=a},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afteradd"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterremove"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterupdate"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeadd"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeremove"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeupdate"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionactive"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionend"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionstart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepend"},function(e,v){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepstart"},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u={setStatic:function(n){return s.setStatic(this.body,n),this},isStatic:function(){return this.body.isStatic}};e.exports=u},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u=t(14),n=t(269),a=t(270),o=4,r={x:{get:function(){return this.body.position.x},set:function(h){this._tempVec2.set(h,this.y),s.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(h){this._tempVec2.set(this.x,h),s.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(h){var d=1/this._scaleX,l=1/this._scaleY;this._scaleX=h,this._scaleX===0?this.renderFlags&=~o:this.renderFlags|=o,s.scale(this.body,d,l),s.scale(this.body,h,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(h){var d=1/this._scaleX,l=1/this._scaleY;this._scaleY=h,this._scaleY===0?this.renderFlags&=~o:this.renderFlags|=o,s.scale(this.body,d,l),s.scale(this.body,this._scaleX,h)}},angle:{get:function(){return a(this.body.angle*u.RAD_TO_DEG)},set:function(h){this.rotation=a(h)*u.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(h){this._rotation=n(h),s.setAngle(this.body,this._rotation)}},setPosition:function(h,d){return h===void 0&&(h=0),d===void 0&&(d=h),this._tempVec2.set(h,d),s.setPosition(this.body,this._tempVec2),this},setRotation:function(h){return h===void 0&&(h=0),this._rotation=n(h),s.setAngle(this.body,h),this},setFixedRotation:function(){return s.setInertia(this.body,1/0),this},setAngle:function(h){return h===void 0&&(h=0),this.angle=h,s.setAngle(this.body,this.rotation),this},setScale:function(h,d,l){h===void 0&&(h=1),d===void 0&&(d=h);var f=1/this._scaleX,c=1/this._scaleY;return this._scaleX=h,this._scaleY=d,s.scale(this.body,f,c,l),s.scale(this.body,h,d,l),this}};e.exports=r},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u={setAngularVelocity:function(n){return s.setAngularVelocity(this.body,n),this},setVelocityX:function(n){return this._tempVec2.set(n,this.body.velocity.y),s.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(n){return this._tempVec2.set(this.body.velocity.x,n),s.setVelocity(this.body,this._tempVec2),this},setVelocity:function(n,a){return this._tempVec2.set(n,a),s.setVelocity(this.body,this._tempVec2),this}};e.exports=u},function(e,v,t){var s={};e.exports=s;var u=t(118),n=t(32);(function(){s.create=function(a){var o={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return n.extend(o,!1,a)},s.reset=function(a){a.extended&&(a.narrowDetections=0,a.narrowphaseTests=0,a.narrowReuse=0,a.narrowReuseCount=0,a.midphaseTests=0,a.broadphaseTests=0,a.narrowEff=0,a.midEff=0,a.broadEff=0,a.collisions=0,a.buckets=0,a.pairs=0,a.bodies=0)},s.update=function(a,o){if(a.extended){var r=o.world,h=u.allBodies(r);a.collisions=a.narrowDetections,a.pairs=o.pairs.list.length,a.bodies=h.length,a.midEff=(a.narrowDetections/(a.midphaseTests||1)).toFixed(2),a.narrowEff=(a.narrowDetections/(a.narrowphaseTests||1)).toFixed(2),a.broadEff=(1-a.broadphaseTests/(h.length||1)).toFixed(2),a.narrowReuse=(a.narrowReuseCount/(a.narrowphaseTests||1)).toFixed(2)}}})()},function(e,v,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=t(271),n=t(86),a=t(41),o=t(1392),r=t(84),h=t(0),d=t(118),l=t(591),f=t(128),c=t(273),g=t(50),p=t(1394),x=t(2),y=t(6),T=t(597),E=t(1525),S=t(1526),C=t(1399),P=t(1527),R=t(127),A=t(250),M=t(598),O=t(595),F=t(24),I=t(1400),B=t(599),V=t(274),U=t(20),Y=t(592),W=t(83),w=t(64),L=t(1402),D=new h({initialize:function(G){this.scene=G,this.systems=G.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=a,this.composite=d,this.detector=c,this.grid=T,this.pair=A,this.pairs=M,this.query=I,this.resolver=B,this.sat=V,this.constraint=f,this.bodies=n,this.composites=l,this.axes=u,this.bounds=r,this.svg=Y,this.vector=W,this.vertices=w,this.verts=w,this._tempVec2=W.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),B._restingThresh=y(this.config,"restingThresh",4),B._restingThreshTangent=y(this.config,"restingThreshTangent",6),B._positionDampen=y(this.config,"positionDampen",.9),B._positionWarming=y(this.config,"positionWarming",.8),B._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),G.sys.events.once(U.BOOT,this.boot,this),G.sys.events.on(U.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new p(this.world),this.bodyBounds=new o,this.systems.events.once(U.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new p(this.world));var N=this.systems.events;N.on(U.UPDATE,this.world.update,this.world),N.on(U.POST_UPDATE,this.world.postUpdate,this.world),N.once(U.SHUTDOWN,this.shutdown,this)},getConfig:function(){var N=this.systems.game.config.physics,G=this.systems.settings.physics,b=R(x(G,"matter",{}),x(N,"matter",{}));return b},enableAttractorPlugin:function(){return O.register(E),O.use(C,E),this},enableWrapPlugin:function(){return O.register(P),O.use(C,P),this},enableCollisionEventsPlugin:function(){return O.register(S),O.use(C,S),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(N,G){this.world.step(N,G)},containsPoint:function(N,G,b){N=this.getMatterBodies(N);var z=W.create(G,b),X=I.point(N,z);return X.length>0},intersectPoint:function(N,G,b){b=this.getMatterBodies(b);var z=W.create(N,G),X=[],H=I.point(b,z);return H.forEach(function($){X.indexOf($)===-1&&X.push($)}),X},intersectRect:function(N,G,b,z,X,H){X===void 0&&(X=!1),H=this.getMatterBodies(H);var $={min:{x:N,y:G},max:{x:N+b,y:G+z}},J=[],K=I.region(H,$,X);return K.forEach(function(Z){J.indexOf(Z)===-1&&J.push(Z)}),J},intersectRay:function(N,G,b,z,X,H){X===void 0&&(X=1),H=this.getMatterBodies(H);for(var $=[],J=I.ray(H,W.create(N,G),W.create(b,z),X),K=0;K<J.length;K++)$.push(J[K].body);return $},intersectBody:function(N,G){G=this.getMatterBodies(G);for(var b=[],z=I.collides(N,G),X=0;X<z.length;X++){var H=z[X];H.bodyA===N?b.push(H.bodyB):b.push(H.bodyA)}return b},overlap:function(N,G,b,z,X){b===void 0&&(b=null),z===void 0&&(z=null),X===void 0&&(X=b),Array.isArray(N)||(N=[N]),N=this.getMatterBodies(N),G=this.getMatterBodies(G);for(var H=!1,$=0;$<N.length;$++)for(var J=N[$],K=I.collides(J,G),Z=0;Z<K.length;Z++){var k=K[Z],Q=k.bodyA.id===J.id?k.bodyB:k.bodyA;if(!z||z.call(X,J,Q,k)){if(H=!0,b)b.call(X,J,Q,k);else if(!z)return!0}}return H},setCollisionCategory:function(N,G){return N=this.getMatterBodies(N),N.forEach(function(b){b.collisionFilter.category=G}),this},setCollisionGroup:function(N,G){return N=this.getMatterBodies(N),N.forEach(function(b){b.collisionFilter.group=G}),this},setCollidesWith:function(N,G){N=this.getMatterBodies(N);var b=0;if(!Array.isArray(G))b=G;else for(var z=0;z<G.length;z++)b|=G[z];return N.forEach(function(X){X.collisionFilter.mask=b}),this},getMatterBodies:function(N){if(!N)return this.world.getAllBodies();Array.isArray(N)||(N=[N]);for(var G=[],b=0;b<N.length;b++){var z=N[b].hasOwnProperty("body")?N[b].body:N[b];G.push(z)}return G},setVelocity:function(N,G,b){N=this.getMatterBodies(N);var z=this._tempVec2;return z.x=G,z.y=b,N.forEach(function(X){a.setVelocity(X,z)}),this},setVelocityX:function(N,G){N=this.getMatterBodies(N);var b=this._tempVec2;return b.x=G,N.forEach(function(z){b.y=z.velocity.y,a.setVelocity(z,b)}),this},setVelocityY:function(N,G){N=this.getMatterBodies(N);var b=this._tempVec2;return b.y=G,N.forEach(function(z){b.x=z.velocity.x,a.setVelocity(z,b)}),this},setAngularVelocity:function(N,G){return N=this.getMatterBodies(N),N.forEach(function(b){a.setAngularVelocity(b,G)}),this},applyForce:function(N,G){N=this.getMatterBodies(N);var b=this._tempVec2;return N.forEach(function(z){b.x=z.position.x,b.y=z.position.y,a.applyForce(z,b,G)}),this},applyForceFromPosition:function(N,G,b,z){N=this.getMatterBodies(N);var X=this._tempVec2;return N.forEach(function(H){z===void 0&&(z=H.angle),X.x=b*Math.cos(z),X.y=b*Math.sin(z),a.applyForce(H,G,X)}),this},applyForceFromAngle:function(N,G,b){N=this.getMatterBodies(N);var z=this._tempVec2;return N.forEach(function(X){b===void 0&&(b=X.angle),z.x=G*Math.cos(b),z.y=G*Math.sin(b),a.applyForce(X,{x:X.position.x,y:X.position.y},z)}),this},getConstraintLength:function(N){var G=N.pointA.x,b=N.pointA.y,z=N.pointB.x,X=N.pointB.y;return N.bodyA&&(G+=N.bodyA.position.x,b+=N.bodyA.position.y),N.bodyB&&(z+=N.bodyB.position.x,X+=N.bodyB.position.y),g(G,b,z,X)},alignBody:function(N,G,b,z){N=N.hasOwnProperty("body")?N.body:N;var X;switch(z){case s.TOP_LEFT:case s.LEFT_TOP:X=this.bodyBounds.getTopLeft(N,G,b);break;case s.TOP_CENTER:X=this.bodyBounds.getTopCenter(N,G,b);break;case s.TOP_RIGHT:case s.RIGHT_TOP:X=this.bodyBounds.getTopRight(N,G,b);break;case s.LEFT_CENTER:X=this.bodyBounds.getLeftCenter(N,G,b);break;case s.CENTER:X=this.bodyBounds.getCenter(N,G,b);break;case s.RIGHT_CENTER:X=this.bodyBounds.getRightCenter(N,G,b);break;case s.LEFT_BOTTOM:case s.BOTTOM_LEFT:X=this.bodyBounds.getBottomLeft(N,G,b);break;case s.BOTTOM_CENTER:X=this.bodyBounds.getBottomCenter(N,G,b);break;case s.BOTTOM_RIGHT:case s.RIGHT_BOTTOM:X=this.bodyBounds.getBottomRight(N,G,b);break}return X&&a.setPosition(N,X),this},shutdown:function(){var N=this.systems.events;this.world&&(N.off(U.UPDATE,this.world.update,this.world),N.off(U.POST_UPDATE,this.world.postUpdate,this.world)),N.off(U.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(U.START,this.start,this),this.scene=null,this.systems=null}});F.register("MatterPhysics",D,"matterPhysics"),e.exports=D},function(e,v,t){var s=t(594),u={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Body.create",function(){u.Body.init(this)}),n.before("Engine.update",function(a){u.Engine.update(a)})},Body:{init:function(n){n.plugin.attractors=n.plugin.attractors||[]}},Engine:{update:function(n){for(var a=s.Composite.allBodies(n.world),o=0;o<a.length;o++){var r=a[o],h=r.plugin.attractors;if(h&&h.length>0)for(var d=0;d<a.length;d++){var l=a[d];if(o!==d)for(var f=0;f<h.length;f++){var c=h[f],g=c;s.Common.isFunction(c)&&(g=c(r,l)),g&&s.Body.applyForce(l,l.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(n,a){var o=s.Vector.sub(a.position,n.position),r=s.Vector.magnitudeSquared(o)||1e-4,h=s.Vector.normalise(o),d=-u.Attractors.gravityConstant*(n.mass*a.mass/r),l=s.Vector.mult(h,d);s.Body.applyForce(n,n.position,s.Vector.neg(l)),s.Body.applyForce(a,a.position,l)}}};e.exports=u},function(e,v){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Engine.create",function(){s.Events.on(this,"collisionStart",function(u){u.pairs.map(function(n){var a=n.bodyA,o=n.bodyB;a.gameObject&&a.gameObject.emit("collide",a,o,n),o.gameObject&&o.gameObject.emit("collide",o,a,n),s.Events.trigger(a,"onCollide",{pair:n}),s.Events.trigger(o,"onCollide",{pair:n}),a.onCollideCallback&&a.onCollideCallback(n),o.onCollideCallback&&o.onCollideCallback(n),a.onCollideWith[o.id]&&a.onCollideWith[o.id](o,n),o.onCollideWith[a.id]&&o.onCollideWith[a.id](a,n)})}),s.Events.on(this,"collisionActive",function(u){u.pairs.map(function(n){var a=n.bodyA,o=n.bodyB;a.gameObject&&a.gameObject.emit("collideActive",a,o,n),o.gameObject&&o.gameObject.emit("collideActive",o,a,n),s.Events.trigger(a,"onCollideActive",{pair:n}),s.Events.trigger(o,"onCollideActive",{pair:n}),a.onCollideActiveCallback&&a.onCollideActiveCallback(n),o.onCollideActiveCallback&&o.onCollideActiveCallback(n)})}),s.Events.on(this,"collisionEnd",function(u){u.pairs.map(function(n){var a=n.bodyA,o=n.bodyB;a.gameObject&&a.gameObject.emit("collideEnd",a,o,n),o.gameObject&&o.gameObject.emit("collideEnd",o,a,n),s.Events.trigger(a,"onCollideEnd",{pair:n}),s.Events.trigger(o,"onCollideEnd",{pair:n}),a.onCollideEndCallback&&a.onCollideEndCallback(n),o.onCollideEndCallback&&o.onCollideEndCallback(n)})})})}};e.exports=t},function(e,v,t){var s=t(594),u={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Engine.update",function(){u.Engine.update(this)})},Engine:{update:function(n){for(var a=n.world,o=s.Composite.allBodies(a),r=s.Composite.allComposites(a),h=0;h<o.length;h+=1){var d=o[h];d.plugin.wrap&&u.Body.wrap(d,d.plugin.wrap)}for(h=0;h<r.length;h+=1){var l=r[h];l.plugin.wrap&&u.Composite.wrap(l,l.plugin.wrap)}}},Bounds:{wrap:function(n,a){var o=null,r=null;if(typeof a.min.x!="undefined"&&typeof a.max.x!="undefined"&&(n.min.x>a.max.x?o=a.min.x-n.max.x:n.max.x<a.min.x&&(o=a.max.x-n.min.x)),typeof a.min.y!="undefined"&&typeof a.max.y!="undefined"&&(n.min.y>a.max.y?r=a.min.y-n.max.y:n.max.y<a.min.y&&(r=a.max.y-n.min.y)),o!==null||r!==null)return{x:o||0,y:r||0}}},Body:{wrap:function(n,a){var o=u.Bounds.wrap(n.bounds,a);return o&&s.Body.translate(n,o),o}},Composite:{bounds:function(n){for(var a=s.Composite.allBodies(n),o=[],r=0;r<a.length;r+=1){var h=a[r];o.push(h.bounds.min,h.bounds.max)}return s.Bounds.create(o)},wrap:function(n,a){var o=u.Bounds.wrap(u.Composite.bounds(n),a);return o&&s.Composite.translate(n,o),o}}};e.exports=u},function(e,v,t){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=t(33),n=t(17),a={Actions:t(275),Animations:t(723),BlendModes:t(35),Cache:t(735),Cameras:t(738),Core:t(806),Class:t(0),Create:t(888),Curves:t(894),Data:t(896),Display:t(898),DOM:t(917),Events:t(918),Game:t(920),GameObjects:t(1011),Geom:t(483),Input:t(1308),Loader:t(1338),Math:t(193),Physics:t(1493),Plugins:t(1403),Renderer:t(1405),Scale:t(1412),ScaleModes:t(168),Scene:t(418),Scenes:t(1413),Structs:t(1415),Textures:t(1416),Tilemaps:t(1418),Time:t(1461),Tweens:t(1463),Utils:t(1481)};a.Sound=t(1492),a=n(!1,a,u),e.exports=a,s.Phaser=a}).call(this,t(600))}])})})(Mu);var hn=Rv(Mu.exports);class et{constructor(i){this.scene=i,this.displayList=i.sys.displayList,this.updateList=i.sys.updateList,i.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(i,e){et.prototype[i]=e}}var ea=function(m){var i,e,v;if(typeof m!="object"||m===null)return m;i=Array.isArray(m)?[]:{};for(v in m)e=m[v],i[v]=ea(e);return i},Mv=function(m,i,e,v){Array.isArray(i)&&(v=e,e=i,i=void 0),i===void 0&&(i="__BASE"),e=ea(e),v=ea(v),this.textureKey=m,this.baseFrameName=i,this.columns.data=e,this.columns.count=e?e.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=v,this.rows.count=v?v.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var t=this.scene.textures.get(m);if(!t)return this.clear(),this;if(!e||!v)return this.clear(),this;for(var s=t.frames[i],u=s.width,n=0,a=0,o=e.length;a<o;a++)e[a]===void 0?n++:typeof e[a]=="number"?u-=e[a]:u-=e[a].width;for(var r=u/n,h=s.height,d=0,a=0,o=v.length;a<o;a++)v[a]===void 0?d++:typeof v[a]=="number"?h-=v[a]:h-=v[a].width;for(var l=h/d,f,c,g,p,x,y=0,T=0,E=0,S=v.length;E<S;E++){v[E]===void 0&&(v[E]=l),typeof v[E]=="number"&&(v[E]={height:v[E],stretch:E%2}),f=v[E],g=f.height,this.rows.stretch+=f.stretch|0,this.rows.minHeight+=f.stretch>0?0:g,y=0;for(var a=0,C=e.length;a<C;a++){if(e[a]===void 0&&(e[a]=r),typeof e[a]=="number"&&(e[a]={width:e[a],stretch:a%2}),c=e[a],p=c.width,E===0&&(this.columns.stretch+=c.stretch|0,this.columns.minWidth+=c.stretch>0?0:p),p>=1&&g>=1){x=this.getFrameNameCallback(a,E,i);var P=typeof x;(P==="string"||P==="number")&&t.add(x,0,y+s.cutX,T+s.cutY,p,g)}y+=p}T+=g}return this.updateTexture(),this},bo=function(m,i,e){return e===void 0&&(e="image"),m[i]||(m[i]=m.scene.make[e]({add:!1,origin:{x:0,y:0}}),m.once("destroy",function(){m[i]&&(m[i].destroy(),m[i]=void 0)})),m[i]},Av=function(){if(this.clear(),this.textureKey===void 0)return this;var m=this.scene.textures.get(this.textureKey);if(!m)return this;var i=this.columns.minWidth*this.maxFixedPartScaleX,e=this.rows.minHeight*this.maxFixedPartScaleY,v=this.width-i,t=this.height-e,s=v>=0?this.maxFixedPartScaleX:this.width/i,u=t>=0?this.maxFixedPartScaleY:this.height/e;if(this.preserveRatio){var n=Math.min(s,u);if(s>n){var a=(s-n)*i;v>=0?v+=a:v=a,s=n}if(u>n){var o=(u-n)*e;t>=0?t+=o:t=o,u=n}}this.columns.scale=s,this.rows.scale=u;var r;v>0?r=this.columns.stretch>0?v/this.columns.stretch:0:r=0;var h;t>0?h=this.rows.stretch>0?t/this.rows.stretch:0:h=0;for(var d,l,f,c,g,p=0,x=0,y,T,E=0,S=this.rows.count;E<S;E++){f=this.rows.data[E],g=f.stretch===0?f.height*u:h*f.stretch,p=0;for(var C=0,P=this.columns.count;C<P;C++)l=this.columns.data[C],c=l.stretch===0?l.width*s:r*l.stretch,d=this.getFrameNameCallback(C,E,this.baseFrameName),m.has(d)&&c>0&&g>0&&(f.stretch===0&&l.stretch===0||this.getStretchMode(C,E)===0?T=0:T=1,T===0?(y=bo(this,"_image","image"),y.setTexture(this.textureKey,d).setDisplaySize(c,g)):(y=bo(this,"_tileSprite","tileSprite"),y.setTexture(this.textureKey,d).setSize(c,g))),y&&(this.draw(y,p,x),y=void 0),p+=c;x+=g}};const Ov=Phaser.Utils.Objects.IsPlainObject,zo=Phaser.Utils.Objects.GetValue;var Lv=function(m){return Ov(m)?(this.stretchMode.edge=qn(zo(m,"edge",0)),this.stretchMode.internal=qn(zo(m,"internal",0))):(m=qn(m),this.stretchMode.edge=m,this.stretchMode.internal=m),this},qn=function(m){return typeof m=="string"&&(m=Fv[m]),m};const Fv={scale:0,repeat:1};var Iv=function(m,i){return m===0||m===this.columns.count-1||i===0||i===this.rows.count-1},wv=function(m,i){return Iv.call(this,m,i)?this.stretchMode.edge:this.stretchMode.internal},Dv=function(m){return m==null&&(m=!0),this.preserveRatio=m,this},Bv=function(m,i){return i===void 0&&(i=m),this.maxFixedPartScaleX=m,this.maxFixedPartScaleY=i,this},Nv={setTexture:Mv,updateTexture:Av,setStretchMode:Lv,getStretchMode:wv,setPreserveRatio:Dv,setMaxFixedPartScale:Bv};const Gv="__BASE";var Vv=function(m,i,e){return e===Gv?`${m},${i}`:`${e}_${m},${i}`};const bv=Phaser.GameObjects.RenderTexture,$i=Phaser.Utils.Objects.IsPlainObject,vt=Phaser.Utils.Objects.GetValue;class Ca extends bv{constructor(i,e,v,t,s,u,n,a,o,r){$i(e)?(r=e,e=vt(r,"x",0),v=vt(r,"y",0),t=vt(r,"width",1),s=vt(r,"height",1),u=vt(r,"key",void 0),n=vt(r,"baseFrame",void 0),a=vt(r,"columns",void 0),o=vt(r,"rows",void 0)):$i(t)?(r=t,t=vt(r,"width",1),s=vt(r,"height",1),u=vt(r,"key",void 0),n=vt(r,"baseFrame",void 0),a=vt(r,"columns",void 0),o=vt(r,"rows",void 0)):$i(u)?(r=u,u=vt(r,"key",void 0),n=vt(r,"baseFrame",void 0),a=vt(r,"columns",void 0),o=vt(r,"rows",void 0)):$i(n)?(r=n,n=vt(r,"baseFrame",void 0),a=vt(r,"columns",void 0),o=vt(r,"rows",void 0)):Array.isArray(n)?(r=o,o=a,a=n,n=vt(r,"baseFrame",void 0)):$i(a)&&(r=a,a=vt(r,"columns",void 0),o=vt(r,"rows",void 0)),super(i,e,v,t,s),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setOrigin(.5,.5),this.setGetFrameNameCallback(vt(r,"getFrameNameCallback",void 0)),this.setStretchMode(vt(r,"stretchMode",0)),this.setPreserveRatio(vt(r,"preserveRatio",!0));var h=vt(r,"maxFixedPartScale",1),d=vt(r,"maxFixedPartScaleX",h),l=vt(r,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(d,l),this.setTexture(u,n,a,o)}setGetFrameNameCallback(i){return i===void 0&&(i=Vv),this.getFrameNameCallback=i,this}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(i,e){return this.width===i&&this.height===e?this:(super.resize(i,e),this.updateTexture(),this)}}Object.assign(Ca.prototype,Nv);var Au=function(m){return m==null||m===""||m.length===0},zv=function(m,i,e){var v=m;if(!Au(i)){typeof i=="string"&&(i=i.split("."));for(var t,s=0,u=i.length;s<u;s++){if(t=i[s],v[t]==null||typeof v[t]!="object"){var n;s===u-1?e===void 0?n={}:n=e:n={},v[t]=n}v=v[t]}}return v},it=function(m,i,e){if(typeof m=="object"){if(Au(i)){if(e==null)return;typeof e=="object"&&(m=e)}else{typeof i=="string"&&(i=i.split("."));var v=i.pop(),t=zv(m,i);t[v]=e}return m}};et.register("ninePatch",function(m,i,e,v,t,s,u,n){var a=new Ca(this.scene,m,i,e,v,t,s,u,n);return this.scene.add.existing(a),a});it(window,"RexPlugins.UI.NinePatch",Ca);const Ke=Phaser.Utils.Objects.GetValue;class Ou{constructor(i,e,v,t,s){this.cornerRadius={},this._width=0,this._height=0,this.setTo(i,e,v,t,s)}setTo(i,e,v,t,s){return this.setPosition(i,e),this.setRadius(s),this.setSize(v,t),this}setPosition(i,e){return i===void 0&&(i=0),e===void 0&&(e=i),this.x=i,this.y=e,this}setRadius(i){return i===void 0&&(i=0),this.radius=i,this}setSize(i,e){return this.width=i,this.height=e,this}get minWidth(){var i=this.cornerRadius;return Math.max(i.tl.x+i.tr.x,i.bl.x+i.br.x)}get minHeight(){var i=this.cornerRadius;return Math.max(i.tl.y+i.bl.y,i.tr.y+i.br.y)}get width(){return this._width}set width(i){i==null&&(i=0),this._width=Math.max(i,this.minWidth)}get height(){return this._height}set height(i){i==null&&(i=0),this._height=Math.max(i,this.minHeight)}get radius(){var i=this.cornerRadius;return Math.max(i.tl.x,i.tl.y,i.tr.x,i.tr.y,i.bl.x,i.bl.y,i.br.x,i.br.y)}set radius(i){var e,v;typeof i=="number"?(e=i,v=i):(e=Ke(i,"x",0),v=Ke(i,"y",0));var t=this.cornerRadius;t.tl=As(Ke(i,"tl",void 0),e,v),t.tr=As(Ke(i,"tr",void 0),e,v),t.bl=As(Ke(i,"bl",void 0),e,v),t.br=As(Ke(i,"br",void 0),e,v)}get radiusTL(){var i=this.cornerRadius.tl;return Math.max(i.x,i.y)}set radiusTL(i){Os(this.cornerRadius.tl,i)}get radiusTR(){var i=this.cornerRadius.tr;return Math.max(i.x,i.y)}set radiusTR(i){Os(this.cornerRadius.tr,i)}get radiusBL(){var i=this.cornerRadius.bl;return Math.max(i.x,i.y)}set radiusBL(i){Os(this.cornerRadius.bl,i)}get radiusBR(){var i=this.cornerRadius.br;return Math.max(i.x,i.y)}set radiusBR(i){Os(this.cornerRadius.br,i)}}var As=function(m,i,e){return m===void 0?{x:i,y:e}:typeof m=="number"?{x:m,y:m}:m},Os=function(m,i){typeof i=="number"?(m.x=i,m.y=i):(m.x=Ke(i,"x",0),m.y=Ke(i,"y",0))},Ni=function(m,i,e){var v=e.length;if(v>=2){var t=e[v-2],s=e[v-1];if(m===t&&i===s)return e}return e.push(m,i),e};const Uo=Phaser.Math.DegToRad;var Gi=function(m,i,e,v,t,s,u,n,a){u&&s>t?s-=360:!u&&s<t&&(s+=360);var o=s-t,r=Uo(o)/n;t=Uo(t);for(var h=0;h<=n;h++){var d=t+r*h,l=m+e*Math.cos(d),f=i+v*Math.sin(d);Ni(l,f,a)}return a},Uv=Phaser.Renderer.WebGL.Utils,Lu=function(m,i,e,v,t,s){for(var u=Uv.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*v),n=e.pathData,a=e.pathIndexes,o=0;o<a.length;o+=3){var r=a[o]*2,h=a[o+1]*2,d=a[o+2]*2,l=n[r+0]-t,f=n[r+1]-s,c=n[h+0]-t,g=n[h+1]-s,p=n[d+0]-t,x=n[d+1]-s,y=i.getX(l,f),T=i.getY(l,f),E=i.getX(c,g),S=i.getY(c,g),C=i.getX(p,x),P=i.getY(p,x);m.batchTri(e,y,T,E,S,C,P,0,0,1,1,u,u,u,2)}},Yv=Phaser.Renderer.WebGL.Utils,Pn=function(m,i,e,v,t){var s=m.strokeTint,u=Yv.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*e);s.TL=u,s.TR=u,s.BL=u,s.BR=u;var n=i.pathData,a=n.length-1,o=i.lineWidth,r=o/2,h=n[0]-v,d=n[1]-t;i.closePath||(a-=2);for(var l=2;l<a;l+=2){var f=n[l]-v,c=n[l+1]-t;m.batchLine(h,d,f,c,r,r,o,l-2,i.closePath?l===a-1:!1),h=f,d=c}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const Pa=Phaser.GameObjects.Components.TransformMatrix;var Fu=new Pa,Iu=new Pa,wu=new Pa,Xv={camera:Fu,sprite:Iu,calc:wu},Du=function(m,i,e){var v=Fu,t=Iu,s=wu;return t.applyITRS(m.x,m.y,m.rotation,m.scaleX,m.scaleY),v.copyFrom(i.matrix),e?(v.multiplyWithOffset(e,-i.scrollX*m.scrollFactorX,-i.scrollY*m.scrollFactorY),t.e=m.x,t.f=m.y):(t.e-=i.scrollX*m.scrollFactorX,t.f-=i.scrollY*m.scrollFactorY),v.multiply(t,s),Xv},Wv=function(m,i,e,v){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var t=m.pipelines.set(i.pipeline),s=Du(i,e,v),u=t.calcMatrix.copyFrom(s.calc),n=i._displayOriginX,a=i._displayOriginY,o=e.alpha*i.alpha;m.pipelines.preBatch(i),i.isFilled&&Lu(t,u,i,o,n,a),i.isStroked&&Pn(t,i,o,n,a),m.pipelines.postBatch(i)},fs=function(m,i,e,v){var t=e||i.fillColor,s=v||i.fillAlpha,u=(t&16711680)>>>16,n=(t&65280)>>>8,a=t&255;m.fillStyle="rgba("+u+","+n+","+a+","+s+")"},ds=function(m,i,e,v){var t=e||i.strokeColor,s=v||i.strokeAlpha,u=(t&16711680)>>>16,n=(t&65280)>>>8,a=t&255;m.strokeStyle="rgba("+u+","+n+","+a+","+s+")",m.lineWidth=i.lineWidth};const Hv=Phaser.Renderer.Canvas.SetTransform;var $v=function(m,i,e,v){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var t=m.currentContext;if(Hv(m,t,i,e,v)){var s=i._displayOriginX,u=i._displayOriginY,n=i.pathData,a=n.length-1,o=n[0]-s,r=n[1]-u;t.beginPath(),t.moveTo(o,r),i.closePath||(a-=2);for(var h=2;h<a;h+=2){var d=n[h]-s,l=n[h+1]-u;t.lineTo(d,l)}t.closePath(),i.isFilled&&(fs(t,i),t.fill()),i.isStroked&&(ds(t,i),t.stroke()),t.restore()}},Jv={renderWebGL:Wv,renderCanvas:$v};const Kv=Phaser.GameObjects.Shape,Yo=Phaser.Utils.Objects.GetValue,Zv=Phaser.Geom.Polygon.Earcut;class Ra extends Kv{constructor(i,e,v,t,s,u,n,a){e===void 0&&(e=0),v===void 0&&(v=0);var o=new Ou;super(i,"rexRoundRectangleShape",o);var r=Yo(u,"radius",u);o.setTo(0,0,t,s,r);var h=Yo(u,"iteration",void 0);this.setIteration(h),this.setPosition(e,v),n!==void 0&&this.setFillStyle(n,a),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var i=this.geom,e=this.pathData;e.length=0;var v=i.cornerRadius,t,s=this.iteration+1;if(t=v.br,Ls(t)){var u=i.width-t.x,n=i.height-t.y;Gi(u,n,t.x,t.y,0,90,!1,s,e)}else Ni(i.width,i.height,e);if(t=v.bl,Ls(t)){var u=t.x,n=i.height-t.y;Gi(u,n,t.x,t.y,90,180,!1,s,e)}else Ni(0,i.height,e);if(t=v.tl,Ls(t)){var u=t.x,n=t.y;Gi(u,n,t.x,t.y,180,270,!1,s,e)}else Ni(0,0,e);if(t=v.tr,Ls(t)){var u=i.width-t.x,n=t.y;Gi(u,n,t.x,t.y,270,360,!1,s,e)}else Ni(i.width,0,e);return e.push(e[0],e[1]),this.pathIndexes=Zv(e),this}get width(){return this.geom.width}set width(i){this.resize(i,this.height)}get height(){return this.geom.height}set height(i){this.resize(this.width,i)}setSize(i,e){if(e===void 0&&(e=i),this.geom.width===i&&this.geom.height===e)return this;this.geom.setSize(i,e),this.updateDisplayOrigin(),this.dirty=!0;var v=this.input;return v&&!v.customHitArea&&(v.hitArea.width=i,v.hitArea.height=e),this}resize(i,e){return this.setSize(i,e),this}get iteration(){return this._iteration}set iteration(i){if(this._iteration===void 0){this._iteration=i;return}this._iteration!==i&&(this._iteration=i,this.dirty=!0)}setIteration(i){return i===void 0&&(i=6),this.iteration=i,this}get radius(){return this.geom.radius}set radius(i){this.geom.setRadius(i),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(i){this.geom.radiusTL=i,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(i){this.geom.radiusTR=i,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(i){this.geom.radiusBL=i,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(i){this.geom.radiusBR=i,this.dirty=!0}setRadius(i){return i===void 0&&(i=0),this.radius=i,this}setRadiusTL(i){return i===void 0&&(i=0),this.radiusTL=i,this}setRadiusTR(i){return i===void 0&&(i=0),this.radiusTR=i,this}setRadiusBL(i){return i===void 0&&(i=0),this.radiuBL=i,this}setRadiusBR(i){return i===void 0&&(i=0),this.radiusBR=i,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(i){this.radius=i}setCornerRadius(i){return this.setRadius(i)}}var Ls=function(m){return m.x!==0&&m.y!==0};Object.assign(Ra.prototype,Jv);et.register("roundRectangle",function(m,i,e,v,t,s,u){var n=new Ra(this.scene,m,i,e,v,t,s,u);return this.scene.add.existing(n),n});it(window,"RexPlugins.UI.RoundRectangle",Ra);const Qv=Phaser.Renderer.WebGL.Utils;var jv=function(m,i,e,v){if(i.dirty&&(i.updateTexture(),i.dirty=!1),!(i.width===0||i.height===0)){e.addToRenderList(i);var t=i.frame,s=t.width,u=t.height,n=Qv.getTintAppendFloatAlpha,a=m.pipelines.set(i.pipeline,i),o=a.setTexture2D(t.glTexture,i);m.pipelines.preBatch(i),a.batchTexture(i,t.glTexture,s,u,i.x,i.y,s/i.resolution,u/i.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,s,u,n(i.tintTopLeft,e.alpha*i._alphaTL),n(i.tintTopRight,e.alpha*i._alphaTR),n(i.tintBottomLeft,e.alpha*i._alphaBL),n(i.tintBottomRight,e.alpha*i._alphaBR),i.tintFill,0,0,e,v,!1,o),m.pipelines.postBatch(i)}},kv=function(m,i,e,v){i.dirty&&(i.updateTexture(),i.dirty=!1),!(i.width===0||i.height===0)&&(e.addToRenderList(i),m.batchSprite(i,i.frame,e,v))},qv={renderWebGL:jv,renderCanvas:kv};const _v=Phaser.Display.Color;var tc={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(m){return this.context.fillStyle=m,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(m,i){var e=this,v=new Image;return v.onload=function(){e.width!==v.width||e.height!==v.height?e.resize(v.width,v.height):e.clear(),e.context.drawImage(v,0,0),e.updateTexture(),i&&i(),v.onload=null,v.src="",v.remove()},v.src=m,this},loadFromURLPromise(m){var i=this;return new Promise(function(e,v){i.loadFromURL(m,e)})},getDataURL(m,i){return this.canvas.toDataURL(m,i)},getPixel(m,i,e){e===void 0&&(e=new _v);var v=this.context.getImageData(m,i,1,1);return e.setTo(v.data[0],v.data[1],v.data[2],v.data[3]),e},setPixel(m,i,e,v,t,s){if(typeof e!="number"){var u=e;e=u.red,v=u.green,t=u.blue,s=u.alpha}s===void 0&&(s=e!==0||v!==0||t!==0?255:0);var n=this.context.createImageData(1,1);return n.data[0]=e,n.data[1]=v,n.data[2]=t,n.data[3]=s,this.context.putImageData(n,m,i),this.dirty=!0,this}},Bu=function(m,i,e,v,t,s,u){var n=m.textures,a=m.renderer;v===void 0&&(v=0),t===void 0&&(t=0),s===void 0&&(s=i.width),u===void 0&&(u=i.height);var o;n.exists(e)?o=n.get(e):o=n.createCanvas(e,s,u);var r=o.getSourceImage();r.width!==s&&(r.width=s),r.height!==u&&(r.height=u);var h=r.getContext("2d");h.clearRect(0,0,s,u),h.drawImage(i,v,t,s,u),a.gl&&o&&a.canvasToTexture(r,o.source[0].glTexture,!0,0)},ec={updateTexture(m,i){m&&(i?m.call(i,this.canvas,this.context):m(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},generateTexture(m,i,e,v,t){var s=this.canvas;return v===void 0?v=s.width:v*=this.resolution,t===void 0?t=s.height:t*=this.resolution,Bu(this.scene,s,m,i,e,v,t),this},loadTexture(m,i){var e=this.scene.textures.getFrame(m,i);return e?(this.width!==e.cutWidth||this.height!==e.cutHeight?this.resize(e.cutWidth,e.cutHeight):this.clear(),this.context.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this):this}};const Xo=Phaser.Display.Canvas.CanvasPool,ic=Phaser.GameObjects.GameObject;class qe extends ic{constructor(i,e,v,t,s){e===void 0&&(e=0),v===void 0&&(v=0),t===void 0&&(t=1),s===void 0&&(s=1),super(i,"rexCanvas"),this.renderer=i.sys.game.renderer,this.resolution=1,this._width=t,this._height=s,t=Math.max(Math.ceil(t*this.resolution),1),s=Math.max(Math.ceil(s*this.resolution),1),this.canvas=Xo.create(this,t,s),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(e,v),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=i.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,i.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),Xo.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(i){this.setSize(i,this._height)}get height(){return this._height}set height(i){this.setSize(this._width,i)}setSize(i,e){return this._width===i&&this._height===e?this:(this._width=i,this._height=e,this.updateDisplayOrigin(),i=Math.max(Math.ceil(i*this.resolution),1),e=Math.max(Math.ceil(e*this.resolution),1),this.canvas.width=i,this.canvas.height=e,this.frame.setSize(i,e),this.dirty=!0,this)}get displayWidth(){return this.scaleX*this._width}set displayWidth(i){this.scaleX=i/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(i){this.scaleY=i/this._height}setDisplaySize(i,e){return this.displayWidth=i,this.displayHeight=e,this}getCanvas(i){return i||(this.dirty=!0),this.canvas}getContext(i){return i||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(i,e){return this.setSize(i,e),this}}const Kt=Phaser.GameObjects.Components;Phaser.Class.mixin(qe,[Kt.Alpha,Kt.BlendMode,Kt.Crop,Kt.Depth,Kt.Flip,Kt.GetBounds,Kt.Mask,Kt.Origin,Kt.Pipeline,Kt.ScrollFactor,Kt.Tint,Kt.Transform,Kt.Visible,qv,tc,ec]);const sc=Phaser.Utils.String.Pad;var lt=function(m,i,e){if(m==null)return m;switch(typeof m){case"string":return m;case"number":return`#${sc(Math.floor(m).toString(16),6,"0",1)}`;case"function":return m(i,e);case"object":return m.hasOwnProperty("r")?m.hasOwnProperty("a")?`rgba(${m.r},${m.g},${m.b},${m.a})`:`rgb(${m.r},${m.g},${m.b})`:m.hasOwnProperty("h")?m.hasOwnProperty("a")?`hsla(${m.h},${m.s},${m.l},${m.a})`:`hsl(${m.h},${m.s},${m.l})`:m;default:return m}};const Rn=Phaser.Math.DegToRad,Wo=Rn(0),Ho=Rn(90),$o=Rn(180),Jo=Rn(270);var Nu=function(m,i,e,v,t,s,u){var n=new Ou(i,e,v,t,s),a=n.minWidth,o=n.minHeight,r=v>=a?1:v/a,h=t>=o?1:t/o,d=n.cornerRadius,l,f,c,g,p;m.save(),m.beginPath(),m.translate(i,e),l=d.br,f=l.x*r,c=l.y*h,g=v-f,p=t-c,m.moveTo(v,p),f>0&&c>0?Fs(m,g,p,f,c,Wo,Ho,u):(m.lineTo(v,t),m.lineTo(g,t)),l=d.bl,f=l.x*r,c=l.y*h,g=f,p=t-c,m.lineTo(f,t),f>0&&c>0?Fs(m,g,p,f,c,Ho,$o,u):(m.lineTo(0,t),m.lineTo(0,p)),l=d.tl,f=l.x*r,c=l.y*h,g=f,p=c,m.lineTo(0,p),f>0&&c>0?Fs(m,g,p,f,c,$o,Jo,u):(m.lineTo(0,0),m.lineTo(g,0)),l=d.tr,f=l.x*r,c=l.y*h,g=v-f,p=c,m.lineTo(g,0),f>0&&c>0?Fs(m,g,p,f,c,Jo,Wo,u):(m.lineTo(v,0),m.lineTo(v,p)),m.closePath(),m.restore()},Fs=function(m,i,e,v,t,s,u,n){if(n==null)m.ellipse(i,e,v,t,0,s,u);else{n+=1;for(var a,o,r,h=(u-s)/n,d=0;d<=n;d++)r=s+h*d,a=i+v*Math.cos(r),o=e+t*Math.sin(r),m.lineTo(a,o)}},nc=function(m,i,e,v,t,s,u,n,a,o,r,h,d){if(Nu(i,e,v,t,s,u,d),n!=null){if(r!=null){var l;h?l=i.createLinearGradient(0,0,t,0):l=i.createLinearGradient(0,0,0,s),l.addColorStop(0,n),l.addColorStop(1,r),n=l}i.fillStyle=n,i.fill()}a!=null&&o>0&&(i.strokeStyle=a,i.lineWidth=o,i.stroke())},Ma=function(m,i,e,v,t,s,u,n){if(!(i==null&&e==null)){var a=m.canvas.width,o=m.canvas.height;e==null&&(v=0);var r=v/2;a-=v,o-=v,nc(m.canvas,m.context,r,r,a,o,t,i,e,v,s,u,n)}},rc=function(){Ma(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const Ko=Phaser.Utils.Objects.GetValue;class Gu extends qe{constructor(i,e,v,t,s,u,n,a,o,r,h){super(i,e,v,t,s),this.type="rexRoundRectangleCanvas";var d=Ko(u,"radius",u),l=Ko(u,"iteration",void 0);this.setRadius(d),this.setIteration(l),this.setFillStyle(n,r,h),this.setStrokeStyle(a,o)}get radius(){return this._radius}set radius(i){this.dirty|=this._radius!=i,this._radius=i}setRadius(i){return this.radius=i,this}get iteration(){return this._iteration}set iteration(i){this.dirty|=this._iteration!=i,this._iteration=i}setIteration(i){return this.iteration=i,this}get fillStyle(){return this._fillStyle}set fillStyle(i){i=lt(i,this.canvas,this.context),this.dirty|=this._fillStyle!=i,this._fillStyle=i}get fillColor2(){return this._fillColor2}set fillColor2(i){i=lt(i,this.canvas,this.context),this.dirty|=this._fillColor2!=i,this._fillColor2=i}get isHorizontalGradient(){return this._fillStyle}set isHorizontalGradient(i){this.dirty|=this._isHorizontalGradient!=i,this._isHorizontalGradient=i}setFillStyle(i,e,v){return v===void 0&&(v=!0),this.fillStyle=i,this.fillColor2=e,this.isHorizontalGradient=v,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(i){i=lt(i,this.canvas,this.context),this.dirty|=this._strokeStyle!=i,this._strokeStyle=i}get lineWidth(){return this._lineWidth}set lineWidth(i){this.dirty|=this._lineWidth!=i,this._lineWidth=i}setStrokeStyle(i,e){return this.strokeStyle=i,this.lineWidth=e,this}updateTexture(){return this.clear(),rc.call(this),super.updateTexture(),this}}et.register("roundRectangleCanvas",function(m,i,e,v,t,s,u,n,a,o){var r=new Gu(this.scene,m,i,e,v,t,s,u,n,a,o);return this.scene.add.existing(r),r});it(window,"RexPlugins.UI.RoundRectangleCanvas",Gu);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var ac=Phaser.Renderer.WebGL.Utils,oc=function(m,i,e,v){if(!(i.width===0||i.height===0)){e.addToRenderList(i);var t=i.frame,s=t.width,u=t.height,n=ac.getTintAppendFloatAlpha,a=m.pipelines.set(i.pipeline,i),o=a.setTexture2D(t.glTexture,i);m.pipelines.preBatch(i),a.batchTexture(i,t.glTexture,s,u,i.x,i.y,s/i.style.resolution,u/i.style.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,s,u,n(i.tintTopLeft,e.alpha*i._alphaTL),n(i.tintTopRight,e.alpha*i._alphaTR),n(i.tintBottomLeft,e.alpha*i._alphaBL),n(i.tintBottomRight,e.alpha*i._alphaBR),i.tintFill,0,0,e,v,!1,o),m.pipelines.postBatch(i)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var hc=function(m,i,e,v){i.width===0||i.height===0||(e.addToRenderList(i),m.batchSprite(i,i.frame,e,v))},lc={renderWebGL:oc,renderCanvas:hc};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const Is=Phaser.Display.Canvas.CanvasPool;var Zo=function(m){var i=Is.create(this),e=i.getContext("2d");m.syncFont(i,e);var v=e.measureText(m.testString);if("actualBoundingBoxAscent"in v){var t=v.actualBoundingBoxAscent,s=v.actualBoundingBoxDescent,o={ascent:t,descent:s,fontSize:t+s};return Is.remove(i),o}var u=Math.ceil(v.width*m.baselineX),n=u,a=2*n;n=n*m.baselineY|0,i.width=u,i.height=a,e.fillStyle="#f00",e.fillRect(0,0,u,a),e.font=m._font,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(m.testString,0,n);var o={ascent:0,descent:0,fontSize:0};if(!e.getImageData(0,0,u,a))return o.ascent=n,o.descent=n+6,o.fontSize=o.ascent+o.descent,Is.remove(i),o;var r=e.getImageData(0,0,u,a).data,h=r.length,d=u*4,l,f,c=0,g=!1;for(l=0;l<n;l++){for(f=0;f<d;f+=4)if(r[c+f]!==255){g=!0;break}if(!g)c+=d;else break}for(o.ascent=n-l,c=h-d,g=!1,l=a;l>n;l--){for(f=0;f<d;f+=4)if(r[c+f]!==255){g=!0;break}if(!g)c-=d;else break}return o.descent=l-n,o.fontSize=o.ascent+o.descent,Is.remove(i),o},Pt={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const uc=Phaser.Utils.Objects.GetAdvancedValue,Wt=Phaser.Utils.Objects.GetValue;var _n={backgroundColor:["backgroundColor",null,lt],backgroundColor2:["backgroundColor2",null,lt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,lt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",lt],stroke:["stroke","#fff",lt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",lt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",lt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};class Aa{constructor(i,e){this.parent=i,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(e,!1,!0);var v=Wt(e,"metrics",!1);v?this.metrics={ascent:Wt(v,"ascent",0),descent:Wt(v,"descent",0),fontSize:Wt(v,"fontSize",0)}:this.metrics=Zo(this)}get canvas(){return this.parent.canvasText.canvas}get context(){return this.parent.canvasText.context}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Pt.NO_WRAP&&this.wrapWidth===0}setStyle(i,e,v){if(e===void 0&&(e=!0),v===void 0&&(v=!1),i&&i.hasOwnProperty("wrap")){var t=i.wrap;if(t.hasOwnProperty("mode")){var s=t.mode;typeof s=="string"&&(t.mode=Qo[s])}else t.hasOwnProperty("width")&&(t.mode=1)}i&&i.rtl&&v&&!i.hasOwnProperty("halign")&&(i.halign="right"),i&&i.hasOwnProperty("fontSize")&&typeof i.fontSize=="number"&&(i.fontSize=i.fontSize.toString()+"px");for(var u in _n){var n=_n[u],a=n[0],o=v?n[1]:this[u],r=n[2];if(u==="wrapCallback"||u==="wrapCallbackScope")this[u]=Wt(i,a,o);else{var h=uc(i,a,o);r&&(h=r(h)),this[u]=h}}var d=Wt(i,"font",null);d===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=d;var l=Wt(i,"fill",null);l!==null&&(this.color=lt(l));var f=Wt(i,"images",void 0);return f&&this.parent.addImage(f),e?this.update(!0):this.parent}syncFont(i,e){e.font=this._font}syncStyle(i,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(i,e){e?(i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY,i.shadowColor=this.shadowColor,i.shadowBlur=this.shadowBlur):(i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowColor=0,i.shadowBlur=0)}update(i){return i&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=Zo(this)),this.parent.updateText(i)}buildFont(){var i=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return i!==this._font&&(this._font=i),this}setFont(i){return typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=Wt(i,"fontFamily","Courier"),this.fontSize=Wt(i,"fontSize","16px"),this.fontStyle=Wt(i,"fontStyle","")),this.update(!0)}setFontFamily(i){return this.fontFamily=i,this.update(!0)}setFontStyle(i){return this.fontStyle=i,this.update(!0)}setFontSize(i){return typeof i=="number"&&(i=i.toString()+"px"),this.fontSize=i,this.update(!0)}setTestString(i){return this.testString=i,this.update(!0)}setFixedSize(i,e){return this.fixedWidth=i,this.fixedHeight=e,i&&(this.parent.width=i),e&&(this.parent.height=e),this.update(this.isWrapFitMode)}setResolution(i){return this.resolution=i,this.update(!1)}setLineSpacing(i){return this.lineSpacing=i,this.update(!1)}setXOffset(i){return this.xOffset=i,this.update(!1)}setBackgroundColor(i,e,v){return v===void 0&&(v=!0),this.backgroundColor=lt(i,this.canvas,this.context),this.backgroundColor2=lt(e,this.canvas,this.context),this.backgroundHorizontalGradient=v,this.update(!1)}setBackgroundStrokeColor(i,e){return this.backgroundStrokeColor=lt(i,this.canvas,this.context),this.backgroundStrokeLineWidth=e,this.update(!1)}setBackgroundCornerRadius(i,e){return this.backgroundCornerRadius=i,this.backgroundCornerIteration=e,this.update(!1)}setFill(i){return this.color=lt(i,this.canvas,this.context),this.update(!1)}setColor(i){return this.color=lt(i,this.canvas,this.context),this.update(!1)}setStroke(i,e){return i===void 0?this.strokeThickness=0:(e===void 0&&(e=this.strokeThickness),this.stroke=lt(i,this.canvas,this.context),this.strokeThickness=e),this.update(!0)}setShadow(i,e,v,t,s,u){return i===void 0&&(i=0),e===void 0&&(e=0),v===void 0&&(v="#000"),t===void 0&&(t=0),s===void 0&&(s=!1),u===void 0&&(u=!0),this.shadowOffsetX=i,this.shadowOffsetY=e,this.shadowColor=lt(v,this.canvas,this.context),this.shadowBlur=t,this.shadowStroke=s,this.shadowFill=u,this.update(!1)}setShadowOffset(i,e){return i===void 0&&(i=0),e===void 0&&(e=i),this.shadowOffsetX=i,this.shadowOffsetY=e,this.update(!1)}setShadowColor(i){return i===void 0&&(i="#000"),this.shadowColor=lt(i,this.canvas,this.context),this.update(!1)}setShadowBlur(i){return i===void 0&&(i=0),this.shadowBlur=i,this.update(!1)}setShadowStroke(i){return this.shadowStroke=i,this.update(!1)}setShadowFill(i){return this.shadowFill=i,this.update(!1)}setUnderline(i,e,v){return i===void 0&&(i="#000"),e===void 0&&(e=0),v===void 0&&(v=0),this.underlineColor=lt(i,this.canvas,this.context),this.underlineThickness=e,this.underlineOffset=v,this.update(!1)}setUnderlineColor(i){return i===void 0&&(i="#000"),this.underlineColor=lt(i,this.canvas,this.context),this.update(!1)}setUnderlineThickness(i){return i===void 0&&(i=0),this.underlineThickness=i,this.update(!1)}setUnderlineOffset(i){return i===void 0&&(i=0),this.underlineOffset=i,this.update(!1)}setWrapMode(i){return typeof i=="string"&&(i=Qo[i.toLowerCase()]||0),this.wrapMode=i,this.update(!0)}setWrapWidth(i){return this.wrapWidth=i,this.update(!1)}setAlign(i,e){return i===void 0&&(i="left"),e===void 0&&(e="top"),this.halign=i,this.valign=e,this.update(!1)}setHAlign(i){return i===void 0&&(i="left"),this.halign=i,this.update(!1)}setVAlign(i){return i===void 0&&(i="top"),this.valign=i,this.update(!1)}setMaxLines(i){return i===void 0&&(i=0),this.maxLines=i,this.update(!1)}getTextMetrics(){var i=this.metrics;return{ascent:i.ascent,descent:i.descent,fontSize:i.fontSize}}setTextMetrics(i,e){return this.metrics.ascent=i.ascent,this.metrics.descent=i.descent,this.metrics.fontSize=i.fontSize,typeof e=="string"?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=Wt(e,"fontFamily",this.fontFamily),this.fontSize=Wt(e,"fontSize",this.fontSize),this.fontStyle=Wt(e,"fontStyle",this.fontStyle)),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var i={};for(var e in _n)i[e]=this[e];return i.metrics=this.getTextMetrics(),i}destroy(){this.parent=void 0}}const Qo={none:Pt.NO_WRAP,word:Pt.WORD_WRAP,char:Pt.CHAR_WRAP,character:Pt.CHAR_WRAP},tr=Phaser.Display.Canvas.CanvasPool;var fc=function(m,i,e){e===void 0&&(e={});var v=tr.create(this),t=v.getContext("2d");m.syncFont(v,t);var s=t.measureText(i),u=Math.ceil(s.width*m.baselineX),n=u,a=2*n;if(n=n*m.baselineY|0,v.width=u,v.height=a,t.fillStyle="#f00",t.fillRect(0,0,u,a),t.font=m._font,t.textBaseline="alphabetic",t.fillStyle="#000",t.fillText(m.testString,0,n),e.left=0,u===0||a===0||!t.getImageData(0,0,u,a))return tr.remove(v),e;for(var o=t.getImageData(0,0,u,a).data,r=!1,h=0;h<u;h++){for(var d=0;d<a;d++){var l=(d*u+h)*4;if(o[l]!==255){e.left=h,r=!0;break}}if(r)break}return tr.remove(v),e},dc={draw(m,i,e,v){var t=this.penManager;this.hitAreaManager.clear();var s=this.context;s.save();var u=this.defaultStyle;this.clear(),Ma(this,u.backgroundColor,u.backgroundStrokeColor,u.backgroundStrokeLineWidth,u.backgroundCornerRadius,u.backgroundColor2,u.backgroundHorizontalGradient,u.backgroundCornerIteration),m+=this.startXOffset,i+=this.startYOffset;var n=u.halign,a=u.valign,o,r=u.lineHeight,h=t.lines,d=h.length,l=u.maxLines,f,c,g;l>0&&d>l?(f=l,a==="center"?c=Math.floor((d-f)/2):a==="bottom"?c=d-f:c=0):(f=d,c=0),g=c+f;var p,x,y=this.rtl,T=y?this.parent.width:void 0;a==="center"?x=Math.max((v-f*r)/2,0):a==="bottom"?x=Math.max(v-f*r-2,0):x=0,x+=i;for(var E=c;E<g;E++)if(o=t.getLineWidth(E),o!==0){for(var S=h[E],C=S.length,P=n,R=0;R<C;R++){var A=S[R].prop.align;if(A){P=A;break}}P==="center"?p=(e-o)/2:P==="right"?p=y?0:e-o:p=y?e-o:0,p+=m;for(var R=0;R<C;R++)this.drawPen(S[R],p,x,T)}s.restore()},drawPen(m,i,e,v){i+=m.x,e+=m.y+(m.prop.y||0),v!==void 0&&(i=v-i);var t=this.canvas,s=this.context;s.save();var u=this.parser.propToContextStyle(this.defaultStyle,m.prop);u.buildFont(),u.syncFont(t,s),u.syncStyle(t,s),u.underlineThickness>0&&m.width>0&&this.drawUnderline(i,e,m.width,u),m.isTextPen&&this.drawText(i,e,m.text,u),m.isImagePen&&this.drawImage(i,e,m.prop.img,u),s.restore(),m.hasAreaMarker&&m.width>0&&this.hitAreaManager.add(m.prop.area,i,e-this.startYOffset,m.width,this.defaultStyle.lineHeight)},clear(){var m=this.canvas;this.context.clearRect(0,0,m.width,m.height)},drawUnderline(m,i,e,v){i+=v.underlineOffset-v.underlineThickness/2,this.autoRound&&(m=Math.round(m),i=Math.round(i));var t=this.context,s=t.lineCap;t.lineCap="butt",t.strokeStyle=v.underlineColor,t.lineWidth=v.underlineThickness,t.beginPath(),t.moveTo(m,i),t.lineTo(m+e,i),t.stroke(),t.lineCap=s},drawText(m,i,e,v){this.autoRound&&(m=Math.round(m),i=Math.round(i));var t=this.context;v.stroke&&v.stroke!=="none"&&v.strokeThickness>0&&(v.syncShadow(t,v.shadowStroke),t.strokeText(e,m,i)),v.color&&v.color!=="none"&&(v.syncShadow(t,v.shadowFill),t.fillText(e,m,i))},drawImage(m,i,e,v){i-=this.startYOffset,this.parent.imageManager.draw(e,this.context,m,i,this.autoRound)}};class _e{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(i){return this.items.push(i),this}pushMultiple(i){return this.items.push.apply(this.items,i),i.length=0,this}clear(){return this.items.length=0,this}}const si=Phaser.Utils.Objects.GetValue,vc=Pt.NO_NEWLINE,jo=Pt.RAW_NEWLINE;class cc{constructor(i){this.prop={},this.resetFromJSON(i)}resetFromJSON(i){this.text=si(i,"text",""),this.x=si(i,"x",0),this.y=si(i,"y",0),this.width=si(i,"width",0);var e=si(i,"prop",null);e===null&&(e={}),this.prop=e,this.newLineMode=si(i,"newLineMode",0),this.startIndex=si(i,"startIndex",0)}get plainText(){var i=this.text;return this.newLineMode===jo&&(i+=`
`),i}get wrapText(){var i=this.text;return this.newLineMode!==vc&&(i+=`
`),i}get rawTextLength(){var i=this.text.length;return this.newLineMode===jo&&(i+=1),i}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}var Vi=function(m){if(Array.isArray(m))m.length=0;else for(var i in m)delete m[i]},ci=function(m,i){var e=Array.isArray(m);if(i===void 0?i=e?[]:{}:Vi(i),e){i.length=m.length;for(var v=0,t=m.length;v<t;v++)i[v]=m[v]}else for(var s in m)i[s]=m[s];return i},ne=function(){};const ws=Phaser.Utils.Objects.GetFastValue,ko=Pt.NO_NEWLINE,pc=Pt.WRAPPED_NEWLINE;var gc=new _e,mc=new _e;class Oa{constructor(i){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=ws(i,"pensPool",gc),this.LinesPool=ws(i,"linesPool",mc),this.tagToText=ws(i,"tagToText",ne),this.tagToTextScope=ws(i,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var i=0,e=this.lines.length;i<e;i++)this.lines[i].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(i,e,v,t,s,u){var n=this.PensPool.pop();return n==null&&(n=new cc),ni.text=i,ni.x=e,ni.y=v,ni.width=t,ni.prop=s,ni.newLineMode=u,n.resetFromJSON(ni),this.addPen(n),this}addImagePen(i,e,v,t){return this.addTextPen("",i,e,v,t,ko),this}addNewLinePen(){var i=this.lastPen,e=i?i.lastX:0,v=i?i.y:0,t=i?ci(i.prop):null;return this.addTextPen("",e,v,0,t,pc),this}addPen(i){var e=this.lastPen;e==null?i.startIndex=0:i.startIndex=e.endIndex,this.pens.push(i);var v=this.lastLine;v==null&&(v=this.LinesPool.pop()||[],this.lines.push(v)),v.push(i),i.newLineMode!==ko&&(v=this.LinesPool.pop()||[],this.lines.push(v)),this.maxLinesWidth=void 0}clone(i){i==null&&(i=new Oa),i.clear();for(var e=0,v=this.lines.length;e<v;e++)for(var t=this.lines[e],s=0,u=t.length;s<u;s++){var n=t[s];i.addPen(n.text,n.x,n.y,n.width,ci(n.prop),n.newLineMode)}return i}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(i){if(i>=this.lines.length)return this.getLineEndIndex(i);var e=this.lines[i];return e&&e[0]?e[0].startIndex:0}getLineEndIndex(i){i>=this.lines.length&&(i=this.lines.length-1);var e,v=!1,t;for(e=i;e>=0&&(t=this.lines[e],v=t!=null&&t.length>0,!v);e--);if(!v)return 0;var s=t[t.length-1];return s.endIndex}getLineWidth(i){var e=this.lines[i];if(!e)return 0;var v=e[e.length-1];if(v==null)return 0;var t=v.lastX;return t}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var i,e=0,v=0,t=this.lines.length;v<t;v++)i=this.getLineWidth(v),i>e&&(e=i);return this.maxLinesWidth=e,e}getLineWidths(){for(var i=[],e=0,v=this.lines.length;e<v;e++)i.push(this.getLineWidth(e));return i}get linesCount(){return this.lines.length}get plainText(){for(var i="",e=this.pens,v=0,t=e.length;v<t;v++)i+=e[v].plainText;return i}get rawTextLength(){for(var i=0,e=this.pens,v=0,t=this.pens.length;v<t;v++)i+=e[v].rawTextLength;return i}getSliceTagText(i,e,v){if(i===void 0&&(i=0),e===void 0){var t=this.lastPen;if(t==null)return"";e=t.endIndex}v===void 0&&(v=!1);for(var s="",u,n,a,o,r,h,d,l=0,f=this.pens.length;l<f&&(u=this.pens[l],o=u.endIndex,!(!(o<=i)&&(u=this.pens[l],n=v?u.wrapText:u.plainText,h=u.prop,a=u.startIndex,r=a>=i&&o<=e,r||(n=n.substring(i-a,e-a)),this.tagToTextScope?s+=this.tagToText.call(this.tagToTextScope,n,h,d):s+=this.tagToText(n,h,d),d=h,o>=e)));l++);return s}get length(){return this.lines.length}set length(i){this.clear()}}var ni={};const xc=Phaser.Geom.Rectangle;var qo=new _e;class yc{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return qo.pushMultiple(this.hitAreas),this}add(i,e,v,t,s){var u=qo.pop();return u===null?u=new xc(e,v,t,s):u.setTo(e,v,t,s),u.key=i,this.hitAreas.push(u),this}getFirst(i,e){for(var v=0,t=this.hitAreas.length;v<t;v++){var s=this.hitAreas[v];if(s.contains(i,e))return s}return null}drawBounds(i,e,v){e===void 0&&(e=16777215),v&&i.save().scaleCanvas(v.scaleX,v.scaleY).rotateCanvas(v.rotation).translateCanvas(v.x,v.y);for(var t=0,s=this.hitAreas.length;t<s;t++){var u=this.hitAreas[t];i.lineStyle(1,e).strokeRect(u.x,u.y,u.width,u.height)}return v&&i.restore(),this}}var Tc=function(){this.parent.on("pointerdown",Ec,this).on("pointerup",Sc,this).on("pointermove",er,this).on("pointerover",er,this).on("pointerout",function(m,i){er.call(this,m,null,null,i)},this)},Ec=function(m,i,e,v){var t=this.hitAreaManager.getFirst(i,e);t!==null&&as.call(this,"areadown",t.key,m,i,e)},Sc=function(m,i,e,v){var t=this.hitAreaManager.getFirst(i,e);t!==null&&as.call(this,"areaup",t.key,m,i,e)},er=function(m,i,e,v){if(i===null){this.lastHitAreaKey!==null&&as.call(this,"areaout",this.lastHitAreaKey,m),this.lastHitAreaKey=null;return}var t=this.hitAreaManager.getFirst(i,e),s=t?t.key:null;this.lastHitAreaKey!==s&&(this.lastHitAreaKey!==null&&as.call(this,"areaout",this.lastHitAreaKey,m),s!==null&&as.call(this,"areaover",s,m,i,e),this.lastHitAreaKey=s)},as=function(m,i,e,v,t){this.parent.emit(`${m}-${i}`,e,v,t),this.parent.emit(m,i,e,v,t)},La=new _e,Cc=function(m){!m||La.push(m)},Pc=function(m){!m||La.pushMultiple(m)},vi=function(m,i,e){var v=La.pop();return v===null&&(v={}),v.text=m,v.width=i,v.newLineMode=e,v};const Rc=Pt.NO_NEWLINE,Mc=Pt.RAW_NEWLINE,ir=Pt.WRAPPED_NEWLINE,_o=Pt.NO_WRAP,Ac=Pt.WORD_WRAP,Oc=Pt.CHAR_WRAP,Lc=Pt.SPLITREGEXP;var Vu=function(m,i,e,v,t){v<=0&&(e=_o);var s=[];if(!m||!m.length)return s;for(var u=e===_o,n=e===Ac,a=m.split(Lc),o,r,h,d=0,l=a.length;d<l;d++){if(o=a[d],h=d===l-1?Rc:Mc,u){var f=i(o);s.push(vi(o,f,h));continue}if(r=d===0?v-t:v,o.length<=100){var f=i(o);if(f<=r){s.push(vi(o,f,h));continue}}var c,g;n?(c=o.split(" "),g=c[c.length-1]==="",g&&(c.length-=1)):c=o;for(var p,x,y,T="",E=0,S,C=n?i(" "):void 0,P=0,R=c.length;P<R;P++){if(p=c[P],x=i(p),y=P===R-1,n&&(!y||g)&&(p+=" ",x+=C),n&&x>v){T!==""?s.push(vi(T,E,ir)):P===0&&t>0&&s.push(vi("",0,ir)),s.push(...Vu(p,i,Oc,v,0));var A=s.pop();T=A.text,E=A.width,Cc(A),T===" "&&(T="",E=0);continue}S=E+x,S>r?(s.push(vi(T,E,ir)),T=p,E=x,r=v):(T+=p,E=S),y&&s.push(vi(T,E,h))}}return s};const Ds=Phaser.Utils.Objects.GetValue,Fc=Pt.NO_WRAP,Ic=Pt.NO_NEWLINE;class bu{constructor(i){this.parent=i.parent,this.context=Ds(i,"context",null),this.canvas=this.context.canvas,this.parser=Ds(i,"parser",null),this.defaultStyle=Ds(i,"style",null),this.autoRound=!0,this.pensPool=Ds(i,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new yc,this.lastHitAreaKey=null;var e=this.context;this.getTextWidth=function(v){return e.measureText(v).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(i,e,v,t,s){if(s===void 0&&(s=this.penManager),s.clear(),i==="")return s;var u=this.parent.style;if(u.isWrapFitMode){var n=this.parent.padding;v=u.fixedWidth-n.left-n.right}for(var a=this.canvas,o=this.context,r=function(I){return o.measureText(I).width},h=0,d=0,l=u.wrapCallback,f=u.wrapCallbackScope,c=!0,g,p,x,y=this.parser.splitText(i),T,E,S=0,C=y.length;S<C;S++)if(T=this.parser.tagTextToProp(y[S],p),g=T.plainText,p=T.prop,p.img){var P=this.imageManager.getOuterWidth(p.img);v>0&&e!==Fc&&v<h+P&&(s.addNewLinePen(),d+=t,h=0),s.addImagePen(h,d,P,ci(p)),h+=P}else if(g!==""){if(o.save(),x=this.parser.propToContextStyle(this.defaultStyle,p),x.buildFont(),x.syncFont(a,o),x.syncStyle(a,o),!l)E=Vu(g,r,e,v,h);else{E=l.call(f,g,r,v,h),typeof E=="string"&&(E=E.split(`
`));for(var M,R=0,A=E.length;R<A;R++)M=E[R],typeof M=="string"?E[R]=vi(M,r(M),R<A-1?2:0):c=!1}for(var M,R=0,A=E.length;R<A;R++)M=E[R],s.addTextPen(M.text,h,d,M.width,ci(p),M.newLineMode),M.newLineMode!==Ic?(h=0,d+=t):h+=M.width;c&&Pc(E),E=null,o.restore()}for(var S=0,C=this.lines.length;S<C;S++){var O=this.lines[S],F=O[O.length-1];F&&(F.width+=this.parser.getStrokeThinkness(this.defaultStyle,F.prop))}return s}get startXOffset(){var i=this.defaultStyle;return i.strokeThickness/2+i.xOffset}get startYOffset(){var i=this.defaultStyle;return i.strokeThickness/2+i.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var i=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&i>e&&(i=e),i}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var i=this.desplayLinesCount,e=this.defaultStyle.lineHeight*i;return i>0&&(e-=this.defaultStyle.lineSpacing),e}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new Oa({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(i,e,v){var t;if(i==null)t=this.penManager.plainText;else{var s=this.parser.splitText(i,1);t="";for(var u=0,n=s.length;u<n;u++)t+=s[u]}return(e!=null||v!=null)&&(e==null&&(e=0),v==null&&(v=t.length),t=t.substring(e,v)),t}getPenManager(i,e){if(i===void 0)return this.copyPenManager(e,this.penManager);e===void 0&&(e=this.newPenManager());var v=this.defaultStyle;return this.updatePenManager(i,v.wrapMode,v.wrapWidth,v.lineHeight,e),e}getText(i,e,v,t){if(i==null)return this.penManager.getSliceTagText(e,v,t);var s=this.tmpPenManager,u=this.defaultStyle;return this.updatePenManager(i,u.wrapMode,u.wrapWidth,u.lineHeight,s),s.getSliceTagText(e,v,t)}copyPenManager(i,e){return e===void 0&&(e=this.penManager),e.copy(i)}getTextWidth(i){return i===void 0&&(i=this.penManager),i.getMaxLineWidth()}getLastPen(i){return i===void 0&&(i=this.penManager),i.lastPen}}var wc={setInteractive:Tc};Object.assign(bu.prototype,dc,wc);const sr=Phaser.Utils.Objects.GetValue;var nr=function(m,i){i===void 0&&(i={key:m}),i.hasOwnProperty("key")||(i.key=m);var e=i.key,v=i.frame,t=i.width,s=i.height;if(t===void 0||s===void 0){var u=this.textureManager.getFrame(e,v),n=u?u.cutWidth:0,a=u?u.cutHeight:0;t===void 0&&s===void 0?(t=n,s=a):t===void 0?t=n*(s/a):s===void 0&&(s=a*(t/n))}this.images[m]={key:e,frame:v,width:t,height:s,y:sr(i,"y",0),left:sr(i,"left",0),right:sr(i,"right",0)}},Dc=function(m,i,e,v,t){var s=this.get(m);e+=s.left,v+=s.y,t&&(e=Math.round(e),v=Math.round(v));var u=this.textureManager.getFrame(s.key,s.frame);i.drawImage(u.source.image,u.cutX,u.cutY,u.cutWidth,u.cutHeight,e,v,s.width,s.height)};class Fa{constructor(i){this.textureManager=i.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(i,e){if(typeof i=="string")nr.call(this,i,e);else if(Array.isArray(i))for(var v=i,t=0,s=v.length;t<s;t++)nr.call(this,v[t]);else{var v=i;for(var i in v)nr.call(this,i,v[i])}return this}has(i){return this.images.hasOwnProperty(i)}remove(i){return this.has(i)&&delete this.images[i],this}get(i){return this.has(i)||this.textureManager.exists(i)&&this.add(i),this.images[i]}getOuterWidth(i){var e=this.get(i);return e?e.width+e.left+e.right:0}getFrame(i){var e=this.get(i);return e?this.textureManager.getFrame(e.key,e.frame):void 0}hasTexture(i){return!!this.getFrame(i)}}var Bc={draw:Dc};Object.assign(Fa.prototype,Bc);const Nc=Phaser.Utils.Objects.IsPlainObject,Gc=Phaser.DOM.AddToDOM,th=Phaser.Display.Canvas.CanvasPool,eh=Phaser.GameObjects.GameObject,pe=Phaser.Utils.Objects.GetValue,Vc=Phaser.DOM.RemoveFromDOM,bc=Pt.SPLITREGEXP;var rr={};class Ia extends eh{constructor(i,e,v,t,s,u,n){if(Nc(e)){var a=e;e=pe(a,"x",0),v=pe(a,"y",0),t=pe(a,"text",""),s=pe(a,"style","")}if(e===void 0&&(e=0),v===void 0&&(v=0),super(i,u),this.renderer=i.sys.game.renderer,this.setPosition(e,v),this.setOrigin(0,0),this.initPipeline(),this.canvas=th.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,s){if(s.hasOwnProperty("align")){var o=s.align;delete s.align,s.halign=o}s.hasOwnProperty("stroke")&&!s.hasOwnProperty("strokeThickness")&&(s.strokeThickness=1)}this.style=new Aa(this,s),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=i.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),rr.hasOwnProperty(u)||(rr[u]=new _e),this.canvasText=new bu({parent:this,context:this.context,parser:n,style:this.style,pensPool:rr[u]}),this.parser=n,this.initRTL(),s&&s.padding&&this.setPadding(s.padding),this.setText(t),i.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&Vc(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),th.remove(this.canvas),this.texture.destroy()}set text(i){this.setText(i)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",Gc(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(i){return i==null&&(i=""),Array.isArray(i)&&(i=i.join(`
`)),i!==this._text&&(this._text=i.toString(),this.updateText()),this}appendText(i){return i==null?this:(Array.isArray(i)&&(i=i.join(`
`)),this.setText(this.text+i.toString()),this)}setStyle(i){return this.style.setStyle(i)}setFont(i){return this.style.setFont(i)}setFontFamily(i){return this.style.setFontFamily(i)}setFontSize(i){return this.style.setFontSize(i)}setFontStyle(i){return this.style.setFontStyle(i)}setTestString(i){return this.style.setTestString(i)}setFixedSize(i,e){return this.style.setFixedSize(i,e)}setBackgroundColor(i,e,v){return this.style.setBackgroundColor(i,e,v)}setBackgroundStrokeColor(i,e){return this.style.setBackgroundStrokeColor(i,e)}setBackgroundCornerRadius(i,e){return this.style.setBackgroundCornerRadius(i,e)}setFill(i){return this.style.setFill(i)}setColor(i){return this.style.setColor(i)}setStroke(i,e){return this.style.setStroke(i,e)}setShadow(i,e,v,t,s,u){return this.style.setShadow(i,e,v,t,s,u)}setShadowOffset(i,e){return this.style.setShadowOffset(i,e)}setShadowColor(i){return this.style.setShadowColor(i)}setShadowBlur(i){return this.style.setShadowBlur(i)}setShadowStroke(i){return this.style.setShadowStroke(i)}setShadowFill(i){return this.style.setShadowFill(i)}setWrapMode(i){return this.style.setWrapMode(i)}setWrapWidth(i){return this.style.setWrapWidth(i)}setWordWrapWidth(i){return this.style.setWrapWidth(i)}setAlign(i){return this.style.setHAlign(i)}setHAlign(i){return this.style.setHAlign(i)}setVAlign(i){return this.style.setVAlign(i)}setLineSpacing(i){return this.style.setLineSpacing(i)}setXOffset(i){return this.style.setXOffset(i)}setPadding(i,e,v,t){if(typeof i=="object"){var s=i,u=pe(s,"x",null);u!==null?(i=u,v=u):(i=pe(s,"left",0),v=pe(s,"right",i));var n=pe(s,"y",null);n!==null?(e=n,t=n):(e=pe(s,"top",0),t=pe(s,"bottom",e))}else i===void 0&&(i=0),e===void 0&&(e=i),v===void 0&&(v=i),t===void 0&&(t=e);return this.padding.left=i,this.padding.top=e,this.padding.right=v,this.padding.bottom=t,this.updateText(!1)}setMaxLines(i){return this.style.setMaxLines(i)}setResolution(i){return this.style.setResolution(i)}updateText(i){i===void 0&&(i=!0);var e=this.canvasText,v=this.style;i&&e.updatePenManager(this._text,v.wrapMode,v.wrapWidth,v.lineHeight);var t=this.padding,s,u,n=Math.ceil(e.linesWidth);v.fixedWidth===0?(this.width=n+t.left+t.right,s=n):(this.width=v.fixedWidth,s=this.width-t.left-t.right,s<n&&(s=n)),v.fixedHeight===0?(this.height=e.linesHeight+t.top+t.bottom,u=e.linesHeight):(this.height=v.fixedHeight,u=this.height-t.top-t.bottom,u<e.linesHeight&&(u=e.linesHeight));var a=this.width,o=this.height;this.updateDisplayOrigin();var r=v.resolution;a*=r,o*=r,a=Math.max(Math.ceil(a),1),o=Math.max(Math.ceil(o),1);var h=this.canvas,d=this.context;h.width!==a||h.height!==o?(h.width=a,h.height=o,this.frame.setSize(a,o)):d.clearRect(0,0,a,o),d.save(),d.scale(r,r);var l=this.style.rtl?t.right:t.left,f=t.top;e.draw(l,f,s,u),d.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(h,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=this.width,c.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(i,e){return this.style.setTextMetrics(i,e)}toJSON(){var i=Vt.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return i.data=e,i}setInteractive(i,e,v){var t=!!this.input;return eh.prototype.setInteractive.call(this,i,e,v),t||this.canvasText.setInteractive(),this}getWrappedText(i,e,v){return i=this.canvasText.getText(i,e,v,!0),i.split(bc)}getPlainText(i,e,v){return this.canvasText.getPlainText(i,e,v)}getText(i,e,v,t){return t===void 0&&(t=!1),this.canvasText.getText(i,e,v,t)}getSubString(i,e,v){return this.getText(i,e,v)}copyPenManager(i){return this.canvasText.copyPenManager(i)}getPenManager(i,e){return this.canvasText.getPenManager(i,e)}setSize(i,e){return this.setFixedSize(i,e)}resize(i,e){return this.setFixedSize(i,e)}set lineSpacing(i){this.setLineSpacing(i)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return this._imageManager||(this._imageManager=new Fa(this.scene)),this._imageManager}addImage(i,e){return this.imageManager.add(i,e),this}drawAreaBounds(i,e){return this.canvasText.hitAreaManager.drawBounds(i,e,this),this}measureTextMargins(i,e){return fc(this.style,i,e)}generateTexture(i,e,v,t,s){var u=this.canvas;return t===void 0?t=u.width:t*=this.resolution,s===void 0?s=u.height:s*=this.resolution,Bu(this.scene,u,i,e,v,t,s),this}}const Vt=Phaser.GameObjects.Components;Phaser.Class.mixin(Ia,[Vt.Alpha,Vt.BlendMode,Vt.ComputedSize,Vt.Crop,Vt.Depth,Vt.Flip,Vt.GetBounds,Vt.Mask,Vt.Origin,Vt.Pipeline,Vt.ScrollFactor,Vt.Tint,Vt.Transform,Vt.Visible,lc]);var bt=function(m,i){return i===void 0?`\\[${m}\\]`:`\\[${m}=(${i})\\]`},kt=function(m){return`\\[/${m}\\]`};const zu="[-.0-9]+",wa="[a-z]+|#[0-9abcdef]+",Da="[^\\]]+",Uu="esc",Yu=bt(Uu),Xu=kt(Uu),Wu="raw",Hu=bt(Wu),$u=kt(Wu),Ju="b",Ku=bt(Ju),Zu=kt(Ju),Qu="i",ju=bt(Qu),ku=kt(Qu),qu="size",_u=bt(qu,zu),tf=kt(qu),ef="color",sf=bt(ef,wa),nf=kt(ef),Ba="u",rf=bt(Ba),af=bt(Ba,wa),of=kt(Ba),hf="shadow",lf=bt(hf),uf=kt(hf),Na="stroke",ff=bt(Na),df=bt(Na,wa),vf=kt(Na),cf="y",pf=bt(cf,zu),gf=kt(cf),mf="img",xf=bt(mf,Da),yf=kt(mf),Tf="area",Ef=bt(Tf,Da),Sf=kt(Tf),Cf="align",Pf=bt(Cf,Da),Rf=kt(Cf),Mf=new RegExp(Yu,"i"),ia=new RegExp(Xu,"i"),Af=new RegExp(Hu,"i"),sa=new RegExp($u,"i"),zc=new RegExp(Ku,"i"),Uc=new RegExp(Zu,"i"),Yc=new RegExp(ju,"i"),Xc=new RegExp(ku,"i"),ih=new RegExp(_u,"i"),Wc=new RegExp(tf,"i"),sh=new RegExp(sf,"i"),Hc=new RegExp(nf,"i"),$c=new RegExp(rf,"i"),nh=new RegExp(af,"i"),Jc=new RegExp(of,"i"),Kc=new RegExp(lf,"i"),Zc=new RegExp(uf,"i"),Qc=new RegExp(ff,"i"),rh=new RegExp(df,"i"),jc=new RegExp(vf,"i"),ah=new RegExp(pf,"i"),kc=new RegExp(gf,"i"),oh=new RegExp(xf,"i"),qc=new RegExp(yf,"i"),hh=new RegExp(Ef,"i"),_c=new RegExp(Sf,"i"),lh=new RegExp(Pf,"i"),tp=new RegExp(Rf,"i"),ar=new RegExp([Hu,$u,Yu,Xu,Ku,Zu,ju,ku,_u,tf,sf,nf,rf,af,of,lf,uf,ff,df,vf,pf,gf,xf,yf,Ef,Sf,Pf,Rf].join("|"),"ig");var ep=function(m,i){for(var e=[],v=0,t=!1,s=!1;;){var u=ar.exec(m);if(!u)break;var n=u[0];if(s)if(ia.test(n))s=!1;else continue;else if(t)if(sa.test(n))t=!1;else continue;else Mf.test(n)?s=!0:Af.test(n)&&(t=!0);var a=ar.lastIndex-n.length;if(v<a){var o=m.substring(v,a);e.push(o)}i===void 0&&e.push(n),v=ar.lastIndex}var r=m.length;return v<r&&e.push(m.substring(v,r)),e};const Lt=!1,wt=!0;var ip={plainText:null,prevProp:null},sp=function(m,i){i==null&&(i={});var e="";if(i.img&&dt(i,Lt,"img"),i.esc)ia.test(m)?dt(i,Lt,"esc"):e=m;else if(i.raw)sa.test(m)?dt(i,Lt,"raw"):e=m;else if(Mf.test(m))dt(i,wt,"esc",!0);else if(ia.test(m))dt(i,Lt,"esc");else if(Af.test(m))dt(i,wt,"raw",!0);else if(sa.test(m))dt(i,Lt,"raw");else if(zc.test(m))dt(i,wt,"b",!0);else if(Uc.test(m))dt(i,Lt,"b");else if(Yc.test(m))dt(i,wt,"i",!0);else if(Xc.test(m))dt(i,Lt,"i");else if(ih.test(m)){var v=m.match(ih);dt(i,wt,"size",`${v[1]}px`)}else if(Wc.test(m))dt(i,Lt,"size");else if(sh.test(m)){var v=m.match(sh);dt(i,wt,"color",v[1])}else if(Hc.test(m))dt(i,Lt,"color");else if($c.test(m))dt(i,wt,"u",!0);else if(nh.test(m)){var v=m.match(nh);dt(i,wt,"u",v[1])}else if(Jc.test(m))dt(i,Lt,"u");else if(Kc.test(m))dt(i,wt,"shadow",!0);else if(Zc.test(m))dt(i,Lt,"shadow");else if(Qc.test(m))dt(i,wt,"stroke",!0);else if(rh.test(m)){var v=m.match(rh);dt(i,wt,"stroke",v[1])}else if(jc.test(m))dt(i,Lt,"stroke");else if(ah.test(m)){var v=m.match(ah);dt(i,wt,"y",parseFloat(v[1]))}else if(kc.test(m))dt(i,Lt,"y");else if(oh.test(m)){var v=m.match(oh);dt(i,wt,"img",v[1])}else if(qc.test(m))dt(i,Lt,"img");else if(hh.test(m)){var v=m.match(hh);dt(i,wt,"area",v[1])}else if(_c.test(m))dt(i,Lt,"area");else if(lh.test(m)){var v=m.match(lh);dt(i,wt,"align",v[1])}else tp.test(m)?dt(i,Lt,"align"):e=m;var t=ip;return t.plainText=e,t.prop=i,t},dt=function(m,i,e,v){return i===wt?m[e]=v:m.hasOwnProperty(e)&&delete m[e],m},np=function(m,i){var e=ap;if(i.hasOwnProperty("img"))e.image=i.img;else{if(e.image=null,i.hasOwnProperty("family")?e.fontFamily=i.family:e.fontFamily=m.fontFamily,i.hasOwnProperty("size")){var v=i.size;typeof v=="number"&&(v=`${v}px`),e.fontSize=v}else e.fontSize=m.fontSize;e.fontStyle=rp(i.b,i.i),i.hasOwnProperty("color")?e.color=i.color:e.color=m.color,i.hasOwnProperty("stroke")?i.stroke===!0?(e.stroke=m.stroke,e.strokeThickness=m.strokeThickness):(e.stroke=i.stroke,e.strokeThickness=m.strokeThickness):(e.stroke=m.stroke,e.strokeThickness=0)}return i.hasOwnProperty("shadow")?i.shadow===!0?(e.shadowColor=m.shadowColor,e.shadowOffsetX=m.shadowOffsetX,e.shadowOffsetY=m.shadowOffsetY,e.shadowBlur=m.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor=i.shadow,e.shadowOffsetX=m.shadowOffsetX,e.shadowOffsetY=m.shadowOffsetY,e.shadowBlur=m.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowStroke=!1,e.shadowFill=!1),i.hasOwnProperty("u")?i.u===!0?(e.underlineColor=m.underlineColor,e.underlineThickness=m.underlineThickness,e.underlineOffset=m.underlineOffset):(e.underlineColor=i.u,e.underlineThickness=m.underlineThickness,e.underlineOffset=m.underlineOffset):(e.underlineColor="#000",e.underlineThickness=0,e.underlineOffset=0),e},rp=function(m,i){return m&&i?"bold italic":m?"bold":i?"italic":""},ap=new Aa,op=function(m,i,e){e==null&&(e=hp);var v=[];for(var t in e)i.hasOwnProperty(t)||v.push(`[/${t}]`);for(var t in i){var s=i[t];if(e[t]!==s)switch(t){case"size":v.push(`[size=${s.replace("px","")}]`);break;case"color":case"stroke":case"y":case"img":case"area":case"align":v.push(`[${t}=${s}]`);break;case"u":s===!0?v.push("[u]"):v.push(`[u=${s}]`);break;default:v.push(`[${t}]`);break}}return v.push(m),v.join("")},hp={};class Of{getStrokeThinkness(i,e){var v;return e.hasOwnProperty("stroke")?v=i.strokeThickness:v=0,v}}var lp={splitText:ep,tagTextToProp:sp,propToContextStyle:np,propToTagText:op};Object.assign(Of.prototype,lp);class Lf extends Ia{constructor(i,e,v,t,s){var u=new Of(s);super(i,e,v,t,s,"rexBBCodeText",u)}}et.register("BBCodeText",function(m,i,e,v){var t=new Lf(this.scene,m,i,e,v);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.BBCodeText",Lf);var up={plainText:null,prevProp:null},fp=new Aa;class dp{constructor(i){i===void 0&&(i={}),this.tags=i}addTag(i,e){this.tags[i]=e}getTag(i){return this.tags[i]}splitText(i,e){for(var v=[],t=0;;){var s=or.exec(i);if(!s)break;var u=s[0],n=or.lastIndex-u.length;if(t<n&&v.push(i.substring(t,n)),e===void 0)v.push(u);else if(e===1){if(fh.test(u)){var a=u.match(dh);v.push(a[2])}else if(vh.test(u)){var a=u.match(ch);v.push(a[2])}}t=or.lastIndex}var o=i.length;return t<o&&v.push(i.substring(t,o)),v}tagTextToProp(i,e){var v,t;if(fh.test(i)){var s=i.match(dh);if(s!=null){var u=s[1],n=this.tags;n.hasOwnProperty(u)?t=n[u]:t={},t._class=u,v=s[2]}}else if(vh.test(i)){var s=i.match(ch);if(s!=null){var a=s[1];t=vp(a),t._style=a,v=s[2]}}v==null&&(v=i),t==null&&(t={});var o=up;return o.plainText=v,o.prop=t,o}propToContextStyle(i,e){var v=fp;if(e.hasOwnProperty("img"))v.image=e.img;else{if(v.image=null,e.hasOwnProperty("family")||e.hasOwnProperty("fontFamily")||e.hasOwnProperty("font-family")){var t=e.hasOwnProperty("family")?e.family:e.hasOwnProperty("fontFamily")?e.fontFamily:e["font-family"];v.fontFamily=t}else v.fontFamily=i.fontFamily;if(e.hasOwnProperty("size")||e.hasOwnProperty("fontSize")||e.hasOwnProperty("font-size")){var s=e.hasOwnProperty("size")?e.size:e.hasOwnProperty("fontSize")?e.fontSize:e["font-size"];typeof s=="number"&&(s=`${s}px`),v.fontSize=s}else v.fontSize=i.fontSize;if(e.hasOwnProperty("style")||e.hasOwnProperty("fontStyle")||e.hasOwnProperty("font-style")){var u=e.hasOwnProperty("style")?e.style:e.hasOwnProperty("fontStyle")?e.fontStyle:e["font-style"];v.fontStyle=u}else v.fontStyle=i.fontStyle;if(e.hasOwnProperty("color")||e.hasOwnProperty("font-color")){var n=e.hasOwnProperty("color")?e.color:e["font-color"];v.color=n}else v.color=i.color;if(e.hasOwnProperty("stroke")){var a=e.stroke;v.stroke=a.hasOwnProperty("color")?a.color:i.stroke,v.strokeThickness=a.hasOwnProperty("thinkness")?a.thinkness:i.strokeThickness}else v.stroke=i.stroke,v.strokeThickness=i.strokeThickness}if(e.hasOwnProperty("shadow")){var o=e.shadow;v.shadowColor=o.hasOwnProperty("color")?o.color:i.shadowColor,v.shadowOffsetX=o.hasOwnProperty("offsetX")?o.offsetX:i.shadowOffsetX,v.shadowOffsetY=o.hasOwnProperty("offsetY")?o.offsetY:i.shadowOffsetY,v.shadowBlur=o.hasOwnProperty("blur")?o.blur:i.shadowBlur,v.shadowStroke=!0,v.shadowFill=!0}else v.shadowColor=i.shadowColor,v.shadowOffsetX=i.shadowOffsetX,v.shadowOffsetY=i.shadowOffsetY,v.shadowBlur=i.shadowBlur,v.shadowStroke=i.shadowStroke,v.shadowFill=i.shadowFill;if(e.hasOwnProperty("u")||e.hasOwnProperty("underline")){var r=e.hasOwnProperty("u")?e.u:e.underline;v.underlineColor=r.hasOwnProperty("color")?r.color:i.underlineColor,v.underlineThickness=r.hasOwnProperty("thinkness")?r.thinkness:i.underlineThickness,v.underlineOffset=r.hasOwnProperty("offset")?r.offset:i.underlineOffset}else v.underlineColor=i.underlineColor,v.underlineThickness=i.underlineThickness,v.underlineOffset=i.underlineOffset;return v}getStrokeThinkness(i,e){var v;if(e.hasOwnProperty("stroke")){var t=e.stroke;v=t.hasOwnProperty("thinkness")?t.thinkness:i.strokeThickness}else v=i.strokeThickness;return v}propToTagText(i,e,v){return e.hasOwnProperty("_class")?i===""&&this.isTextTag(e._class)?"":`<class='${e._class}'>${i}</class>`:e.hasOwnProperty("_style")?`<style='${e._style}'>${i}</style>`:i}destroy(){this.tags=void 0}isTextTag(i){var e=this.tags[i];return e?e.img==null:!1}}var vp=function(m){m=m.split(";");for(var i={},e,v,t,s=0,u=m.length;s<u;s++)if(e=m[s].split(":"),v=e[0],t=e[1],!(uh(v)||uh(t))){switch(v){case"stroke":var n=t.split(" "),r=n.length;t={},r>=1&&(t.color=n[0]),r>=2&&(t.thinkness=parseInt(n[1].replace("px","")));break;case"shadow":var a=t.split(" "),r=a.length;t={},r>=1&&(t.color=a[0]),r>=2&&(t.offsetX=parseInt(a[1].replace("px",""))),r>=3&&(t.offsetY=parseInt(a[2].replace("px",""))),r>=4&&(t.blur=parseInt(a[3].replace("px","")));break;case"u":case"underline":var o=t.split(" "),r=o.length;t={},r>=1&&(t.color=o[0]),r>=2&&(t.thinkness=parseInt(o[1].replace("px",""))),r>=3&&(t.offset=parseInt(o[2].replace("px","")));break;case"y":t=parseFloat(t);break}i[v]=t}return i},uh=function(m){return m=m.replace(cp,""),m.length===0},or=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,fh=/<\s*class=/i,dh=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,vh=/<\s*style=/i,ch=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,cp=/^\s+|\s+$/;const pp=Phaser.Utils.Objects.GetValue;class Ff extends Ia{constructor(i,e,v,t,s){var u=pp(s,"tags",void 0),n=new dp(u);super(i,e,v,t,s,"rexTagText",n)}addTag(i,e){return this.parser.addTag(i,e),this.updateText(!0)}addTags(i){for(var e in i)this.parser.addTag(e,i[e]);return this.updateText(!0)}getTag(i){return this.parser.getTag(i)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}et.register("tagText",function(m,i,e,v){var t=new Ff(this.scene,m,i,e,v);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.TagText",Ff);var gp=function(m,i){if(this.scene.scale.autoRound&&(m=Math.floor(m),i=Math.floor(i)),this.width===m&&this.height===i)return this;var e=this.node.style;return e.width=`${m}px`,e.height=`${i}px`,this.updateSize(),this};const mp=Phaser.Utils.Objects.GetValue;var ph=function(m,i,e){e===void 0&&(e={});var v,t;for(var s in m)v=m[s],t=mp(i,s,v[1]),t!==void 0&&(e[v[0]]=t);return e},xp=function(m,i,e){for(let v in e)i.addEventListener(v,function(t){m.emit(e[v],m,t)})},yp=function(m){m.addEventListener("touchstart",xi,!1),m.addEventListener("touchmove",xi,!1),m.addEventListener("touchend",xi,!1),m.addEventListener("mousedown",xi,!1),m.addEventListener("mouseup",xi,!1),m.addEventListener("mousemove",xi,!1)},xi=function(m){m.stopPropagation()};const Tp=Phaser.GameObjects.DOMElement,gh=Phaser.Utils.Objects.IsPlainObject,De=Phaser.Utils.Objects.GetValue;class Ga extends Tp{constructor(i,e,v,t,s,u){gh(e)?(u=e,e=De(u,"x",0),v=De(u,"y",0),t=De(u,"width",0),s=De(u,"height",0)):gh(t)&&(u=t,t=De(u,"width",0),s=De(u,"height",0)),u===void 0&&(u={});var n,a=De(u,"type","text");a==="textarea"?(n=document.createElement("textarea"),n.style.resize="none"):(n=document.createElement("input"),n.type=a),ph(mh,u,n);var o=De(u,"style",void 0);o=ph(xh,u,o);var r=n.style;for(var h in u)h in mh||h in xh||h in r&&(o[h]=u[h]);o["box-sizing"]="border-box",super(i,e,v,n,o),this.type="rexInputText",this.resize(t,s),xp(this,n,Sp),yp(n),De(u,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(i){this.node.value=i}setText(i){return this.text=i,this}get maxLength(){return this.node.maxLength}set maxLength(i){this.node.maxLength=i}setMaxLength(i){return this.maxLength=i,this}get minLength(){return this.node.minLength}set minLength(i){this.node.minLength=i}setMinLength(i){return this.minLength=i,this}get placeholder(){return this.node.placeholder}set placeholder(i){this.node.placeholder=i}setPlaceholder(i){return this.placeholder=i,this}selectText(i,e){return i===void 0?this.node.select():this.node.setSelectionRange(i,e),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var i=this.node;return i.value.substring(i.selectionStart,i.selectionEnd)}get cursorPosition(){return this.node.selectionStart}get tooltip(){return this.node.title}set tooltip(i){this.node.title=i}setTooltip(i){return this.tooltip=i,this}setTextChangedCallback(i){return this.onTextChanged=i,this}get readOnly(){return this.node.readOnly}set readOnly(i){this.node.readOnly=i}setReadOnly(i){return i===void 0&&(i=!0),this.readOnly=i,this}get spellCheck(){return this.node.spellcheck}set spellCheck(i){this.node.spellcheck=i}setSpellCheck(i){return this.spellCheck=i,this}get fontColor(){return this.node.style.color}set fontColor(i){this.node.style.color=i}setFontColor(i){return this.fontColor=i,this}setStyle(i,e){return this.node.style[i]=e,this}getStyle(i){return this.node.style[i]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(i){return i===void 0&&(i=!0),this.node.disabled=!i,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var Ep={resize:gp};Object.assign(Ga.prototype,Ep);const mh={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},xh={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},Sp={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",focus:"focus",blur:"blur",select:"select"};var If=function(m,i,e,v){if(i)return!(e&&!e(m,i)||!yh(m,i)||v&&!v(m,i));for(var t=m.scene.input.manager,s=t.pointersTotal,u=t.pointers,i,n=0;n<s;n++)if(i=u[n],!(e&&!e(m,i))&&!!yh(m,i)&&!(v&&!v(m,i)))return!0;return!1},yh=function(m,i){for(var e=m.scene,v=e.input.cameras.getCamerasBelowPointer(i),t=e.input.manager,s=[m],u,n=0,a=v.length;n<a;n++)if(u=t.hitTest(i,s,v[n]),u.length>0)return!0;return!1};const yi=Phaser.Utils.Objects.GetValue,Cp=Phaser.Math.Wrap;class wf extends Ga{constructor(i,e){super(i.scene,e);var v=this.node.style;v.position="absolute",v.opacity=0,v.pointerEvents="none",v.zIndex=0,v.transform="scale(0)",this.setCursor(yi(e,"cursor","|")),this.setCursorFlashDuration(yi(e,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0,this.setEnterClose(yi(e,"enterClose",!0)),this.onOpenCallback=yi(e,"onOpen",void 0),this.onCloseCallback=yi(e,"onClose",void 0),this.onUpdateCallback=yi(e,"onUpdate",void 0),this.textObject=i,i.setInteractive().on("pointerdown",this.setFocus,this).on("destroy",this.destroy,this),this.on("focus",function(){this.cursorFlashTimer=0,this.enterClose&&this.scene.input.keyboard.once("keydown-ENTER",this.setBlur,this),this.setText(this.textObject.text),this.scene.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.textObject,this)},this).on("blur",function(){this.updateText(),this.scene.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.textObject,this)},this)}preDestroy(){this.textObject.off("pointerdown",this.setFocus,this),this.textObject.off("destroy",this.destroy,this),this.scene.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),super.preDestroy()}onClickOutside(i){If(this.textObject,i)||this.setBlur()}updateText(){var i=this.text;if(this.onUpdateCallback){var e=this.onUpdateCallback(i,this.textObject,this);e&&(i=e)}if(this.isFocused&&this.hasCursor){var v=this.cursorPosition;i=i.substring(0,v)+this.cursor+i.substring(v)}return this.textObject.setText(i),this}setCursor(i){return this._cursor=i,this.hasCursor=i&&i!=="",i}setCursorFlashDuration(i){return this.cursorFlashDuration=i,this}get cursor(){if(!this._isFocused)return this._cursor;var i;this.cursorFlashTimer<this.cursorFlashDuration/2?i=this._cursor:i=" ";var e=this.cursorFlashTimer+this.scene.game.loop.delta;return this.cursorFlashTimer=Cp(e,0,this.cursorFlashDuration),i}setEnterClose(i){return i===void 0&&(i=!0),this.enterClose=i,this}open(){return this.setFocus(),this}close(){return this.setBlur(),this}get isOpened(){return this._isFocused}}et.register("hiddenEdit",function(m,i){var e=new wf(m,i);return e});it(window,"RexPlugins.UI.HiddenEdit",wf);const Pp=Phaser.GameObjects.Zone,Rp=Phaser.Utils.Array.Add,Mp=Phaser.Utils.Array.Remove;class vs extends Pp{constructor(i,e,v,t,s){e===void 0&&(e=0),v===void 0&&(v=0),t===void 0&&(t=1),s===void 0&&(s=1),super(i,e,v,t,s),this.children=[]}destroy(i){if(!!this.scene){if(i)for(var e,v=this.children.length-1;v>=0;v--)e=this.children[v],!e.parentContainer&&!e.displayList&&e.destroy(i);this.clear(!i),super.destroy(i)}}contains(i){return this.children.indexOf(i)!==-1}add(i){var e=this;return Rp(this.children,i,0,function(v){v.once("destroy",e.onChildDestroy,e)},this),this}remove(i,e){var v=this;return Mp(this.children,i,function(t){t.off("destroy",v.onChildDestroy,v),e&&t.destroy()}),this}onChildDestroy(i,e){this.remove(i,!1)}clear(i){for(var e=this,v,t=0,s=this.children.length;t<s;t++)v=this.children[t],v.off("destroy",e.onChildDestroy,e),i&&v.destroy();return this.children.length=0,this}}const Th=Phaser.GameObjects.Components;Phaser.Class.mixin(vs,[Th.Alpha,Th.Flip]);var pi=function(m){var i;return m.hasOwnProperty("rexContainer")&&(i=m.rexContainer.parent),i},Df=function(m){for(var i=pi(m);i;)m=i,i=pi(i);return m};const Ap=Phaser.Math.DegToRad,Op=Phaser.Math.RadToDeg;var ct=function(m){if(!m.hasOwnProperty("rexContainer")){var i={parent:null,self:null,x:0,y:0,rotation:0,scaleX:0,scaleY:0,alpha:0,visible:!0,active:!0};Object.defineProperty(i,"angle",{get:function(){return Op(this.rotation)},set:function(e){this.rotation=Ap(e)}}),Object.defineProperty(i,"displayWidth",{get:function(){return m.width*this.scaleX},set:function(e){this.scaleX=e/m.width}}),Object.defineProperty(i,"displayHeight",{get:function(){return m.height*this.scaleY},set:function(e){this.scaleY=e/m.height}}),m.rexContainer=i}return m.rexContainer},Lp={setParent(m,i){i===void 0&&(i=this);var e=ct(m);return i?(e.parent=i,e.self=m):(e.parent=null,e.self=null),this},getParent(m){return m===void 0&&(m=this),pi(m)},getTopmostParent(m){return m===void 0&&(m=this),Df(m)}};const Bf=vs.prototype.add;var hr=function(m){return this.setParent(m),this.resetChildState(m).updateChildVisible(m).updateChildActive(m).updateChildScrollFactor(m).updateChildMask(m),Bf.call(this,m),this},Eh=function(m){this.setParent(m);var i=ct(m);return i.x=m.x,i.y=m.y,i.rotation=m.rotation,i.scaleX=m.scaleX,i.scaleY=m.scaleY,i.alpha=m.alpha,i.visible=m.visible,i.active=m.active,this.updateChildPosition(m).updateChildAlpha(m).updateChildVisible(m).updateChildActive(m).updateChildScrollFactor(m).updateChildMask(m),Bf.call(this,m),this},Fp={add(m){return Array.isArray(m)?this.addMultiple(m):hr.call(this,m),this},pin(m){return Array.isArray(m)?this.addMultiple(m):hr.call(this,m),this},addMultiple(m){for(var i=0,e=m.length;i<e;i++)hr.call(this,m[i]);return this},addLocal(m){return Array.isArray(m)?this.addMultiple(m):Eh.call(this,m),this},addLocalMultiple(m){for(var i=0,e=m.length;i<e;i++)Eh.call(this,m[i]);return this}};const Ip=vs.prototype.remove,wp=vs.prototype.clear;var Dp={remove(m,i){return pi(m)!==this?this:(this.setParent(m,null),Ip.call(this,m,i),this)},clear(m){for(var i=0,e=this.children.length;i<e;i++)this.setParent(this.children[i],null);return wp.call(this,m),this}},Bp={getLocalState(m){return ct(m)},resetChildState(m){return this.resetChildPositionState(m).resetChildVisibleState(m).resetChildAlphaState(m).resetChildActiveState(m),this},resetChildrenState(m){for(var i=0,e=m.length;i<e;i++)this.resetChildState(m[i]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};const Sh=Phaser.Math.RotateAround;var Np={worldToLocal(m){return m.x-=this.x,m.y-=this.y,Sh(m,0,0,-this.rotation),m.x/=this.scaleX,m.y/=this.scaleY,m},localToWorld(m){return m.x*=this.scaleX,m.y*=this.scaleY,Sh(m,0,0,this.rotation),m.x+=this.x,m.y+=this.y,m}},hs=function(m,i){return m===i?1:m/i},Gp={updateChildPosition(m){m.isRexContainerLite&&(m.syncChildrenEnable=!1);var i=ct(m),e=i.parent;return m.x=i.x,m.y=i.y,e.localToWorld(m),m.scaleX=i.scaleX*e.scaleX,m.scaleY=i.scaleY*e.scaleY,m.rotation=i.rotation+e.rotation,m.isRexContainerLite&&(m.syncChildrenEnable=!0,m.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(m){var i=ct(m),e=i.parent;return i.x=m.x,i.y=m.y,e.worldToLocal(i),i.scaleX=hs(m.scaleX,e.scaleX),i.scaleY=hs(m.scaleY,e.scaleY),i.rotation=m.rotation-e.rotation,this},setChildPosition(m,i,e){return m.x=i,m.y=e,this.resetChildPositionState(m),this},setChildLocalPosition(m,i,e){var v=ct(m);return v.x=i,v.y=e,this.updateChildPosition(m),this},resetLocalPositionState(){var m=ct(this).parent;return m&&m.resetChildPositionState(this),this}},Vp={updateChildRotation(m){var i=ct(m),e=i.parent;return m.rotation=e.rotation+i.rotation,this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(m){var i=ct(m),e=i.parent;return i.rotation=m.rotation-e.rotation,this},setChildRotation(m,i){return m.rotation=i,this.resetChildRotationState(m),this},setChildAngle(m,i){return m.angle=i,this.resetChildRotationState(m),this},setChildLocalRotation(m,i){var e=ct(m);return e.rotation=i,this.updateChildRotation(m),this},resetLocalRotationState(){var m=ct(this).parent;return m&&m.resetChildRotationState(this),this}},bp={updateChildScale(m){var i=ct(m),e=i.parent;return m.scaleX=e.scaleX*i.scaleX,m.scaleY=e.scaleY*i.scaleY,this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(m){var i=ct(m),e=i.parent;return i.scaleX=hs(m.scaleX,e.scaleX),i.scaleY=hs(m.scaleY,e.scaleY),this},setChildScale(m,i,e){return e===void 0&&(e=i),m.scaleX=i,m.scaleY=e,this.resetChildScaleState(m),this},setChildLocalScale(m,i,e){e===void 0&&(e=i);var v=ct(m);return v.scaleX=i,v.scaleY=e,this.updateChildScale(m),this},setChildDisplaySize(m,i,e){return m.setDisplaySize(i,e),this.resetChildScaleState(m),this},resetLocalScaleState(){var m=ct(this).parent;return m&&m.resetChildScaleState(this),this}},zp={updateChildVisible(m){var i=ct(m),e=i.parent,v=i.hasOwnProperty("maskVisible")?i.maskVisible:!0;return m.visible=e.visible&&i.visible&&v,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(m){var i=ct(m);return i.hasOwnProperty("maskVisible")&&delete i.maskVisible,i.visible=m.visible,this},setChildVisible(m,i){return this.setChildLocalVisible(m,i),this},setChildLocalVisible(m,i){i===void 0&&(i=!0);var e=ct(m);return e.visible=i,this.updateChildVisible(m),this},setChildMaskVisible(m,i){i===void 0&&(i=!0);var e=ct(m);return e.maskVisible=i,this.updateChildVisible(m),this},resetLocalVisibleState(){var m=ct(this).parent;return m&&m.resetChildVisibleState(this),this}},Up={updateChildAlpha(m){var i=ct(m),e=i.parent;return m.alpha=e.alpha*i.alpha,this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(m){var i=ct(m),e=i.parent;return i.alpha=hs(m.alpha,e.alpha),this},setChildAlpha(m,i){return m.alpha=i,this.resetChildAlphaState(m),this},setChildLocalAlpha(m,i){var e=ct(m);return e.alpha=i,this.updateChildAlpha(m),this},resetLocalAlphaState(){var m=ct(this).parent;return m&&m.resetChildAlphaState(this),this}},Yp={updateChildActive(m){var i=ct(m),e=i.parent;return m.active=e.active&&i.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(m){var i=ct(m);return i.active=m.active,this},setChildActive(m,i){return m.active=i,this.resetChildActiveState(m),this},setChildLocalActive(m,i){i===void 0&&(i=!0);var e=ct(m);return e.active=i,this.updateChildActive(m),this},resetLocalActiveState(){var m=ct(this).parent;return m&&m.resetChildActiveState(this),this}},Xp={updateChildScrollFactor(m){var i=ct(m),e=i.parent;return m.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},Wp={updateChildMask(m){if(this.mask==null)return this;var i=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return i!==m&&(m.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(m){return this.mask=m,this},clearMask(m){return m===void 0&&(m=!1),m&&this.mask&&this.mask.destroy(),this.mask=null,this}},mn=function(m,i){if(m.length===0)return m;i===void 0&&(i=!1);var e=m[0].scene,v=e.sys.displayList;return v.depthSort(),i?m.sort(function(t,s){return v.getIndex(s)-v.getIndex(t)}):m.sort(function(t,s){return v.getIndex(t)-v.getIndex(s)}),m},Hp={setDepth(m,i){if(this.depth=m,!i&&this.children)for(var e=this.getAllChildren(),v=0,t=e.length;v<t;v++)e[v].depth=m;return this},swapDepth(m){var i=this.depth,e=m.depth;return this.setDepth(e),m.setDepth(i),this},incDepth(m){if(this.depth+=m,this.children)for(var i=this.getAllChildren(),e=0,v=i.length;e<v;e++)i[e].depth+=m;return this},moveDepthBelow(m){var i=m.scene.children,e=this.getAllChildren([this]);mn(e);for(var v=0,t=e.length;v<t;v++){var s=e[v];if(i.exists(s)){i.moveBelow(m,s);break}}return this},moveDepthAbove(m){var i=m.scene.children,e=this.getAllChildren([this]);mn(e,!0);for(var v=0,t=e.length;v<t;v++){var s=e[v];if(i.exists(s)){i.moveAbove(m,s);break}}return this}},Nf=function(m,i){var e=i(m);if(!e&&m.isRexContainerLite)for(var v=m.children,t=0,s=v.length;t<s;t++)Nf(v[t],i)},lr=function(m,i){for(var e=[m];e.length>0;){var v=e.shift(),t=i(v);!t&&v.isRexContainerLite&&e.push(...v.children)}};const ri=Phaser.Utils.Array;var $p={getChildren(m){if(!m)m=this.children;else for(var i=0,e=this.children.length;i<e;i++)m.push(this.children[i]);return m},getAllChildren(m){m===void 0&&(m=[]);var i=this;return lr(i,function(e){e!==i&&m.push(e)}),m},getAllVisibleChildren(m){m===void 0&&(m=[]);var i=this;return lr(i,function(e){if(e!==i){if(!e.visible)return!0;m.push(e)}}),m},bfs(m,i){return i===void 0&&(i=this),lr(i,m),this},dfs(m,i){return i===void 0&&(i=this),Nf(i,m),this},contains(m){var i=pi(m);return i?i===this?!0:this.contains(i):!1},getByName(m,i){if(i){for(var e=[this],v,t;e.length;){v=e.shift();for(var s=0,u=v.children.length;s<u;s++){if(t=v.children[s],t.name===m)return t;t.isRexContainerLite&&e.push(t)}}return null}else return ri.GetFirst(this.children,"name",m)},getRandom(m,i){return ri.GetRandom(this.children,m,i)},getFirst(m,i,e,v){return ri.GetFirstElement(this.children,m,i,e,v)},getAll(m,i,e,v){return ri.GetAll(this.children,m,i,e,v)},count(m,i,e,v){return ri.CountAllMatching(this.children,m,i,e,v)},swap(m,i){return ri.Swap(this.children,m,i),this},setAll(m,i,e,v){return ri.SetAll(this.children,m,i,e,v),this}},he=function(m){return Object.prototype.toString.call(m)==="[object Array]"},Jp={tweenChild(m){var i=m.targets;he(i)||(i=[i]);for(var e,v=[],t,s=0,u=i.length;s<u;s++)t=i[s],t.hasOwnProperty("rexContainer")&&(e=t.scene,v.push(t.rexContainer));if(!!e){m.targets=v;var n=e.tweens.add(m),a=function(o,r,h){if(!h.parent){e.tweens.remove(o);return}var d=h.parent,l=h.self;switch(r){case"x":case"y":d.updateChildPosition(l);break;case"angle":case"rotation":d.updateChildRotation(l);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":d.updateChildScale(l);break;case"alpha":d.updateChildAlpha(l);break}};return n.on("update",a),n}},tween(m){var i=this.scene;return m.targets||(m.targets=this),i.tweens.add(m)}},Ch=function(m){var i=this.getAllChildren([this]);return mn(i),m.add(i),this},Kp={addToLayer:Ch,addToContainer:Ch};const Zp=Phaser.Math.RotateAround;var Qp=function(m,i,e){e===void 0&&(e=i);var v={x:(i-m.originX)*m.displayWidth,y:(e-m.originY)*m.displayHeight};return Zp(v,0,0,m.rotation),m.originX=i,m.originY=e,m.x=m.x+v.x,m.y=m.y+v.y,m},jp=function(m,i){this.syncChildrenEnable=!1,Qp(this,m,i),this.syncChildrenEnable=!0;for(var e=this.getAllChildren(),v=0,t=e.length;v<t;v++)this.resetChildPositionState(e[v]);return this},Gf={changeOrigin:jp};Object.assign(Gf,Lp,Fp,Dp,Bp,Np,Gp,Vp,bp,zp,Up,Yp,Xp,Wp,Hp,$p,Jp,Kp);class le extends vs{constructor(i,e,v,t,s,u){super(i,e,v,t,s),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,u&&this.add(u)}destroy(i){!this.scene||(this.syncChildrenEnable=!1,super.destroy(i))}resize(i,e){return this.setSize(i,e),this}get x(){return this._x}set x(i){this._x!==i&&(this._x=i,this.syncPosition())}get y(){return this._y}set y(i){this._y!==i&&(this._y=i,this.syncPosition())}get rotation(){return super.rotation}set rotation(i){this.rotation!==i&&(super.rotation=i,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(i){this.scaleX!==i&&(super.scaleX=i,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(i){this.scaleY!==i&&(super.scaleY=i,this.syncPosition())}get visible(){return super.visible}set visible(i){super.visible!==i&&(super.visible=i,this.syncVisible())}get alpha(){return super.alpha}set alpha(i){super.alpha!==i&&(super.alpha=i,this.syncAlpha())}get active(){return this._active}set active(i){this._active!==i&&(this._active=i,this.syncActive())}get mask(){return this._mask}set mask(i){this._mask!==i&&(this._mask=i,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(i){this._scrollFactorX!==i&&(this._scrollFactorX=i,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(i){this._scrollFactorY!==i&&(this._scrollFactorY=i,this.syncScrollFactor())}get list(){return this.children}static GetParent(i){return pi(i)}}Object.assign(le.prototype,Gf);et.register("container",function(m,i,e,v,t){var s=new le(this.scene,m,i,e,v,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.Container",le);et.register("canvas",function(m,i,e,v){var t=new qe(this.scene,m,i,e,v);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Canvas",qe);const Bs=Phaser.Utils.Objects.GetValue;class Vf extends qe{constructor(i,e,v,t,s,u){super(i,e,v),this.type="rexCircleMaskImage",this.setTexture(t,s,u)}setTexture(i,e,v){typeof e=="object"&&(v=e,e=void 0);var t,s;if(typeof v=="string"?(t=v,s=void 0):(t=Bs(v,"maskType",0),s=Bs(v,"backgroundColor",void 0)),t===void 0?t=0:typeof t=="string"&&(t=kp[t]),this._textureKey=i,this._frameName=e,t===null)return this.loadTexture(i,e),this.dirty=!0,this;var u=s!=null;u||this.loadTexture(i,e);var n=this.canvas,a=this.context,o=n.width,r=n.height;switch(a.save(),a.globalCompositeOperation=u?"source-over":"destination-in",a.beginPath(),t){case 2:var h=Bs(v,"radius",0),d=Bs(v,"iteration",void 0);Nu(a,0,0,o,r,h,d);break;default:var l=Math.floor(o/2),f=Math.floor(r/2);t===0?a.arc(l,f,Math.min(l,f),0,2*Math.PI):a.ellipse(l,f,l,f,0,0,2*Math.PI);break}return u&&(a.fillStyle=s),a.fill(),a.restore(),u&&(a.save(),a.globalCompositeOperation="destination-atop",this.loadTexture(i,e),a.restore()),this.dirty=!0,this}}const kp={circle:0,ellipse:1,roundRectangle:2};et.register("circleMaskImage",function(m,i,e,v,t){var s=new Vf(this.scene,m,i,e,v,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.CircleMaskImage",Vf);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Dt=function(m,i,e){if(!m||typeof m=="number")return e;if(m.hasOwnProperty(i))return m[i];if(i.indexOf(".")!==-1){for(var v=i.split("."),t=m,s=e,u=0;u<v.length;u++)if(t.hasOwnProperty(v[u]))s=t[v[u]],t=t[v[u]];else{s=e;break}return s}else return e},bf={enableData(){return this.data===void 0&&(this.data={}),this},getData(m,i){return this.enableData(),m===void 0?this.data:Dt(this.data,m,i)},setData(m,i){if(this.enableData(),arguments.length===1){var e=m;for(m in e)this.data[m]=e[m]}else this.data[m]=i;return this},incData(m,i,e){return e===void 0&&(e=0),this.enableData(),this.setData(m,this.getData(m,e)+i),this},mulData(m,i,e){return e===void 0&&(e=0),this.enableData(),this.setData(m,this.getData(m,e)*i),this},clearData(){return this.data&&Vi(this.data),this},resetData(m){if(this.clearData(),m){this.enableData();for(var i in m)this.data[i]=m[i]}return this},cloneData(){return this.data?ci(this.data):{}}};const qp=Phaser.Math.DegToRad,_p=Phaser.Math.RadToDeg,Ns=Phaser.Utils.Objects.GetValue;class zi{constructor(i,e){this.setParent(i),this.type=e,this.setActive().setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setDrawBelowCallback().setDrawAboveCallback(),this.originX=0,this.offsetX=0,this.offsetY=0}setParent(i){return this.parent=i,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(i){return i&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(i){this.setDirty(this._active!=i),this._active=i}setActive(i){return i===void 0&&(i=!0),this.active=i,this}get visible(){return this._visible}set visible(i){this.setDirty(this._visible!=i),this._visible=i}setVisible(i){return i===void 0&&(i=!0),this.visible=i,this}get alpha(){return this._alpha}set alpha(i){this.setDirty(this._alpha!=i),this._alpha=i}setAlpha(i){return this.alpha=i,this}get x(){return this._x}set x(i){this.setDirty(this._x!=i),this._x=i}setX(i){return this.x=i,this}get y(){return this._y}set y(i){this.setDirty(this._y!=i),this._y=i}setY(i){return this.y=i,this}setPosition(i,e){return this.x=i,this.y=e,this}get rotation(){return this._rotation}set rotation(i){this.setDirty(this._rotation!=i),this._rotation=i}setRotation(i){return this.rotation=i,this}get angle(){return _p(this._rotation)}set angle(i){this.rotation=qp(i)}setAngle(i){return this.angle=i,this}get scaleX(){return this._scaleX}set scaleX(i){this.setDirty(this._scaleX!==i),this._scaleX=i}setScaleX(i){return this.scaleX=i,this}get width(){return 0}set width(i){}setWidth(i,e){return e===void 0&&(e=!1),this.width=i,e&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(i){this.setDirty(this._leftSpace!==i),this._leftSpace=i}setLeftSpace(i){return this.leftSpace=i,this}get rightSpace(){return this._rightSpace}set rightSpace(i){this.setDirty(this._rightSpace!==i),this._rightSpace=i}setRightSpace(i){return this.rightSpace=i,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(i){this.setDirty(this._scaleY!==i),this._scaleY=i}setScaleY(i){return this.scaleY=i,this}get height(){return 0}set height(i){}setHeight(i,e){return e===void 0&&(e=!1),this.height=i,e&&(this.scaleX=this.scaleY),this}setScale(i,e){return e===void 0&&(e=i),this.scaleX=i,this.scaleY=e,this}modifyPorperties(i){if(!i)return this;i.hasOwnProperty("x")&&this.setX(i.x),i.hasOwnProperty("y")&&this.setY(i.y),i.hasOwnProperty("rotation")?this.setRotation(i.rotation):i.hasOwnProperty("angle")&&this.setAngle(i.angle),i.hasOwnProperty("alpha")&&this.setAlpha(i.alpha);var e=Ns(i,"width",void 0),v=Ns(i,"height",void 0),t=Ns(i,"scaleX",void 0),s=Ns(i,"scaleY",void 0);return e!==void 0&&(v===void 0&&s===void 0?this.setWidth(e,!0):this.setWidth(e)),v!==void 0&&(e===void 0&&t===void 0?this.setHeight(v,!0):this.setHeight(v)),t!==void 0&&e===void 0&&this.setScaleX(t),s!==void 0&&v===void 0&&this.setScaleY(s),i.hasOwnProperty("leftSpace")&&this.setLeftSpace(i.leftSpace),i.hasOwnProperty("rightSpace")&&this.setLeftSpace(i.rightSpace),this}setOrigin(i){return this.originX=i,this}setDrawBelowCallback(i){return this.drawBelowCallback=i,this}setDrawAboveCallback(i){return this.drawAboveCallback=i,this}onFree(){this.setParent().setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setDrawBelowCallback().setDrawAboveCallback()}drawContent(){}draw(){var i=this.context;i.save();var e=this.x+this.leftSpace+this.offsetX-this.originX*this.width,v=this.y+this.offsetY;this.autoRound&&(e=Math.round(e),v=Math.round(v)),i.translate(e,v),i.globalAlpha=this.alpha,i.scale(this.scaleX,this.scaleY),i.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback.call(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback.call(this),i.restore()}}Object.assign(zi.prototype,bf);const ai=Phaser.Utils.Objects.GetValue;class tg extends zi{constructor(i,e){super(i,"background"),this.setColor(ai(e,"color",null),ai(e,"color2",null),ai(e,"horizontalGradient",!0)),this.setStroke(ai(e,"stroke",null),ai(e,"strokeThickness",2)),this.setCornerRadius(ai(e,"cornerRadius",0),ai(e,"cornerIteration",null))}set color(i){i=lt(i,this.canvas,this.context),this.setDirty(this._color!=i),this._color=i}get color(){return this._color}set color2(i){i=lt(i,this.canvas,this.context),this.setDirty(this._color2!=i),this._color2=i}get color2(){return this._color2}set horizontalGradient(i){this.setDirty(this._horizontalGradient!=i),this._horizontalGradient=i}get horizontalGradient(){return this._horizontalGradient}setColor(i,e,v){return v===void 0&&(v=!0),this.color=i,this.color2=e,this.horizontalGradient=v,this}set stroke(i){i=lt(i,this.canvas,this.context),this.setDirty(this._stroke!=i),this._stroke=i}get stroke(){return this._stroke}set strokeThickness(i){this.setDirty(this._strokeThickness!=i),this._strokeThickness=i}get strokeThickness(){return this._strokeThickness}setStroke(i,e){return this.stroke=i,this.strokeThickness=e,this}set cornerRadius(i){this.setDirty(this._cornerRadius!=i),this._cornerRadius=i}get cornerRadius(){return this._cornerRadius}set cornerIteration(i){this.setDirty(this._cornerIteration!=i),this._cornerIteration=i}get cornerIteration(){return this._cornerIteration}setCornerRadius(i,e){return this.cornerRadius=i,this.cornerIteration=e,this}drawContent(){Ma(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const Ji=Phaser.Utils.Objects.GetValue;class eg extends zi{constructor(i,e){super(i,"background"),this.setColor(Ji(e,"color",null),Ji(e,"color2",null),Ji(e,"horizontalGradient",!0)),this.setStroke(Ji(e,"stroke",null),Ji(e,"strokeThickness",2))}set color(i){i=lt(i,this.canvas,this.context),this.setDirty(this._color!=i),this._color=i}get color(){return this._color}set color2(i){i=lt(i,this.canvas,this.context),this.setDirty(this._color2!=i),this._color2=i}get color2(){return this._color2}set horizontalGradient(i){this.setDirty(this._horizontalGradient!=i),this._horizontalGradient=i}get horizontalGradient(){return this._horizontalGradient}setColor(i,e,v){return v===void 0&&(v=!0),this.color=i,this.color2=e,this.horizontalGradient=v,this}set stroke(i){i=lt(i,this.canvas,this.context),this.setDirty(this._stroke!=i),this._stroke=i}get stroke(){return this._stroke}set strokeThickness(i){this.setDirty(this._strokeThickness!=i),this._strokeThickness=i}get strokeThickness(){return this._strokeThickness}setStroke(i,e){return this.stroke=i,this.strokeThickness=e,this}drawContent(){var i=this.parent.padding,e=i.left,v=i.top,t=this.parent.width-i.left-i.right,s=this.parent.height-i.top-i.bottom,u=this.context;if(this.color!=null){var n;if(this.color2!=null){var a;this.horizontalGradient?a=u.createLinearGradient(0,0,t,0):a=u.createLinearGradient(0,0,0,s),a.addColorStop(0,this.color),a.addColorStop(1,this.color2),n=a}else n=this.color;u.fillStyle=n,u.fillRect(e,v,t,s)}this.stroke!=null&&this.strokeThickness>0&&(u.strokeStyle=this.stroke,u.lineWidth=this.strokeThickness,u.strokeRect(e,v,t,s))}}var Gs=function(m,i,e){return i.hasOwnProperty(m)?i[m]:e[m]};const Zt=Phaser.Utils.Objects.GetValue;class zf{constructor(i){this.set(i)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY}}set(i){this.setBold(Zt(i,"bold",!1)),this.setItalic(Zt(i,"italic",!1)),this.setFontSize(Zt(i,"fontSize","16px")),this.setFontFamily(Zt(i,"fontFamily","Courier")),this.setColor(Zt(i,"color","#fff")),this.setStrokeStyle(Zt(i,"stroke",null),Zt(i,"strokeThickness",0)),this.setShadow(Zt(i,"shadowColor",null),Zt(i,"shadowOffsetX",0),Zt(i,"shadowOffsetY",0),Zt(i,"shadowBlur",0)),this.setOffset(Zt(i,"offsetX",0),Zt(i,"offsetY",0))}modify(i){return i.hasOwnProperty("bold")&&this.setBold(i.bold),i.hasOwnProperty("italic")&&this.setItalic(i.italic),i.hasOwnProperty("fontSize")&&this.setFontSize(i.fontSize),i.hasOwnProperty("fontFamily")&&this.setFontFamily(i.fontFamily),i.hasOwnProperty("color")&&this.setColor(i.color),(i.hasOwnProperty("stroke")||i.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Gs("stroke",i,this),Gs("strokeThickness",i,this)),i.hasOwnProperty("shadowColor")&&this.setShadowColor(i.shadowColor),(i.hasOwnProperty("shadowOffsetX")||i.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Gs("shadowOffsetX",i,this),Gs("shadowOffsetY",i,this)),i.hasOwnProperty("shadowBlur")&&this.setShadowBlur(i.shaodwBlur),i.hasOwnProperty("offsetX")&&this.setOffsetX(i.offsetX),i.hasOwnProperty("offsetY")&&this.setOffsetY(i.offsetY),this}setBold(i){return i===void 0&&(i=!0),this.bold=i,this}setItalic(i){return i===void 0&&(i=!0),this.italic=i,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(i){return typeof i=="number"&&(i=`${i}px`),this.fontSize=i,this}setFontFamily(i){return this.fontFamily=i,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(i){return this.color=lt(i),this}get hasFill(){return this.color!=null}setStrokeStyle(i,e){return this.stroke=lt(i),e!==void 0&&(this.strokeThickness=e),this}setStrokeThickness(i){return this.strokeThickness=i,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(i){return this.shadowColor=lt(i),this}setShadowOffset(i,e){return i===void 0&&(i=0),e===void 0&&(e=0),this.shadowOffsetX=i,this.shadowOffsetY=e,this}setShadowBlur(i){return i===void 0&&(i=0),this.shaodwBlur=i,this}setShadow(i,e,v,t){return this.setShadowColor(i).setShadowOffset(e,v).setShadowBlur(t),this}setOffsetX(i){return i===void 0&&(i=0),this.offsetX=i,this}setOffsetY(i){return i===void 0&&(i=0),this.offsetY=i,this}setOffset(i,e){return this.setOffsetX(i).setOffsetY(e),this}syncFont(i){return i.font=this.font,this}syncStyle(i){i.textBaseline="alphabetic";var e=this.hasFill,v=this.hasStroke;return i.fillStyle=e?this.color:"#000",i.strokeStyle=v?this.stroke:"#000",i.lineWidth=v?this.strokeThickness:0,i.lineCap="round",i.lineJoin="round",this}syncShadow(i){i.shadowColor!=null?(i.shadowColor=this.shadowColor,i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY,i.shadowBlur=this.shadowBlur):(i.shadowColor=0,i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0)}getTextMetrics(i,e){return this.syncFont(i).syncStyle(i),i.measureText(e)}}const Vs=Phaser.Utils.Objects.GetValue;var ln=function(m,i){return i===void 0?m:m[i]},un=function(m,i,e){var v=typeof i;v==="string"?m[i]=e:v==="number"?(m.left=i,m.right=i,m.top=i,m.bottom=i):(m.left=Vs(i,"left",0),m.right=Vs(i,"right",0),m.top=Vs(i,"top",0),m.bottom=Vs(i,"bottom",0))},ig=function(m,i){var e=this.padding,v=e.left,t=e.right,s=e.top,u=e.bottom;return un(this.padding,m,i),this.dirty=this.dirty||v!=this.padding.left||t!=this.padding.right||s!=this.padding.top||u!=this.padding.bottom,this},sg=function(m){return ln(this.padding,m)},ng=function(m){return this.textStyle.modify(m),this},rg=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},ag=function(){return this.setText(),this};const cs="text",Va="image",ba="command";var za=function(m){var i=m.type;return i===cs||i===Va},Uf=function(m){return m.type===cs&&m.text===`
`},og=function(m){return m.type===ba};class hg extends zi{constructor(i,e,v){super(i,cs),this.style=new zf(v),this.setText(e)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(i){}get offsetY(){return this.style.offsetY}set offsetY(i){}modifyStyle(i){return this.setDirty(!0),this.style.modify(i),this}modifyPorperties(i){return i?(this.modifyStyle(i),super.modifyPorperties(i),this):this}setText(i){return this.setDirty(this.text!=i),this.text=i,this.updateTextSize(),this}updateTextSize(){if(this.text===`
`||this.text==="")this.textWidth=0,this.textHeight=0;else{var i=this.style.getTextMetrics(this.context,this.text);this.textWidth=i.width;var e,v;i.hasOwnProperty("actualBoundingBoxAscent")?(e=i.actualBoundingBoxAscent,v=i.actualBoundingBoxDescent):(e=0,v=0),this.textHeight=e+v}return this}get width(){return this.textWidth*this.scaleX}set width(i){this.textWidth>0?this.scaleX=i/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(i){this.textHeight>0?this.scaleY=i/this.textHeight:this.scaleY=1}drawContent(){var i=this.style,e=i.hasFill,v=i.hasStroke;if(!(!e&&!v)){var t=this.context;i.syncFont(t).syncStyle(t),v&&(i.syncShadow(t),t.strokeText(this.text,0,0)),e&&(i.syncShadow(t),t.fillText(this.text,0,0))}}draw(){if(!this.visible||this.text===""||this.text===`
`)return this;super.draw()}}var Mn=function(m,i){i&&this.textStyle.modify(i),this.lastAppendedChildren.length=0;for(var e=0,v=m.length;e<v;e++){var t=m.charAt(e),s=this.poolManager.allocate(cs);s===null?s=new hg(this,t,this.textStyle):s.setParent(this).setActive().modifyStyle(this.textStyle).setText(t),this.children.push(s),this.lastAppendedChildren.push(s)}return this},lg=function(m,i){return m===void 0&&(m=""),this.removeChildren(),Mn.call(this,m,i),this.dirty=!0,this};class ug extends zi{constructor(i,e,v){super(i,Va),this.setTexture(e,v)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(i){}get key(){return this._key}set key(i){this.setDirty(this._key!=i),this._key=i}get frame(){return this._frame}set frame(i){this.setDirty(this._frame!=i),this._frame=i}setTexture(i,e){return this.key=i,this.frame=e,this.frameObj=this.scene.textures.getFrame(i,e),this}get width(){return this.frameWidth*this.scaleX}set width(i){this.setDirty(this.width!==i),this.scaleX=i/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(i){this.setDirty(this.height!==i),this.scaleY=i/this.frameHeight}setHeight(i,e){return e===void 0&&(e=!1),this.height=i,e&&(this.scaleX=this.scaleY),this}drawContent(){var i=this.context,e=this.frameObj;i.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight)}draw(){if(!this.visible)return this;super.draw()}}var Yf=function(m,i,e){var v=this.poolManager.allocate(Va);return v===null?v=new ug(this,m,i):v.setParent(this).setActive().setTexture(m,i),v.modifyPorperties(e),this.lastAppendedChildren.length=0,this.children.push(v),this.lastAppendedChildren.push(v),this};class fg extends zi{constructor(i,e,v,t,s){super(i,ba),this.setName(e).setParameter(t).setCallback(v,s)}setName(i){return this.name=i,this}setParameter(i){return this.param=i,this}setCallback(i,e){return this.callback=i,this.scope=e,this}exec(){var i;return this.scope?i=this.callback.call(this.scope,this.param,this.name):i=this.callback(this.param,this.name),i}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var ut=function(m,i,e,v){var t=this.poolManager.allocate(ba);return t===null?t=new fg(this,m,i,e,v):t.setParent(this).setActive().setName(m).setCallback(i,v).setParameter(e),this.lastAppendedChildren.length=0,this.children.push(t),this.lastAppendedChildren.push(t),this},dg=function(m){return this.wrapConfig=m,this},Xf=function(m,i){if(!i)return m;m==null&&(m={});for(var e in i)m.hasOwnProperty(e)||(m[e]=i[e]);return m},vg=function(m,i,e,v){v===void 0&&(v={word:[],width:0}),v.word.length=0;for(var t=m.length,s=i,u=v.word,n=0;s<t;){var a=m[s];if(a.type===cs&&a.text!==" "&&a.text!==`
`)u.push(a),n+=a.outerWidth,s++;else{s===i&&(u.push(a),n+=a.outerWidth);break}if(e)break}return v.width=n,v};const Wf={left:0,center:1,right:2},Hf={top:0,center:1,bottom:2};var cg=function(m,i,e){var v=m.hAlign,t=m.vAlign;if(typeof v=="string"&&(v=Wf[v],m.hAlign=v),typeof t=="string"&&(t=Hf[t],m.vAlign=t),v!==0)for(var s=m.lines,u=0,n=s.length;u<n;u++){var a=s[u],o=a.width,r=a.children,h;switch(v){case 1:h=(i-o)/2;break;case 2:h=i-o;break}for(var d=0,l=r.length;d<l;d++){var f=r[d];f.x+=h}}if(t!==0){var c=m.linesHeight,g;switch(t){case 1:g=(e-c)/2;break;case 2:g=e-c;break}for(var r=m.children,d=0,l=r.length;d<l;d++){var f=r[d];f.y+=g}}};const qt=Phaser.Utils.Objects.GetValue;var pg=function(m){var i=qt(m,"start",0),e=qt(m,"padding.top",0),v=qt(m,"padding.bottom",0),t=qt(m,"lineHeight",void 0),s;if(t===void 0)if(s=qt(m,"maxLines",0),this.fixedHeight>0){var D=this.fixedHeight-this.padding.top-this.padding.bottom-e-v;t=D/s}else t=0;else if(this.fixedHeight>0){if(s=qt(m,"maxLines",void 0),s===void 0){var D=this.fixedHeight-this.padding.top-this.padding.bottom-e-v;s=Math.floor(D/t)}}else s=qt(m,"maxLines",0);var u=s===0,n=qt(m,"wrapWidth",void 0);n===void 0&&(this.fixedWidth>0?n=this.fixedWidth-this.padding.left-this.padding.right:n=1/0);for(var a=qt(m,"letterSpacing",0),o=qt(m,"hAlign",0),r=qt(m,"vAlign",0),h=qt(m,"charWrap",!1),d={start:i,isLastPage:!1,padding:{top:e,bottom:v},lineHeight:t,maxLines:s,wrapWidth:n,letterSpacing:a,hAlign:o,vAlign:r,charWrap:h,children:[],lines:[],maxLineWidth:0,linesHeight:0},l=this.children,f=0,c=l.length;f<c;f++)l[f].setActive(!1);n+=a;for(var g=this.padding.left,p=this.padding.top+t+e,x=g,y=p,T=n,E=i,S=l.length,C=d.children,P=d.lines,R=[],A=0,M=0,O;E<S;){var F=l[E];if(!za(F)){E++,F.setActive(),C.push(F),R.push(F);continue}O=vg(l,E,h,O);var I=O.word,B=I.length,V=O.width+B*a;E+=B;var U=Uf(I[0]);if(T<V||U){if(U){var Y=I[0];Y.setActive().setPosition(x,y),C.push(Y),R.push(Y)}if(x=g,y+=t,T=n,P.push({children:R,width:A}),M=Math.max(M,A),A=0,R=[],!u&&P.length===s)break;if(U)continue}T-=V,A+=V;for(var f=0,c=I.length;f<c;f++){var Y=I[f];Y.setActive().setPosition(x,y),C.push(Y),R.push(Y),x+=Y.outerWidth+a}}R.length>0&&(P.push({children:R,width:A}),M=Math.max(M,A)),d.start+=C.length,d.isLastPage=d.start===S,d.maxLineWidth=M,d.linesHeight=P.length*t+e+v;var W=this.fixedWidth>0?this.fixedWidth:d.maxLineWidth+this.padding.left+this.padding.right,w=this.fixedHeight>0?this.fixedHeight:d.linesHeight+this.padding.top+this.padding.bottom,L=W-this.padding.left-this.padding.right,D=w-this.padding.top-this.padding.bottom-e-v;return cg(d,L,D),this.setSize(W,w),d},gg=function(m){return m=Xf(m,this.wrapConfig),pg.call(this,m)},mg=function(m,i,e){var v=m.hAlign,t=m.vAlign;typeof v=="string"&&(v=Wf[v],m.hAlign=v),typeof t=="string"&&(t=Hf[t],m.vAlign=t);var s=m.rtl,u=m.lines,n=m.lineWidth,a=m.linesWidth,o;switch(v){case 0:o=0;break;case 1:o=(i-a)/2;break;case 2:o=i-a;break}s&&(o+=n);for(var r=0,h=u.length;r<h;r++){var d=u[s?h-r-1:r],l=d.children,f=d.height,c;switch(t){case 0:c=0;break;case 1:c=(e-f)/2;break;case 2:c=e-f;break}for(var g=0,p=l.length;g<p;g++){var x=l[g];x.x+=o,x.y+=c}o+=n}};const Ft=Phaser.Utils.Objects.GetValue;var xg=function(m){var i=Ft(m,"start",0),e=Ft(m,"padding.top",0),v=Ft(m,"padding.bottom",0),t=Ft(m,"padding.left",0),s=Ft(m,"padding.right",0),u=Ft(m,"lineWidth",void 0),n;if(u===void 0)if(n=Ft(m,"maxLines",0),this.fixedWidth>0){var L=this.fixedWidth-this.padding.left-this.padding.right-t-s;u=L/n}else u=0;else if(this.fixedWidth>0){if(n=Ft(m,"maxLines",void 0),n===void 0){var L=this.fixedWidth-this.padding.left-this.padding.right;n=Math.floor(L/u)}}else n=Ft(m,"maxLines",0);var a=n===0,o=Ft(m,"fixedChildHeight",void 0);if(o===void 0){var r=Ft(m,"charPerLine",void 0);if(r!==void 0){var D=this.fixedHeight-this.padding.top-this.padding.bottom-e-v;o=Math.floor(D/r)}}var h=Ft(m,"wrapHeight",void 0);h===void 0&&(this.fixedHeight>0?h=this.fixedHeight-this.padding.top-this.padding.bottom:h=1/0);for(var d=Ft(m,"letterSpacing",0),l=Ft(m,"rtl",!0),f=Ft(m,"hAlign",l?2:0),c=Ft(m,"vAlign",0),g={start:i,isLastPage:!1,padding:{top:e,bottom:v,left:t,right:s},lineWidth:u,maxLines:n,fixedChildHeight:o,wrapHeight:h,letterSpacing:d,hAlign:f,vAlign:c,rtl:l,children:[],lines:[],maxLineHeight:0,linesWidth:0},p=this.children,x=0,y=p.length;x<y;x++)p[x].setActive(!1);h+=d;for(var T=this.padding.left+t,E=this.padding.top+e,S=T,C=E,P=h,R=i,A=p.length,M=g.children,O=g.lines,F=[],I=0,B=0;R<A;){var V=p[R];if(R++,!za(V)){V.setActive(),M.push(V),F.push(V);continue}var U=(o!==void 0?o:V.height)+d,Y=Uf(V);if(P<U||Y){if(Y&&(V.setActive().setPosition(S,C).setOrigin(.5),M.push(V),F.push(V)),S=T,C=E,P=h,O.push({children:F,height:I}),B=Math.max(B,I),I=0,F=[],!a&&O.length===n)break;if(Y)continue}P-=U,I+=U,V.setActive().setPosition(S,C).setOrigin(.5),M.push(V),F.push(V),C+=U}F.length>0&&(O.push({children:F,height:I}),B=Math.max(B,I)),g.start+=M.length,g.isLastPage=g.start===A,g.maxLineHeight=B,g.linesWidth=O.length*u+t+s;var W=this.fixedWidth>0?this.fixedWidth:g.linesWidth+this.padding.left+this.padding.right,w=this.fixedHeight>0?this.fixedHeight:g.maxLineHeight+this.padding.top+this.padding.bottom,L=W-this.padding.left-this.padding.right-t-s,D=w-this.padding.top-this.padding.bottom-e-v;return mg(g,L,D),this.setSize(W,w),g},yg=function(m){return m=Xf(m,this.wrapConfig),xg.call(this,m)},Tg=function(){var m=this.fixedWidth>0?this.fixedWidth:this.width,i=this.fixedHeight>0?this.fixedHeight:this.height;this.setSize(m,i),this.background.active&&this.background.draw();for(var e,v=0,t=this.children.length;v<t;v++)e=this.children[v],e.active&&e.draw();this.innerBounds.active&&this.innerBounds.draw()},Eg=function(){return this.children},Sg=function(){return this.lastAppendedChildren};const Cg=Phaser.Utils.Array.GetAll;var Pg=function(){return Cg(this.children,"active",!0)},Rg={setPadding:ig,getPadding:sg,modifyTextStyle:ng,removeChildren:rg,clearContent:ag,setText:lg,appendText:Mn,appendImage:Yf,appendCommand:ut,setWrapConfig:dg,runWordWrap:gg,runVerticalWrap:yg,drawContent:Tg,getChildren:Eg,getLastAppendedChildren:Sg,getActiveChildren:Pg};const Mg=Phaser.Utils.Objects.GetFastValue;var Ag={};class Og{constructor(i){this.pools=Mg(i,"pools",Ag)}free(i){if(!this.pools)return this;var e=i.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new _e),this.pools[e].push(i),i.onFree(),this}freeMultiple(i){if(!this.pools)return this;for(var e=0,v=i.length;e<v;e++)this.free(i[e]);return this}allocate(i){return!this.pools||!this.pools.hasOwnProperty(i)?null:this.pools[i].pop()}}const Ph=Phaser.Utils.Objects.IsPlainObject,_t=Phaser.Utils.Objects.GetValue;class ps extends qe{constructor(i,e,v,t,s,u){Ph(e)?(u=e,e=_t(u,"x",0),v=_t(u,"y",0),t=_t(u,"width",0),s=_t(u,"height",0)):Ph(t)&&(u=t,t=_t(u,"width",0),s=_t(u,"height",0));var n=t===0?1:t,a=s===0?1:s;super(i,e,v,n,a),this.type="rexDynamicText",this.autoRound=!0,this.padding={},this.textStyle=new zf(_t(u,"style",void 0)),this.background=new tg(this,_t(u,"background",void 0)),this.innerBounds=new eg(this,_t(u,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new Og(u),this.setFixedSize(t,s),this.setPadding(_t(u,"padding",0)),this.setWrapConfig(_t(u,"wrap",void 0));var o=_t(u,"text",void 0);o&&this.setText(o)}setFixedSize(i,e){return i===void 0&&(i=0),e===void 0&&(e=0),i>0&&e>0?(this.fixedWidth!==i||this.fixedHeight!==e)&&(this.dirty=!0):this.dirty=!0,this.fixedWidth=i,this.fixedHeight=e,this}updateTexture(){return this.clear(),this.drawContent(),super.updateTexture(),this}}Object.assign(ps.prototype,Rg);et.register("dynamicText",function(m,i,e,v,t){var s=new ps(this.scene,m,i,e,v,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.DynamicText",ps);var Ui={setEventEmitter(m,i){return i===void 0&&(i=Phaser.Events.EventEmitter),this._privateEE=m===!0||m===void 0,this._eventEmitter=this._privateEE?new i:m,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(m){return this._eventEmitter&&m&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},Rh=function(m){return m.replace(Lg,"\\$&").replace(Fg,"\\x2d")},Lg=/[|\\{}()[\]^$+*?.]/g,Fg=/-/g,Ig=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,$f=function(m){return typeof m!="string"||(m===""?m=null:Ig.test(m)?m=parseFloat(m):m==="false"?m=!1:m==="true"&&(m=!0)),m},wg=function(m,i){if(m==null)return[];for(var e=m.split(","),v=0,t=e.length;v<t;v++)e[v]=i(e[v]);return e};const Dg="[a-z0-9-_.]+",Bg="[ #a-z-_.0-9,|&]+",Ng=function(m){return m};class Jf{constructor(i){this.setEventEmitter(Dt(i,"eventEmitter",void 0)),this.setTagExpression(Dt(i,"regex.tag",Dg)),this.setValueExpression(Dt(i,"regex.value",Bg)),this.setValueConverter(Dt(i,"valueConvert",!0));var e=Dt(i,"delimiters","<>");this.setDelimiters(e[0],e[1]),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(i){return this.tagExpression=i,this}setValueExpression(i){return this.valueExpression=i,this}setValueConverter(i){return i===!0?i=$f:i||(i=Ng),this.valueConverter=i,this}setDelimiters(i,e){e===void 0&&(e=i[1],i=i[0]),this.delimiterLeft=i,this.delimiterRight=e,i=Rh(i),e=Rh(e);var v=`${i}(${this.tagExpression})(=(${this.valueExpression}))?${e}`,t=`${i}/(${this.tagExpression})${e}`;return this.reTagOn=RegExp(v,"i"),this.reTagOff=RegExp(t,"i"),this.reSplit=RegExp(`${v}|${t}`,"gi"),this}setSource(i){return this.source=i,this}resetIndex(i){return i===void 0&&(i=0),this.progressIndex=i,this.reSplit.lastIndex=i,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this}start(i){return this.setSource(i).restart(),this}restart(){this.resetIndex().next()}next(){this.isPaused&&this.onResume();var i=this.source,e=i.length;for(this.reSplit.lastIndex===0&&this.onStart();!this.isPaused;){var v=this.reSplit.exec(i);if(!v){this.progressIndex<e&&this.onContent(i.substring(this.progressIndex,e)),this.onComplete();return}var t=v[0],s=this.reSplit.lastIndex-t.length;this.progressIndex<s&&this.onContent(i.substring(this.progressIndex,s)),this.reTagOff.test(t)?this.onTagEnd(t):this.onTagStart(t),this.progressIndex=this.reSplit.lastIndex}}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}onContent(i){this.emit("content",i),this.lastContent=i}onTagStart(i){var e=i.match(this.reTagOn),v=e[1],t=wg(e[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${v}`,...t),this.skipEventFlag||this.emit("+",v,...t),this.lastTagStart=v}onTagEnd(i){var e=i.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${e}`),this.skipEventFlag||this.emit("-",e),this.lastTagEnd=e}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.emit("complete",this),this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}}Object.assign(Jf.prototype,Ui);const Gg=Phaser.Utils.Objects.GetValue;var Vg=function(m,i,e){var v=Gg(e,"tags.color","color"),t;i.on("start",function(){t=m.textStyle.color}).on(`+${v}`,function(s){m.textStyle.setColor(s),i.skipEvent()}).on(`-${v}`,function(){m.textStyle.setColor(t),i.skipEvent()}).on("complete",function(){m.textStyle.setColor(t)})};const bg=Phaser.Utils.Objects.GetValue;var zg=function(m,i,e){var v=bg(e,"tags.stroke","stroke"),t;i.on("start",function(){t=m.textStyle.stroke,m.textStyle.setStrokeStyle(null)}).on(`+${v}`,function(s){s===void 0&&(s=t),m.textStyle.setStrokeStyle(s),i.skipEvent()}).on(`-${v}`,function(){m.textStyle.setStrokeStyle(null),i.skipEvent()}).on("complete",function(){m.textStyle.setStrokeStyle(t)})};const Ug=Phaser.Utils.Objects.GetValue;var Yg=function(m,i,e){var v=Ug(e,"tags.b","b");i.on("start",function(){m.textStyle.setBold(!1)}).on(`+${v}`,function(){m.textStyle.setBold(!0),i.skipEvent()}).on(`-${v}`,function(){m.textStyle.setBold(!1),i.skipEvent()})};const Xg=Phaser.Utils.Objects.GetValue;var Wg=function(m,i,e){var v=Xg(e,"tags.i","i");i.on("start",function(){m.textStyle.setItalic(!1)}).on(`+${v}`,function(){m.textStyle.setItalic(!0),i.skipEvent()}).on(`-${v}`,function(){m.textStyle.setItalic(!1),i.skipEvent()})};const Hg=Phaser.Utils.Objects.GetValue;var $g=function(m,i,e){var v=Hg(e,"tags.size","size"),t;i.on("start",function(){t=m.textStyle.fontSize}).on(`+${v}`,function(s){m.textStyle.setFontSize(s),i.skipEvent()}).on(`-${v}`,function(){m.textStyle.setFontSize(t),i.skipEvent()}).on("complete",function(){m.textStyle.setFontSize(t)})};const Jg=Phaser.Utils.Objects.GetValue;var Kg=function(m,i,e){var v=Jg(e,"tags.y","y"),t;i.on("start",function(){t=m.textStyle.offsetY,m.textStyle.setOffsetY(0)}).on(`+${v}`,function(s){s===void 0&&(s=t),m.textStyle.setOffsetY(s),i.skipEvent()}).on(`-${v}`,function(){m.textStyle.setOffsetY(0),i.skipEvent()}).on("complete",function(){m.textStyle.setOffsetY(0)})};const Zg=Phaser.Utils.Objects.GetValue;var Qg=function(m,i,e){var v=Zg(e,"tags.shadow","shadow"),t;i.on("start",function(){t=m.textStyle.shadowColor,m.textStyle.setShadowColor(null)}).on(`+${v}`,function(s){s===void 0&&(s=t),m.textStyle.setShadowColor(s),i.skipEvent()}).on(`-${v}`,function(){m.textStyle.setShadowColor(null),i.skipEvent()}).on("complete",function(){m.textStyle.setShadowColor(t)})};const jg=Phaser.Utils.Objects.GetValue;var kg=function(m,i,e){var v=jg(e,"tags.img","img");i.on(`+${v}`,function(t){var s=m.imageManager.get(t);Yf.call(m,s.key,s.frame,{width:s.width,hieght:s.height,leftSpace:s.left,rightSpace:s.right}),i.skipEvent()}).on(`-${v}`,function(){i.skipEvent()})};const qg=Phaser.Utils.Objects.GetValue;var _g=function(m,i,e){var v=qg(e,"tags.speed","speed"),t;i.on("start",function(){t=m.typeWriter.speed}).on(`+${v}`,function(s){Mh(m,s),i.skipEvent()}).on(`-${v}`,function(){Mh(m,t),i.skipEvent()}).on("complete",function(){m.typeWriter.speed=t})},tm=function(m){this.typeWriter.setSpeed(m)},Mh=function(m,i){ut.call(m,"speed",tm,i,m)};const em=Phaser.Utils.Objects.GetValue;var im=function(m,i,e){var v=em(e,"tags.se","se");i.on(`+${v}`,function(t,s){ut.call(m,"se",sm,[t,s],m),i.skipEvent()}).on(`-${v}`,function(){i.skipEvent()})},sm=function(m){if(!this.skipSoundEffect){var i=m[0],e=m[1];this.soundManager.playSoundEffect(i),e&&this.soundManager.fadeInSoundEffect(e)}};const nm=Phaser.Utils.Objects.GetValue;var rm=function(m,i,e){var v=nm(e,"tags.se.fadein","se.fadein");i.on(`+${v}`,function(t){ut.call(m,"se.fadein",am,t,m),i.skipEvent()}).on(`-${v}`,function(){i.skipEvent()})},am=function(m){this.soundManager.fadeInSoundEffect(m)};const om=Phaser.Utils.Objects.GetValue;var hm=function(m,i,e){var v=om(e,"tags.se.fadeout","se.fadeout");i.on(`+${v}`,function(t,s){s=s==="stop",ut.call(m,"se.fadeout",lm,[t,s],m),i.skipEvent()}).on(`-${v}`,function(){i.skipEvent()})},lm=function(m){this.soundManager.fadeOutSoundEffect(...m)};const um=Phaser.Utils.Objects.GetValue;var fm=function(m,i,e){var v=um(e,"tags.se.volume","se.volume");i.on(`+${v}`,function(t){ut.call(m,"se.volume",dm,t,m),i.skipEvent()}).on(`-${v}`,function(){i.skipEvent()})},dm=function(m){this.soundManager.setSoundEffectVolume(m)};const vm=Phaser.Utils.Objects.GetValue;var cm=function(m,i,e){var v=vm(e,"tags.bgm","bgm");i.on(`+${v}`,function(t,s){ut.call(m,"bgm",pm,[t,s],m),i.skipEvent()}).on(`-${v}`,function(){ut.call(m,"bgm.stop",gm,void 0,m),i.skipEvent()})},pm=function(m){var i=m[0],e=m[1];this.soundManager.playBackgroundMusic(i),e&&this.soundManager.fadeInBackgroundMusic(e)},gm=function(){this.soundManager.stopBackgroundMusic()};const mm=Phaser.Utils.Objects.GetValue;var xm=function(m,i,e){var v=mm(e,"tags.bgm.fadein","bgm.fadein");i.on(`+${v}`,function(t){ut.call(m,"bgm.fadein",ym,t,m),i.skipEvent()}).on(`-${v}`,function(){i.skipEvent()})},ym=function(m){this.soundManager.fadeInBackgroundMusic(m)};const Tm=Phaser.Utils.Objects.GetValue;var Em=function(m,i,e){var v=Tm(e,"tags.bgm.fadeout","bgm.fadeout");i.on(`+${v}`,function(t,s){ut.call(m,"bgm.fadeout",Sm,[t,s],m),i.skipEvent()}).on(`-${v}`,function(){i.skipEvent()})},Sm=function(m){this.soundManager.fadeOutBackgroundMusic(...m)};const Cm=Phaser.Utils.Objects.GetValue;var Pm=function(m,i,e){var v=Cm(e,"tags.bgm.cross","bgm.cross");i.on(`+${v}`,function(t,s){ut.call(m,"bgm.cross",Rm,[t,s],m),i.skipEvent()}).on(`-${v}`,function(){i.skipEvent()})},Rm=function(m){this.soundManager.crossFadeBackgroundMusic(...m)};const Mm=Phaser.Utils.Objects.GetValue;var Am=function(m,i,e){var v=Mm(e,"tags.bgm.pause","bgm.pause");i.on(`+${v}`,function(){ut.call(m,"bgm.pause",Om,void 0,m),i.skipEvent()}).on(`-${v}`,function(){ut.call(m,"bgm.resume",Lm,void 0,m),i.skipEvent()})},Om=function(){this.soundManager.pauseBackgroundMusic()},Lm=function(){this.soundManager.resumeBackgroundMusic()};const Fm=Phaser.Utils.Objects.GetValue;var Im=function(m,i,e){var v=Fm(e,"tags.camera.fadein","camera.fadein");i.on(`+${v}`,function(t,s,u,n){ut.call(m,"camera.fadein",wm,[t,s,u,n],m),i.skipEvent()})},wm=function(m){this.camera.fadeIn(...m)};const Dm=Phaser.Utils.Objects.GetValue;var Bm=function(m,i,e){var v=Dm(e,"tags.camera.fadeout","camera.fadeout");i.on(`+${v}`,function(t,s,u,n){ut.call(m,"camera.fadeout",Nm,[t,s,u,n],m),i.skipEvent()})},Nm=function(m){this.camera.fadeOut(...m)};const Gm=Phaser.Utils.Objects.GetValue;var Vm=function(m,i,e){var v=Gm(e,"tags.camera.shake","camera.shake");i.on(`+${v}`,function(t,s){ut.call(m,"camera.shake",bm,[t,s],m),i.skipEvent()})},bm=function(m){this.camera.shake(...m)};const zm=Phaser.Utils.Objects.GetValue;var Um=function(m,i,e){var v=zm(e,"tags.camera.flash","camera.flash");i.on(`+${v}`,function(t,s,u,n){ut.call(m,"camera.flash",Ym,[t,s,u,n],m),i.skipEvent()})},Ym=function(m){this.camera.flash(...m)};const Xm=Phaser.Utils.Objects.GetValue;var Wm=function(m,i,e){var v=Xm(e,"tags.camera.zoom","camera.zoom");i.on(`+${v}`,function(t){ut.call(m,"camera.zoom",Hm,t,m),i.skipEvent()}).on(`+${v}.to`,function(t,s,u){ut.call(m,"camera.zoom.to",$m,[t,s,u],m),i.skipEvent()})},Hm=function(m){this.camera.setZoom(m)},$m=function(m){this.camera.zoomTo(...m)};const Jm=Phaser.Utils.Objects.GetValue,Ah=Phaser.Math.DegToRad;var Km=function(m,i,e){var v=Jm(e,"tags.camera.rotate","camera.rotate");i.on(`+${v}`,function(t){t=Ah(t),ut.call(m,"camera.rotate",Zm,t,m),i.skipEvent()}).on(`+${v}.to`,function(t,s,u){t=Ah(t),ut.call(m,"camera.rotate.to",Qm,[t,s,u],m),i.skipEvent()})},Zm=function(m){this.camera.setRotation(m)},Qm=function(m){var i=m[0],e=m[1],v=m[2];this.camera.rotateTo(i,!1,e,v)};const jm=Phaser.Utils.Objects.GetValue;var km=function(m,i,e){var v=jm(e,"tags.camera.scroll","camera.scroll");i.on(`+${v}`,function(t,s){ut.call(m,"camera.scroll",qm,[t,s],m),i.skipEvent()}).on(`+${v}.to`,function(t,s,u,n){ut.call(m,"camera.scroll.to",_m,[t,s,u,n],m),i.skipEvent()})},qm=function(m){this.camera.setScroll(...m)},_m=function(m){var i=m[0],e=m[1],v=m[2],t=m[3],s=this.camera,u=s.scrollX,n=s.scrollY;s.setScroll(i,e),i+=s.centerX,e+=s.centerY,s.setScroll(u,n),s.pan(i,e,v,t)};const Oh=Phaser.Utils.Objects.GetValue;var tx=function(m,i,e){var v=Oh(e,"tags.wait","wait"),t=Oh(e,"tags.click","click");i.on(`+${v}`,function(s){Lh(m,s),i.skipEvent()}).on(`-${v}`,function(){i.skipEvent()}).on(`+${t}`,function(){Lh(m,"click"),i.skipEvent()}).on(`-${t}`,function(){i.skipEvent()})},ex=function(m){this.typeWriter.wait(m)},Lh=function(m,i){ut.call(m,"wait",ex,i,m)};const ix=Phaser.Utils.Objects.GetValue;var Fh=function(m,i){return m.length===2&&m[0]===i},sx=function(m,i,e){var v=ix(e,"sprite","sprite");!v||i.on("+",function(t,...s){if(!i.skipEventFlag){var u=t.split(".");if(Fh(u,v)){var n=u[1];ut.call(m,"sprite.add",nx,[n,...s],m)}else return;i.skipEvent()}}).on("-",function(t){if(!i.skipEventFlag){var s=t.split(".");if(Fh(s,v)){var u=s[1];ut.call(m,"sprite.remove",rx,u,m)}else return;i.skipEvent()}})},nx=function(m){this.spriteManager.add(...m)},rx=function(m){this.spriteManager.remove(m)};const ax=Phaser.Utils.Objects.GetValue;var ox=function(m,i,e){var v=ax(e,"sprite","sprite");!v||i.on("-",function(t){if(!i.skipEventFlag){if(t===v)ut.call(m,"sprite.removeall",hx,void 0,m);else return;i.skipEvent()}})},hx=function(){this.spriteManager.removeAll()};const lx=Phaser.Utils.Objects.GetValue;var ux=function(m,i){return m.length===3&&m[0]===i&&m[2]==="texture"},fx=function(m,i,e){var v=lx(e,"sprite","sprite");!v||i.on("+",function(t,s,u){if(!i.skipEventFlag){var n=t.split(".");if(ux(n,v)){var a=n[1];ut.call(m,"sprite.texture",dx,[a,s,u],m)}else return;i.skipEvent()}})},dx=function(m){this.spriteManager.setTexture(...m)};const vx=Phaser.Utils.Objects.GetValue;var Ih=function(m,i){return m.length===3&&m[0]===i&&m[2]==="play"},cx=function(m,i){return m.length===3&&m[0]===i&&m[2]==="stop"},px=function(m,i,e){var v=vx(e,"sprite","sprite");!v||i.on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(Ih(s,v))u=s[1];else return;var n=Array.prototype.slice.call(arguments,1);ut.call(m,"sprite.play",gx,[u,n],m),i.skipEvent()}}).on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(cx(s,v))u=s[1];else return;ut.call(m,"sprite.stop",wh,u,m),i.skipEvent()}}).on("-",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(Ih(s,v))u=s[1];else return;ut.call(m,"sprite.stop",wh,u,m),i.skipEvent()}})},gx=function(m){var i=m[0],e=m[1],v=e.shift();this.spriteManager.playAnimation(i,v),e.length>0&&this.spriteManager.chainAnimation(i,e)},wh=function(m){this.spriteManager.stopAnimation(m)};const mx=Phaser.Utils.Objects.GetValue;var xx=function(m,i){return m.length===3&&m[0]===i&&m[2]==="chain"},yx=function(m,i,e){var v=mx(e,"sprite","sprite");!v||i.on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(xx(s,v))u=s[1];else return;var n=Array.prototype.slice.call(arguments,1);ut.call(m,"sprite.chain",Tx,[u,n],m),i.skipEvent()}})},Tx=function(m){this.spriteManager.chainAnimation(...m)};const Ex=Phaser.Utils.Objects.GetValue;var Sx=function(m,i){return m.length===3&&m[0]===i&&m[2]==="pause"},Cx=function(m,i,e){var v=Ex(e,"sprite","sprite");!v||i.on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(Sx(s,v))u=s[1];else return;ut.call(m,"sprite.pause",Px,u,m),i.skipEvent()}})},Px=function(m){this.spriteManager.pauseAnimation(m)};const Rx=Phaser.Utils.Objects.GetValue;var Mx=function(m,i){return m.length===3&&m[0]===i},Ax=function(m,i,e){var v=Rx(e,"sprite","sprite");!v||i.on("+",function(t,s){if(!i.skipEventFlag){var u=t.split("."),n,a;if(Mx(u,v))n=u[1],a=u[2];else return;ut.call(m,"sprite.set",Ox,[n,a,s],m),i.skipEvent()}})},Ox=function(m){this.spriteManager.setProperty(...m)};const Lx=Phaser.Utils.Objects.GetValue;var Fx={to:!0,yoyo:!0},Ix=function(m,i){return m.length===4&&m[0]===i&&Fx[m[3]]},wx=function(m,i,e){var v=Lx(e,"sprite","sprite");!v||i.on("+",function(t,s,u,n){if(!i.skipEventFlag){var a=t.split("."),o,r,h;if(Ix(a,v))o=a[1],r=a[2],h=a[3]==="yoyo";else return;ut.call(m,"sprite.ease",Dx,[o,r,s,u,n,h],m),i.skipEvent()}})},Dx=function(m){this.spriteManager.easeProperty(...m)},Bx=function(m,i,e){i.on("start",function(){m.emit("parser.start",i)}).on("+",function(v,...t){if(!i.skipEventFlag){var s=`+${v}`;m.emit(`parser.${s}`,i,...t),Dh(m,s,t)}}).on("-",function(v){if(!i.skipEventFlag){var t=`-${v}`;m.emit(`parser.${t}`,i),Dh(m,t)}}).on("complete",function(){m.emit("parser.complete",i)})},Nx=function(m,i){var e=`tag.${i}`;m==null?this.emit(e):this.emit(e,...m)},Dh=function(m,i,e){ut.call(m,i,Nx,e,m)};const Gx=Phaser.Utils.Objects.GetValue;var Vx=function(m,i,e){var v=Gx(e,"tags.r","r");i.on(`+${v}`,function(){Mn.call(m,`
`),i.skipEvent()}).on(`-${v}`,function(){i.skipEvent()})},bx=function(m,i,e){i.on("content",function(v){Mn.call(m,v)})};const Bh=[Vg,zg,Yg,Wg,$g,Kg,Qg,kg,_g,im,rm,hm,fm,cm,xm,Em,Pm,Am,Im,Bm,Vm,Um,Wm,Km,km,tx,sx,ox,fx,px,yx,Cx,Ax,wx,Bx,Vx,bx];var zx=function(m,i,e){for(var v=0,t=Bh.length;v<t;v++)Bh[v](m,i,e)},Ux=function(m,i){for(var e=m.commentLineStart,v=i.split(`
`),t=0,s=v.length;t<s;t++){var u=v[t];u===""||(u.trim().length===0||e&&u.startsWith(e))&&(v[t]="")}return v.join("")};const Yx=Phaser.Utils.Objects.GetValue;class Xx extends Jf{constructor(i,e){e===void 0&&(e={}),e.hasOwnProperty("delimiters")||(e.delimiters="[]"),super(e),zx(i,this,e),this.setCommentLineStartSymbol(Yx(e,"comment","//"))}setCommentLineStartSymbol(i){return this.commentLineStart=i,this}start(i){return super.start(Ux(this,i)),this}}var Kf=function(m,i){return new Promise(function(e,v){m.once(i,function(){e()})})},Bt=function(m){return Kf(m,"complete")},Wx=function(m){return this.children=m,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(m),this.typing(),Bt(this)};const Hx="delay",Zf="anim";var Qf=function(m){m===void 0&&(m=0);var i=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var e=this.getNextChild();if(!e){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(za(e)){var v=this.animationConfig;if(v.duration>0){var t=this.timeline.addTimer({name:Zf,target:e,duration:v.duration,yoyo:v.yoyo,onStart:v.onStart,onProgress:v.onProgress,onComplete:v.onComplete});this.skipTypingAnimation&&t.seek(1)}else v.onStart&&v.onStart(e,0);this.textPlayer.emit("typing",e),i+=this.speed+m,m=0;var s=this.index===this.children.length;if(i>0&&!s){this.typingTimer=this.timeline.addTimer({name:Hx,target:this,duration:i,onComplete:function(u,n,a){u.typingTimer=void 0,Qf.call(u,a.remainder)}});break}}else og(e)&&e.exec()}this.inTypingProcessLoop=!1},$x=function(){return this.timeline.pause(),this},Jx=function(){return this.timeline.resume(),this},Kx=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},Zx=function(m){return this.isTypingPaused?(m===void 0&&(m=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=m):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(m)),this):this};const Ce="_remove.wait",na="_remove.play",Nh=[Ce,na];var ti=function(m,i,e,v,t){return function(){m.emit(Ce,t),i.apply(v,e)}},Gh=function(m,i,e,v,t){var s=ti(m,e,v,t,"custom"),u=i?`wait.${i}`:"wait";m.emit(u,s)},Qx=function(m,i,e,v,t){return m.typeWriter.timeline.delayCall(i,e,v,t)},jx=function(m,i,e,v,t){var s=ti(m,e,v,t,"time"),u;m.once(Ce,function(){u&&(u.remove(),u=void 0)}),u=Qx(m,i,s),m.emit("wait.time",i)},kx=function(m,i,e,v){var t=ti(m,i,e,v,"click"),s=m.clickEE;m.once(Ce,function(){s.off("pointerdown",t,m)}),s.once("pointerdown",t,m),m.emit("wait.click")},Vh=function(m,i,e,v,t){var s=ti(m,e,v,t,"music");i&&(m.once(Ce,function(){i.off("complete",s,m)}),i.once("complete",s,m)),m.emit("wait.music",i),i||s()},qx=function(m){switch(m){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},_x=function(m,i,e,v,t){var s=ti(m,e,v,t,`camera.${i}`),u=m.camera,n,a;switch(i){case"camera.fadein":n=u.fadeEffect,a="camerafadeincomplete";break;case"camera.fadeout":n=u.fadeEffect,a="camerafadeoutcomplete";break;case"camera.flash":n=u.flashEffect,a="cameraflashcomplete";break;case"camera.shake":n=u.shakeEffect,a="camerashakecomplete";break;case"camera.zoom":n=u.zoomEffect,a="camerazoomcomplete";break;case"camera.rotate":n=u.rotateToEffect,a="camerarotatecomplete";break;case"camera.scroll":n=u.panEffect,a="camerapancomplete";break}n.isRunning?(m.once(Ce,function(o){u.off(a,s,m)}),u.once(a,s,m),m.emit("wait.camera",i)):(m.emit("wait.camera",i),s())},t0=function(m,i,e,v,t){var s=ti(m,e,v,t,"keydown"),u=`keydown-${i.toUpperCase()}`,n=m.scene.input.keyboard;m.once(Ce,function(){n.off(u,s,m)}),n.once(u,s,m),m.emit("wait.keydown",i)},e0=function(m){var i=m.split(".");return i[0]==="sprite"&&i.length<=3},i0=function(m,i,e,v,t){var s=ti(m,e,v,t),u=i.split("."),n=m.spriteManager;switch(u.length){case 1:n.isEmpty?(m.emit("wait.sprite"),s()):(m.once(Ce,function(l){n.off("empty",s,m)}),n.once("empty",s,m),m.emit("wait.sprite"));break;case 2:var r=u[1];if(n.has(r)){var a=m.spriteManager.get(r),o=a.sprite;m.once(Ce,function(){o.off("destroy",s,m)}),o.once("destroy",s,m),m.emit("wait.sprite",r)}else m.emit("wait.sprite",r),s();break;case 3:var r=u[1],h=u[2],d=m.spriteManager.getTweenTask(r,h);d?(m.once(Ce,function(){d.off("complete",s,m)}),d.once("complete",s,m),m.emit("wait.sprite",r,h)):(m.emit("wait.sprite",r,h),s());break}};const s0=Phaser.Input.Keyboard.KeyCodes;var jf=function(m,i,e,v,t){typeof i=="string"&&i.length>1&&i.indexOf("|")!==-1?i=i.split("|"):i=[i];for(var s=0,u=i.length;s<u;s++){var n=i[s];if(n==null||n==="wait")Gh(m,void 0,e,v,t);else if(typeof n=="number"||!isNaN(n))jx(m,parseFloat(n),e,v,t);else if(n==="click")kx(m,e,v,t);else if(n==="se"){var a=m.soundManager.getLastSoundEffect();Vh(m,a,e,v,t)}else if(n==="bgm"){var a=m.soundManager.getBackgroundMusic();Vh(m,a,e,v,t)}else s0.hasOwnProperty(n.toUpperCase())?t0(m,n,e,v,t):qx(n)?_x(m,n,e,v,t):e0(n)?i0(m,n,e,v,t):Gh(m,n,e,v,t)}},n0=function(m){return this.ignoreWait?this:(this.pauseTyping(),jf(this.textPlayer,m,this.resumeTyping,[],this),this)},r0=function(m){return this.timeline.setTimeScale(m),this},a0=function(m){return m===void 0&&(m=!0),this.ignoreWait=m,this},o0=function(m){if(m===void 0&&(m=!0),this.skipTypingAnimation=m,m)for(var i=this.timeline.getTimers(Zf),e=0,v=i.length;e<v;e++)i[e].seek(1);return this},h0=function(m){if(m===void 0&&(m=!0),this.skipSoundEffect=m,m){var i=this.textPlayer._soundManager;i&&i.fadeOutAllSoundEffects(100,!0)}return this},l0=function(){return this.typingTimer&&this.typingTimer.seek(1),this},u0={start:Wx,typing:Qf,pause:$x,resume:Jx,pauseTyping:Kx,resumeTyping:Zx,wait:n0,setTimeScale:r0,setIgnoreWait:a0,setSkipTypingAnimation:o0,setSkipSoundEffect:h0,skipCurrentTypingDelay:l0};const f0=Phaser.Scene;var fn=function(m){return m instanceof f0},kf=function(m){if(m==null||typeof m!="object")return null;if(fn(m))return m;if(m.scene&&fn(m.scene))return m.scene;if(m.parent&&m.parent.scene&&fn(m.parent.scene))return m.parent.scene};const d0=Phaser.Utils.Objects.GetValue;class zt{constructor(i,e){this.parent=i,this.scene=kf(i),this.isShutdown=!1,this.setEventEmitter(d0(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(i){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(i){this.shutdown(i)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(i,e){this.destroy(e)}}Object.assign(zt.prototype,Ui);const v0=Phaser.Utils.Objects.GetValue;class An extends zt{constructor(i,e){super(i,e),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(v0(e,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(i){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(i))}setTickingMode(i){typeof i=="string"&&(i=c0[i]),this.tickingMode=i}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(i){this._isRunning!==i&&(this._isRunning=i,this.tickingMode===1&&i!=this.tickingState&&(i?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const c0={no:0,lazy:1,always:2},ur=Phaser.Utils.Objects.GetValue;class p0 extends An{constructor(i,e){super(i,e),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.isRunning=ur(i,"isRunning",!1),this.timeScale=ur(i,"timeScale",1),this.now=ur(i,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(i){return i===void 0&&(i=0),this.delta=0,this.now=i,super.start(),this}seek(i){return this.now=i,this}setTimeScale(i){return this.timeScale=i,this}tick(i){return i*=this.timeScale,this.now+=i,this.delta=i,this.emit("update",this.now,this.delta),this}}class qf extends p0{startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.events.off("update",this.update,this)}update(i,e){return!this.isRunning||this.timeScale===0?this:(this.tick(e),this)}}var g0=function(m,i){return i===void 0&&(i=.5),m<=i?m=m/i:m=1-(m-i)/(1-i),m};const bh=Phaser.Math.Clamp;class m0{constructor(i,e){this.setTimeline(i).reset(e)}setTimeline(i){return this.timeline=i,this}setName(i){return this.name=i,this}setCallbacks(i,e,v,t){return this.target=i,this.onStart=e,this.onProgress=v,this.onComplete=t,this}setDuration(i,e){return e===void 0&&(e=!1),this.duration=i,this.remainder=i,this.t=0,this.yoyo=e,this}setPaused(i){return this.isPaused=i,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(i){return this.removed=i,this}remove(){return this.removed=!0,this}seek(i){return this.remainder=this.duration*(1-i),this}reset(i){return this.setName(i.name).setDuration(i.duration,i.yoyo).setCallbacks(i.target,i.onStart,i.onProgress,i.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var i=1-this.remainder/this.duration;return i=bh(i,0,1),this.yoyo&&(i=g0(i)),i}setProgress(i){i=bh(i,0,1),this.remainder=this.duration*(1-i)}runCallback(i){!i||i(this.target,this.t,this)}update(i,e){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=e,this.t=this.getProgress(),this.runCallback(this.onProgress);var v=this.remainder<=0;return v&&this.runCallback(this.onComplete),v}}class x0 extends _e{allocate(){return this.pop()}free(i){i.onFree(),this.push(i)}freeMultiple(i){for(var e=0,v=i.length;e<v;e++)this.free(i[e]);return this}}const y0=Phaser.Utils.Objects.GetValue,T0=new x0;class E0 extends qf{constructor(i,e){super(i,e),this.addedTimers=[],this.timers=[],this.timerPool=y0(e,"pool",T0)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(i){var e=this.timerPool.allocate();return e?e.setTimeline(this).reset(i):e=new m0(this,i),this.addedTimers.push(e),e.runCallback(e.onStart),this.isRunning||this.start(),e}delayCall(i,e,v,t){var s=this.addTimer({duration:i,onComplete:function(u,n,a){v===void 0&&(v=[]),v.push(a),e.apply(t,v)}});return s}getTimers(i){for(var e=[],v=[this.addedTimers,this.timers],t=0,s=v.length;t<s;t++)for(var u=v[t],n=0,a=u.length;n<a;n++){var o=u[n];o.name===i&&e.push(o)}return e}update(i,e){super.update(i,e),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var v=[],t=0,s=this.timers.length;t<s;t++){var u=this.timers[t],n=u.update(this.now,this.delta);n?this.timerPool.free(u):v.push(u)}this.timers=v,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}const fr=Phaser.Utils.Objects.GetValue;class _f{constructor(i,e){this.setEventEmitter(),this.textPlayer=i,this.isPageTyping=!1,this.timeline=new E0(i),this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(fr(e,"onTypingStart",C0)),this.setSpeed(fr(e,"speed",250)),this.setAnimationConfig(fr(e,"animation",void 0))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.timeline.destroy(),this.timeline=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}setSpeed(i){return this.speed=i,this}setTypingStartCallback(i){return this.onTypeStart=i,this}setAnimationConfig(i){return i===void 0?i={}:i===!1&&(i={duration:0}),i.hasOwnProperty("duration")||(i.duration=1e3),i.hasOwnProperty("onStart")||(i.onStart=S0),this.animationConfig=i,this}getNextChild(){var i=this.children[this.index];return this.index=Math.min(this.index+1,this.children.length),i}}var S0=function(m){m.setVisible()},C0=function(m){for(var i=0,e=m.length;i<e;i++)m[i].setVisible(!1)};Object.assign(_f.prototype,Ui,u0);class P0 extends An{startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.events.off("update",this.update,this)}}const be=Phaser.Utils.Objects.GetValue,zh=Phaser.Math.Clamp;class td{constructor(i){this.resetFromJSON(i)}resetFromJSON(i){this.state=be(i,"state",Ki),this.timeScale=be(i,"timeScale",1),this.delay=be(i,"delay",0),this.repeat=be(i,"repeat",0),this.repeatCounter=be(i,"repeatCounter",0),this.duration=be(i,"duration",0),this.nowTime=be(i,"nowTime",0),this.justRestart=be(i,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(i){return this.timeScale=i,this}setDelay(i){return i===void 0&&(i=0),this.delay=i,this}setDuration(i){return this.duration=i,this}setRepeat(i){return this.repeat=i,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?Ei:Ti,this.repeatCounter=0,this}stop(){return this.state=Ki,this}update(i,e){this.state===Ki||this.state===bs||e===0||this.timeScale===0||(this.nowTime+=e*this.timeScale,this.state=this.nowTime>=0?Ei:Ti,this.justRestart=!1,this.nowTime>=this.duration&&(this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=bs)))}get t(){var i;switch(this.state){case Ki:case Ti:i=0;break;case Ei:i=this.nowTime/this.duration;break;case bs:i=1;break}return zh(i,0,1)}set t(i){i=zh(i,-1,1),i<0?(this.state=Ti,this.nowTime=-this.delay*i):(this.state=Ei,this.nowTime=this.duration*i,i===1&&this.repeat!==0&&this.repeatCounter++)}get isIdle(){return this.state===Ki}get isDelay(){return this.state===Ti}get isCountDown(){return this.state===Ei}get isRunning(){return this.state===Ti||this.state===Ei}get isDone(){return this.state===bs}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}}const Ki=0,Ti=1,Ei=2,bs=-1;class R0 extends P0{constructor(i,e){super(i,e),this.timer=new td}shutdown(i){this.isShutdown||(super.shutdown(i),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const zs=Phaser.Utils.Objects.GetValue,Uh=Phaser.Utils.Objects.GetAdvancedValue,M0=Phaser.Tweens.Builders.GetEaseFunction;class Yi extends R0{resetFromJSON(i){return this.timer.resetFromJSON(zs(i,"timer")),this.setEnable(zs(i,"enable",!0)),this.setDelay(Uh(i,"delay",0)),this.setDuration(Uh(i,"duration",1e3)),this.setEase(zs(i,"ease","Linear")),this.setRepeat(zs(i,"repeat",0)),this}setEnable(i){return i==null&&(i=!0),this.enable=i,this}setDelay(i){return this.delay=i,this}setDuration(i){return this.duration=i,this}setEase(i){return i===void 0&&(i="Linear"),this.ease=i,this.easeFn=M0(i),this}setRepeat(i){return this.repeat=i,this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}update(i,e){if(!this.isRunning||!this.enable)return this;var v=this.parent;if(!v.active)return this;var t=this.timer;return t.update(i,e),t.isDelay||this.updateGameObject(v,t),this.emit("update",v,this),t.isDone&&this.complete(),this}updateGameObject(i,e){}}const Yh=Phaser.Utils.Objects.GetValue,Xh=Phaser.Utils.Objects.GetAdvancedValue,A0=Phaser.Math.Linear;class ed extends Yi{constructor(i,e,v){e.scene=i,e.active=!0,super(e,v),this.volume={},this.resetFromJSON(v)}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(Yh(i,"mode",0)),this.setEnable(Yh(i,"enable",!0)),this.setVolumeRange(Xh(i,"volume.start",this.parent.volume),Xh(i,"volume.end",0)),this}setMode(i){return typeof i=="string"&&(i=O0[i]),this.mode=i,this}setVolumeRange(i,e){return this.volume.start=i,this.volume.end=e,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(i,e){i.volume=A0(this.volume.start,this.volume.end,e.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}}const O0={stop:1,destroy:2};var Wh=function(m,i,e,v,t){v===void 0&&(v=1),t===void 0&&(t=0);var s={mode:0,volume:{start:t,end:v},duration:e};typeof i=="string"&&(i=m.sound.add(i));var u;return i.hasOwnProperty("_fade")?(u=i._fade,u.stop().resetFromJSON(s)):(u=new ed(m,i,s),i._fade=u),u.start(),i.isPlaying||i.setVolume(t).play(),i},dr=function(m,i,e,v){v===void 0&&(v=!0);var t={mode:v?2:1,volume:{start:i.volume,end:0},duration:e},s;return i.hasOwnProperty("_fade")?(s=i._fade,s.stop().resetFromJSON(t)):(s=new ed(m,i,t),i._fade=s),s.start(),i.isPlaying||i.play(),i};const vr=Phaser.Utils.Objects.GetValue,Hh=Phaser.Utils.Array.Remove;class $h{constructor(i,e){this.scene=i,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(vr(e,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(vr(e,"bgm.fade",500));var v=vr(e,"bgm.initial",void 0);v&&this.setCurrentBackgroundMusic(v)}destroy(i){if(this.soundEffects.length&&!i)for(var e=this.soundEffects.length-1;e>=0;e--)this.soundEffects[e].destroy();this.soundEffects.length=0,this.backgroundMusic&&!i&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(i){return this.backgroundMusicLoopValue=i,this}setBackgroundMusicFadeTime(i){return this.backgroundMusicFadeTime=i,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(i){var e=this.scene.sound.add(i);return this.soundEffects.push(e),e.once("complete",function(){e.destroy(),this.scene&&Hh(this.soundEffects,e)},this).once("destroy",function(){!this.scene||Hh(this.soundEffects,e)},this).play(),this}setSoundEffectVolume(i){var e=this.getLastSoundEffect();return e&&e.setVolume(i),this}fadeInSoundEffect(i){var e=this.getLastSoundEffect();return e&&Wh(this.scene,e,i),this}fadeOutSoundEffect(i,e){var v=this.getLastSoundEffect();return v&&dr(this.scene,v,i,e),this}fadeOutAllSoundEffects(i,e){for(var v=this.soundEffects.length-1;v>=0;v--)dr(this.scene,this.soundEffects[v],i,e);return this}setCurrentBackgroundMusic(i){this.backgroundMusic=i,i&&(i.setLoop(this.backgroundMusicLoopValue),i.once("complete",function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0},this).once("destroy",function(){this.backgroundMusic=void 0},this),i.isPlaying||i.play())}playBackgroundMusic(i){return this.backgroundMusic&&this.backgroundMusic.key===i?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sound.add(i)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(i){return this.backgroundMusic&&Wh(this.scene,this.backgroundMusic,i),this}fadeOutBackgroundMusic(i,e){return this.backgroundMusic&&dr(this.scene,this.backgroundMusic,i,e),this}crossFadeBackgroundMusic(i,e){var v=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(e,!0).playBackgroundMusic(i).fadeInBackgroundMusic(e),this.backgroundMusicFadeTime=v,this}}class L0{constructor(i,e,v){this.spriteManager=i,this.sprite=e.setName(v),this.tweens={},this.name=v}get scene(){return this.spriteManager.scene}destroy(){this.freeSprite().freeTweens(),this.spriteManager=void 0}freeSprite(){return this.sprite.destroy(),this.sprite=void 0,this}freeTweens(){var i=this.tweens;for(var e in i)i[e].remove(),delete i[e];return this}setProperty(i,e){return this.sprite[i]=e,this}easeProperty(i,e,v,t,s,u){var n=this.tweens;n.hasOwnProperty(i)&&n[i].remove();var a={targets:this.sprite,duration:v,ease:t,yoyo:s,onComplete:function(){n[i].remove(),delete n[i],u&&u()},onCompleteScope:this};return a[i]=e,n[i]=this.scene.tweens.add(a),this}setTexture(i,e){return this.sprite.setTexture(i,e),this}playAnimation(i){return this.sprite.play(i),this}stopAnimation(){return this.sprite.stop(),this}chainAnimation(i){return this.sprite.chain(i),this}pauseAnimation(){return this.sprite.anims.pause(),this}}var F0=function(m){return m>>16&255},I0=function(m){return m>>8&255},w0=function(m){return m&255};const D0=~(255<<16)&16777215,B0=~(255<<8)&16777215,N0=16776960;var G0=function(m,i){return(i&255)<<16|m&D0},V0=function(m,i){return(i&255)<<8|m&B0},b0=function(m,i){return i&255|m&N0},z0=function(m,i,e,v){return(i&255)<<16|(e&255)<<8|v&255},U0=function(m,i){return m.hasOwnProperty("tintR")||(i===void 0&&(i=16777215),Object.defineProperty(m,"tint",{get:function(){return m._tintRGB},set:function(e){e=Math.floor(e)&16777215,m.setTint(e),m._tintRGB!==e&&(m._tintRGB=e,m._tintR=F0(e),m._tintG=I0(e),m._tintB=w0(e))}}),Object.defineProperty(m,"tintR",{get:function(){return m._tintR},set:function(e){e=Math.floor(e)&255,m._tintR!==e&&(m._tintR=e,m._tintRGB=G0(m._tintRGB,e),m.tint=m._tintRGB)}}),Object.defineProperty(m,"tintG",{get:function(){return m._tintG},set:function(e){e=Math.floor(e)&255,m._tintG!==e&&(m._tintG=e,m._tintRGB=V0(m._tintRGB,e),m.tint=m._tintRGB)}}),Object.defineProperty(m,"tintB",{get:function(){return m._tintB},set:function(e){e=Math.floor(e)&255,m._tintB!==e&&(m._tintB=e,m._tintRGB=b0(m._tintRGB,e),m.tint=m._tintRGB)}}),Object.defineProperty(m,"tintGray",{get:function(){return Math.floor((m._tintR+m._tintG+m._tintB)/3)},set:function(e){e=Math.floor(e)&255,(m._tintR!==e||m._tintG!==e||m._tintB!==e)&&(m._tintR=e,m._tintG=e,m._tintB=e,m._tintRGB=z0(m._tintRGB,e,e,e),m.tint=m._tintRGB)}}),m.tint=i),m},Y0=function(m){for(var i in m)return!1;return!0};const cr=Phaser.Utils.Objects.GetValue,X0=Phaser.Utils.Array.Remove;class ra{constructor(i,e){this.scene=i,this.setEventEmitter(cr(e,"eventEmitter",void 0)),this.setCreateCallback(cr(e,"createCallback","sprite")),this.setSpriteFadeTime(cr(e,"fade",500)),this.sprites={},this.removedSprites=[]}destroy(i){this.clear(!i),this.createCallback=void 0,this.scene=void 0}setCreateCallback(i){return i==="sprite"?this.createCallback=function(e,v,t){return e.add.sprite(0,0,v,t)}:i==="image"?this.createCallback=function(e,v,t){return e.add.image(0,0,v,t)}:this.createCallback=i,this}setSpriteFadeTime(i){return this.fadeTime=i,this}has(i){return this.sprites.hasOwnProperty(i)}get(i){return this.sprites[i]}getTweenTask(i,e){if(this.has(i)){var v=this.get(i).tweens;if(v.hasOwnProperty(e))return v[e]}return null}get isEmpty(){return Y0(this.sprites)&&this.removedSprites.length===0}clear(i){i===void 0&&(i=!0);for(var e in this.sprites)i&&this.sprites[e].destroy(),delete this.sprites[e];return this.removedSprites.length=0,this}add(i,e,v){this.remove(i);var t;if(arguments.length===3)t=this.createCallback(this.scene,e,v);else{var s=Array.prototype.slice.call(arguments,1);t=this.createCallback(this.scene,...s)}this.fadeTime>0&&U0(t),t.once("destroy",function(){X0(this.removedSprites,t),this.isEmpty&&this.emit("empty")},this);var u=new L0(this,t,i);return this.sprites[i]=u,this.fadeTime>0&&u.setProperty("tintGray",0).easeProperty("tintGray",255,this.fadeTime),this}setProperty(i,e,v){return this.has(i)?(this.get(i).setProperty(e,v),this):this}easeProperty(i,e,v,t,s,u,n){return this.has(i)?(t===void 0&&(t=1e3),s===void 0&&(s="Linear"),this.get(i).easeProperty(e,v,t,s,u,n),this):this}remove(i){if(!this.has(i))return this;var e=this.get(i);return delete this.sprites[i],this.removedSprites.push(e.sprite),this.fadeTime>0?e.easeProperty("tintGray",0,this.fadeTime,"Linear",!1,function(){e.destroy()}):e.destroy(),this}removeAll(){for(var i in this.sprites)this.remove(i);return this}setTexture(i,e,v){return this.has(i)?(this.get(i).setTexture(e,v),this):this}playAnimation(i,e){return this.has(i)||this.add(i),this.get(i).playAnimation(e),this}stopAnimation(i){return this.has(i)?(this.get(i).stopAnimation(),this):this}chainAnimation(i,e){return this.has(i)?(this.get(i).chainAnimation(e),this):this}pauseAnimation(i){return this.has(i)?(this.get(i).pauseAnimation(),this):this}}Object.assign(ra.prototype,Ui);var W0=function(m){return fn(m)?this.clickEE=m.input:this.clickEE=m.setInteractive(),this},H0=function(m){return this.camera=m,this},$0=function(m){var i=this;m?typeof m=="function"?this.nextPageInput=function(e,v,t){var s=ti(i,e,v,t);m.call(i,s)}:this.nextPageInput=function(e,v,t){jf(i,m,e,v,t)}:this.nextPageInput=null},J0=function(m,i){return this.imageManager.add(m,i),this},K0=function(m){return this.isPlaying?this:(this.removeChildren(),this.parser.start(m),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},Z0=function(m){var i=Bt(this);return this.play(m),i};const Q0=Phaser.Utils.Objects.GetValue;var id=function(){if(!this.isPlaying||this.isPageTyping)return this;var m=Q0(this.wrapConfig,"callback",this.runWordWrap);typeof m=="string"&&(m=this[m]);var i=m.call(this,this.lastWrapResult);this.lastWrapResult=i,this.emit("page.start");var e=function(){this.emit(na),i.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.nextPageInput&&this.nextPageInput(id,[],this))};this.once(na,function(){this.typeWriter.off("complete",e,this)}),this.typeWriter.once("complete",e,this).start(i.children)},j0=function(){return this.typeWriter.pause(),this},k0=function(){return this.typeWriter.resume(),this},q0=function(m){return this.typeWriter.setTimeScale(m),this},_0=function(m){return this.typeWriter.setIgnoreWait(m),this},ty=function(){if(!this.isPlaying||!this.isPageTyping)return this;var m=this.typeWriter.speed,i=this.typeWriter.ignoreWait,e=this.typeWriter.skipTypingAnimation,v=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setSpeed(m).setIgnoreWait(i).setSkipTypingAnimation(e).setSkipSoundEffect(v)},this).setSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},ey={setClickTarget:W0,setTargetCamera:H0,setNextPageInput:$0,addImage:J0,play:K0,playPromise:Z0,typingNextPage:id,pause:j0,resume:k0,setTimeScale:q0,setIgnoreWait:_0,showPage:ty},iy=function(m){for(var i=0,e=Nh.length;i<e;i++)m.emit(Nh[i])};const Jh=Phaser.Utils.Objects.IsPlainObject,ze=Phaser.Utils.Objects.GetValue;class Ua extends ps{constructor(i,e,v,t,s,u){Jh(e)?u=e:Jh(t)&&(u=t),u===void 0&&(u={});var n=u.text;delete u.text,super(i,e,v,t,s,u),this.type="rexTextPlayer",this.parser=new Xx(this,ze(u,"parser",void 0)),this.typeWriter=new _f(this,ze(u,"typing",void 0)),this._imageManager=void 0;var a=ze(u,"images",void 0);a&&this.addImage(a),this._soundManager=void 0;var o=ze(u,"sounds",void 0);o&&(this._soundManager=new $h(this.scene,o)),this.setTargetCamera(ze(u,"camera",this.scene.cameras.main)),this._spriteManager=void 0;var r=ze(u,"sprites",void 0);r&&(this._spriteManager=new ra(this.scene,r)),this.setClickTarget(ze(u,"clickTarget",this)),this.setNextPageInput(ze(u,"nextPageInput",null)),this.isPlaying=!1,n&&this.play(n)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new Fa(this.scene)),this._imageManager}get soundManager(){return this._soundManager===void 0&&(this._soundManager=new $h(this.scene)),this._soundManager}get spriteManager(){return this._spriteManager===void 0&&(this._spriteManager=new ra(this.scene)),this._spriteManager}destroy(i){!this.scene||(iy(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(i),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(i),this._imageManager=void 0,this._soundManager&&this._soundManager.destroy(i),this._soundManager=void 0,this.camera=void 0,this._spriteManager&&this._spriteManager.destroy(i),this._spriteManager=void 0,this.clickEE=void 0,super.destroy(i))}get isPageTyping(){return this.typeWriter.isPageTyping}}Object.assign(Ua.prototype,ey);et.register("textPlayer",function(m,i,e,v,t){var s=new Ua(this.scene,m,i,e,v,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.TextPlayer",Ua);var pr=function(m,i,e,v,t,s,u,n,a,o,r,h){o===void 0&&(o=0),r===void 0&&(r=2*Math.PI),h===void 0&&(h=!1),i.beginPath(),i.ellipse(e,v,t,s,0,o,r,h),u!=null&&(i.fillStyle=u,i.fill()),n!=null&&(i.strokeStyle=n,i.lineWidth=a,i.stroke())},sy=function(m,i,e,v,t,s,u,n,a,o,r){a===void 0&&n!=null&&(a=2),o===void 0&&(o="start"),r===void 0&&(r="alphabetic"),i.font=s,i.textAlign=o,i.textBaseline=r,i.fillStyle=u,i.strokeStyle=n,i.lineWidth=a,i.lineCap="round",i.lineJoin="round",n!=null&&n!=="none"&&a>0&&i.strokeText(t,e,v),u!=null&&u!=="none"&&i.fillText(t,e,v)},ny=function(){var m=this.radius,i=this.thickness*this.radius,e=this.radius-i/2,v=this.radius-i,t=this.canvas,s=this.context;if(this.trackColor&&i>0&&(s.save(),pr(t,s,m,m,e,e,void 0,this.trackColor,i),s.restore()),this.barColor&&e>0){var u,n,a;if(this.value===1)u=!1,n=0,a=2*Math.PI;else{u=this.anticlockwise,n=this.startAngle;var o=2*Math.PI*(u?1-this.value:this.value);a=o+n}s.save(),pr(t,s,m,m,e,e,void 0,this.barColor,i,n,a,u),s.restore()}if(this.centerColor&&v>0){var r;this.centerColor2?(r=this.context.createRadialGradient(m,m,0,m,m,v),r.addColorStop(0,this.centerColor),r.addColorStop(1,this.centerColor2)):r=this.centerColor,s.save(),pr(t,s,m,m,v,v,r),s.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(s.save(),sy(t,s,m,m,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),s.restore())};const Zi=Phaser.Utils.Objects.GetValue,ry=Phaser.Math.Linear;class sd extends Yi{constructor(i,e){super(i,e),this.resetFromJSON(),this.boot()}start(i){if(this.timer.isRunning)return this;var e=this.parent;this.propertyKey=Zi(i,"key","value");var v=e[this.propertyKey];return this.fromValue=Zi(i,"from",v),this.toValue=Zi(i,"to",v),this.setEase(Zi(i,"ease",this.ease)),this.setDuration(Zi(i,"duration",this.duration)),this.timer.setDuration(this.duration),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(i,e){var v=e.t;v=this.easeFn(v),i[this.propertyKey]=ry(this.fromValue,this.toValue,v)}}const ay=Phaser.Math.Percent;var oy=function(m){return this.easeValuePropName=m,this},hy=function(m){return this.easeValueDuration=m,this},ly=function(m){return this.easeFunction=m,this},uy=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},fy=function(m,i,e){return m==null?this:(i!==void 0&&(m=ay(m,i,e)),this.easeValueTask===void 0&&(this.easeValueTask=new sd(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:m,duration:this.easeValueDuration,ease:this.easeFunction}),this)},gs={setEaseValuePropName:oy,setEaseValueDuration:hy,setEaseValueFunction:ly,stopEaseValue:uy,easeValueTo:fy};const mt=Phaser.Utils.Objects.GetValue,dy=Phaser.Utils.Objects.IsPlainObject,Kh=Phaser.Math.Clamp,vy=Phaser.Math.Linear,Zh=Phaser.Math.Percent,cy=Phaser.Math.DegToRad(270);class Ya extends qe{constructor(i,e,v,t,s,u,n){dy(e)&&(n=e,e=mt(n,"x",0),v=mt(n,"y",0),t=mt(n,"radius",1),s=mt(n,"barColor",void 0),u=mt(n,"value",0));var a=t*2;super(i,e,v,a,a),this.type="rexCircularProgressCanvas",this.eventEmitter=mt(n,"eventEmitter",this),this.setRadius(t),this.setTrackColor(mt(n,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(mt(n,"centerColor",void 0)),this.setThickness(mt(n,"thickness",.2)),this.setStartAngle(mt(n,"startAngle",cy)),this.setAnticlockwise(mt(n,"anticlockwise",!1)),this.setTextColor(mt(n,"textColor",void 0)),this.setTextStrokeColor(mt(n,"textStrokeColor",void 0),mt(n,"textStrokeThickness",void 0));var o=mt(n,"textFont",void 0);o?this.setTextFont(o):this.setTextFont(mt(n,"textSize","16px"),mt(n,"textFamily","Courier"),mt(n,"textStyle","")),this.setTextFormatCallback(mt(n,"textFormatCallback",void 0),mt(n,"textFormatCallbackScope",void 0));var r=mt(n,"valuechangeCallback",null);if(r!==null){var h=mt(n,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",r,h)}this.setEaseValuePropName("value").setEaseValueDuration(mt(n,"easeValue.duration",0)).setEaseValueFunction(mt(n,"easeValue.ease","Linear")),this.setValue(u)}resize(i,e){return i=Math.floor(Math.min(i,e)),i===this.width?this:(super.resize(i,i),this.setRadius(i/2),this)}get value(){return this._value}set value(i){i=Kh(i,0,1);var e=this._value,v=e!=i;this.dirty=this.dirty||v,this._value=i,v&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,v){return i==null?this:(e!==void 0&&(i=Zh(i,e,v)),this.value=i,this)}addValue(i,e,v){return e!==void 0&&(i=Zh(i,e,v)),this.value+=i,this}getValue(i,e){var v=this.value;return i!==void 0&&(v=vy(i,e,v)),v}get radius(){return this._radius}set radius(i){this.dirty=this.dirty||this._radius!=i,this._radius=i;var e=i*2;this.resize(e,e)}setRadius(i){return this.radius=i,this}get trackColor(){return this._trackColor}set trackColor(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=i,this._trackColor=i}setTrackColor(i){return this.trackColor=i,this}get barColor(){return this._barColor}set barColor(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=i,this._barColor=i}setBarColor(i){return this.barColor=i,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!=i,this._startAngle=i}setStartAngle(i){return this.startAngle=i,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!=i,this._anticlockwise=i}setAnticlockwise(i){return i===void 0&&(i=!0),this.anticlockwise=i,this}get thickness(){return this._thickness}set thickness(i){i=Kh(i,0,1),this.dirty=this.dirty||this._thickness!=i,this._thickness=i}setThickness(i){return this.thickness=i,this}get centerColor(){return this._centerColor}set centerColor(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=i,this._centerColor=i}get centerColor2(){return this._centerColor2}set centerColor2(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=i,this._centerColor2=i}setCenterColor(i,e){return this.centerColor=i,this.centerColor2=e,this}get textColor(){return this._textColor}set textColor(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=i,this._textColor=i}setTextColor(i){return this.textColor=i,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=i,this._textStrokeColor=i}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(i){this.dirty=this.dirty||this._textStrokeThickness!=i,this._textStrokeThickness=i}setTextStrokeColor(i,e){return e===void 0&&(e=2),this.textStrokeColor=i,this.textStrokeThickness=e,this}get textFont(){return this._textFont}set textFont(i){this.dirty=this.dirty||this._textFont!=i,this._textFont=i}setTextFont(i,e,v){var t;return e===void 0?t=i:t=v+" "+i+" "+e,this.textFont=t,this}setTextFormatCallback(i,e){return this.textFormatCallback=i,this.textFormatCallbackScope=e,this}updateTexture(){return this.clear(),ny.call(this),super.updateTexture(),this}getFormatText(i){i===void 0&&(i=this.value);var e;return this.textFormatCallbackScope?e=this.textFormatCallback(i):e=this.textFormatCallback.call(this.textFormatCallbackScope,i),e}}Object.assign(Ya.prototype,gs);et.register("circularProgressCanvas",function(m,i,e,v,t,s){var u=new Ya(this.scene,m,i,e,v,t,s);return this.scene.add.existing(u),u});it(window,"RexPlugins.UI.CircularProgressCanvas",Ya);var py=function(m,i,e,v){i.updateData(),e.addToRenderList(i);var t=m.pipelines.set(i.pipeline),s=Du(i,e,v),u=t.calcMatrix.copyFrom(s.calc),n=i._displayOriginX,a=i._displayOriginY,o=e.alpha*i.alpha;m.pipelines.preBatch(i);for(var r=i.geom,h=0,d=r.length;h<d;h++)r[h].webglRender(t,u,o,n,a);m.pipelines.postBatch(i)};const gy=Phaser.Renderer.Canvas.SetTransform;var my=function(m,i,e,v){i.updateData(),e.addToRenderList(i);var t=m.currentContext;if(gy(m,t,i,e,v)){for(var s=i._displayOriginX,u=i._displayOriginY,n=i.geom,a=0,o=n.length;a<o;a++)n[a].canvasRender(t,s,u);t.restore()}},xy={renderWebGL:py,renderCanvas:my};const yy=Phaser.GameObjects.Shape,Ty=Phaser.Utils.Array.Remove;class Xa extends yy{constructor(i,e,v,t,s){e===void 0&&(e=0),v===void 0&&(v=0),t===void 0&&(t=0),s===void 0&&(s=t),super(i,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,v),this.setSize(t,s),this.updateDisplayOrigin()}get width(){return this._width}set width(i){this.setSize(i,this._height)}get height(){return this._height}set height(i){this.setSize(this._width,i)}setDirty(i){return i===void 0&&(i=!0),this.dirty=i,this}setSize(i,e){this.isSizeChanged=this.isSizeChanged||this._width!==i||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=i,this._height=e,this.updateDisplayOrigin();var v=this.input;return v&&!v.customHitArea&&(v.hitArea.width=i,v.hitArea.height=e),this}resize(i,e){return this.setSize(i,e),this}setFillStyle(i,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.fillColor!==i||this.fillAlpha!==e,this.fillColor=i,this.fillAlpha=e,this}setStrokeStyle(i,e,v){return v===void 0&&(v=1),this.dirty=this.dirty||this.lineWidth!==i||this.strokeColor!==e||this.strokeAlpha!==v,this.lineWidth=i,this.strokeColor=e,this.strokeAlpha=v,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var i=this.geom,e=0,v=i.length;e<v;e++){var t=i[e];t.dirty&&t.updateData()}return this.dirty=!1,this.isSizeChanged=!1,this}clear(){return this.geom.length=0,Vi(this.shapes),this}getShape(i){return this.shapes[i]}getShapes(){return this.geom}addShape(i){this.geom.push(i);var e=i.name;return e&&(this.shapes[e]=i),this.dirty=!0,this}deleteShape(i){var e=this.getShape(i);return e&&(delete this.shapes[i],Ty(this.geom,e)),this}}Object.assign(Xa.prototype,xy);var Ey=function(m,i){return m===void 0?this.isFilled=!1:(i===void 0&&(i=1),this.isFilled=!0,this.fillColor=m,this.fillAlpha=i),this},Sy=function(m,i,e){return m===void 0||i===void 0?this.isStroked=!1:(e===void 0&&(e=1),this.isStroked=!0,this.lineWidth=m,this.strokeColor=i,this.strokeAlpha=e),this},Cy={fillStyle:Ey,lineStyle:Sy},Py=function(m,i){return this.data===void 0&&(this.data={}),this.data[m]=i,this},Ry=function(m,i){return this.data===void 0&&(this.data={}),this.data.hasOwnProperty(m)||(this.data[m]=i),this.data[m]},My={setData:Py,getData:Ry};class On{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(i){return this.name=i,this}reset(){return this.fillStyle(),this.lineStyle(),this}webglRender(i,e,v,t,s){}canvasRender(i,e,v){}updateData(){}}Object.assign(On.prototype,Cy,My);const Ay=Phaser.Geom.Polygon.Earcut;class Ln extends On{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=Ay(this.pathData),this}webglRender(i,e,v,t,s){this.isFilled&&Lu(i,e,this,v,t,s),this.isStroked&&Pn(i,this,v,t,s)}canvasRender(i,e,v){var t=this.pathData,s=t.length-1,u=t[0]-e,n=t[1]-v;i.beginPath(),i.moveTo(u,n),this.closePath||(s-=2);for(var a=2;a<s;a+=2){var o=t[a]-e,r=t[a+1]-v;i.lineTo(o,r)}this.closePath&&i.closePath(),this.isFilled&&(fs(i,this),i.fill()),this.isStroked&&(ds(i,this),i.stroke())}}const Qh=Phaser.Math.DegToRad;class Fn extends Ln{constructor(i,e,v,t,s,u,n,a){i===void 0&&(i=0),e===void 0&&(e=0),v===void 0&&(v=0),t===void 0&&(t=0),s===void 0&&(s=0),u===void 0&&(u=360),n===void 0&&(n=!1),a===void 0&&(a=!1),super(),this.setCenterPosition(i,e),this.setRadius(v,t),this.setAngle(s,u,n),this.setPie(a),this.setIterations(32)}get x(){return this._x}set x(i){this.dirty=this.dirty||this._x!==i,this._x=i}get y(){return this._y}set y(i){this.dirty=this.dirty||this._y!==i,this._y=i}setCenterPosition(i,e){return e===void 0&&(e=i),this.x=i,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(i){this.dirty=this.dirty||this._radiusX!==i,this._radiusX=i}get radiusY(){return this._radiusY}set radiusY(i){this.dirty=this.dirty||this._radiusY!==i,this._radiusY=i}setRadius(i,e){return e===void 0&&(e=i),this.radiusX=i,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!==i,this._startAngle=i}get endAngle(){return this._endAngle}set endAngle(i){this.dirty=this.dirty||this._endAngle!==i,this._endAngle=i}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!==i,this._anticlockwise=i}setAngle(i,e,v){return v===void 0&&(v=!1),this.startAngle=i,this.endAngle=e,this.anticlockwise=v,this}get pie(){return this._pie}set pie(i){this.dirty=this.dirty||this._pie!==i,this._pie=i}setPie(i){return i===void 0&&(i=!0),this.pie=i,this}get iterations(){return this._iterations}set iterations(i){this.dirty=this.dirty||this._iterations!==i,this._iterations=i}setIterations(i){return this.iterations=i,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Gi(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(i,e,v){i.beginPath();var t=this.x-e,s=this.y-v,u=Qh(this.startAngle),n=Qh(this.endAngle);this.pie&&(i.moveTo(t,s),i.lineTo(t+Math.cos(u)*this.radiusX,s+Math.sin(u)*this.radiusY)),i.ellipse(t,s,this.radiusX,this.radiusY,0,u,n,this.anticlockwise),this.pie&&i.lineTo(t,s),this.isFilled&&(fs(i,this),i.fill()),this.isStroked&&(ds(i,this),i.stroke())}}class aa extends Fn{constructor(i,e,v){super(i,e,v,v,0,360)}}class Oy extends Ln{constructor(i){super(),this.setCurve(i),this.setIterations(32)}get curve(){return this._curve}set curve(i){this.dirty=this.dirty||this._curve!==i,this._curve=i}setCurve(i){return this.curve=i,this}get iterations(){return this._iterations}set iterations(i){this.dirty=this.dirty||this._iterations!==i,this._iterations=i}setIterations(i){return this.iterations=i,this}updateData(){this.pathData.length=0;for(var i=this.curve.getPoints(this.iterations),e=0,v=i.length;e<v;e++)this.pathData.push(i[e].x,i[e].y);return this.pathData.push(i[0].x,i[0].y),super.updateData(),this}}class Ly extends Fn{constructor(i,e,v,t){super(i,e,v,t,0,360)}}class Fy extends Ln{constructor(i,e,v,t){i===void 0&&(i=0),e===void 0&&(e=0),v===void 0&&(v=0),t===void 0&&(t=0),super(),this.setP0(i,e),this.setP1(v,t)}get x0(){return this._x0}set x0(i){this.dirty=this.dirty||this._x0!==i,this._x0=i}get y0(){return this._y0}set y0(i){this.dirty=this.dirty||this._y0!==i,this._y0=i}setP0(i,e){return this.x0=i,this.y0=e,this}get x1(){return this._x1}set x1(i){this.dirty=this.dirty||this._x1!==i,this._x1=i}get y1(){return this._y1}set y1(i){this.dirty=this.dirty||this._y1!==i,this._y1=i}setP1(i,e){return this.x1=i,this.y1=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var Iy=function(m,i,e){return e.length=0,e.push(m,i),e};const jh=Phaser.Math.Interpolation.QuadraticBezier;var kh=function(m,i,e,v,t,s){for(var u=s.length,n=s[u-2],a=s[u-1],o=1,r=t-1;o<=r;o++){var h=o/r;s.push(jh(h,n,m,e),jh(h,a,i,v))}return s};const wy=Phaser.Math.RotateAround;var Dy=function(m,i,e,v){for(var t={x:0,y:0},s=0,u=v.length-1;s<u;s+=2)t.x=v[s],t.y=v[s+1],wy(t,m,i,e),v[s]=t.x,v[s+1]=t.y;return v},By=function(m,i,e){for(var v=0,t=e.length-1;v<t;v+=2)e[v]+=m,e[v+1]+=i;return e},Ny=function(m,i){i===void 0&&(i=[]);for(var e=0,v=m.length-1;e<v;e+=2)i.push({x:m[e],y:m[e+1]});return i};const Gy=Phaser.Geom.Polygon;var Vy=function(m,i){return i===void 0&&(i=new Gy),i.setTo(m),i};const by=Phaser.Math.DegToRad;class zy{constructor(i){i===void 0&&(i=[]),this.pathData=i,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(i){return this.iterations=i,this}startAt(i,e){return Iy(i,e,this.pathData),this.lastPointX=i,this.lastPointY=e,this}lineTo(i,e,v){return v===void 0&&(v=!1),v&&(i+=this.lastPointX,e+=this.lastPointY),Ni(i,e,this.pathData),this.lastPointX=i,this.lastPointY=e,this}verticalLineTo(i,e){return this.lineTo(i,this.lastPointY,e),this}horizontalLineTo(i,e){return this.lineTo(this.lastPointX,i,e),this}ellipticalArc(i,e,v,t,s,u,n){n===void 0&&(n=!1),Gi(i,e,v,t,s,u,n,this.iterations,this.pathData);var a=this.pathData.length;return this.lastPointX=this.pathData[a-2],this.lastPointY=this.pathData[a-1],this}arc(i,e,v,t,s,u){return this.ellipticalArc(i,e,v,v,t,s,u),this}quadraticBezierTo(i,e,v,t){return kh(i,e,v,t,this.iterations,this.pathData),this.lastPointX=v,this.lastPointY=t,this.lastCX=i,this.lastCY=e,this}smoothQuadraticBezierTo(i,e){var v=this.lastPointX*2-this.lastCX,t=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(v,t,i,e),this}cubicBezierCurveTo(i,e,v,t,s,u){return kh(i,e,v,t,s,u,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=u,this.lastCX=v,this.lastCY=t,this}smoothCubicBezierCurveTo(i,e,v,t){var s=this.lastPointX*2-this.lastCX,u=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(s,u,i,e,v,t),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(i,e,v){if(this.pathData.length===0)return this;v=by(v),Dy(i,e,v,this.pathData);var t=this.pathData.length;if(this.lastPointX=this.pathData[t-2],this.lastPointY=this.pathData[t-1],this.lastCX!==void 0){var s={x:this.lastCX,y:this.lastCY};PointRotateAround(s,i,e,v),this.lastCX=s.x,this.lastCY=s.y}return this}offset(i,e){return By(i,e,this.pathData),this}toPoints(){return Ny(this.pathData)}toPolygon(i){return Vy(this.pathData,i)}draw(i,e,v){var t=this.toPoints();return e&&i.fillPoints(t,this.closePath,this.closePath),v&&i.strokePoints(t,this.closePath,this.closePath),this}}class Uy extends Ln{constructor(){super(),this.builder=new zy(this.pathData)}get iterations(){return this.builder.iterations}set iterations(i){this.dirty=this.dirty||this.builder.iterations!==i,this.builder.setIterations(i)}setIterations(i){return this.iterations=i,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}startAt(i,e){return this.builder.startAt(i,e),this.dirty=!0,this}lineTo(i,e,v){return this.builder.lineTo(i,e,v),this.dirty=!0,this}verticalLineTo(i,e){return this.builder.verticalLineTo(i,e),this.dirty=!0,this}horizontalLineTo(i,e){return this.builder.horizontalLineTo(i,e),this.dirty=!0,this}ellipticalArc(i,e,v,t,s,u,n){return this.builder.ellipticalArc(i,e,v,t,s,u,n),this.dirty=!0,this}arc(i,e,v,t,s,u){return this.builder.arc(i,e,v,t,s,u),this.dirty=!0,this}quadraticBezierTo(i,e,v,t){return this.builder.quadraticBezierTo(i,e,v,t),this.dirty=!0,this}smoothQuadraticBezierTo(i,e){return this.builder.smoothQuadraticBezierTo(i,e),this.dirty=!0,this}cubicBezierCurveTo(i,e,v,t,s,u){return this.builder.cubicBezierCurveTo(i,e,v,t,s,u),this.dirty=!0,this}smoothCubicBezierCurveTo(i,e,v,t){return this.builder.smoothCubicBezierCurveTo(i,e,v,t),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(i,e,v){return this.builder.rotateAround(i,e,v),this.dirty=!0,this}offset(i,e){return this.builder.offset(i,e),this.dirty=!0,this}toPolygon(i){return this.builder.toPolygon(i)}}Phaser.Math.Distance.Between;Phaser.Math.Linear;const Yy=Phaser.Renderer.WebGL.Utils;class Xy extends On{constructor(i,e,v,t){i===void 0&&(i=0),e===void 0&&(e=0),v===void 0&&(v=0),t===void 0&&(t=v),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(i,e),this.setSize(v,t)}get x(){return this._x}set x(i){this.dirty=this.dirty||this._x!==i,this._x=i}get y(){return this._y}set y(i){this.dirty=this.dirty||this._y!==i,this._y=i}setTopLeftPosition(i,e){return this.x=i,this.y=e,this}get width(){return this._width}set width(i){this.dirty=this.dirty||this._width!==i,this._width=i}get height(){return this._height}set height(i){this.dirty=this.dirty||this._height!==i,this._height=i}setSize(i,e){return this.width=i,this.height=e,this}updateData(){this.pathData.length=0;var i=this.x,e=i+this.width,v=this.y,t=v+this.height;return this.pathData.push(i,v),this.pathData.push(e,v),this.pathData.push(e,t),this.pathData.push(i,t),this.pathData.push(i,v),this}webglRender(i,e,v,t,s){if(this.isFilled){var u=i.fillTint,n=Yy.getTintAppendFloatAlpha(this.fillColor,this.fillAlpha*v);u.TL=n,u.TR=n,u.BL=n,u.BR=n,i.batchFillRect(-t+this.x,-s+this.y,this.width,this.height)}this.isStroked&&Pn(i,this,v,t,s)}canvasRender(i,e,v){this.isFilled&&(fs(i,this),i.fillRect(-e,-v,this.width,this.height)),this.isStroked&&(ds(i,this),i.beginPath(),i.rect(-e,-v,this.width,this.height),i.stroke())}}const Wy=Phaser.Renderer.WebGL.Utils;class Hy extends On{constructor(i,e,v,t,s,u){i===void 0&&(i=0),e===void 0&&(e=0),v===void 0&&(v=0),t===void 0&&(t=0),s===void 0&&(s=0),u===void 0&&(u=0),super(),this.pathData=[],this.closePath=!0,this.setP0(i,e),this.setP1(v,t),this.setP2(s,u)}get x0(){return this._x0}set x0(i){this.dirty=this.dirty||this._x0!==i,this._x0=i}get y0(){return this._y0}set y0(i){this.dirty=this.dirty||this._y0!==i,this._y0=i}setP0(i,e){return this.x0=i,this.y0=e,this}get x1(){return this._x1}set x1(i){this.dirty=this.dirty||this._x1!==i,this._x1=i}get y1(){return this._y1}set y1(i){this.dirty=this.dirty||this._y1!==i,this._y1=i}setP1(i,e){return this.x1=i,this.y1=e,this}get x2(){return this._x2}set x2(i){this.dirty=this.dirty||this._x2!==i,this._x2=i}get y2(){return this._y2}set y2(i){this.dirty=this.dirty||this._y2!==i,this._y2=i}setP2(i,e){return this.dirty=this.dirty||this.x2!==i||this.y2!==e,this.x2=i,this.y2=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),this}webglRender(i,e,v,t,s){if(this.isFilled){var u=Wy.getTintAppendFloatAlpha(this.fillColor,this.fillAlpha*v),n=this.x0-t,a=this.y0-s,o=this.x1-t,r=this.y1-s,h=this.x2-t,d=this.y2-s,l=e.getX(n,a),f=e.getY(n,a),c=e.getX(o,r),g=e.getY(o,r),p=e.getX(h,d),x=e.getY(h,d);i.batchTri(l,f,c,g,p,x,u,u,u)}this.isStroked&&Pn(i,this,v,t,s)}canvasRender(i,e,v){var t=this.x1-e,s=this.y1-v,u=this.x2-e,n=this.y2-v,a=this.x3-e,o=this.y3-v;i.beginPath(),i.moveTo(t,s),i.lineTo(u,n),i.lineTo(a,o),i.closePath(),this.isFilled&&(fs(i,this),i.fill()),this.isStroked&&(ds(i,this),i.stroke())}}const Nt=Phaser.Utils.Objects.GetValue,$y=Phaser.Utils.Objects.IsPlainObject,qh=Phaser.Math.Clamp,Jy=Phaser.Math.Linear,_h=Phaser.Math.Percent,Ky=Phaser.Math.DegToRad(270),Zy=Phaser.Math.RadToDeg;class In extends Xa{constructor(i,e,v,t,s,u,n){$y(e)&&(n=e,e=Nt(n,"x",0),v=Nt(n,"y",0),t=Nt(n,"radius",1),s=Nt(n,"barColor",void 0),u=Nt(n,"value",0));var a=t*2;super(i,e,v,a,a),this.type="rexCircularProgress",this.eventEmitter=Nt(n,"eventEmitter",this),this.addShape(new aa().setName("track")).addShape(new Fn().setName("bar")).addShape(new aa().setName("center")),this.setRadius(t),this.setTrackColor(Nt(n,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(Nt(n,"centerColor",void 0)),this.setThickness(Nt(n,"thickness",.2)),this.setStartAngle(Nt(n,"startAngle",Ky)),this.setAnticlockwise(Nt(n,"anticlockwise",!1));var o=Nt(n,"valuechangeCallback",null);if(o!==null){var r=Nt(n,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,r)}this.setEaseValuePropName("value").setEaseValueDuration(Nt(n,"easeValue.duration",0)).setEaseValueFunction(Nt(n,"easeValue.ease","Linear")),this.setValue(u)}resize(i,e){return i=Math.floor(Math.min(i,e)),i===this.width?this:(super.resize(i,i),this.setRadius(i/2),this)}get value(){return this._value}set value(i){i=qh(i,0,1);var e=this._value,v=e!=i;this.dirty=this.dirty||v,this._value=i,v&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,v){return i==null?this:(e!==void 0&&(i=_h(i,e,v)),this.value=i,this)}addValue(i,e,v){return e!==void 0&&(i=_h(i,e,v)),this.value+=i,this}getValue(i,e){var v=this.value;return i!==void 0&&(v=Jy(i,e,v)),v}get radius(){return this._radius}set radius(i){this.dirty=this.dirty||this._radius!=i,this._radius=i;var e=i*2;this.resize(e,e)}setRadius(i){return this.radius=i,this}get trackColor(){return this._trackColor}set trackColor(i){this.dirty=this.dirty||this._trackColor!=i,this._trackColor=i}setTrackColor(i){return this.trackColor=i,this}get barColor(){return this._barColor}set barColor(i){this.dirty=this.dirty||this._barColor!=i,this._barColor=i}setBarColor(i){return this.barColor=i,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!=i,this._startAngle=i}setStartAngle(i){return this.startAngle=i,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!=i,this._anticlockwise=i}setAnticlockwise(i){return i===void 0&&(i=!0),this.anticlockwise=i,this}get thickness(){return this._thickness}set thickness(i){i=qh(i,0,1),this.dirty=this.dirty||this._thickness!=i,this._thickness=i}setThickness(i){return this.thickness=i,this}get centerColor(){return this._centerColor}set centerColor(i){this.dirty=this.dirty||this._centerColor!=i,this._centerColor=i}setCenterColor(i){return this.centerColor=i,this}updateShapes(){var i=this.radius,e=this.thickness*this.radius,v=this.radius-e/2,t=this.radius-e,s=this.getShape("track");this.trackColor!=null&&e>0?s.setCenterPosition(i,i).setRadius(v).lineStyle(e,this.trackColor):s.reset();var u=this.getShape("bar");if(this.barColor!=null&&v>0){var n,a,o;if(this.value===1)n=!1,a=0,o=360;else{n=this.anticlockwise,a=Zy(this.startAngle);var r=360*(n?1-this.value:this.value);o=r+a}u.setCenterPosition(i,i).setRadius(v).setAngle(a,o,n).lineStyle(e,this.barColor)}else u.reset();var h=this.getShape("center");this.centerColor&&t>0?h.setCenterPosition(i,i).setRadius(t).fillStyle(this.centerColor):h.reset()}}Object.assign(In.prototype,gs);et.register("circularProgress",function(m,i,e,v,t,s){var u=new In(this.scene,m,i,e,v,t,s);return this.scene.add.existing(u),u});it(window,"RexPlugins.UI.CircularProgress",In);var wn=function(m){return m.hasOwnProperty("rexSizer")||(m.rexSizer={}),m.rexSizer},Qy=function(m){var i=wn(m);return i.hasOwnProperty("prevState")||(i.prevState={}),i.prevState},nd=function(m,i){i===void 0&&(gr===void 0&&(gr=new Phaser.Geom.Rectangle),i=gr);var e=m.game.config;return i.setTo(0,0,e.width,e.height),i},gr,jy=function(m){return m===void 0&&(m=nd(this.scene)),this.left=Math.max(this.left,m.left),this.right=Math.min(this.right,m.right),this.top=Math.max(this.top,m.top),this.bottom=Math.min(this.bottom,m.bottom),this};const Ht=Phaser.Display.Align;var Dn={center:Ht.CENTER,left:Ht.LEFT_CENTER,right:Ht.RIGHT_CENTER,top:Ht.TOP_CENTER,bottom:Ht.BOTTOM_CENTER,"left-top":Ht.TOP_LEFT,"left-center":Ht.LEFT_CENTER,"left-bottom":Ht.BOTTOM_LEFT,"center-top":Ht.TOP_CENTER,"center-center":Ht.CENTER,"center-bottom":Ht.BOTTOM_CENTER,"right-top":Ht.TOP_RIGHT,"right-center":Ht.RIGHT_CENTER,"right-bottom":Ht.BOTTOM_RIGHT},oa=new Phaser.GameObjects.Zone({sys:{queueDepthSort:ne,events:{once:ne}}},0,0,1,1);oa.setOrigin(0);var Ve={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},St=function(m){return m.displayWidth!==void 0?m.displayWidth:m.width},gt=function(m){return m.displayHeight!==void 0?m.displayHeight:m.height},Wa=function(m){var i=gt(m);return m.y+i-i*m.originY},Ha=function(m){var i=St(m);return m.x-i*m.originX+i*.5},$a=function(m,i){var e=gt(m);return m.y=i-e+e*m.originY,m},Ja=function(m,i){var e=St(m),v=e*m.originX;return m.x=i+v-e*.5,m},ky=function(m,i,e,v){return e===void 0&&(e=0),v===void 0&&(v=0),Ja(m,Ha(i)+e),$a(m,Wa(i)+v),m},Ka=function(m){var i=St(m);return m.x-i*m.originX},Za=function(m,i){var e=St(m);return m.x=i+e*m.originX,m},qy=function(m,i,e,v){return e===void 0&&(e=0),v===void 0&&(v=0),Za(m,Ka(i)-e),$a(m,Wa(i)+v),m},Qa=function(m){var i=St(m);return m.x+i-i*m.originX},ja=function(m,i){var e=St(m);return m.x=i-e+e*m.originX,m},_y=function(m,i,e,v){return e===void 0&&(e=0),v===void 0&&(v=0),ja(m,Qa(i)+e),$a(m,Wa(i)+v),m},ka=function(m,i){var e=gt(m),v=e*m.originY;return m.y=i+v-e*.5,m},tT=function(m,i,e){return Ja(m,i),ka(m,e)},qa=function(m){var i=gt(m);return m.y-i*m.originY+i*.5},eT=function(m,i,e,v){return e===void 0&&(e=0),v===void 0&&(v=0),tT(m,Ha(i)+e,qa(i)+v),m},iT=function(m,i,e,v){return e===void 0&&(e=0),v===void 0&&(v=0),Za(m,Ka(i)-e),ka(m,qa(i)+v),m},sT=function(m,i,e,v){return e===void 0&&(e=0),v===void 0&&(v=0),ja(m,Qa(i)+e),ka(m,qa(i)+v),m},_a=function(m){var i=gt(m);return m.y-i*m.originY},to=function(m,i){var e=gt(m);return m.y=i+e*m.originY,m},nT=function(m,i,e,v){return e===void 0&&(e=0),v===void 0&&(v=0),Ja(m,Ha(i)+e),to(m,_a(i)-v),m},rT=function(m,i,e,v){return e===void 0&&(e=0),v===void 0&&(v=0),Za(m,Ka(i)-e),to(m,_a(i)-v),m},aT=function(m,i,e,v){return e===void 0&&(e=0),v===void 0&&(v=0),ja(m,Qa(i)+e),to(m,_a(i)-v),m},Re=[];Re[Ve.BOTTOM_CENTER]=ky;Re[Ve.BOTTOM_LEFT]=qy;Re[Ve.BOTTOM_RIGHT]=_y;Re[Ve.CENTER]=eT;Re[Ve.LEFT_CENTER]=iT;Re[Ve.RIGHT_CENTER]=sT;Re[Ve.TOP_CENTER]=nT;Re[Ve.TOP_LEFT]=rT;Re[Ve.TOP_RIGHT]=aT;var rd=function(m,i,e,v,t){return Re[e](m,i,v,t)},Bn=function(m,i,e,v,t,s){oa.setPosition(i,e).setSize(v,t),rd(m,oa,s)};const Qi=Phaser.Utils.Objects.GetValue,oT=Phaser.GameObjects.Group;var hT=function(m,i){var e=m.scene,v,t,s,u;if(typeof i=="number")v=i;else{v=Qi(i,"color",16777215);var n=Qi(i,"name",!1);n&&(t=Qi(n,"createTextCallback",lT),s=Qi(n,"createTextCallbackScope",void 0),u=Qi(n,"align","left-top"),typeof u=="string"&&(u=Dn[u]))}if(t&&!m.children){m.children=new oT(e),m.once("destroy",function(f,c){f.children.destroy(!c),f.children=void 0});var a=m.clear.bind(m);m.clear=function(){a(),m.children.clear(!1,!0)}}for(var o=this.getAllShownChildren([this]),r,h,d=0,l=o.length;d<l;d++)r=o[d],r.getBounds&&(v&&m.lineStyle(1,v).strokeRectShape(r.getBounds(ji)),r.name&&t&&(s?h=t.call(s,e):h=t(e),h&&(h.setText(r.name),m.children.add(h),Bn(h,ji.x,ji.y,ji.width,ji.height,u))));return this},lT=function(m,i,e){return m.add.text(0,0,"")},ji=new Phaser.Geom.Rectangle;const Us=Phaser.Utils.Objects.GetValue;var Xi=function(m,i){return i===void 0&&(i={}),typeof m=="number"?(i.left=m,i.right=m,i.top=m,i.bottom=m):(i.left=Us(m,"left",0),i.right=Us(m,"right",0),i.top=Us(m,"top",0),i.bottom=Us(m,"bottom",0)),i};const uT=le.prototype.add;var ms=function(m){return uT.call(this,m),this.sizerEventsEnable&&(m.emit("sizer.add",m,this),this.emit("add",m,this)),this},fT={addBackground(m,i,e){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof i=="string"&&(e=i,i=void 0),i===void 0&&(i=0),ms.call(this,m),this.backgroundChildren.push(m);var v=this.getSizerConfig(m);return v.padding=Xi(i),e!==void 0&&this.addChildrenMap(e,m),this},isBackground(m){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(m)!==-1}},dT={removeFromParentSizer(){var m=this.getParentSizer();return m&&m.remove(this),this}},tl=function(m,i){return this.childrenMap===void 0&&(this.childrenMap={}),this.childrenMap[m]=i,this},vT=function(m,i){if(typeof m=="string"&&(m=m.split(".")),m.length!==0){var e=m.shift(),v=null;if(e.charAt(0)==="#")e=e.substring(1),v=this.getByName(e,i);else if(e.indexOf("[")===-1)this.childrenMap&&(v=this.childrenMap[e]);else{var t=e.match(cT);if(t!=null&&this.childrenMap){var s=this.childrenMap[t[1]];s&&(v=s[t[2]])}}return m.length===0?v:v&&v.childrenMap?v.getElement(m):null}};const cT=/(\S+)\[(\d+)\]/i;var pT={getInnerPadding(m){return ln(this.space,m)},setInnerPadding(m,i){return un(this.space,m,i),this},getOuterPadding(m){return ln(this.getSizerConfig(this).padding,m)},setOuterPadding(m,i){return un(this.getSizerConfig(this).padding,m,i),this},getChildOuterPadding(m,i){return typeof m=="string"&&(m=this.getElement(m)),ln(this.getSizerConfig(m).padding,i)},setChildOuterPadding(m,i,e){return typeof m=="string"&&(m=this.getElement(m)),un(this.getSizerConfig(m).padding,i,e),this}},eo=function(m){return m===void 0&&(m=Math.max(this.childrenWidth,this.minWidth)),m},gT=function(m){var i,e;for(var v in this.sizerChildren)i=this.sizerChildren[v],i&&i.isRexSizer&&!i.ignoreLayout&&(e=this.getExpandedChildWidth(i,m),e=i.resolveWidth(e),i.resolveChildrenWidth(e))},io=function(m){var i=Math.max(this.childrenHeight,this.minHeight);return m===void 0&&(m=i),m},mT=function(m){var i;return m.isRexSizer?i=Math.max(m.minWidth,m.childrenWidth):m.minWidth!==void 0?i=m.minWidth:i=St(m),i},xT=function(m){var i;return m.isRexSizer?i=Math.max(m.minHeight,m.childrenHeight):m.minHeight!==void 0?i=m.minHeight:i=gt(m),i},yT=function(m,i){return i},TT=function(m,i){return i},ET=function(){return 0},ST=function(){return 0},CT=function(m){m===void 0&&(m=[]);for(var i=m.length,e=this.getChildrenSizers(m),v=m.length,t=i;t<v;t++)e[t].getAllChildrenSizers(m);return m},PT=function(m){return m===void 0&&(m=[]),m},RT={getShownChildren(m){m===void 0&&(m=[]);for(var i=this.children,e,v=0,t=i.length;v<t;v++)e=i[v],!(e.rexSizer&&e.rexSizer.hidden)&&m.push(e);return m},getAllShownChildren(m){m===void 0&&(m=[]);for(var i=this.children,e,v=0,t=i.length;v<t;v++)e=i[v],!(e.rexSizer&&e.rexSizer.hidden)&&(m.push(e),e.hasOwnProperty("isRexContainerLite")&&m.push(...e.getAllShownChildren()));return m}},xs=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var m=this.getChildrenSizers(),i,e=0,v=m.length;e<v;e++)i=m[e],!i.ignoreLayout&&i.preLayout()},MT=function(){return this.runLayout(),this},AT=function(m,i,e){if(this.ignoreLayout)return this;var v=!m;return v&&this.preLayout(),i=this.resolveWidth(i),v&&(this.resolveChildrenWidth(i),this.runWidthWrap(i)),e=this.resolveHeight(e),this.resize(i,e),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},OT=function(){},LT=function(m,i,e){return this._anchor&&this._anchor.updatePosition(),this},ad=function(m){var i,e;for(var v in this.sizerChildren)i=this.sizerChildren[v],!(!i||i.isRexSizer&&i.ignoreLayout||!i.runWidthWrap)&&(e=this.getExpandedChildWidth(i,m),i.isRexSizer&&(e=i.resolveWidth(e)),i.runWidthWrap(e));return this};const od=Phaser.Geom.Rectangle;Phaser.Scale.Center;var hd=function(m,i){i===void 0?i=new od:i===!0&&(i=FT);var e=m.scale,v=e.baseSize,t=e.parentSize,s=e.canvasBounds,u=e.displayScale,n=s.x>=0?0:-(s.x*u.x),a=s.y>=0?0:-(s.y*u.y),o;t.width>=s.width?o=v.width:o=v.width-(s.width-t.width)*u.x;var r;return t.height>=s.height?r=v.height:r=v.height-(s.height-t.height)*u.y,i.setTo(n,a,o,r),i},FT=new od;class so extends zt{constructor(i,e){super(i,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(i){i===void 0&&(i={});var e,v;i.x!==void 0?(e=null,v=i.x):i.left!==void 0?(e=0,v=i.left):i.right!==void 0?(e=1,v=i.right):i.centerX!==void 0&&(e=.5,v=i.centerX);var t,s;i.y!==void 0?(t=null,s=i.y):i.top!==void 0?(t=0,s=i.top):i.bottom!==void 0?(t=1,s=i.bottom):i.centerY!==void 0&&(t=.5,s=i.centerY);var u,n;v!==void 0&&(v=v.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),u=parseFloat(v[0])/100,n=v[1]===""?0:parseFloat(v[1]));var a,o;s!==void 0&&(s=s.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),a=parseFloat(s[0])/100,o=s[1]===""?0:parseFloat(s[1]));var r=i.width,h,d;r!==void 0&&(r=r.split("%"),h=parseFloat(r[0])/100,d=r[1]===""?0:parseFloat(r[1]));var l=i.height,f,c;l!==void 0&&(l=l.split("%"),f=parseFloat(l[0])/100,c=l[1]===""?0:parseFloat(l[1])),this.setAlign(e,t),this.setPercentage(u,a),this.setOffset(n,o),this.setSizePercentage(h,f),this.setSizePadding(d,c);var g=i.onResizeCallback,p=i.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,p);var x=i.onUpdateViewportCallback,y=i.onUpdateViewportCallbackScope;return x!==void 0&&this.setUpdateViewportCallback(x,y),this}boot(){this.scene.scale.on("resize",this.anchor,this),this.anchor()}shutdown(i){this.isShutdown||(this.scene.scale.off("resize",this.anchor,this),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(i))}setAlign(i,e){return this.alignX=i,this.alignY=e,this}setPercentage(i,e){return this.percentageX=i,this.percentageY=e,this}setOffset(i,e){return this.offsetX=i,this.offsetY=e,this}setSizePercentage(i,e){return this.percentageWidth=i,this.percentageHeight=e,this}setSizePadding(i,e){return this.paddingWidth=i,this.paddingHeight=e,this}setResizeCallback(i,e){return this.onResizeCallback=i,this.onResizeCallbackScope=e,this}setUpdateViewportCallback(i,e){return this.onUpdateViewportCallback=i,this.onUpdateViewportCallbackScope=e,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var i=this.onResizeCallback,e=this.onResizeCallbackScope,v=this.anchorWidth,t=this.anchorHeight;if(!(v===void 0&&t===void 0||!i)){var s=this.parent;v===void 0&&(v=s.width),t===void 0&&(t=s.height),e?i.call(e,v,t,s,this):i(v,t,s,this)}}updatePosition(){var i=this.parent;return this.alignX===null?i.x=this.anchorX:this.alignX!==void 0&&(i.x=this.anchorX+i.displayWidth*(i.originX-this.alignX)),this.alignY===null?i.y=this.anchorY:this.alignY!==void 0&&(i.y=this.anchorY+i.displayHeight*(i.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){this.viewport=hd(this.scene,this.viewport?this.viewport:!0);var i=this.onUpdateViewportCallback,e=this.onUpdateViewportCallbackScope;i&&(e?i.call(e,this.viewport,this.parent,this):i(this.viewport,this.parent,this))}}var IT=function(m){m===void 0&&(m={});var i=m.hasOwnProperty("width"),e=m.hasOwnProperty("height"),v=m.hasOwnProperty("onResizeCallback");return(i||e)&&!v&&(m.onResizeCallback=function(t,s,u){i&&u.setMinWidth(t),e&&u.setMinHeight(s),u.layout()}),this._anchor===void 0?this._anchor=new so(this,m):this._anchor.resetFromJSON(m),this};const wT=Phaser.Utils.Objects.GetValue,Si=Phaser.Utils.Objects.GetAdvancedValue,el=Phaser.Math.Linear;class ha extends Yi{constructor(i,e){super(i,e),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(wT(i,"mode",0)),this.setScaleRange(Si(i,"start",void 0),Si(i,"end",0)),this}setMode(i){return typeof i=="string"&&(i=DT[i]),this.mode=i,this}setScaleRange(i,e){return typeof i=="number"?(this.startX=i,this.startY=i):(this.startX=Si(i,"x",this.parent.scaleX),this.startY=Si(i,"y",this.parent.scaleY)),typeof e=="number"?(this.endX=e,this.endY=e):(this.endX=Si(e,"x",void 0),this.endY=Si(e,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return this.hasScaleX&&(i.scaleX=this.startX),this.hasScaleY&&(i.scaleY=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,e){var v=e.t;e.isOddIteration&&(v=1-v),v=this.easeFn(v),this.hasScaleX&&(i.scaleX=el(this.startX,this.endX,v)),this.hasScaleY&&(i.scaleY=el(this.startY,this.endY,v))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const DT={stop:0,destroy:1,yoyo:2};var ld=function(m,i,e,v,t){var s,u;switch(e){case 0:case"x":s={x:0},u={x:m.scaleX};break;case 1:case"y":s={y:0},u={y:m.scaleY};break;default:s=0,u=m.scale;break}var n={mode:0,start:s,end:u,duration:i,ease:v===void 0?"Cubic":v};return t===void 0?t=new ha(m,n):t.resetFromJSON(n),t.restart(),t},ud=function(m,i,e,v,t,s){t instanceof ha&&(s=t,t=void 0),t===void 0&&(t=!0);var u={};switch(u.mode=t?1:0,e){case 0:case"x":u.end={x:0};break;case 1:case"y":u.end={y:0};break;default:u.end=0;break}return u.duration=i,u.ease=v===void 0?"Linear":v,s===void 0?s=new ha(m,u):s.resetFromJSON(u),s.restart(),s};const il=Phaser.Utils.Objects.IsPlainObject;var sl=function(m,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(m.emit(i.completeEventName,m),i.completeEventName=void 0)}),i.on("update",function(){var e=m.getParentSizer();e&&e.resetChildPositionState(m)})},BT={popUp(m,i,e){if(il(m)){var v=m;m=v.duration,i=v.orientation,e=v.ease}var t=this._scale===void 0;return this._scale=ld(this,m,i,e,this._scale),t&&sl(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(m,i,e){return this.popUp(m,i,e),Bt(this._scale)},scaleDownDestroy(m,i,e,v){if(il(m)){var t=m;m=t.duration,i=t.orientation,e=t.ease,v=t.destroy}var s=this._scale===void 0;return this._scale=ud(this,m,i,e,v,this._scale),s&&sl(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(m,i,e,v){return this.scaleDownDestroy(m,i,e,v),Bt(this._scale)},scaleDown(m,i,e){return this.scaleDownDestroy(m,i,e,!1),this},scaleDownPromise(m,i,e){return this.scaleDown(m,i,e),Bt(this._scale)}};const NT=Phaser.Utils.Objects.GetValue,nl=Phaser.Utils.Objects.GetAdvancedValue,GT=Phaser.Math.Linear;class la extends Yi{constructor(i,e){super(i,e),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(NT(i,"mode",0)),this.setAlphaRange(nl(i,"start",this.parent.alpha),nl(i,"end",0)),this}setMode(i){return typeof i=="string"&&(i=VT[i]),this.mode=i,this}setAlphaRange(i,e){return this.alphaStart=i,this.alphaEnd=e,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return i.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,e){var v=e.t;e.isOddIteration&&(v=1-v),i.alpha=GT(this.alphaStart,this.alphaEnd,v)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const VT={stop:0,destroy:1,yoyo:2},bT=Phaser.Utils.Objects.IsPlainObject;var Nn=function(m,i,e,v){var t,s;bT(e)?(t=e.start,s=e.end):s=e,t===void 0&&(t=0),s===void 0&&(s=1);var u={mode:0,start:t,end:s,duration:i};return v===void 0?v=new la(m,u):v.resetFromJSON(u),v.restart(),v},Gn=function(m,i,e,v){e instanceof la&&(v=e,e=void 0),e===void 0&&(e=!0);var t={mode:e?1:0,end:0,duration:i};return v===void 0?v=new la(m,t):v.resetFromJSON(t),v.restart(),v};const rl=Phaser.Utils.Objects.IsPlainObject;var al=function(m,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(m.emit(i.completeEventName,m),i.completeEventName=void 0)}),i.on("update",function(){var e=m.getParentSizer();e&&e.resetChildAlphaState(m)})},zT={fadeIn(m,i){if(rl(m)){var e=m;m=e.duration,i=e.alpha}var v=this._fade===void 0;return this._fade=Nn(this,m,i,this._fade),v&&al(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(m,i){return this.fadeIn(m,i),Bt(this._fade)},fadeOutDestroy(m,i){if(rl(m)){var e=m;m=e.duration,i=e.destroy}var v=this._fade===void 0;return this._fade=Gn(this,m,i,this._fade),v&&al(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(m,i){return this.fadeOutDestroy(m,i),Bt(this._fade)},fadeOut(m){return this.fadeOutDestroy(m,!1),this},fadeOutPromise(m){return this.fadeOut(m),Bt(this._fade)}};const UT=Phaser.Utils.Objects.GetValue,Ci=Phaser.Utils.Objects.GetAdvancedValue,ol=Phaser.Math.Linear;class xn extends Yi{constructor(i,e){super(i,e),this.resetFromJSON(e),this.boot()}resetFromJSON(i){if(super.resetFromJSON(i),this.setMode(UT(i,"mode",0)),i&&(i.hasOwnProperty("x")||i.hasOwnProperty("y"))){var e=Ci(i,"x",void 0),v=Ci(i,"y",void 0);this.setTargetPosition(e,v)}else this.setTargetPosition(i);return this}setMode(i){return typeof i=="string"&&(i=YT[i]),this.mode=i,this}setTargetPosition(i,e){if(typeof i=="number"||typeof e=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=i,this.endY=e;else{var v=i;this.startX=Ci(v,"startX",void 0),this.startY=Ci(v,"startY",void 0),this.endX=Ci(v,"endX",void 0),this.endY=Ci(v,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return this.hasMoveX&&(i.x=this.startX),this.hasMoveY&&(i.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,e){var v=e.t;e.isOddIteration&&(v=1-v),v=this.easeFn(v),this.hasMoveX&&(i.x=ol(this.startX,this.endX,v)),this.hasMoveY&&(i.y=ol(this.startY,this.endY,v))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const YT={stop:0,destroy:1,yoyo:2};var yn=function(m,i){if(typeof m=="number")return m;var e=m[0],v=parseFloat(m.substr(2));switch(e){case"+":return i+v;case"-":return i-v;case"*":return i*v;case"/":return i/v}},fd=function(m,i,e,v,t,s,u){s instanceof xn&&(u=s,s=void 0),s===void 0&&(s=!1);var n={};return n.mode=s?1:0,e!==void 0&&(n.startX=m.x,n.endX=yn(e,m.x)),v!==void 0&&(n.startY=m.y,n.endY=yn(v,m.y)),n.duration=i,n.ease=t===void 0?"Linear":t,u===void 0?u=new xn(m,n):u.resetFromJSON(n),u.restart(),u},dd=function(m,i,e,v,t,s,u){s instanceof xn&&(u=s,s=void 0),s===void 0&&(s=!1);var n={};return n.mode=s?1:0,e!==void 0&&(n.startX=yn(e,m.x),n.endX=m.x),v!==void 0&&(n.startY=yn(v,m.y),n.endY=m.y),n.duration=i,n.ease=t===void 0?"Linear":t,u===void 0?u=new xn(m,n):u.resetFromJSON(n),u.restart(),u};const hl=Phaser.Utils.Objects.IsPlainObject,ll=Phaser.Math.Distance.Between;var ul=function(m,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(m.emit(i.completeEventName,m),i.completeEventName=void 0)}),i.on("update",function(){var e=m.getParentSizer();e&&e.resetChildPositionState(m)})},XT={moveFrom(m,i,e,v,t){if(hl(m)){var s=m;i=s.x,e=s.y,s.hasOwnProperty("speed")?m=ll(i,e,this.x,this.y)*1e3/s.speed:m=s.duration,v=s.ease}var u=this._easeMove===void 0;return this._easeMove=dd(this,m,i,e,v,t,this._easeMove),u&&ul(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(m,i,e,v,t){return this.moveFrom(m,i,e,v,t),Bt(this._easeMove)},moveFromDestroy(m,i,e,v){return this.moveFrom(m,i,e,v,!0),this},moveFromDestroyPromise(m,i,e,v){return this.moveFromDestroy(m,i,e,v),Bt(this._easeMove)},moveTo(m,i,e,v,t){if(hl(m)){var s=m;i=s.x,e=s.y,s.hasOwnProperty("speed")?m=ll(i,e,this.x,this.y)*1e3/s.speed:m=s.duration,v=s.ease}var u=this._easeMove===void 0;return this._easeMove=fd(this,m,i,e,v,t,this._easeMove),u&&ul(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(m,i,e,v,t){return this.moveTo(m,i,e,v,t),Bt(this._easeMove)},moveToDestroy(m,i,e,v){return this.moveTo(m,i,e,v,!0),this},moveToDestroyPromise(m,i,e,v){return this.moveToDestroy(m,i,e,v,!0),Bt(this._easeMove)}};const ue=Phaser.Utils.Objects.GetValue;class no extends An{constructor(i,e){super(i,e),this.timer=new td,this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.timer.resetFromJSON(ue(i,"timer")),this.setEnable(ue(i,"enable",!0)),this.setMode(ue(i,"mode",1)),this.isRunning=ue(i,"isRunning",!1),this.setMagnitudeMode(ue(i,"magnitudeMode",1)),this.setDuration(ue(i,"duration",500)),this.setMagnitude(ue(i,"magnitude",10)),this.ox=ue(i,"ox",void 0),this.oy=ue(i,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(i){this.isShutdown||(super.shutdown(i),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.events.off("preupdate",this.update,this))}setEnable(i){return i==null&&(i=!0),this.enable=i,this}setMode(i){return typeof i=="string"&&(i=WT[i]),this.mode=i,this}setMagnitudeMode(i){return typeof i=="string"&&(i=HT[i]),this.magnitudeMode=i,this}setDuration(i){return this.duration=i,this}setMagnitude(i){return this.magnitude=i,this}start(i,e){if(typeof i!="number"){var v=i;e=ue(v,"magnitude",void 0),i=ue(v,"duration",void 0)}return e!==void 0&&this.setMagnitude(e),i!==void 0&&this.setDuration(i),this.timer.setDuration(this.duration).start(),super.start(),this}shake(i,e){return this.start(i,e),this}update(i,e){if(!this.isRunning||!this.enable)return this;var v=this.parent;if(!v.active)return this;if(this.timer.update(i,e),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=v.x,this.oy=v.y);var t=this.magnitude;this.magnitudeMode===1&&(t*=1-this.timer.t);var s=Math.random()*Math.PI*2,u=Math.cos(s)*t,n=Math.sin(s)*t;v.setPosition(this.ox+u,this.oy+n)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var i=this.parent;return this.ox===i.x&&this.oy===i.y?this:(i.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0,this)}}const WT={effect:0,behavior:1},HT={constant:0,decay:1},$T=Phaser.Utils.Objects.IsPlainObject;var JT=function(m,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(m.emit(i.completeEventName,m),i.completeEventName=void 0)})},KT={shake(m,i,e){if($T(m)){var v=m;m=v.duration,i=v.magnitude,e=v.magnitudeMode}return this._shake===void 0&&(this._shake=new no(this,{mode:0,magnitudeMode:1}),JT(this,this._shake)),this._shake.completeEventName="shake.complete",m!==void 0&&this._shake.setDuration(m),i!==void 0&&this._shake.setMagnitude(i),e!==void 0&&this._shake.setMagnitudeMode(e),this._shake.shake(),this},shakePromise(m,i){return this.shake(m,i),Bt(this._shake)}},Ze=function(m){vd(m,!1)},Qe=function(m){vd(m,!0)},ro=function(m){if(!m)return!1;var i=wn(m);return!i.hidden},vd=function(m,i){if(!!m){var e=wn(m);e.hidden=i,m.rexContainer.parent.setChildVisible(m,!i)}},ZT={show(m){return m===void 0&&(m=this),Ze(m),this},hide(m){return m===void 0&&(m=this),Qe(m),this},isShow(m){return m===void 0&&(m=this),ro(m)}},ua=function(m,i,e,v,t){return!(!m||!m.getBounds||v&&!v(m,i,e)||(mr=m.getBounds(mr),!mr.contains(i,e))||t&&!t(m,i,e))},mr=void 0,cd=function(m,i,e,v){if(i)return ua(m,i.x,i.y,e,v);for(var t=m.scene.input.manager,s=t.pointersTotal,u=t.pointers,n=0;n<s;n++)if(i=u[n],ua(m,i.x,i.y,e,v))return!0;return!1},QT=function(m,i){return i===void 0&&(i=this),cd(i,m)},Vn=function(m){return m&&typeof m=="function"},fa=function(m,i,e,v,t){return ua(m,i,e,jT(v),kT(t))},fl=function(m){var i=m.rexSizer&&m.rexSizer.hidden;return!i},jT=function(m){return m?function(i,e,v){return fl(i)?(m(i,e,v),!0):!1}:fl},kT=function(m){return m},qT=function(m,i,e,v,t){if(Vn(e)||(t=e,e=void 0,v=void 0),t===void 0&&(this.sizerChildren?t=this.sizerChildren:t=this.children),he(t)){for(var s,u=0,n=t.length;u<n;u++)if(s=t[u],fa(s,m,i,e,v))return s}else{var s;for(var a in t)if(s=t[a],fa(s,m,i,e,v))return s}return null},_T={getParentSizer(m){return this.getParent(m)},getTopmostSizer(m){return this.getTopmostParent(m)}},je=function(m,i,e){!m||i===void 0&&e===void 0||(m.resize?(i===void 0&&(i=m.width),e===void 0&&(e=m.height),m.resize(i,e)):(i!==void 0&&(m.displayWidth=i),e!==void 0&&(m.displayHeight=e)))},tE=function(m,i){return i===void 0?i={}:i===!0&&(i=eE),i.x=m.x,i.y=m.y,i.scaleX=m.scaleX,i.scaleY=m.scaleY,i.width=m.width,i.height=m.height,i.displayWidth=m.displayWidth,i.displayHeight=m.displayHeight,i},eE={},ys=function(m){this.sizerEventsEnable&&(tE(m,this.getChildPrevState(m)),this.layoutedChildren.push(m))},Ts=function(m,i,e,v,t,s,u,n){Bn(m,i,e,v,t,s),u!==void 0&&(m.x+=u),n!==void 0&&(m.y+=n),this.resetChildPositionState(m),this.sizerEventsEnable&&m.emit("sizer.postlayout",m,this)};const iE=Phaser.Display.Align.CENTER;var sE=function(){if(this.backgroundChildren!==void 0)for(var m=this.backgroundChildren,i=this.left,e=this.top,v=this.width,t=this.height,s,u,n,a,o,r,h,d=0,l=m.length;d<l;d++)s=m[d],u=s.rexSizer,!u.hidden&&(n=u.padding,ys.call(this,s),a=i+n.left,o=e+n.top,r=v-n.left-n.right,h=t-n.top-n.bottom,je(s,r,h),Ts.call(this,s,a,o,r,h,iE))},nE=function(m,i){var e=typeof m;return e==="string"?m=this.getElement(m):(m===void 0||e!="object")&&(i=m,m=this),i===void 0&&(i=!0),m.input&&m.input.hasOwnProperty("draggable")?m.input.draggable=i:i&&(m.setInteractive(),m.scene.input.setDraggable(m),m.on("drag",function(v,t,s){var u=this.getTopmostSizer();u.x+=t-m.x,u.y+=s-m.y},this)),this};const ki=Phaser.Utils.Objects.GetValue;class Wi extends zt{constructor(i,e){super(i,e),this._enable=void 0,i.setInteractive(ki(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(ki(i,"enable",!0)),this.setMode(ki(i,"mode",1)),this.setClickInterval(ki(i,"clickInterval",100)),this.setDragThreshold(ki(i,"threshold",void 0)),this}boot(){var i=this.parent;i.on("pointerdown",this.onPress,this),i.on("pointerup",this.onRelease,this),i.on("pointerout",this.onPointOut,this),i.on("pointermove",this.onMove,this),i.on("pointerover",this.onOver,this),i.on("pointeroutr",this.onOut,this)}shutdown(i){this.isShutdown||(this.pointer=null,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i){i||this.cancel(),this._enable=i;var e=i?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(i){return typeof i=="string"&&(i=rE[i]),this.mode=i,this}setClickInterval(i){return this.clickInterval=i,this}setDragThreshold(i){return this.dragThreshold=i,this}onPress(i,e,v,t){this.pointer===void 0&&(this.pointer=i,this.mode===0&&this.click(i.downTime,i,t))}onRelease(i,e,v,t){this.pointer===i&&(this.mode===1&&this.click(i.upTime,i,t),this.pointer=void 0)}onPointOut(i,e){this.pointer===i&&this.cancel()}onMove(i,e,v,t){this.pointer===i&&this.dragThreshold!==void 0&&i.getDistance()>=this.dragThreshold&&this.cancel()}click(i,e,v){if(!this.enable)return this;if(i===void 0)return this.emit("click",this,this.parent,e,v),this;this.pointer=void 0;var t=this.lastClickTime;return t!==void 0&&i-t<=this.clickInterval?this:(this.lastClickTime=i,this.emit("click",this,this.parent,e,v),this)}cancel(){return this.pointer=void 0,this}onOver(i,e,v,t){return this.enable?(this.emit("over",this,this.parent,i,t),this):this}onOut(i,e){return this.enable?(this.emit("out",this,this.parent,i,e),this):this}}const rE={press:0,pointerdown:0,release:1,pointerup:1};var aE={onClick(m,i,e){return m?(this._click===void 0&&(this._click=new Wi(this,e)),this._click.on("click",m,i),this):this},offClick(m,i){return this._click===void 0?this:(this._click.off("click",m,i),this)},enableClick(m){return this._click===void 0?this:(this._click.setEnable(m),this)},disableClick(){return this._click===void 0?this:(this._click.setEnable(!1),this)}};class Me{constructor(i){var e=Dt(i,"states",void 0);e&&this.addStates(e);var v=Dt(i,"extend",void 0);if(v)for(var t in v)(!this.hasOwnProperty(t)||this[t]===void 0)&&(this[t]=v[t]);var s=Dt(i,"eventEmitter",void 0),u=Dt(i,"EventEmitterClass",void 0);this.setEventEmitter(s,u),this._stateLock=!1,this.resetFromJSON(i)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(i){this.setEnable(Dt(i,"enable",!0)),this.start(Dt(i,"start",void 0));var e=Dt(i,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}runMethod(i,e,v,t,s,u){var n=this[i+"_"+this.state];if(!!n){var a=arguments.length;switch(a){case 1:return n.call(this);case 2:return n.call(this,e);case 3:return n.call(this,e,v);case 4:return n.call(this,e,v,t);case 5:return n.call(this,e,v,t,s);case 6:return n.call(this,e,v,t,s,u)}for(var o=new Array(a-1),r=1;r<a;r++)o[r-1]=arguments[r];return n.apply(this,o)}}set state(i){if(!(!this.enable||this._stateLock)&&this._state!==i){if(this._prevState=this._state,this._state=i,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var e="exit_"+this._prevState,v=this[e];v&&v.call(this),this.emit(e,this)}if(this._stateLock=!1,this._state!=null){var t="enter_"+this._state,s=this[t];s&&s.call(this),this.emit(t,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(i){return this._start=i,this._prevState=void 0,this._state=i,this}goto(i){return i!=null&&(this.state=i),this}next(){var i,e=this["next_"+this.state];return e&&(typeof e=="string"?i=e:i=e.call(this)),this.goto(i),this}addState(i,e){var v=Dt(e,"next",void 0);v&&(this["next_"+i]=v);var t=Dt(e,"exit",void 0);t&&(this["exit_"+i]=t);var s=Dt(e,"enter",void 0);return s&&(this["enter_"+i]=s),this}addStates(i){for(var e in i)this.addState(e,i[e]);return this}update(i,e){this.runMethod("update",i,e)}preupdate(i,e){this.runMethod("preupdate",i,e)}postupdate(i,e){this.runMethod("postupdate",i,e)}}Object.assign(Me.prototype,Ui);class oE extends Me{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(i){return this.cooldownTime=i,this.cooldownMode=i!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(i,e){this.remainderTime-=e,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>e?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const xr=Phaser.Utils.Objects.GetValue;class da extends zt{constructor(i,e){super(i,e),this._enable=void 0,this.cooldown=new oE,this.parent.setInteractive(xr(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.isInTouched=!1,this.setEnable(xr(i,"enable",!0)),this.setCooldown(xr(i,"cooldown",void 0)),this}boot(){var i=this.parent;i.on("pointerdown",this.onPointIn,this),i.on("pointerover",this.onPointIn,this),i.on("pointerup",this.onPointOut,this),i.on("pointerout",this.onPointOut,this),this.scene.events.on("preupdate",this.preupdate,this)}shutdown(i){this.isShutdown||(this.scene.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||(this.isInTouched=!1,this.pointer=void 0),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(i){this.cooldown.setCooldownTime(i)}setCooldown(i){return this.cooldownTime=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(i,e,v){!this.enable||!i.isDown||this.pointer!==void 0||(this.pointer=i,this.isInTouched=!0)}onPointOut(i){!this.enable||this.pointer!==i||(this.pointer=void 0,this.isInTouched=!1)}preupdate(i,e){this.cooldown.update(i,e),this.isInTouched&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}}var hE={onTouching(m,i,e){return m?(this._inTouching===void 0&&(this._inTouching=new da(this,e)),this._inTouching.on("intouch",m,i),this):this},offTouching(m,i){return this._click===void 0?this:(this._inTouching.off("intouch",m,i),this)}},pd=function(m,i,e){for(var v,t=0,s=m.length;t<s;t++)if(v=m[t],!!fa(v,i,e))return v.pointToChild(i,e);return null},ke=function(m,i,e,v,t,s,u){var n;t===void 0?n=v:n=pd(e,v,t),n&&m.emit(i,n,s,u)};const lE=Phaser.Utils.Objects.GetValue;var uE=function(m){var i=lE(m,"click",void 0);if(i!==!1){i===void 0&&(i={}),i.hasOwnProperty("threshold")||(i.threshold=10);var e=this._childrenInteractive;this._click=new Wi(this,i),this._click.on("click",function(v,t,s,u){ke(e.eventEmitter,`${e.eventNamePrefix}click`,e.targetSizers,s.worldX,s.worldY,s,u)},this)}};const fE=Phaser.Utils.Objects.GetValue;var dE=function(m){var i=fE(m,"over",void 0);i!==!1&&this.on("pointermove",dl,this).on("pointerover",dl,this).on("pointerout",vE,this)},dl=function(m,i,e,v){var t=this._childrenInteractive,s=pd(t.targetSizers,m.worldX,m.worldY),u=t.lastOverChild;s&&u&&s===u||(t.lastOverChild=s,ke(t.eventEmitter,`${t.eventNamePrefix}out`,t.targetSizers,u,void 0,m,v),ke(t.eventEmitter,`${t.eventNamePrefix}over`,t.targetSizers,s,void 0,m,v))},vE=function(m,i){var e=this._childrenInteractive,v=e.lastOverChild;e.lastOverChild=null,ke(e.eventEmitter,`${e.eventNamePrefix}out`,e.targetSizers,v,void 0,m,i)};const yr=Phaser.Utils.Objects.GetValue;class bn extends An{constructor(i,e){var v=kf(i);v===i&&(i=void 0),super(v,e),this.gameObject=i,i&&i.setInteractive(yr(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setEnable(yr(i,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(yr(i,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Tr,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.events.once("shutdown",this.destroy,this)}shutdown(i){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragCancel(),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setDetectBounds(i){return this.bounds=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(i,e){if(!!this.enable&&this.pointer===void 0){var v=this.bounds?this.bounds.contains(i.x,i.y):!0;!v||this.pointer!==i&&(this.pointer=i,this.lastPointer=i,this.movedState=!1,this.tracerState=vl,this.gameObject===void 0&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}}onPointerUp(i){if(!!this.enable){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;!e||this.pointer===i&&(this.pointer=void 0,this.movedState=!1,this.tracerState=Tr,this.onDragEnd())}}onPointerMove(i){if(!!this.enable&&i.isDown){var e=this.bounds?this.bounds.contains(i.x,i.y):!0,v=this.pointer===i;!v&&e||(v&&!e?this.onPointerUp(i):(this.movedState||(this.movedState=i.x!==i.downX||i.y!==i.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===vl&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Tr,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(i,e){}postUpdate(i,e){}startTicking(){super.startTicking(),this.scene.events.on("preupdate",this.preUpdate,this),this.scene.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.events.off("preupdate",this.preUpdate,this),this.scene.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(i){return this.recongizedState=i,this}get state(){return this.recongizedState.state}set state(i){this.recongizedState.state=i}cancel(){return this.state=cE,this}}const Tr=0,vl=1,cE="IDLE",oi=Phaser.Utils.Objects.GetValue,pE=Phaser.Math.Distance.Between;class zn extends bn{constructor(i,e){super(i,e);var v=this,t={states:{IDLE:{enter:function(){v.stop(),v.tapsCount=0,v.x=0,v.y=0,v.worldX=0,v.worldY=0},exit:function(){var s=v.lastPointer;v.x=s.x,v.y=s.y,v.worldX=s.worldX,v.worldY=s.worldY}},BEGIN:{enter:function(){v.start(),v.tapsCount=0,v.emit("tappingstart",v,v.gameObject,v.lastPointer)}},RECOGNIZED:{enter:function(){v.start(),v.emit("tap",v,v.gameObject,v.lastPointer),v.emit(`${v.tapsCount}tap`,v,v.gameObject,v.lastPointer)}}},init:function(){this.state=hi},eventEmitter:!1};this.setRecongizedStateObject(new Me(t))}resetFromJSON(i){super.resetFromJSON(i),this.setHoldTime(oi(i,"time",250)),this.setTapInterval(oi(i,"tapInterval",200)),this.setDragThreshold(oi(i,"threshold",9)),this.setTapOffset(oi(i,"tapOffset",10));var e=oi(i,"taps",void 0);return e!==void 0?this.setTaps(e):(this.setMaxTaps(oi(i,"maxTaps",void 0)),this.setMinTaps(oi(i,"minTaps",void 0))),this}onDragStart(){switch(this.state){case hi:this.state=Pi;break;case Pi:var i=this.lastPointer,e=pE(i.upX,i.upY,i.x,i.y);e>this.tapOffset&&(this.state=Ri,this.state=Pi);break;case Ri:this.state=Pi;break}}onDragEnd(){this.state===Pi&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Ri))}onDrag(){this.state!==hi&&this.pointer.getDistance()>this.dragThreshold&&(this.state=hi)}preUpdate(i,e){if(!(!this.isRunning||!this.enable)&&this.state===Pi){var v=this.lastPointer;if(v.isDown){var t=i-v.downTime;t>this.holdTime&&(this.state=hi)}else{var s=i-v.upTime;s>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Ri:this.state=hi)}}}postUpdate(i,e){!this.isRunning||!this.enable||this.state===Ri&&(this.state=hi)}get isTapped(){return this.state===Ri}setHoldTime(i){return this.holdTime=i,this}setTapInterval(i){return this.tapInterval=i,this}setDragThreshold(i){return this.dragThreshold=i,this}setTapOffset(i){return this.tapOffset=i,this}setMaxTaps(i){return this.maxTaps=i,this}setMinTaps(i){return this.minTaps=i,this}setTaps(i,e){return e===void 0&&(e=i),this.setMinTaps(i).setMaxTaps(e),this}}const hi="IDLE",Pi="BEGIN",Ri="RECOGNIZED",cl=Phaser.Utils.Objects.GetValue;class Un extends bn{constructor(i,e){super(i,e);var v=this,t={states:{IDLE:{enter:function(){v.x=0,v.y=0,v.worldX=0,v.worldY=0},exit:function(){var s=v.lastPointer;v.x=s.x,v.y=s.y,v.worldX=s.worldX,v.worldY=s.worldY}},BEGIN:{enter:function(){v.start()},exit:function(){v.stop()}},RECOGNIZED:{enter:function(){v.emit("pressstart",v,v.gameObject,v.lastPointer)},exit:function(){v.emit("pressend",v,v.gameObject,v.lastPointer)}}},init:function(){this.state=Ys},eventEmitter:!1};this.setRecongizedStateObject(new Me(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(cl(i,"threshold",9)),this.setHoldTime(cl(i,"time",251)),this}onDragStart(){this.state=pl,this.holdTime===0&&(this.state=Er)}onDragEnd(){this.state=Ys}onDrag(){this.state!==Ys&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Ys)}preUpdate(i,e){if(!(!this.isRunning||!this.enable)&&this.state===pl){var v=i-this.pointer.downTime;v>=this.holdTime&&(this.state=Er)}}get isPressed(){return this.state===Er}setHoldTime(i){return this.holdTime=i,this}setDragThreshold(i){return this.dragThreshold=i,this}}const Ys="IDLE",pl="BEGIN",Er="RECOGNIZED",gE=Phaser.Utils.Objects.GetValue;class gd extends bn{constructor(i,e){super(i,e);var v=this,t={states:{IDLE:{},BEGIN:{enter:function(){var s=v.pointer;v.startX=s.x,v.startY=s.y,v.startWorldX=s.worldX,v.startWorldY=s.worldY}},RECOGNIZED:{enter:function(){v.emit("panstart",v,v.gameObject,v.lastPointer)},exit:function(){var s=v.lastPointer;v.endX=s.x,v.endY=s.y,v.endWorldX=s.worldX,v.endWorldY=s.worldY,v.emit("panend",v,v.gameObject,v.lastPointer)}}},init:function(){this.state=gl},eventEmitter:!1};this.setRecongizedStateObject(new Me(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(gE(i,"threshold",10)),this}onDragStart(){this.state=ml,this.dragThreshold===0&&(this.state=Xs)}onDragEnd(){this.state=gl}onDrag(){switch(this.state){case ml:this.pointer.getDistance()>=this.dragThreshold&&(this.state=Xs);break;case Xs:var i=this.pointer.position,e=this.pointer.prevPosition;this.dx=i.x-e.x,this.dy=i.y-e.y;var v=this.pointer;this.x=v.x,this.y=v.y,this.worldX=v.worldX,this.worldY=v.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===Xs}setDragThreshold(i){return this.dragThreshold=i,this}}const gl="IDLE",ml="BEGIN",Xs="RECOGNIZED",mE=Phaser.Math.Distance.Between,xE=Phaser.Math.Angle.Between;var yE={getDt:function(){var m=this.scene.sys.game,i=m.loop.delta;return i},getVelocity:function(){var m=this.pointer.position,i=this.pointer.prevPosition,e=mE(i.x,i.y,m.x,m.y),v=e/(this.getDt()*.001);return v},getVelocityX:function(){var m=this.pointer.position,i=this.pointer.prevPosition,e=Math.abs(m.x-i.x),v=e/(this.getDt()*.001);return v},getVelocityY:function(){var m=this.pointer.position,i=this.pointer.prevPosition,e=Math.abs(m.y-i.y),v=e/(this.getDt()*.001);return v},getVelocityAngle:function(){var m=this.pointer.position,i=this.pointer.prevPosition,e=xE(i.x,i.y,m.x,m.y);return e}},TE={"up&down":0,"left&right":1,"4dir":2,"8dir":3},EE=function(m,i,e){switch(e===void 0?e={}:e===!0&&(e=SE),e.left=!1,e.right=!1,e.up=!1,e.down=!1,m=(m+360)%360,i){case 0:m<180?e.down=!0:e.up=!0;break;case 1:m>90&&m<=270?e.left=!0:e.right=!0;break;case 2:m>45&&m<=135?e.down=!0:m>135&&m<=225?e.left=!0:m>225&&m<=315?e.up=!0:e.right=!0;break;case 3:m>22.5&&m<=67.5?(e.down=!0,e.right=!0):m>67.5&&m<=112.5?e.down=!0:m>112.5&&m<=157.5?(e.down=!0,e.left=!0):m>157.5&&m<=202.5?e.left=!0:m>202.5&&m<=247.5?(e.left=!0,e.up=!0):m>247.5&&m<=292.5?e.up=!0:(m>292.5&&m<=337.5&&(e.up=!0),e.right=!0);break}return e},SE={};const Sr=Phaser.Utils.Objects.GetValue,CE=Phaser.Math.RadToDeg;class Es extends bn{constructor(i,e){super(i,e);var v=this,t={states:{IDLE:{enter:function(){v.x=0,v.y=0,v.worldX=0,v.worldY=0},exit:function(){var s=v.lastPointer;v.x=s.x,v.y=s.y,v.worldX=s.worldX,v.worldY=s.worldY}},BEGIN:{enter:function(){v.validDrag=!1}},RECOGNIZED:{enter:function(){v.start(),v.updateDirectionStates(),v.emit("swipe",v,v.gameObject,v.lastPointer)},exit:function(){v.stop(),v.clearDirectionStates()}}},init:function(){this.state=Cr},eventEmitter:!1};this.setRecongizedStateObject(new Me(t)),this.clearDirectionStates()}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(Sr(i,"threshold",10)),this.setVelocityThreshold(Sr(i,"velocityThreshold",1e3)),this.setDirectionMode(Sr(i,"dir","8dir")),this}onDragStart(){this.state=xl}onDragEnd(){this.state=Cr}onDrag(){this.state===xl&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Pr))}postUpdate(i,e){!this.isRunning||!this.enable||this.state===Pr&&(this.state=Cr)}get isSwiped(){return this.state===Pr}get dragVelocity(){var i;switch(this.dirMode){case 0:i=this.getVelocityY();break;case 1:i=this.getVelocityX();break;default:i=this.getVelocity();break}return i}setDragThreshold(i){return this.dragThreshold=i,this}setVelocityThreshold(i){return this.velocityThreshold=i,this}setDirectionMode(i){return typeof i=="string"&&(i=TE[i]),this.dirMode=i,this}updateDirectionStates(){var i=CE(this.getVelocityAngle());return EE(i,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Es.prototype,yE);const Cr="IDLE",xl="BEGIN",Pr="RECOGNIZED",Rr=Phaser.Utils.Objects.GetValue,PE=Phaser.Utils.Array.SpliceOne,RE=Phaser.Math.Distance.Between,ME=Phaser.Math.Angle.Between;class ao{constructor(i,e){var v=i.input.manager.pointersTotal-1;v<2&&i.input.addPointer(2-v),this.scene=i,this.setEventEmitter(Rr(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setEnable(Rr(i,"enable",!0)),this.bounds=Rr(i,"bounds",void 0),this.tracerState=Ws,this.pointers.length=0,Vi(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,Vi(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragCancel(),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(i){if(!!this.enable&&this.pointers.length!==2){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;if(!!e){var v=this.pointers.indexOf(i);if(v===-1)switch(this.movedState[i.id]=!1,this.pointers.push(i),this.tracerState){case Ws:this.tracerState=_i,this.onDrag1Start();break;case _i:this.tracerState=ge,this.onDrag2Start();break}}}}onPointerUp(i){if(!!this.enable){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;if(!!e){var v=this.pointers.indexOf(i);if(v!==-1)switch(delete this.movedState[i.id],PE(this.pointers,v),this.tracerState){case _i:this.tracerState=Ws,this.onDrag1End();break;case ge:this.tracerState=_i,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(i){if(!!this.enable&&i.isDown){var e=this.bounds?this.bounds.contains(i.x,i.y):!0,v=this.pointers.indexOf(i)!==-1;if(!(!v&&e)){if(v&&!e)this.onPointerUp(i);else if(this.movedState[i.id]||(this.movedState[i.id]=i.x!==i.downX||i.y!==i.downY),this.movedState[i.id])switch(this.tracerState){case _i:this.onDrag1();break;case ge:this.onDrag2();break}}}}dragCancel(){return this.tracerState===ge&&this.onDrag2End(),this.pointers.length=0,Vi(this.movedState),this.tracerState=Ws,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==ge)return 0;var i=this.pointers[0],e=this.pointers[1];return RE(i.x,i.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==ge)return 0;var i=this.pointers[0],e=this.pointers[1];return ME(i.x,i.y,e.x,e.y)}get drag1Vector(){var i=this.pointers[0];if(i&&this.movedState[i.id]){var e=i.position,v=i.prevPosition;qi.x=e.x-v.x,qi.y=e.y-v.y}else qi.x=0,qi.y=0;return qi}get centerX(){if(this.tracerState!==ge)return 0;var i=this.pointers[0].position,e=this.pointers[1].position;return(i.x+e.x)/2}get centerY(){if(this.tracerState!==ge)return 0;var i=this.pointers[0].position,e=this.pointers[1].position;return(i.y+e.y)/2}get prevCenterX(){if(this.tracerState!==ge)return 0;var i=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(i.x+e.x)/2}get prevCenterY(){if(this.tracerState!==ge)return 0;var i=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(i.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(i){return this.recongizedState=i,this}get state(){return this.recongizedState.state}set state(i){this.recongizedState.state=i}cancel(){return this.state=AE,this}}Object.assign(ao.prototype,Ui);var qi={};const Ws=0,_i=1,ge=2,AE="IDLE",OE=Phaser.Utils.Objects.GetValue;class md extends ao{constructor(i,e){super(i,e);var v=this,t={states:{IDLE:{enter:function(){v.prevDistance=void 0,v.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){v.emit("pinchstart",v)},exit:function(){v.emit("pinchend",v)}}},init:function(){this.state=yl},eventEmitter:!1};this.setRecongizedStateObject(new Me(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(OE(i,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=Tl,this.dragThreshold===0&&(this.state=Hs)}onDrag2End(){this.state=yl}onDrag2(){switch(this.state){case Tl:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var i=this.distanceBetween;this.scaleFactor=i/this.prevDistance,this.prevDistance=i,this.state=Hs}break;case Hs:var i=this.distanceBetween;this.scaleFactor=i/this.prevDistance,this.emit("pinch",this),this.prevDistance=i;break}}get isPinched(){return this.state===Hs}setDragThreshold(i){return this.dragThreshold=i,this}}const yl="IDLE",Tl="BEGIN",Hs="RECOGNIZED",LE=Phaser.Math.RotateAround;var El=function(m,i,e,v){return LE(m,i,e,v),m.rotation+=v,m},FE=function(m,i){if(!this.isRotation)return this;i===void 0&&(i=this.pointers[0].camera);var e=this.movementCenterX,v=this.movementCenterY;i.getWorldPoint(this.centerX,this.centerY,Mr);var t=Mr.x,s=Mr.y,u=this.rotation;if(Array.isArray(m))for(var n=m,a=0,o=n.length;a<o;a++)m=n[a],m.x+=e,m.y+=v,El(m,t,s,u);else m.x+=e,m.y+=v,El(m,t,s,u);return this},Mr={};const IE=Phaser.Utils.Objects.GetValue,Ar=Phaser.Math.Angle.WrapDegrees,Sl=Phaser.Math.Angle.ShortestBetween,Or=Phaser.Math.RadToDeg,wE=Phaser.Math.DegToRad;class oo extends ao{constructor(i,e){super(i,e);var v=this,t={states:{IDLE:{enter:function(){v.prevAngle=void 0,v.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){v.emit("rotatestart",v)},exit:function(){v.emit("rotateend",v)}}},init:function(){this.state=Cl},eventEmitter:!1};this.setRecongizedStateObject(new Me(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(IE(i,"threshold",0)),this}onDrag2Start(){this.prevAngle=Ar(Or(this.angleBetween)),this.state=Pl,this.dragThreshold===0&&(this.state=$s)}onDrag2End(){this.state=Cl}onDrag2(){switch(this.state){case Pl:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var i=Ar(Or(this.angleBetween));this.angle=Sl(this.prevAngle,i),this.prevAngle=i,this.state=$s}break;case $s:var i=Ar(Or(this.angleBetween));this.angle=Sl(this.prevAngle,i),this.prevAngle=i,this.emit("rotate",this);break}}get isRotated(){return this.state===$s}get rotation(){return wE(this.angle)}setDragThreshold(i){return this.dragThreshold=i,this}}var DE={spinObject:FE};Object.assign(oo.prototype,DE);const Cl="IDLE",Pl="BEGIN",$s="RECOGNIZED",BE=Phaser.Utils.Objects.GetValue;var NE=function(m){var i=BE(m,"tap",void 0);if(i!==!1){var e=this._childrenInteractive;this._tap=new zn(this,i),this._tap.on("tap",function(v,t,s){ke(e.eventEmitter,`${e.eventNamePrefix}${v.tapsCount}tap`,e.targetSizers,v.worldX,v.worldY,s)},this)}};const GE=Phaser.Utils.Objects.GetValue;var VE=function(m){var i=GE(m,"press",void 0);if(i!==!1){var e=this._childrenInteractive;this._press=new Un(this,i),this._press.on("pressstart",function(v,t,s){ke(e.eventEmitter,`${e.eventNamePrefix}pressstart`,e.targetSizers,v.worldX,v.worldY,s)},this).on("pressend",function(v,t,s){ke(e.eventEmitter,`${e.eventNamePrefix}pressend`,e.targetSizers,v.worldX,v.worldY,s)},this)}};const bE=Phaser.Utils.Objects.GetValue;var zE=function(m){var i=bE(m,"swipe",void 0);if(i!==!1){i===void 0&&(i={}),i.hasOwnProperty("dir")||(i.dir="4dir");var e=this._childrenInteractive;this._swipe=new Es(this,i),this._swipe.on("swipe",function(v,t,s){var u=v.left?"left":v.right?"right":v.up?"up":"down";ke(e.eventEmitter,`${e.eventNamePrefix}swipe${u}`,e.targetSizers,v.worldX,v.worldY,s)},this)}};const Lr=Phaser.Utils.Objects.GetValue;var ho=function(m,i){return m.setInteractive(),m._childrenInteractive={targetSizers:Lr(i,"targets",[m]),eventEmitter:Lr(i,"eventEmitter",m),eventNamePrefix:Lr(i,"inputEventPrefix","child.")},uE.call(m,i),dE.call(m,i),NE.call(m,i),VE.call(m,i),zE.call(m,i),m},UE=function(m){return ho(this,m),this},YE=function(){for(var m=this.getAllChildren([this]),i=0,e=m.length;i<e;i++){var v=m[i];v.emit.apply(v,arguments)}return this},xd={getSizerConfig:wn,getChildPrevState:Qy,pushIntoBounds:jy,drawBounds:hT,resolveWidth:eo,resolveChildrenWidth:gT,resolveHeight:io,getChildWidth:mT,getChildHeight:xT,getExpandedChildWidth:yT,getExpandedChildHeight:TT,getChildrenWidth:ET,getChildrenHeight:ST,addChildrenMap:tl,addElement:tl,getElement:vT,getAllChildrenSizers:CT,getChildrenSizers:PT,preLayout:xs,layout:MT,runLayout:AT,layoutChildren:OT,runWidthWrap:ad,layoutBackgrounds:sE,postLayout:LT,setAnchor:IT,isInTouching:QT,pointToChild:qT,setDraggable:nE,setChildrenInteractive:UE,broadcastEvent:YE};Object.assign(xd,pT,fT,dT,_T,BT,zT,XT,KT,aE,hE,ZT,RT);const ts=Phaser.Utils.Objects.GetValue;class gi extends le{constructor(i,e,v,t,s,u){super(i,e,v,2,2),this.isRexSizer=!0,this.setMinSize(t,s),this.setName(ts(u,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.layoutedChildren=void 0;var n=ts(u,"anchor",void 0);n&&this.setAnchor(n),this.setInnerPadding(ts(u,"space",0)),this.setDraggable(ts(u,"draggable",!1)),this.setSizerEventsEnable(ts(u,"sizerEvents",!1)),this.setDirty(!0)}destroy(i){if(!!this.scene){if(i)for(var e=this.getAllChildrenSizers([this]),v=0,t=e.length;v<t;v++)e[v].sizerEventsEnable=!1;super.destroy(i),this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(i,e){return this.setMinWidth(i).setMinHeight(e),this}setMinWidth(i){return i==null&&(i=0),this.minWidth=i,this}setMinHeight(i){return i==null&&(i=0),this.minHeight=i,this}setDirty(i){return i===void 0&&(i=!0),this.dirty=i,this}setSizerEventsEnable(i){return i===void 0&&(i=!0),this.sizerEventsEnable=i,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-St(this)*this.originX}set left(i){this.x+=i-this.left}alignLeft(i){return this.left=i,this}get right(){return this.left+St(this)}set right(i){this.x+=i-this.right}alignRight(i){return this.right=i,this}get centerX(){return this.left+St(this)/2}set centerX(i){this.x+=i-this.centerX}alignCenterX(i){return this.centerX=i,this}get top(){return this.y-gt(this)*this.originY}set top(i){this.y+=i-this.top}alignTop(i){return this.top=i,this}get bottom(){return this.top+gt(this)}set bottom(i){this.y+=i-this.bottom}alignBottom(i){return this.bottom=i,this}get centerY(){return this.top+gt(this)/2}set centerY(i){this.y+=i-this.centerY}alignCenterY(i){return this.centerY=i,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var i=this.minWidth-this.space.left-this.space.right;return Math.max(i,0)}get minInnerHeight(){var i=this.minHeight-this.space.top-this.space.bottom;return Math.max(i,0)}}Object.assign(gi.prototype,xd);var XE=function(){if(this.rexSizer.hidden)return 0;var m=0,i=this.sizerChildren,e,v,t;for(var s in i)e=i[s],v=e.rexSizer.padding,t=this.getChildWidth(e)+v.left+v.right,m=Math.max(t,m);return m+this.space.left+this.space.right},WE=function(){if(this.rexSizer.hidden)return 0;var m=0,i=this.sizerChildren,e,v,t;for(var s in i)e=i[s],t=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.minHeight!==void 0?e.minHeight:gt(e),v=e.rexSizer.padding,t+=v.top+v.bottom,m=Math.max(t,m);return m+this.space.top+this.space.bottom},HE=function(m,i){i===void 0&&(i=this.width);var e,v=m.rexSizer;if(v.expandWidth){var t=i-this.space.left-this.space.right,s=v.padding;e=t-s.left-s.right}return e},$E=function(m,i){i===void 0&&(i=this.height);var e,v=m.rexSizer;if(v.expandHeight){var t=i-this.space.top-this.space.bottom,s=v.padding;e=t-s.top-s.bottom}return e},JE=function(m){m===void 0&&(m=[]);var i=this.sizerChildren,e;for(var v in i)e=i[v],e.isRexSizer&&m.push(e);return m},lo=function(m,i){m.width<m.childrenWidth&&console.warn(`Layout width error: Parent=${i.constructor.name}, Child=${m.constructor.name}`),m.height<m.childrenHeight&&console.warn(`Layout height error: Parent=${i.constructor.name}, Child=${m.constructor.name}`)},KE=function(){var m,i,e,v=this.innerLeft,t=this.innerTop,s=this.innerWidth,u=this.innerHeight,n,a,o,r,h,d,l=this.sizerChildren;for(var f in l)m=l[f],!m.rexSizer.hidden&&(i=m.rexSizer,e=i.padding,ys.call(this,m),m.isRexSizer?(m.runLayout(this,this.getExpandedChildWidth(m),this.getExpandedChildHeight(m)),lo(m,this)):(h=void 0,d=void 0,i.expandWidth&&(h=s-e.left-e.right),i.expandHeight&&(d=u-e.top-e.bottom),je(m,h,d)),n=v+e.left,o=s-e.left-e.right,a=t+e.top,r=u-e.top-e.bottom,Ts.call(this,m,n,a,o,r,i.align,i.alignOffsetX,i.alignOffsetY))};const Rl=Phaser.Utils.Objects.IsPlainObject,me=Phaser.Utils.Objects.GetValue,Ml=Phaser.Display.Align.CENTER,ZE=Phaser.Utils.String.UUID;var QE=function(m,i,e,v,t,s,u,n,a){if(ms.call(this,m),Rl(i)){var r=i;i=me(r,"key",void 0),e=me(r,"align",Ml),n=me(r,"offsetX",0),a=me(r,"offsetY",0),v=me(r,"padding",0),t=me(r,"expand",!0),m.isRexSizer||(s=me(r,"minWidth",m._minWidth),u=me(r,"minHeight",m._minHeighted))}var o=i!==void 0;o||(i=ZE()),typeof e=="string"&&(e=Dn[e]),e===void 0&&(e=Ml),n===void 0&&(n=0),a===void 0&&(a=0),v===void 0&&(v=0),t===void 0&&(t=!0),m.isRexSizer||(s===void 0&&(s=m._minWidth),u===void 0&&(u=m._minHeight));var r=this.getSizerConfig(m);return r.align=e,r.alignOffsetX=n,r.alignOffsetY=a,r.padding=Xi(v),Rl(t)?(r.expandWidth=me(t,"width",!1),r.expandHeight=me(t,"height",!1)):(r.expandWidth=t,r.expandHeight=t),m.isRexSizer||(r.expandWidth?m.minWidth=s===void 0?St(m):s:m.minWidth=void 0,r.expandHeight?m.minHeight=u===void 0?gt(m):u:m.minHeight=void 0),this.sizerChildren.hasOwnProperty(i)&&this.sizerChildren[i].destroy(),this.sizerChildren[i]=m,o&&this.addChildrenMap(i,m),this},jE={add:QE};const kE=Phaser.Utils.Array.Remove,qE=le.prototype.remove;var Yn=function(m,i){return this.isBackground(m)&&kE(this.backgroundChildren,m),qE.call(this,m,i),!i&&this.sizerEventsEnable&&(m.emit("sizer.remove",m,this),this.emit("remove",m,this)),this};const _E=le.prototype.clear;var Xn=function(m){this.backgroundChildren&&(this.backgroundChildren.length=0);var i=!m&&this.sizerEventsEnable,e;if(i&&(e=this.getChildren([])),_E.call(this,m),i)for(var v,t=0,s=e.length;t<s;t++)v=e[t],v.emit("sizer.remove",v,this),this.emit("remove",v,this);return this},tS={remove(m,i){var e;if(typeof m=="string"){if(e=m,m=this.sizerChildren[e],!m)return this}else{if(this.getParentSizer(m)!==this)return this;e=this.childToKey(m)}return e&&(delete this.sizerChildren[e],this.childrenMap.hasOwnProperty(e)&&delete this.childrenMap[e]),Yn.call(this,m,i),this},removeAll(m){for(var i in this.sizerChildren)this.remove(i,m);return this},clear(m){for(var i in this.sizerChildren)delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i];return Xn.call(this,m),this}},yd={getChildrenWidth:XE,getChildrenHeight:WE,getExpandedChildWidth:HE,getExpandedChildHeight:$E,getChildrenSizers:JE,layoutChildren:KE};Object.assign(yd,jE,tS);var Wn=function(m,i){if(Array.isArray(m))return m.indexOf(i);for(var e in m)if(m[e]===i)return e;return null};const Al=Phaser.Utils.Objects.IsPlainObject,Mi=Phaser.Utils.Objects.GetValue;class ei extends gi{constructor(i,e,v,t,s,u){Al(e)?(u=e,e=Mi(u,"x",0),v=Mi(u,"y",0),t=Mi(u,"width",void 0),s=Mi(u,"height",void 0)):Al(t)&&(u=t,t=Mi(u,"width",void 0),s=Mi(u,"height",void 0)),super(i,e,v,t,s,u),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(i){if(typeof i=="string"){var e=i;if(this.sizerChildren.hasOwnPropery(e))return e}else return Wn(this.sizerChildren,i);return null}}Object.assign(ei.prototype,yd);var eS=Phaser.Math.Distance.Between,Tn=function(m,i,e){var v=m.width/2;return eS(v,v,i,e)<=v};const iS=Phaser.Math.Angle.Between,sS=Phaser.Math.Angle.Normalize;var Ol=function(m,i,e){if(!!this.enable&&!!m.isDown){var v=this.sizerChildren.knob;if(!!Tn(v,i,e)){var t=v.width/2,s=v.startAngle,u=iS(t,t,i,e),n=v.anticlockwise?s-u:u-s,a=sS(n)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-a)<.1?this.value=a:this.easeValueTo(a)}}},nS=function(){var m=this.sizerChildren.knob;m.setInteractive().on("pointerdown",Ol,this).on("pointermove",Ol,this)};const Ll=Phaser.Math.Angle.Between,rS=Phaser.Math.Angle.Wrap;var aS=function(m,i,e){if(!(!this.enable||this.panPointer)){var v=this.sizerChildren.knob;!Tn(v,i,e)||Td.call(this,m)}},oS=function(m,i,e){if(!!this.enable&&!!m.isDown){var v=this.sizerChildren.knob;switch(this.panState){case uo:Tn(v,i,e)&&Td.call(this,m);break;case Sd:Tn(v,i,e)?lS.call(this):Ed.call(this);break}}},hS=function(m,i,e){!this.enable||this.panPointer!==m||Ed.call(this)},Td=function(m){this.panPointer=m,this.panState=Sd},Ed=function(){this.panPointer=void 0,this.panState=uo},lS=function(){var m=this.panPointer.prevPosition,i=this.panPointer.position,e=this.sizerChildren.knob,v=Ll(e.x,e.y,m.x,m.y),t=Ll(e.x,e.y,i.x,i.y),s=e.anticlockwise?v-t:t-v,u=rS(s)/(Math.PI*2);this.stopEaseValue(),this.value+=u};const uo=0,Sd=1;var uS=function(){var m=this.sizerChildren.knob;m.setInteractive().on("pointerdown",aS,this).on("pointermove",oS,this).on("pointerup",hS,this),this.panPointer=void 0,this.panState=uo},fS=function(m,i){return this.textFormatCallback=m,this.textFormatCallbackScope=i,this},Cd=function(m){m===void 0&&(m=this.value);var i;return this.textFormatCallbackScope?i=this.textFormatCallback(m):i=this.textFormatCallback.call(this.textFormatCallbackScope,m),i},dS=function(){var m=this.sizerChildren.text;return m&&(m.setText(Cd.call(this)),m.layout&&m.layout()),this},vS={setTextFormatCallback:fS,getFormatText:Cd,updateText:dS};const It=Phaser.Utils.Objects.GetValue,cS=Phaser.Math.Linear,Fl=Phaser.Math.Percent,pS=Phaser.Math.Snap.To;class fo extends ei{constructor(i,e){e===void 0&&(e={}),super(i,e),this.type="rexKnob",this.eventEmitter=It(e,"eventEmitter",this);var v=It(e,"background",void 0),t=It(e,"text",void 0);v&&this.addBackground(v),t&&(e.textColor=void 0,e.textStrokeColor=void 0,this.setTextFormatCallback(It(e,"textFormatCallback",void 0),It(e,"textFormatCallbackScope",void 0)));var s=new In(i,e);s.setDepth(It(e,"knobDepth",0)),s._value=-1,i.add.existing(s),this.add(s,"knob"),t&&(this.add(t,"text","center",0,!1),i.children.moveBelow(s,t)),this.addChildrenMap("background",v),this.addChildrenMap("knob",s),this.addChildrenMap("text",t);var u=It(e,"valuechangeCallback",null);if(u!==null){var n=It(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",u,n)}this.setEnable(It(e,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(It(e,"easeValue.duration",0)).setEaseValueFunction(It(e,"easeValue.ease","Linear")),this.setGap(It(e,"gap",void 0)),this.setValue(It(e,"value",0),It(e,"min",void 0),It(e,"max",void 0));var a=It(e,"input",0);switch(typeof a=="string"&&(a=gS[a]),a){case 0:uS.call(this);break;case 1:nS.call(this);break}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setGap(i){return this.gap=i,this}get value(){return this.sizerChildren.knob.value}set value(i){this.gap!==void 0&&(i=pS(i,this.gap));var e=this.value;this.sizerChildren.knob.value=i;var v=this.value;e!==v&&(this.updateText(),this.eventEmitter.emit("valuechange",v,e,this.eventEmitter))}setValue(i,e,v){return i==null?this:(e!==void 0&&(i=Fl(i,e,v)),this.value=i,this)}addValue(i,e,v){return e!==void 0&&(i=Fl(i,e,v)),this.value+=i,this}getValue(i,e){var v=this.value;return i!==void 0&&(v=cS(i,e,v)),v}}const gS={pan:0,drag:0,click:1,none:-1};Object.assign(fo.prototype,vS,gs);et.register("knob",function(m){var i=new fo(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.Knob",fo);const mS={arc:Fn,circle:aa,curve:Oy,ellipse:Ly,line:Fy,lines:Uy,rectangle:Xy,triangle:Hy},Il=Phaser.Utils.Objects.GetValue,xS=Phaser.Utils.Objects.IsPlainObject,yS=function(){for(var m=this.getShapes(),i=0,e=m.length;i<e;i++)m[i].lineStyle().fillStyle()};var TS={createShape(m,i){var e=mS[m],v=new e;return i&&v.setName(i),v},buildShapes(m){var i=Il(m,"create",void 0);if(xS(i)){var e=i;for(var v in e){var t=e[v];switch(typeof t){case"number":for(var s=0;s<t;s++)this.addShape(this.createShape(v));break;case"string":this.addShape(this.createShape(v,t));break;default:for(var u=t,s=0,n=u.length;s<n;s++)this.addShape(this.createShape(v,u[s]));break}}}else if(Array.isArray(i))for(var e=i,s=0,n=e.length;s<n;s++){var a=e[s];this.addShape(this.createShape(a.type,a.name))}else typeof i=="function"&&i.call(this);this.setUpdateShapesCallback(Il(m,"update"))},setUpdateShapesCallback(m){return m===void 0&&(m=yS),this.dirty=this.dirty||this.updateCallback!==m,this.updateCallback=m,this},updateShapes(){this.updateCallback.call(this)}};const es=Phaser.Utils.Objects.GetValue,ES=Phaser.Utils.Objects.IsPlainObject;class Hn extends Xa{constructor(i,e,v,t,s,u){ES(e)&&(u=e,e=es(u,"x",0),v=es(u,"y",0),t=es(u,"width",2),s=es(u,"height",2)),super(i,e,v,t,s),this.type=es(u,"type","rexCustomShapes"),this.buildShapes(u)}}Object.assign(Hn.prototype,TS);et.register("customShapes",function(m,i,e,v,t){var s=new Hn(this.scene,m,i,e,v,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.CustomShapes",Hn);const xe=Phaser.Utils.Objects.GetValue,SS=Phaser.Utils.Objects.IsPlainObject,CS=Phaser.Math.Clamp,PS=Phaser.Math.Linear,wl=Phaser.Math.Percent;class vo extends Hn{constructor(i,e,v,t,s,u){SS(e)&&(u=e,e=xe(u,"x",0),v=xe(u,"y",0),t=xe(u,"width",2),s=xe(u,"height",2)),u===void 0&&(u={}),u.type||(u.type="rexCustomProgress"),super(i,e,v,t,s,u),this.eventEmitter=xe(u,"eventEmitter",this);var n=xe(u,"valuechangeCallback",null);if(n!==null){var a=xe(u,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",n,a)}this.setEaseValuePropName("value").setEaseValueDuration(xe(u,"easeValue.duration",0)).setEaseValueFunction(xe(u,"easeValue.ease","Linear")),this.setValue(xe(u,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(i){i=CS(i,0,1);var e=this._value,v=e!=i;this.dirty=this.dirty||v,this._value=i,v&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,v){return i==null?this:(e!==void 0&&(i=wl(i,e,v)),this.value=i,this)}addValue(i,e,v){return e!==void 0&&(i=wl(i,e,v)),this.value+=i,this}getValue(i,e){var v=this.value;return i!==void 0&&(v=PS(i,e,v)),v}}Object.assign(vo.prototype,gs);et.register("customProgress",function(m,i,e,v,t){var s=new vo(this.scene,m,i,e,v,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.CustomProgress",vo);var RS={setTransitionStartCallback(m,i){return this.onStartCallback=m,this.onStartCallbackScope=i,this},setTransitionProgressCallback(m,i){return this.onProgressCallback=m,this.onProgressCallbackScope=i,this},setTransitionCompleteCallback(m,i){return this.onCompleteCallback=m,this.onCompleteCallbackScope=i,this}};const MS=Phaser.Utils.Objects.IsPlainObject,te=Phaser.Utils.Objects.GetValue;var AS={out:0,in:1},OS={setTransitionDirection(m){return typeof m=="string"&&(m=AS[m]),this.dir=m,this},setDuration(m){return this.duration=m,this},setEaseFunction(m){return this.easeFunction=m,this},setNextTexture(m,i){return this.nextImage.setTexture(m,i),this},transit(m,i){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),MS(m)){var e=m;m=te(e,"key",void 0),i=te(e,"frame",void 0),this.setDuration(te(e,"duration",this.duration)).setEaseFunction(te(e,"ease",this.easeFunction)).setTransitionDirection(te(e,"dir",this.dir));var v=te(e,"mask",void 0);v&&this.setMaskGameObject(v),this.setMaskEnable(v===!0);var t=te(e,"onStart",void 0),s=te(e,"onProgress",void 0),u=te(e,"onComplete",void 0);(t!==void 0||s!==void 0||u!==void 0)&&this.setTransitionStartCallback(t,te(e,"onStartScope",void 0)).setTransitionProgressCallback(s,te(e,"onProgressScope",void 0)).setTransitionCompleteCallback(u,te(e,"onCompleteScope",void 0))}return this.setNextTexture(m,i),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new sd(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},Dl=function(m,i,e,v,t){switch(this.clear().fillStyle(16777215),this.shape){case 1:var s=Math.min(m,i)/2;this.fillCircle(-m*(v-.5),-i*(t-.5),s+e);break;default:this.fillRect(-(m*v)-e,-(i*t)-e,m+2*e,i+2*e);break}};const LS=Phaser.GameObjects.Graphics;class va extends LS{constructor(i,e,v){e===void 0&&(e=0),typeof e=="string"&&(e=FS[e]),v===void 0&&(v=0),super(i.scene),this.parent=i,this.shape=e,this.padding=v,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(i,e){var v=this.parent;return i===void 0&&(i=v.x),e===void 0&&(e=v.y),super.setPosition(i,e),this}resize(i,e,v){var t=this.parent;return i===void 0&&(i=t.width),e===void 0&&(e=t.height),v===void 0&&(v=this.padding),this.widthSave===i&&this.heightSave===e&&this.paddingSave===v?this:(this.widthSave=i,this.heightSave=e,this.paddingSave=v,this.originXSave=t.originX,this.originYSave=t.originY,Dl.call(this,i,e,v,t.originX,t.originY),this)}setOrigin(i,e){e===void 0&&(e=i);var v=this.parent;return i===void 0&&(i=v.originX),e===void 0&&(e=v.originY),this.originXSave===i&&this.originYSave===e?this:(this.originXSave=i,this.originYSave=e,Dl.call(this,this.widthSave,this.heightSave,this.paddingSave,i,e),this)}}const FS={rectangle:0,circle:1};var IS={setMaskGameObject(m){if(!m)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(m===!0&&this.maskGameObject instanceof va)return this;if(this.maskGameObject===m)return this;this.removeMaskGameObject()}return m===!0&&(m=new va(this)),this.maskGameObject=m,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(m,i,e){return i===void 0&&(i=!0),this.childrenMask||this.setMaskGameObject(!0),i?(m.setMask(this.childrenMask),e&&this.childrenMask.setInvertAlpha()):m.clearMask(),this},setCurrentImageMaskEnable(m,i){return this.setImageMaskEnable(this.currentImage,m,i),this},setNextImageMaskEnable(m,i){return this.setImageMaskEnable(this.nextImage,m,i),this},setCellImagesMaskEnable(m,i){for(var e=this.getCellImages(),v=0,t=e.length;v<t;v++)this.setImageMaskEnable(e[v],m,i);return this},setMaskEnable(m,i){return this.setImageMaskEnable(this.backImage,m,i),this.setImageMaskEnable(this.frontImage,m,i),this.setCellImagesMaskEnable(m,i),this}},wS=function(m,i){i===void 0&&(i=",");var e;return m==="__BASE"?e=function(v,t){return`${v}${i}${t}`}:e=function(v,t){return`${m}_${v}${i}${t}`},e},DS=function(m,i,e,v,t,s){e==null&&(e="__BASE"),Vn(s)||(s=wS(e,s));for(var u=m.textures.get(i),n=u.frames[e],a=n.width/v,o=n.height/t,r=0,h=0,d,l=0;l<t;l++){r=0;for(var f=0;f<v;f++)d=s(f,l),u.add(d,0,r+n.cutX,h+n.cutY,a,o),r+=a;h+=o}return{getFrameNameCallback:s,cellWidth:a,cellHeight:o,columns:v,rows:t}};const Ue=Phaser.Utils.Objects.GetValue,BS=Phaser.GameObjects.Image,NS=Phaser.Utils.Objects.IsPlainObject,GS=Phaser.Math.RotateAround;var VS=function(m,i,e,v){NS(i)&&(v=i,i=Ue(v,"columns",1),e=Ue(v,"rows",1));for(var t=Ue(v,"ImageClass",BS),s=Ue(v,"originX",.5),u=Ue(v,"originY",.5),n=Ue(v,"add",!0),a=Ue(v,"align",n),o=Ue(v,"objectPool",void 0),r=m.scene,h=m.texture.key,d=m.frame.name,l=DS(r,h,d,i,e),f=l.getFrameNameCallback,c=m.scaleX,g=m.scaleY,p=m.rotation,x=m.getTopLeft(),y=x.x,T=x.y,E=[],S=l.cellWidth*c,C=l.cellHeight*g,P=0;P<e;P++)for(var R=0;R<i;R++){var A,M=f(R,P);o&&o.length>0?A=o.pop().setTexture(h,M):A=new t(r,0,0,h,M),n&&r.add.existing(A);var O=y+S*R,F=T+C*P,I=O+s*S,B=F+u*C;a&&(A.setOrigin(s,u).setPosition(I,B).setScale(c,g).setRotation(p),GS(A,y,T,p)),E.push(A)}return E},bS={gridCutImage(m,i,e,v){v===void 0&&(v={}),v.objectPool=this.imagesPool;for(var t=VS(m,i,e,v),s,u=0,n=t.length;u<n;u++)s=t[u],s.setVisible(!0),this.add(s);return this.cellImages=t,this.setChildLocalVisible(m,!1),t},gridCutCurrentImage(m,i,e){return this.gridCutImage(this.currentImage,m,i,e)},gridCutNextImage(m,i,e){return this.gridCutImage(this.nextImage,m,i,e)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var m=this.cellImages[0].texture,i=this.cellImages,e,v,t=0,s=i.length;t<s;t++)e=i[t],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),v=e.frame.name,e.setTexture(),m.remove(v);return this.imagesPool.push(...i),i.length=0,this}},Pd={};Object.assign(Pd,RS,OS,IS,bS);var zS=function(m,i,e,v){},US=function(m,i,e,v){m.setChildLocalAlpha(i,1-v).setChildLocalAlpha(e,v)},YS=function(m,i,e,v){m.setChildLocalAlpha(i,1)};const Bl=Phaser.Utils.Objects.IsPlainObject,Rt=Phaser.Utils.Objects.GetValue,XS=Phaser.Math.Clamp;class co extends le{constructor(i,e,v,t,s,u){Bl(e)?(u=e,e=Rt(u,"x",0),v=Rt(u,"y",0),t=Rt(u,"key",void 0),s=Rt(u,"frame",void 0)):Bl(s)&&(u=s,s=void 0);var n=Rt(u,"back",void 0),a=Rt(u,"front",void 0);n||(n=i.add.image(e,v,t,s)),a||(a=i.add.image(e,v,t,s));var o=Rt(u,"width",a.width),r=Rt(u,"height",a.height);super(i,e,v,o,r),n.setVisible(!1),this.addMultiple([n,a]),this.type="rexTransitionImage",this.backImage=n,this.frontImage=a,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var h=Rt(u,"onStart",void 0),d=Rt(u,"onProgress",void 0),l=Rt(u,"onComplete",void 0),f=Rt(u,"dir",0);h===void 0&&d===void 0&&l===void 0&&(h=zS,d=US,l=YS,f=0),this.setTransitionStartCallback(h,Rt(u,"onStartScope",void 0)).setTransitionProgressCallback(d,Rt(u,"onProgressScope",void 0)).setTransitionCompleteCallback(l,Rt(u,"onCompleteScope",void 0)).setTransitionDirection(f).setDuration(Rt(u,"duration",1e3)).setEaseFunction(Rt(u,"ease","Linear"));var c=Rt(u,"mask",void 0);c&&this.setMaskGameObject(c),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(i){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(i),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get t(){return this._t}set t(i){if(i=XS(i,0,1),this._t!==i){this._t=i;var e=this.currentImage,v=this.nextImage;if(i===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Fr(this.onStartCallback,this.onStartCallbackScope,this,e,v,i)),Fr(this.onProgressCallback,this.onProgressCallbackScope,this,e,v,i),i===1){Fr(this.onCompleteCallback,this.onCompleteCallbackScope,this,e,v,i);var t=v.texture.key,s=v.frame.name;this.frontImage.setTexture(t,s),this.backImage.setTexture(t,s),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}i===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(i){return this.t=i,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(i,e){return super.setOrigin(i,e),this.backImage.setOrigin(i,e),this.frontImage.setOrigin(i,e),this.maskGameObject&&this.maskGameObject.setOrigin(i,e),this}setTexture(i,e){return this.frontImage.setTexture(i,e),this.backImage.setTexture(i,e).setVisible(!1),this}}var Fr=function(m,i,e,v,t,s){!m||(i?m.call(i,e,v,t,s):m(e,v,t,s))};Object.assign(co.prototype,Pd);et.register("transitionImage",function(m,i,e,v,t){var s=new co(this.scene,m,i,e,v,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.TransitionImage",co);const WS=Phaser.GameObjects.Rectangle;class po extends WS{constructor(i,e,v){super(i,0,0,2,2,e,1),this.setAlpha(v),this.setScrollFactor(0),this.boot()}boot(){var i=this.scene;i.events.on("prerender",this.resize,this)}destroy(i){!this.scene||(this.scene.events.off("prerender",this.resize,this),super.destroy(i))}get tint(){return this.fillColor}set tint(i){this.setFillStyle(i,this.fillAlpha)}resize(){var i=this.scene,e=i.scale.gameSize,v=i.cameras.main,t=e.width,s=e.height,u=1/v.zoom,n=t/2,a=s/2,o=t*u,r=s*u;(this.x!==n||this.y!==a)&&this.setPosition(n,a),(this.width!==o||this.height!==r)&&this.setSize(o,r).setOrigin(.5)}}et.register("fullWindowRectangle",function(m,i){var e=new po(this.scene,m,i);return this.scene.add.existing(e),e});it(window,"RexPlugins.UI.FullWindowRectangle",po);const Nl=Phaser.Utils.Objects.GetValue;class go extends zt{constructor(i,e){super(i,{eventEmitter:!1}),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setHitAreaMode(Nl(i,"hitAreaMode",0)),this.setEnable(Nl(i,"enable",!0)),this}boot(){this.parent.on("pointerdown",function(i,e,v,t){t.stopPropagation()}).on("pointerup",function(i,e,v,t){t.stopPropagation()}).on("pointermove",function(i,e,v,t){t.stopPropagation()}).on("pointerover",function(i,e,v,t){t.stopPropagation()}).on("pointerout",function(i,e){e.stopPropagation()})}setHitAreaMode(i){typeof i=="string"&&(i=HS[i]);var e=this.parent;return e.input&&e.removeInteractive(),i===0?e.setInteractive():e.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(i){return i===void 0&&(i=!0),i?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}}var HS={default:0,fullWindow:1};const Gl=Phaser.Utils.Objects.GetValue;class mo extends po{constructor(i,e){var v=Gl(e,"color",0),t=Gl(e,"alpha",.8);super(i,v,t),this.touchEventStop=new go(this,{hitAreaMode:1})}}et.register("cover",function(m){var i=new mo(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.Cover",mo);var $S=function(m){if(!window.Chart){var i=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js');`;return console.error(i),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,JS(this,m)),this},JS=function(m,i){i===void 0&&(i={}),i.options===void 0&&(i.options={});var e=i.options;e.responsive=!1,e.maintainAspectRatio=!1,e.hasOwnProperty("devicePixelRatio")||(e.devicePixelRatio=1);var v=!1;e.animation===void 0?e.animation={}:e.animation===!1&&(v=!0,e.animation={});var t=e.animation;v&&(t.duration=0);var s=t.onProgress;t.onProgress=function(n){s&&s(n),m.needRedraw()};var u=t.onComplete;return t.onComplete=function(n){u&&u(n),m.needRedraw()},i},KS=function(m){if(this.chart!==void 0)if(typeof m=="string"){for(var i=this.chart.data.datasets,e,v=0,t=i.length;v<t;v++)if(e=i[v],e.label===m)return e}else return this.chart.data.datasets[m]},ZS=function(m,i){var e=this.getChartDataset(m);if(e!==void 0){if(typeof i=="string"){var v=this.chart.data.labels;if(i=v.indexOf(i),i===-1)return}return e.data[i]}},QS=function(m,i,e){if(this.chart===void 0)return this;var v=this.getChartDataset(m);if(typeof i=="string"){var t=this.chart.data.labels;if(i=t.indexOf(i),i===-1)return this}return v.data[i]=e,this},jS=function(){if(this.chart===void 0)return this;this.chart.update()};class xo extends qe{constructor(i,e,v,t,s,u){super(i,e,v,t,s),this.type="rexChart",this.chart=void 0,u!==void 0&&this.setChart(u)}destroy(i){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(i))}resize(i,e){if(i===this.width&&e===this.height)return this;if(super.resize(i,e),this.chart){var v=this.chart;v.height=this.canvas.height,v.width=this.canvas.width,v.aspectRatio=v.height?v.width/v.height:null,v.update()}return this}}var kS={setChart:$S,getChartDataset:KS,getChartData:ZS,setChartData:QS,updateChart:jS};Object.assign(xo.prototype,kS);et.register("chart",function(m,i,e,v,t){var s=new xo(this.scene,m,i,e,v,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.Chart",xo);var qS=function(m){if(this.rexSizer.hidden)return 0;m===void 0&&(m=!0);var i=0,e=this.sizerChildren,v,t,s;if(this.orientation===0)for(var u=0,n=e.length;u<n;u++)v=e[u],!v.rexSizer.hidden&&(v.rexSizer.proportion===0||m&&v.rexSizer.proportion>0?s=this.getChildWidth(v):s=0,t=v.rexSizer.padding,s+=t.left+t.right,u>0&&(s+=this.space.item),i+=s);else for(var u=0,n=e.length;u<n;u++)v=e[u],v.hasOwnProperty("rexSizer")&&(v.rexSizer.hidden||(t=v.rexSizer.padding,s=this.getChildWidth(v)+t.left+t.right,i=Math.max(s,i)));return i+this.space.left+this.space.right},_S=function(m){if(this.rexSizer.hidden)return 0;m===void 0&&(m=!0);var i=0,e=this.sizerChildren,v,t,s;if(this.orientation===0)for(var u=0,n=e.length;u<n;u++)v=e[u],!v.rexSizer.hidden&&(t=v.rexSizer.padding,s=this.getChildHeight(v)+t.top+t.bottom,i=Math.max(s,i));else for(var u=0,n=e.length;u<n;u++)v=e[u],v.hasOwnProperty("rexSizer")&&(v.rexSizer.hidden||(t=v.rexSizer.padding,v.rexSizer.proportion===0||m&&v.rexSizer.proportion>0?s=this.getChildHeight(v):s=0,s+=t.top+t.bottom,u>0&&(s+=this.space.item),i+=s));return i+this.space.top+this.space.bottom},t1=function(m,i){i===void 0&&(i=this.width);var e,v=m.rexSizer,t=v.padding;if(this.orientation===0)v.proportion>0&&this.proportionLength>0&&(e=v.proportion*this.proportionLength);else if(v.expand){var s=i-this.space.left-this.space.right;e=s-t.left-t.right}return e},e1=function(m,i){i===void 0&&(i=this.height);var e,v=m.rexSizer,t=v.padding;if(this.orientation===0){if(v.expand){var s=i-this.space.top-this.space.bottom;e=s-t.top-t.bottom}}else v.proportion>0&&this.proportionLength>0&&(e=v.proportion*this.proportionLength);return e},i1=function(m){m===void 0&&(m=[]);for(var i=this.sizerChildren,e,v=0,t=i.length;v<t;v++)e=i[v],e.isRexSizer&&m.push(e);return m},s1=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,xs.call(this),this},n1=function(){for(var m=this.sizerChildren,i,e,v,t=this.innerLeft,s=this.innerTop,u=this.innerWidth,n=this.innerHeight,a=t,o=s,r,h,d,l,f,c,g=0,p=m.length;g<p;g++)i=this.rtl?m[p-g-1]:m[g],!i.rexSizer.hidden&&(e=i.rexSizer,v=e.padding,ys.call(this,i),i.isRexSpace?(f=0,c=0):(f=this.getExpandedChildWidth(i),c=this.getExpandedChildHeight(i)),i.isRexSizer?(i.runLayout(this,f,c),lo(i,this)):je(i,f,c),f===void 0&&(f=St(i)),c===void 0&&(c=gt(i)),this.orientation===0?(r=a+v.left,e.proportion===0||this.proportionLength===0?d=f:d=e.proportion*this.proportionLength,h=o+v.top,l=n-v.top-v.bottom):(r=a+v.left,d=u-v.left-v.right,h=o+v.top,e.proportion===0||this.proportionLength===0?l=c:l=e.proportion*this.proportionLength),Ts.call(this,i,r,h,d,l,e.align),this.orientation===0?a+=d+v.left+v.right+this.space.item:o+=l+v.top+v.bottom+this.space.item)},r1=function(i){var i=eo.call(this,i);if(this.proportionLength===void 0&&this.orientation===0){var e=i-this.childrenWidth;e>0?(e=i-this.getChildrenWidth(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return i},a1=function(m,e){var e=io.call(this,m,e);if(this.proportionLength===void 0&&this.orientation===1){var v=e-this.childrenHeight;v>0?(v=e-this.getChildrenHeight(!1),this.proportionLength=v/this.childrenProportion):this.proportionLength=0}return e};const o1=Phaser.GameObjects.Zone;class yo extends o1{constructor(i){super(i,0,0,1,1),this.isRexSpace=!0}}var h1=function(m,i){var e=this.sizerChildren;if(e.length===0)return-1;for(var v=-1,t=1/0,s=0,u=e.length;s<u;s++){var n=e[s],a;this.orientation===0?a=Math.abs(n.left-m):a=Math.abs(n.top-i),t>a&&(t=a,v=s)}var n=e[e.length-1],a;return this.orientation===0?a=Math.abs(n.right-m):a=Math.abs(n.bottom-i),t>a&&(t=a,v=s+1),v};const Rd=Phaser.Utils.Objects.IsPlainObject,Ye=Phaser.Utils.Objects.GetValue,Vl=Phaser.Display.Align.CENTER,l1={min:0,full:-1};var Ir=function(m,i,e,v,t,s,u,n){ms.call(this,m);var a=typeof i;if(i===null)return this;if(a!=="number"){if(a==="string")i=l1[i];else if(Rd(i)){var o=i;i=Ye(o,"proportion",0),e=Ye(o,"align",Vl),v=Ye(o,"padding",0),t=Ye(o,"expand",!1),s=Ye(o,"key",void 0),u=Ye(o,"index",void 0),m.isRexSizer||(this.orientation===0?n=Ye(o,"minWidth",void 0):n=Ye(o,"minHeight",void 0))}}typeof e=="string"&&(e=Dn[e]),i===void 0&&(i=0),e===void 0&&(e=Vl),v===void 0&&(v=0),t===void 0&&(t=!1),!m.isRexSizer&&n===void 0&&(this.orientation===0?n=m._minWidth:n=m._minHeight);var o=this.getSizerConfig(m);return o.proportion=i,o.align=e,o.padding=Xi(v),o.expand=t,u===void 0||u>=this.sizerChildren.length?this.sizerChildren.push(m):this.sizerChildren.splice(u,0,m),!m.isRexSizer&&i>0&&(this.orientation===0?(m.minWidth=n===void 0?St(m):n,m.minHeight=void 0):(m.minWidth=void 0,m.minHeight=n===void 0?gt(m):n)),s!==void 0&&this.addChildrenMap(s,m),this},u1={add:Ir,addSpace(m){return this.insertSpace(void 0,m),this},insertSpace(m,i){return i===void 0&&(i=1),Ir.call(this,new yo(this.scene),{proportion:i,minWidth:0,minHeight:0,index:m}),this},insert(m,i,e,v,t,s,u,n){return Rd(e)&&(e.index=m),Ir.call(this,i,e,v,t,s,u,m,n),this},insertAtPosition(m,i,e,v,t,s,u,n,a){var o=h1.call(this,m,i);return o===-1&&(o=void 0),this.insert(o,e,v,t,s,u,n,a),this}};const f1=Phaser.Utils.Array.Remove;var d1={remove(m,i){return this.getParentSizer(m)!==this?this:(f1(this.sizerChildren,m),Yn.call(this,m,i),this)},removeAll(m){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],m);return this},clear(m){return this.sizerChildren.length=0,Xn.call(this,m),this}},Md={getChildrenWidth:qS,getChildrenHeight:_S,getExpandedChildWidth:t1,getExpandedChildHeight:e1,getChildrenSizers:i1,preLayout:s1,layoutChildren:n1,resolveWidth:r1,resolveHeight:a1};Object.assign(Md,u1,d1);var v1=function(){for(var m=0,i=this.sizerChildren,e,v,t=0,s=i.length;t<s;t++)e=i[t],!e.rexSizer.hidden&&(v=e.rexSizer.proportion,v>0&&(m+=v));return m},c1={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},To=function(m){return typeof m=="string"&&(m=c1[m]),m};const wr=Phaser.Utils.Objects.IsPlainObject,fe=Phaser.Utils.Objects.GetValue;class Ot extends gi{constructor(i,e,v,t,s,u,n){wr(e)?(n=e,e=fe(n,"x",0),v=fe(n,"y",0),t=fe(n,"width",void 0),s=fe(n,"height",void 0),u=fe(n,"orientation",0)):wr(t)?(n=t,t=fe(n,"width",void 0),s=fe(n,"height",void 0),u=fe(n,"orientation",0)):wr(u)&&(n=u,u=fe(n,"orientation",0)),u===void 0&&(u=0),super(i,e,v,t,s,n),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(u),this.setItemSpacing(fe(n,"space.item",0)),this.setRTL(fe(n,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(i){return this.orientation=To(i),this}setItemSpacing(i){return this.space.item=i,this}setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=v1.call(this)),this._childrenProportion}}Object.assign(Ot.prototype,Md);et.register("sizer",function(m,i,e,v,t,s){var u=new Ot(this.scene,m,i,e,v,t,s);return this.scene.add.existing(u),u});it(window,"RexPlugins.UI.Sizer",Ot);var Ad=function(){return Array.prototype.reduce.call(arguments,p1,0)},p1=function(m,i){return m+i},g1=function(){if(this.rexSizer.hidden)return 0;for(var m=0,i,e=this.sizerChildren,v,t,s,u,n=0;n<this.columnCount;n++){if(u=this.columnProportions[n],i=0,u===0){for(var a=0;a<this.rowCount;a++)v=e[a*this.columnCount+n],v&&(v.rexSizer.hidden||(t=v.rexSizer.padding,s=this.getChildWidth(v)+t.left+t.right,i=Math.max(i,s)));m+=i}this.columnWidth[n]=i}return m+Ad(this.space.left,...this.space.column,this.space.right)},m1=function(){if(this.rexSizer.hidden)return 0;for(var m=0,i,e=this.sizerChildren,v,t,s,u,n=0;n<this.rowCount;n++){if(u=this.rowProportions[n],i=0,u===0){for(var a=0;a<this.columnCount;a++)v=e[n*this.columnCount+a],v&&(v.rexSizer.hidden||(s=v.isRexSizer?Math.max(v.minHeight,v.childrenHeight):v.hasOwnProperty("minHeight")?v.minHeight:gt(v),t=v.rexSizer.padding,s+=t.top+t.bottom,i=Math.max(i,s)));m+=i}this.rowHeight[n]=i}return m+Ad(this.space.top,...this.space.row,this.space.bottom)},x1=function(m,i){var e,v=m.rexSizer;if(v.expand){var t=v.padding;e=i-t.left-t.right}return e},y1=function(m,i){var e,v=m.rexSizer;if(v.expand){var t=v.padding;e=i-t.top-t.bottom}return e},T1=function(m){m===void 0&&(m=[]);for(var i=this.sizerChildren,e,v=0,t=i.length;v<t;v++)e=i[v],e&&e.isRexSizer&&m.push(e);return m},E1=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,xs.call(this),this},S1=function(){for(var m,i,e,v=this.innerLeft,t=this.innerTop,s=v,u=t,n,a,o,r,h,d,l=this.space.column,f=this.space.row,c,g,p=0;p<this.rowCount;p++){g=this.getRowHeight(p),s=v;for(var x=0;x<this.columnCount;x++){if(c=this.getColumnWidth(x),m=this.getChildAt(x,p),!m||m.rexSizer.hidden){s+=c+l[x];continue}ys.call(this,m),h=this.getExpandedChildWidth(m,c),d=this.getExpandedChildHeight(m,g),m.isRexSizer?(m.runLayout(this,h,d),lo(m,this)):je(m,h,d),i=m.rexSizer,e=i.padding,n=s+e.left,o=c-e.left-e.right,a=u+e.top,r=g-e.top-e.bottom,Ts.call(this,m,n,a,o,r,i.align),s+=c+l[x]}u+=g+f[p]}},C1=function(i){var i=eo.call(this,i);if(this.proportionWidthLength===void 0){var e=this.totalColumnProportions;if(e>0){var v=i-this.childrenWidth;v>=0&&(this.proportionWidthLength=v/e)}else this.proportionWidthLength=0}return i},P1=function(m,e){var e=io.call(this,m,e);if(this.proportionHeightLength===void 0){var v=this.totalRowProportions;if(v>0){var t=e-this.childrenHeight;t>=0&&(this.proportionHeightLength=t/v)}else this.proportionHeightLength=0}return e},R1=function(m){var i,e,v;for(var t in this.sizerChildren)i=this.sizerChildren[t],i&&i.isRexSizer&&!i.ignoreLayout&&(v=this.getColumnWidth(parseInt(t)%this.columnCount),e=this.getExpandedChildWidth(i,v),e=i.resolveWidth(e),i.resolveChildrenWidth(e))},M1=function(m){var i,e,v;for(var t in this.sizerChildren)i=this.sizerChildren[t],!(!i||i.isRexSizer&&i.ignoreLayout||!i.runWidthWrap)&&(v=this.getColumnWidth(parseInt(t)%this.columnCount),e=this.getExpandedChildWidth(i,v),i.isRexSizer&&(e=i.resolveWidth(e)),i.runWidthWrap(e));return this};const A1=Phaser.Utils.Objects.IsPlainObject,Ai=Phaser.Utils.Objects.GetValue,bl=Phaser.Display.Align.CENTER;var O1=function(m,i,e,v,t){if(typeof m=="number"||typeof i=="number")if(m===void 0){for(var s,u=0;u<v;u++)if(s=i*v+u,!e[s])return s}else if(i===void 0){for(var s,u=0;u<t;u++)if(s=u*v+m,!e[s])return s}else{var s=i*v+m;if(!e[s])return s}else if(i===!0){for(var s,u=0;u<v;u++)for(var n=0;n<t;n++)if(s=n*v+u,!e[s])return s}else for(var u=0,a=e.length;u<a;u++)if(!e[u])return u;return null},L1=function(m,i,e,v,t,s,u){if(ms.call(this,m),A1(i)){var a=i;i=Ai(a,"column",void 0),e=Ai(a,"row",void 0),v=Ai(a,"align",bl),t=Ai(a,"padding",0),s=Ai(a,"expand",!1),u=Ai(a,"key",void 0)}var n=O1(i,e,this.sizerChildren,this.columnCount,this.rowCount);if(n===null)return this;typeof v=="string"&&(v=Dn[v]),v===void 0&&(v=bl),t===void 0&&(t=0),s===void 0&&(s=!0);var a=this.getSizerConfig(m);return a.align=v,a.padding=Xi(t),a.expand=s,this.sizerChildren[n]=m,u!==void 0&&this.addChildrenMap(u,m),this},F1={add:L1},Di=function(m,i,e,v){e===void 0&&(e=0),v===void 0&&(v=m.length-1);for(var t=e;t<=v;t++)m[t]=i;return m},I1={remove(m,i){if(this.getParentSizer(m)!==this)return this;var e=this.sizerChildren.indexOf(m);return e!==-1&&(this.sizerChildren[e]=null),Yn.call(this,m,i),this},removeAt(m,i,e){var v=this.getChildAt(m,i);return v&&this.remove(v,e),this},removeAll(m){for(var i=this.sizerChildren.length-1;i>=0;i--){var e=this.sizerChildren[i];!e||this.remove(e,m)}return this},clear(m){return Di(this.sizerChildren,null),Xn.call(this,m),this}};const zl=Phaser.Utils.Objects.GetValue;var w1=function(m,i,e,v,t){if(e===void 0&&(e=0),v===void 0&&(v=0),this.columnCount=m,this.rowCount=i,this.gridCount=m*i,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=m*i,Di(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=m,typeof e=="number")Di(this.columnProportions,e);else for(var s=0;s<m;s++)this.columnProportions[s]=e[s]||0;if(this.rowProportions=[],this.rowProportions.length=i,typeof v=="number")Di(this.rowProportions,v);else for(var s=0;s<i;s++)this.rowProportions[s]=v[s]||0;this.columnWidth=[],this.columnWidth.length=m,this.rowHeight=[],this.rowHeight.length=i,this.space.column=[],this.space.column.length=m-1;var u=zl(t,"column",0);if(typeof u=="number")Di(this.space.column,u);else for(var s=0,n=this.space.column.length;s<n;s++)this.space.column[s]=u[s]||0;this.space.row=[],this.space.row.length=i-1;var a=zl(t,"row",0);if(typeof a=="number")Di(this.space.row,a);else for(var s=0,n=this.space.row.length;s<n;s++)this.space.row[s]=a[s]||0;return this},Od={getChildrenWidth:g1,getChildrenHeight:m1,getExpandedChildWidth:x1,getExpandedChildHeight:y1,getChildrenSizers:T1,preLayout:E1,layoutChildren:S1,resolveWidth:C1,resolveHeight:P1,resolveChildrenWidth:R1,runWidthWrap:M1,resetGrid:w1};Object.assign(Od,F1,I1);var D1=function(){for(var m=0,i,e=0;e<this.columnCount;e++)i=this.columnProportions[e],i>0&&(m+=i);return m},B1=function(){for(var m=0,i,e=0;e<this.rowCount;e++)i=this.rowProportions[e],i>0&&(m+=i);return m};const Js=Phaser.Utils.Objects.IsPlainObject,Tt=Phaser.Utils.Objects.GetValue;class ii extends gi{constructor(i,e,v,t,s,u,n,a,o,r){Js(e)?(r=e,e=Tt(r,"x",0),v=Tt(r,"y",0),t=Tt(r,"width",void 0),s=Tt(r,"height",void 0),u=Tt(r,"column",0),n=Tt(r,"row",0),a=Tt(r,"columnProportions",0),o=Tt(r,"rowProportions",0)):Js(t)?(r=t,t=Tt(r,"width",void 0),s=Tt(r,"height",void 0),u=Tt(r,"column",0),n=Tt(r,"row",0),a=Tt(r,"columnProportions",0),o=Tt(r,"rowProportions",0)):Js(u)?(r=u,u=Tt(r,"column",0),n=Tt(r,"row",0),a=Tt(r,"columnProportions",0),o=Tt(r,"rowProportions",0)):Js(a)&&(r=a,a=Tt(r,"columnProportions",0),o=Tt(r,"rowProportions",0)),super(i,e,v,t,s,r),this.type="rexGridSizer",this.resetGrid(u,n,a,o,Tt(r,"space",void 0)),this.addChildrenMap("items",this.sizerChildren);var h=Tt(r,"createCellContainerCallback");if(h)for(var v=0,d=this.rowCount;v<d;v++)for(var e=0,l=this.columnCount;e<l;e++){var f={column:e,row:v},c=h(i,e,v,f);c&&this.add(c,f)}}destroy(i){!this.scene||(super.destroy(i),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setColumnProportion(i,e){return i>=this.columnProportions.length?this:(this.columnProportions[i]=e,this)}setRowProportion(i,e){return i>=this.rowProportions.length?this:(this.rowProportions[i]=e,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=D1.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=B1.call(this)),this._totalRowProportions}getChildAt(i,e){return this.sizerChildren[e*this.columnCount+i]}childToGridIndex(i,e){if(!i)return null;var v=this.sizerChildren.indexOf(i);return v===-1?null:(e===void 0&&(e={}),e.x=v%this.columnCount,e.y=Math.floor(v/this.columnCount),e)}getColumnWidth(i){var e=this.columnProportions[i],v=e===0?this.columnWidth[i]:e*this.proportionWidthLength;return v}getRowHeight(i){var e=this.rowProportions[i],v=e===0?this.rowHeight[i]:e*this.proportionHeightLength;return v}}Object.assign(ii.prototype,Od);et.register("gridSizer",function(m,i,e,v,t,s,u,n,a){var o=new ii(this.scene,m,i,e,v,t,s,u,n,a);return this.scene.add.existing(o),o});it(window,"RexPlugins.UI.GridSizer",ii);var N1=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},G1=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},V1=function(m){m===void 0&&(m=[]);for(var i=this.sizerChildren,e,v=0,t=i.length;v<t;v++)e=i[v],e!==`
`&&e.isRexSizer&&m.push(e);return m},b1=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,xs.call(this),this},z1=function(){for(var m=this.innerWidth,i=this.justifyPercentage,e,v,t,s=0,u=this.innerLeft,n=this.innerTop,a=u,o=n,r,h,d,l,f=this.widthWrapResult.lines,c,g,p,x=0,y=f.length;x<y;x++){switch(c=f[x],g=c.children,this.rtl&&g.reverse(),p=m-c.width,this.align){case 0:break;case 1:a+=p;break;case 2:a+=p/2;break;case 3:s=Dr(m,p,i,g.length);break;case 4:s=Dr(m,p,i,g.length),s===0&&(a+=p);break;case 5:s=Dr(m,p,i,g.length),s===0&&(a+=p/2);break}for(var T=0,E=g.length;T<E;T++)e=g[T],!e.rexSizer.hidden&&(v=e.rexSizer,t=v.padding,ys.call(this,e),r=a+t.left,T>0&&(r+=this.space.item),h=o+t.top,d=St(e),l=gt(e),a=r+d+t.right+s,Ts.call(this,e,r,h,d,l,v.align));a=u,o+=c.height+this.space.line}},Dr=function(m,i,e,v){return i/m<=e?i/(v-1):0},U1=function(m,i){i===void 0?i={lines:[],width:0,height:0}:(i.lines.length=0,i.width=0,i.height=0);for(var e=this.sizerChildren,v,t,s,u=0,n=i.lines,a=void 0,o,r=0,h=e.length;r<h;r++){if(v=e[r],v===`
`)v=void 0,t=0,o=!0;else{if(v.rexSizer.hidden)continue;v.isRexSizer&&v.layout(),t=Y1(v),o=u<t||a===void 0}o&&(a&&(a.width=m-(u+this.space.item),i.width=Math.max(i.width,a.width),i.height+=a.height+this.space.line),a={children:[],height:0},n.push(a),u=m),u-=t+this.space.item,v&&(a.children.push(v),s=X1(v),a.height=Math.max(a.height,s))}return a&&(a.width=m-(u+this.space.item),i.width=Math.max(i.width,a.width),i.height+=a.height),i},Y1=function(m){var i=m.rexSizer.padding;return St(m)+i.left+i.right},X1=function(m){var i=m.rexSizer.padding;return gt(m)+i.top+i.bottom},W1=function(m){var i=m-this.space.left-this.space.right;this.widthWrapResult=U1.call(this,i,this.widthWrapResult),ad.call(this,m)};const Ul=Phaser.Math.Distance.Between;var H1=function(m,i){var e=this.sizerChildren;if(e.length===0)return-1;for(var v=-1,t=1/0,s=0,u=e.length;s<u;s++){var n=e[s];if(!(Math.abs(n.centerY-i)>n.height/2)){var o=Ul(n.left,n.centerY,m,i);t>o&&(t=o,v=s);var a=e[s+1];if(!(a&&a.y===n.y)){var o=Ul(n.right,n.centerY,m,i);t>o&&(t=o,v=s+1)}}}return v};const $1=Phaser.Utils.Objects.IsPlainObject,Br=Phaser.Utils.Objects.GetValue,J1=Phaser.Display.Align.CENTER;var Nr=function(m,i,e,v){if(m===`
`)return this.addNewLine(),this;if(ms.call(this,m),$1(i)){var t=i;i=Br(t,"padding",0),e=Br(t,"key",void 0),v=Br(t,"index",void 0)}i===void 0&&(i=0);var t=this.getSizerConfig(m);return t.align=J1,t.padding=Xi(i),v===void 0||v>=this.sizerChildren.length?this.sizerChildren.push(m):this.sizerChildren.splice(v,0,m),e!==void 0&&this.addChildrenMap(e,m),this},K1={add(m,i,e){if(he(m))for(var v=m,t=0,s=v.length;t<s;t++)Nr.call(this,v[t],i);else Nr.call(this,m,i,e);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(m,i,e,v){return Nr.call(this,i,e,v,m),this},insertAtPosition(m,i,e,v,t){var s=H1.call(this,m,i);return s===-1&&(s=void 0),this.insert(s,e,v,t),this}};const Z1=Phaser.Utils.Array.Remove;var Q1={remove(m,i){return this.getParentSizer(m)!==this?this:(Z1(this.sizerChildren,m),Yn.call(this,m,i),this)},removeAll(m){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],m);return this},clear(m){return this.sizerChildren.length=0,Xn.call(this,m),this}},Ld={getChildrenWidth:N1,getChildrenHeight:G1,getChildrenSizers:V1,preLayout:b1,layoutChildren:z1,runWidthWrap:W1};Object.assign(Ld,K1,Q1);var j1=function(m){m===void 0&&(m=this.sizerChildren);for(var i=0,e,v,t=0,s=m.length;t<s;t++)e=m[t],e!==`
`&&(v=this.getChildWidth(e),i=Math.max(v,i));return i},k1=function(m){m===void 0&&(m=this.sizerChildren);for(var i=0,e,v,t=0,s=m.length;t<s;t++)e=m[t],e!==`
`&&(v=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:gt(e),i=Math.max(v,i));return i};const Yl=Phaser.Utils.Objects.IsPlainObject,ee=Phaser.Utils.Objects.GetValue;class mi extends gi{constructor(i,e,v,t,s,u){Yl(e)?(u=e,e=ee(u,"x",0),v=ee(u,"y",0),t=ee(u,"width",void 0),s=ee(u,"height",void 0)):Yl(t)&&(u=t,t=ee(u,"width",void 0),s=ee(u,"height",void 0)),super(i,e,v,t,s,u),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(ee(u,"orientation",0)),this.setItemSpacing(ee(u,"space.item",0)),this.setLineSpacing(ee(u,"space.line",0)),this.setAlign(ee(u,"align",0)),this.setJustifyPercentage(ee(u,"justifyPercentage",.25)),this.setRTL(ee(u,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(i){return this.orientation=To(i),this}setItemSpacing(i){return this.space.item=i,this}setLineSpacing(i){return this.space.line=i,this}setAlign(i){return typeof i=="string"&&(i=q1[i]),this.align=i,this}setJustifyPercentage(i){return this.justifyPercentage=i,this}setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=j1.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=k1.call(this)),this._maxChildHeight}}const q1={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(mi.prototype,Ld);et.register("fixWidthSizer",function(m,i,e,v,t){var s=new mi(this.scene,m,i,e,v,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.FixWidthSizer",mi);et.register("overlapSizer",function(m,i,e,v,t){var s=new ei(this.scene,m,i,e,v,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.OverlapSizer",ei);et.register("space",function(){var m=new yo(this.scene);return m});it(window,"RexPlugins.UI.Space",yo);var ls=function(m,i,e,v){var t=new va(i,e,v);if(m&&!m.isRexSizer){var s=t.createGeometryMask();m.setMask(s),this.once("destroy",function(){m.setMask(),s.destroy()})}return this.pin(t),t};const de=Phaser.Utils.Objects.GetValue;class $n extends Ot{constructor(i,e){super(i,e),this.type="rexLabel";var v=de(e,"background",void 0),t=de(e,"icon",void 0),s=de(e,"iconMask",void 0),u=de(e,"text",void 0),n=de(e,"action",void 0),a=de(e,"actionMask",void 0),o=de(e,"align",void 0),r=de(e,"space.icon",0),h=de(e,"space.text",0);if(v&&this.addBackground(v),(o==="right"||o==="bottom"||o==="center")&&this.addSpace(),t){var d;this.orientation===0?(u||n)&&(d={right:r}):(u||n)&&(d={bottom:r}),this.add(t,0,"center",d),s&&(s=ls.call(this,t,t,1))}if(u){var l=de(e,"expandTextWidth",!1),f=de(e,"expandTextHeight",!1),c,d,g;this.orientation===0?(c=l?1:0,n&&(d={right:h}),g=f):(c=f?1:0,n&&(d={bottom:h}),g=l),this.add(u,c,"center",d,g)}n&&(this.add(n),a&&(a=ls.call(this,n,n,1))),o==="center"&&this.addSpace(),this.addChildrenMap("background",v),this.addChildrenMap("icon",t),this.addChildrenMap("iconMask",s),this.addChildrenMap("text",u),this.addChildrenMap("action",n),this.addChildrenMap("actionMask",a)}get text(){var i=this.childrenMap.text;return i===void 0?"":i.text}set text(i){var e=this.childrenMap.text;e!==void 0&&e.setText(i)}setText(i){return this.text=i,this}appendText(i){return this.text+=i,this}setTexture(i,e){var v=this.childrenMap.icon;if(v!==void 0)return v.setTexture(i,e),this}get texture(){var i=this.childrenMap.icon;if(i!==void 0)return i.texture}get frame(){var i=this.childrenMap.icon;if(i!==void 0)return i.frame}runLayout(i,e,v){if(this.ignoreLayout)return this;super.runLayout(i,e,v);var t=this.childrenMap.iconMask;t&&(t.setPosition(),this.resetChildPositionState(t));var s=this.childrenMap.actionMask;return s&&(s.setPosition(),this.resetChildPositionState(s)),this}resize(i,e){super.resize(i,e);var v=this.childrenMap.iconMask;v&&v.resize();var t=this.childrenMap.actionMask;return t&&t.resize(),this}}et.register("label",function(m){var i=new $n(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.Label",$n);const Ks=Ot.prototype.add,Xl=Ot.prototype.addSpace;var Gr=function(m){var i=!m.isRexSpace,e=!i||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(i){var v=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");v&&Xl.call(this),Ks.call(this,m,{proportion:e,expand:!0});var t=!this.buttonsExpand&&this.buttonsAlign==="center";t&&Xl.call(this),this.hasTailSpace=t}else Ks.call(this,m,{proportion:e,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var s=this.sizerChildren.length-1;Ks.call(this,m,{index:s,proportion:e,expand:!0})}else Ks.call(this,m,{proportion:e,expand:!0});return i&&this.buttonGroup.add(m),this},_1={addButton(m){if(he(m))for(var i=m,e=0,v=i.length;e<v;e++)Gr.call(this,i[e]);else Gr.call(this,m);return this},addButtons(m){for(var i=0,e=m.length;i<e;i++)Gr.call(this,m[i]);return this}};const tC=Phaser.Utils.Array.Remove,eC=Ot.prototype.remove,iC=Ot.prototype.clear;var Vr=function(m,i){if(this.getParentSizer(m)!==this)return this;var e=this.buttonGroup.buttons;return tC(e,m),eC.call(this,m,i),this},sC={remove(m,i){if(he(m))for(var e=m,v=0,t=e.length;v<t;v++)Vr.call(this,e[v],i);else Vr.call(this,m,i);return this},clear(m){var i=this.buttonGroup.buttons;return i.length=0,iC.call(this,m),this},removeButton(e,i){var e=this.getButton(e);return e?(this.remove(e,i),this):this},clearButtons(m){for(var i=this.buttonGroup.buttons,e=i.length-1;e>=0;e--)Vr.call(this,i[e],m);return this}},nC={add(m){return this.buttons.push(m),m._buttonBehavior=new Wi(m,this.clickConfig),m._buttonBehavior.on("click",function(i,e,v,t){this.fireEvent("button.click",e,v,t)},this).on("enable",function(i,e){this.fireEvent("button.enable",e)},this).on("disable",function(i,e){this.fireEvent("button.disable",e)},this),m.on("pointerover",function(i,e,v,t){this.fireEvent("button.over",m,i,t)},this).on("pointerout",function(i,e){this.fireEvent("button.out",m,i,e)},this),this},addMultiple(m){for(var i=0,e=m.length;i<e;i++)this.add(gameObject[i]);return this}},rC=function(m,i,e,v){var t;if(typeof i=="number"){if(t=i,i=this.buttons[t],!i)return}else if(t=this.buttons.indexOf(i),t===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(m,i,t,e,v),this.groupName!==void 0?this.eventEmitter.emit(m,i,this.groupName,t,e,v):this.eventEmitter.emit(m,i,t,e,v)};const Bi=Phaser.Utils.Objects.GetValue;var Wl=function(m,i){i===void 0&&(i=!1);var e=Bi(m,"dataManager",void 0),v,t;if(v=Bi(m,"setValueCallback",void 0),t=Bi(m,"setValueCallbackScope",void 0),v===void 0&&(v=Bi(m,"setButtonStateCallback",void 0),t=Bi(m,"setButtonStateCallbackScope",void 0)),e===void 0){var s=this.parent;s.setDataEnabled(),e=s.data}this.buttons.forEach(function(u){var n=u.name;v&&e.events.on(`changedata-${n}`,function(a,o,r){t?v.call(t,u,o,r):v(u,o,r)}),e.set(n,void 0),e.set(n,i)}),this.dataManager=e},aC={setType(m){var i=Bi(m,"type",void 0);switch(this.buttonsType=i,i){case"radio":this.setRadioType(m);break;case"checkboxes":this.setCheckboxesType(m);break}return this},setRadioType(m){Wl.call(this,m);var i=void 0,e=this.parent,v=this.buttons,t=this.dataManager;return Object.defineProperty(e,"value",{get:function(){return i},set:function(s){s!==i&&(i=s,v.forEach(function(u){var n=u.name,a=t.get(n);n===s?a||t.set(n,!0):a&&t.set(n,!1)}))},enumerable:!0,configurable:!0}),e.on("button.click",function(s){e.value=s.name}),this},setCheckboxesType(m){Wl.call(this,m);var i=this.parent,e=this.dataManager;return i.on("button.click",function(v){e.toggle(v.name)}),this},setSelectedButtonName(m){return this.parent.value=m,this},getSelectedButtonName(){return this.parent.value},setButtonState(m,i){return i===void 0&&(i=!0),this.dataManager.set(m,i),this},getButtonState(m){return this.dataManager.get(m)}},oC=function(m,i){if(m)if(he(m)){for(var e,v=0,t=m.length;v<t;v++)if(e=Hl(m[v],i),e)return e}else{var e;for(var s in m)if(e=Hl(m[s],i),e)return e}else return null},Hl=function(m,i){return m?m.hasOwnProperty("name")?m.name===i?m:null:GetElementByName(m,i):null},Jn={getButton(m){var i=this.buttons,e,v=typeof m;switch(v){case"number":e=i[m];break;case"string":e=oC(i,m);break;default:e=m,i.indexOf(e)===-1&&(e=void 0);break}return e},setButtonEnable(m,i){var e=this.buttons;if(m===void 0||typeof m=="boolean"){i=m;for(var v=0,t=e.length;v<t;v++)e[v]._buttonBehavior.setEnable(i)}else this.getButton(m)._buttonBehavior.setEnable(i);return this},toggleButtonEnable(m){var i=this.buttons;if(m===void 0||typeof m=="boolean")for(var e=0,v=i.length;e<v;e++)i[e]._buttonBehavior.toggleEnable();else this.getButton(m)._buttonBehavior.toggleEnable();return this},getButtonEnable(m){return m===void 0&&(m=0),this.getButton(m)._buttonBehavior.enable},emitButtonClick(m){var i=this.buttonGroup?this.buttonGroup:this;return i.fireEvent("button.click",m),this},showButton(m){return Ze(this.getButton(m)),this},hideButton(m){return Qe(this.getButton(m)),this},isButtonShown(m){return ro(this.getButton(m)),this},forEachButtton(m,i){for(var e=this.buttons,v=0,t=e.length;v<t;v++)i?m.call(i,e[v],v,e):m(e[v],v,e);return this}};class Kn{constructor(i){this.parent=i.parent,this.eventEmitter=i.eventEmitter,this.groupName=i.groupName,this.clickConfig=i.clickConfig,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var hC={fireEvent:rC};Object.assign(Kn.prototype,nC,aC,Jn,hC);var Eo={setSelectedButtonName(m){return this.buttonGroup.setSelectedButtonName(m),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(m,i){return this.buttonGroup.setButtonState(m,i),this},getButtonState(m){return this.buttonGroup.getButtonState(m)}};const li=Phaser.Utils.Objects.GetValue;class re extends Ot{constructor(i,e){e===void 0&&(e={});var v=e.space;typeof v=="number"&&(e.space={item:v}),super(i,e),this.type="rexButtons",this.buttonGroup=new Kn({parent:this,eventEmitter:li(e,"eventEmitter",this),groupName:li(e,"groupName",void 0),clickConfig:li(e,"click",void 0)});var t=li(e,"background",void 0),s=li(e,"buttons",void 0);this.buttonsExpand=li(e,"expand",!1),this.buttonsAlign=li(e,"align",void 0),t&&this.addBackground(t),s&&this.addButtons(s),this.buttonGroup.setType(e),this.addChildrenMap("background",t),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(re.prototype,_1,sC,Jn,Eo);et.register("buttons",function(m){var i=new re(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.Buttons",re);const lC=ii.prototype.add;var uC={addButton(m,i,e){return lC.call(this,m,i,e,void 0,0,this.buttonsExpand),this.buttonGroup.add(m),this},addButtons(m,i){for(var e=0,v=m;e<v;e++)this.addButton(m[e],void 0,i);return this}};const fC=Phaser.Utils.Array.Remove,dC=ii.prototype.remove,vC=ii.prototype.clear;var br=function(e,i){var e=this.getButton(e);if(!e)return this;var v=this.buttonGroup.buttons;return fC(v,e),dC.call(this,e,i),this},cC={remove(m,i){if(he(m))for(var e=m,v=0,t=e.length;v<t;v++)br.call(this,e[v],i);else br.call(this,m,i);return this},clear(m){var i=this.buttonGroup.buttons;return i.length=0,vC.call(this,m),this},removeButton(m,i){return this.remove(m,i),this},clearButtons(m){for(var i=this.buttonGroup.buttons,e=i.length-1;e>=0;e--)br.call(this,i[e],m);return this}};const ye=Phaser.Utils.Objects.GetValue;class So extends ii{constructor(i,e){e===void 0&&(e={});var v=ye(e,"row",0),t=ye(e,"col",0),s=ye(e,"createCellContainerCallback"),u=ye(e,"buttons",void 0),n=ye(e,"expand",!0),a=n?1:0;if(s&&(e.createCellContainerCallback=void 0),u!==void 0){v=Math.max(v,u.length);for(var o=0,r=u.length;o<r;o++)t=Math.max(t,u[o].length)}e.row=v,e.column=t,e.columnProportions=a,e.rowProportions=a,super(i,e),this.type="rexGridButtons",this.buttonGroup=new Kn({parent:this,eventEmitter:ye(e,"eventEmitter",this),groupName:ye(e,"groupName",void 0),clickConfig:ye(e,"click",void 0)});var h=ye(e,"background",void 0);if(this.buttonsExpand=n,ye(e,"space",void 0),h&&this.addBackground(h),u)for(var d,l,f=0,c=u.length;f<c;f++){d=u[f];for(var g=0,p=d.length;g<p;g++)l=d[g],l&&this.addButton(l,g,f)}else if(s)for(var x=0;x<v;x++)for(var y=0;y<t;y++){var l=s(i,y,x);l&&this.addButton(l,y,x)}this.buttonGroup.setType(e),this.addChildrenMap("background",h),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(So.prototype,uC,cC,Jn,Eo);et.register("gridButtons",function(m){var i=new So(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.GridButtons",So);const Fd=mi.prototype.add;var Zs=function(m){return Fd.call(this,m),this.buttonGroup.add(m),this},pC={addButton(m){if(he(m))for(var i=m,e=0,v=i.length;e<v;e++)Zs.call(this,i[e]);else Zs.call(this,m);return this},addButtons(m){if(he(m[0]))for(var i=m,e,v=0,t=i.length-1;v<=t;v++){e=i[v];for(var s=0,u=e.length;s<u;s++)Zs.call(this,e[s]);v>t&&Fd.addNewLine(this)}else for(var s=0,u=m.length;s<u;s++)Zs.call(this,m[s]);return this}};const gC=Phaser.Utils.Array.Remove,mC=mi.prototype.remove,xC=mi.prototype.clear;var zr=function(e,i){var e=this.getButton(e);if(!e)return this;var v=this.buttonGroup.buttons;return gC(v,e),mC.call(this,e,i),this},yC={remove(m,i){if(he(m))for(var e=m,v=0,t=e.length;v<t;v++)zr.call(this,e[v],i);else zr.call(this,m,i);return this},clear(m){var i=this.buttonGroup.buttons;return i.length=0,xC.call(this,m),this},removeButton(m,i){return this.remove(m,i),this},clearButtons(m){for(var i=this.buttonGroup.buttons,e=i.length-1;e>=0;e--)zr.call(this,i[e],m);return this}};const Oi=Phaser.Utils.Objects.GetValue;class Co extends mi{constructor(i,e){e===void 0&&(e={});var v=e.space;typeof v=="number"&&(e.space={item:v,line:v}),super(i,e),this.type="rexFixWidthButtons",this.buttonGroup=new Kn({parent:this,eventEmitter:Oi(e,"eventEmitter",this),groupName:Oi(e,"groupName",void 0),clickConfig:Oi(e,"click",void 0)});var t=Oi(e,"background",void 0),s=Oi(e,"buttons",void 0);this.buttonsAlign=Oi(e,"align",void 0),t&&this.addBackground(t),s&&this.addButtons(s),this.buttonGroup.setType(e),this.addChildrenMap("background",t),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Co.prototype,pC,yC,Jn,Eo);et.register("fixWidthButtons",function(m){var i=new Co(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.FixWidthButtons",Co);var TC={getChoice(m){return this.childrenMap.choicesSizer.getButton(m)},getAction(m){return this.childrenMap.actionsSizer.getButton(m)},getToolbar(m){return this.childrenMap.toolbarSizer.getButton(m)},getLeftToolbar(m){return this.childrenMap.leftToolbarSizer.getButton(m)},setChoiceEnable(m,i){return this.childrenMap.choicesSizer.setButtonEnable(m,i),this},setActionEnable(m,i){return this.childrenMap.actionsSizer.setButtonEnable(m,i),this},setToolbarEnable(m,i){return this.childrenMap.toolbarSizer.setButtonEnable(m,i),this},setLeftToolbarEnable(m,i){return this.childrenMap.leftToolbarSizer.setButtonEnable(m,i),this},toggleChoiceEnable(m){return this.childrenMap.choicesSizer.toggleButtonEnable(m),this},toggleActionEnable(m){return this.childrenMap.actionsSizer.toggleButtonEnable(m),this},toggleToolbarEnable(m){return this.childrenMap.toolbarSizer.toggleButtonEnable(m),this},toggleLeftToolbarEnable(m){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(m),this},getChoiceEnable(m){return this.childrenMap.choicesSizer.getButtonEnable(m)},getActionEnable(m){return this.childrenMap.actionsSizer.getButtonEnable(m)},getToolbarEnable(m){return this.childrenMap.toolbarSizer.getButtonEnable(m)},getLeftToolbarEnable(m){return this.childrenMap.leftToolbarSizer.getButtonEnable(m)},emitChoiceClick(m){return this.childrenMap.choicesSizer.emitButtonClick(m),this},emitActionClick(m){return this.childrenMap.actionsSizer.emitButtonClick(m),this},emitToolbarClick(m){return this.childrenMap.toolbarSizer.emitButtonClick(m),this},emitLeftToolbarClick(m){return this.childrenMap.leftToolbarSizer.emitButtonClick(m),this},showChoice(m){return this.childrenMap.choicesSizer.showButton(m),this},showAction(m){return this.childrenMap.actionsSizer.showButton(m),this},showToolbar(m){return this.childrenMap.toolbarSizer.showButton(m),this},showLeftToolbar(m){return this.childrenMap.leftToolbarSizer.showButton(m),this},hideChoice(m){return this.childrenMap.choicesSizer.hideButton(m),this},hideAction(m){return this.childrenMap.actionsSizer.hideButton(m),this},hideToolbar(m){return this.childrenMap.toolbarSizer.hideButton(m),this},hideLeftToolbar(m){return this.childrenMap.leftToolbarSizer.hideButton(m),this},addChoice(m){return this.childrenMap.choicesSizer.addButton(m),this},addAction(m){return this.childrenMap.actionsSizer.addButton(m),this},addToolbar(m){return this.childrenMap.toolbarSizer.addButton(m),this},addLeftToolbar(m){return this.childrenMap.leftToolbarSizer.addButton(m),this},removeChoice(m,i){return this.childrenMap.choicesSizer.removeButton(m,i),this},removeAction(m,i){return this.childrenMap.actionsSizer.removeButton(m,i),this},removeToolbar(m,i){return this.childrenMap.toolbarSizer.removeButton(m,i),this},removeLeftToolbar(m,i){return this.childrenMap.leftToolbarSizer.removeButton(m,i),this},clearChoices(m){return this.childrenMap.choicesSizer.clearButtons(m),this},clearActions(m){return this.childrenMap.actionsSizer.clearButtons(m),this},clearToolbar(m){return this.childrenMap.toolbarSizer.clearButtons(m),this},clearLeftToolbar(m){return this.childrenMap.leftToolbarSizer.clearButtons(m),this},forEachChoice(m,i){return this.childrenMap.choicesSizer.forEachButtton(m,i),this},forEachAction(m,i){return this.childrenMap.actionsSizer.forEachButtton(m,i),this},forEachToolbar(m,i){return this.childrenMap.toolbarSizer.forEachButtton(m,i),this},forEachLeftToolbar(m,i){return this.childrenMap.leftToolbarSizer.forEachButtton(m,i),this}};const rt=Phaser.Utils.Objects.GetValue;class Po extends Ot{constructor(i,e){e===void 0&&(e={}),e.orientation=1,super(i,e),this.type="rexDialog",this.eventEmitter=rt(e,"eventEmitter",this);var v=rt(e,"background",void 0),t=rt(e,"title",void 0),s=rt(e,"toolbar",void 0),u=rt(e,"toolbarBackground",void 0),n=rt(e,"leftToolbar",void 0),a=rt(e,"leftToolbarBackground",void 0),o=rt(e,"content",void 0),r=rt(e,"description",void 0),h,d=rt(e,"choices",void 0),l=rt(e,"choicesBackground",void 0),f,c=rt(e,"actions",void 0),g=rt(e,"actionsBackground",void 0),p=rt(e,"click",void 0);v&&this.addBackground(v);var x;s&&(x=new re(i,{groupName:"toolbar",background:u,buttons:s,orientation:0,space:{item:rt(e,"space.toolbarItem",0)},click:p,eventEmitter:this.eventEmitter}));var y;if(n&&(y=new re(i,{groupName:"leftToolbar",background:a,buttons:n,orientation:0,space:{item:rt(e,"space.leftToolbarItem",0)},click:p,eventEmitter:this.eventEmitter})),t&&!s&&!n){var T=rt(e,"align.title","center"),E=rt(e,"space.title",0),S;(o||r||d||c)&&(S={bottom:E});var C=rt(e,"expand.title",!0);this.add(t,{align:T,padding:S,expand:C})}if(s&&!t&&!n){var E=rt(e,"space.title",0),S;(o||r||d||c)&&(S={bottom:E});var C=rt(e,"expand.toolbar",!0);this.add(x,{align:"right",padding:S,expand:C})}if(n&&!t&&!s){var E=rt(e,"space.title",0),S;(o||r||d||c)&&(S={bottom:E});var C=rt(e,"expand.leftToolbar",!0);this.add(y,{align:"left",padding:S,expand:C})}if(t&&(s||n)){var P=new Ot(i,{orientation:0});y&&P.add(y,{align:"right",expand:!1});var T=rt(e,"align.title","left"),C=rt(e,"expand.title",!0);!C&&(T==="right"||T==="center")&&P.addSpace();var S={left:rt(e,"space.titleLeft",0),right:rt(e,"space.titleRight",0)},R=C?1:0;P.add(t,{proportion:R,align:"center",padding:S,expand:C}),!C&&(T==="left"||T==="center")&&P.addSpace(),x&&P.add(x,{align:"right",expand:!1});var E=rt(e,"space.title",0),S;(o||r||d||c)&&(S={bottom:E}),this.add(P,{align:"center",padding:S,expand:!0})}if(o){var T=rt(e,"align.content","center"),A=rt(e,"space.content",0),S={left:rt(e,"space.contentLeft",0),right:rt(e,"space.contentRight",0),bottom:r||d||c?A:0},C=rt(e,"expand.content",!0);this.add(o,{align:T,padding:S,expand:C})}if(r){var T=rt(e,"align.description","center"),M=rt(e,"space.description",0),S={left:rt(e,"space.descriptionLeft",0),right:rt(e,"space.descriptionRight",0),bottom:d||c?M:0},C=rt(e,"expand.description",!0);this.add(r,{align:T,padding:S,expand:C})}if(d){var T=rt(e,"align.choices","center");h=new re(i,{groupName:"choices",background:l,buttons:d,orientation:1,space:{item:rt(e,"space.choice",0)},click:p,eventEmitter:this.eventEmitter,type:rt(e,"choicesType",void 0),setValueCallback:rt(e,"choicesSetValueCallback",void 0),setValueCallbackScope:rt(e,"choicesSetValueCallbackScope",void 0)});var O=rt(e,"space.choices",0),S={left:rt(e,"space.choicesLeft",0),right:rt(e,"space.choicesRight",0),bottom:c?O:0},C=rt(e,"expand.choices",!0);this.add(h,{align:T,padding:S,expand:C})}if(c){f=new re(i,{groupName:"actions",background:g,buttons:c,orientation:0,space:{item:rt(e,"space.action",0)},expand:rt(e,"expand.actions",!1),align:rt(e,"align.actions","center"),click:p,eventEmitter:this.eventEmitter});var S={left:rt(e,"space.actionsLeft",0),right:rt(e,"space.actionsRight",0)};this.add(f,{align:"center",padding:S,expand:!0})}this.addChildrenMap("background",v),this.addChildrenMap("title",t),this.addChildrenMap("toolbar",s),this.addChildrenMap("leftToolbar",n),this.addChildrenMap("content",o),this.addChildrenMap("description",r),this.addChildrenMap("choices",d),this.addChildrenMap("actions",c),this.addChildrenMap("choicesSizer",h),this.addChildrenMap("actionsSizer",f),this.addChildrenMap("toolbarSizer",x),this.addChildrenMap("leftToolbarSizer",y)}}Object.assign(Po.prototype,TC);et.register("dialog",function(m){var i=new Po(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.Dialog",Po);var EC={getButtonsSizer(m){return this.childrenMap[`${m}ButtonsSizer`]},getButton(m,i){var e=this.getButtonsSizer(m);return e?e.getButton(i):void 0},setButtonEnable(m,i,e){return this.getButtonsSizer(m).setButtonEnable(i,e),this},setLeftButtonEnable(m,i){return this.childrenMap.leftButtonsSizer.setButtonEnable(m,i),this},setRightButtonEnable(m,i){return this.childrenMap.rightButtonsSizer.setButtonEnable(m,i),this},setTopButtonEnable(m,i){return this.childrenMap.topButtonsSizer.setButtonEnable(m,i),this},setBottomButtonEnable(m,i){return this.childrenMap.bottomButtonsSizer.setButtonEnable(m,i),this},toggleButtonEnable(m,i){return this.getButtonsSizer(m).toggleButtonEnable(i),this},toggleLeftButtonEnable(m){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(m),this},toggleRightButtonEnable(m){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(m),this},toggleTopButtonEnable(m){return this.childrenMap.topButtonsSizer.toggleButtonEnable(m),this},toggleBottomButtonEnable(m){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(m),this},getButtonEnable(m,i){return this.getButtonsSizer(m).getButtonEnable(i)},getLeftButtonEnable(m){return this.childrenMap.leftButtonsSizer.getButtonEnable(m)},getRightButtonEnable(m){return this.childrenMap.rightButtonsSizer.getButtonEnable(m)},getTopButtonEnable(m){return this.childrenMap.topButtonsSizer.getButtonEnable(m)},getBottomButtonEnable(m){return this.childrenMap.bottomButtonsSizer.getButtonEnable(m)},emitButtonClick(m,i){var e=this.getButtonsSizer(m);return e?(e.emitButtonClick(i),this):this},emitLeftButtonClick(m){return this.childrenMap.leftButtonsSizer.emitButtonClick(m),this},emitRightButtonClick(m){return this.childrenMap.rightButtonsSizer.emitButtonClick(m),this},emitTopButtonClick(m){return this.childrenMap.topButtonsSizer.emitButtonClick(m),this},emitBottomButtonClick(m){return this.childrenMap.bottomButtonsSizer.emitButtonClick(m),this},getLeftButton(m){return this.childrenMap.leftButtonsSizer.getButton(m)},getRightButton(m){return this.childrenMap.rightButtonsSizer.getButton(m)},getTopButton(m){return this.childrenMap.topButtonsSizer.getButton(m)},getBottomButton(m){return this.childrenMap.bottomButtonsSizer.getButton(m)},showButton(m,i){return Ze(this.getButton(m,i)),this},showLeftButton(m){return Ze(this.getLeftButton(m)),this},showRightButton(m){return Ze(this.getRightButton(m)),this},showTopButton(m){return Ze(this.getTopButton(m)),this},showBottomButton(m){return Ze(this.getBottomButton(m)),this},hideButton(m,i){return Qe(this.getButton(m,i)),this},hideLeftButton(m){return Qe(this.getLeftButton(m)),this},hideRightButton(m){return Qe(this.getRightButton(m)),this},hideTopButton(m){return Qe(this.getTopButton(m)),this},hideBottomButton(m){return Qe(this.getBottomButton(m)),this},addButton(m,i){return this.getButtonsSizer(m).addButton(i),this},addLeftButton(m){return this.addButton("left",m),this},addRightButton(m){return this.addButton("right",m),this},addTopButton(m){return this.addButton("top",m),this},removeButton(m,i,e){return this.getButtonsSizer(m).removeButton(i,e),this},removeLeftButton(m,i){return this.removeButton("left",m,i),this},removeRightButton(m,i){return this.removeButton("right",m,i),this},removeTopButton(m,i){return this.removeButton("top",m,i),this},removeBottomButton(m,i){return this.removeButton("bottom",m,i),this},clearButtons(m,i){return this.getButtonsSizer(m).clearButtons(i),this},clearLeftButtons(m){return this.clearButtons("left",m),this},clearRightButtons(m){return this.clearButtons("right",m),this},clearTopButtons(m){return this.clearButtons("top",m),this},clearBottomButtonss(m){return this.clearButtons("bottom",m),this},forEachButton(m,i,e){return this.getButtonsSizer(m).forEachButtton(i,e),this},forEachLeftButton(m,i){return this.childrenMap.leftButtonsSizer.forEachButtton(m,i),this},forEachRightButton(m,i){return this.childrenMap.rightButtonsSizer.forEachButtton(m,i),this},forEachTopButton(m,i){return this.childrenMap.topButtonsSizer.forEachButtton(m,i),this},forEachBottomButton(m,i){return this.childrenMap.bottomButtonsSizer.forEachButtton(m,i),this}};const xt=Phaser.Utils.Objects.GetValue;class Ro extends ii{constructor(i,e){e===void 0&&(e={}),e.column=3,e.row=3,super(i,e),this.type="rexTabs",this.eventEmitter=xt(e,"eventEmitter",this);var v=xt(e,"background",void 0),t=xt(e,"panel",void 0),s=xt(e,"leftButtons",void 0),u=xt(e,"leftButtonsBackground",void 0),n,a=xt(e,"rightButtons",void 0),o=xt(e,"rightButtonsBackground",void 0),r,h=xt(e,"topButtons",void 0),d=xt(e,"topButtonsBackground",void 0),l,f=xt(e,"bottomButtons",void 0),c=xt(e,"bottomButtonsBackground",void 0),g,p=xt(e,"click",void 0);if(v&&this.addBackground(v),t&&this.add(t,1,1,"center",0,!0),s){var x=xt(e,"space.leftButtonsOffset",0),y=xt(e,"space.leftButton",0);n=new re(i,{groupName:"left",background:u,buttons:s,orientation:1,space:{item:y},align:xt(e,"align.leftButtons",void 0),click:p,eventEmitter:this.eventEmitter});var T={top:x};this.add(n,0,1,"top",T,!1)}if(a){var E=xt(e,"space.rightButtonsOffset",0),S=xt(e,"space.rightButton",0);r=new re(i,{groupName:"right",background:o,buttons:a,orientation:1,space:{item:S},align:xt(e,"align.rightButtons",void 0),click:p,eventEmitter:this.eventEmitter});var T={top:E};this.add(r,2,1,"top",T,!1)}if(h){var C=xt(e,"space.topButtonsOffset",0),P=xt(e,"space.topButton",0);l=new re(i,{groupName:"top",background:d,buttons:h,orientation:0,space:{item:P},align:xt(e,"align.topButtons",void 0),click:p,eventEmitter:this.eventEmitter});var T={left:C};this.add(l,1,0,"left",T,!1)}if(f){var R=xt(e,"space.bottomButtonsOffset",0),A=xt(e,"space.bottomButton",0);g=new re(i,{groupName:"bottom",background:c,buttons:f,orientation:0,space:{item:A},align:xt(e,"align.bottomButtons",void 0),click:p,eventEmitter:this.eventEmitter});var T={left:R};this.add(g,1,2,"left",T,!1)}this.addChildrenMap("background",v),this.addChildrenMap("panel",t),this.addChildrenMap("leftButtons",s),this.addChildrenMap("rightButtons",a),this.addChildrenMap("topButtons",h),this.addChildrenMap("bottomButtons",f),this.addChildrenMap("leftButtonsSizer",n),this.addChildrenMap("rightButtonsSizer",r),this.addChildrenMap("topButtonsSizer",l),this.addChildrenMap("bottomButtonsSizer",g)}}Object.assign(Ro.prototype,EC);et.register("tabs",function(m){var i=new Ro(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.Tabs",Ro);const $l=Phaser.Math.Percent;var Id=function(m,i,e){var v,t,s;return m.y===i.y?(v=Math.min(m.x,i.x),t=Math.max(m.x,i.x),s=$l(e.x,v,t)):m.x===i.x&&(v=Math.min(m.y,i.y),t=Math.max(m.y,i.y),s=$l(e.y,v,t)),s},SC=function(m,i,e){!this.enable||(Ur.x=i,Ur.y=e,this.value=Id(this.getStartPoint(),this.getEndPoint(),Ur))},Ur={},Jl=function(m,i,e){if(!!this.enable&&!!m.isDown){Yr.x=m.worldX,Yr.y=m.worldY;var v=Id(this.getStartPoint(),this.getEndPoint(),Yr);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-v)<.1?this.value=v:this.easeValueTo(v)}},Yr={},wd=function(m,i){i===void 0&&(i=CC);var e=this.childrenMap.thumb,v=e.x,t=e.y;return Bn(e,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,m),i.x=e.x,i.y=e.y,e.x=v,e.y=t,i},CC={};const PC=Phaser.Display.Align.LEFT_CENTER,RC=Phaser.Display.Align.TOP_CENTER;var MC=function(m){if(m===void 0&&(m=AC),this.childrenMap.thumb){var i=this.orientation===0?PC:RC;wd.call(this,i,m)}else this.orientation===0?(m.x=this.innerLeft+1,m.y=this.centerY):(m.x=this.centerX,m.y=this.innerTop+1);return m},AC={};const OC=Phaser.Display.Align.RIGHT_CENTER,LC=Phaser.Display.Align.BOTTOM_CENTER;var FC=function(m){if(m===void 0&&(m=IC),this.childrenMap.thumb){var i=this.orientation===0?OC:LC;wd.call(this,i,m)}else this.orientation===0?(m.x=this.innerRight-1,m.y=this.centerY):(m.x=this.centerX,m.y=this.innerBottom-1);return m},IC={};const Kl=Phaser.Math.Linear;var wC=function(m,i,e,v){return v===void 0&&(v=DC),v.x=Kl(i.x,e.x,m),v.y=Kl(i.y,e.y,m),v},DC={},BC=function(m){var i=this.childrenMap.thumb;return i===void 0?this:(m===void 0&&(m=this.value),wC(m,this.getStartPoint(),this.getEndPoint(),i),this.resetChildPositionState(i),this)};const NC=Phaser.Display.Align.LEFT_CENTER,GC=Phaser.Display.Align.TOP_CENTER;var VC=function(m){var i=this.childrenMap.indicator;if(i===void 0)return this;m===void 0&&(m=this.value);var e,v,t=this.childrenMap.thumb;if(t)if(this.orientation===0){var s=St(t),u=t.x-s*t.originX+s;e=u-this.left}else{var n=gt(t),a=t.y-n*t.originY+n;v=a-this.top}else this.orientation===0?e=this.width*m:v=this.height*m;je(i,e,v);var o=this.orientation===0?NC:GC;rd(i,this,o),this.resetChildPositionState(i)};const Gt=Phaser.Utils.Objects.GetValue,bC=Phaser.Math.Clamp,zC=Phaser.Math.Linear,Zl=Phaser.Math.Percent,UC=Phaser.Math.Snap.To;class Ss extends Ot{constructor(i,e){super(i,e),this.type="rexSlider",this.eventEmitter=Gt(e,"eventEmitter",this);var v=Gt(e,"background",void 0),t=Gt(e,"track",void 0),s=Gt(e,"indicator",void 0),u=Gt(e,"thumb",void 0);v&&this.addBackground(v),t&&this.add(t,{proportion:1,expand:!0,minWidth:0,minHeight:0}),s&&this.pin(s),u&&this.pin(u);var n=Gt(e,"input",0);switch(typeof n=="string"&&(n=YC[n]),n){case 0:u&&(u.setInteractive(),this.scene.input.setDraggable(u),u.on("drag",SC,this));break;case 1:this.setInteractive().on("pointerdown",Jl,this).on("pointermove",Jl,this);break}this.addChildrenMap("background",v),this.addChildrenMap("track",t),this.addChildrenMap("indicator",s),this.addChildrenMap("thumb",u);var a=Gt(e,"valuechangeCallback",null);if(a!==null){var o=Gt(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",a,o)}this.setEnable(Gt(e,"enable",void 0)),this.setGap(Gt(e,"gap",void 0)),this.setValue(Gt(e,"value",0),Gt(e,"min",void 0),Gt(e,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Gt(e,"easeValue.duration",0)).setEaseValueFunction(Gt(e,"easeValue.ease","Linear"))}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setGap(i){return this.gap=i,this}get value(){return this._value}set value(i){this.gap!==void 0&&(i=UC(i,this.gap));var e=this._value;this._value=bC(i,0,1),e!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter))}setValue(i,e,v){return i==null?this:(e!==void 0&&(i=Zl(i,e,v)),this.value=i,this)}addValue(i,e,v){return e!==void 0&&(i=Zl(i,e,v)),this.value+=i,this}getValue(i,e){var v=this.value;return i!==void 0&&(v=zC(i,e,v)),v}runLayout(i,e,v){return this.ignoreLayout?this:(super.runLayout(i,e,v),this.updateThumb(),this.updateIndicator(),this)}}const YC={pan:0,drag:0,click:1,none:-1};var XC={getStartPoint:MC,getEndPoint:FC,updateThumb:BC,updateIndicator:VC};Object.assign(Ss.prototype,XC,gs);et.register("slider",function(m){var i=new Ss(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.Slider",Ss);var Dd={v:0,vertical:0,h:1,horizontal:1};const WC=Phaser.Utils.Objects.GetValue;var Zn=function(m,i){var e=WC(m,"scrollMode",0);return typeof e=="string"&&(e=Dd[e]),e};const $t=Phaser.Utils.Objects.GetValue;class Mo extends Ot{constructor(i,e){super(i,e),this.type="rexScrollBar";var v=$t(e,"background",void 0),t=$t(e,"buttons",void 0),s=$t(t,"top",$t(t,"left",void 0)),u=$t(t,"bottom",$t(t,"right",void 0)),n,a=$t(e,"slider",void 0);if(v&&this.addBackground(v),s){this.add(s);var o=new da(s);o.on("intouch",function(){!this.enable||(this.value-=this.scrollStep)},this)}if(a){a.orientation=this.orientation,a.eventEmitter=this,a.value=null;var r;if(this.orientation===0){var h=$t(a,"width",void 0);r=h===void 0?1:0}else{var d=$t(a,"height",void 0);r=d===void 0?1:0}n=new Ss(i,a),i.add.existing(n),this.add(n,{proportion:r})}if(u){this.add(u);var o=new da(u);o.on("intouch",function(){!this.enable||(this.value+=this.scrollStep)},this)}var l=[s,u];this.addChildrenMap("background",v),this.addChildrenMap("slider",n),this.addChildrenMap("buttons",l);var f=$t(e,"valuechangeCallback",null);if(f!==null){var c=$t(e,"valuechangeCallbackScope",void 0);this.on("valuechange",f,c)}this.setEnable($t(e,"enable",void 0)),this.setValue($t(e,"value",0)),this.setScrollStep($t(t,"step",.01))}setScrollStep(i){return this.scrollStep=i,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(i){this.childrenMap.slider&&this.childrenMap.slider.setEnable(i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(i){!this.childrenMap.slider||(this.childrenMap.slider.value=i)}setValue(i,e,v){return this.childrenMap.slider&&this.childrenMap.slider.setValue(i,e,v),this}addValue(i,e,v){return this.childrenMap.slider&&this.childrenMap.slider.addValue(i,e,v),this}getValue(i,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(i,e):0}easeValueTo(i,e,v){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(i,e,v),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(i),this}setEaseValueFunction(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(i),this}}class HC extends Mo{constructor(i,e){e===void 0&&(e={});var v=ci(e);e={slider:v},e.orientation=v.orientation,delete v.orientation,e.background=v.background,delete v.background,e.buttons=v.buttons,delete v.buttons,super(i,e);var t=this.childrenMap.slider;this.addChildrenMap("track",t.childrenMap.track),this.addChildrenMap("indicator",t.childrenMap.indicator),this.addChildrenMap("thumb",t.childrenMap.thumb)}}class $C extends Me{constructor(i,e){super(e),this.parent=i,this.init()}init(){this.start("IDLE")}next_IDLE(){var i,e=this.parent,v=e.dragState;return v.isDown&&(i=e.dragThreshold===0?"DRAG":"DRAGBEGIN"),i}update_IDLE(i,e){this.next()}next_DRAGBEGIN(){var i,e=this.parent,v=e.dragState;return v.isDown?i=v.pointer.getDistance()>=e.dragThreshold?"DRAG":"DRAGBEGIN":i="IDLE",i}update_DRAGBEGIN(i,e){this.next()}next_DRAG(){var i,e=this.parent,v=e.dragState;return v.isUp&&(e.outOfBounds?i="BACK":e.slidingEnable?i="SLIDE":i="IDLE"),i}update_DRAG(i,e){var v=this.parent,t=v.dragState;t.justMoved&&v.dragging(),this.next()}next_SLIDE(){var i,e=this.parent,v=e.dragState;return v.isDown?i="DRAG":e.isSliding||(i="IDLE"),i}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(i,e){this.parent.sliding(i,e),this.next()}next_BACK(){var i,e=this.parent,v=e.dragState;return v.isDown?i="DRAG":e.isPullBack||(i="IDLE"),i}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(i,e){this.parent.pullBack(i,e),this.next()}}const Qs=Phaser.Utils.Objects.GetValue,JC=Phaser.Math.Distance.Between;class KC extends zt{constructor(i,e){super(i,e),this._enable=void 0,i.setInteractive(Qs(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(Qs(i,"enable",!0)),this.holdThreshold=Qs(i,"holdThreshold",50),this.pointerOutReleaseEnable=Qs(i,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.events.on("preupdate",this.preupdate,this)}shutdown(i){this.isShutdown||(this.scene.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){this._enable!==i&&(i||(this.isInTouched=!1,this.pointer=void 0),this._enable=i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(i){return i===void 0&&(i=!0),this.pointerOutReleaseEnable=i,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var i=this.scene.sys.game,e=i.loop.delta;return e}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var i=JC(this.preX,this.preY,this.x,this.y),e=i/(this.dt*.001);return e}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(i,e,v){!this.enable||!i.isDown||this.pointer!==void 0||(this.pointer=i,this.localX=e,this.localY=v)}onPointOut(i){!this.enable||this.pointer!==i||(this.pointer=void 0)}onPointerMove(i,e,v){!this.enable||!i.isDown||this.pointer!==i||(this.localX=e,this.localY=v)}preupdate(i,e){if(!!this.enable){var v=this.pointer;this.justMoved=!1,v&&!this.isInTouched?(this.x=v.worldX,this.y=v.worldY,this.preX=v.worldX,this.preY=v.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",v,this.localX,this.localY)):v&&this.isInTouched?this.x===v.x&&this.y===v.y?this.holdStartTime===void 0?this.holdStartTime=i:i-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=v.worldX,this.y=v.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",v,this.localX,this.localY)):!v&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",v))}}}const Xr=Phaser.Utils.Objects.GetValue;class ZC{constructor(i){this.resetFromJSON(i)}resetFromJSON(i){return this.setValue(Xr(i,"value",0)),this.setSpeed(Xr(i,"speed",0)),this.setAcceleration(Xr(i,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(i){return this.value=i,this}setSpeed(i){return this.speed=i,this}setAcceleration(i){return this.acceleration=i,this}updateSpeed(i){return this.acceleration!==0&&(this.speed+=this.acceleration*i,this.speed<0&&(this.speed=0)),this}getDeltaValue(i){return this.updateSpeed(i),this.speed<=0?0:this.speed*i}update(i){return this.updateSpeed(i),this.speed>0&&(this.value+=this.getDeltaValue(i)),this}get isMoving(){return this.speed>0}}class QC{constructor(){this.value,this.dir,this.movement=new ZC}init(i,e,v,t,s){return this.value=i,this.end=s,s!==void 0?this.dir=i<s:this.dir=e,this.movement.setSpeed(v).setAcceleration(-t),this}stop(){this.movement.reset()}update(i){var e=this.movement.getDeltaValue(i);return this.dir||(e=-e),this.end===void 0?this.value+=e:e===0?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Mt=Phaser.Utils.Objects.GetValue,jC=Phaser.Math.Clamp;class kC extends zt{constructor(i,e){super(i,e);var v=Mt(e,"enable",!0);this._state=new $C(this,{enable:v,eventEmitter:!1});var t={inputConfig:Mt(e,"inputConfig",void 0),enable:v,pointerOutRelease:Mt(e,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new KC(i,t),this._enable=void 0,this._value=void 0,this._slowDown=new QC;var s=Mt(e,"valuechangeCallback",null);if(s!==null){var u=Mt(e,"valuechangeCallbackScope",void 0);this.on("valuechange",s,u)}if(s=Mt(e,"overmaxCallback",null),s!==null){var u=Mt(e,"overmaxCallbackScope",void 0);this.on("overmax",s,u)}if(s=Mt(e,"overminCallback",null),s!==null){var u=Mt(e,"overminCallbackScope",void 0);this.on("overmin",s,u)}this.resetFromJSON(e),this.boot()}resetFromJSON(i){this.setOrientationMode(Mt(i,"orientation",0)),this.setDragThreshold(Mt(i,"threshold",10)),this.setSlidingDeceleration(Mt(i,"slidingDeceleration",5e3)),this.setBackDeceleration(Mt(i,"backDeceleration",2e3));var e=Mt(i,"bounds",void 0);return e?this.setBounds(e):this.setBounds(Mt(i,"max",0),Mt(i,"min",0)),this.setValue(Mt(i,"value",this.maxValue||0)),this.setEnable(Mt(i,"enable",!0)),this}boot(){this.scene.events.on("preupdate",this._state.update,this._state)}shutdown(i){this.isShutdown||(this.scene.events.off("preupdate",this._state.update,this._state),this._state.destroy(i),this.dragState.destroy(i),this._state=void 0,this.dragState=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return this._enable=i,this._state.setEnable(i),this.dragState.setEnable(i),this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(i){return typeof i=="string"&&(i=qC[i]),this.orientationMode=i,this}setDragThreshold(i){return this.dragThreshold=i,this}setSlidingDeceleration(i){return this.slidingDeceleration=i,this}setBackDeceleration(i){return this.backDeceleration=i,this}setBounds(i,e){if(Array.isArray(i)){var v=i;i=v[0],e=v[1]}return i<e?(this.minValue=i,this.maxValue=e):(this.minValue=e,this.maxValue=i),this}get value(){return this._value}set value(i){if(i!==this._value){var e=this._value,v=this.overMax(i),t=this.overMin(i);v&&this.emit("overmax",i,e),t&&this.emit("overmin",i,e),this.backEnable||(v&&(i=this.maxValue),t&&(i=this.minValue)),this._value=i,this.emit("valuechange",i,e)}}setValue(i,e){return e===void 0&&(e=!1),e&&(i=jC(i,this.minValue,this.maxValue)),this.value=i,this}addValue(i,e){return this.setValue(this.value+i,e),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(i){return this.maxValue!=null&&i>this.maxValue}overMin(i){return this.minValue!=null&&i<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return this.orientationMode===0?this.dragState.dy:this.orientationMode===1?this.dragState.dx:0}get dragSpeed(){return this.orientationMode===0?this.dragState.speedY:this.orientationMode===1?this.dragState.speedX:0}dragging(){this.value+=this.dragDelta}onSliding(){var i=this.value,e=this.dragSpeed;if(e===0){this._slowDown.stop(),this._state.next();return}var v=this.slidingDeceleration;this._slowDown.init(i,e>0,Math.abs(e),v)}sliding(i,e){e*=.001;var v=this._slowDown.update(e).value;this.overMax(v)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(v)?(this.value=this.minValue,this._slowDown.stop()):this.value=v}onPullBack(){var i=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,v=Math.abs(e-i),t=this.backDeceleration,s=Math.sqrt(2*t*v);this._slowDown.init(i,void 0,s,t,e)}pullBack(i,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const qC={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},js=Phaser.Utils.Objects.GetValue;class _C extends zt{constructor(i,e){if(super(i,e),this.parent!==this.scene?this.focusMode=js(e,"focus",!1):this.focusMode=!1,this.setSpeed(js(e,"speed",.1)),this.setEnable(js(e,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var i=this.parent;i.setInteractive(js(e,"inputConfig",void 0)).on("wheel",function(t,s,u,n,a){!this.enable||this.scroll(u)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(i,e,v,t,s,u){!this.enable||this.scroll(t)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setSpeed(i){return this.speed=i,this}scroll(i){i*=this.speed,this.emit("scroll",i,this.parent,this)}}const At=Phaser.Utils.Objects.GetValue;var tP=function(m,i){var e=m.scene,v=Zn(i),t=new Ot(e,{orientation:v}),s=At(i,"child.gameObject",void 0),u=At(i,"slider",void 0),n,a=At(u,"position",0);typeof a=="string"&&(a=eP[a]);var o=a===0,r=At(i,"scroller",!0),h,d=At(i,"mouseWheelScroller",!1),l;if(s){var f=At(i,"space.child",0),c={};if(m.childMargin={},typeof f!="number"){var g=f;v===0?(c.left=At(g,"left",0),c.right=At(g,"right",0),m.childMargin.top=At(g,"top",0),m.childMargin.bottom=At(g,"bottom",0)):(c.top=At(g,"top",0),c.bottom=At(g,"bottom",0),m.childMargin.top=At(g,"left",0),m.childMargin.bottom=At(g,"right",0))}else u&&(v===0?c=o?{right:f}:{left:f}:c=o?{bottom:f}:{top:f}),m.childMargin.top=0,m.childMargin.bottom=0;u?(u===!0&&(u={}),u.orientation=t.orientation===0?1:0,n=new HC(e,u),m.adaptThumbSizeMode=At(u,"adaptThumbSize",!1),m.minThumbSize=At(u,"minThumbSize",void 0)):(m.adaptThumbSizeMode=!1,m.minThumbSize=void 0),r&&(r===!0&&(r={}),r.orientation=v,h=new kC(s,r)),d&&(l=new _C(s,d)),n&&!o&&t.add(n,{proportion:0,align:"center",expand:!0});var p=At(i,"child.proportion",1),x=At(i,"child.expand",!0);t.add(s,{proportion:p,align:"center",padding:c,expand:x}),n&&o&&t.add(n,{proportion:0,align:"center",expand:!0})}return n&&n.on("valuechange",function(y){m.t=y,m.emit("scroll",m)}),h&&h.on("valuechange",function(y){m.childOY=y,m.emit("scroll",m)}),l&&l.on("scroll",function(y){m.addChildOY(-y,!0)}),m.addChildrenMap("child",s),m.addChildrenMap("slider",n),m.addChildrenMap("scroller",h),m.addChildrenMap("mouseWheelScroller",l),t},eP={right:0,left:1,bottom:0,top:1};Ot.prototype.runLayout;var iP=function(){var m=this.topChildOY,i=this.bottomChildOY,e=this.childrenMap.scroller,v=this.childrenMap.slider;return e&&e.setBounds(i,m),v&&v.setEnable(i!==m),this.updateController(),this.adaptThumbSizeMode&&sP.call(this),this},sP=function(){var m=Math.min(this.childVisibleHeight/this.childHeight,1),i=this.childrenMap.slider,e=i.childrenMap.track,v=i.childrenMap.thumb,t=this.minThumbSize;if(this.scrollMode===0){var s=e.displayHeight*m;t!==void 0&&s<t&&(s=t),je(v,void 0,s)}else{var u=e.displayWidth*m;t!==void 0&&u<t&&(u=t),je(v,u,void 0)}nP.call(this)},nP=function(){var m=this.childrenMap.slider,i=m.minWidth,e=m.minHeight;m.minWidth=m.width,m.minHeight=m.height,m.layout(),m.minWidth=i,m.minHeight=e},rP=function(){var m=this.childrenMap.scroller,i=this.childrenMap.slider;m&&m.setValue(this.childOY),i&&i.setValue(this.t)};const Te=Phaser.Utils.Objects.GetValue,Ql=Phaser.Math.Clamp;class Qn extends Ot{constructor(i,e){e===void 0&&(e={});var v=Zn(e);e.orientation=v===0?1:0,super(i,e),this.type=Te(e,"type","rexScrollable");var t=Te(e,"background",void 0),s=tP(this,e),u=Te(e,"header",void 0),n=Te(e,"footer",void 0);if(t&&this.addBackground(t),u){var a=Te(e,"align.header","center"),o=Te(e,"space.header",0),r;v===0?r={bottom:o}:r={right:o};var h=Te(e,"expand.header",!0);this.add(u,{proportion:0,align:a,padding:r,expand:h})}if(s&&this.add(s,{proportion:1,align:"center",padding:0,expand:!0}),n){var a=Te(e,"align.footer","center"),d=Te(e,"space.footer",0),r;v===0?r={top:d}:r={left:d};var h=Te(e,"expand.footer",!0);this.add(n,{proportion:0,align:a,padding:r,expand:h})}this.addChildrenMap("background",t),this.addChildrenMap("header",u),this.addChildrenMap("footer",n),this.runLayoutFlag=!1}runLayout(i,e,v){return this.ignoreLayout?this:(super.runLayout(i,e,v),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(i){var e=this.childMargin;if(e.top!==0||e.bottom!==0){var v=this.childrenMap.child,t=v.topChildOY-v.bottomChildOY,s=t+e.top+e.bottom,u=s*i-e.top;i=u/t}this.childrenMap.child.t=i,this.updateController()}get t(){var i=this.childrenMap.child.t,e=this.childMargin;if(e.top!==0||e.bottom!==0){var v=this.childrenMap.child,t=v.topChildOY-v.bottomChildOY,s=t+e.top+e.bottom,u=t*i+e.top;i=u/s}return i}set childOY(i){this.childrenMap.child.childOY=i,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var i=this.childrenMap.child;return i.topChildOY!==i.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(i,e){return e===void 0&&(e=!1),e&&(i=Ql(i,this.bottomChildOY,this.topChildOY)),this.childOY=i,this}addChildOY(i,e){return this.setChildOY(this.childOY+i,e),this}setT(i,e){return e===void 0&&(e=!1),e&&(i=Ql(i,0,1)),this.t=i,this}addT(i,e){return this.setT(this.t+i,e),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var i=this.childrenMap.slider;return i?i.enable:!1}set sliderEnable(i){var e=this.childrenMap.slider;!e||e.setEnable(i)}setSliderEnable(i){return i===void 0&&(i=!0),this.sliderEnable=i,this}get scrollerEnable(){var i=this.childrenMap.scroller;return i?i.enable:!1}set scrollerEnable(i){var e=this.childrenMap.scroller;!e||e.setEnable(i)}setScrollerEnable(i){return i===void 0&&(i=!0),this.scrollerEnable=i,this}get mouseWheelScrollerEnable(){var i=this.childrenMap.mouseWheelScroller;return i?i.enable:!1}set mouseWheelScrollerEnable(i){var e=this.childrenMap.mouseWheelScrollerEnable;!e||e.setEnable(i)}setMouseWheelScrollerEnable(i){return i===void 0&&(i=!0),this.mouseWheelScrollerEnable=i,this}setDropZoneEnable(i){i===void 0&&(i=!0);var e=this.childrenMap.child;return e.setInteractive(),e.input.dropZone=i,this}}var aP={resizeController:iP,updateController:rP};Object.assign(Qn.prototype,aP);class Bd{constructor(i,e){this.container=null,this._deltaHeight=0,this.setParent(i)}setParent(i){this.parent=i,this.parentContainer=i.getParentContainer()}destroy(i){i===void 0&&(i=!1),i||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(i){return i?(this.container&&this.container.destroy(),this.container=i,this.parentContainer.add(i),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var i=this.container;return this.container=null,this.parentContainer.remove(i),i}else return null}setXY(i,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,i,e),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(i){i==null&&(i=0);var e=this.parent;this._deltaHeight===0&&i!==0?e.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&i===0&&e.nonZeroDeltaHeightCount--;var v=this._deltaHeight!==i;if(this._deltaHeight=i,v){e.resetTotalRowsHeight();var t=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(t,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(i){this.deltaHeight=i}setDeltaHeight(i){return this.deltaHeight=i,this}setDeltaWidth(i){return this.deltaHeight=i,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(i){this.scrollMode!==1&&this.setDeltaHeight(i-this.parent.defaultCellHeight)}setHeight(i){return this.height=i,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(i){this.scrollMode!==0&&this.setDeltaHeight(i-this.parent.defaultCellHeight)}setWidth(i){return this.width=i,this}get scene(){return this.parentContainer.scene}}Object.assign(Bd.prototype,bf);const ks=Phaser.Utils.Objects.GetValue,oP=Phaser.Utils.Array.SpliceOne;class hP{constructor(i,e){this.parent=i,this.cells=[],this.cellPool=new _e,this.resetFromJSON(e)}resetFromJSON(i){return this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(ks(i,"cellHeight",30)),this.setDefaultCellWidth(ks(i,"cellWidth",30)),this.initCells(ks(i,"cellsCount",0)),this.setColumnCount(ks(i,"columns",1)),this}destroy(i){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(i){return this.defaultCellHeight=i,this}setDefaultCellWidth(i){return this.defaultCellWidth=i,this}initCells(i){var e=this.cells;e.length=i;for(var v=0;v<i;v++)e[v]=null;return this}insertNewCells(i,e){var v=this.cells;if(i===v.length){var t=i+e;v.legth=t;for(var s=i;s<t;s++)v[s]=null}else{var u=[];u.length=e;for(var s=0;s<e;s++)u[s]=null;this.cells.splice(i,0,...u)}return this.resetTotalRowsHeight(),this}removeCells(i,e){for(var v=i+e,t=i;t<v;t++)this.freeCell(t);return v===this.cells.length?this.cells.length=i:(e===1?oP(this.cells,i):this.cells.splice(i,e),this.buildCellIndex(i)),this.resetTotalRowsHeight(),this}setColumnCount(i){return this.colCount=i,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(i){return i>=0&&i<this.cells.length}heightToRowIndex(i,e){if(this.defaultCellHeightMode){var n=i/this.defaultCellHeight;return e?n=Math.ceil(n):n=Math.floor(n),n}for(var v=this.rowCount,t=i,s,u,n=0;;)if(u=this.getRowHeight(n),t-=u,s=n>=0&&n<v,t>0&&s)n+=1;else{if(t===0)return n;if(e){var a=n;n+=1,s=n>=0&&n<v,s||(n=a)}return n}}widthToColIndex(i,e){var v=i/this.defaultCellWidth;return e?v=Math.ceil(v):v=Math.floor(v),v}colRowToCellIndex(i,e){return i>=this.colCount?null:e*this.colCount+i}rowIndexToHeight(i,e){if(this.defaultCellHeightMode)return(e-i+1)*this.defaultCellHeight;for(var v,t=0,s=i;s<=e;s++)v=this.getRowHeight(s),t+=v;return t}colIndexToWidth(i,e){return(e-i+1)*this.defaultCellWidth}getRowHeight(i){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,i));for(var v=0,t,s=0;s<e;s++)t=this.getCellHeight(this.colRowToCellIndex(s,i)),v<t&&(v=t);return v}getColWidth(i){return this.defaultCellWidth}getCellHeight(i){if(!this.isValidCellIdx(i))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var v=this.getCell(i,!1),t=v?v.deltaHeight:0;e=this.defaultCellHeight+t}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(i){return i%this.colCount}cellIndxeToRowIndex(i){return Math.floor(i/this.colCount)}getCell(i,e){if(!this.isValidCellIdx(i))return null;if(e===void 0&&(e=!0),this.cells[i]===null&&e){var v=this.newCell(i);this.cells[i]=v}return this.cells[i]}newCell(i){var e=this.cellPool.pop();return e===null?e=new Bd(this):e.setParent(this),e.index=i,e}buildCellIndex(i){i===void 0&&(i=0);for(var e=this.cells,v,t=i,s=e.length;t<s;t++)v=e[t],v&&(v.index=t);return this}getParentContainer(){return this.parent}freeCell(i){return typeof i=="number"&&(i=this.cells[i]),i?(i.destroy(),this.cellPool.push(i),this):this}}var lP=function(m){var i=this.table,e=this.topTableOY,v=this.bottomTableOY,t=m>this.topTableOY,s=m<this.bottomTableOY;if(this.clampTableOXY){var u=i.rowCount,n=i.heightToRowIndex(this.instHeight,!0);u<n?m=0:t?m=e:s&&(m=v)}return this._tableOY!==m&&(this._tableOY=m),t&&(this.execeedTopState||this.emit("execeedtop",this,m,e)),this.execeedTopState=t,s&&(this.execeedBottomState||this.emit("execeedbottom",this,m,v)),this.execeedBottomState=s,this},uP=function(m){var i=this.table,e=this.leftTableOX,v=this.rightTableOX,t=m>this.leftTableOX,s=m<this.rightTableOX;if(this.clampTableOXY){var u=i.colCount,n=i.widthToColIndex(this.instWidth,!0);u<n?m=0:t?m=e:s&&(m=v)}return this._tableOX!==m&&(this._tableOX=m),t&&(this.execeedLeftState||this.emit("execeedleft",this,m,e)),this.execeedLeftState=t,s&&(this.execeedRightState||this.emit("execeedright",this,m,v)),this.execeedRightState=s,this},Nd=function(m){return m.hasOwnProperty("geometryMask")?m.geometryMask:m.bitmapMask};const fP=Phaser.Geom.Intersects.RectangleToRectangle,dP=Phaser.Geom.Rectangle.Overlaps;var vP=function(m,i,e){if(!!i){e===void 0&&(e=m.getAllChildren());for(var v=m.getBounds(),t=Nd(i),s,u,n,a=0,o=e.length;a<o;a++)if(s=e[a],!s.hasOwnProperty("isRexContainerLite")&&s!==t&&!!cP(s))if(s.getBounds)switch(u=s.getBounds(u),n=pP(v,u),n){case 4:gP(m,s);break;case 0:fP(v,u)||dP(v,u)?Wr(m,s,i):mP(m,s);break;default:Wr(m,s,i);break}else Wr(m,s,i)}},cP=function(m){for(;;){var i=m.rexContainer;if(i)if(i.visible){var e=i.parent;if(e){m=e;continue}else return!0}else return!1;else return m.visible}},pP=function(m,i){var e=0,v=i.top,t=i.bottom,s=i.left,u=i.right;return e+=m.contains(s,v)?1:0,e+=m.contains(s,t)?1:0,e+=m.contains(u,v)?1:0,e+=m.contains(u,t)?1:0,e},gP=function(m,i,e){m.setChildMaskVisible(i,!0),i.clearMask&&i.clearMask()},Wr=function(m,i,e){m.setChildMaskVisible(i,!0),i.setMask&&i.setMask(e)},mP=function(m,i,e){m.setChildMaskVisible(i,!1),i.clearMask&&i.clearMask()};const Hr=Phaser.Utils.Objects.GetValue,xP={update:0,everyTick:1};var Gd={setupChildrenMask(m){return m===!1?this:(this.setMaskUpdateMode(Hr(m,"updateMode",0)),this.enableChildrenMask(Hr(m,"padding",0)),this.setMaskLayer(Hr(m,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(m){return typeof m=="string"&&(m=xP[m]),this.maskUpdateMode=m,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(m){var i=ls.call(this,null,this,0,m);return this.childrenMask=i.createGeometryMask(),this},setMaskChildrenFlag(m){return m===void 0&&(m=!0),this.maskChildrenFlag=m,this},setMaskLayer(m){return this.maskLayer=m,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):vP(this,this.childrenMask,this.getAllChildren(),this.maskLayer),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var m=Nd(this.childrenMask);return m.setPosition().resize(),this.resetChildPositionState(m),this}},Vd=function(m){if(this.emit("cellinvisible",m),this.cellContainersPool){var i=m.popContainer();i&&this.cellContainersPool.killAndHide(i)}m.destroyContainer()},jl=function(){var m=this.preVisibleCells,i=this.visibleCells;m.iterate(function(e){i.contains(e)||Vd.call(this,e)},this)},bd=function(m){var i=null,e=m.getContainer();if(e?(i=e,m.popContainer()):this.cellContainersPool&&(i=this.cellContainersPool.getFirstDead(),i!==null&&i.setActive(!0).setVisible(!0)),this.emit("cellvisible",m,i,this),this.cellContainersPool){var e=m.getContainer();e?i===null?this.cellContainersPool.add(e):i!==e&&(this.cellContainersPool.add(e),this.cellContainersPool.killAndHide(i)):i!==null&&this.cellContainersPool.killAndHide(i)}},yP=function(){if(this.cellsCount!==0){var m=this.table,i=m.heightToRowIndex(-this.tableOY);i<=0&&(i=0);var e=i,v=m.widthToColIndex(-this.tableOX);v<=0&&(v=0);for(var t=v,s=m.colRowToCellIndex(t,e),u=this.bottomBound,n=this.rightBound,a=m.cellsCount-1,o=m.colCount-1,r=TP.call(this,t),h=r,d=EP.call(this,e);d<u&&s<=a;){if(this.table.isValidCellIdx(s)){var l=m.getCell(s,!0);this.visibleCells.set(l),this.preVisibleCells.contains(l)||bd.call(this,l),this.scrollMode===0?l.setXY(h,d):l.setXY(d,h)}h<n&&t<o?(h+=m.getColWidth(t),t+=1):(h=r,d+=m.getRowHeight(e),t=v,e+=1),s=m.colRowToCellIndex(t,e)}}},TP=function(m){var i=this.scrollMode===0?this.topLeftX:this.topLeftY,e=this.tableOX+this.table.colIndexToWidth(0,m-1)+i;return e},EP=function(m){var i=this.scrollMode===0?this.topLeftY:this.topLeftX,e=this.tableOY+this.table.rowIndexToHeight(0,m-1)+i;return e},SP=function(m){return m===void 0&&(m=!1),m&&(kl.call(this),jl.call(this)),kl.call(this),yP.call(this),jl.call(this),this.setMaskChildrenFlag(),this},kl=function(){var m=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=m,this.visibleCells.clear()},CP=function(m){var i=this.table.getCell(m,!1);return i&&this.visibleCells.contains(i)},zd=function(m,i){i-=this.y+this.topLeftY,m-=this.x+this.topLeftX;var e=this.tableOY-(this.scrollMode===0?i:m),v=this.tableOX-(this.scrollMode===0?m:i),t=this.table,s=t.heightToRowIndex(-e),u=t.widthToColIndex(-v),n=t.colRowToCellIndex(u,s);return n===null||!this.isCellVisible(n)?null:n},PP=function(m,i){var e=zd.call(this,m,i);if(e!==null)return this.getCellContainer(e)},RP=function(m,i){return this.visibleCells.each(m,i),this},MP=function(m,i){return this.visibleCells.iterate(m,i),this},AP=function(m,i){return this.table.cells.slice().forEach(m,i),this},OP=function(m,i){return this.table.cells.forEach(m,i),this},LP=function(m){var i=this.cellsCount;return i===m?this:(i>m?this.removeCells(m,i-m):this.insertNewCells(i,m-i),this)};const FP=Phaser.Math.Clamp;var IP=function(m,i){return typeof m=="object"&&(m=m.index),i===void 0&&(i=1),i<=0?this:(m=FP(m,0,this.cellsCount),this.table.insertNewCells(m,i),this)},wP=function(m,i){if(typeof m=="object"&&(m=m.index),i===void 0&&(i=1),m<0&&(i+=m,m=0),i<=0)return this;if(m>this.cellsCount)return this;for(var e,v=m,t=m+i;v<t;v++)e=this.getCell(v,!1),e&&(this.visibleCells.contains(e)&&(Vd.call(this,e),this.visibleCells.delete(e)),this.preVisibleCells.delete(e));return this.table.removeCells(m,i),this},DP=function(m){return this.table.colCount===m?this:(this.table.setColumnCount(m),this)},BP=function(m,i){return this.setCellsCount(m*i),this.table.setColumnCount(m),this},NP=function(m){var i=this.table.getCell(m,!1);return!i||!i.container?this:(bd.call(this,i),this)},Ud={setTableOY:lP,setTableOX:uP,updateTable:SP,isCellVisible:CP,pointToCellIndex:zd,pointToCellContainer:PP,eachVisibleCell:RP,iterateVisibleCell:MP,eachCell:AP,iterateCell:OP,setCellsCount:LP,insertNewCells:IP,removeCells:wP,setColumnCount:DP,setGridSize:BP,updateVisibleCell:NP};Object.assign(Ud,Gd);const GP=Phaser.GameObjects.Group,ql=Phaser.Structs.Set,ie=Phaser.Utils.Objects.GetValue;class Yd extends le{constructor(i,e,v,t,s,u){u===void 0&&(u={}),super(i,e,v,t,s),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new ql,this.preVisibleCells=new ql,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var n=ie(u,"reuseCellContainer",!1);n&&(this.cellContainersPool=new GP(i));var a=ie(u,"cellVisibleCallback",null);if(a!==null){var o=ie(u,"cellVisibleCallbackScope",void 0);this.on("cellvisible",a,o)}if(a=ie(u,"cellInvisibleCallback",null),a!==null){var o=ie(u,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",a,o)}if(this.setupChildrenMask(ie(u,"mask",void 0)),this.setScrollMode(ie(u,"scrollMode",0)),this.setClampMode(ie(u,"clamplTableOXY",!0)),this.scrollMode===0){var r=ie(u,"cellWidth",void 0);if(this.expandCellSize=r===void 0,r===void 0){var h=ie(u,"columns",1);u.cellWidth=this.width/h}}else{var r=ie(u,"cellHeight",void 0),d=ie(u,"cellWidth",void 0);this.expandCellSize=r===void 0,u.cellWidth=r,u.cellHeight=d}this.table=new hP(this,u),this.updateTable()}destroy(i){!this.scene||(this.destroyChildrenMask(),this.table.destroy(i),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(i))}setScrollMode(i){return typeof i=="string"&&(i=VP[i.toLowerCase()]),this.scrollMode=i,this}setClampMode(i){return i===void 0&&(i=!0),this.clampTableOXY=i,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(i){this.setTableOY(i).updateTable()}set tableOX(i){this.setTableOX(i).updateTable()}setTableOXY(i,e){return this.setTableOY(e).setTableOX(i),this}addTableOY(i){return this.setTableOY(this.tableOY+i),this}addTableOX(i){return this.setTableOX(this.tableOX+i),this}addTableOXY(i,e){return this.addTableOY(e).addTableOX(i),this}setTableOYByPercentage(i){return this.setTableOY(-this.tableVisibleHeight*i),this}getTableOYPercentage(){var i=this.tableVisibleHeight;return i===0?0:this.tableOY/-i}set t(i){this.setTableOYByPercentage(i).updateTable()}get t(){return this.getTableOYPercentage()}getCell(i){return this.table.getCell(i,!0)}getCellContainer(i){var e=this.table.getCell(i,!1),v;return e&&(v=e.getContainer()),v}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(i,e){var v;return typeof i=="number"?v=this.table.getCell(i,!0):v=i,v.height=e,this}setCellWidth(i,e){var v;return typeof i=="number"?v=this.table.getCell(i,!0):v=i,v.width=e,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var i=this.tableHeight-this.instHeight;return i<0&&(i=0),i}get tableVisibleWidth(){var i,e=this.tableWidth,v=this.instWidth;return e>v?i=e-v:i=0,i}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(i,e){return this.width===i&&this.height===e?this:(super.resize(i,e),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}}Object.assign(Yd.prototype,Ud);const VP={v:0,vertical:0,h:1,horizontal:1};var bP=function(m){Object.defineProperty(m,"childOY",{configurable:!0,get:function(){return m.tableOY},set:function(i){m.tableOY=i}}),Object.defineProperty(m,"topChildOY",{get:function(){return m.topTableOY}}),Object.defineProperty(m,"bottomChildOY",{get:function(){return m.bottomTableOY}}),Object.defineProperty(m,"childVisibleHeight",{get:function(){return m.instHeight}}),Object.defineProperty(m,"childHeight",{get:function(){return m.tableHeight}})},zP=function(m){m.on("cellvisible",function(i,u,v){var t=this.createCellContainerCallback,s=this.createCellContainerCallbackScope;i.item=this.items[i.index];var u;s?u=t.call(s,i,u,v):u=t(i,u,v),u&&(u.setOrigin&&u.setOrigin(0),u.isRexSizer&&u.layout()),i.item=void 0,i.setContainer(u)},this)},Pe=function(m,i,e,v,t,s,u){var n;if(t===void 0?n=v:n=e.pointToCellIndex(v,t),n!=null){var a=e.getCellContainer(n);a&&m.emit(i,a,n,s,u)}},UP=function(m,i){m.on("pointerdown",function(e,v,t,s){Pe(this.eventEmitter,"cell.down",m,e.x,e.y,e,s)},this).on("pointerup",function(e,v,t,s){Pe(this.eventEmitter,"cell.up",m,e.x,e.y,e,s)},this)},YP=function(m,i){m.on("pointermove",_l,this).on("pointerover",_l,this).on("pointerout",XP,this)},_l=function(m,i,e,v){var t=this.childrenMap.child,s=t.pointToCellIndex(m.x,m.y);if(s!==t.input.lastOverCellIndex){var u=t.input.lastOverCellIndex;t.input.lastOverCellIndex=s,Pe(this.eventEmitter,"cell.out",t,u,void 0,m,v),Pe(this.eventEmitter,"cell.over",t,s,void 0,m,v)}},XP=function(m,i){var e=this.childrenMap.child,v=e.input.lastOverCellIndex;e.input.lastOverCellIndex=void 0,Pe(this.eventEmitter,"cell.out",e,v,void 0,m,i)};const WP=Phaser.Utils.Objects.GetValue;var HP=function(m,i){var e=WP(i,"click",void 0);e!==!1&&(e===void 0&&(e={}),e.threshold=10,m._click=new Wi(m,e),m._click.on("click",function(v,t,s,u){Pe(this.eventEmitter,"cell.click",t,s.x,s.y,s,u)},this))};const $P=Phaser.Utils.Objects.GetValue;var JP=function(m,i){var e=$P(i,"tap",void 0);e!==!1&&(m._tap=new zn(m,e),m._tap.on("tap",function(v,t,s){var u=`cell.${v.tapsCount}tap`;Pe(this.eventEmitter,u,v.gameObject,v.x,v.y,s)},this))};const KP=Phaser.Utils.Objects.GetValue;var ZP=function(m,i){var e=KP(i,"press",void 0);e!==!1&&(m._press=new Un(m,e),m._press.on("pressstart",function(v,t,s){Pe(this.eventEmitter,"cell.pressstart",m,v.x,v.y,s)},this).on("pressend",function(v,t,s){Pe(this.eventEmitter,"cell.pressend",m,v.x,v.y,s)},this))};const QP=Phaser.Utils.Objects.GetValue;var jP=function(m,i){var e=QP(i,"swipe",void 0);e!==!1&&(e===void 0&&(e={}),e.dir="4dir",m._swipe=new Es(m,e),m._swipe.on("swipe",function(v,t,s){var u=v.left?"left":v.right?"right":v.up?"up":"down";Pe(this.eventEmitter,`cell.swipe${u}`,m,v.x,v.y,s)},this))},kP=function(m,i){m.setInteractive(),UP.call(this,m,i),YP.call(this,m,i),HP.call(this,m,i),JP.call(this,m,i),ZP.call(this,m,i),jP.call(this,m,i)},qP=function(m){m===void 0?this.items.length=0:this.items=m;var i=this.childrenMap.child;return i.setCellsCount(this.items.length),i.updateTable(!0),this.resizeController(),this};const Ee=Phaser.Utils.Objects.GetValue;class Ao extends Qn{constructor(i,e){e===void 0&&(e={});var v=Zn(e),t=Ee(e,"table",void 0);t===void 0&&(t={}),t.scrollMode=v,t.clamplTableOXY=Ee(e,"clamplChildOY",!1);var s=Ee(t,"width",void 0),u=Ee(t,"height",void 0),n=new Yd(i,0,0,s,u,t);i.add.existing(n);var a,o;v===0?(a=s===void 0?1:0,o=u===void 0):(a=u===void 0?1:0,o=s===void 0),bP(n),e.type="rexGridTable",e.child={gameObject:n,proportion:a,expand:o};var r=Ee(e,"space",void 0);r&&(r.child=r.table),super(i,e),this.addChildrenMap("table",n),this.addChildrenMap("tableLayer",n.maskLayer),this.eventEmitter=Ee(e,"eventEmitter",this);var h=Ee(e,"createCellContainerCallback",ne),d=Ee(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(h,d),zP.call(this,n),this.resizeControllerFlag=!1;var l=v===0?"cellheightchange":"cellwidthchange";n.on(l,function(){this.resizeControllerFlag=!0},this),Ee(t,"interactive",!0)&&kP.call(this,n,t),this.setItems(Ee(e,"items",[])),i.game.events.on("poststep",this.onPostStep,this)}destroy(i){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(i))}setCreateCellContainerCallback(i,e){return this.createCellContainerCallback=i,this.createCellContainerCallbackScope=e,this}refresh(){return this.setItems(this.items),this}getCell(i){var e=this.childrenMap.child;return e.getCell(i)}getCellContainer(i){var e=this.childrenMap.child;return e.getCellContainer(i)}updateVisibleCell(i){var e=this.childrenMap.child;return e.updateVisibleCell(i)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var _P={setItems:qP};Object.assign(Ao.prototype,_P);et.register("gridTable",function(m){var i=new Ao(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.GridTable",Ao);var tR=function(m,i){this.collapseSubMenu();var e;this.root.toggleOrientation?e=this.orientation===0?1:0:e=this.orientation;var v=new this.constructor(this.scene,{items:i,orientation:e,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:m});return this.pin(v),this.childrenMap.subMenu=v,this.root.emit("expand",v,m,this),this},ca=function(m,i){return m.sameOrientation?m.orientation=i.orientation:m.orientation=i.orientation===0?1:0,m},eR=function(){return this.root.emit("collapse",this,this.parentButton,this.root),this.scaleDownDestroy(ca(this.root.easeOut,this)),this.collapseSubMenu(),this},iR=function(){if(this.childrenMap.subMenu===void 0)return this;var m=this.childrenMap.subMenu;return this.childrenMap.subMenu=void 0,this.remove(m),m.collapse(),this},sR={expandSubMenu:tR,collapse:eR,collapseSubMenu:iR},nR=function(m,i,e,v){var t;return e&&(i.scene=m,v?t=e.call(v,i):t=e(i),i.scene=void 0),t},rR=function(m,i,e,v){var t,s=[],u;if(i&&e)for(var n=0,a=i.length;n<a;n++)t=i[n],t.scene=m,v?u=e.call(v,t,n,i):u=e(t,n,i),t.scene=void 0,s.push(u);return s},aR=function(m){m.on(m.root.expandEventName,function(i,e){if(!this._isPassedEvent){var v=this.items[e].children;v&&this.expandSubMenu(i,v)}},m).on("button.click",function(i,e,v,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",i,e,v,t),this.root._isPassedEvent=!1)},m).on("button.over",function(i,e,v,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",i,e,v,t),this.root._isPassedEvent=!1)},m).on("button.out",function(i,e,v,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",i,e,v,t),this.root._isPassedEvent=!1)},m)};const Se=Phaser.Utils.Objects.GetValue;class Oo extends re{constructor(i,e){e===void 0&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1);var v=e._rootMenu,t=e._parentMenu,s=e._parentButton,u=Se(e,"items",void 0),n=Se(e,"createBackgroundCallback",void 0),a=Se(e,"createBackgroundCallbackScope",void 0);e.background=nR(i,u,n,a);var o=Se(e,"createButtonCallback",void 0),r=Se(e,"createButtonCallbackScope",void 0);e.buttons=rR(i,u,o,r),super(i,e),this.type="rexMenu",this.items=u,this.root=v===void 0?this:v,this.parentMenu=t,this.parentButton=s;var h=this.root===this;if(h){var d=e.bounds;d===void 0&&(d=nd(i)),this.bounds=d,this.subMenuSide=[this.y<d.centerY?ga:vn,this.x<d.centerX?pa:dn];var l=Se(e,"subMenuSide",void 0);l!==void 0&&(typeof l=="string"&&(l=oR[l]),this.subMenuSide[this.orientation]=l),this.toggleOrientation=Se(e,"toggleOrientation",!1),this.expandEventName=Se(e,"expandEvent","button.click"),this.easeIn=tu(this,Se(e,"easeIn",0)),this.easeOut=tu(this,Se(e,"easeOut",0)),this.createBackgroundCallback=n,this.createBackgroundCallbackScope=a,this.createButtonCallback=o,this.createButtonCallbackScope=r,this._isPassedEvent=!1}var f=0,c=0;if(!this.root.easeIn.sameOrientation){var g=ca(this.root.easeIn,this).orientation,p=t?t.orientation:this.orientation,l=this.root.subMenuSide[p];g===0&&l===dn&&(f=1),g===1&&l===vn&&(c=1)}if(this.setOrigin(f,c).layout(),!h){this.setScale(this.root.scaleX,this.root.scaleY);var l=this.root.subMenuSide[t.orientation];switch(l){case dn:this.alignTop(s.top).alignRight(s.left);break;case pa:this.alignTop(s.top).alignLeft(s.right);break;case vn:this.alignLeft(s.left).alignBottom(s.top);break;case ga:this.alignLeft(s.left).alignTop(s.bottom);break}}this.pushIntoBounds(this.root.bounds),aR(this),this.popUp(ca(this.root.easeIn,this)),this.once("popup.complete",function(){this!==this.root&&this.root.emit("popup.complete",this)},this)}isInTouching(i){return super.isInTouching(i)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(i):!1}}var tu=function(m,i){return typeof i=="number"&&(i={duration:i}),i.hasOwnProperty("orientation")&&i.orientation!==void 0?i.sameOrientation=To(i.orientation)===m.orientation:i.sameOrientation=!0,i};const dn=2,pa=0,vn=3,ga=1,oR={up:vn,down:ga,left:dn,right:pa};Object.assign(Oo.prototype,sR);et.register("menu",function(m){var i=new Oo(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.Menu",Oo);const hR=Phaser.GameObjects.Text;var Lo=function(m){return m instanceof hR};const lR=Phaser.GameObjects.BitmapText;var Xd=function(m){return m instanceof lR};const jt=0,ae=1,oe=2;var Cs=function(m){var i;return Xd(m)?i=oe:Lo(m)?i=jt:i=ae,i},Fo=function(m,i,e){var v=Cs(m);switch(v){case jt:e=m.getWrappedText(i);break;case ae:e=m.getPenManager(i,e);break;case oe:m.maxWidth>0?e=m.setText(i).getTextBounds().wrappedText.split(`
`):e=i.split(`
`);break}return e},uR=function(m,i){m===void 0&&(m=this.startLineIndex),i===void 0&&(i=m+this.pageLinesCount);var e;switch(this.textObjectType){case jt:case oe:e=this.lines.slice(m,i).join(`
`);break;case ae:var v=this.lines.getLineStartIndex(m),t=this.lines.getLineEndIndex(i-1);e=this.lines.getSliceTagText(v,t,!0);break}return e},$r=function(m){return Array.isArray(m)?m=m.join(`
`):typeof m=="number"&&(m=m.toString()),m},fR={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(e){var i=this.totalLinesCount;this.sections.push($r(e));var e=this.sections.join(`
`);this.lines=Fo(this.parent,e,this.lines);for(var v=this.totalLinesCount-i,t=Math.ceil(v/this.pageLinesCount),s=0;s<t;s++)this.pageStartIndexes.push(i+s*this.pageLinesCount);return this},setText(m,i){i===void 0&&(i=!0),i&&this.resetPageIdx(),this.clearText();for(var e=$r(m).split(this.pageBreak),v=0,t=e.length;v<t;v++)this.appendPage(e[v]);return this},appendText(m){var i=this.content+$r(m);return this.setText(i,!1),this}};const dR=Phaser.Math.Clamp;var vR={getPage(m){return m===void 0&&(m=this.pageIndex),this.setPageIndex(m).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(m){return m=dR(m,0,this.pageCount-1),this.pageIndex=m,this.startLineIndex=this.pageStartIndexes[m],this.endLineIndex=this.pageStartIndexes[m+1],this}},Io=function(m,i){var e=Cs(m);switch(e){case jt:var s=m.style,v=s.wordWrapWidth,t=s.wordWrapCallback;s.wordWrapWidth=0,s.wordWrapCallback=void 0,m.setText(i),s.wordWrapWidth=v,s.wordWrapCallback=t;break;case ae:var s=m.style,u=s.wrapMode;s.wrapMode=0,m.setText(i),s.wrapMode=u;break;case oe:var n=m._maxWidth;m._maxWidth=0,m.setText(i),m._maxWidth=n;break}},cR={showPage(m){return this.displayText(this.getPage(m)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(m){Io(this.parent,m)}},Wd={getLines:uR};Object.assign(Wd,fR,vR,cR);const is=Phaser.Utils.Objects.GetValue,pR=Phaser.Math.Clamp;class Hd extends zt{constructor(i,e){super(i,{eventEmitter:!1}),this.textObjectType=Cs(this.parent),this.pageStartIndexes=[],this.lines=Fo(this.parent,""),this.sections=[],this.resetFromJSON(e)}resetFromJSON(i){return this.setMaxLines(is(i,"maxLines",void 0)),this.setPageBreak(is(i,"pageBreak",`\f
`)),this.setText(is(i,"text","")),this.setStartLineIndex(is(i,"start",0)),this.setPageIndex(is(i,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(i){if(!this.isShutdown){switch(this.textObjectType){case jt:this.lines.length=0;break;case ae:this.lines.destroy();break;case oe:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(i)}}setMaxLines(i){return this.maxLines=i,this}setPageBreak(i){return this.pageBreak=i,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(i){i=pR(i,0,this.totalLinesCount-1),this._startLineIndex=i}setStartLineIndex(i){return this.startLineIndex=i,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var i;switch(this.textObjectType){case jt:case ae:var e=this.parent.style.maxLines;e>0?i=e:i=this.totalLinesCount;break;case oe:i=this.totalLinesCount;break}return i}get content(){return this.sections.join(this.pageBreak)}}Object.assign(Hd.prototype,Wd);var gR=function(m,i){var e=Cs(m);switch(e){case jt:m.style.syncFont(m.canvas,m.context),i=m.runWordWrap(i);break;case ae:i=m.getText(i,void 0,void 0,!0);break;case oe:i=m.setText(i).getTextBounds().wrappedText;break}return i};const Li=Phaser.Utils.Objects.GetFastValue,Jr=Phaser.Utils.Objects.GetValue;class mR extends zt{constructor(i,e){super(i,e),this.timer=null,this.resetFromJSON(e)}resetFromJSON(i){this.setTextWrapEnable(Jr(i,"wrap",!1)),this.setTypeMode(Jr(i,"typeMode",0)),this.setTypeSpeed(Jr(i,"speed",333)),this.setTextCallback=Li(i,"setTextCallback",null),this.setTextCallbackScope=Li(i,"setTextCallbackScope",null),this.setTypingContent(Li(i,"text","")),this.typingIdx=Li(i,"typingIdx",0),this.insertIdx=Li(i,"insertIdx",null);var e=Li(i,"elapsed",null);return e!==null&&this.start(void 0,void 0,this.typingIdx,e),this}shutdown(i){this.isShutdown||(this.freeTimer(),super.shutdown(i))}setTypeMode(i){return typeof i=="string"&&(i=xR[i]),this.typeMode=i,this}setTypeSpeed(i){return this.speed=i,this}setTextWrapEnable(i){return i===void 0&&(i=!0),this.textWrapEnable=i,this}set text(i){var e=eu(i);this.textWrapEnable&&(e=gR(this.parent,e)),this._text=e}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(i,e,v,t){return i!==void 0&&this.setTypingContent(i),e!==void 0&&(this.speed=e),v===void 0&&(v=0),this.typingIdx=v+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(t)),this}appendText(i){var e=this.text.concat(eu(i));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(i){var e=this.getTimer();return e&&this.freeTimer(),i&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var i=this.getTimer();return i&&(i.paused=!0),this}resume(){var i=this.getTimer();return i&&(i.paused=!1),this}setTypingContent(i){return this.text=i,this.textLen=this.getTextLength(this.text),this}onTyping(){var i=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(i),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(i,e,v,t){var s;if(t===0){var u=0,n=e;this.insertIdx=n,s=this.getSubString(i,u,n)}else if(t===1){var n=v,u=n-e;this.insertIdx=0,s=this.getSubString(i,u,n)}else if(t===2){var a=v/2,u=Math.floor(a-e/2),n=u+e;this.insertIdx=e%2?e:0,s=this.getSubString(i,u,n)}else if(t===3){var o=Math.floor(e/2),r;if(o>0){var n=v,u=n-o;r=this.getSubString(i,u,n)}else r="";var h=e-o,d;if(h>0){var u=0,n=u+h;this.insertIdx=n,d=this.getSubString(i,u,n)}else d="",this.insertIdx=0;s=d+r}return s}startTimer(i){this.timer&&this.freeTimer();var e;return i===void 0?e=0:e=i,this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(i){this.setTextCallback&&(this.setTextCallbackScope?i=this.setTextCallback.call(this.setTextCallbackScope,i,this.isLastChar,this.insertIdx):i=this.setTextCallback(i,this.isLastChar,this.insertIdx)),this.textWrapEnable?Io(this.parent,i):this.parent.setText(i)}getTextLength(i){var e=this.parent,v;return e.getPlainText?v=e.getPlainText(i).length:v=i.length,v}getSubString(i,e,v){var t=this.parent,s;return t.getSubString?s=t.getSubString(i,e,v):s=i.slice(e,v),s}}var eu=function(m){return Array.isArray(m)?m=m.join(`
`):typeof m=="number"&&(m=m.toString()),m};const xR={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},iu=Phaser.Utils.Objects.GetValue;class $d extends $n{constructor(i,e){e===void 0&&(e={text:yR(i)}),super(i,e),this.type="rexTextBox";var v=this.childrenMap.text;this.page=new Hd(v,iu(e,"page",void 0)),this.typing=new mR(v,iu(e,"type",void 0)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=v.width,this.textHeight=v.height}start(i,e){return this.page.setText(i),e!==void 0&&this.setTypeSpeed(e),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var i=this.page.getNextPage();this.typing.start(i)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(i){return this.typing.stop(i),this}setTypeSpeed(i){return this.typing.setTypeSpeed(i),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var i=this.childrenMap.text;(this.textWidth!==i.width||this.textHeight!==i.height)&&(this.textWidth=i.width,this.textHeight=i.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}}var yR=function(m){return m.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})};et.register("textBox",function(m){var i=new $d(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.TextBox",$d);const Qt=Phaser.Utils.Objects.GetValue;class Jd extends Ot{constructor(i,e){super(i,e),this.type="rexNumberBar";var v=Qt(e,"background",void 0),t=Qt(e,"icon",void 0),s=Qt(e,"iconMask",void 0),u=Qt(e,"slider",void 0),n=Qt(e,"text",void 0),a=Qt(e,"space.icon",0),o=Qt(e,"space.slider",0);if(v&&this.addBackground(v),t){var r;this.orientation===0?(u||n)&&(r={right:a}):(u||n)&&(r={bottom:a}),this.add(t,{proportion:0,align:"center",padding:r}),s&&(s=ls.call(this,t,t,1))}var h;if(u){u.orientation=this.orientation,u.eventEmitter=this,u.value=null,u.hasOwnProperty("input")||(u.input=-1),h=new Ss(i,u),i.add.existing(h);var r;this.orientation===0?n&&(r={right:o}):n&&(r={bottom:o});var d;if(this.orientation===0){var l=Qt(u,"width",void 0);d=l===void 0?1:0}else{var f=Qt(u,"height",void 0);d=f===void 0?1:0}this.add(h,{proportion:d,align:"center",padding:r})}n&&this.add(n),this.addChildrenMap("background",v),this.addChildrenMap("icon",t),this.addChildrenMap("iconMask",s),this.addChildrenMap("slider",h),this.addChildrenMap("text",n);var c=Qt(e,"valuechangeCallback",null);if(c!==null){var g=Qt(e,"valuechangeCallbackScope",void 0);this.on("valuechange",c,g)}this.setEnable(Qt(e,"enable",void 0)),this.setValue(Qt(e,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(i){this.childrenMap.slider&&this.childrenMap.slider.setEnable(i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(i){!this.childrenMap.slider||(this.childrenMap.slider.value=i)}setValue(i,e,v){return this.childrenMap.slider&&this.childrenMap.slider.setValue(i,e,v),this}addValue(i,e,v){return this.childrenMap.slider&&this.childrenMap.slider.addValue(i,e,v),this}getValue(i,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(i,e):0}easeValueTo(i,e,v){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(i,e,v),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(i),this}setEaseValueFunction(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(i),this}get text(){var i=this.childrenMap.text;if(i===void 0)return"";var e;return i.text?e=i.text:e=i.getData("text"),e}set text(i){var e=this.childrenMap.text;e!==void 0&&(e.setText?e.setText(i):e.setData("text",i))}setText(i){return this.text=i,this}}et.register("numberBar",function(m){var i=new Jd(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.NumberBar",Jd);et.register("scrollBar",function(m){var i=new Mo(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.ScrollBar",Mo);const Kr=Phaser.Utils.Objects.GetValue,su={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class Kd extends ei{constructor(i,e){super(i,e),this.type="rexBadge";var v=Kr(e,"background",void 0);v&&this.addBackground(v),this.addChildrenMap("background",v);var t=Kr(e,"main",void 0);t&&this.add(t,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",t);for(var s in su){var u=Kr(e,s,void 0);u&&(this.add(u,{key:s,align:su[s],expand:!1}),this.addChildrenMap(s,u))}}}et.register("badgeLabel",function(m){var i=new Kd(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.BadgeLabel",Kd);const TR=ei.prototype.add;var nu=function(m,i,e,v,t,s,u,n,a){return m.setVisible(!1),TR.call(this,m,i,e,v,t,s,u,n,a),this},ER={add:nu,addPage:nu},SR=function(m){return m===void 0?null:this.sizerChildren.hasOwnProperty(m)?this.sizerChildren[m]:null};const ru=le.prototype.setChildVisible;var CR=function(m){this._previousKey=this._currentKey;var i=this.previousPage;i&&(this.swapMode===0?(ru.call(this,i,!1),this.emit("pageinvisible",i,this._previousKey,this)):i.destroy()),m&&!this.sizerChildren.hasOwnProperty(m)&&this.emit("createpage",m,this),this._currentKey=m;var e=this.currentPage;return e&&(ru.call(this,e,!0),this.emit("pagevisible",e,this._currentKey,this)),this},Zd={getPage:SR,swapPage:CR};Object.assign(Zd,ER);const PR=Phaser.Utils.Objects.GetValue;class wo extends ei{constructor(i,e){super(i,e),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(PR(e,"swapMode",0))}setSwapMode(i){return typeof i=="string"&&(i=RR[i]),this.swapMode=i,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(i){this.swapPage(i)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(wo.prototype,Zd);const RR={invisible:0,destroy:1};et.register("pages",function(m){var i=new wo(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.Pages",wo);var MR=function(m){return m!==void 0&&(this.text=m),this.lines=Fo(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},Qd=function(m){return(m-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},jd=function(m){return m*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},AR=function(m){var i=m+this.visibleLinesCount,e;switch(this.textObjectType){case jt:e=this.lines.slice(m,i).join(`
`);break;case ae:var v=this.lines.getLineStartIndex(m),t=this.lines.getLineEndIndex(i-1);e=this.lines.getSliceTagText(v,t,!0);break;case oe:e=this.lines.slice(m,i).join(`
`);break}return e},kd=function(){var m=this.textObject.rexSizer;this.textObject.y+=m.offsetY-m.preOffsetY,m.preOffsetY=m.offsetY,this.resetChildPositionState(this.textObject)},OR=function(){var m=Math.max(Math.floor(Qd.call(this,-this.textOY)),0),i=jd.call(this,m)+this.textOY,e=AR.call(this,m);return Io(this.textObject,e),this.textObject.rexSizer.offsetY=i,kd.call(this),this},LR=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,xs.call(this),this},FR=function(m,i,e){if(e+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===i&&this._textObjectRealHeight===e)){switch(this.textObjectWidth=i,this._textObjectRealHeight=e,this.textObjectType){case jt:case ae:m.setFixedSize(i,e);var v=m.style,t=Math.max(i,0);this.textObjectType===jt?v.wordWrapWidth=t:(v.wrapMode===0&&(v.wrapMode=1),v.wrapWidth=t);break;case oe:m.setMaxWidth(i);break}this.setText()}},IR=function(){var m,i,e,v=this.left,t=this.top,s,u,n,a;m=this.textObject,m.rexSizer.hidden||(i=m.rexSizer,e=i.padding,s=v+e.left,u=t+e.top,n=this.width-e.left-e.right,a=this.height-e.top-e.bottom,FR.call(this,m,n,a),Bn(m,s,u,n,a,i.align),i.preOffsetY=0,kd.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},wR={setText:MR,updateTextObject:OR,preLayout:LR,layoutChildren:IR};const au=Phaser.Utils.Objects.IsPlainObject,se=Phaser.Utils.Objects.GetValue,DR=Phaser.Display.Align.TOP_LEFT;class qd extends gi{constructor(i,e,v,t,s,u){au(e)?(u=e,e=se(u,"x",0),v=se(u,"y",0),t=se(u,"width",void 0),s=se(u,"height",void 0)):au(t)&&(u=t,t=se(u,"width",void 0),s=se(u,"height",void 0)),super(i,e,v,t,s,u),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=se(u,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(se(u,"clamplTextOY",!0)),this.alwaysScrollable=se(u,"alwaysScrollable",!1);var n=se(u,"background",void 0),a=se(u,"text",void 0);a===void 0&&(a=BR(i));var o=se(u,"textMask",!0);n&&this.addBackground(n),this.add(a),this.sizerChildren=[a];var r=this.getSizerConfig(a);r.align=DR,r.padding=Xi(0),r.expand=!0,this.textObject=a,this.textObjectType=Cs(a),r.preOffsetY=0,r.offsetY=0,o&&(this.textMask=ls.call(this,this.textObject,this)),this.addChildrenMap("background",n),this.addChildrenMap("text",a)}destroy(i){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case jt:this.lines.length=0;break;case ae:this.lines.destroy();break;case oe:this.lines.length=0;break}this.lines=void 0}super.destroy(i)}}setClampMode(i){return i===void 0&&(i=!0),this.clampTextOY=i,this}get textLineHeight(){if(this._textLineHeight===void 0){var i;switch(this.textObjectType){case jt:case ae:var e=this.textObject.style;i=e.metrics.fontSize+e.strokeThickness;break;case oe:var v=this.textObject.fontSize/this.textObject.fontData.size;i=this.textObject.fontData.lineHeight*v;break}this._textLineHeight=i}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var i;switch(this.textObjectType){case jt:case ae:i=this.textObject.lineSpacing;break;case oe:i=0;break}this._textLineSpacing=i}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(Qd.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=jd.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var i=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&i<0&&(i=0),this._textVisibleHeight=i}return this._textVisibleHeight}textOYExceedTop(i){return i===void 0&&(i=this.textOY),i>this.topTextOY}textOYExeceedBottom(i){return i===void 0&&(i=this.textOY),i<this.bottomTextOY}get textOY(){return this._textOY}set textOY(i){var e=this.topTextOY,v=this.bottomTextOY,t=this.textOYExceedTop(i),s=this.textOYExeceedBottom(i);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?i=0:t?i=e:s&&(i=v)),this._textOY!==i&&(this._textOY=i,this.updateTextObject()),t&&(this.execeedTopState||this.emit("execeedtop",this,i,e)),this.execeedTopState=t,s&&(this.execeedBottomState||this.emit("execeedbottom",this,i,v)),this.execeedBottomState=s}setTextOY(i){return this.textOY=i,this}set t(i){this.textOY=-this.textVisibleHeight*i}get t(){var i=this.textVisibleHeight;return i===0?0:this.textOY/-i}setTextOYByPercentage(i){return this.t=i,this}}var BR=function(m){return m.add.text(0,0,"")};Object.assign(qd.prototype,wR);var NR=function(m){Object.defineProperty(m,"childOY",{configurable:!0,get:function(){return m.textOY},set:function(i){m.textOY=i}}),Object.defineProperty(m,"topChildOY",{get:function(){return m.topTextOY}}),Object.defineProperty(m,"bottomChildOY",{get:function(){return m.bottomTextOY}}),Object.defineProperty(m,"childVisibleHeight",{get:function(){return m.textObjectHeight}}),Object.defineProperty(m,"childHeight",{get:function(){return m.textHeight}})},GR=function(m){var i=this.childrenMap.child;return i.setText(m),this.resizeController(),this},VR=function(m){return this.setText(this.text+m),this};const Xe=Phaser.Utils.Objects.GetValue;class Do extends Qn{constructor(i,e){e===void 0&&(e={});var v=Xe(e,"text",void 0),t=Xe(e,"textWidth",void 0),s=Xe(e,"textHeight",void 0),u=Xe(e,"textMask",!0),n=Xe(e,"content",""),a=new qd(i,{width:t,height:s,text:v,textMask:u,content:n,clamplTextOY:Xe(e,"clamplChildOY",!1),alwaysScrollable:Xe(e,"alwaysScrollable",!1)});i.add.existing(a);var o=t===void 0?1:0,r=s===void 0;NR(a),e.scrollMode=0,e.type="rexTextArea",e.child={gameObject:a,proportion:o,expand:r};var h=Xe(e,"space",void 0);h&&(h.child=h.text),super(i,e),this.addChildrenMap("text",v)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var bR={setText:GR,appendText:VR};Object.assign(Do.prototype,bR);et.register("textArea",function(m){var i=new Do(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.TextArea",Do);var zR=function(){if(this.rexSizer.hidden)return 0;var m,i=this.child,e=i.rexSizer;return e.hidden?m=0:this.scrollMode===0?m=this.getChildWidth(i):m=0,m},UR=function(){if(this.rexSizer.hidden)return 0;var m,i=this.child,e=i.rexSizer;return e.hidden||this.scrollMode===0?m=0:m=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:gt(i),m},YR=function(m){return m===void 0&&(m=[]),this.child&&this.child.isRexSizer&&m.push(this.child),m},XR=function(){var m=this.left,i=this.top;this.scrollMode===0?i+=this.childOY:m+=this.childOY,this.child.setPosition(m,i),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},WR=function(){var m=this.child,i,e;m.rexSizer.hidden||(this.scrollMode===0?i=this.width:e=this.height,m.isRexSizer?m.runLayout(this,i,e):je(m,i,e),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},_d={getChildrenWidth:zR,getChildrenHeight:UR,getChildrenSizers:YR,resetChildPosition:XR,layoutChildren:WR};Object.assign(_d,Gd);const ou=Phaser.Utils.Objects.IsPlainObject,ve=Phaser.Utils.Objects.GetValue,HR=Phaser.Display.Align.TOP_LEFT;class tv extends gi{constructor(i,e,v,t,s,u){ou(e)?(u=e,e=ve(u,"x",0),v=ve(u,"y",0),t=ve(u,"width",void 0),s=ve(u,"height",void 0)):ou(t)&&(u=t,t=ve(u,"width",void 0),s=ve(u,"height",void 0)),super(i,e,v,t,s,u),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(ve(u,"scrollMode",!0)),this.setClampMode(ve(u,"clamplChildOY",!0));var n=ve(u,"child",void 0),a=ve(u,"expand",!0);n.setOrigin&&n.setOrigin(0),this.add(n),this.sizerChildren=[n];var o=this.getSizerConfig(n);o.align=HR,o.expand=a,this.child=n,this.setupChildrenMask(ve(u,"mask",void 0))}destroy(i){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(i))}setScrollMode(i){return typeof i=="string"&&(i=Dd[i.toLowerCase()]),this.scrollMode=i,this}setClampMode(i){return i===void 0&&(i=!0),this.clampChildOY=i,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?gt(this.child):St(this.child)}get childWidth(){return this.scrollMode===0?St(this.child):gt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var i=this.childHeight-this.childVisibleHeight;return i<0&&(i=0),i}childOYExceedTop(i){return i===void 0&&(i=this.childOY),i>this.topChildOY}childOYExeceedBottom(i){return i===void 0&&(i=this.childOY),i<this.bottomChildOY}get childOY(){return this._childOY}set childOY(i){var e=this.topChildOY,v=this.bottomChildOY,t=this.childOYExceedTop(i),s=this.childOYExeceedBottom(i);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?i=0:t?i=e:s&&(i=v)),this._childOY!==i&&(this._childOY=i,this.resetChildPosition()),t&&(this.execeedTopState||this.emit("execeedtop",this,i,e)),this.execeedTopState=t,s&&(this.execeedBottomState||this.emit("execeedbottom",this,i,v)),this.execeedBottomState=s}setChildOY(i){return this.childOY=i,this}set t(i){this.childOY=-this.visibleHeight*i}get t(){var i=this.visibleHeight;return i===0?0:this.childOY/-i}setChildOYByPercentage(i){return this.t=i,this}}Object.assign(tv.prototype,_d);const ss=Phaser.Utils.Objects.GetValue;class ev extends Qn{constructor(i,e){e===void 0&&(e={});var v=Zn(e),t=ss(e,"panel",void 0);t===void 0&&(t={}),t.scrollMode=v,t.clamplChildOY=ss(e,"clamplChildOY",!1);var s=new tv(i,t);i.add.existing(s);var u=ss(t,"width",void 0),n=ss(t,"height",void 0),a,o;v===0?(a=u===void 0?1:0,o=n===void 0):(a=n===void 0?1:0,o=u===void 0),e.type="rexScrollablePanel",e.child={gameObject:s,proportion:a,expand:o};var r=ss(e,"space",void 0);r&&(r.child=r.panel),super(i,e),this.addChildrenMap("panel",s.child),this.addChildrenMap("panelLayer",s.maskLayer)}setChildrenInteractive(i){return i===void 0&&(i={}),i.hasOwnProperty("eventEmitter")||(i.eventEmitter=this),i.hasOwnProperty("targets")||(i.targets=[this.childrenMap.panel]),ho(this.childrenMap.child,i),this}}et.register("scrollablePanel",function(m){var i=new ev(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.ScrollablePanel",ev);var qs={popUp:function(m,i){m.popUp(i)},scaleDown:function(m,i){m.scaleDown(i)},fadeIn:function(m,i){m.fadeIn(i)},fadeOut:function(m,i){m.fadeOut(i)}},iv=function(m,i,e,v){e===void 0&&(e=0),v===void 0&&(v=i.length),m.length=v-e;for(var t=0,s=m.length;t<s;t++)m[t]=i[t+e];return m};const cn=Phaser.Utils.Objects.GetValue;var ma=function(m,i,e){var v=cn(e,"reverse",!1),t;if(he(m[0]))if(v)for(var u=m.length,s=u-1;s>=0;s--)t=ma(m[s],i,e);else for(var s=0,u=m.length;s<u;s++)t=ma(m[s],i,e);else t=$R(m,i,e);return t},$R=function(m,i,e){var v=cn(e,"argsConvert",void 0),t=cn(e,"argsConvertScope",void 0),s=m[0];if(We=iv(We,m,1),v){v===!0&&(v=$f,t=void 0);for(var u=0,n=We.length;u<n;u++)t?We[u]=v.call(t,We[u],m):We[u]=v(We[u],m)}var a;typeof s=="string"?(a=i[s],a==null&&(a=cn(i,s,null))):a=s;var o=a.apply(i,We);return o},We=[];const ce=Phaser.Utils.Objects.GetValue;class JR extends zt{constructor(i,e){super(i,e);var v=ce(e,"clock",void 0);v||(v=new qf(i)),this.clock=v,this.clock.on("update",this.update,this),this.resetFromJSON(e)}resetFromJSON(i){return this.clock.resetFromJSON(ce(i,"clock",void 0)),this.state=ce(i,"state",0),this.commands=ce(i,"commands",[]),this.scope=ce(i,"scope",void 0),this.setTimeUnit(ce(i,"timeUnit",0)),this.setDtMode(ce(i,"dtMode",0)),this.index=ce(i,"index",0),this.nextTime=ce(i,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(i){this.isShutdown||(this.clock.shutdown(i),this.commands=void 0,super.shutdown(i))}load(i,e,v){this.stop();var t=ce(v,"timeUnit",void 0);t!==void 0&&this.setTimeUnit(t);var s=ce(v,"dtMode",void 0);return s!==void 0&&this.setDtMode(s),i=i.filter(function(u){var n=u[0];return!isNaN(n)}).map(function(u){var n=u[0];return typeof n=="string"&&(u[0]=parseFloat(u[0])),u}),this.dtMode===0&&i.sort(function(u,n){var a=u[0],o=n[0];return a>o?1:a<o?-1:0}),this.commands=i,this.scope=e,this}start(i){return i===void 0&&(i=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(i),this.update(i),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(i){return this.clock.seek(i),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(i){this.clock.timeScale=i}setTimeScale(i){return this.timeScale=i,this}get now(){return this.clock.now}update(i){if(this.nextTime>i)return this;for(var e=this.commands.length-1;;){var v=this.commands[this.index],t=v[1];if(he(t)||(t=iv(KR,v,1)),ma(t,this.scope),this.emit("runcommand",t,this.scope),this.index===e)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>i)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(i){var e=this.commands[this.index][0];return this.timeUnit===1&&(e=e*1e3),this.dtMode===1&&(e+=i),e}setDtMode(i){return typeof i=="string"&&(i=QR[i]),this.dtMode=i,this}setTimeUnit(i){return typeof i=="string"&&(i=ZR[i]),this.timeUnit=i,this}}var KR=[];const ZR={ms:0,s:1,sec:1},QR={abs:0,absolute:0,inc:1,increment:1},ns=Phaser.Utils.Objects.GetValue;class sv extends $n{constructor(i,e){e===void 0&&(e={text:createDefaultTextObject(i)}),super(i,e),this.type="rexToast",this.setTransitInTime(ns(e,"duration.in",200)),this.setDisplayTime(ns(e,"duration.hold",1200)),this.setTransitOutTime(ns(e,"duration.out",200)),this.setTransitInCallback(ns(e,"transitIn",He.popUp)),this.setTransitOutCallback(ns(e,"transitOut",He.scaleDown)),this.player=new JR(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(i){!this.scene||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(i))}setDisplayTime(i){return this.displayTime=i,this}setTransitOutTime(i){return this.transitOutTime=i,this}setTransitInTime(i){return this.transitInTime=i,this}setTransitInCallback(i){switch(typeof i=="string"&&(i=He[i]),i){case He.popUp:i=qs.popUp;break;case He.fadeIn:i=qs.fadeIn;break}return i||(i=ne),this.transitInCallback=i,this}setTransitOutCallback(i){switch(typeof i=="string"&&(i=He[i]),i){case He.scaleDown:i=qs.scaleDown;break;case He.fadeOut:i=qs.fadeOut;break}return i||(i=ne),this.transitOutCallback=i,this}setScale(i,e){return e===void 0&&(e=i),this.scaleX0=i,this.scaleY0=e,super.setScale(i,e),this}showMessage(i){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),i===void 0){if(this.messages.length===0)return this;i=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(i),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof i=="string"?this.setText(i):i(this),this.layout();var e=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[ne]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[ne]]];return this.player.load(e,this).once("complete",function(){this.showMessage()},this).start(),this}}const He={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};et.register("toast",function(m){var i=new sv(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.Toast",sv);var jR=function(){return function(m,i,e,v){i!=="panel"&&e.setChildVisible(m,!0)}},kR=function(){return function(m,i,e,v){i!=="panel"&&e.setChildVisible(m,!1)}},qR={show:jR,hide:kR},_R=function(m,i){return i===void 0&&(i=1),function(e,v,t,s){v!=="panel"&&t.fadeChild(e,s?0:m,i)}},tM=function(m,i){return i===void 0&&(i=0),function(e,v,t,s){v!=="panel"&&t.fadeChild(e,s?0:m,i)}},eM={show:_R,hide:tM},hu=function(m,i){return function(e,v,t,s){v!=="panel"&&t.moveChild(e,s?0:m,i)}},iM={show:hu,hide:hu},lu=function(m,i){return function(e,v,t,s){v==="panel"&&t.moveChild(e,s?0:m,i)}},sM={show:lu,hide:lu};const Zr={visible:qR,fade:eM,move:iM,"move-panel":sM};var nM=function(m){var i,e;[i,...e]=typeof m=="string"?[m]:m;var v,t;return Zr.hasOwnProperty(i)?(v=Zr[i].show.apply(null,e),t=Zr[i].hide.apply(null,e)):(v=ne,t=ne),{show:v,hide:t}},rM={showChild(m,i){var e=this.sizerChildren[m];return e&&(this.emit("showchild",e,m,this,i),this.resetChildState(e)),this},hideChild(m,i){var e=this.sizerChildren[m];return e&&(this.emit("hidechild",e,m,this,i),this.resetChildState(e)),this},swapChild(m,i){return this.currentChildKey===m||(this.currentChildKey==="panel"||m==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=m,this.hideChild(this.previousChildKey,i),this.showChild(this.currentChildKey,i)):(this.swapChild("panel",i),this.swapChild(m,i))),this},showPanel(m){return this.swapChild("panel",m),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var m=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(m),this},toggleRightSide(){var m=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(m),this},toggleTopSide(){var m=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(m),this},toggleBottomSide(){var m=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(m),this}};const aM=le.prototype.setChildVisible;var oM={setChildVisible(m,i){var e;if(typeof m=="string"){var e=m;m=this.sizerChildren[e]}else e=Wn(this.sizerChildren,m);return i===void 0&&(i=this.currentChildKey===e),aM.call(this,m,i),this}},hM={fadeChild(m,i,e){var v;return typeof m=="string"?(v=m,m=this.sizerChildren[v]):v=Wn(this.sizerChildren,m),i===void 0&&(i=500),e===void 0&&(e=this.currentChildKey===v?1:0),m.fadeIn(i,{start:m.alpha,end:e}),this},fadeChildPromise(m,i,e){return typeof m=="string"&&(m=this.sizerChildren[key]),this.fadeChild(m,i,e),m._fade?Bt(m._fade):Promise.resolve()}},lM={moveChild(m,i,e,v){var t;typeof m=="string"?(t=m,m=this.sizerChildren[t]):t=Wn(this.sizerChildren,m),i===void 0&&(i=500);var s=this.currentChildKey===t;if(v===void 0)switch(t){case"leftSide":case"rightSide":v=St(m);break;case"topSide":case"bottomSide":v=gt(m);break;default:if(s)switch(this.previousChildKey){case"leftSide":case"rightSide":v=St(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":v=gt(this.sizerChildren[this.previousChildKey]);break;default:v=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":v=St(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":v=gt(this.sizerChildren[this.currentChildKey]);break;default:v=0;break}break}var u,n,a,o;if(s)switch(t){case"panel":switch(this.previousChildKey){case"leftSide":u=!0;break;case"rightSide":n=!0;break;case"topSide":a=!0;break;case"bottomSide":o=!0;break}break;case"leftSide":n=!0;break;case"rightSide":u=!0;break;case"topSide":o=!0;break;case"bottomSide":a=!0;break}else switch(t){case"panel":switch(this.currentChildKey){case"leftSide":n=!0;break;case"rightSide":u=!0;break;case"topSide":o=!0;break;case"bottomSide":a=!0;break}break;case"leftSide":u=!0;break;case"rightSide":n=!0;break;case"topSide":a=!0;break;case"bottomSide":o=!0;break}return u?m.moveTo(i,`-=${v}`,void 0,e):n?m.moveTo(i,`+=${v}`,void 0,e):a?m.moveTo(i,void 0,`-=${v}`,e):o?m.moveTo(i,void 0,`+=${v}`,e):m.moveTo(0),this},moveChildPromise(m,i,e,v){return typeof m=="string"&&(m=this.sizerChildren[key]),this.moveChild(m,i,e,v),m._easeMove?Bt(m._easeMove):Promise.resolve()}},nv={};Object.assign(nv,oM,hM,lM);const Jt=Phaser.Utils.Objects.GetValue;class Bo extends ei{constructor(i,e){super(i,e),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var v=Jt(e,"showChildCallback",void 0);if(v)if(Vn(v)){var t=Jt(e,"showChildCallbackScope",void 0);this.on("showchild",v,t);var s=Jt(e,"hideChildCallback",void 0),u=Jt(e,"hideChildCallbackScope",void 0);this.on("hidechild",s,u)}else{var n=nM(v);this.on("showchild",n.show),this.on("hidechild",n.hide)}var a=Jt(e,"background",void 0),o=Jt(e,"panel",void 0),r=Jt(e,"leftSide",void 0),h=Jt(e,"rightSide",void 0),d=Jt(e,"topSide",void 0),l=Jt(e,"bottomSide",void 0);if(a&&this.addBackground(a),o&&this.add(o,"panel","center",0,!0),r){var f=Jt(e,"expand.left",!0);this.add(r,"leftSide","left-top",0,{height:f})}if(h){var f=Jt(e,"expand.right",!0);this.add(h,"rightSide","right-top",0,{height:f})}if(d){var f=Jt(e,"expand.top",!0);this.add(d,"topSide","left-top",0,{width:f})}if(l){var f=Jt(e,"expand.bottom",!0);this.add(l,"bottomSide","left-bottom",0,{width:f})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Bo.prototype,rM,nv);et.register("sides",function(m){var i=new Bo(this.scene,m);return this.scene.add.existing(i),i});it(window,"RexPlugins.UI.Sides",Bo);const uM=Phaser.GameObjects.GameObject;var Ps=function(m){return m instanceof uM};et.register("click",function(m,i){return Ps(m)||(i=m,m=this.scene),new Wi(m,i)});it(window,"RexPlugins.UI.Click",Wi);et.register("tap",function(m,i){return Ps(m)||(i=m,m=this.scene),new zn(m,i)});it(window,"RexPlugins.UI.Tap",zn);et.register("press",function(m,i){return Ps(m)||(i=m,m=this.scene),new Un(m,i)});it(window,"RexPlugins.UI.Press",Un);et.register("swipe",function(m,i){return Ps(m)||(i=m,m=this.scene),new Es(m,i)});it(window,"RexPlugins.UI.Swipe",Es);et.register("pan",function(m,i){return Ps(m)||(i=m,m=this.scene),new gd(m,i)});it(window,"RexPlugins.UI.Pan",gd);var rv=function(m){for(var i=m.scene.input,e=i.manager,v=e.pointersTotal,t=e.pointers,s,u=0;u<v;u++)if(s=t[u],!(!s.primaryDown||i.getDragState(s)!==0||!If(m,s)))return i.setDragState(s,1),i._drag[s.id]=[m],i.dragDistanceThreshold===0||i.dragTimeThreshold===0?(i.setDragState(s,3),i.processDragStartList(s)):i.setDragState(s,2),!0;return!1};const _s=Phaser.Utils.Objects.GetValue,uu=Phaser.Math.Distance.Between,fu=Phaser.Math.RotateAroundDistance;class av extends zt{constructor(i,e){super(i,{eventEmitter:!1}),this._enable=void 0,i.setInteractive(_s(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.setEnable(_s(i,"enable",!0)),this.setAxisMode(_s(i,"axis",0)),this.setAxisRotation(_s(i,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var i=this.parent;i.on("dragstart",this.onDragStart,this),i.on("drag",this.onDrag,this),i.on("dragend",this.onDragEnd,this)}shutdown(i){this.isShutdown||(this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragend(),this._enable=i,this.scene.input.setDraggable(this.parent,i),this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(i){return typeof i=="string"&&(i=fM[i]),this.axisMode=i,this}setAxisRotation(i){return this.axisRotation=i,this}drag(){return rv(this.parent),this}dragend(){if(!!this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(i,e,v){this.isDragging||(this.pointer=i)}onDrag(i,e,v){if(this.pointer===i){var t=this.parent;if(this.axisMode===0)t.x=e,t.y=v;else if(this.axisRotation===0)this.axisMode===1?t.x=e:this.axisMode===2&&(t.y=v);else{var s,u={x:e,y:v};s=uu(u.x,u.y,t.x,t.y),u=fu(u,t.x,t.y,-this.axisRotation,s),this.axisMode===1?u.y=t.y:this.axisMode===2&&(u.x=t.x),s=uu(u.x,u.y,t.x,t.y),u=fu(u,t.x,t.y,this.axisRotation,s),t.x=u.x,t.y=u.y}}}onDragEnd(i,e,v,t){this.pointer===i&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const fM={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};et.register("drag",function(m,i){return new av(m,i)});it(window,"RexPlugins.UI.Drag",av);et.register("pinch",function(m){return new md(this.scene,m)});it(window,"RexPlugins.UI.Pinch",md);et.register("rotate",function(m){return new oo(this.scene,m)});it(window,"RexPlugins.UI.Rotate",oo);const dM=Phaser.Utils.Objects.IsPlainObject,du=Phaser.Utils.Objects.GetValue;var vu=function(m,i,e){var v;if(m===void 0)m=e.texture.key,i=e.frame.name;else if(dM(m)){var t=m;m=du(t,"key",e.texture.key),i=du(t,"frame",e.frame.name)}else typeof m=="string"||(v=m);return v===void 0&&(v=function(s){s.setTexture(m,i)}),v};const rs=Phaser.Utils.Objects.GetValue,vM=Phaser.Utils.Objects.GetAdvancedValue,cM=Phaser.Math.Linear;class ov extends Yi{constructor(i,e){super(i,e),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setDuration(vM(i,"duration",500)),this.setEase(rs(i,"ease","Sine")),this.setOrientation(rs(i,"orientation",0)),this.setFrontFace(rs(i,"front",void 0)),this.setBackFace(rs(i,"back",void 0)),this.setFace(rs(i,"face",0)),this}setOrientation(i){return typeof i=="string"&&(i=pM[i]),this.orientation=i,this}get face(){return this._face}set face(i){typeof i=="string"&&(i=gM[i]),this._face=i,i===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):i===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(i){return this.face=i,this}toggleFace(){var i=this.face===0?1:0;return this.setFace(i),this}setFrontFace(i,e){return this.frontFaceCallback=vu(i,e,this.parent),this}setBackFace(i,e){return this.backFaceCallback=vu(i,e,this.parent),this}start(){return this.timer.isRunning?this:(this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this)}flip(i){return this.isRunning?this:(i!==void 0&&this.setDuration(i),this.start(),this)}updateGameObject(i,e){e.justRestart&&this.toggleFace();var v=e.t;e.isOddIteration&&(v=1-v),v=this.easeFn(v);var t=cM(1,0,v);this.orientation===0?i.scaleX=t:i.scaleY=t}}const pM={x:0,horizontal:0,y:1,vertical:1},gM={front:0,back:1};et.register("flip",function(m,i){return new ov(m,i)});it(window,"RexPlugins.UI.Flip",ov);et.register("shake",function(m,i){return new no(m,i)});it(window,"RexPlugins.UI.Shake",no);et.register("touchEventStop",function(m,i){return new go(m,i)});it(window,"RexPlugins.UI.TouchEventStop",go);const hv=Phaser.Math.Vector3,mM=Phaser.Math.Matrix4;var cu=new hv,pu=new hv,gu=new mM,xM=function(m,i,e,v,t,s,u){i===void 0&&(i=0),e===void 0&&(e=0),v===void 0&&(v=0),t===void 0&&(t=0),s===void 0&&(s=0),u===void 0&&(u=0),cu.set(i,e,v),pu.set(t,s,u),gu.fromRotationXYTranslation(pu,cu,!0);for(var n=0,a=m.vertices.length;n<a;n++)m.vertices[n].transformMat4(gu)};const yM=Phaser.GameObjects.Mesh,TM=Phaser.Utils.Objects.IsPlainObject,ui=Phaser.Utils.Objects.GetValue,EM=Phaser.Geom.Mesh.GenerateGridVerts,Qr=Phaser.Math.RadToDeg,pn=Phaser.Math.DegToRad,lv=45,SM=1+1/Math.sin(pn(lv));class CM extends yM{constructor(i,e,v,t,s,u){TM(e)&&(u=e,e=ui(u,"x",0),v=ui(u,"y",0),t=ui(u,"key",null),s=ui(u,"frame",null)),super(i,e,v,t,s),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(SM),this.hideCCW=ui(u,"hideCCW",!0);var n=ui(u,"gridWidth",32),a=ui(u,"gridHeight",n);this.resetVerts(n,a)}resetPerspective(){return this.setPerspective(this.width,this.height,lv),this}resetVerts(i,e){if(i!==void 0&&(this.gridWidth=i),e!==void 0&&(this.gridHeight=e),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var v=this.frame.cutWidth,t=this.frame.cutHeight;return EM({mesh:this,texture:this.texture.key,frame:this.frame.name,width:v/this.height,height:t/this.height,widthSegments:Math.ceil(v/this.gridWidth),heightSegments:Math.ceil(t/this.gridHeight),flipY:this.frame.source.isRenderTexture}),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(i){this.modelRotation.x=i}get angleX(){return Qr(this.rotationX)}set angleX(i){this.rotationX=pn(i)}get rotationY(){return this.modelRotation.y}set rotationY(i){this.modelRotation.y=i}get angleY(){return Qr(this.rotationY)}set angleY(i){this.rotationY=pn(i)}get rotationZ(){return this.modelRotation.z}set rotationZ(i){this.modelRotation.z=i}get angleZ(){return Qr(this.rotationZ)}set angleZ(i){this.rotationZ=pn(i)}transformVerts(i,e,v,t,s,u){return xM(this,i,e,v,t,s,u),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(i){for(var e=this.vertices,v=0,t=e.length;v<t;v++)e[v].color=i}setTint(i){return this.tint=i,this}}const PM=Phaser.GameObjects.RenderTexture,RM=Phaser.Utils.Objects.IsPlainObject,tn=Phaser.Utils.Objects.GetValue;class MM extends CM{constructor(i,e,v,t,s,u){RM(e)&&(u=e,e=tn(u,"x",0),v=tn(u,"y",0),t=tn(u,"width",32),s=tn(u,"height",32));var n=new PM(i,e,v,t,s).setOrigin(.5);super(i,e,v,n.texture.key,null,u),this.type="rexPerspectiveRenderTexture",this.rt=n}destroy(i){super.destroy(i),this.rt.destroy(),this.rt=null}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Utils.Objects.IsPlainObject;const AM=Phaser.Math.DegToRad;AM(180);Phaser.Utils.Objects.GetValue;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const mu=Phaser.Geom.Rectangle,OM=Phaser.Geom.Rectangle.Union;var LM=function(m,i){i===void 0?i=new mu:i===!0&&(jr===void 0&&(jr=new mu),i=jr);for(var e,v=!0,t=0,s=m.length;t<s;t++)e=m[t],e.getBounds&&(fi=e.getBounds(fi),v?(i.setTo(fi.x,fi.y,fi.width,fi.height),v=!1):OM(fi,i,i));return i},fi,jr,Fi=Phaser.Utils.Objects.GetValue,FM=function(m){var i=m.gameObjects,e=m.renderTexture;if(i.length===0)return e&&e.setSize(1,1).clear(),e;var v=Fi(m,"x",void 0),t=Fi(m,"y",void 0),s=Fi(m,"width",void 0),u=Fi(m,"height",void 0),n=Fi(m,"originX",0),a=Fi(m,"originY",0),o,r;if(s===void 0||u===void 0||v===void 0||t===void 0){var h=LM(i,!0),d=v!==void 0&&t!==void 0;d?(s=Math.max(v-h.left,h.right-v)*2,u=Math.max(t-h.top,h.bottom-t)*2,n=.5,a=.5):(v=h.x,t=h.y,s=h.width,u=h.height,n=0,a=0),o=h.x,r=h.y}else o=v+(0-n)*s,r=t+(0-a)*u;if(e)e.setPosition(v,t),(e.width!==s||e.height!==u)&&e.setSize(s,u);else{var l=i[0].scene;e=l.add.renderTexture(v,t,s,u)}return e.setOrigin(n,a),e.camera.setScroll(o,r),i=mn(ci(i)),e.draw(i),e};const IM=le.prototype.add,wM=Phaser.Utils.Objects.GetValue;class uv extends MM{constructor(i,e){var v=i.scene;super(v,i.x,i.y,1,1,e),v.add.existing(this),this.setVisible(!1),IM.call(i,this),this.visibleSibling=[],this.perspectiveState=!1,this.useParentBounds=wM(e,"useParentBounds",!1),this.boot()}boot(){this.rexContainer.parent.once("destroy",this.onParentDestroy,this)}destroy(i){!this.scene||(this.exit(),this.rexContainer.parent.off("destroy",this.onParentDestroy,this),super.destroy(i))}onParentDestroy(i,e){this.destroy(e)}enter(){this.exit();var i=this.rexContainer.parent;return FM({gameObjects:i.getAllVisibleChildren(),renderTexture:this.rt,x:this.x,y:this.y,width:this.useParentBounds?i.displayWidth:void 0,height:this.useParentBounds?i.displayHeighth:void 0,originX:this.useParentBounds?i.originX:void 0,originY:this.useParentBounds?i.originY:void 0}),this.syncSize(),i.setChildVisible(this,!0),i.children.forEach(function(e){e!==this&&(i.setChildVisible(e,!1),this.visibleSibling.push(e))},this),this.perspectiveState=!0,this}exit(){var i=this.rexContainer.parent;return this.visibleSibling.forEach(function(e){i.setChildVisible(e,!0)},this),this.visibleSibling.length=0,i.setChildVisible(this,!1),this.perspectiveState=!1,this}}et.register("perspective",function(m,i){return new uv(m,i)});it(window,"RexPlugins.UI.Perspective",uv);et.register("anchor",function(m,i){return new so(m,i)});it(window,"RexPlugins.UI.Anchor",so);const Be=Phaser.Utils.Objects.GetValue;var DM=function(m,i){i===void 0&&(i={});var e=m.scene,v=m.style,t=Be(i,"backgroundColor",v.backgroundColor);t===null&&(t="transparent"),i.text=Be(i,"text",m.text),i.fontFamily=Be(i,"fontFamily",v.fontFamily),i.fontSize=Be(i,"fontSize",v.fontSize),i.color=Be(i,"color",v.color),i.backgroundColor=t,i.direction=Be(i,"rtl",v.rtl)?"rtl":"ltr",i.align=Be(i,"align",BM(v)),i.direction==="rtl"&&Lo(m)&&(i.align="right");var s=new Ga(e,m.x,m.y,Be(i,"width",m.width),Be(i,"height",m.height),i);return s.setOrigin(m.originX,m.originY),e.add.existing(s),s},BM=function(m){return m.hasOwnProperty("align")?m.align:m.hasOwnProperty("halign")?m.halign:"left"};const en=Phaser.Utils.Objects.GetValue;var Ii=void 0;class NM extends zt{constructor(i){super(i,{eventEmitter:!1}),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0}shutdown(i){this.isShutdown||(this.close(),Ii===this&&(Ii=void 0),super.shutdown(i))}open(i,e){Ii!==void 0&&Ii.close(),Ii=this,Vn(i)&&(e=i,i=void 0),e===void 0&&(e=en(i,"onClose",void 0));var v=en(i,"onOpen",void 0),t=en(i,"onTextChanged",void 0);return this.inputText=DM(this.parent,i).on("textchange",function(s){var u=s.text;t?t(this.parent,u):this.parent.text=u},this).setFocus(),this.parent.setVisible(!1),this.onClose=e,en(i,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),v&&v(this.parent)},[],this),this}close(){return Ii=void 0,this.inputText?(this.parent.setVisible(!0),this.inputText.destroy(),this.inputText=void 0,this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this):this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}var GM=function(m,i,e){return m._edit||(m._edit=new NM(m)),m._edit.open(i,e),m._edit},VM=function(m){var i=function(e){var v=m.padding,t=e-v.left-v.right,s=m.style;return Lo(m)?(s.wordWrapWidth=t,s.maxLines=0):(s.wrapMode===0&&(s.wrapMode=1),s.wrapWidth=t,s.maxLines=0),m.setFixedSize(e,0),m};return i},bM=function(m){var i=function(e){return m.setFixedSize(e,0).runWordWrap(),m};return i},zM=function(m){var i=function(e){return m.setMaxWidth(e),m};return i},UM=function(m){return m instanceof ps},YM=function(m,i){return i===void 0&&(i=0),m._minWidth=i,m.runWidthWrap=UM(m)?bM(m):Xd(m)?zM(m):VM(m),m},XM=function(m,i){return m===void 0&&(m=0),new Promise(function(e,v){setTimeout(function(){e(i)},m)})},WM=function(m,i){var e=m.scene,v=new mo(e,i);return e.add.existing(v),m.isRexContainerLite?m.moveDepthBelow(v):e.children.moveBelow(v,m),v},sn={popUp:function(m,i){ld(m,i)},scaleDown:function(m,i){ud(m,i,void 0,void 0,!1)},fadeIn:function(m,i){Nn(m,i)},fadeOut:function(m,i){Gn(m,i,!1)}};class HM extends Me{constructor(i,e){super(e),this.parent=i,this.init()}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var i=this.parent;i.transitionIn(),i.delayCall(i.transitInTime,this.next,this)}exit_TRANS_OPNE(){var i=this.parent;i.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var i=this.parent,e=i.displayTime;e>=0&&i.delayCall(e,i.requestClose,i),i.onOpen()}exit_OPEN(){var i=this.parent;i.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var i=this.parent;i.transitionOut(),i.delayCall(i.transitOutTime,this.next,this)}exit_TRANS_CLOSE(){var i=this.parent;i.removeDelayCall()}next_CLOSE(){}enter_CLOSE(){var i=this.parent;i.onClose()}exit_CLOSE(){}}const Ne=Phaser.Utils.Objects.GetValue,$M=Phaser.Time.TimerEvent;class JM extends zt{constructor(i,e){super(i,e);var v=Ne(e,"cover");this.cover=v!==!1?WM(i,v):void 0;var t=Ne(e,"manualClose",!0);if(t)this.setDisplayTime(-1);else{this.setDisplayTime(Ne(e,"duration.hold",2e3));var s=Ne(e,"anyTouchClose",!0);s&&this.anyTouchClose()}this.setTransitInTime(Ne(e,"duration.in",200)),this.setTransitOutTime(Ne(e,"duration.out",200)),this.setTransitInCallback(Ne(e,"transitIn",$e.popUp)),this.setTransitOutCallback(Ne(e,"transitOut",$e.scaleDown)),this.destroyParent=Ne(e,"destroy",!0),this.timer=new $M,this._state=new HM(this,{eventEmitter:!1}),this.closeEventData=void 0,this._state.next()}get state(){return this._state.state}shutdown(i){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.requestClose,this),this.cover&&!i&&(this.cover.destroy(),this.cover=void 0),this.transitInCallback=void 0,this.transitOutCallback=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(i))}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.requestClose,this):this.scene.input.once("pointerup",this.requestClose,this),this}transitionIn(){var i=this.transitInTime;this.transitInCallback(this.parent,i);var e=this.cover;return e&&Nn(e,i,e.alpha),this}transitionOut(){var i=this.transitOutTime;this.transitOutCallback(this.parent,i);var e=this.cover;return e&&Gn(e,i,!1),this}onOpen(){this.emit("open",this.parent,this)}onClose(){this.emit("close",this.closeEventData),this.destroyParent?this.parent.destroy():this.destroy()}delayCall(i,e,v){var t=this.scene.events;return this.timer=this.scene.time.delayedCall(i,t.once,["postupdate",e,v],t),this}removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}setTransitInTime(i){return this.transitInTime=i,this}setDisplayTime(i){return this.displayTime=i,this}setTransitOutTime(i){return this.transitOutTime=i,this}setTransitInCallback(i){switch(typeof i=="string"&&(i=$e[i]),i){case $e.popUp:i=sn.popUp;break;case $e.fadeIn:i=sn.fadeIn;break}return i||(i=ne),this.transitInCallback=i,this}setTransitOutCallback(i){switch(typeof i=="string"&&(i=$e[i]),i){case $e.scaleDown:i=sn.scaleDown;break;case $e.fadeOut:i=sn.fadeOut;break}return i==null&&(i=ne),this.transitOutCallback=i,this}requestClose(i){return this._state.state==="OPEN"&&(this.closeEventData=arguments.length>0?i:this.parent,this._state.next()),this}}const $e={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var fv=function(m,i){var e=new JM(m,i);return e.on("open",function(){m.emit("modal.open",e)}),e.on("close",function(v){m.emit("modal.close",v,e)}),m.on("modal.requestClose",e.requestClose,e),e.on("close",function(){m.off("modal.requestClose",e.requestClose,e)}),e},KM=function(m,i){var e=fv(m,i);return new Promise(function(v,t){e.once("close",function(s){v(s)})})},ZM=function(m,i){m.emit("modal.requestClose",i)};class dv extends Phaser.Plugins.ScenePlugin{constructor(i,e){super(i,e),this.add=new et(i)}start(){var i=this.scene.events;i.on("destroy",this.destroy,this)}isInTouching(i,e,v,t){return i.visible?cd(i,e,v,t):!1}get viewport(){return hd(this.scene,!0)}}var QM={getParentSizer:pi,getTopmostSizer:Df,hide:Qe,show:Ze,isShown:ro,edit:GM,wrapExpandText:YM,waitEvent:Kf,waitComplete:Bt,delayPromise:XM,setChildrenInteractive:ho,fadeIn:Nn,fadeOutDestroy:Gn,easeMoveTo:fd,easeMoveFrom:dd,modal:fv,modalPromise:KM,modalClose:ZM,requestDrag:rv};Object.assign(dv.prototype,QM);var jM={type:hn.AUTO,parent:"game",backgroundColor:"#33A5E7",scale:{width:1792,height:896,mode:hn.Scale.RESIZE,autoCenter:hn.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{y:500},debug:!1}},dom:{createContainer:!0},plugins:{scene:[{key:"rexUI",plugin:dv,mapping:"rexUI"}]}},kM=[{LESSON:"1",LETTER:"A",PERSON:"a disabled / an enabler",NOUN:"an ability (of,to)",VERB:"to enable (sth,sb to)",ADJECTIVE:"able (to do sth)","ADVERB/PREP":"ably",NEGATIVE:"disability / inability / unable"},{LESSON:"1",LETTER:"",PERSON:"an arguer",NOUN:"an argument",VERB:"to argue (with)",ADJECTIVE:"arguable","ADVERB/PREP":"arguably",NEGATIVE:"unarguably"},{LESSON:"1",LETTER:"C",PERSON:"a chooser",NOUN:"a choice",VERB:"to choose",ADJECTIVE:"choosy / choosey","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"1",LETTER:"",PERSON:"a combiner",NOUN:"a combination",VERB:"to combine (with)",ADJECTIVE:"combined / combinable","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"1",LETTER:"D",PERSON:"x",NOUN:"a danger (of sth)",VERB:"to endanger",ADJECTIVE:"dangerous (for sb to do sth)","ADVERB/PREP":"dangerously",NEGATIVE:"dangerless"},{LESSON:"1",LETTER:"",PERSON:"x",NOUN:"a decision (on ,about sth, to do sth) / the decisiveness",VERB:"to decide",ADJECTIVE:"decisive","ADVERB/PREP":"decisively",NEGATIVE:"indecisive"},{LESSON:"1",LETTER:"E",PERSON:"x",NOUN:"an effect (on)",VERB:"to effect (\u2260 to affect)",ADJECTIVE:"effective","ADVERB/PREP":"effectively",NEGATIVE:"ineffective"},{LESSON:"1",LETTER:"P",PERSON:"x",NOUN:"proof / provability",VERB:"to prove (prove - proved - proved or proven)",ADJECTIVE:"provable / proven","ADVERB/PREP":"provably / provenly",NEGATIVE:"unprovable / unproven"},{LESSON:"1",LETTER:"R",PERSON:"x",NOUN:"readiness (for sth)",VERB:"to ready",ADJECTIVE:"ready","ADVERB/PREP":"readily",NEGATIVE:"unready"},{LESSON:"1",LETTER:"T",PERSON:"x",NOUN:"the truth / a truth",VERB:"x",ADJECTIVE:"true / truthful","ADVERB/PREP":"truly / truthfully",NEGATIVE:"untrue (statement)/untruthful (person)"},{LESSON:"2",LETTER:"A",PERSON:"x",NOUN:"acceptance",VERB:"to accept",ADJECTIVE:"accepting (of) / acceptive (of) / acceptable","ADVERB/PREP":"acceptably",NEGATIVE:"unacceptable"},{LESSON:"2",LETTER:"",PERSON:"x",NOUN:"the awareness",VERB:"x",ADJECTIVE:"aware (of)","ADVERB/PREP":"x",NEGATIVE:"unaware"},{LESSON:"2",LETTER:"B",PERSON:"a believer",NOUN:"a belief (in)",VERB:"to believe (in)",ADJECTIVE:"believable","ADVERB/PREP":"believably",NEGATIVE:"unbelievable"},{LESSON:"2",LETTER:"",PERSON:"a bore",NOUN:"the boredom",VERB:"to bore",ADJECTIVE:"boring / bored (with)","ADVERB/PREP":"boringly",NEGATIVE:"x"},{LESSON:"2",LETTER:"C",PERSON:"a carer / a care-taker",NOUN:"the care",VERB:"to care (about,for)",ADJECTIVE:"careful","ADVERB/PREP":"carefully / carelessly",NEGATIVE:"careless"},{LESSON:"2",LETTER:"",PERSON:"x",NOUN:"the clarity",VERB:"to clear (sth away) / to clarify",ADJECTIVE:"clear","ADVERB/PREP":"clear / clearly",NEGATIVE:"unclear / unclearly"},{LESSON:"2",LETTER:"E",PERSON:"x",NOUN:"embarrassment / an embarrassment (to sb)",VERB:"to embarrass",ADJECTIVE:"embarrassed (person, about) / embarrassing (thing)","ADVERB/PREP":"embarrassingly",NEGATIVE:"unembarrassed"},{LESSON:"2",LETTER:"F",PERSON:"a foreigner",NOUN:"the foreignness",VERB:"x",ADJECTIVE:"foreign","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"2",LETTER:"G",PERSON:"a governor",NOUN:"a government / governance",VERB:"to govern",ADJECTIVE:"governable / governmental","ADVERB/PREP":"x",NEGATIVE:"non-governmental"},{LESSON:"2",LETTER:"T",PERSON:"a traditionalist",NOUN:"a tradition",VERB:"x",ADJECTIVE:"traditional","ADVERB/PREP":"traditionally",NEGATIVE:"untraditional"},{LESSON:"3",LETTER:"A",PERSON:"an accuser",NOUN:"an accusation",VERB:"to accuse",ADJECTIVE:"accusing/accusatory","ADVERB/PREP":"accusingly",NEGATIVE:"x"},{LESSON:"3",LETTER:"",PERSON:"x",NOUN:"an addition",VERB:"to add (to)",ADJECTIVE:"adding (machine)/addable","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"3",LETTER:"C",PERSON:"a comforter",NOUN:"the comfort",VERB:"to comfort",ADJECTIVE:"comfortable","ADVERB/PREP":"comfortably",NEGATIVE:"uncomfortable"},{LESSON:"3",LETTER:"",PERSON:"a communicator",NOUN:"the communication",VERB:"to communicate",ADJECTIVE:"communicative (person)/communicable (disease) / communicated","ADVERB/PREP":"communicatively",NEGATIVE:"uncommunicative"},{LESSON:"3",LETTER:"D",PERSON:"x",NOUN:"a difference",VERB:"to differ (from)",ADJECTIVE:"different","ADVERB/PREP":"differently",NEGATIVE:"x"},{LESSON:"3",LETTER:"",PERSON:"a distributor",NOUN:"the distribution",VERB:"to distribute",ADJECTIVE:"distributed","ADVERB/PREP":"x",NEGATIVE:"undistributed"},{LESSON:"3",LETTER:"F",PERSON:"a founder",NOUN:"a foundation",VERB:"to found",ADJECTIVE:"x","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"3",LETTER:"I",PERSON:"x",NOUN:"the importance (of)",VERB:"x",ADJECTIVE:"important","ADVERB/PREP":"importantly",NEGATIVE:"unimportant"},{LESSON:"3",LETTER:"R",PERSON:"x",NOUN:"the responsibility",VERB:"x",ADJECTIVE:"responsible","ADVERB/PREP":"responsibly",NEGATIVE:"irresponsible"},{LESSON:"3",LETTER:"S",PERSON:"a signifier ",NOUN:"the significance",VERB:"to signify",ADJECTIVE:"signifying","ADVERB/PREP":"significantly",NEGATIVE:"insignificant"},{LESSON:"4",LETTER:"A",PERSON:"an advertiser",NOUN:"an advertisement",VERB:"to advertise",ADJECTIVE:"advertising","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"4",LETTER:"",PERSON:"an addict",NOUN:"an addiction",VERB:"to be addicted",ADJECTIVE:"addictive","ADVERB/PREP":"x",NEGATIVE:"non-addictive"},{LESSON:"4",LETTER:"D",PERSON:"a deliverer",NOUN:"a delivery",VERB:"to deliver (from,to)",ADJECTIVE:"deliverable","ADVERB/PREP":"x",NEGATIVE:"undeliverable"},{LESSON:"4",LETTER:"",PERSON:"a developer",NOUN:"a development",VERB:"to develop (into)",ADJECTIVE:"developable/developed/ developing (world)","ADVERB/PREP":"x",NEGATIVE:"undeveloped"},{LESSON:"4",LETTER:"",PERSON:"a conversationalist",NOUN:"a conversation",VERB:"to converse (with)",ADJECTIVE:"x","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"4",LETTER:"",PERSON:"x",NOUN:"the confusion",VERB:"to confuse (with)",ADJECTIVE:"confused (about) / confusing","ADVERB/PREP":"confusingly",NEGATIVE:"x"},{LESSON:"4",LETTER:"",PERSON:"a dramatist/ a dramaturge",NOUN:"a drama",VERB:"to dramatise",ADJECTIVE:"dramatic","ADVERB/PREP":"dramatically",NEGATIVE:"x"},{LESSON:"4",LETTER:"E",PERSON:"an economist",NOUN:"the economics / the economy",VERB:"to economize (on sth)",ADJECTIVE:"economic / economical","ADVERB/PREP":"economically",NEGATIVE:"uneconomical"},{LESSON:"4",LETTER:"",PERSON:"an educator",NOUN:"an education",VERB:"to educate",ADJECTIVE:"educated (person) / educational","ADVERB/PREP":"educationally",NEGATIVE:"uneducated"},{LESSON:"4",LETTER:"M",PERSON:"a major",NOUN:"a majority",VERB:"to major (in)",ADJECTIVE:"major","ADVERB/PREP":"majorly",NEGATIVE:"x"},{LESSON:"5",LETTER:"A",PERSON:"an attendant/ an attendee",NOUN:"the attendance",VERB:"to attend",ADJECTIVE:"x","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"5",LETTER:"B",PERSON:"x",NOUN:"the blame/ the blamelessness",VERB:"to blame (sb for sth, sth on sb)",ADJECTIVE:"blameworthy","ADVERB/PREP":"blamelessly",NEGATIVE:"blameless"},{LESSON:"5",LETTER:"C",PERSON:"a (major/main) competitor",NOUN:"the competition (between,with sb)",VERB:"to compete (with,against sb)",ADJECTIVE:"competitive","ADVERB/PREP":"competitively",NEGATIVE:"uncompetitive"},{LESSON:"5",LETTER:"F",PERSON:"a failure",NOUN:"the failure",VERB:"to fail (in sth)",ADJECTIVE:"failing","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"5",LETTER:"",PERSON:"x",NOUN:"a filling/filler",VERB:"to fill (with sth)",ADJECTIVE:"full/filled","ADVERB/PREP":"fully",NEGATIVE:"unfilled"},{LESSON:"5",LETTER:"H",PERSON:"a hater",NOUN:"the hate/ the hatred",VERB:"to hate",ADJECTIVE:"hated / hateful","ADVERB/PREP":"hatefully",NEGATIVE:"x"},{LESSON:"5",LETTER:"I",PERSON:"an informer",NOUN:"the information",VERB:"to inform (of,about sth)",ADJECTIVE:"informative/ informed","ADVERB/PREP":"informatively",NEGATIVE:"uninformative/ ill-informed"},{LESSON:"5",LETTER:"J",PERSON:"a joiner",NOUN:"a join/ a joining / (a joint)",VERB:"to join (sth to sth , join in , join up)",ADJECTIVE:"joinable","ADVERB/PREP":"x",NEGATIVE:"unjoinable"},{LESSON:"5",LETTER:"K",PERSON:"x",NOUN:"kindness / a kind",VERB:"x",ADJECTIVE:"kind","ADVERB/PREP":"kindly",NEGATIVE:"unkind"},{LESSON:"5",LETTER:"L",PERSON:"a loser",NOUN:"the loss",VERB:"to lose (sth/sb)",ADJECTIVE:"lost","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"6",LETTER:"C",PERSON:"a condemner (-nor)",NOUN:"the condemnation",VERB:"to condemn (sb for sth)",ADJECTIVE:"condemnable / condemned","ADVERB/PREP":"condemnably",NEGATIVE:"x"},{LESSON:"6",LETTER:"",PERSON:"x",NOUN:"the consistency",VERB:"to consist (of sth)",ADJECTIVE:"consistent (with sth)","ADVERB/PREP":"consistently",NEGATIVE:"inconsistent"},{LESSON:"6",LETTER:"E",PERSON:"an employer/ an employee",NOUN:"the employment",VERB:"to employ",ADJECTIVE:"employable / employed","ADVERB/PREP":"x",NEGATIVE:"unemployable /  unemployed"},{LESSON:"6",LETTER:"F",PERSON:"a friend",NOUN:"a friendship / the friendliness",VERB:"to befriend",ADJECTIVE:"friendly","ADVERB/PREP":"x (in a friendly way)",NEGATIVE:"unfriendly"},{LESSON:"6",LETTER:"H",PERSON:"x",NOUN:"the happiness",VERB:"x",ADJECTIVE:"happy","ADVERB/PREP":"happily",NEGATIVE:"unhappy / unhappily"},{LESSON:"6",LETTER:"",PERSON:"a help / a helper",NOUN:"the help / the helpfulness / the  helplessness ",VERB:"to help",ADJECTIVE:"helpful","ADVERB/PREP":"helpfully/ helplessly",NEGATIVE:"helpless"},{LESSON:"6",LETTER:"I",PERSON:"an introducer",NOUN:"an introduction",VERB:"to introduce",ADJECTIVE:"introductory","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"6",LETTER:"P",PERSON:"a polluter",NOUN:"the pollution/ a pollutant",VERB:"to pollute",ADJECTIVE:"polluted","ADVERB/PREP":"x",NEGATIVE:"unpolluted"},{LESSON:"6",LETTER:"R",PERSON:"a relative",NOUN:"a relation / a relationship (with)",VERB:"to relate (to)",ADJECTIVE:"relative / related","ADVERB/PREP":"relatively",NEGATIVE:"unrelated"},{LESSON:"6",LETTER:"T",PERSON:"a trendsetter",NOUN:"a trend",VERB:"x",ADJECTIVE:"trendy","ADVERB/PREP":"trendily",NEGATIVE:"x"},{LESSON:"7",LETTER:"A",PERSON:"x",NOUN:"the amazement",VERB:"to amaze (sb with)",ADJECTIVE:"amazing / amazed","ADVERB/PREP":"amazingly",NEGATIVE:"x"},{LESSON:"7",LETTER:"",PERSON:"an applicant",NOUN:"an application",VERB:"to apply (to sb, to sth, for sth)",ADJECTIVE:"applied / applicable","ADVERB/PREP":"x",NEGATIVE:"inapplicable"},{LESSON:"7",LETTER:"C",PERSON:"a creator",NOUN:"the creation / the creativity / a creature",VERB:"to create",ADJECTIVE:"creative","ADVERB/PREP":"creatively",NEGATIVE:"uncreative"},{LESSON:"7",LETTER:"E",PERSON:"x",NOUN:"an/the experience",VERB:"to experience",ADJECTIVE:"experienced (in sth)","ADVERB/PREP":"x",NEGATIVE:"inexperienced"},{LESSON:"7",LETTER:"F",PERSON:"a fortune-teller",NOUN:"a fortune",VERB:"x",ADJECTIVE:"fortunate ","ADVERB/PREP":"fortunately",NEGATIVE:"unfortunately"},{LESSON:"7",LETTER:"H",PERSON:"x",NOUN:"the health",VERB:"x",ADJECTIVE:"healthy / healthful","ADVERB/PREP":"healthily",NEGATIVE:"unhealthy"},{LESSON:"7",LETTER:"I",PERSON:"an inspirer",NOUN:"the inspiration",VERB:"to inspire (sb to)",ADJECTIVE:"inspired (person) / inspiring  (thing, person, event)","ADVERB/PREP":"inspiringly",NEGATIVE:"uninspired"},{LESSON:"7",LETTER:"P",PERSON:"x",NOUN:"the power/ the empowerment",VERB:"to empower",ADJECTIVE:"powerful","ADVERB/PREP":"powerfully",NEGATIVE:"powerless"},{LESSON:"7",LETTER:"R",PERSON:"x",NOUN:"the realisation",VERB:"to realise (-ize)",ADJECTIVE:"realisable","ADVERB/PREP":"x",NEGATIVE:"unrealisable"},{LESSON:"8",LETTER:"A",PERSON:"x",NOUN:"an aggravation",VERB:"to aggravate",ADJECTIVE:"aggravated/aggravating","ADVERB/PREP":"x",NEGATIVE:"unaggravated"},{LESSON:"8",LETTER:"C",PERSON:"x",NOUN:"a concentration (of sth) /  the concentration ",VERB:"concentrate (on)",ADJECTIVE:"concentrated (amount of sth)","ADVERB/PREP":"x",NEGATIVE:"unconcentrated"},{LESSON:"8",LETTER:"P",PERSON:"a publicist",NOUN:"the publicity / a publication",VERB:"to publish",ADJECTIVE:"published","ADVERB/PREP":"publicly",NEGATIVE:"unpublished"},{LESSON:"8",LETTER:"R",PERSON:"a reliever",NOUN:"a relief",VERB:"to relieve",ADJECTIVE:"relieved / relieving","ADVERB/PREP":"relievedly",NEGATIVE:"x"},{LESSON:"8",LETTER:"",PERSON:"x",NOUN:"the reliability",VERB:"to rely (on sth, sb)",ADJECTIVE:"reliable","ADVERB/PREP":"reliably",NEGATIVE:"unreliable"},{LESSON:"8",LETTER:"S",PERSON:"a shopper",NOUN:"(do) the shopping",VERB:"to shop (for sth, at some place)",ADJECTIVE:"shopping","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"8",LETTER:"T",PERSON:"a tempter",NOUN:"the temptation",VERB:"to tempt",ADJECTIVE:"tempting","ADVERB/PREP":"temptingly",NEGATIVE:"untempting"},{LESSON:"8",LETTER:"",PERSON:"a theatregoer",NOUN:"a theatre / theatricals",VERB:"to theatricalize",ADJECTIVE:"theatrical","ADVERB/PREP":"theatrically",NEGATIVE:"x"},{LESSON:"8",LETTER:"V",PERSON:"x",NOUN:"the value (of sth)/ the valuables/ the (re)evaluation",VERB:"to value / to evaluate",ADJECTIVE:"valuable/invaluable","ADVERB/PREP":"valuably",NEGATIVE:"valueless"},{LESSON:"8",LETTER:"W",PERSON:"x",NOUN:"the worth",VERB:"x",ADJECTIVE:"worth / worthwhile","ADVERB/PREP":"worthily",NEGATIVE:"worthless"},{LESSON:"9",LETTER:"E",PERSON:"x",NOUN:"an expense",VERB:"to expend (a lot of time, energy, etc)",ADJECTIVE:"expensive","ADVERB/PREP":"expensively (dressed)",NEGATIVE:"inexpensive"},{LESSON:"9",LETTER:"F",PERSON:"a furnisher",NOUN:"the furniture",VERB:"to furnish (with)",ADJECTIVE:"furnished","ADVERB/PREP":"x",NEGATIVE:"unfurnished"},{LESSON:"9",LETTER:"I",PERSON:"x",NOUN:"an instance (of)",VERB:"x",ADJECTIVE:"instant","ADVERB/PREP":"instantly",NEGATIVE:"x"},{LESSON:"9",LETTER:"L",PERSON:"x",NOUN:"life",VERB:"to live",ADJECTIVE:"living (legend) / live (show) / liveable (place) / lively (person) / alive","ADVERB/PREP":"live /  lively (in a lively way)",NEGATIVE:"lifeless /  unliveable"},{LESSON:"9",LETTER:"M",PERSON:"x",NOUN:"a memory (of) / a memorial",VERB:"to memorise",ADJECTIVE:"memorised / memorable (event)","ADVERB/PREP":"memorably",NEGATIVE:"unmemorable"},{LESSON:"9",LETTER:"O",PERSON:"x",NOUN:"an occasion",VERB:"x",ADJECTIVE:"occasional","ADVERB/PREP":"occasionally",NEGATIVE:"x"},{LESSON:"9",LETTER:"P",PERSON:"x",NOUN:"the politeness",VERB:"x",ADJECTIVE:"polite","ADVERB/PREP":"politely",NEGATIVE:"impolite"},{LESSON:"9",LETTER:"S",PERSON:"a scientist",NOUN:"science",VERB:"x",ADJECTIVE:"scientific","ADVERB/PREP":"scientifically",NEGATIVE:"unscientific"},{LESSON:"9",LETTER:"",PERSON:"a successor",NOUN:"a success",VERB:"to succeed (in)",ADJECTIVE:"successful (in)","ADVERB/PREP":"successfully",NEGATIVE:"unsuccessful"},{LESSON:"9",LETTER:"A",PERSON:"x",NOUN:"the attention",VERB:"x",ADJECTIVE:"attentive","ADVERB/PREP":"attentively",NEGATIVE:"inattentive"},{LESSON:"10",LETTER:"E",PERSON:"x",NOUN:"the enjoyment",VERB:"to enjoy",ADJECTIVE:"enjoyable","ADVERB/PREP":"enjoyably",NEGATIVE:"x"},{LESSON:"10",LETTER:"F",PERSON:"x",NOUN:"a form / the formality",VERB:"to form",ADJECTIVE:"formal / former","ADVERB/PREP":"formally",NEGATIVE:"informal"},{LESSON:"10",LETTER:"H",PERSON:"a hazarder",NOUN:"a hazard (of sth)",VERB:"to hazard",ADJECTIVE:"hazardous","ADVERB/PREP":"hazardously",NEGATIVE:"unhazardous"},{LESSON:"10",LETTER:"J",PERSON:"a judge",NOUN:"a judgement",VERB:"to judge",ADJECTIVE:"judgemental / judicial","ADVERB/PREP":"x",NEGATIVE:"misjudged"},{LESSON:"10",LETTER:"L",PERSON:"x",NOUN:"a length (of) / the length",VERB:"to lengthen / to prolong",ADJECTIVE:"long /prolonged / lengthy","ADVERB/PREP":"lengthily",NEGATIVE:"x"},{LESSON:"10",LETTER:"M",PERSON:"a manager",NOUN:"the management",VERB:"to manage",ADJECTIVE:"managing / manageable","ADVERB/PREP":"x",NEGATIVE:"unmanageable / mismanaged"},{LESSON:"10",LETTER:"",PERSON:"a mathematician",NOUN:"mathematics",VERB:"to do maths",ADJECTIVE:"mathematical","ADVERB/PREP":"mathematically",NEGATIVE:"x"},{LESSON:"10",LETTER:"P",PERSON:"a person",NOUN:"a personality",VERB:"to personalise (-ize)",ADJECTIVE:"personal","ADVERB/PREP":"personally (in person)",NEGATIVE:"impersonal"},{LESSON:"10",LETTER:"",PERSON:"x",NOUN:"a possibility",VERB:"x",ADJECTIVE:"possible","ADVERB/PREP":"possibly",NEGATIVE:"impossible"},{LESSON:"10",LETTER:"S",PERSON:"x",NOUN:"the surroundings",VERB:"to surround",ADJECTIVE:"surrounding","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"11",LETTER:"E",PERSON:"an enthusiast",NOUN:"the enthusiasm (for sth)",VERB:"to enthuse",ADJECTIVE:"enthusiastic (about sth)","ADVERB/PREP":"enthusiastically",NEGATIVE:"unenthusiastic"},{LESSON:"11",LETTER:"G",PERSON:"a grower / a grown-up",NOUN:"the growth (of,in)",VERB:"to grow",ADJECTIVE:"growing","ADVERB/PREP":"x",NEGATIVE:"ingrowing"},{LESSON:"11",LETTER:"L",PERSON:"x",NOUN:"the like",VERB:"to like",ADJECTIVE:"like","ADVERB/PREP":"likely",NEGATIVE:"unlike"},{LESSON:"11",LETTER:"",PERSON:"x",NOUN:"the likelihood",VERB:"to dislike",ADJECTIVE:"x","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"11",LETTER:"M",PERSON:"x",NOUN:"a meaning / the means of",VERB:"to mean",ADJECTIVE:"meaningful / mean","ADVERB/PREP":"meaningfully",NEGATIVE:"meaningless"},{LESSON:"11",LETTER:"N",PERSON:"x",NOUN:"the negligence ",VERB:"to neglect",ADJECTIVE:"negligible / neglectful","ADVERB/PREP":"negligibly/ neglectfully",NEGATIVE:"x"},{LESSON:"11",LETTER:"O",PERSON:"x",NOUN:"obedience",VERB:"to obey",ADJECTIVE:"obedient","ADVERB/PREP":"obediently",NEGATIVE:"disobedient"},{LESSON:"11",LETTER:"P",PERSON:"x",NOUN:"the popularity",VERB:"to popularise",ADJECTIVE:"popular","ADVERB/PREP":"popularly",NEGATIVE:"unpopular"},{LESSON:"11",LETTER:"T",PERSON:"a talker",NOUN:"a talk / the talks",VERB:"to talk (about,to)",ADJECTIVE:"talkative","ADVERB/PREP":"talkatively",NEGATIVE:"x"},{LESSON:"11",LETTER:"W",PERSON:"x",NOUN:"a will (the will)",VERB:"to will (sth into existence)",ADJECTIVE:"willing","ADVERB/PREP":"willingly",NEGATIVE:"unwilling"},{LESSON:"12",LETTER:"A",PERSON:"x",NOUN:"the alterability/ alteration",VERB:"to alter",ADJECTIVE:"alterable/altering/altered","ADVERB/PREP":"alterably",NEGATIVE:"unalterably/unaltering/inalterable"},{LESSON:"12",LETTER:"E",PERSON:"x",NOUN:"the excitement",VERB:"to excite",ADJECTIVE:"excited (person, about) /exciting (thing)","ADVERB/PREP":"excitingly",NEGATIVE:"unexciting"},{LESSON:"12",LETTER:"H",PERSON:"x",NOUN:"the honesty",VERB:"x",ADJECTIVE:"honest (about)","ADVERB/PREP":"honestly",NEGATIVE:"dishonest"},{LESSON:"12",LETTER:"K",PERSON:"a know-it-all",NOUN:"the knowledge (of sth)",VERB:"to know (about sth,sb)",ADJECTIVE:"known (well-known, first-known)","ADVERB/PREP":"(to look at sb, to do sth) knowingly",NEGATIVE:"unknown"},{LESSON:"12",LETTER:"N",PERSON:"x",NOUN:"the renewal/the newness",VERB:"to renew",ADJECTIVE:"new / renewable","ADVERB/PREP":"anew/ newly",NEGATIVE:"x"},{LESSON:"12",LETTER:"O",PERSON:"an opponent/ an oppositionist",NOUN:"the opposition/ the opposite",VERB:"to oppose",ADJECTIVE:"opposing","ADVERB/PREP":"x",NEGATIVE:"oppositionless"},{LESSON:"12",LETTER:"P",PERSON:"x",NOUN:"a passion (for)",VERB:"x",ADJECTIVE:"passionate/ impassioned (speech) ","ADVERB/PREP":"passionately/ impassionedly",NEGATIVE:"dispassionate"},{LESSON:"12",LETTER:"S",PERSON:"a saviour/ a saver",NOUN:"the safety/ a safe",VERB:"to save",ADJECTIVE:"safe","ADVERB/PREP":"safely",NEGATIVE:"unsaved"},{LESSON:"12",LETTER:"T",PERSON:"a teacher",NOUN:"the teaching/ the teachings of",VERB:"to teach (sth to sb)",ADJECTIVE:"teachable","ADVERB/PREP":"x",NEGATIVE:"unteachable (student)"},{LESSON:"13",LETTER:"K",PERSON:"a know-nothing",NOUN:"the know-how (to do sth)",VERB:"to acknowledge",ADJECTIVE:"knowing/knowledgeable","ADVERB/PREP":"",NEGATIVE:"unknowledgeable"},{LESSON:"13",LETTER:"M",PERSON:"a minor",NOUN:"a minority",VERB:"to minor (in)",ADJECTIVE:"minor","ADVERB/PREP":"x",NEGATIVE:"x"},{LESSON:"13",LETTER:"",PERSON:"a musician",NOUN:"the music/ a musical/ musicality",VERB:"to musicalize",ADJECTIVE:"musical","ADVERB/PREP":"musically",NEGATIVE:"x"},{LESSON:"13",LETTER:"P",PERSON:"a payer/ a payee",NOUN:"a payment",VERB:"to pay",ADJECTIVE:"paid/payable (to sb)","ADVERB/PREP":"x",NEGATIVE:"unpaid"},{LESSON:"13",LETTER:"R",PERSON:"a reasoner",NOUN:"a reason/ the reasonableness",VERB:"to reason",ADJECTIVE:"reasonable","ADVERB/PREP":"reasonably",NEGATIVE:"unreasonable"},{LESSON:"13",LETTER:"S",PERSON:"a sympathiser",NOUN:"the sympathy",VERB:"to sympathise(-ize) (with)",ADJECTIVE:"sympathetic","ADVERB/PREP":"sympathetically",NEGATIVE:"unsympathetically"},{LESSON:"13",LETTER:"U",PERSON:"x",NOUN:"the understanding (of sth,to do sth)",VERB:"to understand",ADJECTIVE:"understandable","ADVERB/PREP":"understandably",NEGATIVE:"to misunderstand/ a misunderstanding"},{LESSON:"13",LETTER:"V",PERSON:"x",NOUN:"a variation/ a variety",VERB:"to vary",ADJECTIVE:"various/ varying/varied/variable","ADVERB/PREP":"(in)variably",NEGATIVE:"invariable"},{LESSON:"13",LETTER:"W",PERSON:"a worker",NOUN:"the work/works/ working/ workmanship",VERB:"to work (rework , overwork,\u2026)",ADJECTIVE:"working/ workable","ADVERB/PREP":"x",NEGATIVE:"unworkable"},{LESSON:"14",LETTER:"E",PERSON:"x",NOUN:"the expectation (of)/ the expectancy",VERB:"to expect",ADJECTIVE:"expectant/ expected","ADVERB/PREP":"expectantly",NEGATIVE:"unexpected"},{LESSON:"14",LETTER:"N",PERSON:"a neighbour",NOUN:"the neighbourhood",VERB:"to neighbour",ADJECTIVE:"neighbouring","ADVERB/PREP":"neighbourly",NEGATIVE:"neighbourless"},{LESSON:"14",LETTER:"O",PERSON:"an organiser",NOUN:"an organisation",VERB:"to organise (-ize)",ADJECTIVE:"organised/ organisable","ADVERB/PREP":"x",NEGATIVE:"unorganised (event)/ disorganised (person)"},{LESSON:"14",LETTER:"P",PERSON:"a possessor",NOUN:"a possession",VERB:"to possess",ADJECTIVE:"possessed/ possessive","ADVERB/PREP":"possessively",NEGATIVE:"dispossess"},{LESSON:"14",LETTER:"S",PERSON:"a suggester",NOUN:"a suggestion/ the suggestibility",VERB:"to suggest",ADJECTIVE:"suggested/ suggestive/ suggestible","ADVERB/PREP":"suggestively",NEGATIVE:"x"},{LESSON:"14",LETTER:"U",PERSON:"a/an (ab)user",NOUN:"the use (of)/ the usefulness",VERB:"to use",ADJECTIVE:"used/ usable/ useful","ADVERB/PREP":"usefully/ uselessly",NEGATIVE:"misused/ unused/useless"},{LESSON:"14",LETTER:"Y",PERSON:"a youngster/ a youth",NOUN:"the youth / the youthfulness",VERB:"x",ADJECTIVE:"young/ youthful/ youngish","ADVERB/PREP":"youthfully",NEGATIVE:"x"},{LESSON:"15",LETTER:"N",PERSON:"x",NOUN:"a norm/ the normalness/  the normalcy / the normality",VERB:"to normalise (-ize)",ADJECTIVE:"normal","ADVERB/PREP":"normally",NEGATIVE:"abnormal/ subnormal"},{LESSON:"15",LETTER:"P",PERSON:"a (people) pleaser",NOUN:"a pleasure/  a pleasance",VERB:"to please",ADJECTIVE:"pleased/ pleasing/ pleasant/ pleasurable","ADVERB/PREP":"pleasingly/ pleasantly/ pleasurably",NEGATIVE:"unpleasing/ unpleasant"},{LESSON:"15",LETTER:"",PERSON:"a producer",NOUN:"production/ a product/ productivity",VERB:"to produce",ADJECTIVE:"productive/ producible","ADVERB/PREP":"productively",NEGATIVE:"unproductive/ counterproductive"},{LESSON:"15",LETTER:"T",PERSON:"a thinker",NOUN:"a thought/the thinking/ the thoughtfulness",VERB:"to think (of,about)",ADJECTIVE:"thoughtful","ADVERB/PREP":"thoughtfully",NEGATIVE:"unthinkable/thoughtless"}],qM=[{word:"to seize",meaning:" to take (an opportunity) eagerly and decisively"},{word:"the vomit",meaning:" a matter ejected from the stomach"},{word:"to choke",meaning:" to have severe difficulties in breathing because of constricted or obstructed throat or lack of air"},{word:"he knows his whole back is at these ropes",meaning:" he knows he is in a very disadvantageous position"},{word:"the dope",meaning:" a drug"},{word:"a dope",meaning:" a stupid person"},{word:"a stag",meaning:" an adult male deer"},{word:"stagnant",meaning:"  not growing or developing"},{word:"a post mortem",meaning:" an examination of a dead body in order to determine the cause of death"},{word:"a hoe",meaning:" a gardening tool [motyka]"},{word:"a globetrotter",meaning:" a person who travels widely"},{word:"cuz",meaning:" because (a short form)"},{word:"a schmo",meaning:" a stupid person (informal)"},{word:"a partna\u2019",meaning:" partner (slang)"},{word:"a/the rage",meaning:" violent and uncontrollable anger"},{word:"to boo off",meaning:" to voice displeasure (by booing) until a performer(s) decide to leave the stage"},{word:"a pied piper",meaning:" a leader who makes irresponsible promises"},{word:"to amplify",meaning:" to increase"},{word:"a teeter-totter",meaning:" a see-saw"},{word:"unwieldy",meaning:" ineffective "},{word:"on track",meaning:" making progress and likely to succeed"},{word:"to shift",meaning:" to cause sth or sbd to move or change from one position or direction to another  especially slightly"},{word:"a burden",meaning:" a heavy load that you carry"},{word:"valid",meaning:" based on truth and reason, able to be accepted"},{word:"akin",meaning:" similar"},{word:"substantive",meaning:" important, serious, related to real facts"},{word:"to quote",meaning:" to repeat the words that somebody else has said or written"},{word:"an/the analogy",meaning:" a comparison between things that have similar features, often used to explain a principle or idea"},{word:"to resemble",meaning:" to look like or be like sth or sbd"},{word:"an issue",meaning:" a subject or problem that people are thinking or talking about"},{word:"to anticipate",meaning:" to imagine and expect that sth will happen"},{word:"to meet",meaning:" to fulfil, satisfy or achieve"},{word:"overall",meaning:" in general rather than in particular, or including all the people or things in a particular group or situation"},{word:"to linger",meaning:" to take a long time to leave or disappear"},{word:"a frame",meaning:" a body of a car"},{word:"a wheel",meaning:" a circular part of a car that is used for making it move"},{word:"a light",meaning:" the brightness that comes from the sun, fire, or electrical device and that allows things to be seen"},{word:"a tail light",meaning:" a red light at the rear of a vehicle"},{word:"a head light",meaning:" a powerful light at the front of a vehicle"},{word:"a door",meaning:" a flat object used for closing the entrance of a room, building, vehicle or the entrance itself"},{word:"a window",meaning:" a space usually filled with glass in the wall of a building or vehicle to allow air and light and people in the building can see outside"},{word:"a windshield",meaning:" windscreen, a big window at the front of a motor vehicle and the driver can see forward through it"},{word:"a windshield",meaning:" windscreen wiper, a device used to remove rain or snow from a windshield/windscreen"},{word:"a trunk",meaning:" a closed space at the back of a car where things can be stored"},{word:"a steering wheel",meaning:" a wheel in the vehicle that the driver turns in order to make the vehicle to go in a particular direction "},{word:"a seat",meaning:" a part of a car, bus, train, plane\u2026 that was designed for someone to sit on"},{word:"a brake",meaning:" a device that makes a vehicle go slower or stop"},{word:"a handbrake",meaning:" a brake operated in hand"},{word:"a disk brake",meaning:" a type of a brake [kot\xFA\u010Dov\xE1 brzda]"},{word:"an engine",meaning:" a machine that uses the energy from liquid fuel or steam to produce movement"},{word:"a horn",meaning:" a sound-making device usually in vehicles"},{word:"a rearview mirror",meaning:" a mirror that allows to drive to see what is happening behind the vehicle"},{word:"a mirror",meaning:" a piece of a glass with a shiny, metal-covered back that reflects light producing an imagine of whatever is in front of it"},{word:"a dashboard",meaning:" a console, panel"},{word:"a glove compartment",meaning:" a space in a motor vehicle used for storing small items"},{word:"an accelerator",meaning:" a device controlling the speed of a vehicle\u2019s engine [katalyz\xE1tor]"},{word:"a clutch",meaning:" a device in a motor vehicle used for (dis)/connecting an engine with the transmission system"},{word:"an alternator",meaning:" a type of an electric generator used to charge the battery"},{word:"a chassis",meaning:" a framework"},{word:"a propeller",meaning:" a device of a plane or a ship that turns and makes the plane/ship to move"},{word:"baffling",meaning:" surprising, shocking, difficult or impossible to understand"},{word:"frail",meaning:" fragile, weak"},{word:"rear",meaning:" at or near the back of something, esp. vehicle"},{word:"a pioneer",meaning:" the first of its kind"},{word:"an aircraft",meaning:" a plane"},{word:"1",meaning:" one whole"},{word:"1/2",meaning:" one half"},{word:"1/3",meaning:" one third"},{word:"1/4",meaning:" one quarter "},{word:"1/5",meaning:" one fifth"},{word:"1/6",meaning:" one sixth"},{word:"1/7",meaning:" one seventh"},{word:"1/8",meaning:" one eighth"},{word:"1/9",meaning:" one ninth"},{word:"1/10",meaning:" one tenth"},{word:"10x/12y",meaning:" ten x over twelve y"},{word:"a peak",meaning:" the highest, strongest, the best point, value or level of skill (used also in relation with graphs)"},{word:"a hoist",meaning:" a device used for lifting heavy things"},{word:"a pulley",meaning:" a piece of equipment used for moving heavy objects up and down, consisting of a small wheel over which a rope or chain attached to the object can be easily raised or lowered"},{word:"to bury",meaning:" to put a dead body into the ground"},{word:"a burial",meaning:" a funeral"},{word:"a butcher",meaning:" a person who sells meat in a shop"},{word:"doping",meaning:" giving a person or animal drugs in order to make them perform better or worse in a competition"},{word:"to omit",meaning:" not to include sbd or sth intentionally"},{word:"a venue",meaning:" the place where a public event or meeting happens"},{word:"the folklore",meaning:" the traditional stories and culture of a group of people "},{word:"a gauge",meaning:" a device for measuring the amount or size of something /\u0261e\u026Ad\u0292/"},{word:"a choir",meaning:" a group of people who sing together, especially for church or school /kwa\u026A\u0259r/"},{word:"a chore",meaning:" a job or piece of work that is often boring and unpleasant but needs to be done regularly /t\u0283\u0254\u02D0r/"},{word:"the drainage",meaning:" the process by which water or other liquids flow away into pipes or into the ground"},{word:"to drain",meaning:" to remove liquid from something (usually by pouring it away or allowing it to flow away)"},{word:"a drought",meaning:" a long period where there is little or no rain"},{word:"a draught",meaning:" a current of unpleasantly cold air blowing through a room"},{word:"a draft",meaning:" a piece of writing, a formal suggestion, or a drawing in its original state, often containing the main ideas and intentions but not the developed form"},{word:"to irrigate",meaning:" to supply land with water so plants and crops will grow"},{word:"to wreak havoc",meaning:" to cause chaos"},{word:"a fringe",meaning:" an area of hair hanging over the forehead (part of the face above the eyes) that is cut shorter than the rest of hair  (bangs)"},{word:"loyal",meaning:" always supporting your friends, principles, country, etc. (loyalty  the quality of being loyal)"},{word:"a statue",meaning:" sculpture (sculptor  someone who creates sculptures)"},{word:"to commemorate",meaning:" to remember officially and give respect"},{word:"arduous",meaning:" difficult, needing a lot of effort and energy"},{word:"to obey",meaning:" to do what someone in authority tells you, or what a law or rule says you must do"},{word:"an avalanche",meaning:" a large mass of snow, ice and rocks falling rapidly down a mountainside"},{word:"to pace",meaning:" to walk at a steady speed, especially without a particular destination and as an expression of anxiety or annoyance"},{word:"a clef",meaning:" a sign put at the beginning of a music line to show how high or low the notes are"},{word:"a stave",meaning:" a five lines and four spaces between them on which musical notes are written"},{word:"a stave",meaning:" a staff"},{word:"a staff",meaning:" a long thick stick held in the hand which helps to walk"},{word:"the staff ",meaning:" the group of people who work for an organization (plural, but very rarely also a singular form can be used)"},{word:"the stuff",meaning:" a substance or material, especially when you do not know or say exactly what it is"},{word:"immense",meaning:" extremely large in size or degree"},{word:"a sergeant",meaning:" a soldier of middle rank /\u02C8s\u0251\u02D0.d\u0292\u0259nt/"},{word:"a lieutenant",meaning:" an officer of middle rank in the armed forces /lef\u02C8ten.\u0259nt/"},{word:"a captain",meaning:" the leader of a sports team, a person in charge of a ship or an aircraft /\u02C8k\xE6p.t\u026An/"},{word:"a colonel",meaning:" an officer of high rank in the army or air force /\u02C8k\u025C\u02D0.n\u0259l/"},{word:"a major",meaning:" an officer of middle rank in the British, US, and many other armed forces /\u02C8me\u026A.d\u0292\u0259r/"},{word:"the courage",meaning:" the ability to control your fear in a dangerous or difficult situation (courageous  having or showing courage /k\u0259\u02C8re\u026A.d\u0292\u0259s/)"},{word:"national",meaning:" relating to or typical of a whole country and its people, rather than to a part of that country or to other countries /\u02C8n\xE6\u0283.\u0259n.\u0259l/ /\u02C8n\xE6\u0283.n\u0259l/"},{word:"the nationality",meaning:" the official right to belong to a particular country /\u02CCn\xE6\u0283.\u0259n\u02C8\xE6l.\u0259.ti/ /\u02CCn\xE6\u0283\u02C8n\xE6l\u02C8\xE6l.\u0259.ti/"},{word:"a nationality",meaning:" a group of people of the same race, religions, traditions, etc."},{word:"a national",meaning:" someone who officially belongs to a particular country"},{word:"a nation",meaning:" a country, esp. when thought of as a large group of people living in one area with their own government, language, traditions\u2026"},{word:"a kernel",meaning:" the most important part of something, although it might not always be easy to find /\u02C8k\u025C\u02D0.n\u0259l/"},{word:"herbivorous",meaning:" eating plants /h\u025C\u02D0\u02C8b\u026Av.\u0259r.\u0259s/  (a herbivore an animal that eats only plants /\u02C8h\u025C\u02D0.b\u026A.v\u0254\u02D0r/)"},{word:"carnivorous",meaning:" eating meat /k\u0251\u02D0\u02C8n\u026Av.\u0259r.\u0259s/ (a carnivore an animal that eats meat /\u02C8k\u0251\u02D0.n\u026A.v\u0254\u02D0r/)"},{word:"the slaughter",meaning:" the killing of animals for meat  the killing of many people cruelly and unfairly, especially in a war"},{word:"a succession",meaning:" a number of similar events or people that happen or exist after each other"},{word:"plausible",meaning:" seeming likely to be true, or able to be believed "},{word:"to elicit",meaning:" to get or produce sth, esp. information or reaction"},{word:"Logic",meaning:" Dad bod"},{word:"a homie",meaning:" a good friend"},{word:"a crib",meaning:" a cot"},{word:"to bump",meaning:" to knock or run into somebody or something with a jolt"},{word:"an I. D.",meaning:" identify document"},{word:"a platinum record",meaning:" a record awarded to a singer or group whose album has sold at least one million copies"},{word:"to dip up",meaning:" to plunge or be plunged quickly or briefly into a liquid"},{word:"don\u2019t trip",meaning:" don\u2019t worry or don\u2019t stress about something"},{word:"the broccoli",meaning:" a green vegetable"},{word:"the lip",meaning:" the act of arguing with someone in a way that is rude or doesn\u2019t show enough respect"},{word:"a basement",meaning:" a part of building consisting of rooms that are partly or completely below the level of the ground"},{word:"a rib",meaning:" each of a series of slender curved bones articulated in pairs to the spine"},{word:"a food stamp",meaning:" a voucher issued cheaply by the state to those on low income or exchangeable for food"},{word:"to bet",meaning:" to risk a sum of money or valued item against someone else\u2019s on the basis of the outcome of an (mostly) unpredictable event"},{word:"a cutthroat",meaning:" a murderer or other violent criminal"},{word:"a cypher",meaning:" cipher, a secret or distinguished way of writing, a code"},{word:"to grip",meaning:" to take and keep a firm hold of, grasp tightly"},{word:"a pro-lifer",meaning:" the one who opposes abortions"},{word:"a cunt",meaning:" a woman\u2019s genitals, an unpleasant or stupid person"},{word:"an aisle",meaning:" a passage between rows of seats"},{word:"a drawer",meaning:" a box-shaped storage compartment without a lid, made to slide horizontally in and out of a desk, chest\u2026"},{word:"to stink",meaning:" to have a strong and unpleasant smell  (stank, stunk)"},{word:"a stan",meaning:" an overzealous or obsessive fan of a particular celebrity"},{word:"hella",meaning:" extremely"},{word:"a hardcore",meaning:" the most active, committed or strict members of a group or movement  (hard-core, hard core)"},{word:"to scratch",meaning:" to score or mark the surface of (sth) with a sharp or pointed object"},{word:"a dick",meaning:" a man\u2019s penis"},{word:"the bounty",meaning:" great kindness or willingness to give (a bounty  a large amount (of sth))"},{word:"a wipe",meaning:" a piece of soft, wet cloth or paper that you use for wiping (to wipe  to slide sth over the surface of sth else in order to remove dirt)"},{word:"hefty",meaning:" large in amount, extremely large"},{word:"the preparation",meaning:" the things you do or the time you spend preparing (= getting ready) for sth"},{word:"Sgt",meaning:" a sergeant  a soldier of middle rank"},{word:"soaring",meaning:" rising very quickly to a high level"},{word:"a punch line",meaning:" the last part of a joke or a story that explains the meaning or what has happened previously or makes it amusing"},{word:"a sample",meaning:" a small amount of sth that shows you what the rest is or should be like"},{word:"joint",meaning:" belonging to or shared between two or more people"},{word:"to chop",meaning:" to cut sth into pieces"},{word:"to flip",meaning:" to turn over one or more times or turn very quickly"},{word:"a freak",meaning:" sbd or sth extremely unusual or unlikely "},{word:"a formal aspect",meaning:" a formal side, the elements of formal aspect/side are structure, diction, imagery, rhythm, tropes and figures, and syntax  (of a poem)"},{word:"a stanza",meaning:" a group of lines of poetry forming unit"},{word:"a line",meaning:" a row of words that form part of a text"},{word:"a rhyme",meaning:" a word that has the same last sound as another word"},{word:"a title",meaning:" the name of a film, book, painting, piece of music\u2026"},{word:"the punctuation",meaning:" (the use of) special symbols that you add to writing to separate phrases and sentences or to show that sth is a question, exclamation, direct speech\u2026"},{word:"the diction",meaning:" the manner in which words are pronounced [re\u010D, prednes]"},{word:"the imagery",meaning:" the use of words or pictures in books, films, paintings, etc. to describe ideas or situations or create an impression or mood [obraznos\u0165]"},{word:"a/the rhythm",meaning:" s regularly repeated pattern of sounds or beats used in music, poems or dances (a jazz rhythm, the rhythm  You need a sense of rhythm to be a good dancer.)"},{word:"the syntax",meaning:" the grammatical arrangement of words in a sentence"},{word:"the content",meaning:" the subject or ideas contained in sth written, said, created or represented"},{word:"a metaphor",meaning:" an expression that describes a person or object by referring to sth that is considered to possess similar characteristics (a heart of stone)"},{word:"a metonymy",meaning:" the act of referring to sth using a word that describes one of its qualities or features (The White house The President)"},{word:"an allegory",meaning:" a poem, story or picture that can be interpreted to reveal or hidden meaning, typically a moral or political one"},{word:"a personification",meaning:" a LD giving human characteristics to an inanimate object (the stars winked at me)"},{word:"a simile",meaning:" a LD comparing two unlike things in a unique way (as tall as a giraffe)"},{word:"a symbol ",meaning:" a thing that represent or stands for sth else, especially a material object representing sth abstract (a fish can symbolize Christianity) (only countable)"},{word:"a hyperbole",meaning:" an exaggerated statement or claim not meant to be taken literally (I am dead of embarrassment)"},{word:"a synecdoche",meaning:" a LD when a small part represents the whole thing (wheels the whole car)"},{word:"an euphemism",meaning:"  a LD using polite words replace harsh ones (to pass away to die)"},{word:"an irony",meaning:" the expression of one\u2019s meaning by using language that normally means the opposite, typically for humorous or emphatic effect (the irony the use of words that are opposite of what you mean)"},{word:"a sarcasm",meaning:" the expression of one\u2019s meaning by the use of remarks that clearly mean the opposite of what they say, made in order to heart sbd\u2019s feelings or to criticize sth in a humorous way (the sarcasm  the use of remarks that clearly mean the opposite of what they say, made in order to heart sbd\u2019s feelings or to criticize sth in a humorous way)"},{word:"the alliteration",meaning:" the occurrence of the same letter or sound at the beginning of adjacent or closely connected words"},{word:"the paronomasia",meaning:" paronomasy, the use of a word in different senses or the use of words similar in sound to achieve a specific effect, as humor or a dual meaning  a pun (= a play with words)"},{word:"the anaphora",meaning:" the repetition of a word or phrase at the beginning of successive clauses"},{word:"the epiphora",meaning:" the repetition of a word or phrase at the end of successive clauses"},{word:"the epizeuxis",meaning:" a form of repetition in which a word is repeated immediately"},{word:"the epanastrophe",meaning:" the use of epanastrophes (an epanastrophe  a device in which the end of one clause is made the beginning of the next)"},{word:"the asyndeton",meaning:" the use of asyndeta (an asyndeton  a sentence containing a series of words or clauses in close succession, linked without the use of conjunctions)"},{word:"polysyndeton",meaning:" the repetition of conjunctions in close succession"},{word:"the ellipse",meaning:" the use of ellipses (an ellipse  a LD leaving out words rather than repeating them unnecessary)"},{word:"the aposiopesis",meaning:" the use of aposiopeses (an aposiopesis  a device of suddenly breaking off in speech)"},{word:"the gradation",meaning:" climax, the use of gradations/climaxes (a gradation/climax a series of similar words or expressions that gradually emphasize and increase)"},{word:"the anticlimax",meaning:" the use of anticlimaxes (an anticlimax  a series of similar words or expressions that gradually de-emphasize and decrease)"},{word:"the oxymoron",meaning:" the use of oxymorons (an oxymoron  a word or group of words that is self-contradicting (pretty ugly))"},{word:"the paradox",meaning:" the use of paradoxes (a paradox  a LD that contradicts itself but contains a plausible kernel of truth)"},{word:"a rhetorical question",meaning:" a question is posed not to elicit an answer but to emphasize point or create dramatic effect  (only countable)"},{word:"an ecphonesis",meaning:" an emotional, exclamatory phrase an exclamation  (probably only countable???)"},{word:"an apostrophe",meaning:" a speech or address to a person who is not present or to a personified object  (probably only countable???)"},{word:"to ink",meaning:" to tattoo someone (to tattoo  to decorate their skin with patterns using needles and ink (the ink  colored liquid used for writing, printing and drawing))"},{word:"a needle",meaning:" a thin metal pin, used in sewing, that is pointed at one end and has a hole called an eye at the other end"},{word:"a tan",meaning:" brown skin caused by being in the sun"},{word:"a knuckle",meaning:" one of the joints of the fingers"},{word:"a bubble",meaning:" a ball of gas that appears in a liquid, or a ball formed of air surrounded by liquid that floats in the air"},{word:"to flick",meaning:" to move or hit sth with a short sudden movement "},{word:"a fairy tale",meaning:" a traditional story written for children that usually involves imaginary creatures and magic"},{word:"a VCR",meaning:" a video cassette recorder"},{word:"to chuck",meaning:" to throw sth carelessly"},{word:"a controller",meaning:" a device used to operate or control a machine, a computer game, etc. "},{word:"to flutter",meaning:" to make a series of quick delicate movements up and down or from side to side"},{word:"a sheet",meaning:" a large piece of thin cloth used on a bed for sleeping on or under"},{word:"a pendant",meaning:" a piece of jewelry worn around the neck, consisting of a long chain with an object hanging from it, or the object itself"},{word:"a pebble",meaning:" a small smooth round stone, esp. one found on a beach or in a river"},{word:"to embroider",meaning:" to decorate cloth or clothing with patterns or pictures consisting of stitches that are sewn directly onto the material"},{word:"wrought",meaning:" made or done in a careful or decorative way"},{word:"dim",meaning:" not having or giving much light"},{word:"to spread",meaning:" to put a soft substance on a surface and make it cover it, or to be able to be put on a surface in this way"},{word:"to tread",meaning:" to put your foot on sth or to press sth down with your foot"},{word:"a fate",meaning:" what happens to a particular person or thing, esp. sth final or negative, such as death or defeat"},{word:"a bud",meaning:" a small part of a plant that develops into a flower or leaf"},{word:"a maiden",meaning:" a girl or young woman"},{word:"winged",meaning:" having the stated type of wings (a wing  the flat part of the body that a bird, insect or bat uses for flying or the flat part of an aircraft that supports it when it is flying)"},{word:"a seraph",meaning:" an angel of the highest rank"},{word:"coveted",meaning:" strongly desired by many (to covet to want to have sth very much, esp. sth that belongs to sbd else)"},{word:"a kinsman",meaning:" a man who belongs to the same family as somebody else"},{word:"a sepulchre",meaning:" sepulcher, a stone structure where someone is buried"},{word:"to dissever",meaning:" to divide or sever sth"},{word:"to beam",meaning:" to send out a beam of light, an electrical or radio signal (a beam  a line of light that shines from a bright object)"},{word:"a night-tide",meaning:" a flood tide occurring during the night (a tide  the rise and fall of the sea that happens twice every day)"}];class vv{constructor(){nt(this,"vocabulary",[]);nt(this,"matrix",[]);nt(this,"userName","");nt(this,"currentAnswer","");this.vocabulary=this.cleanupVocabulary(qM),this.matrix=this.cleanupMatrix(kM)}cleanupVocabulary(i){return i=i.map(e=>(e.meaning=String(e.meaning).trim(),e)),i}cleanupMatrix(i){let e=[];return i.forEach(v=>{let t={lesson:String(v.LESSON).trim(),letter:String(v.LETTER).trim(),person:String(v.PERSON).trim(),noun:String(v.NOUN).trim(),verb:String(v.VERB).trim(),adjective:String(v.ADJECTIVE).trim(),adverb:String(v["ADVERB/PREP"]).trim(),negative:String(v.NEGATIVE).trim()};e.push(t)}),e}}var xa=function(m,i){return xa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,v){e.__proto__=v}||function(e,v){for(var t in v)Object.prototype.hasOwnProperty.call(v,t)&&(e[t]=v[t])},xa(m,i)};function Rs(m,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");xa(m,i);function e(){this.constructor=m}m.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}function ya(m){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&m[i],v=0;if(e)return e.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&v>=m.length&&(m=void 0),{value:m&&m[v++],done:!m}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function En(m,i){var e=typeof Symbol=="function"&&m[Symbol.iterator];if(!e)return m;var v=e.call(m),t,s=[],u;try{for(;(i===void 0||i-- >0)&&!(t=v.next()).done;)s.push(t.value)}catch(n){u={error:n}}finally{try{t&&!t.done&&(e=v.return)&&e.call(v)}finally{if(u)throw u.error}}return s}function Sn(m,i,e){if(e||arguments.length===2)for(var v=0,t=i.length,s;v<t;v++)(s||!(v in i))&&(s||(s=Array.prototype.slice.call(i,0,v)),s[v]=i[v]);return m.concat(s||Array.prototype.slice.call(i))}function Ge(m){return typeof m=="function"}function cv(m){var i=function(v){Error.call(v),v.stack=new Error().stack},e=m(i);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var kr=cv(function(m){return function(e){m(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(v,t){return t+1+") "+v.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Ta(m,i){if(m){var e=m.indexOf(i);0<=e&&m.splice(e,1)}}var jn=function(){function m(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._finalizers=null}return m.prototype.unsubscribe=function(){var i,e,v,t,s;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var n=ya(u),a=n.next();!a.done;a=n.next()){var o=a.value;o.remove(this)}}catch(c){i={error:c}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}else u.remove(this);var r=this.initialTeardown;if(Ge(r))try{r()}catch(c){s=c instanceof kr?c.errors:[c]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var d=ya(h),l=d.next();!l.done;l=d.next()){var f=l.value;try{xu(f)}catch(c){s=s!=null?s:[],c instanceof kr?s=Sn(Sn([],En(s)),En(c.errors)):s.push(c)}}}catch(c){v={error:c}}finally{try{l&&!l.done&&(t=d.return)&&t.call(d)}finally{if(v)throw v.error}}}if(s)throw new kr(s)}},m.prototype.add=function(i){var e;if(i&&i!==this)if(this.closed)xu(i);else{if(i instanceof m){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(i)}},m.prototype._hasParent=function(i){var e=this._parentage;return e===i||Array.isArray(e)&&e.includes(i)},m.prototype._addParent=function(i){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i},m.prototype._removeParent=function(i){var e=this._parentage;e===i?this._parentage=null:Array.isArray(e)&&Ta(e,i)},m.prototype.remove=function(i){var e=this._finalizers;e&&Ta(e,i),i instanceof m&&i._removeParent(this)},m.EMPTY=function(){var i=new m;return i.closed=!0,i}(),m}(),pv=jn.EMPTY;function gv(m){return m instanceof jn||m&&"closed"in m&&Ge(m.remove)&&Ge(m.add)&&Ge(m.unsubscribe)}function xu(m){Ge(m)?m():m.unsubscribe()}var No={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ea={setTimeout:function(m,i){for(var e=[],v=2;v<arguments.length;v++)e[v-2]=arguments[v];var t=Ea.delegate;return t!=null&&t.setTimeout?t.setTimeout.apply(t,Sn([m,i],En(e))):setTimeout.apply(void 0,Sn([m,i],En(e)))},clearTimeout:function(m){var i=Ea.delegate;return((i==null?void 0:i.clearTimeout)||clearTimeout)(m)},delegate:void 0};function _M(m){Ea.setTimeout(function(){throw m})}function yu(){}var nn=null;function gn(m){if(No.useDeprecatedSynchronousErrorHandling){var i=!nn;if(i&&(nn={errorThrown:!1,error:null}),m(),i){var e=nn,v=e.errorThrown,t=e.error;if(nn=null,v)throw t}}else m()}var mv=function(m){Rs(i,m);function i(e){var v=m.call(this)||this;return v.isStopped=!1,e?(v.destination=e,gv(e)&&e.add(v)):v.destination=sA,v}return i.create=function(e,v,t){return new Sa(e,v,t)},i.prototype.next=function(e){this.isStopped||this._next(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,m.prototype.unsubscribe.call(this),this.destination=null)},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},i.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(jn),tA=Function.prototype.bind;function qr(m,i){return tA.call(m,i)}var eA=function(){function m(i){this.partialObserver=i}return m.prototype.next=function(i){var e=this.partialObserver;if(e.next)try{e.next(i)}catch(v){rn(v)}},m.prototype.error=function(i){var e=this.partialObserver;if(e.error)try{e.error(i)}catch(v){rn(v)}else rn(i)},m.prototype.complete=function(){var i=this.partialObserver;if(i.complete)try{i.complete()}catch(e){rn(e)}},m}(),Sa=function(m){Rs(i,m);function i(e,v,t){var s=m.call(this)||this,u;if(Ge(e)||!e)u={next:e!=null?e:void 0,error:v!=null?v:void 0,complete:t!=null?t:void 0};else{var n;s&&No.useDeprecatedNextContext?(n=Object.create(e),n.unsubscribe=function(){return s.unsubscribe()},u={next:e.next&&qr(e.next,n),error:e.error&&qr(e.error,n),complete:e.complete&&qr(e.complete,n)}):u=e}return s.destination=new eA(u),s}return i}(mv);function rn(m){_M(m)}function iA(m){throw m}var sA={closed:!0,next:yu,error:iA,complete:yu},nA=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function rA(m){return m}function aA(m){return m.length===0?rA:m.length===1?m[0]:function(e){return m.reduce(function(v,t){return t(v)},e)}}var Tu=function(){function m(i){i&&(this._subscribe=i)}return m.prototype.lift=function(i){var e=new m;return e.source=this,e.operator=i,e},m.prototype.subscribe=function(i,e,v){var t=this,s=hA(i)?i:new Sa(i,e,v);return gn(function(){var u=t,n=u.operator,a=u.source;s.add(n?n.call(s,a):a?t._subscribe(s):t._trySubscribe(s))}),s},m.prototype._trySubscribe=function(i){try{return this._subscribe(i)}catch(e){i.error(e)}},m.prototype.forEach=function(i,e){var v=this;return e=Eu(e),new e(function(t,s){var u=new Sa({next:function(n){try{i(n)}catch(a){s(a),u.unsubscribe()}},error:s,complete:t});v.subscribe(u)})},m.prototype._subscribe=function(i){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(i)},m.prototype[nA]=function(){return this},m.prototype.pipe=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return aA(i)(this)},m.prototype.toPromise=function(i){var e=this;return i=Eu(i),new i(function(v,t){var s;e.subscribe(function(u){return s=u},function(u){return t(u)},function(){return v(s)})})},m.create=function(i){return new m(i)},m}();function Eu(m){var i;return(i=m!=null?m:No.Promise)!==null&&i!==void 0?i:Promise}function oA(m){return m&&Ge(m.next)&&Ge(m.error)&&Ge(m.complete)}function hA(m){return m&&m instanceof mv||oA(m)&&gv(m)}var lA=cv(function(m){return function(){m(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Cn=function(m){Rs(i,m);function i(){var e=m.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i.prototype.lift=function(e){var v=new Su(this,this);return v.operator=e,v},i.prototype._throwIfClosed=function(){if(this.closed)throw new lA},i.prototype.next=function(e){var v=this;gn(function(){var t,s;if(v._throwIfClosed(),!v.isStopped){v.currentObservers||(v.currentObservers=Array.from(v.observers));try{for(var u=ya(v.currentObservers),n=u.next();!n.done;n=u.next()){var a=n.value;a.next(e)}}catch(o){t={error:o}}finally{try{n&&!n.done&&(s=u.return)&&s.call(u)}finally{if(t)throw t.error}}}})},i.prototype.error=function(e){var v=this;gn(function(){if(v._throwIfClosed(),!v.isStopped){v.hasError=v.isStopped=!0,v.thrownError=e;for(var t=v.observers;t.length;)t.shift().error(e)}})},i.prototype.complete=function(){var e=this;gn(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var v=e.observers;v.length;)v.shift().complete()}})},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),i.prototype._trySubscribe=function(e){return this._throwIfClosed(),m.prototype._trySubscribe.call(this,e)},i.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},i.prototype._innerSubscribe=function(e){var v=this,t=this,s=t.hasError,u=t.isStopped,n=t.observers;return s||u?pv:(this.currentObservers=null,n.push(e),new jn(function(){v.currentObservers=null,Ta(n,e)}))},i.prototype._checkFinalizedStatuses=function(e){var v=this,t=v.hasError,s=v.thrownError,u=v.isStopped;t?e.error(s):u&&e.complete()},i.prototype.asObservable=function(){var e=new Tu;return e.source=this,e},i.create=function(e,v){return new Su(e,v)},i}(Tu),Su=function(m){Rs(i,m);function i(e,v){var t=m.call(this)||this;return t.destination=e,t.source=v,t}return i.prototype.next=function(e){var v,t;(t=(v=this.destination)===null||v===void 0?void 0:v.next)===null||t===void 0||t.call(v,e)},i.prototype.error=function(e){var v,t;(t=(v=this.destination)===null||v===void 0?void 0:v.error)===null||t===void 0||t.call(v,e)},i.prototype.complete=function(){var e,v;(v=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||v===void 0||v.call(e)},i.prototype._subscribe=function(e){var v,t;return(t=(v=this.source)===null||v===void 0?void 0:v.subscribe(e))!==null&&t!==void 0?t:pv},i}(Cn),an=function(m){Rs(i,m);function i(e){var v=m.call(this)||this;return v._value=e,v}return Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i.prototype._subscribe=function(e){var v=m.prototype._subscribe.call(this,e);return!v.closed&&e.next(this._value),v},i.prototype.getValue=function(){var e=this,v=e.hasError,t=e.thrownError,s=e._value;if(v)throw t;return this._throwIfClosed(),s},i.prototype.next=function(e){m.prototype.next.call(this,this._value=e)},i}(Cn);const uA=1e3,os=10*60,bi=50,Go=1e3,fA=200,dA=2e3,Cu=3,Pu=200,vA=[{percent:90,congrats:"Excellent!"},{percent:80,congrats:"Unbelieveable!"},{percent:70,congrats:"Amazing!"},{percent:60,congrats:"Cool!"},{percent:50,congrats:"Perfect!"},{percent:40,congrats:"Very good!"},{percent:30,congrats:"Go, go, go!"},{percent:20,congrats:"Nice!"},{percent:10,congrats:"Not bad!"},{percent:0,congrats:"Correct!"}],cA=5,pA="Finally \u{1F600}",gA="Almost correct",us=3,mA=6,xA=["a","an","the","to","sth","sb","a/the"],Ru=/(\(.*?\))/,yA=["person","noun","verb","adverb","adjective","negative"],TA={score:0,successRatio:1,noOfMatchesOnFirstAttempt:0,noOfQuestionsAsked:0},_r={maxPoints:Go+bi,maxMultiplication:1,comboPoints:0},EA={maxPoints:fA+bi,maxMultiplication:1,comboPoints:0},SA={maxPoints:Go/2+bi,maxMultiplication:1,comboPoints:0};class xv{constructor(i,e){nt(this,"currentQuestion");nt(this,"questionQueue",[]);nt(this,"vocabulary");nt(this,"matrix");nt(this,"currentQuestionQueueIndex",-1);this.vocabulary=i,this.matrix=e,this.currentQuestionQueueIndex=-1}getNextQuestion(){if(this.currentQuestionQueueIndex<this.questionQueue.length-1)return this.currentQuestionQueueIndex++,this.currentQuestion=this.questionQueue[this.currentQuestionQueueIndex],this.currentQuestion.askedTimes++,this.currentQuestion.lastTimeAsked=new Date,this.currentQuestion}shuffleArray(i){for(let e=i.length-1;e>0;e--){const v=Math.floor(Math.random()*(e+1));[i[e],i[v]]=[i[v],i[e]]}return i}generateRandomNumber(i=0,e=100){const v=e-i;let t=Math.random();return t=Math.round(t*v),t=t+i,t}isValidWord(i){return i&&i!==""&&i.toLowerCase()!=="x"&&!i.toLowerCase().startsWith("x ")}removeStopWords(i){let e=[],v=i.split(" ");for(let t=0;t<v.length;t++){const s=v[t].split(".").join("");xA.includes(s.toLowerCase())||e.push(s)}return e.join(" ")}compareAnswerToExpected(i,e){e=e.trim().toLowerCase(),i=i.trim().toLowerCase(),i=i.replace(new RegExp(Ru,"g"),""),e=e.replace(new RegExp(Ru,"g"),"");let v;const t=i===e;let s=this.getExpectedAnswerItems(i);return s=s.map(u=>u.trim()),v=s.find(u=>u.trim()===e.trim()?u:this.removeStopWords(u).trim()===e),!!(t||v)}getExpectedAnswerItems(i){let e=[];return i.includes("/")?e=i.split("/"):e=[i],e}repeatTheSameQuestionSoon(){const i=this.currentQuestion.repeatAfter,e=this.questionQueue.splice(this.currentQuestionQueueIndex,1)[0];this.questionQueue.splice(this.currentQuestionQueueIndex+i,0,e),this.currentQuestionQueueIndex=this.currentQuestionQueueIndex-1,this.currentQuestion.repeatAfter=i-1,this.currentQuestion.repeatAfter<0&&(this.currentQuestion.repeatAfter=0)}repeatTheSameQuestionLater(){const i=this.questionQueue.splice(this.currentQuestionQueueIndex,1)[0];this.questionQueue.splice(this.currentQuestionQueueIndex+mA,0,i),this.currentQuestionQueueIndex=this.currentQuestionQueueIndex-1,this.currentQuestion.repeatAfter=us,this.currentQuestion.repeatAfter<0&&(this.currentQuestion.repeatAfter=0)}repeatTheSameQuestionIfNeeded(i){!i.isValid||i.noOfMatches!==i.noOfExpectedMatches?this.repeatTheSameQuestionSoon():this.currentQuestion.repeatAfter!==us&&this.repeatTheSameQuestionLater()}}class CA extends xv{constructor(i,e){super(i,e),this.initQuestionQueue()}initQuestionQueue(){this.shuffleArray(this.vocabulary).forEach(e=>{const v={item:e,expectedAnswer:e.word,noOfExpectedAnswerItems:1,points:0,askedTimes:0,lastTimeAsked:null,repeatAfter:us,isMatchOnFirstAttempt:!1};this.questionQueue.push(v)})}evaluateAnswer(i,e){const v=e.maxPoints+e.comboPoints,t=this.currentQuestion.expectedAnswer,s=this.currentQuestion.noOfExpectedAnswerItems,u=this.compareAnswerToExpected(t,i);let n={text:i,expectedText:t,isValid:!!u,points:u?v:0,noOfMatches:u?1:0,noOfExpectedMatches:s};return this.repeatTheSameQuestionIfNeeded(n),n}}class PA extends xv{constructor(i,e){super(i,e),this.initQuestionQueue()}initQuestionQueue(){this.shuffleArray(this.matrix).forEach(e=>{const v=this.getRandomType(e),t=e[v.answerType],s=this.getExpectedAnswerItems(t).length,n={item:{matrix:e,wordType:v.wordType,answerType:v.answerType,word:e[v.wordType]},expectedAnswer:t,noOfExpectedAnswerItems:s,points:0,askedTimes:0,lastTimeAsked:null,repeatAfter:us,isMatchOnFirstAttempt:!1};this.questionQueue.push(n)})}getNumberOfExpectedAnswerItems(i){}evaluateAnswer(i,e){const v=e.maxPoints+e.comboPoints,t=this.currentQuestion.expectedAnswer,s=this.currentQuestion.noOfExpectedAnswerItems;let u=0;if(i.includes(",")){let o=i.split(",");o=[...new Set(o)];for(let r of o)this.compareAnswerToExpected(t,r)&&u++}else this.compareAnswerToExpected(t,i)&&(u=1);let a={text:i,expectedText:t,isValid:!!u,points:u?v*u:0,noOfMatches:u,noOfExpectedMatches:s};return this.repeatTheSameQuestionIfNeeded(a),a}getRandomType(i){let e=[];yA.forEach(n=>{this.isValidWord(i[n])&&e.push(n)});let v=this.generateRandomNumber(0,e.length-1);const t=e.splice(v,1);v=this.generateRandomNumber(0,e.length-1);const s=e.splice(v,1);return{wordType:t[0],answerType:s[0]}}}class RA{constructor(i){nt(this,"dataStore");nt(this,"trainer");nt(this,"questionQueueItem",new an(null));nt(this,"QuestionQueueItem$",this.questionQueueItem.asObservable());nt(this,"answer",new Cn);nt(this,"answer$",this.answer.asObservable());nt(this,"score",new an(TA));nt(this,"score$",this.score.asObservable());nt(this,"pointsSettings",new an(_r));nt(this,"pointsSettings$",this.pointsSettings.asObservable());nt(this,"gameStatus",new Cn);nt(this,"gameStatus$",this.gameStatus.asObservable());nt(this,"gameTime",new an(os));nt(this,"gameTime$",this.gameTime.asObservable());nt(this,"maxPointsTickInterval");nt(this,"gameTickInterval");nt(this,"noOfLastMatchesOnFirstAttempt",0);this.dataStore=new vv;const e=this.dataStore.vocabulary,v=this.dataStore.matrix;switch(i){case"vocabulary":this.trainer=new CA(e,v);break;case"matrix":this.trainer=new PA(e,v);break;default:console.error(`gameController: unknown trainerType '${i}'`)}}setAnswer(i){var n;this.stopPointsTicker();const e=this.trainer.evaluateAnswer(i,this.pointsSettings.getValue()),v=this.questionQueueItem.getValue(),t=(n=v==null?void 0:v.noOfExpectedAnswerItems)!=null?n:1,s=e.isValid&&e.noOfMatches===e.noOfExpectedMatches&&(v==null?void 0:v.askedTimes)===1;s?this.noOfLastMatchesOnFirstAttempt++:this.noOfLastMatchesOnFirstAttempt=0,v.isMatchOnFirstAttempt=s;let u=this.score.getValue();u={score:u.score+e.points,successRatio:e.noOfMatches/t,noOfMatchesOnFirstAttempt:s?u.noOfMatchesOnFirstAttempt+1:u.noOfMatchesOnFirstAttempt,noOfQuestionsAsked:(v==null?void 0:v.askedTimes)===1?u.noOfQuestionsAsked+1:u.noOfQuestionsAsked},this.score.next(u),e.noOfExpectedMatches=t,e.congrats=this.getCongrats(e),this.answer.next(e)}getCongrats(i){var t,s;const e=this.score.getValue().successRatio;if(((s=(t=this.questionQueueItem.getValue())==null?void 0:t.askedTimes)!=null?s:1)>=cA&&e===1)return pA;if(e<1)return gA;{const u=Math.floor(this.pointsSettings.getValue().maxPoints/Go*100),n=vA.find(a=>a.percent<u);return n==null?void 0:n.congrats}}nextQuestionQueueItem(){const i=this.trainer.getNextQuestion();i!==void 0?this.questionQueueItem.next(i):this.stopGame()}startGameTimeTicker(){this.gameTickInterval=setInterval(()=>{this.gameTimeTick()},uA)}stopGameTimeTicker(){clearInterval(this.gameTickInterval)}startPointsTicker(){var e;const i=(e=this.questionQueueItem.getValue())==null?void 0:e.repeatAfter;i===0?this.pointsSettings.next(EA):i&&i<us?this.pointsSettings.next(SA):this.pointsSettings.next(_r),this.maxPointsTickInterval=setInterval(()=>{this.nextPointsSettings()},dA),this.nextPointsSettings()}nextPointsSettings(){var e;const i=this.questionQueueItem.getValue();if(this.pointsSettings.getValue().maxPoints>=bi+bi){const v=this.pointsSettings.getValue().maxPoints-bi,t={maxPoints:v,maxMultiplication:(e=i==null?void 0:i.noOfExpectedAnswerItems)!=null?e:_r.maxMultiplication,comboPoints:this.getComboPoints(v)};this.pointsSettings.next(t)}}getComboPoints(i){let e=0;return i>=Pu&&this.noOfLastMatchesOnFirstAttempt>=Cu&&(e=Pu*(this.noOfLastMatchesOnFirstAttempt-Cu+1)),e}gameTimeTick(){const i=this.gameTime.getValue();this.gameTime.next(i-1)}startGame(){this.nextQuestionQueueItem(),this.gameTime.next(os),this.startGameTimeTicker(),this.startPointsTicker()}stopGame(){this.stopGameTimeTicker(),this.stopPointsTicker();const i=this.score.getValue(),e={status:"gameOver",score:i};this.gameStatus.next(e)}stopPointsTicker(){clearInterval(this.maxPointsTickInterval)}}class Ms extends Phaser.Scene{constructor(e){super(e);nt(this,"rexUI");nt(this,"dataStore");nt(this,"gameController");nt(this,"initData");nt(this,"answerElement");nt(this,"enableWaitForKey",!0);nt(this,"meaning")}setInitData(e){this.initData=e,this.dataStore=e.dataStore,this.gameController=e.gameController}init(e){this.setInitData(e)}preload(){this.load.html("answer-form","assets/text/single-answer-form.html"),this.load.html("meaning","assets/text/meaning.html"),this.load.audio("woosh","assets/sounds/woosh.mp3"),this.load.audio("collect","assets/sounds/collect.mp3"),this.load.audio("ding","assets/sounds/ding2.mp3")}create(){this.initData.gameController.gameStatus$.subscribe(e=>{e.status==="gameOver"&&this.scene.start("GameOverScene",Hi({},this.initData))}),this.scale.on("resize",this.resize,this),this.game.scale.on("orientationchange",e=>{console.log(e)})}gameStarted(){this.gameController.startGame()}resize(e,v,t,s){console.log("resize");var u=e.width,n=e.height;this.cameras.resize(u,n)}createMeaning(e,v,t,s){const n=this.add.dom(e,v).createFromCache("meaning").setScale(t).getChildByID("meaning");n.innerText=s,this.meaning=n}createAnswerInput(e,v,t,s){let u=this.add.dom(e-20,v).createFromCache("answer-form").setScale(t).setPerspective(800).addListener("keyup");const n=u.getChildByName("answer");return n.focus(),n.placeholder=s,u.on("keyup",a=>{a.keyCode===13&&this.enableWaitForKey===!0&&(this.enableWaitForKey=!1,a.preventDefault(),u.removeListener("keyup"),this.dataStore.currentAnswer=n.value,this.gameController.setAnswer(n.value),this.tweens.add({targets:u.rotate3d,x:1,w:90,duration:500,ease:"Power3"}),this.tweens.add({targets:u,scaleX:2,scaleY:2,y:700,alpha:0,duration:500,ease:"Power3",onComplete:()=>{u.destroy(),this.enableWaitForKey=!0}}))}),n}async asyncLoader(e){return new Promise(v=>{e.on("filecomplete",()=>v(!0)).on("loaderror",()=>v(!0)),e.start()})}async preloadSound(e,v){}playSound(e){}playSoundNo(){this.sound.play("woosh")}playSoundYes(){this.sound.play("collect")}}const MA={matrix:"GameMatrixScene",vocabulary:"GameVocabularyScene"};class AA extends Ms{constructor(){super("IntroScene")}preload(){this.load.html("nameform","assets/text/login-form.html")}startGame(i){this.gameController=new RA(i),this.setInitData({dataStore:this.dataStore,gameController:this.gameController}),this.scene.start(MA[i],Hi({},this.initData))}create(){this.dataStore=new vv;let i=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY-50,"Matrix",{font:"36px Arial Black"}).setOrigin(.5).setPadding(10).setStroke("#00f",16).setShadow(2,2,"#333333",2,!0,!0).setInteractive({useHandCursor:!0}).on("pointerdown",()=>this.startGame("matrix"),this).on("pointerover",()=>i.setStyle({fill:"#63D5F7"})).on("pointerout",()=>i.setStyle({fill:"#FFF"})),e=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY+50,"Vocabulary",{font:"36px Arial Black"}).setOrigin(.5).setPadding(10).setStroke("#00f",16).setShadow(2,2,"#333333",2,!0,!0).setInteractive({useHandCursor:!0}).on("pointerdown",()=>this.startGame("vocabulary"),this).on("pointerover",()=>e.setStyle({fill:"#63D5F7"})).on("pointerout",()=>e.setStyle({fill:"#FFF"}))}loginForm(){var i=this.add.dom(850,600).createFromCache("nameform").setScale(1.5).setPerspective(800).addListener("click").on("click",e=>{if(e.target.name==="loginButton"){const v=i.getChildByName("username"),t=i.getChildByName("password");v.value!==""&&t.value!==""?(i.removeListener("click"),this.tweens.add({targets:i.rotate3d,x:1,w:90,duration:3e3,ease:"Power3"}),this.tweens.add({targets:i,scaleX:2,scaleY:2,y:700,duration:3e3,ease:"Power3",onComplete:function(){i.setVisible(!1)}}),this.dataStore.userName=v.value):this.tweens.add({targets:i,alpha:.1,duration:200,ease:"Power3",yoyo:!0})}});this.tweens.add({targets:i,y:400,duration:2500,ease:"Power3"})}}const OA=360,wi=600;class LA extends Ms{constructor(){super("GameVocabularyScene");nt(this,"QuestionQueueItem$");nt(this,"answer$");nt(this,"answerInput")}init(e){super.init(e)}preload(){super.preload()}create(){super.create(),this.scene.run("ScoreScene",Hi({},this.initData)),this.createMeaning(this.cameras.main.centerX,OA,1,"What is ... ?"),this.QuestionQueueItem$=this.gameController.QuestionQueueItem$.subscribe(e=>{if(e){this.meaning.innerText=e.item.meaning;const v=-`${e.item.type}`||"";this.answerInput=this.createAnswerInput(this.cameras.main.centerX,wi,2.5,`Your answer${v}`),this.preloadSound(e.item.word,"expectedAnswer")}}),this.answer$=this.gameController.answer$.subscribe(e=>{e.isValid?(console.log("yes!"),this.playSoundYes(),this.showCongratulationAndGetQuestion(e)):(console.log("no!"),this.playSoundNo(),this.playSound("expectedAnswer"),this.showCorrectAnswerAndGetQuestion(e))}),this.gameStarted()}showCongratulationAndGetQuestion(e){var t;const v=this.add.text(this.cameras.main.centerX,wi-30,(t=e.congrats)!=null?t:"...").setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0);this.tweens.add({targets:v,scaleX:2,scaleY:2,duration:1e3,ease:"Power3",onComplete:()=>{this.waitForEnterAndContinueAfterCongrats(v)}})}waitForEnterAndContinueAfterCongrats(e){this.input.keyboard.on("keyup",v=>{v.keyCode===13&&(v.preventDefault(),this.input.keyboard.removeListener("keyup"),e.destroy(),this.gameController.nextQuestionQueueItem())})}showCorrectAnswerAndGetQuestion(e){const v=this.add.text(this.cameras.main.centerX,wi-30,e.text).setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0);this.tweens.add({targets:v,y:wi+60,alpha:.4,duration:1e3,ease:"Power3"}),this.tweens.add({targets:v,scaleX:2,scaleY:2,duration:1e3,ease:"Power3"});const t=this.add.text(this.cameras.main.centerX,wi+30,e.expectedText).setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0);this.tweens.add({targets:t,y:wi-60,duration:1e3,ease:"Power3"}),this.tweens.add({targets:t,scaleX:2,scaleY:2,duration:1e3,ease:"Power3",onComplete:()=>{this.waitForEnterAndContinueAfterCorrectAnswer(t,v)}})}waitForEnterAndContinueAfterCorrectAnswer(e,v){this.input.keyboard.on("keyup",t=>{t.keyCode===13&&(t.preventDefault(),this.input.keyboard.removeListener("keyup"),e.destroy(),v.destroy(),this.gameController.nextQuestionQueueItem())})}}const on=310,ta=40,Je=600;class FA extends Ms{constructor(){super("GameMatrixScene");nt(this,"questionPart2");nt(this,"questionPart3");nt(this,"questionPart4");nt(this,"questionPart5");nt(this,"QuestionQueueItem$");nt(this,"answer$");nt(this,"answerInput")}init(e){super.init(e)}preload(){super.preload()}create(){super.create(),this.scene.run("ScoreScene",Hi({},this.initData)),this.questionPart2=this.add.text(this.cameras.main.centerX,on,"").setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0),this.questionPart3=this.add.text(this.cameras.main.centerX,on+ta,"from").setStyle({font:"18px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#00f",2).setShadow(2,2,"#333333",2,!0,!0),this.questionPart4=this.add.text(this.cameras.main.centerX,on+ta*2,"").setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#00f",4).setShadow(2,2,"#333333",2,!0,!0),this.questionPart5=this.add.text(this.cameras.main.centerX,on+ta*3+15,"").setStyle({font:"36px Arial Black",wordWrap:{width:900,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#00f",4).setShadow(2,2,"#333333",2,!0,!0),this.QuestionQueueItem$=this.gameController.QuestionQueueItem$.subscribe(e=>{e&&(this.questionPart2.setText(e.item.answerType),this.questionPart4.setText(e.item.wordType),this.questionPart5.setText(e.item.word),this.answerInput=this.createAnswerInput(this.cameras.main.centerX,Je,2.5,`Your answer - ${e.item.answerType}`))}),this.answer$=this.gameController.answer$.subscribe(e=>{e.isValid?(console.log("yes!"),this.playSoundYes(),this.showCongratulationAndGetQuestion(e)):(console.log("no!"),this.playSoundNo(),this.showCorrectAnswerAndGetQuestion(e))}),this.gameStarted()}showCongratulationAndGetQuestion(e){var s;let v;e.noOfExpectedMatches!==e.noOfMatches&&(v=this.add.text(this.cameras.main.centerX,Je-30,e.expectedText).setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0),this.tweens.add({targets:v,y:Je+60,duration:1e3,ease:"Power3"}));const t=this.add.text(this.cameras.main.centerX,Je-30,(s=e.congrats)!=null?s:"...").setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0);this.tweens.add({targets:t,scaleX:2,scaleY:2,duration:1e3,ease:"Power3",onComplete:()=>{this.waitForEnterAndContinueAfterShowCongrats(t,v)}})}showCorrectAnswerAndGetQuestion(e){const v=this.add.text(this.cameras.main.centerX,Je-30,e.text).setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0);this.tweens.add({targets:v,y:Je+60,alpha:.4,duration:1e3,ease:"Power3"}),this.tweens.add({targets:v,scaleX:2,scaleY:2,duration:1e3,ease:"Power3"});const t=this.add.text(this.cameras.main.centerX,Je+30,e.expectedText).setStyle({font:"24px Arial Black",wordWrap:{width:800,useAdvancedWrap:!0}}).setOrigin(.5).setStroke("#0f0",4).setShadow(2,2,"#333333",2,!0,!0);this.tweens.add({targets:t,y:Je-60,duration:1e3,ease:"Power3"}),this.tweens.add({targets:t,scaleX:2,scaleY:2,duration:1e3,ease:"Power3",onComplete:()=>{this.waitForEnterAndContinueAfterShowCorrectAnswer(t,v)}})}waitForEnterAndContinueAfterShowCorrectAnswer(e,v){this.input.keyboard.on("keyup",t=>{t.keyCode===13&&(t.preventDefault(),this.input.keyboard.removeListener("keyup"),this.gameController.nextQuestionQueueItem(),e.destroy(),v.destroy())})}waitForEnterAndContinueAfterShowCongrats(e,v){this.input.keyboard.on("keyup",t=>{t.keyCode===13&&(t.preventDefault(),this.input.keyboard.removeListener("keyup"),e.destroy(),v==null||v.destroy(),this.gameController.nextQuestionQueueItem())})}}const di=100;class IA extends Ms{constructor(){super("ScoreScene");nt(this,"score");nt(this,"maxPoints");nt(this,"maxMultiplication");nt(this,"successRatio");nt(this,"timeLeft");nt(this,"successPercentage");nt(this,"comboPoints");nt(this,"score$");nt(this,"maxPoints$")}init(e){super.init(e)}create(){this.score=this.add.text(this.cameras.main.centerX,di+80,"0000000").setStyle({font:"74px Arial Black"}).setOrigin(.5).setStroke("#00f",16).setShadow(2,2,"#333333",2,!0,!0),this.maxPoints=this.add.text(this.cameras.main.centerX,di+145,"+0000").setStyle({font:"24px Arial Black"}).setOrigin(.5).setStroke("#00f",4).setShadow(2,2,"#333333",2,!0,!0),this.maxMultiplication=this.add.text(this.cameras.main.centerX+90,di+140,"x 1").setStyle({font:"36px Arial Black"}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),this.successRatio=this.add.text(this.cameras.main.centerX+200,di+140,"").setStyle({font:"36px Arial Black"}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),this.timeLeft=this.add.text(this.cameras.main.centerX,di-10,"").setStyle({font:"24px Arial Black"}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),this.comboPoints=this.add.text(this.cameras.main.centerX-83,di+145,"").setStyle({font:"24px Arial Black"}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),this.score$=this.gameController.score$.subscribe(e=>{this.setScore(e)}),this.maxPoints$=this.gameController.pointsSettings$.subscribe(e=>{this.setMaxPoints(e.maxPoints),this.setMaxMultiplication(e.maxMultiplication),this.setComboPoints(e.comboPoints)}),this.initData.gameController.gameStatus$.subscribe(e=>{e.status==="gameOver"&&(this.maxPoints.setText(""),this.maxMultiplication.setText(""),this.comboPoints.setText(""),this.setSuccessPercentage(e.score))}),this.initData.gameController.gameTime$.subscribe(e=>{this.setTimeLeft(e)})}setScore(e){this.score.text=String(e.score).padStart(6,"0"),this.maxMultiplication.text!==""&&this.successRatio.setText(String(Math.round(e.successRatio*100))+"%")}setSuccessPercentage(e){this.successPercentage=this.add.text(this.cameras.main.centerX,di+145,"").setStyle({font:"36px Arial Black"}).setOrigin(.5).setStroke("#f00",4).setShadow(2,2,"#333333",2,!0,!0),e.noOfQuestionsAsked?this.successPercentage.text=String(Math.round(e.noOfMatchesOnFirstAttempt/e.noOfQuestionsAsked*100)+"%"):this.successPercentage.text=""}setMaxPoints(e){this.maxPoints.text="+"+String(e).padStart(4,"0")}setComboPoints(e){e!==0?this.comboPoints.text="+"+String(e).padStart(4,"0"):this.comboPoints.text=""}setMaxMultiplication(e){this.successRatio.setText(""),e!==1?this.maxMultiplication.text="x "+e:this.maxMultiplication.text=""}setTimeLeft(e){e<=os&&e>os-5?(this.timeLeft.setText("Running 10 minutes game"),e===os&&this.sound.play("ding")):e<500&&e>500-5?(this.timeLeft.setText("5 minutes left"),e===500&&this.sound.play("ding")):e<100&&e>100-5?(this.timeLeft.setText("1 minute left"),e===100&&this.sound.play("ding")):e<50&&e>0?this.timeLeft.setText(`${e} seconds left`):this.timeLeft.setText(""),e<=0&&(this.gameController.stopGame(),this.timeLeft.setText(""))}update(){}}class wA extends Ms{constructor(){super("GameOverScene")}init(i){super.init(i)}create(){const i=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY,"Game Over",{font:"74px Arial Black"}).setOrigin(.5).setStroke("#00f",16).setShadow(2,2,"#333333",2,!0,!0);this.tweens.add({targets:i,scale:3,duration:1500,ease:"Sine.inOut",yoyo:!0,repeat:0}),this.input.once("pointerdown",e=>{},this)}update(){}}new hn.Game(Object.assign(jM,{scene:[AA,LA,FA,IA,wA]}));
